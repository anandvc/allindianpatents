<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/272706-digital-broadcasting-system-and-method-of-processing-data-in-digital-broadcasting-system by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 00:49:35 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 272706:DIGITAL BROADCASTING SYSTEM AND METHOD OF PROCESSING DATA IN DIGITAL BROADCASTING SYSTEM</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">DIGITAL BROADCASTING SYSTEM AND METHOD OF PROCESSING DATA IN DIGITAL BROADCASTING SYSTEM</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>A digital broadcasting system and a data processing method are disclosed. A receiving system of the digital broadcasting system includes a receiving unit, a demodulator, an equalizer, a block decoder, and a RS frame decoder. The receiving unit receives a broadcast signal including mobile service data and main service data. The mobile service data may configure a RS frame. The RS frame includes at least one data packet for the mobile service data. RS parity generated based on the at least one data packet, and CRC checksum generated based on the at least one data packet and the RS parity. The demodulator converts RS frame data included in the broadcast signal received by the receiving unit into a baseband RS frame data. The equalizer performs channel equalization on the data demodulated by the demodulator. The block decoder performs symbol-decoding on the data channel-equalized by the equalizer in block units. The RS frame decoder performs CRC-decoding and RS-decoding on the decoded mobile service data in RS frame units, thereby correcting errors occurred in the mobile service data within the RS frame.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>Description<br>
DIGITAL BROADCASTING SYSTEM AND METHOD OF<br>
PROCESSING DATA IN DIGITAL BROADCASTING<br>
SYSTEM<br>
Technical Field<br>
[1]            The present invention relates to a digital broadcasting system and a method of<br>
processing data in a digital broadcasting system for transmitting and receiving digital<br>
broadcast signals.<br>
Background Art<br>
[2]            The Vestigial Sideband (VSB) transmission mode, which is adopted as the standard<br>
for digital broadcasting in North America and the Republic of Korea, is a system using<br>
a single carrier method. Therefore, the receiving performance of the digital broadcast<br>
receiving system may be deteriorated in a poor channel environment. Particularly,<br>
since resistance to changes in channels and noise is more highly required when using<br>
portable and/or mobile broadcast receivers, the receiving performance may be even<br>
more deteriorated when transmitting mobile service data by the VSB transmission<br>
mode.<br>
Disclosure of Invention<br>
Technical Problem<br>
[3]            Accordingly, the present invention is to provide a digital broadcasting system and a<br>
data processing method that are highly resistant to channel changes and noise.<br>
[4]            The present invention is to provide a digital broadcasting system and a data<br>
processing method that can enhance the receiving performance of the receiving system<br>
by performing additional encoding on mobile service data and by transmitting the<br>
processed data to the receiving system.<br>
[5]            The present invention is to provide a digital broadcasting system and a data<br>
processing method that can also enhance the receiving performance of the receiving<br>
system by inserting known data already known in accordance with a pre-agreement<br>
between the receiving system and the transmitting system in a predetermined region<br>
within a data region.<br>
Technical Solution<br>
[6]            To achieve these objects and other advantages and in accordance with the purpose of<br>
the invention, as embodied and broadly described herein, a digital broadcast<br>
transmitting system may include a service multiplexer and a transmitter. The service<br>
multiplexer may multiplex mobile service data and main service data at a pre-<br>
determined coding rate and may transmit the multiplexed data to the transmitter. The<br>
transmitter may perform additional encoding on the mobile service data being<br>
transmitted from the service multiplexer. The transmitter may also group a plurality of<br>
additionally encoded mobile service data packets so as to form a data group. The<br>
transmitter may multiplex mobile service data packets including mobile service data<br>
and main service data packets including main service data in packet units and may<br>
transmit the multiplexed data packets to a digital broadcast receiving system.<br>
[7]            Herein, the data group may be divided into a plurality of regions depending upon a<br>
degree of interference of the main service data. Also, a long known data sequence may<br>
be periodically inserted in regions without interference of the main service data.<br>
[8]            Also, a digital broadcast receiving system according to an embodiment of the present<br>
invention may be used for modulating and channel equalizing the known data<br>
sequence.<br>
[9]            In another aspect of the present invention, a receiving system includes a receiving<br>
unit, a demodulator, an equalizer, a block decoder, and a RS frame decoder. The<br>
receiving unit receives a broadcast signal including mobile service data and main<br>
service data. The mobile service data may configure a RS frame. The RS frame<br>
includes at least one data packet for the mobile service data, RS parity generated based<br>
on the at least one data packet, and CRC checksum generated based on the at least one<br>
data packet and the RS parity. The demodulator converts RS frame data included in the<br>
broadcast signal received by the receiving unit into a baseband RS frame data. The<br>
equalizer performs channel equalization on the data demodulated by the demodulator.<br>
The block decoder performs symbol-decoding on the data channel-equalized by the<br>
equalizer in block units. The RS frame decoder performs CRC-decoding and RS-<br>
decoding on the decoded mobile service data in RS frame units, thereby correcting<br>
errors occurred in the mobile service data within the RS frame.<br>
[10]          A data group configures a RS frame, N number of known data sequences are inserted<br>
in some regions among a plurality of regions within the data group, and a transmission<br>
parameter is inserted between a first known data sequence and a second known data<br>
sequence, among the N number of known data sequences.<br>
[11]          The receiving system may include a transmission parameter detector for detecting the<br>
transmission parameter, and a power controller for controlling power based upon the<br>
detected transmission parameter, thereby receiving a slot which a data group including<br>
requested mobile service data is assigned.<br>
[12]          The receiving system may include a known sequence detector for detecting the<br>
known data, the equalizer channel-equalizes the mobile service data using the detected<br>
known data.<br>
[13]          In the receiving system, one RS frame data may be assigned to at least some regions<br>
among a plurality of data group, the data group configuring a plurality of regions, and<br>
then the assigned RS frame data is received.<br>
[14]         In the receiving system, one RS frame data among a plurality of RS frame may be<br>
assigned to some regions among a plurality of data group, the data group configuring a<br>
plurality of regions, and the other RS frame data may be assigned to the remaining<br>
regions within the corresponding data group, and then the assigned RS frame data is<br>
received.<br>
[15]         In another aspect of the present invention, a method for processing data in a<br>
receiving system includes the steps of receiving a broadcast signal including mobile<br>
service data and main service data, the mobile service data configuring a RS frame, the<br>
RS frame including at least one data packet for the mobile service data, RS parity<br>
generated based on the at least one data packet, and CRC checksum generated based<br>
on the at least one data packet and the RS parity, converting RS frame data included in<br>
the received broadcast signal into a baseband RS frame data, performing channel<br>
equalization on the demodulated data, performing symbol-decoding on the channel-<br>
equalized data in block units, and performing CRC-decoding and RS-decoding on the<br>
decoded mobile service data in RS frame units, thereby correcting errors occurred in<br>
the mobile service data within the RS frame.<br>
[16]         The objectives and other advantages of the invention may be realized and attained by<br>
the structure particularly pointed out in the written description hereof as well as the<br>
appended drawings.<br>
Advantageous Effects<br>
[17]         The digital broadcasting system and data processing method according to the present<br>
invention have the following advantages. More specifically, the digital broadcasting<br>
system and data processing method according to the present invention is robust against<br>
(or resistant to) any error that may occur when transmitting mobile service data<br>
through a channel. And, the present invention is also highly compatible to the con-<br>
ventional system. Moreover, the present invention may also receive the mobile service<br>
data without any error even in channels having severe ghost effect and noise.<br>
[18]         By inserting known data in specific positions (or places) within a data region, the<br>
present invention may enhance the receiving performance of the receiving system in an<br>
environment undergoing frequent channel changes.<br>
[19]         Finally, the present invention is even more effective when applied to mobile and<br>
portable receivers, which are also liable to a frequent change in channel and which<br>
require protection (or resistance) against intense noise.<br>
Brief Description of Drawings<br>
[20]         The accompanying drawings, which are included to provide a further understanding<br>
of the invention and are incorporated in and constitute a part of this application,<br>
illustrate embodiment(s) of the invention and together with the description serve to<br>
explain the principle of the invention. In the drawings:<br>
[21]          FIG. 1 illustrates a structure of a MPH frame for transmitting and receiving mobile<br>
service data according to the present invention;<br>
[22]          FIG. 2 illustrates an exemplary structure of a VSB frame;<br>
[23]          FIG. 3 illustrates a block diagram showing a general structure of a transmitting<br>
system according to an embodiment of the present invention;<br>
[24]          FIG. 4 illustrates a block diagram showing an example of a service multiplexer;<br>
[25]          FIG. 5 illustrates a block diagram showing an example of a transmitter according to<br>
an embodiment of the present invention;<br>
[26]          FIG. 6 illustrates a block diagram showing an example of a pre-processor according<br>
to the present invention;<br>
[27]          FIG. 7 illustrates RS encoding processes according to an embodiment of the present<br>
invention;<br>
[28]          FIG. 8 illustrates an example of performing a row permutation (or interleaving)<br>
process in super frame units according to the present invention;<br>
[29]          FIG. 9 and FIG. 10 illustrate examples of RS frames according to the present<br>
invention;<br>
[30]          FIG. 11 illustrates a structure of data group after being data interleaved according to<br>
the present invention;<br>
[31]          FIG. 12 illustrates a structure of data group before being data interleaved according<br>
to the present invention;<br>
[32]          FIG. 13 illustrates an exemplary process of dividing an RS frame for configuring a<br>
data group according to the present invention;<br>
[33]          FIG. 14 illustrates a mapping example of the positions to which the first 4 slots of a<br>
sub-frame are assigned with respect to a VSB frame according to the present invention;<br>
[34]          FIG. 15 illustrates an example of data groups of a single ensemble being assigned (or<br>
allocated) to an MPH frame;<br>
[35]          FIG. 16 illustrates an example of data groups of two ensembles being assigned (or<br>
allocated) to an MPH frame;<br>
[36]          FIG. 17 illustrates an example of data groups of three ensembles being assigned (or<br>
allocated) to an MPH frame;<br>
[37]          FIG. 18 to FIG. 20 illustrate examples of signaling information according to the<br>
present invention;<br>
[38]          FIG. 21 illustrates an example of power saving of in a receiver in a slot unit<br>
according to the present invention:<br>
[39]          FIG. 22 illustrates examples of MPH-related information according to the present<br>
invention;<br>
[40]          FIG. 23(a) to FIG. 23(e) illustrate an example of signalng information scenario being<br>
transmitted in signaling information region according to the present invention;<br>
[41]          FIG. 24 illustrates a block diagram of a block processor according to an embodiment<br>
of the present invention;<br>
[42]          FIG. 25 to FIG. 27 illustrate block views showing exemplary operations of the<br>
symbol encoder having the coding rate of 1/4 according to an embodiment of the<br>
present invention;<br>
[43]          FIG. 28 illustrates a detailed block diagram of a 1/2 outer encoder according to an<br>
embodiment of the present invention;<br>
[44]          FIG. 29 illustrates a detailed block diagram of a 1/4 outer encoder according to an<br>
embodiment of the present invention;<br>
[45]          FIG. 30(a) to FIG. 30(c) illustrate a variable length interleaving process of a symbol<br>
interleaver according to an embodiment of the present invention;<br>
[46]          FIG. 31 and FIG. 32 illustrate a block diagram showing a structure of a block<br>
processor according to another embodiment of the present invention;<br>
[47]          FIG. 33(a) to FIG. 33(c) illustrate examples of block-encoding and trellis-encoding<br>
processes according to an embodiment of the present invention;<br>
[48]          FIG. 34 illustrates a block diagram of a trellis encoding module according to an<br>
embodiment of present invention;<br>
[49]          FIG. 35 and FIG. 36 illustrate a concatenation between a block processor and a trellis<br>
encoding module according to the present invention;<br>
[50]          FIG. 37 illustrates a block diagram showing a structure of a block processor<br>
according to another embodiment of the present invention;<br>
[51]          FIG. 38 illustrates a block diagram of a demodulating unit of a receiving system<br>
according to an embodiment of the present invention;<br>
[52]          FIG. 39 illustrates a data structure showing an example of known data being pe-<br>
riodically inserted in valid data according to the present invention;<br>
[53]          FIG. 40 illustrates a block diagram of a demodulator according to an embodiment of<br>
the present invention;<br>
[54]          FIG. 41 illustrates a detailed block diagram of the demodulator;<br>
[55]          FIG. 42 illustrates a block diagram of a frequency offset estimator according to an<br>
embodiment of the present invention;<br>
[56]          FIG. 43 illustrates a block diagram of a known data detector and initial frequency<br>
offset estimator according to the present invention;<br>
[57]          FIG. 44 illustrates a block diagram of a partial correlator shown in FIG. 43;<br>
[58]          FIG. 45 illustrates an example of the timing recovery unit according to the present<br>
invention:<br>
[59]          FIG. 46(a) and FIG. 46(b) illustrate examples of detecting timing error in a time<br>
domain;<br>
[60]          FIG. 47(a) and FIG. 47(b) illustrate other examples of detecting timing error in a<br>
time domain;<br>
[61]          FIG. 48 illustrates an example of detecting timing error using correlation values of<br>
FIG. 46 and FIG. 47;<br>
[62]          FIG. 49 illustrates an example of a timing error detector for detecting timing error in<br>
a time domain according to the present invention;<br>
[63]          FIG. 50 illustrates an example of a timing error detector for detecting timing<br>
frequency error according to the present invention;<br>
[64]          FIG. 51 illustrates another example of a timing error detector for detecting timing<br>
frequency error according to the present invention;<br>
[65]          FIG. 52 illustrates a block diagram of a DC remover according to an embodiment of<br>
the present invention;<br>
[66]          FIG. 53 illustrates an example of shifting sample data inputted to a DC estimator<br>
shown in FIG. 52;<br>
[67]          FIG. 54 illustrates a block diagram of a DC remover according to another<br>
embodiment of the present invention;<br>
[68]          FIG. 55 illustrates a block diagram of an example of a channel equalizer according to<br>
the present invention;<br>
[69]          FIG. 56 illustrates a detailed block diagram of an example of a remaining carrier<br>
phase error estimator shown in FIG. 55;<br>
[70]          FIG. 57 illustrates a block diagram of an example of a phase error detector shown in<br>
FIG. 56;<br>
[71]          FIG. 58 illustrates a block diagram of an example of a phase compensator shown in<br>
FIG. 56;<br>
[72]          FIG. 59 illustrates a block diagram of another example of a channel equalizer<br>
according to the present invention;<br>
[73]          FIG. 60 illustrates a block diagram of another example of a channel equalizer<br>
according to the present invention;<br>
[74]          FIG. 61 illustrates a block diagram of another example of a channel equalizer<br>
according to the present invention;<br>
[75]          FIG. 62 illustrates a block diagram of an example of a CIR estimator according to the<br>
present invention;<br>
[76]          FIG. 63 illustrates a block diagram of an example of a block decoder according to the<br>
present invention;<br>
[77]          FIG. 64 illustrates a block diagram of an example of a feedback deformatter shown in<br>
FIG. 63:<br>
[78]         FIG. 65 and FIG. 66 illustrate process steps of error correction decoding according to<br>
an embodiment of the present invention;<br>
[79]         FIG. 67 illustrates a block diagram of a receiving system according to an<br>
embodiment of the present invention;<br>
[80]         FIG. 68 illustrates a bit stream syntax for a VCT according to the present invention;<br>
[81]         FIG. 69 illustrates a service_type field according to an embodiment of the present<br>
invention;<br>
[82]         FIG. 70 illustrates a service location descriptor according to an embodiment of the<br>
present invention;<br>
[83]         FIG. 71 illustrates examples that may be assigned to the stream_type field according<br>
to the present invention;<br>
[84]         FIG. 72 illustrates a bit stream syntax for an EIT according to the present invention;<br>
and<br>
[85]         FIG. 73 illustrates a block diagram of a receiving system according to another<br>
embodiment of the present invention.<br>
Best Mode for Carrying out the Invention<br>
[86]         Reference will now be made in detail to the preferred embodiments of the present<br>
invention, examples of which are illustrated in the accompanying drawings.<br>
[87]<br>
[88]         Definition of the terms used in the present invention<br>
[89]         In addition, although the terms used in the present invention are selected from<br>
generally known and used terms, some of the terms mentioned in the description of the<br>
present invention have been selected by the applicant at his or her discretion, the<br>
detailed meanings of which are described in relevant parts of the description herein.<br>
Furthermore, it is required that the present invention is understood, not simply by the<br>
actual terms used but by the meaning of each term lying within.<br>
[90]         Among the terms used in the description of the present invention, main service data<br>
correspond to data that can be received by a fixed receiving system and may include<br>
audio/video (A/V) data. More specifically, the main service data may include A/V data<br>
of high definition (HD) or standard definition (SD) levels and may also include diverse<br>
data types required for data broadcasting. Also, the known data correspond to data pre-<br>
known in accordance with a pre-arranged agreement between the receiving system and<br>
the transmitting system. Additionally, among the terms used in the present invention,<br>
"MPH" corresponds to the initials of "mobile", "pedestrian", and "handheld" and<br>
represents the opposite concept of a fixed-type system. Furthermore, the MPH service<br>
data may include at least one of mobile service data, pedestrian service data, and<br>
handheld service data, and will also be referred to as "mobile service data" for<br>
simplicity. Herein, the mobile service data not only correspond to MPH service data<br>
but may also include any type of service data with mobile or portable characteristics.<br>
Therefore, the mobile service data according to the present invention are not limited<br>
only to the MPH service data.<br>
[91]          The above-described mobile service data may correspond to data having information,<br>
such as program execution files, stock information, and so on, and may also<br>
correspond to A/V data. Most particularly, the mobile service data may correspond to<br>
A/V data having lower resolution and lower data rate as compared to the main service<br>
data. For example, if an A/V codec that is used for a conventional main service<br>
corresponds to a MPEG-2 codec, a MPEG-4 advanced video coding (AVC) or scalable<br>
video coding (SVC) having better image compression efficiency may be used as the A/<br>
V codec for the mobile service. Furthermore, any type of data may be transmitted as<br>
the mobile service data. For example, transport protocol expert group (TPEG) data for<br>
broadcasting real-time transportation information may be transmitted as the main<br>
service data.<br>
[921          Also, a data service using the mobile service data may include weather forecast<br>
services, traffic information services, stock information services, viewer participation<br>
quiz programs, real-time polls and surveys, interactive education broadcast programs,<br>
gaming services, services providing information on synopsis, character, background<br>
music, and filming sites of soap operas or series, services providing information on<br>
past match scores and player profiles and achievements, and services providing in-<br>
formation on product information and programs classified by service, medium, time,<br>
and theme enabling purchase orders to be processed. Herein, the present invention is<br>
not limited only to the services mentioned above. In the present invention, the<br>
transmitting system provides backward compatibility in the main service data so as to<br>
be received by the conventional receiving system. Herein, the main service data and<br>
the mobile service data are multiplexed to the same physical channel and then<br>
transmitted.<br>
[93]          Furthermore, the digital broadcast transmitting system according to the present<br>
invention performs additional encoding on the mobile service data and inserts the data<br>
already known by the receiving system and transmitting system (e.g., known data),<br>
thereby transmitting the processed data. Therefore, when using the transmitting system<br>
according to the present invention, the receiving system may receive the mobile<br>
service data during a mobile state and may also receive the mobile service data with<br>
stability despite various distortion and noise occurring within the channel.<br>
[94]<br>
195]          MPH Frame Structure<br>
[96]          In the embodiment of the present invention, the mobile service data are modulated in<br>
a VSB mode and transmitted to the receiving system. At this point, the transmitter<br>
groups a plurality of mobile service data packets to form a RS frame so as to perform<br>
an encoding process for error correction. Then, data included in the error correction<br>
encoded RS frame are allocated to a plurality of data groups. Subsequently, the<br>
plurality of data groups are multiplexed with the main service data within an MPH<br>
frame, thereby transmitted to the receiving system. In the embodiment of the present<br>
invention, a plurality of data groups to which the data included in the error correction<br>
encoded RS frame are allocated configures an ensemble. More specifically, the data<br>
groups within an ensemble share the same ensemble identification (ID). At this point,<br>
since a plurality of mobile services may be included in one RS frame, a plurality of<br>
mobile services may also be included in one ensemble. Each mobile service within an<br>
ensemble (or RS frame) may be referred to a virtual channel.<br>
[97]          A method of allocating the data groups included in an ensemble within a single MPH<br>
frame will be described in detail in a later process. At this point, one MPH frame<br>
consists of Kl number of sub-frames, wherein one sub-frame includes K2 number of<br>
VSB frames. Each VSB frame consists of K3 number of slots. In the embodiment of<br>
the present invention, Kl will be set to 5, K2 will be set to 4, and K3 will be set to 4<br>
(i.e., Kl=5, K2=4, and K3=4). The values for Kl, K2, and K3 presented in this<br>
embodiment either correspond to values according to a preferred embodiment or are<br>
merely exemplary. Therefore, the above-mentioned values will not limit the scope of<br>
the present invention.<br>
[98]          FIG. 1 illustrates a structure of a MPH frame for transmitting and receiving mobile<br>
service data according to the present invention. In the example shown in FIG. 1, one<br>
MPH frame consists of 5 sub-frame, wherein each sub-frame includes 4 VSB frames,<br>
and wherein each VSB frame includes 4 slots. In this case, the MPH frame according<br>
to the present invention includes 5 sub-frames, 20 VSB frames, and 80 slots.<br>
[99]          FIG. 2 illustrates an exemplary structure of a VSB frame, wherein one VSB frame<br>
consists of 2 fields (i.e., an odd field and an even field). Herein, each field includes a<br>
field synchronization segment and 312 data segments. More specifically, 2 slots are<br>
grouped to form one field, and 2 slots are grouped to form one VSB frame. Therefore,<br>
one slot includes 156 data segments (or packets).<br>
[100]<br>
[101] General Description of the Transmitting System<br>
[102] FIG. 3 illustrates a block view showing a general structure of a digital broadcast<br>
transmitting system according to an embodiment of the present invention. Herein, the<br>
digital broadcast transmitting includes a service multiplexer 100 and a transmitter 200.<br>
Herein, the service multiplexer 100 is located in the studio of each broadcast station,<br>
and the transmitter 200 is located in a site placed at a predetermined distance from the<br>
studio. The transmitter 200 may be located in a plurality of different locations. Also,<br>
for example, the plurality of transmitters may share the same frequency. And, in this<br>
case, the plurality of transmitters receives the same signal. Accordingly, in the<br>
receiving system, a channel equalizer may compensate signal distortion, which is<br>
caused by a reflected wave, so as to recover the original signal. In another example, the<br>
plurality of transmitters may have different frequencies with respect to the same<br>
channel.<br>
[103] A variety of methods may be used for data communication each of the transmitters,<br>
which are located in remote positions, and the service multiplexer. For example, an<br>
interface standard such as a synchronous serial interface for transport of MPEG-2 data<br>
(SMPTE-310M). In the SMPTE-310M interface standard, a constant data rate is<br>
decided as an output data rate of the service multiplexer. For example, in case of the<br>
8VSB mode, the output data rate is 19.39 Mbps, and, in case of the 16VSB mode, the<br>
output data rate is 38.78 Mbps. Furthermore, in the conventional 8VSB mode<br>
transmitting system, a transport stream (TS) packet having a data rate of approximately<br>
19.39 Mbps may be transmitted through a single physical channel. Also, in the<br>
transmitting system according to the present invention provided with backward com-<br>
patibility with the conventional transmitting system, additional encoding is performed<br>
on the mobile service data. Thereafter, the additionally encoded mobile service data are<br>
multiplexed with the main service data to a TS packet form, which is then transmitted.<br>
At this point, the data rate of the multiplexed TS packet is approximately 19.39 Mbps.<br>
[104] At this point, the service multiplexer 100 receives at least one type of mobile service<br>
data and program specific information/program and system information protocol<br>
(PSI/PSIP) table data for each mobile service so as to encapsulate the received data to<br>
each TS packet. Also, the service multiplexer 100 receives at least one type of main<br>
service data and PSI/PSIP table data for each main service and encapsulates the<br>
received data to a transport stream (TS) packet. Subsequently, the TS packets are<br>
multiplexed according to a predetermined multiplexing rule and outputs the<br>
multiplexed packets to the transmitter 200.<br>
[105]<br>
[106] Service Multiplexer<br>
[107] FIG. 4 illustrates a block view showing an example of the service multiplexer. The<br>
service multiplexer includes a controller 110 for controlling the overall operations of<br>
the service multiplexer, a PSI/PSIP generator 120 for the main service, a PSI/PSIP<br>
generator 130 for the mobile service, a null packet generator 140, a mobile service<br>
multiplexer 150, and a transport multiplexer 160. The transport multiplexer 160 may<br>
include a main service multiplexer 161 and a transport stream (TS) packet multiplexer<br>
162. Referring to FIG. 4, at least one type of compression encoded main service data<br>
and the PSI/PSIP table data generated from the PSI/PSIP generator 120 for the main<br>
service are inputted to the main service multiplexer 161 of the transport multiplexer<br>
160. The main service multiplexer 161 encapsulates each of the inputted main service<br>
data and PSI/PSIP table data to MPEG-2 TS packet forms. Then, the MPEG-2 TS<br>
packets are multiplexed and outputted to the TS packet multiplexer 162. Herein, the<br>
data packet being outputted from the main service multiplexer 161 will be referred to<br>
as a main service data packet for simplicity.<br>
[108] Thereafter, at least one type of the compression encoded mobile service data and the<br>
PSI/PSIP table data generated from the PSI/PSIP generator 130 for the mobile service<br>
are inputted to the mobile service multiplexer 150. The mobile service multiplexer 150<br>
encapsulates each of the inputted mobile service data and PSI/PSIP table data to<br>
MPEG-2 TS packet forms. Then, the MPEG-2 TS packets are multiplexed and<br>
outputted to the TS packet multiplexer 162. Herein, the data packet being outputted<br>
from the mobile service multiplexer 150 will be referred to as a mobile service data<br>
packet for simplicity. At this point, the transmitter 200 requires identification in-<br>
formation in order to identify and process the main service data packet and the mobile<br>
service data packet. Herein, the identification information may use values pre-decided<br>
in accordance with an agreement between the transmitting system and the receiving<br>
system, or may be configured of a separate set of data, or may modify predetermined<br>
location value with in the corresponding data packet. As an example of the present<br>
invention, a different packet identifier (PID) may be assigned to identify each of the<br>
main service data packet and the mobile service data packet.<br>
[109] In another example, by modifying a synchronization data byte within a header of the<br>
mobile service data, the service data packet may be identified by using the syn-<br>
chronization data byte value of the corresponding service data packet. For example, the<br>
synchronization byte of the main service data packet directly outputs the value decided<br>
by the ISO/TEC 13818-1 standard (i.e., 0x47) without any modification. The syn-<br>
chronization byte of the mobile service data packet modifies and outputs the value,<br>
thereby identifying the main service data packet and the mobile service data packet.<br>
Conversely, the synchronization byte of the main service data packet is modified and<br>
outputted, whereas the synchronization byte of the mobile service data packet is<br>
directly outputted without being modified, thereby enabling the main service data<br>
packet and the mobile service data packet to be identified.<br>
[110] A plurality of methods may be applied in the method of modifying the syn-<br>
chronization byte. For example, each bit of the synchronization byte may be inversed,<br>
or only a portion of the synchronization byte may be inversed. As described above, any<br>
type of identification information may be used to identify the main service data packet<br>
and the mobile service data packet. Therefore, the scope of the present invention is not<br>
limited only to the example set forth in the description of the present invention.<br>
[111] Meanwhile, a transport multiplexer used in the conventional digital broadcasting<br>
system may be used as the transport multiplexer 160 according to the present<br>
invention. More specifically, in order to multiplex the mobile service data and the main<br>
service data and to transmit the multiplexed data, the data rate of the main service is<br>
limited to a data rate of (19.39-K) Mbps. Then, K Mbps, which corresponds to the<br>
remaining data rate, is assigned as the data rate of the mobile service. Thus, the<br>
transport multiplexer which is already being used may be used as it is without any<br>
modification. Herein, the transport multiplexer 160 multiplexes the main service data<br>
packet being outputted from the main service multiplexer 161 and the mobile service<br>
data packet being outputted from the mobile service multiplexer 150. Thereafter, the<br>
transport multiplexer 160 transmits the multiplexed data packets to the transmitter 200.<br>
[112] However, in some cases, the output data rate of the mobile service multiplexer 150<br>
may not be equal to K Mbps. In this case, the mobile service multiplexer 150<br>
multiplexes and outputs null data packets generated from the null packet generator 140<br>
so that the output data rate can reach K Mbps. More specifically, in order to match the<br>
output data rate of the mobile service multiplexer 150 to a constant data rate, the null<br>
packet generator 140 generates null data packets, which are then outputted to the<br>
mobile service multiplexer 150. For example, when the service multiplexer 100 assigns<br>
K Mbps of the 19.39 Mbps to the mobile service data, and when the remaining<br>
(19.39-K) Mbps is, therefore, assigned to the main service data, the data rate of the<br>
mobile service data that are multiplexed by the service multiplexer 100 actually<br>
becomes lower than K Mbps. This is because, in case of the mobile service data, the<br>
pre-processor of the transmitting system performs additional encoding, thereby<br>
increasing the amount of data. Eventually, the data rate of the mobile service data,<br>
which may be transmitted from the service multiplexer 100, becomes smaller than K<br>
Mbps.<br>
[113] For example, since the pre-processor of the transmitter performs an encoding process<br>
on the mobile service data at a coding rate of at least 1/2, the amount of the data<br>
outputted from the pre-processor is increased to more than twice the amount of the data<br>
initially inputted to the pre-processor. Therefore, the sum of the data rate of the main<br>
service data and the data rate of the mobile service data, both being multiplexed by the<br>
service multiplexer 100, becomes either equal to or smaller than 19.39 Mbps.<br>
Therefore, in order to match the data rate of the data that are finally outputted from the<br>
service multiplexer 100 to a constant data rate (e.g., 19.39 Mbps), an amount of null<br>
data packets corresponding to the amount of lacking data rate is generated from the<br>
null packet generator 140 and outputted to the mobile service multiplexer 150.<br>
[114] Accordingly, the mobile service multiplexer 150 encapsulates each of the mobile<br>
service data and the PSI/PSIP table data that are being inputted to a MPEG-2 TS<br>
packet form. Then, the above-described TS packets are multiplexed with the null data<br>
packets and, then, outputted to the TS packet multiplexer 162. Thereafter, the TS<br>
packet multiplexer 162 multiplexes the main service data packet being outputted from<br>
the main service multiplexer 161 and the mobile service data packet being outputted<br>
from the mobile service multiplexer 150 and transmits the multiplexed data packets to<br>
the transmitter 200 at a data rate of 19.39 Mbps.<br>
[115] According to an embodiment of the present invention, the mobile service multiplexer<br>
150 receives the null data packets. However, this is merely exemplary and does not<br>
limit the scope of the present invention. In other words, according to another<br>
embodiment of the present invention, the TS packet multiplexer 162 may receive the<br>
null data packets, so as to match the data rate of the finally outputted data to a constant<br>
data rate. Herein, the output path and multiplexing rule of the null data packet is<br>
controlled by the controller 110. The controller 110 controls the multiplexing<br>
processed performed by the mobile service multiplexer 150, the main service<br>
multiplexer 161 of the transport multiplexer 160, and the TS packet multiplexer 162,<br>
and also controls the null data packet generation of the null packet generator 140. At<br>
this point, the transmitter 200 discards the null data packets transmitted from the<br>
service multiplexer 100 instead of transmitting the null data packets.<br>
[116] Further, in order to allow the transmitter 200 to discard the null data packets<br>
transmitted from the service multiplexer 100 instead of transmitting them, iden-<br>
tification information for identifying the null data packet is required. Herein, the iden-<br>
tification information may use values pre-decided in accordance with an agreement<br>
between the transmitting system and the receiving system. For example, the value of<br>
the synchronization byte within the header of the null data packet may be modified so<br>
as to be used as the identification information. Alternatively, a transport_error<br>
_indicator flag may also be used as the identification information.<br>
[117] In the description of the present invention, an example of using the<br>
transport_error_indicator flag as the identification information will be given to<br>
describe an embodiment of the present invention. In this case, the<br>
transport_error_indicator flag of the null data packet is set to ' 1', and the<br>
transport_error_indicator flag of the remaining data packets are reset to '0', so as to<br>
identify the null data packet. More specifically, when the null packet generator 140<br>
generates the null data packets, if the transport_error_indicator flag from the header<br>
field of the null data packet is set to '1' and then transmitted, the null data packet may<br>
be identified and, therefore, be discarded. In the present invention, any type of iden-<br>
tification information for identifying the null data packets may be used. Therefore, the<br>
scope of the present invention is not limited only to the examples set forth in the de-<br>
scription of the present invention.<br>
[118] According to another embodiment of the present invention, a transmission parameter<br>
may be included in at least a portion of the null data packet, or at least one table or an<br>
operations and maintenance (OM) packet (or OMP) of the PSI/PSIP table for the<br>
mobile service. In this case, the transmitter 200 extracts the transmission parameter and<br>
outputs the extracted transmission parameter to the corresponding block and also<br>
transmits the extracted parameter to the receiving system if required. More<br>
specifically, a packet referred to as an OMP is defined for the purpose of operating and<br>
managing the transmitting system. For example, the OMP is configured in accordance<br>
with the MPEG-2 TS packet format, and the corresponding PID is given the value of<br>
0x1FFA. The OMP is configured of a 4-byte header and a 184-byte payload. Herein,<br>
among the 184 bytes, the first byte corresponds to an OM_type field, which indicates<br>
the type of the OM packet.<br>
[119] In the present invention, the transmission parameter may be transmitted in the form<br>
of an OMP. And, in this case, among the values of the reserved fields within the<br>
OM_type field, a pre-arranged value is used, thereby indicating that the transmission<br>
parameter is being transmitted to the transmitter 200 in the form of an OMP. More<br>
specifically, the transmitter 200 may find (or identify) the OMP by referring to the<br>
PID. Also, by parsing the OM_type field within the OMP, the transmitter 200 can<br>
verify whether a transmission parameter is included after the OM_type field of the cor-<br>
responding packet. The transmission parameter corresponds to supplemental data<br>
required for processing mobile service data from the transmitting system and the<br>
receiving system.<br>
[120] Herein, the transmission parameter may include data group information, region in-<br>
formation within the data group, RS frame information, super frame information, MPH<br>
frame information, ensemble information, information associated with serial con-<br>
catenated convolution code (SCCC), and RS code information. The transmission<br>
parameter may also include information on how signals of a symbol domain are<br>
encoded in order to transmit the mobile service data, and multiplexing information on<br>
how the main service data and the mobile service data or various types of mobile<br>
service data are multiplexed. The information included in the transmission parameter<br>
are merely exemplary to facilitate the understanding of the present invention.<br>
[121] And, the adding and deleting of the information included in the transmission<br>
parameter may be easily modified and changed by anyone skilled in the art. Therefore,<br>
the present invention is not limited to the examples proposed in the description set<br>
forth herein.<br>
[122] Furthermore, the transmission parameters may be provided from the service<br>
multiplexer 100 to the transmitter 200. Alternatively, the transmission parameters may<br>
also be set up by an internal controller (not shown) within the transmitter 200 or<br>
received from an external source.<br>
[123]<br>
[124] Transmitter<br>
[125] FIG. 5 illustrates a block view showing an example of the transmitter 200 according<br>
to an embodiment of the present invention. Herein, the transmitter 200 includes a de-<br>
multiplexer 210, a packet jitter mitigator 220, a pre-processor 230, a packet<br>
multiplexer 240, a post-processor 250, a synchronization (sync) multiplexer 260, and a<br>
transmission unit 270. Herein, when a data packet is received from the service<br>
multiplexer 100, the demultiplexer 210 should identify whether the received data<br>
packet corresponds to a main service data packet, a mobile service data packet, or a<br>
null data packet. For example, the demultiplexer 210 uses the PID within the received<br>
data packet so as to identify the main service data packet and the mobile service data<br>
packet. Then, the demultiplexer 210 uses a transport_error_indicator field to identify<br>
the null data packet. The main service data packet identified by the demultiplexer 210<br>
is outputted to the packet jitter mitigator 220, the mobile service data packet is<br>
outputted to the pre-processor 230, and the null data packet is discarded. If a<br>
transmission parameter is included in the null data packet, then the transmission<br>
parameter is first extracted and outputted to the corresponding block. Thereafter, the<br>
null data packet is discarded.<br>
[126] The pre-processor 230 performs an additional encoding process of the mobile service<br>
data included in the service data packet, which is demultiplexed and outputted from the<br>
demultiplexer 210. The pre-processor 230 also performs a process of configuring a<br>
data group so that the data group may be positioned at a specific place in accordance<br>
with the purpose of the data, which are to be transmitted on a transmission frame. This<br>
is to enable the mobile service data to respond swiftly and strongly against noise and<br>
channel changes. The pre-processor 230 may also refer to the transmission parameter<br>
when performing the additional encoding process. Also, the pre-processor 230 groups<br>
a plurality of mobile service data packets to configure a data group. Thereafter, known<br>
data, mobile service data, RS parity data, and MPEG header are allocated to pre-<br>
determined regions within the data group.<br>
[127]<br>
[128] Pre-processor within Transmitter<br>
[129] FIG. 6 illustrates a block view showing an example of the pre-processor 230<br>
according to the present invention. The pre-processor 230 includes a data randomizer<br>
301, a RS frame encoder 302, a block processor 303, a group formatter 304, a data<br>
deinterleaver 305, a packet formatter 306. The data randomizer 301 within the above-<br>
described pre-processor 230 randomizes the mobile service data packet including the<br>
mobile service data that is inputted through the demultiplexer 210. Then, the data<br>
randomizer 301 outputs the randomized mobile service data packet to the RS frame<br>
encoder 302. At this point, since the data randomizer 301 performs the randomizing<br>
process on the mobile service data, the randomizing process that is to be performed by<br>
the data randomizer 251 of the post-processor 250 on the mobile service data may be<br>
omitted. The data randomizer 301 may also discard the synchronization byte within the<br>
mobile service data packet and perform the randomizing process. This is an option that<br>
may be chosen by the system designer. In the example given in the present invention,<br>
the randomizing process is performed without discarding the synchronization byte<br>
within the mobile service data packet.<br>
[130] The RS frame encoder 302 groups a plurality of mobile the synchronization byte<br>
within the mobile service data packets that is randomized and inputted, so as to create a<br>
RS frame. Then, the RS frame encoder 302 performs at least one of an error correction<br>
encoding process and an error detection encoding process in RS frame units. Ac-<br>
cordingly, robustness may be provided to the mobile service data, thereby scattering<br>
group error that may occur during changes in a frequency environment, thereby<br>
enabling the mobile service data to respond to the frequency environment, which is<br>
extremely vulnerable and liable to frequent changes. Also, the RS frame encoder 302<br>
groups a plurality of RS frame so as to create a super frame, thereby performing a row<br>
permutation process in super frame units. The row permutation process may also be<br>
referred to as a row interleaving process. Hereinafter, the process will be referred to as<br>
row permutation for simplicity.<br>
[131] More specifically, when the RS frame encoder 302 performs the process of<br>
permuting each row of the super frame in accordance with a pre-determined rule, the<br>
position of the rows within the super frame before and after the row permutation<br>
process is changed. If the row permutation process is performed by super frame units,<br>
and even though the section having a plurality of errors occurring therein becomes<br>
very long, and even though the number of errors included in the RS frame, which is to<br>
be decoded, exceeds the extent of being able to be corrected, the errors become<br>
dispersed within the entire super frame. Thus, the decoding ability is even more<br>
enhanced as compared to a single RS frame.<br>
[132] At this point, as an example of the present invention, RS-encoding is applied for the<br>
error correction encoding process, and a cyclic redundancy check (CRC) encoding is<br>
applied for the error detection process in the RS frame encoder 302. When performing<br>
the RS-encoding, parity data that are used for the error correction are generated. And,<br>
when performing the CRC encoding, CRC data that are used for the error detection are<br>
generated. The RS encoding is one of forward error correction (FRC) methods. The<br>
FEC corresponds to a technique for compensating errors that occur during the<br>
transmission process. The CRC data generated by CRC encoding may be used for<br>
indicating whether or not the mobile service data have been damaged by the errors<br>
while being transmitted through the channel. In the present invention, a variety of error<br>
detection coding methods other than the CRC encoding method may be used, or the<br>
error correction coding method may be used to enhance the overall error correction<br>
ability of the receiving system. Herein, the RS frame encoder 302 refers to a pre-<br>
determined transmission parameter and/or the transmission parameter provided from<br>
the service multiplexer 100 so as to perform operations including RS frame con-<br>
figuration, RS encoding, CRC encoding, super frame configuration, and row<br>
permutation in super frame units.<br>
1133]<br>
[134] RS Frame Encoder within Pre-processor<br>
[135] FIG. 7(a) to FIG. 7(e) illustrate error correction encoding and error detection<br>
encoding processes according to an embodiment of the present invention. Particularly,<br>
when a data group is divided into regions A, B, C, and D, FIG. 7(a) to FIG. 7(e) re-<br>
spectively illustrate examples of creating RS frames, so that data that are to be<br>
allocated to regions A, B, C, and D are included in each RS frame, and of performing<br>
error correction encoding and error detection encoding thereto.<br>
[136] More specifically, the RS frame encoder 302 first divides the inputted mobile service<br>
data bytes to units of a predetermined length. The predetermined length is decided by<br>
the system designer. And, in the example of the present invention, the predetermined<br>
length is equal to 187 bytes, and, therefore, the 187-byte unit will be referred to as a<br>
packet for simplicity. For example, when the mobile service data that are being<br>
inputted, as shown in FIG. 7(a), correspond to a MPEG transport packet stream<br>
configured of 188-byte units, the first synchronization byte is removed, as shown in<br>
FIG. 7(b), so as to configure a 187-byte unit. Herein, the synchronization byte is<br>
removed because each mobile service data packet has the same value.<br>
[137] Meanwhile, when the input data of the RS frame do not correspond to the MPEG TS<br>
packet format, the data are read in 187-byte units without including the process of<br>
removing the MPEG synchronization byte, thereby creating a RS frame as shown in<br>
FIG. 7(c). More specifically, the process shown in FIG. 7(a) is omitted. In addition,<br>
when the input data format of the RS frame supports both the input data corresponding<br>
to the MPEG TS packet and the input data not corresponding to the MPEG TS packet,<br>
such information may be included in a transmission parameter transmitted from the<br>
service multiplexer 100, thereby being sent to the transmitter 200. Accordingly, the RS<br>
frame encoder 302 of the transmitter 200 receives this information to be able to control<br>
whether or not to perform the process of removing the MPEG synchronization byte<br>
(i.e., the process shown in FIG. 7(a)). Also, the transmitter provides such information<br>
to the receiving system so as to control the process of inserting the MPEG syn-<br>
chronization byte that is to be performed by the RS frame decoder of the receiving<br>
system.<br>
[138] Herein, the process of removing the synchronization byte may be performed during a<br>
randomizing process of the data randomizer 301 in an earlier process. In this case, the<br>
process of the removing the synchronization byte by the RS frame encoder 302 may be<br>
omitted. Moreover, when adding synchronization bytes from the receiving system, the<br>
process may be performed by the data derandomizer instead of the RS frame decoder.<br>
Therefore, if a removable fixed byte (e.g., synchronization byte) does not exist within<br>
the mobile service data packet that is being inputted to the RS frame encoder 302, or if<br>
the mobile service data that are being inputted are not configured in a packet format,<br>
the mobile service data that are being inputted are divided into 187-byte units, thereby<br>
configuring a packet for each 187-byte unit.<br>
[139] Subsequently, as shown in FIG. 7(c), N number of packets configured of 187 bytes is<br>
grouped to configure a RS frame. At this point, the RS frame is configured as a RS<br>
frame having the size of N(row)*187(column) bytes, in which 187-byte packets are se-<br>
quentially inputted in a row direction. In order to simplify the description of the<br>
present invention, the RS frame configured as described above will also be referred to<br>
as a first RS frame. More specifically, only pure mobile service data are included in the<br>
first RS frame, which is the same as the structure configured of 187 N-byte rows.<br>
Thereafter, the mobile service data within the RS frame are divided into an equal size.<br>
Then, when the divided mobile service data are transmitted in the same order as the<br>
input order for configuring the RS frame, and when one or more errors have occurred<br>
at a particular point during the transmitting/receiving process, the errors are clustered<br>
(or gathered) within the RS frame as well. In this case, the receiving system uses a RS<br>
erasure decoding method when performing error correction decoding, thereby<br>
enhancing the error correction ability. At this point, the N number of columns within<br>
the N number of RS frame includes 187 bytes, as shown in FIG. 7(c).<br>
[140] In this case, a (Nc,Kc)-RS encoding process is performed on each column, so as to<br>
generate Nc-Kc(=P) number of parity bytes. Then, the newly generated P number of<br>
parity bytes is added after the very last byte of the corresponding column, thereby<br>
creating a column of (187+P) bytes. Herein, as shown in FIG. 7(c), Kc is equal to 187<br>
(i.e., Kc=187), and Nc is equal to 187+P (i.e., Nc= 187+P). For example, when P is<br>
equal to 48, (235,187)-RS encoding process is performed so as to create a column of<br>
235 bytes. When such RS encoding process is performed on all N number of columns,<br>
as shown in FIG. 7(c), a RS frame having the size of N(row)*(187+P)(column) bytes<br>
may be created, as shown in FIG. 7(d). In order to simplify the description of the<br>
present invention, the RS frame having the RS parity inserted therein will be referred<br>
to as s second RS frame. More specifically, the second RS frame having the structure<br>
of (187+P) rows configured of N bytes may be configured.<br>
[141] As shown in FIG. 7(c) or FIG. 7(d), each row of the RS frame is configured of N<br>
bytes. However, depending upon channel conditions between the transmitting system<br>
and the receiving system, error may be included in the RS frame. When errors occur as<br>
described above, CRC data (or CRC code or CRC checksum) may be used on each row<br>
unit in order to verify whether error exists in each row unit. The RS frame encoder 302<br>
may perform CRC encoding on the mobile service data being RS encoded so as to<br>
create (or generate) the CRC data. The CRC data being generated by CRC encoding<br>
may be used to indicate whether the mobile service data have been damaged while<br>
being transmitted through the channel.<br>
[142] The present invention may also use different error detection encoding methods other<br>
than the CRC encoding method. Alternatively, the present invention may use the error<br>
correction encoding method to enhance the overall error correction ability of the<br>
receiving system. FIG. 7(e) illustrates an example of using a 2-byte (i.e., 16-bit) CRC<br>
checksum as the CRC data. Herein, a 2-byte CRC checksum is generated for N number<br>
of bytes of each row, thereby adding the 2-byte CRC checksum at the end of the N<br>
number of bytes. Thus, each row is expanded to (N+2) number of bytes. Equation 1<br>
below corresponds to an exemplary equation for generating a 2-byte CRC checksum<br>
for each row being configured of N number of bytes.<br>
[143] [Math Figure 1]<br>
[144] g(x) = x16+x12 + x5+1<br>
[145] The process of adding a 2-byte checksum in each row is only exemplary. Therefore,<br>
the present invention is not limited only to the example proposed in the description set<br>
forth herein. In order to simplify the understanding of the present invention, the RS<br>
frame having the RS parity and CRC checksum added therein will hereinafter be<br>
referred to as a third RS frame. More specifically, the third RS frame corresponds to<br>
(187+P) number of rows each configured of (N+2) number of bytes. As described<br>
above, when the process of RS encoding and CRC encoding are completed, the<br>
(N*187)-byte RS frame is expanded to a (N+2)*(187+P)-byte RS frame.<br>
[146] Based upon an error correction scenario of a RS frame expanded as described above,<br>
the data bytes within the RS frame are transmitted through a channel in a row<br>
direction. At this point, when a large number of errors occur during a limited period of<br>
transmission time, errors also occur in a row direction within the RS frame being<br>
processed with a decoding process in the receiving system. However, in the<br>
perspective of RS encoding performed in a column direction, the errors are shown as<br>
being scattered. Therefore, error correction may be performed more effectively. At this<br>
point, a method of increasing the number of parity data bytes (P) may be used in order<br>
to perform a more intense error correction process. However, using this method may<br>
lead to a decrease in transmission efficiency. Therefore, a mutually advantageous<br>
method is required. Furthermore, when performing the decoding process, an erasure<br>
decoding process may be used to enhance the error correction performance.<br>
[147] Additionally, the RS frame encoder 302 according to the present invention also<br>
performs a row permutation (or interleaving) process in super frame units in order to<br>
further enhance the error correction performance when error correction the RS frame.<br>
FIG. 8 illustrates an example of performing a row permutation (or interleaving)<br>
process in super frame units according to the present invention. More specifically, G<br>
number of RS frames encoded as shown in FIG. 7 is grouped to form a super frame, as<br>
shown in FIG. 8(a). At this point, since each RS frame is formed of (N+2)*(187+P)<br>
number of bytes, one super frame is configured to have the size of (N+2)*(187+P)*G<br>
bytes.<br>
[148] When a row permutation process permuting each row of the super frame configured<br>
as described above is performed based upon a pre-determined permutation rule, the<br>
positions of the rows prior to and after being permuted (or interleaved) within the super<br>
frame may be altered. More specifically, the ith row of the super frame prior to the in-<br>
terleaving process, as shown in FIG. 8(b), is positioned in the jth row of the same super<br>
frame after the row permutation process. The above-described relation between i and j<br>
can be easily understood with reference to a permutation rule as shown in Equation 2<br>
below.<br>
[149] [Math Figure 2]<br>
[150]<br><br>
[151] Herein, each row of the super frame is configured of (N+2) number of data bytes<br>
even after being row-permuted in super frame units.<br>
[152] When all row permutation processes in super frame units are completed, the super<br>
frame is once again divided into G number of row-permuted RS frames, as shown in<br>
FIG. 8(d), and then provided to the block processor 303. Herein, the number of RS<br>
parity bytes and the number of columns should be equally provided in each of the RS<br>
frames, which configure a super frame. As described in the error correction scenario of<br>
a RS frame, in case of the super frame, a section having a large number of error<br>
occurring therein is so long that, even when one RS frame that is to be decoded<br>
includes an excessive number of errors (i.e., to an extent that the errors cannot be<br>
corrected), such errors are scattered throughout the entire super frame. Therefore, in<br>
comparison with a single RS frame, the decoding performance of the super frame is<br>
more enhanced. When dividing a data group into regions A, B, C, and D, the data that<br>
are to be allocated to regions A, B, C, and D are grouped to form a single RS frame,<br>
and the error correction encoding and error detection encoding processes are<br>
performed on to the created RS frame as described above.<br>
[153] FIG. 9 and FIG. 10 illustrate an example of creating an RS frame by grouping data<br>
that are to be allocated to region A/B and creating another RS frame by grouping data<br>
that are to be allocated to region C/D, thereby performing error correction encoding<br>
and error detection encoding. More specifically, FIG. 9 illustrates an example of<br>
grouping data that are to be allocated to region A/B so as to create a RS frame having<br>
the size of Nl(rows)*187(columns), then performing RS encoding on each column of<br>
the above-described RS frame so as to add P1 number of parity data bytes in each<br>
column, and, then, performing CRC encoding on each row so as to add a 2-byte CRC<br>
checksum in each row. FIG. 10 illustrates an example of grouping data that are to be<br>
allocated to region C/D so as to create a RS frame having the size of<br>
N2(rows)*187(columns), then performing RS encoding on each column of the above-<br>
described RS frame so as to add P2 number of parity data bytes in each column, and,<br>
then, performing CRC encoding on each row so as to add a 2-byte CRC checksum in<br>
each row.<br>
[154] At this point, the RS frame encoder 302 may know the RS frame information, RS<br>
code information, CRC encoding information, data group information, region in-<br>
formation within the data group, and so on by referring to a pre-determined<br>
transmission parameter and/or a transmission parameter provided by the service<br>
multiplexer 100. The transmission parameter is not only referred to for performing the<br>
processes of creating an RS frame, error correction encoding, and error detection<br>
encoding, but also transmitted to then receiving system in order to allow the receiving<br>
system to perform a normal decoding process. Table 1 below shows an example of the<br>
RS frame information, i.e., the RS frame mode.<br>
[155] Table 1<br><br>
[156] Table 1 illustrates an example of allocating 2 bits in order to indicate the RS frame<br>
mode. For example, when the RS frame mode value is equal to '00', this indicates that<br>
the mobile service data that are to be allocated to all regions of the corresponding data<br>
group is formed as a primary RS frame. Also, when the RS frame mode value is equal<br>
to '01', this indicates that 2 separate RS frames, i.e., a primary RS frame for region A/<br>
B and a secondary RS frame for region C/D, are created. Table 2 below shows an<br>
example of the RS encoding information, i.e., the RS code mode.<br>
[157] Table 2<br>
[158] Table 2 illustrates an example of allocating 2 bits in order to indicate the RS code<br>
mode. For example, when the RS code mode value is equal to '01', this indicates that<br>
the (223, 187)-RS encoding is performed on the corresponding RS frame, thereby<br>
adding 36 bytes of parity data to each column. The RS code mode indicates the number<br>
of parity bytes of the respective RS frame. For example, when the RS frame mode<br>
indicates a single RS frame, only the RS encoding information corresponding to the<br>
single RS frame is required to be indicated. However, when the RS frame mode<br>
indicates a plurality of separate RS frames, RS encoding information corresponding to<br>
each primary and secondary RS frames is indicated. More specifically, it is preferable<br>
that the RS code mode is independently applied to the primary RS frame and the<br>
secondary RS frame.<br>
[159] The mobile service data processed with encoding in RS frame units and row<br>
permutation (or interleaving) in super frame units by the RS frame encoder 302 are<br>
outputted to the block processor 303. The block processor 303 then encodes the<br>
inputted mobile service data at a coding rate of MR/NR (wherein, MR is smaller than<br>
NR (i.e., MR<nr and then outputted to the group formatter more specifically></nr>
the block processor 303 divides the mobile service data being inputted in byte units<br>
into bit units. Then, the MR number of bits is encoded to NR number of bits.<br>
Thereafter, the encoded bits are converted back to byte units and then outputted. For<br>
example, if 1 bit of the input data is coded to 2 bits and outputted, then MR is equal to<br>
1 and NR is equal to 2 (i.e., MR=1 and NR=2). Alternatively, if 1 bit of the input data<br>
is coded to 4 bits and outputted, then MR is equal to 1 and NR is equal to 4 (i.e.,<br>
MR=1 and NR=4). Hereinafter, the former coding rate will be referred to as a coding<br>
rate of 1/2 (1/2-rate coding), and the latter coding rate will be referred to as a coding<br>
rate of 1/4 (1/4-rate coding), for simplicity.<br>
[160] Herein, when using the 1/4 coding rate, the coding efficiency is greater than when<br>
using the 1/2 coding rate, and may, therefore, provide greater and enhanced error<br>
correction ability. For such reason, when it is assumed that the data encoded at a 1/4<br>
coding rate in the group formatter 304, which is located near the end portion of the<br>
system, are allocated to a region in which the receiving performance may be de-<br>
teriorated, and that the data encoded at a 1/2 coding rate are allocated to a region<br>
having excellent receiving performance, the difference in performance may be<br>
reduced.<br>
[161] Meanwhile, the group formatter inserts mobile service data that are outputted from<br>
the block processor 303 in corresponding regions within a data group, which is<br>
configured in accordance with a pre-defined rule. Also, with respect to the data dein-<br>
terleaving process, each place holder or known data (or known data place holders) are<br>
also inserted in corresponding regions within the data group. At this point, the data<br>
group may be divided into at least one hierarchical region. Herein, the type of mobile<br>
service data being inserted in each region may vary depending upon the characteristics<br>
of each hierarchical region. Furthermore, each region may, for example, be divided<br>
based upon the receiving performance within the data group.<br>
[162] In an example given in the present invention, a data group is divided into regions A,<br>
B, C, and D in a data configuration prior to data deinterleaving. At this point, the group<br>
formatter 304 allocates the mobile service data, which are inputted after being RS<br>
encoded and block encoded, to each of the corresponding regions by referring to the<br>
transmission parameter. FIG. 11 illustrates an alignment of data after being data in-<br>
terleaved and identified, and FIG. 12 illustrates an alignment of data before being data<br>
interleaved and identified. More specifically, a data structure identical to that shown in<br>
FIG. I 1 is transmitted to a receiving system. In other words, one transport packet is in-<br>
terleaved by the data interleave!- so as to be scattered to a plurality of data segments,<br>
thereby being transmitted to the receiving system. FIG. 11 illustrates an example of<br>
one data group being scattered to 170 data segments. At this point, since one 207-byte<br>
packet has the same amount of data as one data segment, the packet that is not yet<br>
processed with data interleaving may be used as the data segment.<br>
[163] Also, the data group configured to have the same structure as the data structure<br>
shown in FIG. 11 is inputted to the data deinterleaver 305. FIG. 11 shows an example<br>
of dividing a data group prior to being data-interleaved into 10 MPH blocks (i.e., MPH<br>
block 1 (B1) to MPH block 10 (B10)). In this example, each MPH block has the length<br>
of 16 segments. Referring to FIG. 11, only the RS parity data are allocated to portions<br>
of the first 5 segments of the MPH block 1 (B l)and the last 5 segments of the MPH<br>
block 10 (B10). The RS parity data are excluded in regions A to D of the data group.<br>
When it is assumed that one data group is divided into regions A, B, C, and D, each<br>
MPH block may be included in any one of region A to region D depending upon the<br>
characteristic of each MPH block within the data group.<br>
[164] Herein, the data group is divided into a plurality of regions to be used for different<br>
purposes. More specifically, a region of the main service data having no interference or<br>
a very low interference level may be considered to have a more resistant (or stronger)<br>
receiving performance as compared to regions having higher interference levels. Ad-<br>
ditionally, when using a system inserting and transmitting known data in the data<br>
group, and when consecutively long known data are to be periodically inserted in the<br>
mobile service data, the known data having a predetermined length may be pe-<br>
riodically inserted in the region having no interference from the main service data (i.e.,<br>
a region wherein the main service data are not mixed). However, due to interference<br>
from the main service data, it is difficult to periodically insert known data and also to<br>
insert consecutively long known data to a region having interference from the main<br>
service data.<br>
[165] Referring to FIG. 11, MPH block 4 (B4) to MPH block 7 (B7) correspond to regions<br>
without interference of the main service data. MPH block 4 (B4) to MPH block 7 (B7)<br>
within the data group shown in FIG. 11 correspond to a region where no interference<br>
from the main service data occurs. In this example, a long known data sequence is<br>
inserted at both the beginning and end of each MPH block. In the description of the<br>
present invention, the region including MPH block 4 (B4) to MPH block 7 (B7) will be<br>
referred to as "region A". As described above, when the data group includes region A<br>
having a long known data sequence inserted at both the beginning and end of each<br>
MPH block, the receiving system is capable of performing equalization by using the<br>
channel information that can be obtained from the known data. Therefore, the strongest<br>
equalizing performance may be yielded (or obtained) from one of region A to region<br>
D.<br>
[166] In the example of the data group shown in FIG. 11, MPH block 3 (B3) and MPH<br>
block 8 (B8) correspond to a region having little interference from the main service<br>
data. Herein, a long known data sequence is inserted in only one side of each MPH<br>
block B3 and B8. More specifically, due to the interference from the main service data,<br>
a long known data sequence is inserted at the end of MPH block 3 (B3), and another<br>
long known data sequence is inserted at the beginning of MPH block 8 (B8). In the<br>
present invention, the region including MPH block 3 (B3) and MPH block 8 (B8) will<br>
be referred to as "region B". As described above, when the data group includes region<br>
B having a long known data sequence inserted at only one side (beginning or end) of<br>
each MPH block, the receiving system is capable of performing equalization by using<br>
the channel information that can be obtained from the known data. Therefore, a<br>
stronger equalizing performance as compared to region C/D may be yielded (or<br>
obtained).<br>
[167] Referring to FIG. 11, MPH block 2 (B2) and MPH block 9 (B9) correspond to a<br>
region having more interference from the main service data as compared to region B.<br>
A long known data sequence cannot be inserted in any side of MPH block 2 (B2) and<br>
MPH block 9 (B9). Herein, the region including MPH block 2 (B2) and MPH block 9<br>
(B9) will be referred to as "region C". Finally, in the example shown in FIG. 11, MPH<br>
block 1 (B1) and MPH block 10 (B10) correspond to a region having more interference<br>
from the main service data as compared to region C. Similarly, a long known data<br>
sequence cannot be inserted in any side of MPH block 1 (B1) and MPH block 10<br>
(B10). Herein, the region including MPH block 1 (B1) and MPH block 10 (B10) will<br>
be referred to as "region D". Since region C/D is spaced further apart from the known<br>
data sequence, when the channel environment undergoes frequent and abrupt changes,<br>
the receiving performance of region C/D may be deteriorated.<br>
[168] FIG. 12 illustrates a data structure prior to data interleaving. More specifically, FIG.<br>
12 illustrates an example of 118 data packets being allocated to a data group. FIG. 12<br>
shows an example of a data group consisting of 118 data packets, wherein, based upon<br>
a reference packet (e.g., a 1st packet (or data segment) or 157th packet (or data<br>
segment) after a field synchronization signal), when allocating data packets to a VSB<br>
frame, 37 packets are included before the reference packet and 81 packets (including<br>
the reference packet) are included afterwards. The size of the data groups, number of<br>
hierarchical regions within the data group, the size of each region, the number of MPH<br>
blocks included in each region, the size of each MPH block, and so on described above<br>
are merely exemplary. Therefore, the present invention will not be limited to the<br>
examples described above.<br>
[169] When it is assumed that the data group is divided into a plurality of hierarchical<br>
regions, as described above, the block processor 303 may encode the mobile service<br>
data, which are to be inserted to each region based upon the characteristic of each hi-<br>
erarchical region, at different coding rates. For example, the block processor 303 may<br>
encode the mobile service data, which are to be inserted in region A/B, at a coding rate<br>
of 1/2. Then, the group formatter 304 may insert the 1/2-rate encoded mobile service<br>
data to region A/B. Also, the block processor 303 may encode the mobile service data,<br>
which are to be inserted in region C/D, at a coding rate of 1/4 having higher error<br>
correction ability than the 1/2-coding rate. Thereafter, the group formatter 304 may<br>
insert the 1/2-rate encoded mobile service data to region C/D. In another example, the<br>
block processor 303 may encode the mobile service data, which are to be inserted in<br>
region C/D, at a coding rate having higher error correction ability than the 1/4-coding<br>
rate. Then, the group formatter 304 may either insert the encoded mobile service data<br>
to region C/D, as described above, or leave the data in a reserved region for future<br>
usage.<br>
[170] According to another embodiment of the present invention, the block processor 303<br>
may perform a MR/NR-rate encoding process in SCCC block units. Herein, the SCCC<br>
block includes at least one MPH block. At this point, when MR/NR-rate encoding is<br>
performed in a MPH block unit, the MPH block and the SCCC block become identical<br>
to one another. For example, the MPH block 1 (B1) may be encoded at the coding rate<br>
of 1/2, the MPH block 2 (B2) may be encoded at the coding rate of 1/4, and the MPH<br>
block 3 (B3) may be encoded at the coding rate of 1/2. The coding rates are applied re-<br>
spectively to the remaining MPH blocks.<br>
[171] Alternatively, a plurality of MPH blocks within regions A, B, C, and D may be<br>
grouped into one SCCC block, thereby being encoded at a coding rate of MR/NR in<br>
SCCC block units. Accordingly, the receiving performance of region C/D may be<br>
enhanced. For example, MPH block 1 (B1) to MPH block 5 (B5) may be grouped into<br>
one SCCC block and then encoded at a coding rate of 1/2. Thereafter, the group<br>
formatter 304 may insert the 1/2-rate encoded mobile service data to part of the above-<br>
described region A to region D. Furthermore, MPH block 6 (B6) to MPH block 10<br>
(B10) may be grouped into one SCCC block and then encoded at a coding rate of 1/4.<br>
Thereafter, the group formatter 304 may insert the 1/4-rate encoded mobile service<br>
data to another part of the above-described region A to region D.<br>
[172] In this case, one data group may consist of two SCCC blocks. According to another<br>
embodiment of the present invention, one SCCC block may be formed by grouping<br>
two MPH blocks. For example, MPH block 1 (B1) and MPH block 6 (B6) may be<br>
grouped into one SCCC block. Similarly, MPH block 2 (B2) and MPH block 7 (B7)<br>
may be grouped into another SCCC block. Also, MPH block 3 (B3) and MPH block 8<br>
(B8) may be grouped into another SCCC block. And, MPH block 4 (B4) and MPH<br>
block 9 (B9) may be grouped into another SCCC block. Furthermore, MPH block 5<br>
(B5) and MPH block 10 (B10) may be grouped into another SCCC block. In the<br>
above-described example, the data group may consist of 10 MPH blocks and 5 MPH<br>
blocks. Accordingly, in a data (or signal) receiving environment undergoing frequent<br>
and severe channel changes, the receiving performance of regions C and D, which is<br>
relatively more deteriorated than the receiving performance of region A, may be<br>
reinforced. Furthermore, since the number of mobile service data symbols increases<br>
more and more from region A to region D, the error correction encoding performance<br>
becomes more and more deteriorated. Therefore, when grouping a plurality of MPH<br>
block to form one SCCC block, such deterioration in the error correction encoding<br>
performance may be reduced.<br>
[173] As described-above, when the block processor 303 performs encoding at a MR/<br>
NR-coding rate, information associated with SCCC should be transmitted to the<br>
receiving system in order to accurately recover the mobile service data. An example of<br>
SCCC block information, i.e., SCCC block mode, is shown in Table 3 below.<br>
[174] Table 3<br>
[175] More specifically, Table 3 shows an example of 2 bits being allocated in order to<br>
indicate the SCCC block mode. For example, when the SCCC block mode value is<br>
equal to '00', this indicates that the SCCC block and the MPH block are identical to<br>
one another.<br>
[176] Although it is not indicated in Table 3, if one data block consists of two SCCC<br>
blocks, as described above, the corresponding information may also be indicated as the<br>
SCCC block mode. For example, when the SCCC block mode value is equal to '01',<br>
this may indicate that one data group is configured of two SCCC block. Also, when the<br>
SCCC block mode value is equal to '10', this may indicate that 2 MPH block s form<br>
one SCCC block and that, accordingly, one data group is configured of 5 SCCC<br>
blocks. Herein, the number of MPH block included in the SCCC block and the position<br>
of each MPH block may vary depending upon the design of the system designer.<br>
Therefore, the present invention will not be limited only to the example presented in<br>
the description of the present invention. Furthermore, expansion in the SCCC mode in-<br>
formation may also be made.<br>
[177] An example of a coding rate information of the SCCC block, i.e., SCCC outer code<br>
mode mode, is shown in Table 4 below.<br>
[178] Table 4<br>
[Table 4]<br><br>
[179] More specifically, Table 4 shows an example of 2 bits being allocated in order to<br>
indicate the coding rate information of the SCCC block. For example, when the SCCC<br>
outer code mode value is equal to '00', this indicates that the coding rate of the cor-<br>
responding SCCC block is 1/2. And, when the SCCC outer code mode value is equal<br>
to '01', this indicates that the coding rate of the corresponding SCCC block is 1/4.<br>
[180] If the SCCC block mode value of Table 3 indicates '00', the SCCC outer code mode<br>
may indicate the coding rate of each MPH block with respect to each MPH block. In<br>
this case, since it is assumed that one data group includes 10 MPH blocks and that 2<br>
bits are allocated for each SCCC block mode, a total of 20 bits are required for<br>
indicating the SCCC block modes of the 10 MPH modes. In another example, when<br>
the SCCC block mode value of Table 3 indicates '00', the SCCC outer code mode may<br>
indicate the coding rate of each region with respect to each region within the data<br>
group. In this case, since it is assumed that one data group includes 4 regions (i.e.,<br>
regions A, B, C, and D) and that 2 bits are allocated for each SCCC block mode, a total<br>
of 8 bits are required for indicating the SCCC block modes of the 4 regions.<br>
[181] Also, apart from the encoded mobile service data outputted from the block processor<br>
303, the group formatter 304 also inserts MPEG header place holders, non-systematic<br>
RS parity place holders, main service data place holders, which are associated with the<br>
data deinterleaving in a later process, as shown in FIG. 11. Herein, the main service<br>
data place holders are inserted because the mobile service data bytes and the main<br>
service data bytes are alternately mixed with one another in regions B to D based upon<br>
the input of the data deinterleaver, as shown in FIG. 11. For example, based upon the<br>
data outputted after data deinterleaving, the place holder for the MPEG header may be<br>
allocated at the very beginning of each packet. Furthermore, the group formatter 304<br>
either inserts known data generated in accordance with a pre-determined method or<br>
inserts known data place holders for inserting the known data in a later process. Ad-<br>
ditionally, place holders for initializing the trellis encoding module 256 are also<br>
inserted in the corresponding regions. For example, the initialization data place holders<br>
may be inserted in the beginning of the known data sequence.<br>
[182] Meanwhile, since the size of an RS frame encoded by the block processor 303 at the<br>
coding rate MR/NR is larger than the size of a data group, the mobile service data<br>
within an RS frame are divided and inserted into a plurality of data groups. In the<br>
example of the present invention, the mobile service data within an RS frame are<br>
allocated to the corresponding region of a plurality of data groups, each having the<br>
same size and corresponding to the RS frame. Herein, the number of data groups<br>
having the same size and corresponding to the RS frame may differ depending upon<br>
the size of the RS frame that is being encoded at a coding rate of MR/NR.<br>
[183] However, since the data within an RS frame are inserted in the corresponding regions<br>
of a plurality of data groups, each having the same size, remaining data bytes may<br>
occur in particular regions of particular data groups. More specifically, remaining data<br>
bytes may occur when the size of an RS frame encoded at a coding rate of MR/NR is<br>
larger than the size of a corresponding region of the plurality of data groups, each<br>
having the same size. In other words, remaining data bytes may occur in particular<br>
regions within the plurality of data groups corresponding to the RS frame depending<br>
upon the size of the RS frames, the size and number of divided data groups, the<br>
number of mobile service data bytes that may be inserted into each data group, the<br>
coding rate of the corresponding region, the number of RS parity bytes, whether or not<br>
a CRC checksum has been allocated, and, if any, the number of CRC checksums alloc<br>
ated.<br>
[184] When dividing the RS frame into a plurality of data groups having the same size, and<br>
when remaining data bytes occur in the corresponding RS frame, K number of dummy<br>
bytes are added to the corresponding RS frame, wherein K is equal to the number of<br>
remaining data bytes within the RS frame. Then, the dummy byte-added RS frame is<br>
divided into a plurality of data groups. This process is illustrated in FIG. 13. More<br>
specifically, FIG. 13 illustrates an example of processing K number of remaining data<br>
bytes, which are produced by dividing the RS frame having the size of (N+2)*(187+P)<br>
bytes into M number of data groups having equal sizes. In mis case, as shown in FIG.<br>
13(a), K number of dummy bytes are added to the RS frame having the size of<br>
(N+2)*(187+P) bytes. Subsequently, the RS frame is read in row units, thereby being<br>
divided into M number of data groups, as shown in FIG. 13(b). At this point, each data<br>
group has the size of bytes. This may be described by Equation 3 shown below.<br>
[185] [Math Figure 3]<br>
[186] M * NoBytesPerGrp = (N+2)*(187+P)+K<br>
[187] Herein, indicates the number of bytes allocated for each group (i.e., the Number of<br>
Bytes Per Group). More specifically, the size corresponding to the number of byte in<br>
one RS frame + K bytes is equal to the size of the M number of data groups.<br>
[188] The output of the group formatter 304 is inputted to the data deinterleaver 305. And,<br>
the data deinterleaver 305 deinterleaves data by performing an inverse process of the<br>
data interleaver on the data and place holders within the data group, which are then<br>
outputted to the packet formatter 306. More specifically, when the data and place<br>
holders within the data group configured, as shown in FIG. 11, are deinterleaved by the<br>
data deinterleaver 305, the data group being outputted to the packet formatter 306 is<br>
configured to have the structure shown in FIG. 12.<br>
[189] The packet formatter 306 removes the main service data place holders and the RS<br>
parity place holders that were allocated for the deinterleaving process from the dein-<br>
terleaved data being inputted. Then, the packet formatter 306 groups the remaining<br>
portion and replaces the 4-byte MPEG header place holder with an MPEG header<br>
having a null packet PID (or an unused PID from the main service data packet). Also,<br>
when the group formatter 304 inserts known data place holders, the packet formatter<br>
306 may insert actual known data in the known data place holders, or may directly<br>
output the known data place holders without any modification in order to make re-<br>
placement insertion in a later process. Thereafter, the packet formatter 306 identifies<br>
the data within the packet-formatted data group, as described above, as a 188-byte unit<br>
mobile service data packet (i.e., MPEG TS packet), which is then provided to the<br>
packet multiplexer 240.<br>
[190] The packet multiplexer 240 multiplexes the data group packet-formatted and<br>
outputted from the packet formatter 306 and the main service data packet outputted<br>
from the packet jitter mitigator 220 in accordance with a pre-defined multiplexing<br>
method. Then, the packet multiplexer 240 outputs the multiplexed data packets to the<br>
data randomizer 251 of the post-processor 250. The multiplexing method and mul-<br>
tiplexing rules of the packet multiplexer 240 will be described in more detail in a later<br>
process.<br>
[191] Also, since a data group including mobile service data in-between the data bytes of<br>
the main service data is multiplexed (or allocated) during the packet multiplexing<br>
process, the shifting of the chronological position (or place) of the main service data<br>
packet becomes relative. Also, a system object decoder (i.e., MPEG decoder) for<br>
processing the main service data of the receiving system, receives and decodes only the<br>
main service data and recognizes the mobile service data packet as a null data packet.<br>
Therefore, when the system object decoder of the receiving system receives a main<br>
service data packet that is multiplexed with the data group, a packet jitter occurs.<br>
[192] At this point, since a multiple-level buffer for the video data exists in the system<br>
object decoder and the size of the buffer is relatively large, the packet jitter generated<br>
from the packet multiplexer 240 does not cause any serious problem in case of the<br>
video data. However, since the size of the buffer for the audio data in the object<br>
decoder is relatively small, the packet jitter may cause considerable problem. More<br>
specifically, due to the packet jitter, an overflow or underflow may occur in the buffer<br>
for the main service data of the receiving system (e.g., the buffer for the audio data).<br>
Therefore, the packet jitter mitigator 220 re-adjusts the relative position of the main<br>
service data packet so that the overflow or underflow does not occur in the system<br>
object decoder.<br>
[193] In the present invention, examples of repositioning places for the audio data packets<br>
within the main service data in order to minimize the influence on the operations of the<br>
audio buffer will be described in detail. The packet jitter mitigator 220 repositions the<br>
audio data packets in the main service data section so that the audio data packets of the<br>
main service data can be as equally and uniformly aligned and positioned as possible.<br>
Additionally, when the positions of the main service data packets are relatively re-<br>
adjusted, associated program clock reference (PCR) values may also be modified ac-<br>
cordingly. The PCR value corresponds to a time reference value for synchronizing the<br>
time of the MPEG decoder. Herein, the PCR value is inserted in a specific region of a<br>
TS packet and then transmitted.<br>
[194]         In the example of the present invention, the packet jitter mitigator 220 also performs<br>
the operation of modifying the PCR value. The output of the packet jitter mitigator 220<br>
is inputted to the packet multiplexer 240. As described above, the packet multiplexer<br>
240 multiplexes the main service data packet outputted from the packet jitter mitigator<br>
220 with the mobile service data packet outputted from the pre-processor 230 into a<br>
burst structure in accordance with a pre-determined multiplexing rule. Then, the packet<br>
multiplexer 240 outputs the multiplexed data packets to the data randomizer 251 of the<br>
post-processor 250.<br>
[195] If the inputted data correspond to the main service data packet, the data randomizer<br>
251 performs the same randomizing process as that of the conventional randomizer.<br>
More specifically, the synchronization byte within the main service data packet is<br>
deleted. Then, the remaining 187 data bytes are randomized by using a pseudo random<br>
byte generated from the data randomizer 251. Thereafter, the randomized data are<br>
outputted to the RS encoder/non-systematic RS encoder 252.<br>
[196] On the other hand, if the inputted data correspond to the mobile service data packet,<br>
the data randomizer 251 may randomize only a portion of the data packet. For<br>
example, if it is assumed that a randomizing process has already been performed in<br>
advance on the mobile service data packet by the pre-processor 230, the data<br>
randomizer 251 deletes the synchronization byte from the 4-byte MPEG header<br>
included in the mobile service data packet and, then, performs the randomizing process<br>
only on the remaining 3 data bytes of the MPEG header. Thereafter, the randomized<br>
data bytes are outputted to the RS encoder/non-systematic RS encoder 252. More<br>
specifically, the randomizing process is not performed on the remaining portion of the<br>
mobile service data excluding the MPEG header. In other words, the remaining portion<br>
of the mobile service data packet is directly outputted to the RS encoder/<br>
non-systematic RS encoder 252 without being randomized. Also, the data randomizer<br>
251 may or may not perform a randomizing process on the known data (or known data<br>
place holders) and the initialization data place holders included in the mobile service<br>
data packet.<br>
[197] The RS encoder/non-systematic RS encoder 252 performs an RS encoding process<br>
on the data being randomized by the data randomizer 251 or on the data bypassing the<br>
data randomizer 251, so as to add 20 bytes of RS parity data. Thereafter, the processed<br>
data are outputted to the data interleaver 253. Herein, if the inputted data correspond to<br>
the main service data packet, the RS encoder/non-systematic RS encoder 252 performs<br>
the same systematic RS encoding process as that of the conventional broadcasting<br>
system, thereby adding the 20-byte RS parity data at the end of the 187-byte data. Al-<br>
ternatively, if the inputted data correspond to the mobile service data packet, the RS<br>
encoder/non-systematic RS encoder 252 performs a non-systematic RS encoding<br>
process. At this point, the 20-byte RS parity data obtained from the non-systematic RS<br>
encoding process are inserted in a pre-decided parity byte place within the mobile<br>
service data packet.<br>
[198] The data interleaver 253 corresponds to a byte unit convolutional interleaves The<br>
output of the data interleaver 253 is inputted to the parity replacer 254 and to the non-<br>
systematic RS encoder 255. Meanwhile, a process of initializing a memory within the<br>
trellis encoding module 256 is primarily required in order to decide the output data of<br>
the trellis encoding module 256, which is located after the parity replacer 254, as the<br>
known data pre-defined according to an agreement between the receiving system and<br>
the transmitting system. More specifically, the memory of the trellis encoding module<br>
256 should first be initialized before the received known data sequence is trellis-<br>
encoded. At this point, the beginning portion of the known data sequence that is<br>
received corresponds to the initialization data place holder and not to the actual known<br>
data. Herein, the initialization data place holder has been included in the data by the<br>
group formatter within the pre-processor 230 in an earlier process. Therefore, the<br>
process of generating initialization data and replacing the initialization data place<br>
holder of the corresponding memory with the generated initialization data are required<br>
to be performed immediately before the inputted known data sequence is trellis-<br>
encoded.<br>
[199] Additionally, a value of the trellis memory initialization data is decided and<br>
generated based upon a memory status of the trellis encoding module 256. Further, due<br>
to the newly replaced initialization data, a process of newly calculating the RS parity<br>
and replacing the RS parity, which is outputted from the data interleaver 253, with the<br>
newly calculated RS parity is required. Therefore, the non-systematic RS encoder 255<br>
receives the mobile service data packet including the initialization data place holders,<br>
which are to be replaced with the actual initialization data, from the data interleaver<br>
253 and also receives the initialization data from the trellis encoding module 256.<br>
[200] Among the inputted mobile service data packet, the initialization data place holders<br>
are replaced with the initialization data, and the RS parity data that are added to the<br>
mobile service data packet are removed and processed with non-systematic RS<br>
encoding. Thereafter, the new RS parity obtained by performing the non-systematic RS<br>
encoding process is outputted to the parity replacer 255. Accordingly, the parity<br>
replacer 255 selects the output of the data interleaver 253 as the data within the mobile<br>
service data packet, and the parity replacer 255 selects the output of the non-systematic<br>
RS encoder 255 as the RS parity. The selected data are then outputted to the trellis<br>
encoding module 256.<br>
[201] Meanwhile, if the main service data packet is inputted or if the mobile service data<br>
packet, which docs not include any initialization data place holders that are to be<br>
replaced, is inputted, the parity replacer 254 selects the data and RS parity that arc<br>
outputted from the data interleaver 253. Then, the parity replacer 254 directly outputs<br>
the selected data to the trellis encoding module 256 without any modification. The<br>
trellis encoding module 256 converts the byte-unit data to symbol units and performs a<br>
12-way interleaving process so as to trellis-encode the received data. Thereafter, the<br>
processed data are outputted to the synchronization multiplexer 260.<br>
[202] The synchronization multiplexer 260 inserts a field synchronization signal and a<br>
segment synchronization signal to the data outputted from the trellis encoding module<br>
256 and, then, outputs the processed data to the pilot inserter 271 of the transmission<br>
unit 270. Herein, the data having a pilot inserted therein by the pilot inserter 271 are<br>
modulated by the modulator 272 in accordance with a pre-determined modulating<br>
method (e.g., a VSB method). Thereafter, the modulated data are transmitted to each<br>
receiving system though the radio frequency (RF) up-converter 273.<br>
[203]<br>
[204] Multiplexing method of Packet Multiplexer 240<br>
[205] Meanwhile, in the packet multiplexer 240, a data group is assigned to a VSB frame<br>
based upon a starting point of a slot. Herein, main service data are allocated in between<br>
data groups so as to perform the multiplexing process. In the example of the present<br>
invention, a portion of a data group starting from the Nth data packet of the cor-<br>
responding data group is assigned to a beginning (or starting point) of a slot (i.e., the<br>
first data segment of the current slot) based upon a data structure prior to data in-<br>
terleaving. Herein, N is an integer. For example, when N is equal to 1 (i.e., N=l), a<br>
portion of a data group starting from the 1st data packet of the corresponding data<br>
group is assigned to the beginning of the first data segment of the current slot. Also,<br>
when N is equal to 38 (i.e., N=38), a portion of a data group starting from the 38th data<br>
packet of the corresponding data group is assigned to the beginning of the first data<br>
segment of the current slot. Furthermore, when N=l, one data group may be assigned<br>
to one slot.<br>
[206] FIG. 14 illustrates an example of assigning a 38th data packet of a data group to a<br>
starting point of a slot (i.e., the first data segment of the current slot) based upon a data<br>
structure prior to data interleaving. In this case, a range of data packets starting from<br>
the 1st packet to the 37th packet of the corresponding data group is assigned to the<br>
previous slot. Also, as shown in FIG. 14, when it is assumed that a data group is<br>
assigned for each slot within the VSB frame, the field synchronization multiplexer 260<br>
may insert a field synchronization signal after the 37th data packet of the data group<br>
being assigned to the 1st slot (Slot 1) of each field. In this case, the receiving system<br>
may also use the field synchronization signal for the channel equalizing process,<br>
thereby enhancing the receiving performance of the corresponding data group.<br>
[207] As described above, the data of a RS frame is divided into a plurality of data groups<br>
and assigned to the corresponding region by the group formatter 304. Then, the data<br>
groups pass through the data deinterleaver 305 and the packet formatter 306 and are<br>
multiplexed with the main service data by the packet multiplexer 240 in accordance<br>
with a pre-decided multiplexing rule. In the description of the present invention, the<br>
plurality of data groups having data within an RS frame assigned (or allocated) thereto<br>
will be referred to as an "ensemble". Herein, since a plurality of mobile services may<br>
be included in an RS frame, an ensemble may also include a plurality of mobile<br>
services. More specifically, an ensemble may transmit multiple data streams.<br>
[208] According to an embodiment of the present invention, the data groups included in an<br>
ensemble are allocated to be spaced apart from one another as possible within the MPH<br>
frame. Thus, the system can be capable of responding promptly and effectively to any<br>
burst error that may occur within an ensemble. Additionally, since the data groups for<br>
each ensemble are allocated based upon the MPH frames, the method for allocating the<br>
data groups may vary depending upon the corresponding MPH frame. Furthermore, the<br>
data groups are equally (or identically) allocated to each sub-frame within an MPH<br>
frame. According to the embodiment of the present invention, in each sub-frame, the<br>
data groups are serially allocated to a group space having 4 slots (i.e., 1 VSB frame)<br>
from left to right. Therefore, a number of groups of one ensemble per sub-frame<br>
(NOG) may correspond to any one integer from ' 1' to '8'. Herein, since one MPH<br>
frame includes 5 sub-frames, the total number of data groups within an ensemble that<br>
can be allocated to an MPH frame may correspond to any one multiple of '5' ranging<br>
from '5' to '40'.<br>
[209] FIG. 15 illustrates an example of multiple data groups of a single ensemble being<br>
allocated (or assigned) to an MPH frame. More specifically, FIG. 15 illustrates an<br>
example of a plurality of data groups included in an ensemble having an NOG of '3'<br>
being allocated to an MPH frame. Referring to FIG. 15, 3 data groups are sequentially<br>
assigned to a sub-frame at a cycle period of 4 slots. Accordingly, when this process is<br>
equally performed in the 5 sub-frames included in the corresponding MPH frame, 12<br>
data groups are assigned to a single MPH frame. Herein, the 15 data groups correspond<br>
to data groups included in an ensemble. Therefore, since one sub-frame is configured<br>
of 4 VSB frame, and since the NOG is equal to '3', the data group of the cor-<br>
responding ensemble is not assigned to 1 VSB frame within each sub-frame.<br>
[210] For example, when the RS code mode of a corresponding RS frame is equal to '00'<br>
(i.e., when 24 bytes of parity data are added to the corresponding RS frame by an RS<br>
encoding process), the parity data occupies approximately 11.37%<br>
(=24/(187+24)x100) of the total code word length. Meanwhile, when the NOG is equal<br>
to '3', and when the data groups of an ensemble arc assigned, as shown in FIG. 15, a<br>
total of 15 data groups form an RS frame. Accordingly, even when an error occurs in<br>
an entire data group due to a burst noise within a channel, the percentile is merely<br>
6.67% (=1/15x100). Therefore, all errors may be corrected by an erasure RS decoding<br>
process. More specifically, when the erasure RS decoding is performed, a number of<br>
channel errors corresponding to the number of RS parity bytes may be corrected. By<br>
doing so, the receiving system may correct the error of at least one data group within<br>
one ensemble. Thus, the minimum burst noise length correctable by a RS frame is over<br>
1 VSB frame. Meanwhile, when data groups of an ensemble are assigned as described<br>
above, either main service data may be assigned between each data group, or data<br>
groups corresponding to different ensembles may be assigned between each data<br>
group. More specifically, data groups corresponding to multiple ensembles may be<br>
assigned to one MPH frame.<br>
[211] Basically, the method of assigning data groups corresponding to multiple ensembles<br>
is very similar to the method of assigning data groups corresponding to a single<br>
ensemble. In other words, data groups included in other ensembles that are to be<br>
assigned to an MPH frame are also respectively assigned according to a cycle period of<br>
4 slots. At this point, a data group of a different ensemble may be sequentially assigned<br>
to a sub-frame starting from the 1st VSB frame (i.e., VSB frame 1). Alternatively, a<br>
data group of a previous ensemble may be assigned in a circular method starting from<br>
a VSB frame to which a data group has not yet been assigned. For example, when it is<br>
assumed that data groups corresponding to an ensemble are assigned as shown in FIG.<br>
15, data groups corresponding to the next ensemble may be assigned to a sub-frame<br>
starting either from the 1st VSB frame (VSB frame 1) or the 4th VSB frame (VSB<br>
frame 4).<br>
[212] FIG. 16 illustrates an example of assigning data groups corresponding to multiple<br>
ensembles within an MPH frame. More specifically, FIG. 16 illustrates an example of<br>
assigning data groups of a 1st ensemble having an NOG equal to '3' (i.e., ensemble 1<br>
with NOG=3) and data groups of a 2nd ensemble having an NOG equal to '4' (i.e.,<br>
ensemble 2 with NOG=4) to an MPH frame. Referring to FIG. 16, when the process of<br>
assigning data groups corresponding to ensemble 1 is completed, data groups cor-<br>
responding to ensemble 2 are assigned starting from the 4th VSB frame of the 1st sub-<br>
frame (i.e., sub-frame 1) within the corresponding MPH frame. More specifically, the<br>
1 st data group of the 2nd ensemble (ensemble 2) may be assigned to the 4th VSB<br>
frame of sub-frame 1, the 2nd data group may be assigned to the 1 st VSB frame of<br>
sub-frame 1, the 3rd data group may be assigned to the 2nd VSB frame of sub-frame 1,<br>
and the 4th data group may be assigned to the 3rd VSB frame of sub-frame 1.<br>
Similarly, the data groups of ensemble 2 are respectively assigned to the 2nd sub-frame<br>
(i.e., sub-frame 2) and onwards by the same order. Referring to FIG. 16, the group<br>
number corresponds to the order by which the data groups are assigned to each sub-<br>
frame.<br>
[213] At this point, the data groups are assigned to each VSB frame by the order of the 1st<br>
slot (slot 1), the 2nd slot (slot 2), the 3rd slot (slot 3), and the 4th slot (slot 4). For<br>
example, when four data groups are sequentially assigned to slot 1 of four VSB frame<br>
within a sub-frame, the four subsequent data groups are sequentially assigned to slot 3<br>
of each VSB frame of the corresponding sub-frame. Then, the next four data groups<br>
are sequentially assigned to slot 2 of each VSB frame of the corresponding sub-frame,<br>
and the four subsequent data groups are sequentially assigned to slot 4 of each VSB<br>
frame of the corresponding sub-frame. Therefore, when it is assumed that 16 data<br>
groups are assigned to 4 VSB frames within a sub-frame by performing the above-<br>
described process, in the 1st VSB frame (VSB frame 1), the 1st data group is assigned<br>
to slot 1, the 5th data group is assigned to slot 3, the 9th data group is assigned to slot<br>
2, and the 13th data group is assigned to slot 4.<br>
[214] Meanwhile, when it is assumed that the minimum number of data groups of an<br>
ensemble that can be assigned to a sub-frame is equal to T, one MPH frame may<br>
transmit up to a maximum number of 16 different ensembles. This is because a<br>
maximum total of 16 data groups may be transmitted to one sub-frame. The above-<br>
described rule for multiplexing (or assigning) data groups can be expressed by the<br>
following Equation 4:<br>
[215] [Math Figure 4]<br>
[216] SLOTj =((4(i-1) + Oi)mod 16) + 1<br>
[217] Herein, Oi =0 if 1 
[218] Oj = 2 else if 1 
[219] Oj = 1 else if 1
[220] Oj = 3 else.<br>
[221] 1 
[222] More specifically, SLOT indicates a slot being assigned with an ith data group<br>
within a sub-frame, and i represents the slot number within a sub-frame. Herein, i<br>
correspond to any one number within the range of 1 to 16. Also, TNOG represents a<br>
total number of data groups assigned to all ensembles per a sub-frame.<br>
[223] For example, it is assumed that 2 ensembles are assigned to one MPH frame, and that<br>
NOG2 of ensemble 2 is equal to '4' (i.e., NOG2=4). Herein, NOGj represents the<br>
number of data groups included in a jth ensemble (ensemble j) of a sub-frame. In this<br>
case, within one sub-frame, the data groups of ensemble 1 are assigned to slot 1, slot 5,<br>
and slot 9 (wherein, i= 1, 2, 3), and the data groups of ensemble 2 are assigned to slot<br>
13, slot 3, slot 7, and slot 11 (wherein, j=4, 5, 6, 7). Herein, a portion of the RS frame<br>
corresponding to ensemble 2 may be mapped in a time order to the 3rd data group, the<br>
7th data group, the 11th data group, and the 13th data group. More specifically, when<br>
an RS frame is divided and mapped into a plurality of data groups, instead of mapping<br>
the RS frame in a slot order, which is decided by substituting an integer for the group<br>
number () in Equation 4, the RS frame is mapped in a time order starting from the<br>
closest slot. In other words, when the NOG of an ensemble is decided, the position of<br>
each slot to which the data groups of a corresponding ensemble are transmitted within<br>
a sub-frame is also decided. Accordingly, when the RS frame of the corresponding<br>
ensemble is divided and transmitted to a plurality of data groups, the RS frame is<br>
mapped and transmitted in a time order of the corresponding slots.<br>
[224] Additionally, each sub-frames within the above-described MPH frame, each VSB<br>
frame within each sub-frame, and the rule for multiplexing the data groups in each slot<br>
within each VSB frame may be pre-decided and shared by the transmitting system and<br>
the receiving system. When the transmitting system transmits to the receiving system<br>
NOG information of all ensembles that are sent to the corresponding MPH frame, the<br>
receiving system can know to which slot the data group of each slot is mapped by<br>
using Equation 4. In this case, the group mapping of all ensembles can be known.<br>
Hereinafter, the information on which slot the data groups configuring one ensemble<br>
are mapped within a sub-frame will be referred to as an ensemble MAP. However,<br>
when the NOG information of all ensembles are transmitted as signaling information to<br>
all data groups of all ensembles as described above, by receiving the data groups of an<br>
ensemble, thereby receiving the signaling information, it is advantageous in that the<br>
ensemble MAP for all ensembles existing within the corresponding MPH frame can be<br>
known. However, the disadvantage is that the signaling information may be<br>
transmitted excessively.<br>
[225] One of the methods for minimizing the amount of signaling information is to<br>
transmit only the NOG of the corresponding ensemble. However, when transmitting<br>
only the NOG, the ensemble MAP of the corresponding ensemble cannot be obtained<br>
by using Equation 4. In order to accurately obtain the ensemble MAP using Equation<br>
4, not only the NOG but also a starting group number (SGN) of the ensemble should<br>
be given. In other words, when given the NOG and SGN of the corresponding<br>
ensemble, the ensemble MAP of the corresponding ensemble can be obtained. Herein,<br>
the SGN indicates the number of the data group, which may be substituted by in<br>
Equation 4. More specifically, referring to FIG. 16, the starting group number (SGN)<br>
of ensemble 2 is equal to '4'. This is because the NOG of ensemble 3 is equal to '3'.<br>
Meanwhile, in order to enable the receiving system to receive only the data of the<br>
desired (or requested) ensemble, the transmitting system is required to transmit an<br>
identifier for each ensemble (i.e., an ensemble identifier, hereinafter referred to as<br>
"ensemble_id") to the receiving system. Since the maximum number of ensembles that<br>
can be transmitted (i.e.. the maximum number of transmittable ensembles) within an<br>
MPH frame is equal to '16', the ensemble_id may be indicated as 4 bits.<br>
[226] Unlike in real-time data broadcasting, such as audio and video data, channel change<br>
time is not as significant (or important) as in non-real time data broadcasting.<br>
Therefore, the data of a particular ensemble is not required to be transmitted for each<br>
MPH frame. Instead, the data may be transmitted once for each set of multiple MPH<br>
frames. For example, data may be transmitted once for each 2 MPH frames. In this<br>
case, the data rate of the corresponding ensemble may be reduced by 1/2 as compared<br>
to when transmitting data for each MPH frame. Accordingly, when a broadcast station<br>
assigns the data rate of an MPH broadcast program, the data may be provided with<br>
smaller resolution, thereby increasing the efficiency in applying broadcast programs. In<br>
order to do so, an ensemble transmission period (hereinafter referred to as "ETP") is<br>
added to the signaling information, thereby indicating that the corresponding ensemble<br>
is transmitted once for k number of MPH frames. As described above, in order to<br>
enable the receiving system to know the ensemble MAP of the corresponding<br>
ensemble, the transmitting system transmits signaling information, such as<br>
ensemble_id, SGN, NOG, ETP, and so on, of the corresponding ensemble.<br>
[227] FIG. 18 describes the SGN, wherein SGN is configured of 4 bits. In this case, the<br>
value of SGN may be equal to any one value ranging from ' 1' to '16'. FIG. 19<br>
describes the NOG, wherein NOG is configured of 3 bits. Herein, the value of NOG<br>
may be equal to any one value ranging from '1' to '8'. Furthermore, FIG. 20 describes<br>
the ETP, wherein ETP is configured of 2 bits. The ETP indicates the MPH frame cycle<br>
period according to which the corresponding ensemble is being transmitted.<br>
[228] FIG. 17 illustrates an example of 3 ensembles existing in one MPH frame. Referring<br>
to FIG. 17, 3 data groups of the 1st ensemble (El), 2 data groups of the 2nd ensemble<br>
(E2), and 2 data groups of the 3rd ensemble (E3) exist in one sub-frame. Therefore, in<br>
the 1st ensemble, the SGN is equal to '1' (i.e., SGN=1) and the NOG is equal to '3'<br>
(i.e., NOG=3). Also, in the 2nd ensemble, the SGN is equal to '4' (i.e., SGN=4) and<br>
the NOG is equal to '2' (i.e., NOG=2). Similarly, in the 3rd ensemble, the SGN is<br>
equal to '6' (i.e., SGN=6) and the NOG is equal to '2' (i.e., NOG=2). In FIG. 17,<br>
different values may be given for the ensemble_id of each ensemble. Also, different<br>
values may be given for the ETP.<br>
[229] Meanwhile, in the receiving system, by turning the power on during a section,<br>
wherein the data groups of a requested ensemble are assigned, so as to receive data,<br>
and by turning the power off during the remaining sections, excessive power<br>
consumption of the receiving system may be reduced. Such characteristic is par-<br>
ticularly advantageous in portable and mobile receivers that require low power<br>
consumption. For example, it is assumed that data groups of the 1 st ensemble with<br>
NOG=3 and data groups of the 2nd ensemble with NOG=2 are assigned to an MPH<br>
frame, as shown in FIG. 21(a). It is also assumed that the user uses a keypad provided<br>
on a remote controller or terminal to select a mobile service included in the 1st<br>
ensemble. In this case, the receiving system turns the power on only during a section<br>
having the data groups of the 1st ensemble assigned thereto, and turns the power off<br>
during the remaining sections, as shown in FIG. 21(b), thereby reducing power<br>
consumption. At this point, it is preferable that the power is turned on slightly earlier<br>
than the section having the actual required data assigned thereto. This is to enable a<br>
tuner or a demodulator to converge in advance.<br>
[230]<br>
[2311 Processing Signaling Information<br>
[232] Meanwhile, apart from the mobile service data, the group formatter 304 may also<br>
insert additional (or supplemental) information, such as signaling information<br>
providing overall (or general) system information, to the data group. Transmission<br>
parameters associated with the transmission and reception of broadcast signals may be<br>
determined as the signaling information. For example, the signaling information may<br>
include information associated with the RS frame (ref., Table 1 and Table 2), in-<br>
formation associated with SCCC (ref., Table 3 and Table 4), information associated<br>
with the MPH frame (ref., FIG. 18 to FIG. 20), and so on. Referring to FIG. 11 and<br>
FIG. 12, it is apparent that, in the data group, a signaling information region for<br>
inserting the signaling information is assigned to a partial region of the MPH 4 block<br>
(B4). More specifically, referring to the structure of a data group after being processed<br>
with data interleaving, as shown in FIG. 11, it is apparent that 6 known data regions<br>
are assigned to the data group in order to insert known data or known data place<br>
holders. Herein, the 6 known data regions consist of 5 regions for the purpose of<br>
training the estimation of a channel impulse response (hereinafter referred to as a<br>
"OR") (or the purpose of training the channel equalizer) and 1 regions for the purpose<br>
of acquiring an initial carrier wave frequency synchronization signal.<br>
[233] Referring to FIG. 11, the 1st, 3rd, 4th, 5th, and 6th known data regions correspond to<br>
the known data regions assigned for the above-described purpose of CIR estimation<br>
training or channel equalizer training. Herein, the 1st known data region and 3rd to 6th<br>
known data regions may each have relatively different lengths. However, a portion of<br>
each known data region has the same pattern value, and each known data region is<br>
inserted at equal intervals of 16 segments. In the embodiment of the present invention,<br>
the known data region is encoded by 12 trellis encoders, and the status of each trellis<br>
encoder is required to be initialized. However, since the regions that can be initialized<br>
are pre-decided, it is inevitable to have different lengths for each of the 1st known data<br>
region and 3rd to 6th known data regions. Nevertheless, once each of the known data<br>
regions is initialized, the 5 known data patterns are each given the same value starting<br>
from a predetermined point to the end of each known data region. Also, each of the<br>
known data regions is spaced apart at equal intervals.<br>
[234J Meanwhile, the 2nd known data region may be used for acquiring an initial carrier<br>
wave frequency synchronization signal from the receiving system, or for estimating the<br>
position of a field synchronization signal or the positions of other known data regions.<br>
In order to do so, the 2nd known data region is configured of 2 sets of known data<br>
having the same pattern assigned thereto. In the present invention, the above-described<br>
1st and 3rd to 6th known data regions may be referred to as "OR known data regions",<br>
and the 2nd known data region may be referred to as an "ACQ known data region",<br>
wherein ACQ stands for "acquisition".<br>
[235] At this point, the data assigned to the CIR known data regions and the ACQ known<br>
data region correspond to known data pre-decided based upon an agreement between<br>
the transmitting system and the receiving system. Herein, each data group maintains<br>
the same pattern. According to the embodiment of the present invention, a signaling<br>
region is assigned between the 1st known data region and the 2nd known data region.<br>
This region may also be referred to as a "signaling information region". Herein, the<br>
data assigned to the signaling information region include signaling information<br>
associated with the corresponding MPH frame, sub-frame, VSB frame, slot, and data<br>
group. Therefore, the data may differ in each data group.<br>
[236] Referring to FIG. 11 and FIG. 12, the initialization data region corresponds to a<br>
region in which trellis memory initialization is performed in the trellis encoding<br>
module. At this point, the signaling information region may be encoded at a coding<br>
rate stronger than 1/2 or 1/4 (e.g., at a coding rate of 1/6 or 1/8), thereby enhancing the<br>
receiving performance. The information that may be inserted in the signaling in-<br>
formation region includes information associated with RS frames, information<br>
associated with SCCCs, and information associated with MPH frames. More<br>
specifically, the information associated with RS frames may include RS frame mode<br>
information of Table 1, and RS code mode information for the primary RS frame and<br>
RS code mode information for the secondary RS frame of Table 2. Also, the signaling<br>
information region may be assigned with 6 bits for the information associated with the<br>
RS frames.<br>
[237] The information associated with SCCCs may include SCCC block mode information<br>
of Table 3 and SCCC outer code mode information of Table 4. At this point, if the<br>
SCCC outer code mode information of Table 4 designates a coding rate with respect to<br>
10 MPH blocks within the data group, 22 bits may be assigned to the signaling in-<br>
formation region for the information associated with the SCCCs. However, if the<br>
SCCC outer code mode information of Table 4 designates a coding rate with respect to<br>
4 MPH blocks within the data group. 10 bits may be assigned to the signaling in-<br>
formation region for the information associated with the SCCCs. In the present<br>
invention, the information associated with the RS frames and the information<br>
associated with the SCCCs may be collectively referred to as an "FEC associated<br>
mode".<br>
[238] Finally, the information associated with MPH frames may include sub-frame count<br>
information, slot count information, and also information on ensemble_id, SGN, NOG,<br>
and ETP. Herein, the sub-frame count information and the slot count information<br>
correspond to information for the synchronization of one MPH frame. The SGN and<br>
NOG information correspond to information for configuring an ensemble MAP (or<br>
ensemble MAP information) of the corresponding ensemble in one MPH frame. The<br>
sub-frame count information indicates a counter value designating the number of each<br>
sub-frame within one MPH frame. In the present invention, 3 bits may be assigned to<br>
the signaling information region in order to indicate the sub-frame count information,<br>
and the value of the sub-frame count information may range from 1 to 5. Furthermore,<br>
the slot count information indicates a counter value designating the number of each<br>
slot within one sub-frame. Herein, 4 bits may be assigned to the signaling information<br>
region in order to indicate the slot count information, and the value of the slot count in-<br>
formation may range from 1 to 16.<br>
[239] Moreover, service or system information may also be transmitted to the signaling in-<br>
formation region. Such information may be used for the purpose of accelerating<br>
service acquisition when the power of the receiving system is turned on, or when a<br>
broadcast service that is currently being viewed is changed (or switched). For example,<br>
information associated with the service included in each ensemble may be transmitted<br>
to the signaling information region. Herein, the information associated with the service<br>
may include service_id or major and minor channel numbers. Additionally, a text label<br>
for each service (e.g., short text information of FOX-TV 1, WUSA-RADIO, etc.) and<br>
detailed information (i.e., PID or IP address or port number) on an elementary stream<br>
configuring each service may also be included in the information associated with the<br>
service.<br>
[240] When such information are transmitted from the transmitting system by means of the<br>
signaling information region, the receiving system may decode the transmitted in-<br>
formation and be informed of the types of services existing in the ensemble that is<br>
currently being received. By using such information, the receiving system may also<br>
find (or detect) the ensemble_id corresponding to the ensemble including a requested<br>
(or desired) broadcast service. When the ensemble_id of a requested broadcast service<br>
is detected, the receiving system may be able to reduce power consumption by<br>
receiving only the corresponding ensemble. Herein, the above-described ensemble<br>
including the requested broadcast service may correspond to the ensemble that was<br>
most currently received (i.e., the last received ensemble). Furthermore, when an<br>
electronics service guide (ESG) is transmitted to the signaling information region, the<br>
receiving system may be capable of decoding, based upon a pre-decided time interval<br>
or a request, the signaling information included in data groups corresponding to<br>
ensembles other than the ensemble that is currently being received, thereby updating<br>
the contents of other services that are to be broadcasted in the future.<br>
[241] FIG. 23(a) to FIG. 23(e) illustrate examples of a signaling information scenario being<br>
transmitted to the signaling information region according to the present invention.<br>
More specifically, FIG. 23(a) to FIG. 23(e) respectively illustrate examples of<br>
transmitting signaling information of a current MPH frame, as well as signaling in-<br>
formation of a future MPH frame, from a current MPH frame section. Referring to<br>
FIG. 23, @t represents a current point, and @t+n indicates a point after n number of<br>
MPH frames. Herein, the value of n is decided by an ETP, which corresponds to a<br>
cycle period for transmitting an ensemble. Herein, when ETP is equal to '00' (i.e.,<br>
ETP=00), this indicates that a corresponding ensemble is transmitted in each MPH<br>
frame. Therefore, n is equal to '1' (i.e., n=l). Also, when ETP is equal to '01' (i.e.,<br>
ETP=01), this indicates that a corresponding ensemble is transmitted in each 2 MPH<br>
frames. Therefore, n is equal to '2' (i.e., n=2). Similarly, when ETP is equal to '10'<br>
(i.e., ETP=10), this indicates that a corresponding ensemble is transmitted in each 3<br>
MPH frames. Therefore, n is equal to '3' (i.e., n=3).<br>
[242] According to the present invention, the above-described signaling information may<br>
be inserted in the signaling information region of each data group assigned to one<br>
MPH frame and then transmitted. In this case, the signaling information of a current<br>
MPH frame or the signaling information of a future MPH frame may be transmitted<br>
based upon the sub-frame position. For example, since the sub-frame count in-<br>
formation and the slot count information respectively indicate the position information<br>
corresponding to the sub-frame included in the current MPH frame and the position in-<br>
formation corresponding to the slot included in the current sub-frame, the sub-frame<br>
count information and the slot count information of the current point are transmitted<br>
from all sub-frame sections.<br>
[243] Also, information associated with FEC, such as RS frame information, RS code in-<br>
formation, SCCC block information, and SCCC outer code information, may vary in<br>
ensemble units, and the data group of each ensemble is equally divided and assigned to<br>
5 sub-frames. Therefore, the information associated with the FEC of the current point<br>
may be transmitted up to the Nth sub-frame (e.g., 2nd sub-frame) within an MPH<br>
frame. Then, the FEC-associated information of the next point may be transmitted<br>
starting from the 3rd sub-frame. Furthermore, ensemble MAP information, such as<br>
SGN and NOG information, may vary in ensemble units and the data group of each<br>
ensemble is equally divided and assigned to 5 sub-frames. Therefore, the ensemble<br>
MAP information of the current point may be transmitted up to the Nth sub-frame<br>
(e.g., 2nd sub-frame) within an MPH frame. Then, the ensemble MAP information of<br>
the next point may be transmitted starting from the 3rd sub-frame. Finally, the service<br>
or system information of the current point may be transmitted from all sub-frame<br>
sections.<br>
[244] As described above, if the information of the next point is transmitted in advance<br>
within an MPH frame, the receiving system may repeatedly receive in advance<br>
important transmission parameters (e.g., FEC mode information, ensemble MAP in-<br>
formation, etc.) that are to be used in a future MPH frame. Thus, the receiving system<br>
can receive corresponding ensembles with more stability even when diverse in-<br>
terference occurs in the channel. Furthermore, since the receiving system can extract<br>
known data place information, the receiving system may estimate a signaling in-<br>
formation region based upon the extracted known data place information. Thereafter,<br>
the receiving system may extract the signaling information from the estimated<br>
signaling information region and decode the extracted signaling information, thereby<br>
using the decoded signaling information to recover the mobile service data.<br>
[245]<br>
[246] Block processor<br>
[247] FIG. 24 illustrates a block diagram showing a structure of a block processor<br>
according to the present invention. Herein, the block processor includes a byte-bit<br>
converter 401, a symbol encoder 402, a symbol interleaver 403, and a symbol-byte<br>
converter 404.<br>
[248] The byte-bit converter 401 divides the mobile service data bytes that are inputted<br>
from the RS frame encoder 112 into bits, which are then outputted to the symbol<br>
encoder 402.<br>
[249J The byte-symbol converter 401 may also receive signaling information including<br>
transmission parameters. The signaling information data bytes are also divided into bits<br>
so as to be outputted to the symbol encoder 402. Herein, the signaling information<br>
including transmission parameters may be processed with the same data processing<br>
step as that of the mobile service data. More specifically, the signaling information<br>
may be inputted to the block processor 303 by passing through the data randomizer<br>
301 and the RS frame encoder 302. Alternatively, the signaling information may also<br>
be directly outputted to the block processor 303 without passing though the data<br>
randomizer 301 and the RS frame encoder 302.<br>
[250] The symbol encoder 402 corresponds to a MR/NR-rate encoder encoding the<br>
inputted data from MR bits to NR bits and outputting the data encoded at the coding<br>
rate of MR/NR. For example, when 1 input data bit is encoded to 2 bits and then<br>
outputted, MR is equal to 1 (i.e.. MR=1), and NR is equal to 2 (i.e., NR=2). And, when<br>
1 input data bit is encoded to 4 bits and then outputted, MR is equal to 1 (i.e., MR=1),<br>
and NR is equal to 4 (i.e., NR=4). According to the embodiment of the present<br>
invention, the symbol encoder 402 performs either a coding rate of 1/2 (also referred to<br>
as a 1/2-rate encoding process) or an encoding process at a coding rate of 1/4 (also<br>
referred to as a 1/4-rate encoding process). The symbol encoder 402 performs one of<br>
1/2-rate encoding and 1/4-rate encoding on the inputted mobile service data and<br>
signaling information. Thereafter, the signaling information is also recognized as the<br>
mobile service data and processed accordingly. The symbol encoder 402 may be<br>
operated as an encoder having the coding rate of 1/2 or may be operated as an encoder<br>
having the coding rate of 1/4.<br>
[251] FIG. 25 to FIG. 27 illustrate block views showing exemplary operations of the<br>
symbol encoder having the coding rate of 1/4 according to an embodiment of the<br>
present invention. The symbol encoder of FIG. 25 includes a 1/4 outer encoder 411,<br>
and a parallel/serial converter 412. Referring to FIG. 25, the 1/4 outer encoder 411<br>
encodes a mobile service data bit U, which is being inputted to the 1/4 outer encoder<br>
411, to uO to u3 (i.e., to 2 symbols). Then, the 1/4 outer encoder 411 outputs the two<br>
encoded symbols to the parallel/serial converter 412. The parallel/serial converter 412<br>
converts the two inputted symbols to serial symbol units, which are then serially<br>
outputted to the symbol interleaver 403. More specifically, the parallel/serial converter<br>
412 outputs one symbol, which is configured of uO and ul, to the symbol interleaver<br>
403. And, then the parallel/serial converter 412 outputs another symbol, which is<br>
configured of u2 and u3, to the symbol interleaver 403.<br>
[252] The symbol encoder of FIG. 26 includes a 1/2 outer encoder 421 and a repeater 422.<br>
Referring to FIG. 26, the 1/2 outer encoder 421 encodes a mobile service data bit U,<br>
which is being inputted to the 1/2 outer encoder 421, to uO and u 1 (i.e., to 1 symbol).<br>
Then, the 1/2 outer encoder 421 outputs the encoded symbol to the repeater 422. The<br>
repeater 422 repeats the 1/2-rate encoded symbol one time and outputs the repeated<br>
symbol to the symbol interleaver 403. More specifically, the repeater 422 outputs the<br>
symbol configured of bit u0 and bit ul to the symbol interleaver 403. Then, the<br>
repeater 422 outputs the symbol configured of bit uO and bit ul once again to the<br>
symbol interleaver 403.<br>
[253] The symbol encoder of FIG. 27 includes a repeater 431 and a 1/2 outer encoder 432.<br>
Referring to FIG. 27, the repeater 431 repeats a mobile service data bit U, which is<br>
being inputted to the repeater 431, so as to output two bits U and U to the 1/2 outer<br>
encoder 432. Thereafter, the 1/2 outer encoder 432 encodes the mobile service data bit<br>
U being outputted from the repeater 431, to uO and u 1 (i.e., to 1 symbol). Then, the 1/2<br>
outer encoder 431 outputs the encoded symbol to the symbol interleaver 403. At this<br>
point, since identical mobile service data bits U are sequentially inputted to the 1/2<br>
outer encoder 432 twice, the 1/2 outer encoder 432 performs the 1/2-rate encoding<br>
process twice on the mobile service data bit U, which is being inputted to the repeater<br>
431.<br>
1254J More specifically, when the symbol encoder 402 repeatedly outputs 2 symbols<br>
encoded at a coding rate of 1/2, as shown in FIG. 26, or when the symbol encoder 402<br>
performs the 1/2-rate encoding process two times on the input data bit and then outputs<br>
the encoded data bit, as shown in FIG. 27, the overall coding rate becomes 1/4. As<br>
described above, when the symbol encoder 402 is operated as an encoder having a<br>
coding rate of 1/4, the input data bit may be encoded at a coding rate of 1/4, so that<br>
each symbol can be sequentially outputted one by one. Alternatively, the input data<br>
may be encoded at a coding rate of 1/2 and then repeated one time, so that each symbol<br>
can be sequentially outputted one by one. Furthermore, the input data bit may be<br>
encoded at a coding rate of 1/2 two times, so that each symbol can be sequentially<br>
outputted one by one.<br>
[255] Meanwhile, when the symbol encoder 402 is operated as an encoder having a coding<br>
rate of 1/2, the input data bit is encoded at a coding rate of 1/2 by the 1/2 outer encoder<br>
and then outputted. Alternatively, the input data bit may also be encoded at a coding<br>
rate of 1/4 by the 1/4 outer encoder. Thereafter, when only one of the two symbols is<br>
selected and outputted, the symbol encoder 402 may be operated as an encoder having<br>
the coding rate of 1/2. In the description of the present invention, the 1/2-coding rate<br>
and the 1/4-coding rate are merely exemplary, and the coding rate may vary depending<br>
upon the selection of the encoded symbols or the number of repetition of the symbols.<br>
Therefore, the present invention will not be limited only to the examples given in the<br>
embodiments of the present invention. Nevertheless, if the coding rate is low, the<br>
actual amount of data that can be transmitted becomes smaller, accordingly. Therefore,<br>
these two factors should be accounted for when deciding the coding rate.<br>
[256] FIG. 28 illustrates a detailed block view of a 1/2 outer encoder according to an<br>
embodiment of the present invention. Referring to FIG. 28, the 1/2 outer encoder<br>
includes two delays (or a first delay and a second delay) 501 and 503, and one adder<br>
502. Herein, the 1/2 outer encoder encodes the input data bit U, so that 2 bits (i.e., u0<br>
and ul) can be outputted. At this point, the input data bit U corresponds to an upper bit<br>
u0, which is outputted without modification and at the same time encoded to be<br>
outputted as a lower bit ul. More specifically, the input data bit U is directly outputted<br>
as the upper bit u0 without modification and. simultaneously, outputted to the adder<br>
502.<br>
[257] The adder 502 adds the input data bit U and the output of the first delay 501, which<br>
are then outputted to the second delay 503. Thereafter, the data that have been delayed<br>
by a set period of time (e.g.. by 1 clock) are outputted as the lower bit ul and. at the<br>
same time, fed-back to the first delay 501. Subsequently, the first delay 501 delays data<br>
fed-back by from the second delay 503 by a set period of time (e.g., by 1 clock). Then,<br>
the delayed data are outputted to the adder 502. At this point, if the data bit U being<br>
inputted to the symbol encoder 402 corresponds to a data bit that is to be encoded at a<br>
coding rate of 1/4, a symbol configured of u0ul bits may be repeated twice and then<br>
outputted. Alternatively, the input data bit U may be repeated once, which is then<br>
inputted to the 1/2 outer encoder of FIG. 28.<br>
[258] FIG. 29 illustrates a detailed block view of a 1/4 outer encoder according to an<br>
embodiment of the present invention. Referring to FIG. 29, the 1/4 outer encoder<br>
includes two delays (or a first delay and a second delay) 501 and 503, and three adders<br>
502, 504, and 505. Herein, the 1/4 outer encoder encodes the input data bit U, so that 4<br>
bits (i.e., u0 to u3) can be outputted. At this point, the input data bit U corresponds to<br>
an uppermost bit u0, which is outputted without modification and at the same time<br>
encoded to be outputted as lower bit u1u2u3. More specifically, the input data bit U is<br>
directly outputted as the uppermost bit u0 and simultaneously outputted to the first and<br>
third adders 502 and 505. The first adder 502 adds the input data bit U and the output<br>
bit of the first delay unit 501 and, then, outputs the added bit to the second delay unit<br>
503. Then, the data bit delayed by a pre-determined time (e.g., by 1 clock) in the<br>
second delay unit 503 is outputted as lower bit ul and simultaneously fed-back to the<br>
first delay unit 501. The first delay unit 501 delays the data bit fed-back from the<br>
second delay unit 503 by a pre-determined time (e.g., by 1 clock). Then, the first delay<br>
unit 501 outputs the delayed data bit to the first adder 502 and the second adder 504.<br>
The second adder 504 adds the data bits outputted from the first and second delay units<br>
501 and 503 as a lower bit u2. The third adder 505 adds the input data bit U and the<br>
output of the second delay unit 503 and outputs the added data bit as a lower bit u3.<br>
[259J At this point, if the input data bit U corresponds to data encoded at a 1/2-coding rate,<br>
the symbol encoder 402 configures a symbol with u0u 1 bits from the 4 output bits<br>
u0ulu2u3. Then, the symbol encoder 402 outputs the newly configured symbol. Al-<br>
ternatively, if the input data bit U corresponds to data encoded at a 1/4-coding rate, the<br>
symbol encoder 402 configures and outputs a symbol with bits u0u1 and, then,<br>
configures and outputs another symbol with bits u2u3. According to another<br>
embodiment of the present invention, if the input data bit U corresponds to data<br>
encoded at a 1/4-coding rate, the symbol encoder 402 may also configure and output a<br>
symbol with bits u0u1, and then repeat the process once again and output the cor-<br>
responding bits.<br>
[260] According to yet another embodiment of the present invention, the symbol encoder<br>
outputs all four output bits U u0u1u2u3. Then, when using the 1/2-coding rate, the<br>
symbol interleave!" 403 located behind the symbol encoder 402 selects only the symbol<br>
configured of bits u0u1 from the four output bits u0u1u2u3. Alternatively, when using<br>
the 1/4-coding rate, the symbol interleaver 403 may select the symbol configured of<br>
bits u0u1 and then select another symbol configured of bits u2u3. According to another<br>
embodiment, when using the 1/4-coding rate, the symbol interleaver 403 may<br>
repeatedly select the symbol configured of bits u0ul.<br>
[261] The output of the symbol encoder 402 is inputted to the symbol interleaver 403.<br>
Then, the symbol interleaver 403 performs block interleaving in symbol units on the<br>
data outputted from the symbol encoder 402. Any interleaver performing structural re-<br>
arrangement (or realignment) may be applied as the symbol interleaver 403 of the<br>
block processor. However, in the present invention, a variable length symbol in-<br>
terleaver that can be applied even when a plurality of lengths is provided for the<br>
symbol, so that its order may be rearranged, may also be used.<br>
[262] FIG. 30(a) to FIG. 30(c) illustrate a symbol interleaver according to an embodiment<br>
of the present invention. Herein, the symbol interleaver according to the embodiment<br>
of the present invention corresponds to a variable length symbol interleaver that may<br>
be applied even when a plurality of lengths is provided for the symbol, so that its order<br>
may be rearranged. Particularly, FIG. 30(a) to FIG. 30(c) illustrate an example of the<br>
symbol interleaver when BK=6 and BL=8. Herein, BK indicates a number of symbols<br>
that are outputted for symbol interleaving from the symbol encoder 402. And, BL<br>
represents a number of symbols that are actually interleaved by the symbol interleaver<br>
403.<br>
[263] In the present invention, the symbol intereleaver 403 should satisfy the conditions of<br>
BL = 2n (wherein n is an integer) and of BL &gt; BK. If there is a difference in value<br>
between BK and BL, (BL-BK) number of null (or dummy) symbols is added, thereby<br>
creating an interleaving pattern. Therefore, BK becomes a block size of the actual<br>
symbols that are inputted to the symbol interleaver 403 in order to be interleaved. BL<br>
becomes an interleaving unit when the interleaving process is performed by an in-<br>
terleaving pattern created from the symbol interleaver 403.<br>
[264] The example of what is described above is illustrated in FIG. 30(a) to FIG. 30(c).<br>
The number of symbols outputted from the symbol encoder 402 in order to be in-<br>
terleaved is equal to 6 (i.e., BK=6). In other words, 6 symbols are outputted from the<br>
symbol encoder 402 in order to be interleaved. And, the actual interleaving unit (B1) is<br>
equal to 8 symbols. Therefore, as shown in FIG. 30(a), 2 symbols are added to the null<br>
(or dummy) symbol, thereby creating the interleaving pattern. Equation 4 shown below<br>
described the process of sequentially receiving BK number of symbols, the order of<br>
which is to be rearranged, and obtaining an BL value satisfying the conditions of BL =<br>
2" (wherein n is an integer) and of BL &gt; BK. thereby creating the interleaving so as to<br>
realign (or rearrange) the symbol order.<br>
[265] [Math Figure 5]<br>
[266] In relation to all places, wherein 0 
[267J P(i) = S x i x (i+1) / 2 mod BL<br>
[268] Herein, BL &gt; BK , BL = 2n, n and S are integers. FIG. 30 shows an example of an in-<br>
terleaving pattern and an interleaving process, wherein it is assumed that S is equal to<br>
89, and that BL is equal to 8. As shown in FIG. 30(b), the order of BK number of input<br>
symbols and (BL-BK) number of null symbols is rearranged by using the above-<br>
mentioned Equation 4. Then, as shown in FIG. 30(c), the null byte places are removed,<br>
so as to rearrange the order, by using Equation 5 shown below. Thereafter, the symbol<br>
that is interleaved by the rearranged order is then outputted to the symbol-byte<br>
converter.<br>
[269] [Math Figure 6]<br>
[270] if P(i) &gt; BK-1, then P(i) place is removed and rearranged<br>
[271] Subsequently, the symbol-byte converter 404 converts to bytes the mobile service<br>
data symbols, having the rearranging of the symbol order completed and then<br>
outputted in accordance with the rearranged order from the symbol interleaver 403 ,<br>
and thereafter outputs the converted bytes to the group formatter 304.<br>
[272] FIG. 31 illustrates a block diagram showing the structure of a block processor<br>
according to another embodiment of the present invention. Herein, the block processor<br>
includes an interleaving unit 610 and a block formatter 620. The interleaving unit 610<br>
may include a byte-symbol converter 611, a symbol-byte converter 612, a symbol in-<br>
terleaver 613, and a symbol-byte converter 614. Herein, the symbol interleaver 613<br>
may also be referred to as a block interleaver.<br>
[273] The byte-symbol converter 611 of the interleaving unit 610 converts the mobile<br>
service data X outputted in byte units from the RS frame encoder 302 to symbol units.<br>
Then, the byte-symbol converter 611 outputs the converted mobile service data<br>
symbols to the symbol-byte converter 612 and the symbol interleaver 613. More<br>
specifically, the byte-symbol converter 611 converts each 2 bits of the inputted mobile<br>
service data byte (=8 bits) to 1 symbol and outputs the converted symbols. This is<br>
because the input data of the trellis encoding module 256 consist of symbol units<br>
configured of 2 bits. The relationship between the block processor 303 and the trellis<br>
encoding module 256 will be described in detail in a later process. At this point, the<br>
byte-symbol converter 611 may also receive signaling information including<br>
transmission parameters. Furthermore, the signaling information bytes may also be<br>
divided into symbol units and then outputted to the symbol-byte converter 612 and the<br>
symbol interleaver 613.<br>
[274] The symbol-byte converter 612 groups 4 symbols outputted from the byte-symbol<br>
convener 61 1 so as to configure a byte. Thereafter, the converted data bytes are<br>
outputted to the block formatter 620. Herein, each of the symbol-byte converter 612<br>
and the byte-symbol converter 611 respectively performs an inverse process of one<br>
another. Therefore, the yields (or results) of these two blocks are offset. Accordingly,<br>
as shown in FIG. 32, the input data X bypass the byte-symbol converter 611 and the<br>
symbol-byte converter 612 and are directly inputted to the block formatter 620. More<br>
specifically, the interleaving unit 610 of FIG. 32 has a structure equivalent to that of<br>
the interleaving unit shown in FIG. 31. Therefore, the same reference numerals will be<br>
used in FIG. 31 and FIG. 32.<br>
[275] The symbol interleaver 613 performs block interleaving in symbol units on the data<br>
that are outputted from the byte-symbol converter 611. Subsequently, the symbol in-<br>
terleaver 613 outputs the interleaved data to the symbol-byte converter 614. Herein,<br>
any type of interleaver that can rearrange the structural order may be used as the<br>
symbol interleaver 613 of the present invention. In the example given in the present<br>
invention, a variable length interleaver that may be applied for symbols having a wide<br>
range of lengths, the order of which is to be rearranged. For example, the symbol in-<br>
terleaver of FIG. 30 may also be used in the block processor shown in FIG. 31 and<br>
FIG. 32.<br>
[276] The symbol-byte converter 614 outputs the symbols having the rearranging of the<br>
symbol order completed by the symbol interleaver 613, in accordance with the<br>
rearranged order. Thereafter, the symbols are grouped to be configured in byte units,<br>
which are then outputted to the block formatter 620. More specifically, the symbol-<br>
byte converter 614 groups 4 symbols outputted from the symbol interleaver 613 so as<br>
to configure a data byte. As shown in FIG. 33, the block formatter 620 performs the<br>
process of aligning the output of each symbol-byte converter 612 and 614 within the<br>
block in accordance with a set standard. Herein, the block formatter 620 operates in as-<br>
sociation with the trellis encoding module 256.<br>
[277] More specifically, the block formatter 620 decides the output order of the mobile<br>
service data outputted from each symbol-byte converter 612 and 614 while taking into<br>
consideration the place (or order) of the data excluding the mobile service data that are<br>
being inputted, wherein the mobile service data include main service data, known data,<br>
RS parity data, and MPEG header data.<br>
[278] According to the embodiment of the present invention, the trellis encoding module<br>
256 is provided with 12 trellis encoders. FIG. 34 illustrates a block diagram showing<br>
the trellis encoding module 256 according to the present invention. In the example<br>
shown in FIG. 34, 12 identical trellis encoders are combined to the interleaver in order<br>
to disperse noise. Herein, each trellis encoder may be provided with a pre-coder.<br>
[279] FIG. 35 illustrates the block processor 303 being concatenated with the trellis<br>
encoding module 256. In the transmitting system, a plurality of blocks actually exists<br>
between the pre-processor 230 including the block processor 303 and the trellis<br>
encoding module 256, as shown in FIG. 5. Conversely, the receiving system considers<br>
the pre-processor 230 to be concatenated with the trellis encoding module 256, thereby<br>
performing the decoding process accordingly. However, the data excluding the mobile<br>
service data that are being inputted to the trellis encoding module 256, wherein the<br>
mobile service data include main service data, known data, RS parity data, and MPEG<br>
header data, correspond to data that are added to the blocks existing between the block<br>
processor 303 and the trellis encoding module 256. FIG. 36 illustrates an example of a<br>
data processor 650 being positioned between the block processor 303 and the trellis<br>
encoding module 256, while taking the above-described instance into consideration.<br>
[280] Herein, when the interleaving unit 610 of the block processor 303 performs a 1/2-rate<br>
encoding process, the interleaving unit 610 may be configured as shown in FIG. 31 (or<br>
FIG. 32). Referring to FIG. 5, for example, the data processor 650 may include a group<br>
formatter 304, a data deinterleaver 305, a packet formatter 306, and a packet<br>
multiplexer 240, and a data randomizer 251, a RS encoder/non-systematic RS encoder<br>
252, a data interleaver 253, a parity replacer 254, and a non-systematic RS encoder 255<br>
of a post-processor 250.<br>
[281] At this point, the trellis encoding module 256 symbolizes the data that are being<br>
inputted so as to divide the symbolized data and to send the divided data to each trellis<br>
encoder in accordance with a pre-defined method. Herein, one byte is converted into 4<br>
symbols, each being configured of 2 bits. Also, the symbols created from the single<br>
data byte are all transmitted to the same trellis encoder. Accordingly, each trellis<br>
encoder pre-codes an upper bit of the input symbol, which is then outputted as the<br>
uppermost output bit C2. Alternatively, each trellis encoder trellis-encodes a lower bit<br>
of the input symbol, which is then outputted as two output bits C1 and C0. The block<br>
formatter 620 is controlled so that the data byte outputted from each symbol-byte<br>
converter can be transmitted to different trellis encoders.<br>
[282] Hereinafter, the operation of the block formatter 620 will now be described in detail<br>
with reference to FIG. 24 to FIG. 24. Referring to FIG. 31, for example, the data byte<br>
outputted from the symbol-byte converter 612 and the data byte outputted from the<br>
symbol-byte converter 614 are inputted to different trellis encoders of the trellis<br>
encoding module 256 in accordance with the control of the block formatter 620.<br>
Hereinafter, the data byte outputted from the symbol-byte converter 612 will be<br>
referred to as X, and the data byte outputted from the symbol-byte converter 614 will<br>
be referred to as Y, for simplicity. Referring to FIG. 33(a), each number (i.e., 0 to 11)<br>
indicates the first to twelfth trellis encoders of the trellis encoding module 256, re-<br>
spectively.<br>
[283]        In addition, the output order of both symbol-byte converters are arranged (or aligned)<br>
so that the data bytes outputted from the symbol-byte converter 612 are respectively<br>
inputted to the Oth to 5th trellis encoders (0 to 5) of the trellis encoding module 256,<br>
and that the data bytes outputted from the symbol-byte converter 614 are respectively<br>
inputted to the 6th to 11th trellis encoders (6 to 11) of the trellis encoding module 256.<br>
Herein, the trellis encoders having the data bytes outputted from the symbol-byte<br>
converter 612 allocated therein, and the trellis encoders having the data bytes outputted<br>
from the symbol-byte converter 614 allocated therein are merely examples given to<br>
simplify the understanding of the present invention. Furthermore, according to an<br>
embodiment of the present invention, and assuming that the input data of the block<br>
processor 303 correspond to a block configured of 12 bytes, the symbol-byte converter<br>
612 outputs 12 data bytes from X0 to X11, and the symbol-byte converter 614 outputs<br>
12 data bytes from Y0 to Y11.<br>
[284] FIG. 33(b) illustrates an example of data being inputted to the trellis encoding<br>
module 256. Particularly, FIG. 33(b) illustrates an example of not only the mobile<br>
service data but also the main service data and RS parity data being inputted to the<br>
trellis encoding module 256, so as to be distributed to each trellis encoder. More<br>
specifically, the mobile service data outputted from the block processor 303 pass<br>
through the group formatter 304, from which the mobile service data are mixed with<br>
the main service data and RS parity data and then outputted, as shown in FIG. 33(a).<br>
Accordingly, each data byte is respectively inputted to the 12 trellis encoders in<br>
accordance with the positions (or places) within the data group after being data-<br>
interleaved.<br>
[285] Herein, when the output data bytes X and Y of the symbol-byte converters 612 and<br>
614 are assigned to each respective trellis encoder, the input of each trellis encoder<br>
may be configured as shown in FIG. 33(b). More specifically, referring to FIG. 33(b),<br>
the six mobile service data bytes (X0 to X5) outputted from the symbol-byte converter<br>
612 are sequentially assigned (or distributed) to the first to sixth trellis encoders (0 to<br>
5) of the trellis encoding module 256. Also, the 2 mobile service data bytes Y0 and Yl<br>
outputted from the symbol-byte converter 614 are sequentially assigned to the 7th and<br>
8th trellis encoders (6 and 7) of the trellis encoding module 256. Thereafter, among the<br>
5 main service data bytes, 4 data bytes are sequentially assigned to the 9th and 12th<br>
trellis encoders (8 to 11) of the trellis encoding module 256. Finally, the remaining 1<br>
byte of the main service data byte is assigned once again to the first trellis encoder (0).<br>
[286] It is assumed that the mobile service data, the main service data, and the RS parity<br>
data are assigned to each trellis encoder, as shown in FIG. 33(b). It is also assumed<br>
that, as described above, the input of the block processor 303 is configured of 12 bytes,<br>
and that 12 bytes from X0 to X11 are outputted from the symbol-byte converter 612.<br>
and that 12 bytes from Y0 to Y11 are outputted from the symbol-byte converter 614. In<br>
this case, as shown in FIG. 33(c), the block formatter 620 arranges the data bytes that<br>
are to be outputted from the symbol-byte converters 612 and 614 by the order of X0 to<br>
X5, Y0, Y1, X6 to X10, Y2 to Y7, X11, and Y8 to Y11. More specifically, the trellis<br>
encoder that is to perform the encoding process is decided based upon the position (or<br>
place) within the transmission frame in which each data byte is inserted. At this point,<br>
not only the mobile service data but also the main service data, the MPEG header data,<br>
and the RS parity data are also inputted to the trellis encoding module 256. Herein, it is<br>
assumed that, in order to perform the above-described operation, the block formatter<br>
620 is informed of (or knows) the information on the data group format after the data-<br>
interleaving process.<br>
[287] FIG. 37 illustrates a block diagram of the block processor performing an encoding<br>
process at a coding rate of 1/N according to an embodiment of the present invention.<br>
Herein, the block processor includes (N-1) number of symbol interleavers 741 to<br>
74N-1, which are configured in a parallel structure. More specifically, the block<br>
processor having the coding rate of 1/N consists of a total of N number of branches (or<br>
paths) including a branch (or path), which is directly transmitted to the block formatter<br>
730. In addition, the symbol interleaver 741 to 74N-1 of each branch may each be<br>
configured of a different symbol interleaver. Furthermore, (N-1) number of symbol-<br>
byte converter 751 to 75N-1 each corresponding to each (N-1) number of symbol in-<br>
terleavers 741 to 74N-1 may be included at the end of each symbol interleaver, re-<br>
spectively. Herein, the output data of the (N-1) number of symbol-byte converter 751<br>
to 75N-1 are also inputted to the block formatter 730.<br>
[288] In the example of the present invention, N is equal to or smaller than 12. If N is equal<br>
to 12, the block formatter 730 may align the output data so that the output byte of the<br>
12th symbol-byte converter 75N-1 is inputted to the 12th trellis encoder. Alternatively,<br>
if N is equal to 3, the block formatter 730 may arrange the output order, so that the data<br>
bytes outputted from the symbol-byte converter 720 are inputted to the 1st to 4th trellis<br>
encoders of the trellis encoding module 256, and that the data bytes outputted from the<br>
symbol-byte converter 751 are inputted to the 5th to 8th trellis encoders, and that the<br>
data bytes outputted from the symbol-byte converter 752 are inputted to the 9th to 12th<br>
trellis encoders. At this point, the order of the data bytes outputted from each symbol-<br>
byte converter may vary in accordance with the position within the data group of the<br>
data other than the mobile service data, which are mixed with the mobile service data<br>
that are outputted from each symbol-byte converter.<br>
[289J The number of trellis encoders, the number of symbol-byte converters, and the<br>
number of symbol interleavers proposed in the present invention are merely<br>
exemplary. And. therefore, the corresponding numbers do not limit the spirit or scope<br>
of the present invention. It is apparent to those skilled in the art that the type and<br>
position of each data byte being allocated to each trellis encoder of the trellis encoding<br>
module 256 may vary in accordance with the data group format. Therefore, the present<br>
invention should not be understood merely by the examples given in the description set<br>
forth herein.<br>
[290]            The mobile service data that are encoded at a coding rate of MR/RN and outputted<br>
from the block processor 303 are inputted to the group formatter 304. Herein, in the<br>
example of the present invention, the order of the output data outputted from the block<br>
formatter of the block processor 303 are aligned and outputted in accordance with the<br>
position of the data bytes within the data group.<br>
[291]<br>
[292] Demodulating unit within Receiving system<br>
[293] FIG. 38 illustrates an example of a demodulating unit in a digital broadcast receiving<br>
system according to the present invention. The demodulating unit of FIG. 38 uses<br>
known data information, which is inserted in the mobile service data section and, then,<br>
transmitted by the transmitting system, so as to perform carrier synchronization<br>
recovery, frame synchronization recovery, and channel equalization, thereby<br>
enhancing the receiving performance. Also the demodulating unit may turn the power<br>
on only during a slot to which the data group of the designated (or desired) ensemble is<br>
assigned, thereby reducing power consumption of the receiving system.<br>
[294] Referring to FIG. 38, the demodulating unit includes a demodulator 1002, an<br>
equalizer 1003, a known sequence detector 1004, a block decoder 1005, a RS frame<br>
decoder 1006, a derandomizer 1007. The demodulating unit may further include a data<br>
deinterleaver 1009, a RS decoder 1010, and a data derandomizer 1011. The de-<br>
modulating unit may further include a signaling information decoder 1013. The<br>
receiving system also may further include a power controller 5000 for controlling<br>
power supply of the demodulating unit.<br>
[295] Herein, for simplicity of the description of the present invention, the RS frame<br>
decoder 1006, and the derandomizer 1007 will be collectively referred to as a mobile<br>
service data processing unit. And, the data deinterleaver 1009, the RS decoder 1010,<br>
and the data derandomizer 1011 will be collectively referred to as a main service data<br>
processing unit. More specifically, a frequency of a particular channel tuned by a tuner<br>
down converts to an intermediate frequency (IF) signal. Then, the down-converted data<br>
1001 outputs the down-converted IF signal to the demodulator 1002 and the known<br>
sequence detector 1004. At this point, the down-converted data 1001 is inputted to the<br>
demodulator 1002 and the known sequence detector 1004 via analog/digital converter<br>
ADC (not shown). The ADC converts pass-band analog IF signal into pass-band di<br>
gital IF signal.<br>
[296] The demodulator 1002 performs self gain control, canier recovery, and timing<br>
recovery processes on the inputted pass-band digital IF signal, thereby modifying the<br>
IF signal to a base-band signal. Then, the demodulator 1002 outputs the newly created<br>
base-band signal to the equalizer 1003 and the known sequence detector 1004. The<br>
equalizer 1003 compensates the distortion of the channel included in the demodulated<br>
signal and then outputs the error-compensated signal to the block decoder 1005.<br>
[297] At this point, the known sequence detector 1004 detects the known sequence place<br>
inserted by the transmitting end from the input/output data of the demodulator 1002<br>
(i.e., the data prior to the demodulation process or the data after the demodulation<br>
process). Thereafter, the place information along with the symbol sequence of the<br>
known data, which are generated from the detected place, is outputted to the de-<br>
modulator 1002 and the equalizer 1003. Also, the known data detector 1004 outputs a<br>
set of information to the block decoder 1005. This set of information is used to allow<br>
the block decoder 1005 of the receiving system to identify the mobile service data that<br>
are processed with additional encoding from the transmitting system and the main<br>
service data that are not processed with additional encoding. In addition, although the<br>
connection status is not shown in FIG. 38, the information detected from the known<br>
data detector 1004 may be used throughout the entire receiving system and may also be<br>
used in the RS frame decoder 1006.<br>
[298] The demodulator 1002 uses the known data symbol sequence during the timing and/<br>
or carrier recovery, thereby enhancing the demodulating performance. Similarly, the<br>
equalizer 1003 uses the known data so as to enhance the equalizing performance.<br>
Moreover, the decoding result of the block decoder 1005 may be fed-back to the<br>
equalizer 1003, thereby enhancing the equalizing performance.<br>
[299]<br>
[300] Power on/off control<br>
[301] The data demodulated in the demodulator 1002 or the data equalized in the channel<br>
equalizer 1003 is inputted to the signaling information decoder 1013. The known data<br>
information detected in the known sequence detector 1004 is inputted to the signaling<br>
information decoder 1013.<br>
[302] The signaling information decoder 1013 extracts and decodes signaling information<br>
from the inputted data, the decoded signaling information provides to blocks requiring<br>
the signaling information. For example, the SCCC-associated information may output<br>
to the block decoder 1005, and the RS frame-associated information may output to the<br>
RS frame decoder 1006. The MPH frame-associated information may output to the<br>
known sequence detector 1004 and the power controller 5000.<br>
[303] Herein, the RS frame-associated information may include RS frame mode in-<br>
formation and RS code mode information. The SCCC-associated information may<br>
include SCCC block mode information and SCCC outer code mode information. The<br>
MPH frame-associated information may include sub-frame count information, slot<br>
count information, ensemble_id information, SGN information, NoG information, ETP<br>
information and so on, as shown in FIG. 22.<br>
[304]            More specifically, the signaling information between fust known data area and<br>
second known data area can know by using known data information being outputted in<br>
the known sequence detector 1004. Therefore, the signaling information decoder 1013<br>
may extract and decode signaling information from the data being outputted in the de-<br>
modulator 1002 or the channel equalizer 1003.<br>
[305] The power controller 5000 is inputted the MPH frame-associated information from<br>
the signaling information decoder 1013, and controls power of the tuner and the de-<br>
modulating unit.<br>
[306] According to the embodiment of the present invention, the power controller 5000<br>
turns the power on only during a slot to which a slot of the ensemble including user-<br>
selected mobile service is assigned. The power controller 5000 then turns the power off<br>
during the remaining slots.<br>
[307] For example, it is assumed that data groups of a 1st ensemble with NOG=3, a 2nd<br>
ensemble with NOG=4 are assigned to one MPH frame, as shown in FIG. 21(a). It is<br>
also assumed that the user has selected a mobile service included in the 1st ensemble<br>
using the keypad provided on the remote controller or terminal. In this case, the power<br>
controller 5000 turns the power on only during a slot that data groups of the 1st<br>
ensemble is assigned, as shown in FIG. 21(b), and turns the power off during the<br>
remaining slots, thereby reducing power consumption.<br>
[308]<br>
[309] Demodulator and Known sequence detector<br>
[310] At this point, the transmitting system may transmit known data periodically inserted<br>
within data frame, as shown in FIG. 11.<br>
[311] FIG. 39 illustrates an example of known data sequence being periodically inserted<br>
and transmitted in-between actual data by the transmitting system. Referring to FIG.<br>
39, AS represents the number of valid data symbols, and BS represents the number of<br>
known data symbols. Therefore, BS number of known data symbols are inserted and<br>
transmitted at a period of (AS+BS) symbols. Herein, AS may correspond to mobile<br>
service data, main service data, or a combination of mobile service data and main<br>
service data. In order to be differentiated from the known data, data corresponding to<br>
AS will hereinafter be referred to as valid data.<br>
[312] Referring to FIG. 39, known data sequence having the same pattern are included in<br>
each known data section that is being periodically inserted. Herein, the length of the<br>
known data sequence having identical data patterns may be either equal to or different<br>
from the length of the entire (or total) known data sequence of the corresponding<br>
known data section (or block). If the two lengths are different from one another, the<br>
length of the entire known data sequence should be longer than the length of the<br>
known data sequence having identical data patterns. In this case, the same known data<br>
sequences are included in the entire known data sequence. The known sequence<br>
detector 1004 detects the position of the known data being periodically inserted and<br>
transmitted as described above. At the same time, the known sequence detector 1004<br>
may also estimate initial frequency offset during the process of detecting known data.<br>
In this case, the demodulator 1002 may estimate with more accuracy carrier frequency<br>
offset from the information on the known data position (or known sequence position<br>
indicator) and initial frequency offset estimation value, thereby compensating the<br>
estimated initial frequency offset.<br>
[313] FIG. 40 illustrates a detailed block diagram of a demodulator according to the present<br>
invention. Referring to FIG. 40, the demodulator includes a phase splitter 1010, a nu-<br>
merically controlled oscillator (NCO) 1020, a first multiplier 1030, a resampler 1040, a<br>
second multiplier 1050, a matched filter 1060, a DC remover 1070, a timing recovery<br>
unit 1080, a carrier recovery unit 1090, and a phase compensator 1110. Herein, the<br>
known sequence detector 1004 includes a known sequence detector and initial<br>
frequency offset estimator 1004-1 for estimating known data information and initial<br>
frequency offset. Also referring to FIG. 40, the phase splitter 1010 receives a pass band<br>
digital signal and splits the received signal into a pass band digital signal of a real<br>
number element and a pass band digital signal of an imaginary number element both<br>
having a phase of 90 degrees between one another. In other words, the pass band<br>
digital signal is split into complex signals. The split portions of the pass band digital<br>
signal are then outputted to the first multiplier 1030. Herein, the real number signal<br>
outputted from the phase splitter 1010 will be referred to as an T signal, and the<br>
imaginary number signal outputted from the phase splitter 1010 will be referred to as a<br>
'Q' signal, for simplicity of the description of the present invention.<br>
[314] The first multiplier 1030 multiplies the I and Q pass band digital signals, which are<br>
outputted from the phase splitter 1010, to a complex signal having a frequency pro-<br>
portional to a constant being outputted from the NCO 1020, thereby changing the I and<br>
Q pass band digital signals to baseband digital complex signals. Then, the baseband<br>
digital signals of the first multiplier 1030 are inputted to the resampler 1040. The<br>
resampler 1040 resamples the signals being outputted from the first multiplier 1030 so<br>
that the signal corresponds to the timing clock provided by the timing recovery unit<br>
1080. Thereafter, the resampler 1040 outputs the resampled signals to the second<br>
multiplier 1050.<br>
[315]        For example, when the analog/digital converter uses a 25 MHz fixed oscillator, the<br>
baseband digital signal having a frequency of 25 MHz, which is created by passing<br>
through the analog/digital converter, the phase splitter 1010, and the first multiplier<br>
1030, is processed with an interpolation process by the resampler 1040. Thus, the in-<br>
terpolated signal is recovered to a baseband digital signal having a frequency twice that<br>
of the receiving signal of a symbol clock (i.e., a frequency of 21.524476 MHz). Al-<br>
ternatively, if the analog/digital converter uses the timing clock of the timing recovery<br>
unit 1080 as the sampling frequency (i.e., if the analog/digital converter uses a variable<br>
frequency) in order to perform an A/D conversion process, the resampler 1040 is not<br>
required and may be omitted.<br>
[316] The second multiplier 1050 multiplies an output frequency of the carrier recovery<br>
unit 1090 with the output of the resampler 1040 so as to compensate any remaining<br>
carrier included in the output signal of the resampler 1040. Thereafter, the<br>
compensated carrier is outputted to the matched filter 1060 and the timing recovery<br>
unit 1080. The signal matched-filtered by the matched filter 1060 is inputted to the DC<br>
remover 1070, the known sequence detector and initial frequency offset estimator<br>
1004-1, and the carrier recovery unit 1090.<br>
[317] The known sequence detector and initial frequency offset estimator 1004-1 detects<br>
the place (or position) of the known data sequences that are being periodically or non-<br>
periodically transmitted. Simultaneously, the known sequence detector and initial<br>
frequency offset estimator 1004-1 estimates an initial frequency offset during the<br>
known sequence detection process. More specifically, while the transmission data<br>
frame is being received, as shown in FIG. 11, the known sequence detector and initial<br>
frequency offset estimator 1004-1 detects the position (or place) of the known data<br>
included in the transmission data frame. Then, the known sequence detector and initial<br>
frequency offset estimator 1004-1 outputs the detected information on the known data<br>
place (i.e., a known sequence position indicator) to the timing recovery unit 1080, the<br>
carrier recovery unit 1090, and the phase compensator 1110 of the demodulator 1002<br>
and the equalizer 1003. Furthermore, the known sequence detector and initial<br>
frequency offset estimator 1004-1 estimates the initial frequency offset, which is then<br>
outputted to the carrier recovery unit 1090. At this point, the known sequence detector<br>
and initial frequency offset estimator 1004-1 may either receive the output of the<br>
matched filter 1060 or receive the output of the resampler 1040. This may be<br>
optionally decided depending upon the design of the system designer.<br>
[318] The timing recovery unit 1080 uses the output of the second multiplier 1050 and the<br>
known sequence position indicator detected from the known sequence detector and<br>
initial frequency offset estimator 1004-1, so as to detect the timing error and, then, to<br>
output a sampling clock being in proportion with the detected timing error to the<br>
resampler 1040. thereby adjusting the sampling timing of the resampler 1040. At this<br>
point, the timing recovery unit 1080 may receive the output of the matched filter 1060<br>
instead of the output of the second multiplier 1050. This may also be optionally<br>
decided depending upon the design of the system designer.<br>
[319] Meanwhile, the DC remover 1070 removes a pilot tone signal (i.e., DC signal),<br>
which has been inserted by the transmitting system, from the matched-filtered signal.<br>
Thereafter, the DC remover 1070 outputs the processed signal to the phase<br>
compensator 1110. The phase compensator 1110 uses the data having the DC removed<br>
by the DC remover 1070 and the known sequence position indicator detected by the<br>
known sequence detector and initial frequency offset estimator 1004-1 to estimate the<br>
frequency offset and, then, to compensate the phase change included in the output of<br>
the DC remover 1070. The data having its phase change compensated are inputted to<br>
the equalizer 1003. Herein, the phase compensator 1110 is optional. If the phase<br>
compensator 1110 is not provided, then the output of the DC remover 1070 is inputted<br>
to the equalizer 1003 instead.<br>
[320] FIG. 41 includes detailed block diagrams of the timing recovery unit 1080, the<br>
carrier recovery unit 1090, and the phase compensator 1110 of the demodulator.<br>
According to an embodiment of the present invention, the carrier recovery unit 1090<br>
includes a buffer 1091, a frequency offset estimator 1092, a loop filter 1093, a holder<br>
1094, an adder 1095, and a NCO 1096. Herein, a decimator may be included before the<br>
buffer 1091. The timing recovery unit 1080 includes a decimator 1081, a buffer 1082,<br>
a timing error detector 1083, a loop filter 1084, a holder 1085, and a NCO 1086.<br>
Finally, the phase compensator 1110 includes a buffer 1111, a frequency offset<br>
estimator 1112, a holder 1113, a NCO 1114, and a multiplier 1115. Furthermore, a<br>
decimator 1200 may be included between the phase compensator 1110 and the<br>
equalizer 1003. The decimator 1200 may be outputted in front of the DC remover 1070<br>
instead of at the outputting end of the phase compensator 1110.<br>
[321] Herein, the decimators correspond to components required when a signal being<br>
inputted to the demodulator is oversampled to N times by the analog/digital converter.<br>
More specifically, the integer N represents the sampling rate of the received signal. For<br>
example, when the input signal is oversampled to 2 times (i.e., when N=2) by the<br>
analog/digital converter, this indicates that two samples are included in one symbol. In<br>
this case, each of the decimators corresponds to a 1/2 decimator. Depending upon<br>
whether or not the oversampling process of the received signal has been performed, the<br>
signal may bypass the decimators.<br>
[322] Meanwhile, the output of the second multiplier 1050 is temporarily stored in the<br>
decimator 1081 and the buffer 1082 both included in the timing recovery unit 1080.<br>
Subsequently, the temporarily stored output data are inputted to the timing error<br>
detector 1083 through the decimator 1081 and the buffer 1082. Assuming that the<br>
output of the second multiplier 1050 is oversampled to N times its initial state, the<br>
decimator 1081 decimates the output of the second multiplier 1050 at a decimation rate<br>
of 1/N. Then, the 1/N-decimated data are inputted to the buffer 1082. In other words,<br>
the decimator 1081 performs decimation on the input signal in accordance with a VSB<br>
symbol cycle. Furthermore, the decimator 1081 may also receive the output of the<br>
matched filter 1060 instead of the output of the second multiplier 1050. The timing<br>
error detector 1083 uses the data prior to or after being processed with matched-<br>
filtering and the known sequence position indicator outputted from the known<br>
sequence detector and initial frequency offset estimator 1004-1 in order to detect a<br>
timing error. Thereafter, the detected timing error is outputted to the loop filter 1084.<br>
Accordingly, the detected timing error information is obtained once during each<br>
repetition cycle of the known data sequence.<br>
[323] For example, if a known data sequence having the same pattern is periodically<br>
inserted and transmitted, as shown in FIG. 39, the timing error detector 1083 may use<br>
the known data in order to detect the timing error. There exists a plurality of methods<br>
for detecting timing error by using the known data. In the example of the present<br>
invention, the timing error may be detected by using a correlation characteristic<br>
between the known data and the received data in the time domain, the known data<br>
being already known in accordance with a pre-arranged agreement between the<br>
transmitting system and the receiving system. The timing error may also be detected by<br>
using the correlation characteristic of the two known data types being received in the<br>
frequency domain. Thus, the detected timing error is outputted. In another example, a<br>
spectral lining method may be applied in order to detect the timing error. Herein, the<br>
spectral lining method corresponds to a method of detecting timing error by using<br>
sidebands of the spectrum included in the received signal.<br>
[324] The loop filter 1084 filters the timing error detected by the timing error detector 1083<br>
and, then, outputs the filtered timing error to the holder 1085. The holder 1085 holds<br>
(or maintains) the timing error filtered and outputted from the loop filter 1084 during a<br>
pre-determined known data sequence cycle period and outputs the processed timing<br>
error to the NCO 1086. Herein, the order of positioning of the loop filter 1084 and the<br>
holder 1085 may be switched with one another. In additionally, the function of the<br>
holder 1085 may be included in the loop filter 1084, and, accordingly, the holder 1085<br>
may be omitted. The NCO 1086 accumulates the timing error outputted from the<br>
holder 1085. Thereafter, the NCO 1086 outputs the phase element (i.e., a sampling<br>
clock) of the accumulated timing error to the resampler 1040, thereby adjusting the<br>
sampling timing of the resampler 1040.<br>
[325] Meanwhile, the buffer 1091 of the carrier recovery unit 1090 may receive either the<br>
data inputted to the matched filter 1060 or the data outputted from the matched filter<br>
1060 and. then, temporarily store the received data. Thereafter, the temporarily stored<br>
data are outputted to the frequency offset estimator 1092. If a decimator is provided in<br>
front of the buffer 1091, the input data or output data of the matched filter 1060 are<br>
decimated by the decimator at a decimation rate of 1/N. Thereafter, the decimated data<br>
are outputted to the buffer 1091. For example, when the input data or output data of the<br>
matched filter 1060 are oversampled to 2 times (i.e., when N=2), this indicates that the<br>
input data or output data of the matched filter 1060 are decimated at a rate of 1/2 by the<br>
decimator 1081 and then outputted to the buffer 1091. More specifically, when a<br>
decimator is provided in front of the buffer 1091, the carrier recovery unit 1090<br>
operates in symbol units. Alternatively, if a decimator is not provided, the carrier<br>
recovery unit 1090 operates in oversampling units.<br>
[326] The frequency offset estimator 1092 uses the input data or output data of the matched<br>
filter 1060 and the known sequence position indicator outputted from the known<br>
sequence detector and initial frequency offset estimator 1004-1 in order to estimate the<br>
frequency offset. Then, the estimated frequency offset is outputted to the loop filter<br>
1093. Therefore, the estimated frequency offset value is obtained once every repetition<br>
period of the known data sequence. The loop filter 1093 performs low pass filtering on<br>
the frequency offset value estimated by the frequency offset estimator 1092 and<br>
outputs the low pass-filtered frequency offset value to the holder 1094. The holder<br>
1094 holds (or maintains) the low pass-filtered frequency offset value during a pre-<br>
determined known data sequence cycle period and outputs the frequency offset value<br>
to the adder 1095. Herein, the positions of the loop filter 1093 and the holder 1094 may<br>
be switched from one to the other. Furthermore, the function of the holder 1085 may<br>
be included in the loop filter 1093, and, accordingly, the holder 1094 may be omitted.<br>
[327] The adder 1095 adds the value of the initial frequency offset estimated by the known<br>
sequence detector and initial frequency offset estimator 1004-1 to the frequency offset<br>
value outputted from the loop filter 1093 (or the holder 1094). Thereafter, the added<br>
offset value is outputted to the NCO 1096. Herein, if the adder 1095 is designed to also<br>
receive the constant being inputted to the NCO 1020, the NCO 1020 and the first<br>
multiplier 1030 may be omitted. In this case, the second multiplier 1050 may simul-<br>
taneously perform changing signals to baseband signals and removing remaining<br>
carrier.<br>
[328] The NCO 1096 generates a complex signal corresponding to the frequency offset<br>
outputted from the adder 1095, which is then outputted to the second multiplier 1050.<br>
Herein, the NCO 1096 may include a ROM. In this case, the NCO 1096 generates a<br>
compensation frequency corresponding to the frequency offset being outputted from<br>
the adder 1095. Then, the NCO 1096 reads a complex cosine corresponding to the<br>
compensation frequency from the ROM. which is then outputted to the second<br>
multiplier 1050. The second multiplier 1050 multiplies the output of the NCO 1094<br>
included in the carrier recovery unit 1090 to the output of the resampler 1040, so as to<br>
remove the carrier offset included in the output signal of the resampler 1040.<br>
[329] FIG. 42 illustrates a detailed block diagram of the frequency offset estimator 1092 of<br>
the carrier recovery unit 1090 according to an embodiment of the present invention.<br>
Herein, the frequency offset estimator 1092 operates in accordance with the known<br>
sequence position indicator detected from the known sequence detector and initial<br>
frequency offset estimator 1004-1. At this point, if the input data or output data of the<br>
matched filter 1060 are inputted through the decimator, the frequency offset estimator<br>
1092 operates in symbol units. Alternatively, if a decimator is not provided, the<br>
frequency offset estimator 1092 operates in oversampling units. In the example given<br>
in the description of the present invention, the frequency offset estimator 1092 operates<br>
in symbol units. Referring to FIG. 42, the frequency offset estimator 1092 includes a<br>
controller 1310, a first N symbol buffer 1301, a K symbol delay 1302, a second N<br>
symbol buffer 1303, a conjugator 1304, a multiplier 1305, an accumulator 1306, a<br>
phase detector 1307, a multiplier 1308, and a multiplexer 1309. The frequency offset<br>
estimator 1092 having the above-described structure, as shown in FIG. 42, will now be<br>
described in detail with respect to an operation example during a known data section.<br>
[330] The first N symbol buffer 1301 may store a maximum of N number of symbol being<br>
inputted thereto. The symbol data that are temporarily stored in the first N symbol<br>
buffer 1301 are then inputted to the multiplier 1305. At the same time, the inputted<br>
symbol is inputted to the K symbol delay 1302 so as to be delayed by K symbols.<br>
Thereafter, the delayed symbol passes through the second N symbol buffer 1303 so as<br>
to be conjugated by the conjugator 1304. Thereafter, the conjugated symbol is inputted<br>
to the multiplier 1305. The multiplier 1305 multiplies the output of the first N symbol<br>
buffer 1301 and the output of the conjugator 1304. Then, the multiplier 1305 outputs<br>
the multiplied result to the accumulator 1306. Subsequently, the accumulator 1306 ac-<br>
cumulates the output of the multiplier 1305 during N symbol periods, thereby<br>
outputted the accumulated result to the phase detector 1307.<br>
[331] The phase detector 1307 extracts the corresponding phase information from the<br>
output of the accumulator 1306, which is then outputted to the multiplier 1308. The<br>
multiplier 1308 then divides the phase information by K, thereby outputting the<br>
divided result to the multiplexer 1309. Herein, the result of the phase information<br>
divided by becomes the frequency offset estimation value. More specifically, at the<br>
point where the input of the known data ends or at a desired point, the frequency offset<br>
estimator 1092 accumulates during an N symbol period multiplication of the complex<br>
conjugate of N number of the input data stored in the first N symbol buffer 1301 and<br>
the complex conjugate of the N number of the input data that are delayed by K<br>
symbols and stored in the second N symbol buffer 1303. Thereafter, the accumulated<br>
value is divided by K, thereby extracting the frequency offset estimation value.<br>
[332]            Based upon a control signal of the controller 1310, the multiplexer 1309 selects<br>
either the output of the multiplier 1308 or '0' and, then, outputs the selected result as<br>
the final frequency offset estimation value. The controller 1310 receives the known<br>
data sequence position indicator from the known sequence detector and initial<br>
frequency offset estimator 1004-1 in order to control the output of the multiplexer<br>
1309. More specifically, the controller 1310 determines based upon the known data<br>
sequence position indicator whether the frequency offset estimation value being<br>
outputted from the multiplier 1308 is valid. If the controller 1310 determines that the<br>
frequency offset estimation value is valid, the multiplexer 1309 selects the output of<br>
the multiplier 1308. Alternatively, if the controller 1310 determines that the frequency<br>
offset estimation value is invalid, the controller 1310 generates a control signal so that<br>
the multiplexer 1309 selects '0'. At this point, it is preferable that the input signals<br>
stored in the first N symbol buffer 1301 and in the second N symbol buffer 1303<br>
correspond to signals each being transmitted by the same known data and passing<br>
through almost the same channel. Otherwise, due to the influence of the transmission<br>
channel, the frequency offset estimating performance may be largely deteriorated.<br>
[333]            Further, the values N and K of the frequency offset estimator 1092 (shown in FIG.<br>
42) may be diversely decided. This is because a particular portion of the known data<br>
that are identically repeated may be used herein. For example, when the data having<br>
the structure described in FIG. 39 are being transmitted, N may be set as BS (i.e., N =<br>
BS), and K may be set as (AS + BS) (i.e., K = AS + BS)). The frequency offset<br>
estimation value range of the frequency offset estimator 1092 is decided in accordance<br>
with the value K. If the value K is large, then the frequency offset estimation value<br>
range becomes smaller. Alternatively, if the value K is small, then the frequency offset<br>
estimation value range becomes larger. Therefore, when the data having the structure<br>
of FIG. 39 is transmitted, and if the repetition cycle (AS + BS) of the known data is<br>
long, then the frequency offset estimation value range becomes smaller.<br>
[334]            In this case, even if the initial frequency offset is estimated by the known sequence<br>
detector and initial frequency offset estimator 1004-1, and if the estimated value is<br>
compensated by the second multiplier 1050, the remaining frequency offset after being<br>
compensated will exceed the estimation range of the frequency offset estimator 1092.<br>
In order to overcome such problems, the known data sequence that is regularly<br>
transmitted may be configured of a repetition of a same data portion by using a cyclic<br>
extension process. For example, if the known data sequence shown in FIG. 39 is<br>
configured of two identical portions having the length of BS/2, then the N and K<br>
values of the frequency offset estimator 1092 (shown in FIG. 42) may be respectively<br>
set as B/2 and B/2 (i.e.. N=BS/2 and K=BS/2). In this case, the estimation value range<br>
may become larger than when using repeated known data.<br>
[335]            Meanwhile, the known sequence detector and initial frequency offset estimator<br>
1004-1 detects the place (o position) of the known data sequences that are being pe-<br>
riodically or non-periodically transmitted. Simultaneously, the known sequence<br>
detector and initial frequency offset estimator 1004-1 estimates an initial frequency<br>
offset during the known sequence detection process. The known data sequence position<br>
indicator detected by the known sequence detector and initial frequency offset<br>
estimator 1004-1 is outputted to the timing recovery unit 1080, the carrier recovery<br>
unit 1090, and the phase compensator 1110 of the demodulator 1002, and to the<br>
equalizer 1003. Thereafter, the estimated initial frequency offset is outputted to the<br>
carrier recovery unit 1090. At this point, the known sequence detector and initial<br>
frequency offset estimator 1004-1 may either receive the output of the matched filter<br>
1060 or receive the output of the resampler 1040. This may be optionally decided<br>
depending upon the design of the system designer. Herein, the frequency offset<br>
estimator shown in FIG. 42 may be directly applied in the known sequence detector<br>
and initial frequency offset estimator 1004-1 or in the phase compensator 1110 of the<br>
frequency offset estimator.<br>
[336]            FIG. 43 illustrates a detailed block diagram showing a known sequence detector<br>
and initial frequency offset estimator according to an embodiment of the present<br>
invention. More specifically, FIG. 43 illustrates an example of an initial frequency<br>
offset being estimated along with the known sequence position indicator. Herein, FIG.<br>
43 shows an example of an inputted signal being oversampled to N times of its initial<br>
state. In other words, N represents the sampling rate of a received signal. Referring to<br>
FIG. 43, the known sequence detector and initial frequency offset estimator includes N<br>
number of partial correlators 1411 to 14IN configured in parallel, a known data place<br>
detector and frequency offset decider 1420, a known data extractor 1430, a buffer<br>
1440, a multiplier 1450, a NCO 1460, a frequency offset estimator 1470, and an adder<br>
1480. Herein, the first partial correlator 1411 consists of a 1/N decimator, and a partial<br>
correlator. The second partial correlator 1412 consists of a 1 sample delay, a 1/N<br>
decimator, and a partial correlator. And, the Nth partial correlator 14 IN consists of a<br>
N-l sample delay, a 1/N decimator, and a partial correlator. These are used to match<br>
(or identify) the phase of each of the samples within the oversampled symbol with the<br>
phase of the original (or initial) symbol, and to decimate the samples of the remaining<br>
phases, thereby performing partial correlation on each sample. More specifically, the<br>
input signal is decimated at a rate of 1/N for each sampling phase, so as to pass through<br>
each partial correlator.<br>
[337]            For example, when the input signal is oversampled to 2 times (i.e.. when N=2).<br>
this indicates that two samples are included in one signal. In this case, two partial<br>
correlators (e.g., 1411 and 1412) are required, and each 1/N decimator becomes a 1/2<br>
decimator. At this point, the 1/N decimator of the first partial correlator 1411<br>
decimates (or removes), among the input samples, the samples located in-between<br>
symbol places (or positions). Then, the corresponding 1/N decimator outputs the<br>
decimated sample to the partial correlator. Furthermore, the 1 sample delay of the<br>
second partial correlator 1412 delays the input sample by 1 sample (i.e., performs a 1<br>
sample delay on the input sample) and outputs the delayed input sample to the 1/N<br>
decimator. Subsequently, among the samples inputted from the 1 sample delay, the 1/N<br>
decimator of the second partial correlator 1412 decimates (or removes) the samples<br>
located in-between symbol places (or positions). Thereafter, the corresponding 1/N<br>
decimator outputs the decimated sample to the partial correlator.<br>
[338]            After each predetermined period of the VSB symbol, each of the partial correlators<br>
outputs a correlation value and an estimation value of the coarse frequency offset<br>
estimated at that particular moment to the known data place detector and frequency<br>
offset decider 1420. The known data place detector and frequency offset decider 1420<br>
stores the output of the partial correlators corresponding to each sampling phase during<br>
a data group cycle or a pre-decided cycle. Thereafter, the known data place detector<br>
and frequency offset decider 1420 decides a position (or place) corresponding to the<br>
highest correlation value, among the stored values, as the place (or position) for<br>
receiving the known data. Simultaneously, the known data place detector and<br>
frequency offset decider 1420 finally decides the estimation value of the frequency<br>
offset estimated at the moment corresponding to the highest correlation value as the<br>
coarse frequency offset value of the receiving system. At this point, the known<br>
sequence position indicator is inputted to the known data extractor 1430, the timing<br>
recovery unit 1080, the carrier recovery unit 1090, the phase compensator 1110, and<br>
the equalizer 1003, and the coarse frequency offset is inputted to the adder 1480 and<br>
the NCO 1460.<br>
[339]            In the meantime, while the N numbers of partial correlators 1411 to 141N detect<br>
the known data place (or known sequence position) and estimate the coarse frequency<br>
offset, the buffer 1440 temporarily stores the received data and outputs the temporarily<br>
stored data to the known data extractor 1430. The known data extractor 1430 uses the<br>
known sequence position indicator, which is outputted from the known data place<br>
detector and frequency offset decider 1420, so as to extract the known data from the<br>
output of the buffer 1440. Thereafter, the known data extractor 1430 outputs the<br>
extracted data to the multiplier 1450. The NCO 1460 generates a complex signal cor-<br>
responding to the coarse frequency offset being outputted from the known data place<br>
detector and frequency offset decider 1420. Then, the NCO 1460 outputs the generated<br>
complex signal to the multiplier 1450.<br>
[340]            The multiplier 1450 multiplies the complex signal of the NCO 1460 to the known<br>
data being outputted from the known data extractor 1430, thereby outputting the<br>
known data having the coarse frequency offset compensated to the frequency offset<br>
estimator 1470. The frequency offset estimator 1470 estimates a fine frequency offset<br>
from the known data having the coarse frequency offset compensated. Subsequently,<br>
the frequency offset estimator 1470 outputs the estimated fine frequency offset to the<br>
adder 1480. The adder 1480 adds the coarse frequency offset to the fine frequency<br>
offset. Thereafter, the adder 1480 decides the added result as a final initial frequency<br>
offset, which is then outputted to the adder 1095 of the carrier recovery unit 1090<br>
included in the demodulator 1002. More specifically, during the process of acquiring<br>
initial synchronization, the present invention may estimate and use the coarse<br>
frequency offset as well as the fine frequency offset, thereby enhancing the estimation<br>
performance of the initial frequency offset.<br>
[341]            It is assumed that the known data is inserted within the data group and then<br>
transmitted, as shown in FIG. 11. Then, the known sequence detector and initial<br>
frequency offset estimator 1004-1 may use the known data that have been additionally<br>
inserted between the A1 area and the A2 area, so as to estimate the initial frequency<br>
offset. The known position indicator, which was periodically inserted within the A area<br>
estimated by the known sequence detector and initial frequency offset estimator<br>
1004-1, is inputted to the timing error detector 1083 of the timing error recovery unit<br>
1080, to the frequency offset estimator 1092 of the carrier recovery unit 1090, to the<br>
frequency offset estimator 1112 of the phase compensator 1110, and to the equalizer<br>
1003.<br>
[342]            FIG. 44 illustrates a block diagram showing the structure of one of the partial<br>
correlators shown in FIG. 43. During the step of detecting known data, since a<br>
frequency offset is included in the received signal, each partial correlator divides the<br>
known data, which is known according to an agreement between the transmitting<br>
system and the receiving system, to K number of parts each having an L symbol<br>
length, thereby correlating each divided part with the corresponding part of the<br>
received signal. In order to do so, each partial correlator includes K number of phase<br>
and size detector 1511 to 15 IK each formed in parallel, an adder 1520, and a coarse<br>
frequency offset estimator 1530.<br>
[343]            The first phase and size detector 1511 includes an L symbol buffer 1511-2, a<br>
multiplier 1511-3, an accumulator 1511-4. and a squarer 1511-5. Herein, the first phase<br>
and size detector 1511 calculates the correlation value of the known data having a first<br>
L symbol length among the K number of sections. Also, the second phase and size<br>
detector 1512 includes an L symbol delay 1512-1. an L symbol buffer 1512-2. a<br>
multiplier 15 12-3, an accumulator 1512-4. and a squarer 15 12-5. Herein, the second<br>
phase and size detector 1512 calculates the correlation value of the known data having<br>
a second L symbol length among the K number of sections. Finally, the Nth phase and<br>
size detector 15IK includes a (K-l)L symbol delay 151K-1, an L symbol buffer<br>
151K-2, a multiplier 151K-3, an accumulator 151K-4, and a squarer 151K-5. Herein,<br>
the Nth phase and size detector 15 IK calculates the correlation value of the known<br>
data having an Nth L symbol length among the K number of sections.<br>
[344]           Referring to FIG. 44, {PO, PI,..., PKL-1} each being multiplied with the received<br>
signal in the multiplier represents the known data known by both the transmitting<br>
system and the receiving system (i.e., the reference known data generated from the<br>
receiving system). And, * represents a complex conjugate. For example, in the first<br>
phase and size detector 1511, the signal outputted from the 1/N decimator of the first<br>
partial correlator 1411, shown in FIG. 43, is temporarily stored in the L symbol buffer<br>
1511-2 of the first phase and size detector 1511 and then inputted to the multiplier<br>
1511-3. The multiplier 1511-3 multiplies the output of the L symbol buffer 1511-2<br>
with the complex conjugate of the known data parts PO, PI,.... PKL-1, each having a<br>
first L symbol length among the known K number of sections. Then, the multiplied<br>
result is outputted to the accumulator 1511-4. During the L symbol period, the ac-<br>
cumulator 1511-4 accumulates the output of the multiplier 1511-3 and, then, outputs<br>
the accumulated value to the squarer 1511-5 and the coarse frequency offset estimator<br>
1530. The output of the accumulator 1511-4 is a correlation value having a phase and a<br>
size. Accordingly, the squarer 1511-5 calculates an absolute value of the output of the<br>
multiplier 1511-4 and squares the calculated absolute value, thereby obtaining the size<br>
of the correlation value. The obtained size is then inputted to the adder 1520.<br>
[345]           The adder 1520 adds the output of the squares corresponding to each size and<br>
phase detector 1511 to 15 IK. Then, the adder 1520 outputs the added result to the<br>
known data place detector and frequency offset decider 1420. Also, the coarse<br>
frequency offset estimator 1530 receives the output of the accumulator corresponding<br>
to each size and phase detector 1511 to 151K, so as to estimate the coarse frequency<br>
offset at each corresponding sampling phase. Thereafter, the coarse frequency offset<br>
estimator 1530 outputs the estimated offset value to the known data place detector and<br>
frequency offset decider 1420.<br>
[346]           When the K number of inputs that are outputted from the accumulator of each<br>
phase and size detector 1511 to 151K are each referred to as (Z0 ,Z1 ,...,ZK-1 }, the output<br>
of the coarse frequency offset estimator 1530 may be obtained by using Equation 7<br>
shown below.<br>
[347] [Math Figure 7]<br>
[348] <br>
[349] The known data place detector and frequency offset decider 1420 stores the output of<br>
the partial correlator corresponding to each sampling phase during an enhanced data<br>
group cycle or a pre-decided cycle. Then, among the stored correlation values, the<br>
known data place detector and frequency offset decider 1420 decides the place (or<br>
position) corresponding to the highest correlation value as the place for receiving the<br>
known data.<br>
[350] Furthermore, the known data place detector and frequency offset decider 1420<br>
decides the estimated value of the frequency offset taken (or estimated) at the point of<br>
the highest correlation value as the coarse frequency offset value of the receiving<br>
system. For example, if the output of the partial correlator corresponding to the second<br>
partial correlator 1412 is the highest value, the place corresponding to the highest value<br>
is decided as the known data place. Thereafter, the coarse frequency offset estimated<br>
by the second partial correlator 1412 is decided as the final coarse frequency offset,<br>
which is then outputted to the demodulator 1002.<br>
[351]            Meanwhile, the output of the second multiplier 1050 is temporarily stored in the<br>
decimator 1081 and the buffer 1082 both included in the timing recovery unit 1080.<br>
Subsequently, the temporarily stored output data are inputted to the timing error<br>
detector 1083 through the decimator 1081 and the buffer 1082. Assuming that the<br>
output of the second multiplier 1050 is oversampled to N times its initial state, the<br>
decimator 1081 decimates the output of the second multiplier 1050 at a decimation rate<br>
of 1/N. Then, the 1/N-decimated data are inputted to the buffer 1082. In other words,<br>
the decimator 1081 performs decimation on the input signal in accordance with a VSB<br>
symbol cycle. Furthermore, the decimator 1081 may also receive the output of the<br>
matched filter 1060 instead of the output of the second multiplier 1050.<br>
[352]            The timing error detector 1083 uses the data prior to or after being processed with<br>
matched-filtering and the known sequence position indicator outputted from the known<br>
data detector and initial frequency offset estimator 1004-1 in order to detect a timing<br>
error. Thereafter, the detected timing error is outputted to the loop filter 1084. Ac-<br>
cordingly, the detected timing error information is obtained once during each repetition<br>
cycle of the known data sequence.<br>
[353]            For example, if a known data sequence having the same pattern is periodically<br>
inserted and transmitted, as shown in FIG. 39, the timing error detector 1083 may use<br>
the known data in order to detect the timing error. There exists a plurality of methods<br>
for detecting timing error by using the known data.<br>
[354]            In the example of the present invention, the timing error may be detected by using<br>
a correlation characteristic between the known data and the received data in the time<br>
domain, the known data being already known in accordance with a pre-arranged<br>
agreement between the transmitting system and the receiving system. The timing error<br>
may also be detected by using the correlation characteristic of the two known data<br>
types being received in the frequency domain. Thus, the detected timing error is<br>
outputted. In another example, a spectral lining method may be applied in order to<br>
detect the timing error. Herein, the spectral lining method corresponds to a method of<br>
detecting timing error by using sidebands of the spectrum included in the received<br>
signal.<br>
[355]            The loop filter 1084 filters the timing error detected by the timing error detector<br>
1083 and, then, outputs the filtered timing error to the holder 1085.<br>
[356]            The holder 1085 holds (or maintains) the timing error filtered and outputted from<br>
the loop filter 1084 during a pre-determined known data sequence cycle period and<br>
outputs the processed timing error to the NCO 1086. Herein, the order of positioning of<br>
the loop filter 1084 and the holder 1085 may be switched with one another. In ad-<br>
ditionally, the function of the holder 1085 may be included in the loop filter 1084, and,<br>
accordingly, the holder 1085 may be omitted.<br>
[357]            The NCO 1086 accumulates the timing error outputted from the holder 1085.<br>
Thereafter, the NCO 1086 outputs the phase element (i.e., a sampling clock) of the ac-<br>
cumulated timing error to the resampler 1040, thereby adjusting the sampling timing of<br>
the resampler 1040.<br>
[358]            FIG. 45 illustrates an example of the timing recovery unit included in the de-<br>
modulator 1002 shown in FIG. 38. Referring to FIG. 45, the timing recovery unit 1080<br>
includes a first timing error detector 1611, a second timing error detector 1612, a<br>
multiplexer 1613, a loop-filter 1614, and an NCO 1615. The timing recovery unit 1080<br>
would be beneficial when the input signal is divided into a first area in which known<br>
data having a predetermined length are inserted at predetermined position(s) and a<br>
second area that includes no known data. Assuming that the first timing error detector<br>
1611 detects a first timing error using a sideband of a spectrum of an input signal and<br>
the second timing error detector 1612 detects a second timing error using the known<br>
data, the multiplexer 1613 can output the first timing error for the first area and can<br>
output the second timing error for the second area. The multiplexer 1613 may output<br>
both of the first and second timing errors for the first area in which the known data are<br>
inserted. By using the known data a more reliable timing error can be detected and the<br>
performance of the timing recovery unit 1080 can be enhanced.<br>
[359]            This disclosure describes two ways of detecting a timing error. One way is to<br>
detect a timing error using correlation in the time domain between known data prc-<br>
knovvn to a transmitting system and a receiving system (reference known data) and the<br>
known data actually received by the receiving system, and the other way is to detect a<br>
timing error using correlation in the frequency domain between two known data<br>
actually received by the receiving system. In FIG. 46, a timing error is detected by<br>
calculating correlation between the reference known data pre-known to and generated<br>
by the receiving system and the known data actually received. In FIG. 46, correlation<br>
between an entire portion of the reference know data sequence and an entire portion of<br>
the received known data sequence is calculated. The correlation output has a peak<br>
value at the end of each known data sequence actually received.<br>
[360]            In FIG. 47, a timing error is detected by calculating correlation values between<br>
divided portions of the reference known data sequence and divided portions of the<br>
received known data sequence, respectively. The correlation output has a peak value at<br>
the end of each divided portion of the received known data sequence. The correlation<br>
values may be added as a total correlation value as shown FIG. 47, and the total<br>
correlation value can be used to calculate the timing error. When an entire portion of<br>
the received known data is used for correlation calculation, the timing error can be<br>
obtained for each data block. If the correlation level of the entire portion of the known<br>
data sequence is low, a more precise correlation can be obtained by using divided<br>
portions of the known data sequence as shown in FIG. 47.<br>
[361]            The use of a final correlation value which is obtained based upon a plurality of<br>
correlation values of divided portions of a received known data sequence may reduce<br>
the carrier frequency error. In addition, the process time for the timing recovery can be<br>
greatly reduced when the plurality of correlation values are used to calculate the timing<br>
error. For example, when the reference known data sequence which is pre-known to<br>
the transmitting system and receiving system is divided into K portions, K correlation<br>
values between the K portions of the reference known data sequence and the cor-<br>
responding divided portions of the received known data sequence can be calculated, or<br>
any combination(s) of the correlation values can be used. Therefore, the period of the<br>
timing error detection can be reduced when the divided portions of the known data<br>
sequence are used instead of the entire portion of the sequence.<br>
[362]            The timing error can be calculated from the peak value of the correlation values.<br>
The timing error is obtained for each data block if an entire portion of the known data<br>
sequence is used as shown in FIG. 48. On the other hand, if K divided portions of the<br>
known data sequence are used for correlation calculation, K correlation values and cor-<br>
responding peak values can be obtained. This indicates that the timing error can be<br>
detected K times.<br>
[363]            A method of detecting a timing error using the correlation between the reference<br>
known data and the received known data shown will now be described in more detail.<br>
FIG. 48 illustrates correlation values between the reference known data and the<br>
received known data. The correlation values correspond to data samples sampled at a<br>
rate two times greater than the symbol clock. When the random data effect is<br>
minimized and there is no timing clock error, the correlation values between the<br>
reference known data and the received known data are symmetrical. However, if a<br>
timing phase error exists, the correlation values adjacent to the peak value are not<br>
symmetrical as shown in FIG. 48. Therefore, the timing error can be obtained by using<br>
a difference (timing phase error shown in FIG. 48) between the correlation values<br>
before and after the peak value.<br>
[364]            FIG. 49 illustrates an example of the timing error detector shown in FIG. 45. The<br>
timing error detector includes a correlator 1701, a down sampler 1702, an absolute<br>
value calculator 1703, a delay 1704, and a subtractor 1705. The correlator 1701<br>
receives a known data sequence sampled at a rate at least two times higher than the<br>
symbol clock frequency and calculates the correlation values between the received<br>
known data sequence and a reference known data sequence. The down sampler 1702<br>
performs down sampling on the correlation values and obtains samples having a<br>
symbol frequency. For example, if the data inputted to the correlator 1701 is pre-<br>
sampled at a sampling rate of 2, then the down sampler 1702 performs down sampling<br>
at a rate of 1/2 to obtain samples having the symbol frequency. The absolute value<br>
calculator 1703 calculates absolute values (or square values) of the down-sampled<br>
correlation values. These absolute values are inputted to the delay 1704 and the<br>
subtractor 1705. The delay 1704 delays the absolute values for a symbol and the<br>
subtractor then outputs a timing error by subtracting the delayed absolute value from<br>
the values outputted from the absolute value calculator 1703.<br>
[365]            The arrangement of the correlator 1701, the down sampler 1702, the absolute<br>
value calculator 1703, and the delay 1704, and the subtractor 1705 shown in FIG. 49<br>
can be modified. For example, the timing phase error can be calculated in the order of<br>
the down sampler 1702, the correlator 1701, and the absolute value calculator 1703, or<br>
in the order of the correlator 1701, the absolute value calculator 1703, and the down<br>
sampler 1702.<br>
[366]            The timing error can also be obtained using the frequency characteristic of the<br>
known data. When there is a timing frequency error, a phase of the input signal<br>
increases at a fixed slope as the frequency of the signal increases and this slope is<br>
different for current and next data block. Therefore, the timing error can be calculated<br>
based on the frequency characteristic of two different known data blocks. In FIG. 50, a<br>
current known data sequence (right) and a previous known data sequence (left) are<br>
converted into first and second frequency domain signals, respectively, using a Fast<br>
Fourier Transform (FFT) algorithm. The conjugate value of the first frequency domain<br>
signal is then multiplied with the second frequency domain signal in order to obtain the<br>
correlation value between two frequency domain signals. In other words, the<br>
correlation between the frequency value of the previous known data sequence and the<br>
frequency value of the current known data sequence is used to detect a phase change<br>
between the known data blocks for each frequency. In this way the phase distortion of<br>
a channel can be eliminated.<br>
[367]            The frequency response of a complex VSB signal does not have a full symmetric<br>
distribution as shown in FIG. 48. Rather, its distribution is a left or right half of the dis-<br>
tribution and the frequency domain correlation values also have a half distribution. In<br>
order to the phase difference between the frequency domain correlation values, the<br>
frequency domain having the correlation values can be divided into two sub-areas and<br>
a phase of a combined correlation value in each sub-area can be obtained. Thereafter,<br>
the difference between the phases of sub-areas can be used to calculate a timing<br>
frequency error. When a phase of a combined correlation values is used for each<br>
frequency, the magnitude of each correlation value is proportional to reliability and a<br>
phase component of each correlation value is reflected to the final phase component in<br>
proportion to the magnitude.<br>
[368]            FIG. 51 illustrates another example of the timing error detector shown in FIG. 45.<br>
The timing error detector shown in FIG. 51 includes a Fast Fourier Transform (FFT)<br>
unit 1801, a first delay 1802, a conjugator 1803, a multiplier 1804, an accumulator<br>
(adder) 1805, a phase detector 1806, a second delay 1807, and a subtractor 1808. The<br>
first delay 1802 delays for one data block and the second delay 1807 delays for 1/4<br>
data block. One data block includes a frequency response of a sequence of N known<br>
data symbol sequences. When a known data region is known and the data symbols are<br>
received, the FFT unit 1801 converts complex values of consecutive N known data<br>
symbol sequences into complex values in the frequency domain. The first delay 1802<br>
delays the frequency domain complex values for a time corresponding to one data<br>
block, and the conjugator 1803 generate conjugate values of the delayed complex<br>
values. The multiplier 1804 multiplies the current block of known data outputted from<br>
the FFT unit 1801 with the previous block of known data outputted from the<br>
conjugator 1803. The output of the multiplier 1804 represents frequency region<br>
correlation values within a known data block.<br>
[369]            Since the complex VSB data exist only on a half of the frequency domain, the ac-<br>
cumulator 1805 divides a data region in the known data block into two sub-regions,<br>
and accumulates correlation values for each sub-region. The phase detector 1806<br>
detects a phase of the accumulated correlation value for each sub-region. The second<br>
delay 1807 delays the detected phase for a time corresponding to a 1/4 data block. The<br>
subtractor 1808 obtains a phase difference between the delayed phase and the phase<br>
outputted from the accumulator 1806 and outputs the phase difference as a timing<br>
frequency error.<br>
[370]            In the method of calculating a timing error by using a peak of correlation between<br>
the reference known data and the received known data in the time domain, the con-<br>
tribution of the correlation values may affect a channel when the channel is a multi<br>
path channel. However, this can be greatly eliminated if the timing error is obtained<br>
using the correlation between two received known data. In addition, the timing error<br>
can be detected using an entire portion of the known data sequence inserted by the<br>
transmitting system, or it can be detected using a portion of the known data sequence<br>
which is robust to random or noise data.<br>
[371]            Meanwhile, the DC remover 1070 removes pilot tone signal (i.e., DC signal),<br>
which has been inserted by the transmitting system, from the matched-filtered signal.<br>
Thereafter, the DC remover 1070 outputs the processed signal to the phase<br>
compensator 1110.<br>
[372]            FIG. 52 illustrates a detailed block diagram of a DC remover according to an<br>
embodiment of the present invention. Herein, identical signal processing processes are<br>
performed on each of a real number element (or in-phase (I)) and an imaginary number<br>
element (or a quadrature (Q)) of the inputted complex signal, thereby estimating and<br>
removing the DC value of each element. In order to do so, the DC remover shown in<br>
FIG. 52 includes a first DC estimator and remover 1900 and a second DC estimator<br>
and remover 1950. Herein, the first DC estimator and remover 1900 includes an R<br>
sample buffer 1901, a DC estimator 1902, an M sample holder 1903, a C sample delay<br>
1904, and a subtracter 1905. Herein, the first DC estimator and remover 1900<br>
estimates and removes the DC of the real number element (i.e., an in-phase DC).<br>
Furthermore, the second DC estimator and remover 1950 includes an R sample buffer<br>
1951, a DC estimator 1952, an M sample holder 1953, a C sample delay 1954, and a<br>
subtracter 1955. The second DC estimator and remover 1950 estimates and removes<br>
the DC of the imaginary number element (i.e., a quadrature DC). In the present<br>
invention, the first DC estimator and remover 1900 and the second DC estimator and<br>
remover 1950 may receive different input signals. However, each DC estimator and<br>
remover 1900 and 1950 has the same structure. Therefore, a detailed description of the<br>
first DC estimator and remover 1900 will be presented herein, and the second DC<br>
estimator and remover 1950 will be omitted for simplicity.<br>
[373]            More specifically, the in-phase signal matched-filtered by the matched filter 1060<br>
is inputted to the R sample buffer 1901 of the first DC estimator and remover 1900<br>
within the DC remover 1070 and is then stored. The R sample buffer 1901 is a buffer<br>
having the length of R sample. Herein, the output of the R sample buffer 1901 is<br>
inputted to the DC estimator 1902 and the C sample delay 1904. The DC estimator<br>
1902 uses the data having the length of R sample, which are outputted from the buffer<br>
1901, so as to estimate the DC value by using Equation 8 shown below.<br>
[374] [Math Figure 8]<br>
[375] <br>
[376] In the above-described Equation 8, x[n] represents the inputted sample data stored in<br>
the buffer 1901. And, y[n] indicates the DC estimation value. More specifically, the<br>
DC estimator 1902 accumulates R number of sample data stored in the buffer 1901 and<br>
estimates the DC value by dividing the accumulated value by R. At this point, the<br>
stored input sample data set is shifted as much as M sample. Herein, the DC estimation<br>
value is outputted once every M samples.<br>
[377]            FIG. 53 illustrates a shifting of the input sample data used for DC estimation. For<br>
example, when M is equal to 1 (i.e., M=1), the DC estimator 1902 estimates the DC<br>
value each time a sample is shifted to the buffer 1901. Accordingly, each estimated<br>
result is outputted for each sample. If M is equal to R (i.e., M=R), the DC estimator<br>
1902 estimates the DC value each time R number of samples are shifted to the buffer<br>
1901. Accordingly, each estimated result is outputted for each cycle of R samples.<br>
Therefore, in this case, the DC estimator 1902 corresponds to a DC estimator that<br>
operates in a block unit of R samples. Herein, any value within the range of 1 and R<br>
may correspond to the value M.<br>
[378]            As described above, since the output of the DC estimator 1902 is outputted after<br>
each cycle of M samples, the M sample holder 1903 holds the DC value estimated<br>
from the DC estimator 1902 for a period of M samples. Then, the estimated DC value<br>
is outputted to the subtractor 1905. Also, the C sample delay 1904 delays the input<br>
sample data stored in the buffer 1901 by C samples, which are then outputted to the<br>
subtractor 1905. The subtractor 1905 subtracts the output of the M sample holder 1903<br>
from the output of the C sample delay 1904. Thereafter, the subtractor 1905 outputs the<br>
signal having the in-phase DC removed.<br>
[379]            Herein, the C sample delay 1904 decides which portion of the input sample data is<br>
to be compensated with the output of the DC estimator 1902. More specifically, the<br>
DC estimator and remover 1900 may be divided into a DC estimator 1902 for<br>
estimating the DC and the subtractor for compensating the input sample data within the<br>
estimated DC value. At this point, the C sample delay 1904 decides which portion of<br>
the input sample data is to be compensated with the estimated DC value. For example,<br>
when C is equal to 0 (i.e., C=0), the beginning of the R samples is compensated with<br>
the estimated DC value obtained by using R samples. Alternatively, when C is equal to<br>
R (i.e.. C=R), the end of the R samples is compensated with the estimated DC value<br>
obtained by using R samples. Similarly, the data having the DC removed are inputted<br>
to the buffer 1111 and the frequency offset estimator 1112 of the phase compensator<br>
1110.<br>
[380]            Meanwhile, FIG. 54 illustrates a detailed block diagram of a DC remover<br>
according to another embodiment of the present invention. Herein, identical signal<br>
processing processes are performed on each of a real number element (or in-phase (1))<br>
and an imaginary number element (or a quadrature (Q)) of the inputted complex signal,<br>
thereby estimating and removing the DC value of each element. In order to do so, the<br>
DC remover shown in FIG. 54 includes a first DC estimator and remover 2100 and a<br>
second DC estimator and remover 2150. FIG. 54 corresponds to an infinite impulse<br>
response (IIR) structure.<br>
[381]            Herein, the first DC estimator and remover 2100 includes a multiplier 2101, an<br>
adder 2102, an 1 sample delay 2103, a multiplier 2104, a C sample delay 2105, and a<br>
subtracter 2106. Also, the second DC estimator and remover 2150 includes a multiplier<br>
2151, an adder 2152, an 1 sample delay 2153, a multiplier 2154, a C sample delay<br>
2155, and a subtractor 2156. In the present invention, the first DC estimator and<br>
remover 2100 and the second DC estimator and remover 2150 may receive different<br>
input signals. However, each DC estimator and remover 2100 and 2150 has the same<br>
structure. Therefore, a detailed description of the first DC estimator and remover 2100<br>
will be presented herein, and the second DC estimator and remover 2150 will be<br>
omitted for simplicity.<br>
[382]            More specifically, the in-phase signal matched-filtered by the matched filter 1060<br>
is inputted to the multiplier 2101 and the C sample delay 2105 of the first DC estimator<br>
and remover 2100 within the DC remover 1070. The multiplier 2101 multiplies a pre-<br>
determined constant a to the in-phase signal that is being inputted. Then, the multiplier<br>
2101 outputs the multiplied result to the adder 2102. The adder 2102 adds the output of<br>
the multiplier 2101 to the output of the multiplier 2104 that is being fed-back.<br>
Thereafter, the adder 2102 outputs the added result to the 1 sample delay 2103 and the<br>
subtractor 2106. More specifically, the output of the adder 2102 corresponds to the<br>
estimated in-phase DC value.<br>
[383]            The 1 sample delay 2103 delays the estimated DC value by 1 sample and outputs<br>
the DC value delayed by 1 sample to the multiplier 2104. The multiplier 2104<br>
multiplies a pre-determined constant (l-o) to the DC value delayed by 1 sample. Then,<br>
the multiplier 2104 feeds-back the multiplied result to the adder 2102.<br>
[384]            Subsequently, the C sample delay 2105 delays the in-phase sample data by C<br>
samples and, then, outputs the delayed in-phase sample data to the subtractor 2106.<br>
The subtractor 2106 subtracts the output of the adder 2102 from the output of the C<br>
sample delay 2105, thereby outputting the signal having the in-phase DC removed<br>
therefrom.<br>
[385]            Similarly, the data having the DC removed are inputted to the buffer 1111 and the<br>
frequency offset estimator 1112 of the phase compensator 1110 of FIG. 41.<br>
[386]            The frequency offset estimator 1112 uses the known sequence position indicator<br>
outputted from the known sequence detector and initial frequency offset estimator<br>
1004-1 in order to estimate the frequency offset from the known data sequence that is<br>
being inputted, the known data sequence having the DC removed by the DC remover<br>
1070. Then, the frequency offset estimator 1112 outputs the estimated frequency offset<br>
to the holder 1113. Similarly, the frequency offset estimation value is obtained at each<br>
repetition cycle of the known data sequence.<br>
[387]            Therefore, the holder 1113 holds the frequency offset estimation value during a<br>
cycle period of the known data sequence and then outputs the frequency offset<br>
estimation value to the NCO 1114. The NCO 1114 generates a complex signal cor-<br>
responding to the frequency offset held by the holder 1113 and outputs the generated<br>
complex signal to the multiplier 1115.<br>
[388]            The multiplier 1115 multiplies the complex signal outputted from the NCO 1114<br>
to the data being delayed by a set period of time in the buffer 1111, thereby com-<br>
pensating the phase change included in the delayed data. The data having the phase<br>
change compensated by the multiplier 1115 pass through the decimator 1200 so as to<br>
be inputted to the equalizer 1003. At this point, since the frequency offset estimated by<br>
the frequency offset estimator 1112 of the phase compensator 1110 does not pass<br>
through the loop filter, the estimated frequency offset indicates the phase difference<br>
between the known data sequences. In other words, the estimated frequency offset<br>
indicates a phase offset.<br>
[389]<br>
[390]            Channel equalizer<br>
[391]            The demodulated data using the known data in the demodulator 1002 is inputted to<br>
the channel equalizer 1003. The demodulated data is inputted to the known sequence<br>
detector 1004.<br>
[392]            The equalizer 1003 may perform channel equalization by using a plurality of<br>
methods. An example of estimating a channel impulse response (OR) so as to perform<br>
channel equalization will be given in the description of the present invention. Most<br>
particularly, an example of estimating the CIR in accordance with each region within<br>
the data group, which is hierarchically divided and transmitted from the transmitting<br>
system, and applying each CIR differently will also be described herein. Furthermore,<br>
by using the known data, the place and contents of which is known in accordance with<br>
an agreement between the transmitting system and the receiving system, and/or the<br>
field synchronization data, so as to estimate the CIR, the present invention may be able<br>
to perform channel equalization with more stability.<br>
[393]            Herein, the data group that is inputted for the equalization process is divided into<br>
regions A to D, as shown in FIG. 11. More specifically, in the example of the present<br>
invention, each region A, B, C, and D are further divided into MPH blocks B4 to B7,<br>
MPH blocks B3 and B8, MPH blocks B2 and B9, MPH blocks B1 and B10, re-<br>
spectively.<br>
[394]            More specifically, a data group can be assigned and transmitted a maximum the<br>
number of 4 in a VSB frame in the transmitting system. In this case, all data group do<br>
not include field synchronization data. In the present invention, the data group<br>
including the field synchronization data performs channel-equalization using the field<br>
synchronization data and known data. And the data group not including the field syn-<br>
chronization data performs channel-equalization using the known data. For example,<br>
the data of the MPH block B3 including the field synchronization data performs<br>
channel-equalization using the CIR calculated from the field synchronization data area<br>
and the CIR calculated from the first known data area. Also, the data of the MPH<br>
blocks B1 and B2 performs channel-equalization using the CIR calculated from the<br>
field synchronization data area and the CIR calculated from the first known data area.<br>
Meanwhile, the data of the MPH blocks B4 to B6 not including the field syn-<br>
chronization data performs channel-equalization using CIRS calculated from the first<br>
known data area and the third known data area.<br>
[395]            As described above, the present invention uses the CIR estimated from the field<br>
synchronization data and the known data sequences in order to perform channel<br>
equalization on data within the data group. At this point, each of the estimated CIRs<br>
may be directly used in accordance with the characteristics of each region within the<br>
data group. Alternatively, a plurality of the estimated CIRs may also be either in-<br>
terpolated or extrapolated so as to create a new CIR, which is then used for the channel<br>
equalization process.<br>
[396]            Herein, when a value F(Q) of a function F(x) at a particular point Q and a value<br>
F(S) of the function F(x) at another particular point S are known, interpolation refers to<br>
estimating a function value of a point within the section between points Q and S.<br>
Linear interpolation corresponds to the simplest form among a wide range of in-<br>
terpolation operations. The linear interpolation described herein is merely exemplary<br>
among a wide range of possible interpolation methods. And, therefore, the present<br>
invention is not limited only to the examples set forth herein.<br>
[397]            Alternatively, when a value F(Q) of a function F(x) at a particular point Q and a<br>
value F(S) of the function F(x) at another particular point S are known, extrapolation<br>
refers to estimating a function value of a point outside of the section between points Q<br>
and S. Linear extrapolation is the simplest form among a wide range of extrapolation<br>
operations. Similarly, the linear extrapolation described herein is merely exemplary<br>
among a wide range of possible extrapolation methods. And, therefore, the present<br>
invention is not limited only to the examples set forth herein.<br>
[398]            FIG. 55 illustrates a block diagram of a channel equalizer according to another<br>
embodiment of the present invention. Herein, by estimating and compensating a<br>
remaining carrier phase error from a channel-equalized signal, the receiving system of<br>
the present invention may be enhanced. Referring to FIG. 55, the channel equalizer<br>
includes a first frequency domain converter 3100, a channel estimator 3110, a second<br>
frequency domain converter 3121, a coefficient calculator 3122, a distortion<br>
compensator 3130, a time domain converter 3140, a remaining carrier phase error<br>
remover 3150, a noise canceller (NC) 3160, and a decision unit 3170.<br>
[399]            Herein, the first frequency domain converter 3100 includes an overlap unit 3101<br>
overlapping inputted data, and a fast fourier transform (FFT) unit 3102 converting the<br>
data outputted from the overlap unit 3101 to frequency domain data.<br>
[400]            The channel estimator 3110 includes a CIR estimator, a phase compensator 3112,<br>
a pre-CIR cleaner 3113, CIR interpolator/extrapolator 3114, a post-CIR cleaner, and a<br>
zero-padding unit.<br>
[401]            The second frequency domain converter 3121 includes a fast fourier transform<br>
(FFT) unit converting the CIR being outputted from the channel estimator 3110 to<br>
frequency domain CIR.<br>
[402]            The time domain converter 3140 includes an IFFT unit 3141 converting the data<br>
having the distortion compensated by the distortion compensator 3130 to time domain<br>
data, and a save unit 3142 extracting only valid data from the data outputted from the<br>
IFFT unit 3141.<br>
[403]            The remaining carrier phase error remover 3150 includes an error compensator<br>
3151 removing the remaining carrier phase error included in the channel equalized<br>
data, and a remaining carrier phase error estimator 3152 using the channel equalized<br>
data and the decision data of the decision unit 3170 so as to estimate the remaining<br>
carrier phase error, thereby outputting the estimated error to the error compensator<br>
3151. Herein, any device performing complex number multiplication may be used as<br>
the distortion compensator 3130 and the error compensator 3151.<br>
[404]            At this point, since the received data correspond to data modulated to VSB type<br>
data, 8-level scattered data exist only in the real number element. Therefore, referring<br>
to FIG. 55, all of the signals used in the noise canceller 3160 and the decision unit<br>
3170 correspond to real number (or in-phase) signals. However, in order to estimate<br>
and compensate the remaining carrier phase error and the phase noise, both real<br>
number (in-phase) element and imaginary number (quadrature) element arc required.<br>
Therefore, the remaining carrier phase error remover 3150 receives and uses the<br>
quadrature element as well as the in-phase element. Generally, prior to performing the<br>
channel equalization process, the demodulator 902 within the receiving system<br>
performs frequency and phase recovery of the carrier. However, if a remaining carrier<br>
phase error that is not sufficiently compensated is inputted to the channel equalizer, the<br>
performance of the channel equalizer may be deteriorated. Particularly, in a dynamic<br>
channel environment, the remaining carrier phase error may be larger than in a static<br>
channel environment due to the frequent and sudden channel changes. Eventually, this<br>
acts as an important factor that deteriorates the receiving performance of the present<br>
invention.<br>
[405]            Furthermore, a local oscillator (not shown) included in the receiving system should<br>
preferably include a single frequency element. However, the local oscillator actually<br>
includes the desired frequency elements as well as other frequency elements. Such<br>
unwanted (or undesired) frequency elements are referred to as phase noise of the local<br>
oscillator. Such phase noise also deteriorates the receiving performance of the present<br>
invention. It is difficult to compensate such remaining carrier phase error and phase<br>
noise from the general channel equalizer. Therefore, the present invention may<br>
enhance the channel equaling performance by including a carrier recovery loop (i.e., a<br>
remaining carrier phase error remover 3150) in the channel equalizer, as shown in FIG.<br>
55, in order to remove the remaining carrier phase error and the phase noise.<br>
[406]            More specifically, the receiving data demodulated in FIG. 55 are overlapped by<br>
the overlap unit 3101 of the first frequency domain converter 3100 at a pre-determined<br>
overlapping ratio, which are then outputted to the FFT unit 3102. The FFT unit 3102<br>
converts the overlapped time domain data to overlapped frequency domain data<br>
through by processing the data with FFT. Then, the converted data are outputted to the<br>
distortion compensator 3130.<br>
[407]            The distortion compensator 3130 performs a complex number multiplication on<br>
the overlapped frequency domain data outputted from the FFT unit 3102 included in<br>
the first frequency domain converter 3100 and the equalization coefficient calculated<br>
from the coefficient calculator 3122, thereby compensating the channel distortion of<br>
the overlapped data outputted from the FFT unit 3102. Thereafter, the compensated<br>
data are outputted to the IFFT unit 3141 of the time domain converter 3140. The IFFT<br>
unit 3141 performs IFFT on the overlapped data having the channel distortion<br>
compensated, thereby converting the overlapped data to time domain data, which are<br>
then outputted to the error compensator 3151 of the remaining carrier phase error<br>
remover 3150.<br>
[408]            The error compensator 3151 multiplies a signal compensating the estimated<br>
remaining carrier phase error and phase noise with the valid data extracted from the<br>
time domain. Thus, the error compensator 3151 removes the remaining carrier phase<br>
error and phase noise included in the valid data.<br>
[409]            The data having the remaining carrier phase error compensated by the error<br>
compensator 3151 are outputted to the remaining carrier phase error estimator 3152 in<br>
order to estimate the remaining carrier phase error and phase noise and, at the same<br>
time, outputted to the noise canceller 3160 in order to remove (or cancel) the noise.<br>
[410]            The remaining carrier phase error estimator 3152 uses the output data of the error<br>
compensator 3151 and the decision data of the decision unit 3170 to estimate the<br>
remaining carrier phase error and phase noise. Thereafter, the remaining carrier phase<br>
error estimator 3152 outputs a signal for compensating the estimated remaining carrier<br>
phase error and phase noise to the error compensator 3151. In this embodiment of the<br>
present invention, an inverse number of the estimated remaining carrier phase error<br>
and phase noise is outputted as the signal for compensating the remaining carrier phase<br>
error and phase noise.<br>
[411]            FIG. 56 illustrates a detailed block diagram of the remaining carrier phase error<br>
estimator 3152 according to an embodiment of the present invention. Herein, the<br>
remaining carrier phase error estimator 3152 includes a phase error detector 3211, a<br>
loop filter 3212, a numerically controlled oscillator (NCO) 3213, and a conjugator<br>
3214. Referring to FIG. 56, the decision data, the output of the phase error detector<br>
3211, and the output of the loop filter 3212 are all real number signals. And, the output<br>
of the error compensator 3151, the output of the NCO 3213, and the output of the<br>
conjugator 3214 are all complex number signals.<br>
[412]            The phase error detector 3211 receives the output data of the error compensator<br>
3151 and the decision data of the decision unit 3170 in order to estimate the remaining<br>
carrier phase error and phase noise. Then, the phase error detector 3211 outputs the<br>
estimated remaining carrier phase error and phase noise to the loop filter.<br>
[413]             The loop filter 3212 then filters the remaining carrier phase error and phase noise,<br>
thereby outputting the filtered result to the NCO 3213. The NCO 3213 generates a<br>
cosine corresponding to the filtered remaining carrier phase error and phase noise,<br>
which is then outputted to the conjugator 3214.<br>
[414]            The conjugator 3214 calculates the conjugate value of the cosine wave generated<br>
by the NCO 3213. Thereafter, the calculated conjugate value is outputted to the error<br>
compensator 3151. At this point, the output data of the conjugator 3214 becomes the<br>
inverse number of the signal compensating the remaining carrier phase error and phase<br>
noise. In other words, the output data of the conjugator 3214 becomes the inverse<br>
number of the remaining carrier phase error and phase noise.<br>
[415]            The error compensator 3151 performs complex number multiplication on the<br>
equalized data outputted from the time domain converter 3140 and the signal outputted<br>
from the conjugator 3214 and compensating the remaining carrier phase error and<br>
phase noise, thereby removing the remaining carrier phase error and phase noise<br>
included in the equalized data. Meanwhile, the phase error detector 3211 may estimate<br>
the remaining carrier phase error and phase noise by using diverse methods and<br>
structures. According to this embodiment of the present invention, the remaining<br>
carrier phase error and phase noise are estimated by using a decision-directed method.<br>
[416]           If the remaining carrier phase error and phase noise are not included in the<br>
channel-equalized data, the decision-directed phase error detector according to the<br>
present invention uses the fact that only real number values exist in the correlation<br>
values between the channel-equalized data and the decision data. More specifically, if<br>
the remaining carrier phase error and phase noise are not included, and when the input<br>
data of the phase error detector 3211 are referred to as , the correlation value between<br>
the input data of the phase error detector 3211 and the decision data may be obtained<br>
by using Equation 9 shown below:<br>
[417] [Math Figure 91<br>
[418] <br>
[419] At this point, there is no correlation between and . Therefore, the correlation value<br>
between and is equal to 0. Accordingly, if the remaining carrier phase error and phase<br>
noise are not included, only the real number values exist herein. However, if the<br>
remaining carrier phase error and phase noise are included, the real number element is<br>
shown in the imaginary number value, and the imaginary number element is shown in<br>
the real number value. Thus, in this case, the imaginary number element is shown in<br>
the correlation value. Therefore, it can be assumed that the imaginary number portion<br>
of the correlation value is in proportion with the remaining carrier phase error and<br>
phase noise. Accordingly, as shown in Equation 10 below, the imaginary number of<br>
the correlation value may be used as the remaining earner phase error and phase noise.<br>
[420] [Math Figure 10]<br>
[421] <br>
[422] FIG. 57 illustrates a block diagram of a phase error detector 3211 obtaining the<br>
remaining carrier phase error and phase noise. Herein, the phase error detector 3211<br>
includes a Hilbert converter 3311, a complex number configurator 3312, a conjugator<br>
3313, a multiplier 3314, and a phase error output 3315. More specifically, the Hilbert<br>
converter 3311 creates an imaginary number decision data<br><br>
of the decision unit 3170. The generated imaginary number decision value is then<br>
outputted to the complex number configurator 3312. The complex number configurator<br>
3312 uses the decision data<br><br>
, which are then outputted to the conjugator 3313. The conjugator 3313 conjugates<br>
the output of the complex number configurator 3312, thereby outputting the conjugated<br>
value to the multiplier 3314. The multiplier 3314 performs a complex number multi-<br>
plication on the output data of the error compensator 3151 and the output data<br><br>
of the conjugator 3313, thereby obtaining the correlation between the output data<br><br>
of the error compensator 3151 and the decision value<br><br>
of the decision unit 3170. The correlation data obtained from the multiplier 3314 are<br>
then inputted to the phase error output 3315. The phase error output 3315 outputs the<br>
imaginary number portion<br><br>
of the correlation data outputted from the multiplier 3314 as the remaining carrier<br>
phase error and phase noise.<br>
[423] The phase error detector shown in FIG. 57 is an example of a plurality of phase error<br>
detecting methods. Therefore, other types of phase error detectors may be used in the<br>
present invention. Therefore, the present invention is not limited only to the examples<br>
and embodiments presented in the description of the present invention. Furthermore,<br>
according to another embodiment of the present invention, at least 2 phase error<br>
detectors are combined so as to detect the remaining carrier phase error and phase<br>
noise.<br>
[424] Accordingly, the output of the remaining carrier phase error remover 3150 having the<br>
detected remaining carrier phase error and phase noise removed as described above, is<br>
configured of an addition of the original (or initial) signal having the channel<br>
equalization, the remaining carrier phase error and phase noise, and the signal cor-<br>
responding to a white noise being amplified to a colored noise during the channel<br>
equalization.<br>
[425] Therefore, the noise canceller 3160 receives the output data of the remaining carrier<br>
phase error remover 3150 and the decision data of the decision unit 3170, thereby<br>
estimating the colored noise. Then, the noise canceller 3160 subtracts the estimated<br>
colored noise from the data having the remaining carrier phase error and phase noise<br>
removed therefrom, thereby removing the noise amplified during the equalization<br>
process.<br>
[426] In order to do so, the noise canceller 3160 includes a subtractor and a noise predictor.<br>
More specifically, the subtractor subtracts the noise predicted by the noise predictor<br>
from the output data of the residual carrier phase error estimator 3150. Then, the<br>
subtractor outputs the signal from which amplified noise is cancelled (or removed) for<br>
data recovery and, simultaneously, outputs the same signal to the decision unit 3170.<br>
The noise predictor calculates a noise element by subtracting the output of the decision<br>
unit 3170 from the signal having residual carrier phase error removed therefrom by the<br>
residual carrier phase error estimator 3150. Thereafter, the noise predictor uses the<br>
calculated noise element as input data of a filter included in the noise predictor. Also,<br>
the noise predictor uses the filter (not shown) in order to predict any color noise<br>
element included in the output symbol of the residual carrier phase error estimator<br>
3150. Accordingly, the noise predictor outputs the predicted color noise element to the<br>
subtractor.<br>
[4271 The data having the noise removed (or cancelled) by the noise canceller 3160 are<br>
outputted for the data decoding process and, at the same time, outputted to the decision<br>
unit 3170.<br>
[428] The decision unit 3170 selects one of a plurality of pre-determined decision data sets<br>
(e.g., 8 decision data sets) that is most approximate to the output data of the noise<br>
canceller 3160, thereby outputting the selected data to the remaining carrier phase error<br>
estimator 3152 and the noise canceller 3160.<br>
[429] Meanwhile, the received data are inputted to the overlap unit 3101 of the first<br>
frequency domain converter 3100 included in the channel equalizer and, at the same<br>
time, inputted to the CIR estimator 3111 of the channel estimator 3110.<br>
[430] The CIR estimator 3111 uses a training sequence, for example, data being inputted<br>
during the known data section and the known data in order to estimate the CIR, thereby<br>
outputting the estimated CIR to the phase compensator 3112. If the data to be channel-<br>
equalizing is the data within the data group including field synchronization data, the<br>
training sequence using in the CIR estimator 3111 may become the field syn-<br>
chronization data and known data. Meanwhile, if the data to be channel-equalizing is<br>
the data within the data group not including field synchronization data, the training<br>
sequence using in the CIR estimator 3111 may become only the known data.<br>
[431] For example, the CIR estimator 3111 estimates CIR using the known data correspond<br>
to reference known data generated during the known data section by the receiving<br>
system in accordance with an agreement between the receiving system and the<br>
transmitting system. For this, the CIR estimator 3111 is provided known data position<br>
information from the known sequence detector 1004. Also the CIR estimator 3111 may<br>
be provided field synchronization position information from the known sequence<br>
detector 1004.<br>
[432] Furthermore, in this embodiment of the present invention, the CIR estimator 3111<br>
estimates the CIR by using the least square (LS) method.<br>
[433] The LS estimation method calculates a cross correlation value p between the known<br>
data that have passed through the channel during the known data section and the<br>
known data that are already known by the receiving end. Then, a cross correlation<br>
matrix<br><br>
of the known data is calculated. Subsequently, a matrix operation is performed on<br><br>
so that the cross correlation portion within the cross correlation value<br><br>
between the received data and the initial known data, thereby estimating the CIR of the<br>
transmission channel.<br>
[434] The phase compensator 3112 compensates the phase change of the estimated CIR.<br>
Then, the phase compensator 3112 outputs the compensated CIR to the linear in-<br>
terpolator 3113. At this point, the phase compensator 3112 may compensate the phase<br>
change of the estimated CIR by using a maximum likelihood method.<br>
[435] More specifically, the remaining carrier phase error and phase noise that are included<br>
in the demodulated received data and, therefore, being inputted change the phase of the<br>
CIR estimated by the CIR estimator 3111 at a cycle period of one known data<br>
sequence. At this point, if the phase change of the inputted CIR, which is to be used for<br>
the linear interpolation process, is not performed in a linear form due to a high rate of<br>
the phase change, the channel equalizing performance of the present invention may be<br>
deteriorated when the channel is compensated by calculating the equalization co-<br>
efficient from the CIR, which is estimated by a linear interpolation method.<br>
[436] Therefore, the present invention removes (or cancels) the amount of phase change of<br>
the CIR estimated by the CIR estimator 3111 so that the distortion compensator 3130<br>
allows the remaining carrier phase error and phase noise to bypass the distortion<br>
compensator 3130 without being compensated. Accordingly, the remaining carrier<br>
phase error and phase noise are compensated by the remaining carrier phase error<br>
remover 3150.<br>
[437] For this, the present invention removes (or cancels) the amount of phase change of<br>
the CIR estimated by the phase compensator 3112 by using a maximum likelihood<br>
method.<br>
[438] The basic idea of the maximum likelihood method relates to estimating a phase<br>
element mutually (or commonly) existing in all CFR elements, then to multiply the<br>
estimated CIR with an inverse number of the mutual (or common) phase element, so<br>
that the channel equalizer, and most particularly, the distortion compensator 3130 does<br>
not compensate the mutual phase element.<br>
[439] More specifically, when the mutual phase element is referred to as 0 the phase of the<br>
newly estimated CIR is rotated by 0 as compared to the previously estimated CIR.<br>
When the CIR of a point t is referred to as<br><br>
, the maximum likelihood phase compensation method obtains a phase<br><br>
corresponding to when<br><br>
is rotated by<br><br>
, the squared value of the difference between the CIR of<br><br>
and the CIR of<br><br>
, i.e.,the CIR of a point (t+1), becomes a minimum value. Herein, when<br>
represents a tap of the estimated CIR, and when<br><br>
represents a number of taps of the CIR being estimated by the CIR estimator 3111, the<br>
value of<br><br>
is equal to or greater than 0 and equal to or less than N-l. This value may be calculated<br>
by using Math figure 11 shown below:<br>
[440] [Math Figure 11]<br>
[441]<br>
[442] <br>
[443] Herein, in light of the maximum likelihood method, the mutual phase element<br><br>
is equal to the value of<br><br>
, when the right side of Math figure 11 being differentiated with respect to<br><br>
is equal to 0. The above-described condition is shown in Math figure 12 below:<br>
[444] Math Figure 12]<br>
[445] <br>
[446] The above Math figure 12 may be simplified as shown in Math figure 13 below:<br>
[447] [Math Figure 13]<br>
[448] <br>
[449] More specifically, Math figure 13 corresponds to the<br><br>
value that is to be estimated by the argument of the correlation value between<br><br>
[450] FIG. 58 illustrates a phase compensator according to an embodiment of the present<br>
invention, wherein the mutual phase element<br><br>
is calculated as described above, and wherein the estimated phase element is<br>
compensated at the estimated CIR. Referring to FIG. 58, the phase compensator<br>
includes a correlation calculator 3410, a phase change estimator 3420, a compensation<br>
signal generator 3430. and a multiplier 3440.<br>
[451] The correlation calculator 3410 includes a first N symbol buffer 341 I, an N symbol<br>
delay 3412, a second N symbol buffer 3413, a conjugator 3414, and a multiplier 3415.<br>
More specifically, the first N symbol buffer 3411 included in the correlation calculator<br>
3410 is capable of storing the data being inputted from the CIR estimator 3111 in<br>
symbol units to a maximum limit of N number of symbols. The symbol data being<br>
temporarily stored in the first N symbol buffer 3411 are then inputted to the multiplier<br>
3415 included in the correlation calculator 3410 and to the multiplier 3440.<br>
[452] At the same time, the symbol data being outputted from the CIR estimator 3111 are<br>
delayed by N symbols from the N symbol delay 3412. Then, the delayed symbol data<br>
pass through the second N symbol buffer 3413 and inputted to the conjugator 3414, so<br>
as to be conjugated and then inputted to the multiplier 3415.<br>
[453] The multiplier 3415 multiplies the output of the first N symbol buffer 3411 and the<br>
output of the conjugator 3414. Then, the multiplier 3415 outputs the multiplied result<br>
to an accumulator 3421 included in the phase change estimator 3420.<br>
[454] More specifically, the correlation calculator 3410 calculates a correlation between a<br>
current CIR<br>
hi(t+1)<br>
having the length of N and a previous CIR<br>
hi(t)<br>
also having the length of N. then, the correlation calculator 3410 outputs the<br>
calculated correlation value to the accumulator 3421 of the phase change estimator<br>
3420.<br>
[455] The accumulator 3421 accumulates the correlation values outputted from the<br>
multiplier 3415 during an N symbol period. Then, the accumulator 3421 outputs the<br>
accumulated value to the phase detector 3422. The phase detector 3422 then calculates<br>
a mutual phase element<br><br>
from the output of the accumulator 3421 as shown in the above-described Math<br>
figure 11. Thereafter, the calculated<br><br>
value is outputted to the compensation signal generator 3430.<br>
[456] The compensation signal generator 3430 outputs a complex signal<br><br>
having a phase opposite to that of the detected phase as the phase compensation<br>
signal to the multiplier 3440. The multiplier 3440 multiplies the current CIR<br>
hi(i+1)<br>
being outputted from the first N symbol buffer 3411 with the phase compensation<br>
signal<br><br>
, thereby removing the amount of phase change of the estimated CIR.<br>
[457] The CIR having its phase change compensated, as described above, passes through a<br>
first cleaner (or pre-CIR cleaner) 3113 or bypasses the first cleaner 3113, thereby being<br>
inputted to a CIR calculator (or CIR interpolator-extrapolator) 3114. The CIR in-<br>
terpolator-extrapolator 3114 either interpolates or extrapolates an estimated CIR,<br>
which is then outputted to a second cleaner (or post-CIR cleaner) 3115. Herein, the<br>
estimated CIR corresponds to a CIR having its phase change compensated. The first<br>
cleaner 3113 may or may not operate depending upon whether the CIR interpolator-<br>
extrapolator 3114 interpolates or extrapolates the estimated CIR. For example, if the<br>
CIR interpolator-extrapolator 3114 interpolates the estimated CIR, the first cleaner<br>
3113 does not operate. Conversely, if the CIR interpolator-extrapolator 3114 ex-<br>
trapolates the estimated CIR, the first cleaner 3113 operates.<br>
[458] More specifically, the CIR estimated from the known data includes a channel<br>
element that is to be obtained as well as a jitter element caused by noise. Since such<br>
jitter element deteriorates the performance of the equalizer, it preferable that a co-<br>
efficient calculator 3122 removes the jitter element before using the estimated CIR.<br>
Therefore, according to the embodiment of the present invention, each of the first and<br>
second cleaners 3113 and 3115 removes a portion of the estimated CIR having a power<br>
level lower than the predetermined threshold value (i.e., so that the estimated CIR<br>
becomes equal to '0'). Herein, this removal process will be referred to as a "CIR<br>
cleaning" process.<br>
[459] The CIR interpolator-extrapolator 3114 performs CIR interpolation by multiplying a<br>
CIR estimated from the CIR estimator 3112 by a coefficient and by multiplying a CIR<br>
having its phase change compensated from the phase compensator (or maximum<br>
likelihood phase compensator) 3112 by another coefficient, thereby adding the<br>
multiplied values. At this point, some of the noise elements of the CIR may be added<br>
to one another, thereby being cancelled. Therefore, when the CIR interpolator-ex-<br>
trapolator 3114 performs CIR interpolation, the original (or initial) CIR having noise<br>
elements remaining therein. In other words, when the CIR interpolator-extrapolator<br>
3114 performs CIR interpolation, an estimated CIR having its phase change<br>
compensated by the phase compensator 3112 bypasses the first cleaner 3113 and is<br>
inputted to the CIR interpolator-extrapolator 3114. Subsequently, the second cleaner<br>
3115 cleans the CIR interpolated by the CIR interpolator-extrapolator 3114.<br>
[460]            Conversely, the CIR interpolator-extrapolator 3114 performs CIR extrapolation by<br>
using a difference value between two CIRs, each having its phase change compensated<br>
by the phase compensator 3112, so as to estimate a C1R positioned outside of the two<br>
CIRs. Therefore, in this case, the noise element is rather amplified. Accordingly, when<br>
the CIR interpolator-extrapolator 3114 performs CIR extrapolation, the CIR cleaned by<br>
the first cleaner 3113 is used. More specifically, when the CIR interpolator-ex-<br>
trapolator 3114 performs CIR extrapolation, the extrapolated CIR passes through the<br>
second cleaner 3115, thereby being inputted to the zero-padding unit 3116.<br>
[461]            Meanwhile, when a second frequency domain converter (or fast fourier transform<br>
(FFT2)) 3121 converts the CIR, which has been cleaned and outputted from the second<br>
cleaner 3115, to a frequency domain, the length and of the inputted CIR and the FFT<br>
size may not match (or be identical to one another). In other words, the CIR length<br>
may be smaller than the FFT size. In this case, the zero-padding unit 3116 adds a<br>
number of zeros 'O's corresponding to the difference between the FFT size and the CIR<br>
length to the inputted CIR, thereby outputting the processed CIR to the second<br>
frequency domain converter (FFT2) 3121. Herein, the zero-padded CIR may<br>
correspond to one of the interpolated CIR, extrapolated CIR, and the CIR estimated in<br>
the known data section.<br>
[462]            The second frequency domain converter 3121 performs FFT on the CIR being<br>
outputted from the zero padding unit 3116, thereby converting the CIR to a frequency<br>
domain CIR. Then, the second frequency domain converter 3121 outputs the converted<br>
CIR to the coefficient calculator 3122.<br>
[463]            The coefficient calculator 3122 uses the frequency domain CIR being outputted<br>
from the second frequency domain converter 3121 to calculate the equalization co-<br>
efficient. Then, the coefficient calculator 3122 outputs the calculated coefficient to the<br>
distortion compensator 3130. Herein, for example, the coefficient calculator 3122<br>
calculates a channel equalization coefficient of the frequency domain that can provide<br>
minimum mean square error (MMSE) from the CIR of the frequency domain, which is<br>
outputted to the distortion compensator 3130.<br>
[464]            The distortion compensator 3130 performs a complex number multiplication on<br>
the overlapped data of the frequency domain being outputted from the FFT unit 3102<br>
of the first frequency domain converter 3100 and the equalization coefficient<br>
calculated by the coefficient calculator 3122, thereby compensating the channel<br>
distortion of the overlapped data being outputted from the FFT unit 3102.<br>
[465]            FIG. 59 illustrates a block diagram of a channel equalizer according to another<br>
embodiment of the present invention. In other words, FIG. 59 illustrates a block<br>
diagram showing another example of a channel equalizer by using different CIR<br>
estimation and application methods in accordance with regions A, B, C, and D. when<br>
the data group is divided into the structure shown in FIG. I 1.<br>
[466]            More specifically, as shown in FIG. 11, known data that are sufficiently are being<br>
periodically transmitted in regions A/B (i.e., MPH blocks B3 to B8). Therefore, an<br>
indirect equalizing method using the CIR may be used herein. However, in regions C/<br>
D (i.e., MPH blocks Bl, B2, B9, and BIO), the known data are neither able to be<br>
transmitted at a sufficiently long length nor able to be periodically and equally<br>
transmitted. Therefore, it is inadequate to estimate the CIR by using the known data.<br>
Accordingly, in regions C/D, a direct equalizing method in which an error is obtained<br>
from the output of the equalizer, so as to update the coefficient.<br>
[467]            The examples presented in the embodiments of the present invention shown in<br>
FIG. 59 include a method of performing indirect channel equalization by using a cyclic<br>
prefix on the data of regions A/B, and a method of performing direct channel<br>
equalization by using an overlap &amp; save method on the data of regions C/D.<br>
[468]            Accordingly, referring to FIG. 59, the frequency domain channel equalizer<br>
includes a frequency domain converter 3510, a distortion compensator 3520, a time<br>
domain converter 3530, a first coefficient calculating unit 3540, a second coefficient<br>
calculating unit 3550, and a coefficient selector 3560.<br>
[469]            Herein, the frequency domain converter 3510 includes an overlap unit 3511, a<br>
select unit 3512, and a first FFT unit 3513.<br>
[470]            The time domain converter 3530 includes an IFFT unit 3531, a save unit 3532, and<br>
a select unit 3533.<br>
[471]            The first coefficient calculating unit 3540 includes a CIR estimator 3541, an<br>
average calculator 3542, and second FFT unit 3543, and a coefficient calculator 3544.<br>
[472]            The second coefficient calculating unit 3550 includes a decision unit 3551, a select<br>
unit 3552, a subtractor 3553, a zero-padding unit 3554, a third FFT unit 3555, a co-<br>
efficient updater 3556, and a delay unit 3557.<br>
[473]            Also, a multiplexer (MUX), which selects data that are currently being inputted as<br>
the input data depending upon whether the data correspond to regions A/B or to<br>
regions C/D, may be used as the select unit 3512 of the frequency domain converter<br>
3510, the select unit 3533 of the time domain converter 3530, and the coefficient<br>
selector 3560.<br>
[474]            In the channel equalizer having the above-described structure, as shown in FIG.<br>
59, if the data being inputted correspond to the data of regions A/B, the select unit<br>
3512 of the frequency domain converter 3510 selects the input data and not the output<br>
data of the overlap unit 3511. In the same case, the select unit 3533 of the time domain<br>
converter 3530 selects the output data of the IFFT unit 3531 and not the output data of<br>
the save unit 3532. The coefficient selector 3560 selects the equalization coefficient<br>
being outputted from the first coefficient calculating unit 3540.<br>
[475]            Conversely, if the data being inputted correspond to the data of regions C/D. the<br>
select unit 3512 of the frequency domain converter 3510 selects the output data of the<br>
overlap unit 3511 and not the input data. In the same case, the select unit 3533 of the<br>
time domain converter 3530 selects the output data of the save unit 3532 and not the<br>
output data of the IFFT unit 3531. The coefficient selector 3560 selects the<br>
equalization coefficient being outputted from the second coefficient calculating unit<br>
3550.<br>
[476]            More specifically, the received data are inputted to the overlap unit 3511 and<br>
select unit 3512 of the frequency domain converter 3510, and to the first coefficient<br>
calculating unit 3540. If the inputted data correspond to the data of regions A/B, the<br>
select unit 3512 selects the received data, which are then outputted to the first FFT unit<br>
3513. On the other hand, if the inputted data correspond to the data of regions C/D, the<br>
select unit 3512 selects the data that are overlapped by the overlap unit 3513 and are,<br>
then, outputted to the first FFT unit 3513. The first FFT unit 3513 performs FFT on the<br>
time domain data that are outputted from the select unit 3512, thereby converting the<br>
time domain data to frequency domain data. Then, the converted data are outputted to<br>
the distortion compensator 3520 and the delay unit 3557 of the second coefficient<br>
calculating unit 3550.<br>
[477]            The distortion compensator 3520 performs complex multiplication on frequency<br>
domain data outputted from the first FFT unit 3513 and the equalization coefficient<br>
outputted from the coefficient selector 3560, thereby compensating the channel<br>
distortion detected in the data that are being outputted from the first FFT unit 3513.<br>
[478]            Thereafter, the distortion-compensated data are outputted to the IFFT unit 3531 of<br>
the time domain converter 3530. The IFFT unit 3531 of the time domain converter<br>
3530 performs IFFT on the channel-distortion-compensated data, thereby converting<br>
the compensated data to time domain data. The converted data are then outputted to the<br>
save unit 3532 and the select unit 3533. If the inputted data correspond to the data of<br>
regions A/B, the select unit 3533 selects the output data of the IFFT unit 3531. On the<br>
other hand, if the inputted data correspond to regions C/D, the select unit 3533 selects<br>
the valid data extracted from the save unit 3532. Thereafter, the selected data are<br>
outputted to be decoded and, simultaneously, outputted to the second coefficient<br>
calculating unit 3550.<br>
[479]            The CIR estimator 3541 of the first coefficient calculating unit 3540 uses the data<br>
being received during the known data section and the known data of the known data<br>
section, the known data being already known by the receiving system in accordance<br>
with an agreement between the receiving system and the transmitting system, in order<br>
to estimate the CIR. Subsequently, the estimated CIR is outputted to the average<br>
calculator 3542. The average calculator 3542 calculates an average value of the CIRs<br>
that are being inputted consecutively. Then, the calculated average value is outputted<br>
to the second FFT unit 3543. For example, referring to FIG. 39, the average value of<br>
the CIR value estimated at point Tl and the C1R value estimated at point T2 is used for<br>
the channel equalization process of the general data existing between point Tl and<br>
point T2. Accordingly, the calculated average value is outputted to the second FFT unit<br>
3543.<br>
[480]            The second FFT unit 3543 performs FFT on the CIR of the time domain that is<br>
being inputted, so as to convert the inputted CIR to a frequency domain CIR.<br>
Thereafter, the converted frequency domain CIR is outputted to the coefficient<br>
calculator 3544. The coefficient calculator 3544 calculates a frequency domain<br>
equalization coefficient that satisfies the condition of using the CIR of the frequency<br>
domain so as to minimize the mean square error. The calculated equalizer coefficient<br>
of the frequency domain is then outputted to the coefficient calculator 3560.<br>
[481]            The decision unit 3551 of the second coefficient calculating unit 3550 selects one<br>
of a plurality of decision values (e.g., 8 decision values) that is most approximate to the<br>
equalized data and outputs the selected decision value to the select unit 3552. Herein, a<br>
multiplexer may be used as the select unit 3552. In a general data section, the select<br>
unit 3552 selects the decision value of the decision unit 3551. Alternatively, in a<br>
known data section, the select unit 3552 selects the known data and outputs the<br>
selected known data to the subtractor 3553. The subtracter 3553 subtracts the output of<br>
the select unit 3533 included in the time domain converter 3530 from the output of the<br>
select unit 652 so as to calculate (or obtain) an error value. Thereafter, the calculated<br>
error value is outputted to the zero-padding unit 3554.<br>
[482]            The zero-padding unit 3554 adds (or inserts) the same amount of zeros (0) cor-<br>
responding to the overlapped amount of the received data in the inputted error. Then,<br>
the error extended with zeros (0) is outputted to the third FFT unit 3555. The third FFT<br>
unit 3555 converts the error of the time domain having zeros (0) added (or inserted)<br>
therein, to the error of the frequency domain. Thereafter, the converted error is<br>
outputted to the coefficient update unit 3556. The coefficient update unit 3556 uses the<br>
received data of the frequency domain that have been delayed by the delay unit 3557<br>
and the error of the frequency domain so as to update the previous equalization co-<br>
efficient. Thereafter, the updated equalization coefficient is outputted to the coefficient<br>
selector 3560.<br>
[483]            At this point, the updated equalization coefficient is stored so as that it can be used<br>
as a previous equalization coefficient in a later process. If the input data correspond to<br>
the data of regions A/B, the coefficient selector 3560 selects the equalization co-<br>
efficient calculated from the first coefficient calculating unit 3540. On the other hand,<br>
if the input data correspond to the data of regions C/D. the coefficient selector 3560<br>
selects the equalization coefficient updated by the second coefficient calculating unit<br>
3550. Thereafter, the selected equalization coefficient is outputted to the distortion<br>
compensator 3520.<br>
[484]            FIG. 60 illustrates a block diagram of a channel equalizer according to another<br>
embodiment of the present invention. In other words, FIG. 60 illustrates a block<br>
diagram showing another example of a channel equalizer by using different CIR<br>
estimation and application methods in accordance with regions A, B, C, and D, when<br>
the data group is divided into the structure shown in FIG. 11. In this example, a<br>
method of performing indirect channel equalization by using an overlap &amp; save<br>
method on the data of regions A/B, and a method of performing direct channel<br>
equalization by using an overlap &amp; save method on the data of regions C/D are il-<br>
lustrated.<br>
[485]            Accordingly, referring to FIG. 60, the frequency domain channel equalizer<br>
includes a frequency domain converter 3610, a distortion compensator 3620, a time<br>
domain converter 3630, a first coefficient calculating unit 3640, a second coefficient<br>
calculating unit 3650, and a coefficient selector 3660.<br>
[486]            Herein, the frequency domain converter 3610 includes an overlap unit 3611 and a<br>
first FFT unit 3612.<br>
[487]            The time domain converter 3630 includes an IFFT unit 3631 and a save unit 3632.<br>
[488]            The first coefficient calculating unit 3640 includes a CIR estimator 3641, an in-<br>
terpolator 3642, a second FFT unit 3643, and a coefficient calculator 3644.<br>
[489]            The second coefficient calculating unit 3650 includes a decision unit 3651, a select<br>
unit 3652, a subtractor 3653, a zero-padding unit 3654, a third FFT unit 3655, a co-<br>
efficient updater 3656, and a delay unit 3657.<br>
[490]            Also, a multiplexer (MUX), which selects data that are currently being inputted as<br>
the input data depending upon whether the data correspond to regions A/B or to<br>
regions C/D, may be used as the coefficient selector 3660. More specifically, if the<br>
input data correspond to the data of regions A/B, the coefficient selector 3660 selects<br>
the equalization coefficient calculated from the first coefficient calculating unit 3640.<br>
On the other hand, if the input data correspond to the data of regions C/D, the co-<br>
efficient selector 3660 selects the equalization coefficient updated by the second co-<br>
efficient calculating unit 3650.<br>
[491]            In the channel equalizer having the above-described structure, as shown in FIG.<br>
60, the received data are inputted to the overlap unit 3611 of the frequency domain<br>
converter 3610 and to the first coefficient calculating unit 3640. The overlap unit 3611<br>
overlaps the input data to a pre-determined overlapping ratio and outputs the<br>
overlapped data to the first FFT unit 3612. The first FFT unit 3612 performs FFT on<br>
the overlapped time domain data, thereby converting the overlapped time domain data<br>
to overlapped frequency domain data. Then, the converted data are outputted to the<br>
distortion compensator 3620 and the delay unit 3657 of the second coefficient<br>
calculating unit 3650.<br>
[492]            The distortion compensator 3620 performs complex multiplication on the<br>
overlapped frequency domain data outputted from the first FFT unit 3612 and the<br>
equalization coefficient outputted from the coefficient selector 3660, thereby com-<br>
pensating the channel distortion detected in the overlapped data that are being<br>
outputted from the first FFT unit 3612. Thereafter, the distortion-compensated data are<br>
outputted to the IFFT unit 3631 of the time domain converter 3630. The IFFT unit<br>
3631 of the time domain converter 3630 performs IFFT on the distortion-compensated<br>
data, thereby converting the compensated data to overlapped time domain data. The<br>
converted overlapped data are then outputted to the save unit 3632. The save unit 3632<br>
extracts only the valid data from the overlapped time domain data, which are then<br>
outputted for data decoding and, at the same time, outputted to the second coefficient<br>
calculating unit 3650 in order to update the coefficient.<br>
[493]            The CIR estimator 3641 of the first coefficient calculating unit 3640 uses the data<br>
received during the known data section and the known data in order to estimate the<br>
CIR. Subsequently, the estimated CIR is outputted to the interpolator 3642. The in-<br>
terpolator 3642 uses the inputted CIR to estimate the CIRs (i.e., CIRs of the region that<br>
does not include the known data) corresponding to the points located between the<br>
estimated CIRs according to a predetermined interpolation method. Thereafter, the<br>
estimated result is outputted to the second FFT unit 3643. The second FFT unit 3643<br>
performs FFT on the inputted CIR, so as to convert the inputted CIR to a frequency<br>
domain CIR. Thereafter, the converted frequency domain CIR is outputted to the co-<br>
efficient calculator 3644. The coefficient calculator 3644 calculates a frequency<br>
domain equalization coefficient that satisfies the condition of using the CIR of the<br>
frequency domain so as to minimize the mean square error. The calculated equalizer<br>
coefficient of the frequency domain is then outputted to the coefficient calculator 3660.<br>
[494]            The structure and operations of the second coefficient calculating unit 3650 is<br>
identical to those of the second coefficient calculating unit 3550 shown in FIG. 59.<br>
Therefore, the description of the same will be omitted for simplicity.<br>
[495]            If the input data correspond to the data of regions A/B, the coefficient selector<br>
3660 selects the equalization coefficient calculated from the first coefficient<br>
calculating unit 3640. On the other hand, if the input data correspond to the data of<br>
regions C/D, the coefficient selector 3660 selects the equalization coefficient updated<br>
by the second coefficient calculating unit 3650. Thereafter, the selected equalization<br>
coefficient is outputted to the distortion compensator 3620.<br>
[496]            FIG. 61 illustrates a block diagram of a channel equalizer according to another<br>
embodiment of the present invention. In other words, FIG. 61 illustrates a block<br>
diagram showing another example of a channel equalizer by using different CIR<br>
estimation and application methods in accordance with regions A, B, C, and D, when<br>
the data group is divided into the structure shown in FIG. 11. For example, in regions<br>
A/B, the present invention uses the known data in order to estimate the CIR by using a<br>
least square (LS) method, thereby performing the channel equalization process. On the<br>
other hand, in regions C/D, the present invention estimates the CIR by using a least<br>
mean square (LMS) method, thereby performing the channel equalization process.<br>
More specifically, since the periodic known data do not exist in regions C/D, as in<br>
regions A/B, the same channel equalization process as that of regions A/B cannot be<br>
performed in regions C/D. Therefore, the channel equalization process may only be<br>
performed by using the LMS method.<br>
[497]            Referring to FIG. 61, the channel equalizer includes an overlap unit 3701, a first<br>
fast fourier transform (FFT) unit 3702, a distortion compensator 3703, an inverse fast<br>
fourier transform (IFFT) unit 3704, a save unit 3705, a first CIR estimator 3706, a CIR<br>
interpolator 3707, a decision unit 3708, a second CIR estimator 3710, a selection unit<br>
3711, a second FFT unit 3712, and a coefficient calculator 3713. Herein, any device<br>
performed complex number multiplication may be used as the distortion compensator<br>
3703. In the channel equalizer having the above-described structure, as shown in FIG.<br>
61, the overlap unit 3701 overlaps the data being inputted to the channel equalizer to a<br>
predetermined overlapping ratio and then outputs the overlapped data to the first FFT<br>
unit 3702. The first FFT unit 3702 converts (or transforms) the overlapped data of the<br>
time domain to overlapped data of the frequency domain by using fast fourier<br>
transform (FFT). Then, the converted data are outputted to the distortion compensator<br>
3703.<br>
[498]            The distortion converter 3703 performs complex multiplication on the equalization<br>
coefficient calculated from the coefficient calculator 3713 and the overlapped data of<br>
the frequency domain, thereby compensating the channel distortion of the overlapped<br>
data being outputted from the first FFT unit 3702. Thereafter, the distortion-<br>
compensated data are outputted to the IFFT unit 3704. The IFFT unit 3704 performs<br>
inverse fast fourier transform (IFFT) on the distortion-compensated overlapped data,<br>
so as to convert the corresponding data back to data (i.e., overlapped data) of the time<br>
domain. Subsequently, the converted data are outputted to the save unit 3705. The save<br>
unit 3705 extracts only the valid data from the overlapped data of the time domain.<br>
Then, the save unit 3705 outputs the extracted valid data for a data decoding process<br>
and, at the same time, outputs the extracted valid data to the decision unit 3708 for a<br>
channel estimation process.<br>
[499]            The decision unit 3708 selects one of a plurality of decision values (e.g.. 8<br>
decision values) that is most approximate to the equalized data and outputs the selected<br>
decision value to the select unit 3709. Herein, a multiplexer may be used as the select<br>
unit 3709. In a general data section, the select unit 3709 selects the decision value of<br>
the decision unit 3708. Alternatively, in a known data section, the select unit 3709<br>
selects the known data and outputs the selected known data to the second C1R<br>
estimator 3710.<br>
[500]             Meanwhile, the first C1R estimator 3706 uses the data that are being inputted in<br>
the known data section and the known data so as to estimate the CIR.<br>
[501]            Thereafter, the first CIR estimator 3706 outputs the estimated CIR to the CIR in-<br>
terpolator 3707. Herein, the known data correspond to reference known data created<br>
during the known data section by the receiving system in accordance to an agreement-<br>
correlation value p between the transmitting system and the receiving system. At this<br>
point, according to an embodiment of the present invention, the first CIR estimator<br>
3706 uses the LS method to estimate the CIR. The LS estimation method calculates a<br>
cross correlation value p between the known data that have passed through the channel<br>
during the known data section and the known data that are already known by the<br>
receiving end. Then, a cross correlation matrix R of the known data is calculated. Sub-<br>
sequently, a matrix operation is performed on<br><br>
so that the cross correlation portion within the cross correlation value between the<br>
received data and the initial known data, thereby estimating the CIR of the<br>
transmission channel.<br>
[502]            The CIR interpolator 3707 receives the CIR from the first CIR estimator 3706.<br>
And, in the section between two sets of known data, the CIR is interpolated in<br>
accordance with a pre-determined interpolation method. Then, the interpolated CIR is<br>
outputted. At this point, the pre-determined interpolation method corresponds to a<br>
method of estimating a particular set of data at an unknown point by using a set of data<br>
known by a particular function. For example, such method includes a linear in-<br>
terpolation method. The linear interpolation method is only one of the most simple in-<br>
terpolation methods. A variety of other interpolation methods may be used instead of<br>
the above-described linear interpolation method. It is apparent that the present<br>
invention is not limited only to the example set forth in the description of the present<br>
invention. More specifically, the CIR interpolator 3707 uses the CIR that is being<br>
inputted in order to estimate the CIR of the section that does not include any known<br>
data by using the pre-determined interpolation method. Thereafter, the estimated CIR<br>
is outputted to the select unit 3711.<br>
[503]            The second CIR estimator 3710 uses the input data of the channel equalizer and<br>
the output data of the select unit 3709 in order to estimate the CIR. Then, the second<br>
CIR estimator 3710 outputs the estimated CIR to the select unit 3711. At this point,<br>
according to an embodiment of the present invention, the CIR is estimated by using the<br>
LMS method. The LMS estimation method will be described in detail in a later<br>
process.<br>
[504]            In regions A/B (i.e., MPH blocks B3 to B8), the select unit 3711 selects the CIR<br>
outputted from the CIR interpolator 3707. And, in regions C/D (i.e., MPH blocks B1,<br>
B2, B9, and B10), the select unit 3711 selects the CIR outputted from the second CIR<br>
estimator 3710. Thereafter, the select unit 3711 outputs the selected CIR to the second<br>
FFT unit 3712.<br>
[505]            The second FFT unit 3712 converts the CIR that is being inputted to a CIR of the<br>
frequency domain, which is then outputted to the coefficient calculator 3713. The co-<br>
efficient calculator 3713 uses the CIR of the frequency domain that is being inputted,<br>
so as to calculate the equalization coefficient and to output the calculated equalization<br>
coefficient to the distortion compensator 3703. At this point, the coefficient calculator<br>
3713 calculates a channel equalization coefficient of the frequency domain that can<br>
provide minimum mean square error (MMSE) from the CIR of the frequency domain.<br>
At this point, the second CIR estimator 3710 may use the CIR estimated in regions A/<br>
B as the CIR at the beginning of regions C/D. For example, the CIR value of MPH<br>
block B8 may be used as the CIR value at the beginning of the MPH block B9. Ac-<br>
cordingly, the convergence speed of regions C/D may be reduced.<br>
[506]            The basic principle of estimating the CIR by using the LMS method in the second<br>
CIR estimator 3710 corresponds to receiving the output of an unknown transmission<br>
channel and to updating (or renewing) the coefficient of an adaptive filter (not shown)<br>
so that the difference value between the output value of the unknown channel and the<br>
output value of the adaptive filter is minimized. More specifically, the coefficient value<br>
of the adaptive filter is renewed so that the input data of the channel equalizer is equal<br>
to the output value of the adaptive filter (not shown) included in the second CIR<br>
estimator 3710. Thereafter, the filter coefficient is outputted as the CIR after each FFT<br>
cycle.<br>
[507]            Referring to FIG. 62, the second CIR estimator 3710 includes a delay unit T, a<br>
multiplier, and a coefficient renewal unit for each tab. Herein, the delay unit T se-<br>
quentially delays the output data of the select unit 3709. The multiplier multiplies<br>
respective output data outputted from each delay unit T with error data . The co-<br>
efficient renewal unit renews the coefficient by using the output corresponding to each<br>
multiplier. Herein, the multipliers that are being provided as many as the number of<br>
tabs will be refeired to as a first multiplying unit for simplicity. Furthermore, the<br>
second CIR estimator 3710 further includes a plurality of multipliers each multiplying<br>
the output data of the select unit 3709 and the output data of the delay unit T (wherein<br>
the output data of the last delay unit are excluded) with the output data corresponding<br>
to each respective coefficient renewal unit. These multipliers are also provided as<br>
many as the number of tabs. This group of multipliers will be referred to as a second<br>
multiplying unit for simplicity.<br>
[508]           The second CIR estimator 3710 further includes an adder and a subtractor. Herein,<br>
the adder adds all of the data outputted from each multipliers included in the second<br>
multiplier unit. Then, the added value is outputted as the estimation value of the data<br>
inputted to the channel equalizer. The subtractor calculates the difference between the<br>
output data of the adder and the input data of the channel equalizer. Thereafter, the<br>
calculated difference value is outputted as the error data . Referring to FIG. 62, in a<br>
general data section, the decision value of the equalized data is inputted to the first<br>
delay unit included in the second CIR estimator 3710 and to the first multiplier<br>
included in the second multiplier. In the known data section, the known data are<br>
inputted to the first delay unit included in the second CIR estimator 3710 and to the<br>
first multiplier included in the second multiplier unit. The input data are sequentially<br>
delayed by passing through a number of serially connected delay units T, the number<br>
corresponding to the number of tabs. The output data of each delay unit T and the error<br>
data are multiplied by each corresponding multiplier included in the first multiplier<br>
unit. Thereafter, the coefficients are renewed by each respective coefficient renewal<br>
unit.<br>
[509]           Each coefficient that is renewed by the corresponding coefficient renewal unit is<br>
multiplied with the input data the output data and also with the output data of each<br>
delay unit T with the exception of the last delay. Thereafter, the multiplied value is<br>
inputted to the adder. The adder then adds all of the output data outputted from the<br>
second multiplier unit and outputs the added value to the subtractor as the estimation<br>
value of the input data of the channel equalizer. The subtractor calculates a difference<br>
value between the estimation value and the input data of the channel equalizer. The<br>
difference value is then outputted to each multiplier of the first multiplier unit as the<br>
error data . At this point, the error data is outputted to each multiplier of the first<br>
multiplier unit by passing through each respective delay unit T. As described above,<br>
the coefficient of the adaptive filter is continuously renewed. And, the output of each<br>
coefficient renewal unit is outputted as the CIR of the second CIR estimator 3710 after<br>
each FFT cycle.<br>
[510]<br>
[511]           Block decoder<br>
[512]           Meanwhile, if the data being inputted to the block decoder 1005, after being<br>
channel-equalized by the equalizer 1003. correspond to the data having both block<br>
encoding and trellis encoding performed thereon (i.e., the data within the RS frame, the<br>
signaling information data, etc.) by the transmitting system, trellis decoding and block<br>
decoding processes are performed on the inputted data as inverse processes of the<br>
transmitting system. Alternatively, if the data being inputted to the block decoder 1005<br>
correspond to the data having only trellis encoding performed thereon (i.e., the main<br>
service data), and not the block encoding, only the trellis decoding process is<br>
performed on the inputted data as the inverse process of the transmitting system.<br>
[513]            The trellis decoded and block decoded data by the block decoder 1005 are then<br>
outputted to the RS frame decoder 1006. More specifically, the block decoder 1005<br>
removes the known data, data used for trellis initialization, and signaling information<br>
data, MPEG header, which have been inserted in the data group, and the RS parity<br>
data, which have been added by the RS encoder/non-systematic RS encoder or non-<br>
systematic RS encoder of the transmitting system. Then, the block decoder 1005<br>
outputs the processed data to the RS frame decoder 1006. Herein, the removal of the<br>
data may be performed before the block decoding process, or may be performed during<br>
or after the block decoding process.<br>
[514]            Meanwhile, the data trellis-decoded by the block decoder 1005 are outputted to the<br>
data deinterleaver 1009. At this point, the data being trellis-decoded by the block<br>
decoder 1005 and outputted to the data deinterleaver 1009 may not only include the<br>
main service data but may also include the data within the RS frame and the signaling<br>
information. Furthermore, the RS parity data that are added by the transmitting system<br>
after the pre-processor 230 may also be included in the data being outputted to the data<br>
deinterleaver 1009.<br>
[515]            According to another embodiment of the present invention, data that are not<br>
processed with block decoding and only processed with trellis encoding by the<br>
transmitting system may directly bypass the block decoder 1005 so as to be outputted<br>
to the data deinterleaver 1009. In this case, a trellis decoder should be provided before<br>
the data deinterleaver 1009. More specifically, if the inputted data correspond to the<br>
data having only trellis encoding performed thereon and not block encoding, the block<br>
decoder 1005 performs Viterbi (or trellis) decoding on the inputted data so as to output<br>
a hard decision value or to perform a hard-decision on a soft decision value, thereby<br>
outputting the result.<br>
[516]            Meanwhile, if the inputted data correspond to the data having both block encoding<br>
process and trellis encoding process performed thereon, the block decoder 1005<br>
outputs a soft decision value with respect to the inputted data.<br>
[517]            In other words, if the inputted data correspond to data being processed with block<br>
encoding by the block processor 302 and being processed with trellis encoding by the<br>
trellis encoding module 256. in the transmitting system, the block decoder 1005<br>
performs a decoding process and a trellis decoding process on the inputted data as<br>
inverse processes of the transmitting system. At this point, the RS frame encoder of the<br>
pre-processor included in the transmitting system may be viewed as an outer (or<br>
external) encoder. And, the trellis encoder may be viewed as an inner (or internal)<br>
encoder. When decoding such concatenated codes, in order to allow the block decoder<br>
1005 to maximize its performance of decoding externally encoded data, the decoder of<br>
the internal code should output a soft decision value.<br>
[518]            FIG. 63 illustrates a detailed block diagram of the block decoder 1005 according to<br>
an embodiment of the present invention. Referring to FIG. 63, the block decoder 1005<br>
includes a feedback controller 4010, an input buffer 4011, a trellis decoding unit (or<br>
12-way trellis coded modulation (TCM) decoder or inner decoder) 4012, a symbol-<br>
byte converter 4013, an outer block extractor 4014, a feedback deformatter 4015, a<br>
symbol deinterleaver 4016, an outer symbol mapper 4017, a symbol decoder 4018, an<br>
inner symbol mapper 4019, a symbol interleaver 4020, a feedback formatter 4021, and<br>
an output buffer 4022. Herein, just as in the transmitting system, the trellis decoding<br>
unit 4012 may be viewed as an inner (or internal) decoder. And, the symbol decoder<br>
4018 may be viewed as an outer (or external) decoder.<br>
[519]            The input buffer 4011 temporarily stores the mobile service data symbols being<br>
channel-equalized and outputted from the equalizer 1003. (Herein, the mobile service<br>
data symbols may include symbols corresponding to the signaling information, RS<br>
parity data symbols and CRC data symbols added during the encoding process of the<br>
RS frame.) Thereafter, the input buffer 4011 repeatedly outputs the stored symbols for<br>
M number of times to the trellis decoding unit 4012 in a turbo block (TDL) size<br>
required for the turbo decoding process.<br>
[520]            The turbo decoding length (TDL) may also be referred to as a turbo block. Herein,<br>
a TDL should include at least one SCCCC block size. Therefore, as defined in FIG. 11,<br>
when it is assumed that one MPH block is a 16-segment unit, and that a combination of<br>
10 MPH blocks form one SCCC block, a TDL should be equal to or larger than the<br>
maximum possible combination size. For example, when it is assumed that 2 MPH<br>
blocks form one SCCC block, the TDL may be equal to or larger than 32 segments<br>
(i.e., 828x32=26496 symbols). Herein, M indicates a number of repetitions for turbo-<br>
decoding pre-decided by the feed-back controller 4010.<br>
[521]            Also, M represents a number of repetitions of the turbo decoding process, the<br>
number being predetermined by the feedback controller 4010.<br>
[522]            Additionally, among the values of symbols being channel-equalized and outputted<br>
from the equalizer 1003, the input symbol values corresponding to a section having no<br>
mobile service data symbols (including RS parity data symbols during RS frame<br>
encoding and CRC data symbols) included therein, bypass the input buffer 401 I<br>
without being stored. More specifically, since trellis-encoding is performed on input<br>
symbol values of a section wherein SCCC block-encoding has not been performed, the<br>
input buffer 4011 inputs the inputted symbol values of the corresponding section<br>
directly to the trellis encoding module 4012 without performing any storage, repetition,<br>
and output processes. The storage, repetition, and output processes of the input buffer<br>
4011 are controlled by the feedback controller 4010. Herein, the feedback controller<br>
4010 refers to SCCC-associated information (e.g., SCCC block mode and SCCC outer<br>
code mode), which are outputted from the signaling information decoding unit 1013, in<br>
order to control the storage and output processes of the input buffer 4011.<br>
[523]            The trellis decoding unit 4012 includes a 12-way TCM decoder. Herein, the trellis<br>
decoding unit 4012 performs 12-way trellis decoding as inverse processes of the<br>
12-way trellis encoder.<br>
[524]            More specifically, the trellis decoding unit 4012 receives a number of output<br>
symbols of the input buffer 4011 and soft-decision values of the feedback formatter<br>
4021 equivalent to each TDL, so as to perform the TCM decoding process.<br>
[525]            At this point, based upon the control of the feedback controller 4010, the soft-<br>
decision values outputted from the feedback formatter 4021 are matched with a<br>
number of mobile service data symbol places so as to be in a one-to-one (1:1) corre-<br>
spondence. Herein, the number of mobile service data symbol places is equivalent to<br>
the TDL being outputted from the input buffer 4011.<br>
[526]            More specifically, the mobile service data being outputted from the input buffer<br>
4011  are matched with the turbo decoded data being inputted, so that each respective<br>
data place can correspond with one another. Thereafter, the matched data are outputted<br>
to the trellis decoding unit 4012. For example, if the turbo decoded data correspond to<br>
the third symbol within the turbo block, the corresponding symbol (or data) is matched<br>
with the third symbol included in the turbo block, which is outputted from the input<br>
buffer 4011. Subsequently, the matched symbol (or data) is outputted to the trellis<br>
decoding unit 4012.<br>
[527]            In order to do so, while the regressive turbo decoding is in process, the feedback<br>
controller 4010 controls the input buffer 4011 so that the input buffer 4011 stores the<br>
corresponding turbo block data. Also, by delaying data (or symbols), the soft decision<br>
value (e.g., LLR) of the symbol outputted from the symbol interleaver 4020 and the<br>
symbol of the input buffer 4011 corresponding to the same place (or position) within<br>
the block of the output symbol are matched with one another to be in a one-to-one cor-<br>
respondence. Thereafter, the matched symbols are controlled so that they can be<br>
inputted to the TCM decoder through the respective path. This process is repeated for a<br>
predetermined number of turbo decoding cycle periods. Then, the data of the next<br>
turbo block are outputted from the input buffer 401 1. thereby repeating the turbo<br>
decoding process.<br>
[528]            The output of the trellis decoding unit 4012 signifies a degree of reliability of the<br>
transmission bits configuring each symbol. For example, in the transmitting system,<br>
since the input data of the trellis encoding module correspond to two bits as one<br>
symbol, a log likelihood ratio (LLR) between the likelihood of a bit having the value of<br>
' 1' and the likelihood of the bit having the value of '0' may be respectively outputted<br>
(in bit units) to the upper bit and the lower bit. Herein, the log likelihood ratio<br>
corresponds to a log value for the ratio between the likelihood of a bit having the value<br>
of '1' and the likelihood of the bit having the value of '0'. Alternatively, a LLR for the<br>
likelihood of 2 bits (i.e., one symbol) being equal to "00", "01", "10", and "11" may be<br>
respectively outputted (in symbol units) to all 4 combinations of bits (i.e., 00, 01, 10,<br>
11). Consequently, this becomes the soft decision value that indicates the degree of re-<br>
liability of the transmission bits configuring each symbol. A maximum a posteriori<br>
probability (MAP) or a soft-out Viterbi algorithm (SOVA) may be used as a decoding<br>
algorithm of each TCM decoder within the trellis decoding unit 4012.<br>
[529]            The output of the trellis decoding unit 4012 is inputted to the symbol-byte<br>
converter 4013 and the outer block extractor 4014.<br>
[530]            The symbol-byte converter 4013 performs a hard-decision process of the soft<br>
decision value that is trellis decoded and outputted from the trellis decoding unit 4012.<br>
Thereafter, the symbol-byte converter 4013 groups 4 symbols into byte units, which<br>
are then outputted to the data deinterleaver 1009 of FIG. 38. More specifically, the<br>
symbol-byte converter 4013 performs hard-decision in bit units on the soft decision<br>
value of the symbol outputted from the trellis decoding unit 4012. Therefore, the data<br>
processed with hard-decision and outputted in bit units from the symbol-byte converter<br>
4013 not only include main service data, but may also include mobile service data,<br>
known data, RS parity data, and MPEG headers.<br>
[531]            Among the soft decision values of TDL size of the trellis decoding unit 4012, the<br>
outer block extractor 4014 identifies the soft decision values of B size of cor-<br>
responding to the mobile service data symbols (wherein symbols corresponding to<br>
signaling information, RS parity data symbols that are added during the encoding of<br>
the RS frame, and CRC data symbols are included) and outputs the identified soft<br>
decision values to the feedback deformatter 4015.<br>
[532]            The feedback deformatter 4015 changes the processing order of the soft decision<br>
values corresponding to the mobile service data symbols. This is an inverse process of<br>
an initial change in the processing order of the mobile service data symbols, which are<br>
generated during an intermediate step, wherein the output symbols outputted from the<br>
block processor 302 of the transmitting system arc being inputted to the trellis<br>
encoding module 256 (e.g.. when the symbols pass through the group formatter, the<br>
data deinterleaver, the packet formatter, and the data interleave!-). Thereafter, the<br>
feedback deformatter 1015 performs reordering of the process order of soft decision<br>
values corresponding to the mobile service data symbols and, then, outputs the<br>
processed mobile service data symbols to the symbol deinterleaver 4016.<br>
[533]            This is because a plurality of blocks exist between the block processor 302 and the<br>
trellis encoding module 256, and because, due to these blocks, the order of the mobile<br>
service data symbols being outputted from the block processor 302 and the order of the<br>
mobile service data symbols being inputted to the trellis encoding module 256 are not<br>
identical to one another. Therefore, the feedback deformatter 4015 reorders (or<br>
rearranges) the order of the mobile service data symbols being outputted from the outer<br>
block extractor 4014, so that the order of the mobile service data symbols being<br>
inputted to the symbol deinterleaver 4016 matches the order of the mobile service data<br>
symbols outputted from the block processor 302 of the transmitting system. The<br>
reordering process may be embodied as one of software, middleware, and hardware.<br>
T534J            FIG. 64 illustrates a detailed block view of the feedback deformatter 4015<br>
according to an embodiment of the present invention. Herein, the feedback deformatter<br>
4015 includes a data deinterleaver 5011, a packet deformatter 5012, a data interleaver<br>
5013, and a group deformatter 5014. Referring to FIG. 64, the soft decision value of<br>
the mobile service data symbol, which is extracted by the outer block extractor 4014, is<br>
outputted directly to the data deinterleaver 5011 of the feedback deformatter 4015<br>
without modification. However, data place holders (or null data) are inserted in data<br>
places (e.g., main service data places, known data places, signaling information places,<br>
RS parity data places, and MPEG header places), which are removed by the outer<br>
block extractor 4014, thereby being outputted to the data deinterleaver 5011 of the<br>
feedback deformatter 4015.<br>
[535]            The data deinterleaver 5011 performs an inverse process of the data interleaver<br>
253 included in the transmitting system. More specifically, the data deinterleaver 5011<br>
deinterleaves the inputted data and outputs the deinterleaved data to the packet de-<br>
formatter 5012. The packet deformatter 5012 performs an inverse process of the packet<br>
formatter 305. More specifically, among the data that are deinterleaved and outputted<br>
from the data deinterleaver 5011, the packet deformatter 5012 removes the place<br>
holder corresponding to the MPEG header, which had been inserted to the packet<br>
formatter 305. The output of the packet deformatter 5012 is inputted to the data in-<br>
terleaver 5013, and the data interleaver 5013 interleaves the data being inputted, as an<br>
inverse process of the data deinterleaver 529 included in the transmitting system. Ac-<br>
cordingly, data having a data structure as shown in FIG. 11, are outputted to the group<br>
deformatter 5014.<br>
[536]            The data deformatter 5014 performs an inverse process of the group formatter 303<br>
included in the transmitting system. More specifically, the group formatter 5014<br>
removes the place holders corresponding to the main service data, known data,<br>
signaling information data, and RS parity data. Then, the group formatter 5014 outputs<br>
only the reordered (or rearranged) mobile service data symbols to the symbol dein-<br>
terleaver 4016. According to another embodiment of the present invention, when the<br>
feedback deformatter 4015 is embodied using a memory map, the process of inserting<br>
and removing place holder to and from data places removed by the outer block<br>
extractor 4014 may be omitted.<br>
[537]            The symbol deinterleaver 4016 performs deinterleaving on the mobile service data<br>
symbols having their processing orders changed and outputted from the feedback de-<br>
formatter 4015, as an inverse process of the symbol interleaving process of the symbol<br>
interleaver 514 included in the transmitting system. The size of the block used by the<br>
symbol deinterleaver 4016 during the deinterleaving process is identical to interleaving<br>
size of an actual symbol (i.e., B) of the symbol interleaver 514, which is included in<br>
the transmitting system. This is because the turbo decoding process is performed<br>
between the trellis decoding unit 4012 and the symbol decoder 4018. Both the input<br>
and output of the symbol deinterleaver 4016 correspond to soft decision values, and the<br>
deinterleaved soft decision values are outputted to the outer symbol mapper 4017.<br>
[538]            The operations of the outer symbol mapper 4017 may vary depending upon the<br>
structure and coding rate of the convolution encoder 513 included in the transmitting<br>
system. For example, when data are 1/2-rate encoded by the convolution encoder 513<br>
and then transmitted, the outer symbol mapper 4017 directly outputs the input data<br>
without modification. In another example, when data are 1/4-rate encoded by the<br>
convolution encoder 513 and then transmitted, the outer symbol mapper 4017 converts<br>
the input data so that it can match the input data format of the symbol decoder 4018.<br>
For this, the outer symbol mapper 4017 may be inputted SCCC-associated information<br>
(i.e., SCCC block mode and SCCC outer code mode) from the signaling information<br>
decoder 1013. Then, the outer symbol mapper 4017 outputs the converted data to the<br>
symbol decoder 4018.<br>
[539]            The symbol decoder 4018 (i.e., the outer decoder) receives the data outputted from<br>
the outer symbol mapper 4017 and performs symbol decoding as an inverse process of<br>
the convolution encoder 513 included in the transmitting system. At this point, two<br>
different soft decision values are outputted from the symbol decoder 4018. One of the<br>
outputted soft decision values corresponds to a soft decision value matching the output<br>
symbol of the convolution encoder 513 (hereinafter referred to as a "first decision<br>
value")- The other one of the outputted soft decision values corresponds to a soft<br>
decision value matching the input bit of the convolution encoder 513 (hereinafter<br>
referred to as a "second decision value").<br>
[540]            More specifically, the first decision value represents a degree of reliability the<br>
output symbol (i.e., 2 bits) of the convolution encoder 513. Herein, the first soft<br>
decision value may output (in bit units) a LLR between the likelihood of 1 bit being<br>
equal to ' 1' and the likelihood of 1 bit being equal to '0' with respect to each of the<br>
upper bit and lower bit, which configures a symbol. Alternatively, the first soft<br>
decision value may also output (in symbol units) a LLR for the likelihood of 2 bits<br>
being equal to "00", "01", "10", and "11" with respect to all possible combinations.<br>
The first soft decision value is fed-back to the trellis decoding unit 4012 through the<br>
inner symbol mapper 4019, the symbol interleaver 4020, and the feedback formatter<br>
4021. On the other hand, the second soft decision value indicates a degree of reliability<br>
the input bit of the convolution encoder 513 included in the transmitting system.<br>
Herein, the second soft decision value is represented as the LLR between the<br>
likelihood of 1 bit being equal to '1' and the likelihood of 1 bit being equal to '0'.<br>
Thereafter, the second soft decision value is outputted to the outer buffer 4022. In this<br>
case, a maximum a posteriori probability (MAP) or a soft-out Viterbi algorithm<br>
(SOVA) may be used as the decoding algorithm of the symbol decoder 4018.<br>
[541]            The first soft decision value that is outputted from the symbol decoder 4018 is<br>
inputted to the inner symbol mapper 4019. The inner symbol mapper 4019 converts the<br>
first soft decision value to a data format corresponding the input data of the trellis<br>
decoding unit 4012. Thereafter, the inner symbol mapper 4019 outputs the converted<br>
soft decision value to the symbol interleaver 4020. The operations of the inner symbol<br>
mapper 4019 may also vary depending upon the structure and coding rate of the<br>
convolution encoder 513 included in the transmitting system.<br>
[542]            Hereinafter, when the symbol encoder 402 of the transmitting system operates as a<br>
1/4 encoder, the operations of the outer symbol mapper 4017 and the inner symbol<br>
mapper 4019 will now be described in detail with reference to FIG. 25 to FIG. 27.<br>
[543]            According to an embodiment of the present invention, it is assumed that the<br>
symbol encoder is configured as shown in FIG. 25, and that the 1/4 outer encoder 411<br>
encodes one bit U so as to output 4 bits u0, ul, u2, and u3, and also that the 4 bits (i.e.,<br>
2 symbols) are transmitted twice in symbol units (i.e., each of the 2 symbols is<br>
transmitted twice) through the parallel/serial converter 412. In this case, the symbol<br>
that is outputted first is referred to as an odd-number-designated symbol, and the<br>
symbol that is outputted subsequently is referred to as an even-number-designated<br>
symbol for simplicity.<br>
[544]            At this point, when the input/output units of the outer symbol mapper 4017 and the<br>
inner symbol mapper 4019 corresponds to symbol units, 16 (i.e., 24=16) different soft<br>
decision values may be outputted in symbol units from the outer symbol mapper 4017.<br>
For example, among the 16 (i.e.. 24=16) different soft decision values that are to be<br>
outputted from the outer symbol mapper 4017, the soft decision value of s=( 1, 0, 0. IJ<br>
may be calculated by adding the soft decision value of the inputted odd-<br>
number-designated symbol m0=(1, 0) and the soft decision value of the inputted even-<br>
number-designated symbol m1=(0, 1). Afterwards, the added value is inputted to the<br>
symbol decoder 4018.<br>
[545]            Furthermore, a total of 4 (i.e., 22=4) different soft decision values may be<br>
outputted in symbol units from the inner symbol mapper 4019. For example, among<br>
the 4 (i.e., 22=4) different soft decision values that are to be outputted from the inner<br>
symbol mapper 4019, the soft decision value of the odd-number-designated symbol<br>
m0=(l, 1) may be obtained by calculating the largest value among the soft decision<br>
value for each of the output symbols s=(l, 1, X, X) outputted from the symbol decoder<br>
4018. Afterwards, the added value is inputted to the symbol decoder 4018. Also, the<br>
soft decision value of the even-number-designated symbol ml=(0, 0) may be obtained<br>
by calculating the largest value among the soft decision value for each of the output<br>
symbols s=(X, X, 0, 0) outputted from the symbol decoder 4018. Herein, 'X' randomly<br>
corresponds to one of 1' and '0'. The output of the inner symbol mapper 4019 is then<br>
provided to the symbol interleaver 4020.<br>
[546]            Meanwhile, if the input/output units of the outer symbol mapper 4017 and the<br>
inner symbol mapper 4019 correspond to bit units, a total of 4 different soft decision<br>
values may be outputted in bit units from the outer symbol mapper 4017.<br>
[547]            More specifically, the outer symbol mapper 4017 simultaneously outputs 2 soft<br>
decision values of an odd-number-designated input symbol (i.e., a soft decision value<br>
for each of the upper bit and lower bit configuring the odd-number-designated input<br>
symbol) and 2 soft decision values of an even-number-designated input symbol (i.e., a<br>
soft decision value for each of the upper bit and lower bit configuring the even-<br>
number-designated input symbol) to the symbol decoder 4018. Also, with respect to<br>
the 4 inputs provided by the symbol decoder 4018, the inner symbol mapper 4019 also<br>
identifies 2 soft decision values of an odd-number-designated output symbol (i.e., a<br>
soft decision value for each of the upper bit and lower bit configuring the odd-<br>
number-designated output symbol of the symbol decoder 4018) and 2 soft decision<br>
values of an even-number-designated output symbol (i.e., a soft decision value for each<br>
of the upper bit and lower bit configuring the even-number-designated output symbol<br>
of the symbol decoder 4018), which are then outputted to the symbol interleaver 4020.<br>
[548]            In other words, if the symbol encoding process is performed as shown in FIG. 25,<br>
the LLR for each of the 16 symbols is respectively received and symbol-decoded.<br>
Thereafter, the processed LLR for each of the 16 symbols may be outputted as the first<br>
soft decision value. Alternatively, the LLR for each of the 4 symbols is respectively<br>
received and symbol-decoded. Thereafter, the processed LLR for each of the 4<br>
symbols may be outputted as the first soft decision value.<br>
[549]            According to another embodiment of the present invention, it is assumed that the<br>
symbol encoder is configured as shown in FIG. 26, and that the 1/2 outer encoder 421<br>
encodes one bit U so as to output 2 bits u0 and ul, and also that the 2 bits (i.e., 1<br>
symbol) is repeated once through the repeater 422. In this case, the symbol that is<br>
outputted first is referred to as an odd-number-designated symbol, and the symbol that<br>
is outputted subsequently is referred to as an even-number-designated symbol for<br>
simplicity.<br>
[550]            At this point, when the input/output units of the outer symbol mapper 4017 and the<br>
inner symbol mapper 4019 corresponds to symbol units, 4 (i.e., 22=4) different soft<br>
decision values may be outputted in symbol units from the outer symbol mapper 4017.<br>
For example, among the 4 (i.e., 22=4) different soft decision values that are to be<br>
outputted in symbol units from the outer symbol mapper 4017, the soft decision value<br>
of s=(1, 0) may be calculated by adding the soft decision value of the inputted odd-<br>
number-designated symbol m0=(1, 0) and the soft decision value of the inputted even-<br>
number-designated symbol m1=(1, 0). Afterwards, the added value is provided to the<br>
symbol decoder 4018. Furthermore, a total of 4 (i.e., 22=4) different soft decision<br>
values is to be outputted from the inner symbol mapper 4019. For example, among the<br>
4 (i.e., 22=4) different soft decision values, the soft decision value of the odd-<br>
number-designated symbol m0=(l, 1) and the even-number-designated symbol ml=(l,<br>
1) become the soft decision value of the input symbol s=(l, 1) of the symbol decoder<br>
4018. This soft decision value is then outputted to the symbol interleaver 4020.<br>
[551]            Meanwhile, if the input/output units of the outer symbol mapper 4017 and the<br>
inner symbol mapper 4019 correspond to bit units, a total of 2 soft decision values (i.e.,<br>
a soft decision for the upper bit and a soft decision value for the lower bit) may be<br>
outputted in bit units from the outer symbol mapper 4017. Herein, the soft decision<br>
value for the upper bit may be obtained by adding the soft decision for the upper bit of<br>
the odd-number-designated symbol and the soft decision for the upper bit of the even-<br>
number-designated symbol. Also, the soft decision value for the lower bit may be<br>
obtained by adding the soft decision for the lower bit of the odd-number-designated<br>
symbol and the soft decision for the lower bit of the even-number-designated symbol.<br>
[552]            The inner symbol mapper 4019 receives the soft decision value for the upper bit<br>
and the soft decision value for the lower bit from the symbol decoder 4018. Thereafter,<br>
the inner symbol mapper 4019 outputs the received soft decision values as 2 soft<br>
decision values corresponding to each of the odd-number-designated output bits (i.e., a<br>
soft decision value for each of the lower bit and upper bit that are outputted from the<br>
symbol decoder 4018). Then, the 2 soft decision values corresponding to each of the<br>
odd-number-designated output bits are repeated, thereby being outputted as 2 soft<br>
decision values corresponding to each of the even-number-designated output bits.<br>
[553]            According to yet another embodiment of the present invention, it is assumed that<br>
the symbol encoder is configured as shown in FIG. 27, and that the input bit is repeated<br>
once by the repeater 431, and that the 1/2 outer encoder 432 1/2-rate encodes the bit<br>
that is repeated and inputted from the repeater 431, so as to output 2 bits u0 and ul<br>
(i.e., 1 symbol) twice. In this case, the symbol encoder repeats one bit and encodes the<br>
repeated bit at a coding rate of 1/2. Herein, the symbol that is outputted first is referred<br>
to as an odd-number-designated symbol, and the symbol that is outputted subsequently<br>
is referred to as an even-number-designated symbol for simplicity.<br>
[554]            At this point, if the input/output units of the outer symbol mapper 4017 and the<br>
inner symbol mapper 4019 correspond to bit units, the outer symbol mapper 4017<br>
directly transmits the output of the symbol deinterleaver 4016 to the symbol decoder<br>
4018 without modification. The inner symbol mapper 4019 directly transmits the<br>
output of the symbol decoder 4018 to the symbol interleaver 4020 without mod-<br>
ification. Also, even when the input/output units of the outer symbol mapper 4017 and<br>
the inner symbol mapper 4019 correspond to symbol units, the outer symbol mapper<br>
4017 directly transmits the output of the symbol deinterleaver 4016 to the symbol<br>
decoder 4018 without modification. The inner symbol mapper 4019 directly transmits<br>
the output of the symbol decoder 4018 to the symbol interleaver 4020 without mod-<br>
ification.<br>
[555]            Referring to FIG. 27, since the input of the 1/2 outer encoder 432 is repeated by<br>
the repeater 431, the soft decisions values for the 2 symbols corresponding to the<br>
output data of the block decoder should be determined and outputted as a single soft<br>
decision value. More specifically, when the symbol encoding is processed as shown in<br>
FIG. 26 and FIG. 27, the LLR for each of the 4 different symbols may be received and<br>
symbol-decoded. Thereafter, the LLR for each of the 4 symbols may be outputted as<br>
the first soft decision value. Alternatively, the LLR for 2 bits may be received and<br>
symbol-decoded. Thereafter, the LLR for the 2 bits may be outputted as the first soft<br>
decision value.<br>
[556]            The symbol interleaver 4020 performs symbol interleaving, as shown in FIG. 30,<br>
on the first soft decision value that is outputted from the inner symbol mapper 4019.<br>
Then, the symbol interleaver 4020 outputs the symbol-interleaved first soft decision<br>
value to the feedback formatter 4021. Herein, the output of the symbol interleaver<br>
4020 also corresponds to a soft decision value. With respect to the changed processing<br>
order of the soft decision values corresponding to the symbols that are generated<br>
during an intermediate step, wherein the output symbols outputted from the block<br>
processor 303 of the transmitting system are being inputted to the trellis encoding<br>
module (e.g.. when the symbols pass through the group formatter, the data dein-<br>
terleaver, the packet formatter, the RS encoder, and the data interleaver), the feedback<br>
formatter 4021 alters (or changes) the order of the output values outputted from the<br>
symbol interleaver 4020. Subsequently, the feedback formatter 4020 outputs values to<br>
the trellis decoding unit 4012 in the changed order.<br>
[557]            The soft decision values outputted from the symbol interleaver 4020 are matched<br>
with the positions of mobile service data symbols each having the size of TDL, which<br>
are outputted from the input buffer 4011, so as to be in a one-to-one correspondence.<br>
Thereafter, the soft decision values matched with the respective symbol position are<br>
inputted to the trellis decoding unit 4012. At this point, since the main service data<br>
symbols or the RS parity data symbols and known data symbols of the main service<br>
data do not correspond to the mobile service data symbols, the feedback formatter<br>
4021 inserts null data in the corresponding positions, thereby outputting the processed<br>
data to the trellis decoding unit 4012. Additionally, each time the symbols having the<br>
size of TDL are turbo decoded, no value is fed-back by the symbol interleaver 4020<br>
starting from the beginning of the first decoding process. Therefore, the feedback<br>
formatter 4021 is controlled by the feedback controller 4010, thereby inserting null<br>
data into all symbol positions including a mobile service data symbol. Then, the<br>
processed data are outputted to the trellis decoding unit 4012.<br>
[558]            The output buffer 4022 receives the second soft decision value from the symbol<br>
decoder 4018 based upon the control of the feedback controller 4010. Then, the output<br>
buffer 4022 temporarily stores the received second soft decision value. Thereafter, the<br>
output buffer 4022 outputs the second soft decision value to the RS frame deocder<br>
1006. For example, the output buffer 4022 overwrites the second soft decision value of<br>
the symbol decoder 4018 until the turbo decoding process is performed for M number<br>
of times. Then, once all M number of turbo decoding processes is performed for a<br>
single TDL, the corresponding second soft decision value is outputted to the RS frame<br>
deocder 1006.<br>
[559]            The feedback controller 4010 controls the number of turbo decoding and turbo<br>
decoding repetition processes of the overall block decoder, shown in FIG. 63.<br>
[560]            At this point, the number of regressive turbo decoding rounds between the trellis<br>
decoding unit 4012 and the symbol decoder 4018 may be defined while taking into<br>
account hardware complexity and error correction performance. Accordingly, if the<br>
number of rounds increases, the error correction performance may be enhanced.<br>
However, this may lead to a disadvantageous of the hardware becoming more<br>
complicated (or complex).<br>
[561]            Meanwhile, the data deinterleaver 1009, the RS decoder 1010, and the data de-<br>
randomizer 1011 correspond to blocks required for receiving the main service data.<br>
Therefore, the above-mentioned blocks may not be necessary (or required) in the<br>
structure of a digital broadcast receiving system for receiving mobile service data only.<br>
The data deinterleaver 1009 performs an inverse process of the data interleaver<br>
included in the transmitting system. In other words, the data deinterleaver 1009 dein-<br>
terleaves the main service data outputted from the block decoder 1005 and outputs the<br>
deinterleaved main service data to the RS decoder 4010. The data being inputted to the<br>
data deinterleaver 1009 include main service data, as well as mobile service data,<br>
known data, RS parity data, and an MPEG header.<br>
[562]            The RS decoder 1010 performs a systematic RS decoding process on the dein-<br>
terleaved data and outputs the processed data to the data derandomizer 1011.<br>
[563]            The data derandomizer 1011 receives the output of the RS decoder 1010 and<br>
generates a pseudo random data byte identical to that of the randomizer included in the<br>
digital broadcast transmitting system. Thereafter, the data derandomizer 1011 performs<br>
a bitwise exclusive OR (XOR) operation on the generated pseudo random data byte,<br>
thereby inserting the MPEG synchronization bytes to the beginning of each packet so<br>
as to output the data in 188-byte main service data packet units.<br>
15641<br>
[565]            RS Frame Decoder<br>
[566]            More specifically, the RS frame decoder 1006 receives only the RS-encoded and/<br>
or CRC-encoded mobile service data that are transmitted from the block decoder 1005.<br>
The RS frame encoder 1006 performs an inverse process of the RS frame encoder<br>
included in the transmitting system so as to correct the error within the RS frame.<br>
Then, the RS frame decoder 1006 adds the 1-byte MPEG synchronization service data<br>
packet, which had been removed during the RS frame encoding process, to the error-<br>
corrected mobile service data packet. Thereafter, the processed data packet is outputted<br>
to the derandomizer 1007.<br>
[567]            FIG. 65 illustrates a process of grouping a plurality of data groups (e.g., 18 data<br>
groups) to create a RS frame and a RS frame reliability map, and also a process of<br>
performing data deinterleaving in super frame units as an inverse process of the<br>
transmitting system and identifying the deinterleaved RS frame and RS frame re-<br>
liability map. More specifically, the RS frame decoder 1006 groups the inputted<br>
mobile service data so as to create a RS frame. The mobile service data have been RS-<br>
encoded RS frame units by the transmitting system, and then interleaved in super<br>
frame units. At this point, the error correction encoding process (e.g., the CRC<br>
encoding process) may have been performed on the mobile service data, or the error<br>
collection encoding process may have been omitted.<br>
[568]            If it is assumed that the transmitting system has divided the RS frame having the<br>
size of (N+2)*( 187+P) bytes into M number of data groups (wherein, for example. M<br>
is equal to 18) and then transmitted the divided RS frame, the receiving system groups<br>
the mobile service data of each data group, as shown in FIG. 65(a). so as to create a RS<br>
frame having the size of (N+2)*(187+P) bytes. At this point, if a dummy byte has been<br>
added to at least one of the data groups configuring the corresponding RS frame and,<br>
then, transmitted, the dummy byte is removed, and a RS frame and a RS frame re-<br>
liability map are created. For example, as shown in FIG. 13, if K number of dummy<br>
bytes has been added, the RS frame and RS frame reliability map are created after the<br>
K number of dummy bytes has been removed.<br>
[569]            Furthermore, if it is assumed that the RS frame is divided into 18 data groups,<br>
which are then transmitted from a single burst-on section, the receiving system also<br>
groups mobile service data of 18 data groups within the corresponding burst section,<br>
thereby creating the RS frame. Herein, when it is assumed that the block decoder 1005<br>
outputs a soft decision value for the decoding result, the RS frame decoder may decide<br>
the '0' and ' 1' of the corresponding bit by using the codes of the soft decision value. 8<br>
bits that are each decided as described above are grouped to create one data byte. If the<br>
above-described process is performed on all soft decision values of the 18 data groups<br>
included in a single burst, the RS frame having the size of (N+2)*(187+P) bytes may<br>
be configured. Additionally, the present invention uses the soft decision value not only<br>
to configure the RS frame but also to configure a reliability map. Herein, the reliability<br>
map indicates the reliability of the corresponding data byte, which is configured by<br>
grouping 8 bits, wherein the 8 bits are decided by the codes of the soft decision value.<br>
[570]            For example, when the absolute value of the soft decision value exceeds a pre-<br>
determined threshold value, the value of the corresponding bit, which is decided by the<br>
code of the corresponding soft decision value, is determined to be reliable. Conversely,<br>
when the absolute value of the soft decision value does not exceed the pre-determined<br>
threshold value, the value of the corresponding bit is determined to be unreliable.<br>
Thereafter, if even a single bit among the 8 bits, which are decided by the codes of the<br>
soft decision value and grouped to configure one data byte, is determined to be un<br>
reliable, the corresponding data byte is marked on the reliability map as an unreliable<br>
data byte.<br>
[571]            Herein, determining the reliability of one data byte is only exemplary. More<br>
specifically, when a plurality of data bytes (e.g., at least 4 data bytes) are determined to<br>
be unreliable, the corresponding data bytes may also be marked as unreliable data<br>
bytes within the reliability map. Conversely, when all of the data bits within the one<br>
data byte are determined to be reliable (i.e., when the absolute value of the soft<br>
decision values of all 8 bits included in the one data byte exceed the predetermined<br>
threshold value), the corresponding data byte is marked to be a reliable data byte on the<br>
reliability map. Similarly, when a plurality of data bytes (e.g., at least 4 data bytes) are<br>
determined to be reliable, the corresponding data bytes may also be marked as reliable<br>
data bytes within the reliability map. The numbers proposed in the above-described<br>
example are merely exemplary and, therefore, do not limit the scope or spirit of the<br>
present invention.<br>
[572]            The process of configuring the RS frame and the process of configuring the re-<br>
liability map both using the soft decision value may be performed at the same time.<br>
Herein, the reliability information within the reliability map is in a one-to-one corre-<br>
spondence with each byte within the RS frame. For example, if a RS frame has the size<br>
of (N+2)*(187+P) bytes, the reliability map is also configured to have the size of<br>
(N+2)*(187+P) bytes. FIG. 65(a') and FIG. 65(b') respectively illustrate the process<br>
steps of configuring the reliability map according to the present invention.<br>
[573]            At this point, the RS frame of FIG. 65(b) and the RS frame reliability map of FIG.<br>
65(b') are interleaved in super frame units (as shown in FIG. 8). Therefore, the RS<br>
frame and the RS frame reliability maps are grouped to create a super frame and a<br>
super frame reliability map. Subsequently, as shown in FIG. 65(c) and FIG. 65(c'), a<br>
de-permutation (or deinterleaving) process is performed in super frame units on the RS<br>
frame and the RS frame reliability maps, as an inverse process of the transmitting<br>
system. Then, when the de-permutation process is performed in super frame units, the<br>
processed data are divided into de-permuted (or deinterleaved) RS frames having the<br>
size of (N+2)*(187+P) bytes and de-permuted RS frame reliability maps having the<br>
size of (N+2)*(187+P) bytes, as shown in FIG. 65(d) and FIG. 65(d'). Subsequently,<br>
the RS frame reliability map is used on the divided RS frames so as to perform error<br>
correction.<br>
[574]            FIG. 66 illustrates example of the error correction processed according to em-<br>
bodiments of the present invention. FIG. 66 illustrates an example of performing an<br>
error correction process when the transmitting system has performed both RS encoding<br>
and CRC encoding processes on the RS frame. As shown in FIG. 66(a) and FIG.<br>
66(a'), when the RS frame having the size of (N+2)*(187+P) bytes and the RS frame<br>
reliability map having the size of (N+2)*(187+P) bytes are created, a CRC syndrome<br>
checking process is performed on the created RS frame, thereby verifying whether any<br>
error has occurred in each row. Subsequently, as shown in FIG. 66(b), a 2-byte<br>
checksum is removed to configure an RS frame having the size of N*(187+P) bytes.<br>
Herein, the presence (or existence) of an error is indicated on an error flag cor-<br>
responding to each row. Similarly, since the portion of the reliability map cor-<br>
responding to the CRC checksum has hardly any applicability, this portion is removed<br>
so that only N*( 187+P) number of the reliability information bytes remain, as shown<br>
in FIG. 66(b').<br>
[575]            After performing the CRC syndrome checking process, as described above, a RS<br>
decoding process is performed in a column direction. Herein, a RS erasure correction<br>
process may be performed in accordance with the number of CRC error flags. More<br>
specifically, as shown in FIG. 66(c), the CRC error flag corresponding to each row<br>
within the RS frame is verified. Thereafter, the RS frame decoder 1006 determines<br>
whether the number of rows having a CRC error occurring therein is equal to or<br>
smaller than the maximum number of errors on which the RS erasure correction may<br>
be performed, when performing the RS decoding process in a column direction. The<br>
maximum number of errors corresponds to P number of parity bytes inserted when<br>
performing the RS encoding process. In the embodiment of the present invention, it is<br>
assumed that 48 parity bytes have been added to each column (i.e., P=48).<br>
[576]            If the number of rows having the CRC errors occurring therein is smaller than or<br>
equal to the maximum number of errors (i.e., 48 errors according to this embodiment)<br>
that can be corrected by the RS erasure decoding process, a (235,187)-RS erasure<br>
decoding process is performed in a column direction on the RS frame having (187+P)<br>
number of N-byte rows (i.e., 235 N-byte rows), as shown in FIG. 66(d). Thereafter, as<br>
shown in FIG. 66(e), the 48-byte parity data that have been added at the end of each<br>
column are removed. Conversely, however, if the number of rows having the CRC<br>
errors occurring therein is greater than the maximum number of errors (i.e., 48 errors)<br>
that can be corrected by the RS erasure decoding process, the RS erasure decoding<br>
process cannot be performed. In this case, the error may be corrected by performing a<br>
general RS decoding process. In addition, the reliability map, which has been created<br>
based upon the soft decision value along with the RS frame, may be used to further<br>
enhance the error correction ability (or performance) of the present invention.<br>
[577]            More specifically, the RS frame decoder compares the absolute value of the soft<br>
decision value of the block decoder 1005 with the pre-determined threshold value, so<br>
as to determine the reliability of the bit value decided by the code of the corresponding<br>
soft decision value. Also, 8 bits, each being determined by the code of the soft decision<br>
value, are grouped to form one data byte. Accordingly, the reliability information on<br>
this one data byte is indicated on the reliability map. Therefore, as shown in FIG.<br>
66(c), even though a particular row is determined to have an error occurring therein<br>
based upon a CRC syndrome checking process on the particular row, the present<br>
invention does not assume that all bytes included in the row have errors occurring<br>
therein. The present invention refers to the reliability information of the reliability map<br>
and sets only the bytes that have been determined to be unreliable as erroneous bytes.<br>
In other words, with disregard to whether or not a CRC error exists within the cor-<br>
responding row, only the bytes that are determined to be unreliable based upon the re-<br>
liability map are set as erasure points.<br>
[578]            According to another method of the present invention, when it is determined that<br>
CRC errors are included in the corresponding row. based upon the result of the CRC<br>
syndrome checking result, only the bytes that are determined by the reliability map to<br>
be unreliable are set as errors. More specifically, only the bytes corresponding to the<br>
row that is determined to have errors included therein and being determined to be<br>
unreliable based upon the reliability information, are set as the erasure points.<br>
Thereafter, if the number of error points for each column is smaller than or equal to the<br>
maximum number of errors (i.e., 48 errors) that can be corrected by the RS erasure<br>
decoding process, an RS erasure decoding process is performed on the corresponding<br>
column. Conversely, if the number of error points for each column is greater than the<br>
maximum number of errors (i.e., 48 errors) that can be corrected by the RS erasure<br>
decoding process, a general decoding process is performed on the corresponding<br>
column.<br>
[579]            More specifically, if the number of rows having CRC errors included therein is<br>
greater than the maximum number of errors (i.e., 48 errors) that can be corrected by the<br>
RS erasure decoding process, either an RS erasure decoding process or a general RS<br>
decoding process is performed on a column that is decided based upon the reliability<br>
information of the reliability map, in accordance with the number of erasure points<br>
within the corresponding column. For example, it is assumed that the number of rows<br>
having CRC errors included therein within the RS frame is greater than 48. And, it is<br>
also assumed that the number of erasure points decided based upon the reliability in-<br>
formation of the reliability map is indicated as 40 erasure points in the first column and<br>
as 50 erasure points in the second column. In this case, a (235,187)-RS erasure<br>
decoding process is performed on the first column. Alternatively, a (235,187)-RS<br>
decoding process is performed on the second column. When error correction decoding<br>
is performed on all column directions within the RS frame by using the above-<br>
described process, the 48-byte parity data which were added at the end of each column<br>
are removed, as shown in FIG. 66(e).<br>
[580]            As described above, even though the total number of CRC errors corresponding to<br>
each row within the RS frame is greater than the maximum number of errors that can<br>
be corrected by the RS erasure decoding process, while performing error correction<br>
decoding on the particular column, when the number of bytes determined to have a low<br>
reliability level, based upon the reliability information on the reliability map within a<br>
particular column, RS erasure decoding may be performed on the corresponding<br>
column. Herein, the difference between the general RS decoding process and the RS<br>
erasure decoding process is the number of errors that can be corrected.<br>
[581]            More specifically, when performing the general RS decoding process, the number<br>
of errors corresponding to half of the number of parity bytes (i.e., (number of parity<br>
bytes)/2) that are inserted during the RS encoding process may be error corrected (e.g.,<br>
24 errors may be corrected). Alternatively, when performing the RS erasure decoding<br>
process, the number of errors corresponding to the number of parity bytes that are<br>
inserted during the RS encoding process may be error corrected (e.g., 48 errors may be<br>
corrected).<br>
[582]            After performing the error correction decoding process, as described above, a RS<br>
frame configured of 187 N-byte rows (or packet) may be obtained as shown in FIG.<br>
66(e). The RS frame having the size of N* 187 bytes is outputted by the order of N<br>
number of 187-byte units. At this point, 1 MPEG synchronization byte, which had<br>
been removed by the transmitting system, is added to each 187-byte packet, as shown<br>
in FIG. 66(f). Therefore, a 188-byte unit mobile service data packet is outputted. As<br>
described above, the RS frame decoded mobile service data are outputted to the data<br>
derandomizer 1007. The data derandomizer 1007 performs a derandomizing process,<br>
which corresponds to an inverse process of the randomizer included in the transmitting<br>
system, on the inputted mobile service data. Then, by outputting the derandomized<br>
data, the mobile service data transmitted from the transmitting system may be<br>
obtained.<br>
[583]<br>
[584]            General Digital Broadcast Receiving System<br>
[585]            FIG. 67 illustrates a block diagram showing a structure of a digital broadcast<br>
receiving system according to an embodiment of the present invention. Herein, the de-<br>
modulating unit of FIG. 38 may be applied in the digital broadcast receiving system.<br>
Referring to FIG. 67, the digital broadcast receiving system includes a tuner 6001, a<br>
demodulating unit 6002, a demultiplexer 6003, an audio decoder 6004, a video decoder<br>
6005, a native TV application manager 6006, a channel manager 6007, a channel map<br>
6008, a first memory 6009, an SI and/or data decoder 6010, a second memory 6011, a<br>
system manager 6012, a data broadcast application manager 6013, a storage controller<br>
6014, a third memory 6015, and a GPS module 6020. Herein, the first memory 6009<br>
corresponds to a non-volatile random access memory (NVRAM) (or a flash memory).<br>
The third memory 6015 corresponds to a large-scale storage device, such as a hard disk<br>
drive (HDD), a memory chip, and so on.<br>
[586]            The tuner 6001 tunes a frequency of a specific channel through any one of an<br>
antenna, cable, and satellite. Then, the tuner 6001 down-converts the tuned frequency<br>
to an intermediate frequency (IF), which is then outputted to the demodulating unit<br>
6002. At this point, the tuner 6001 is controlled by the channel manager 6007. Ad-<br>
ditionally, the result and strength of the broadcast signal of the tuned channel are also<br>
reported to the channel manager 6007. The data that are being received by the<br>
frequency of the tuned specific channel include main service data, mobile service data,<br>
and table data for decoding the main service data and mobile service data.<br>
[587]            According to the embodiment of the present invention, audio data and video data<br>
for mobile broadcast programs may be applied as the mobile service data. Such audio<br>
data and video data are compressed by various types of encoders so as to be<br>
transmitted to a broadcasting station. In this case, the video decoder 6004 and the audio<br>
decoder 6005 will be provided in the receiving system so as to correspond to each of<br>
the encoders used for the compression process. Thereafter, the decoding process will<br>
be performed by the video decoder 6004 and the audio decoder 6005. Then, the<br>
processed video and audio data will be provided to the users. Examples of the<br>
encoding/decoding scheme for the audio data may include AC 3, MPEG 2 AUDIO,<br>
MPEG 4 AUDIO, AAC, AAC+, HE AAC, AAC SBR, MPEG-Surround, and BSAC.<br>
And, examples of the encoding/decoding scheme for the video data may include<br>
MPEG 2 VIDEO, MPEG 4 VIDEO, H.264, SVC, and VC-1.<br>
[588]            Depending upon the embodiment of the present invention, examples of the mobile<br>
service data may include data provided for data service, such as Java application data,<br>
HTML application data, XML data, and so on. The data provided for such data<br>
services may correspond either to a Java class file for the Java application, or to a<br>
directory file designating positions (or locations) of such files. Furthermore, such data<br>
may also correspond to an audio file and/or a video file used in each application. The<br>
data services may include weather forecast services, traffic information services, stock<br>
information services, services providing information quiz programs providing audience<br>
participation services, real time poll, user interactive education programs, gaming<br>
services, services providing information on soap opera (or TV series) synopsis,<br>
characters, original sound track, filing sites, services providing information on past<br>
sports matches, profiles and accomplishments of sports players, product information<br>
and product ordering services, services providing information on broadcast programs<br>
by media type, airing time, subject, and so on. The types of data services described<br>
above are only exemplary and are not limited only to the examples given herein.<br>
Furthermore, depending upon the embodiment of the present invention, the mobile<br>
service data may correspond to meta data. For example, the meta data be written in<br>
XML format so as to be transmitted through a DSM-CC protocol.<br>
[589]            The demodulating unit 6002 performs VSB-demodulation and channel<br>
equalization on the signal being outputted from the tuner 6001, thereby identifying the<br>
main service data and the mobile service data. Thereafter, the identified main service<br>
data and mobile service data are outputted in TS packet units. An example of the de-<br>
modulating unit 6002 is shown in FIG. 38 to FIG. 66. Therefore, the structure and<br>
operation of the demodulator will be described in detail in a later process. However,<br>
this is merely exemplary and the scope of the present invention is not limited to the<br>
example set forth herein. In the embodiment given as an example of the present<br>
invention, only the mobile service data packet outputted from the demodulating unit<br>
6002 is inputted to the demultiplexer 6003. In this case, the main service data packet is<br>
inputted to another demultiplexer (not shown) that processes main service data packets.<br>
Herein, the storage controller 6014 is also connected to the other demultiplexer in<br>
order to store the main service data after processing the main service data packets. The<br>
demultiplexer of the present invention may also be designed to process both mobile<br>
service data packets and main service data packets in a single demultiplexer.<br>
[590]            The storage controller 6014 is interfaced with the demultipelxer so as to control<br>
instant recording, reserved (or pre-programmed) recording, time shift, and so on of the<br>
mobile service data and/or main service data. For example, when one of instant<br>
recording, reserved (or pre-programmed) recording, and time shift is set and<br>
programmed in the receiving system (or receiver) shown in FIG. 67, the corresponding<br>
mobile service data and/or main service data that are inputted to the demultiplexer are<br>
stored in the third memory 6015 in accordance with the control of the storage<br>
controller 6014. The third memory 6015 may be described as a temporary storage area<br>
and/or a permanent storage area. Herein, the temporary storage area is used for the<br>
time shifting function, and the permanent storage area is used for a permanent storage<br>
of data according to the user's choice (or decision).<br>
[591]            When the data stored in the third memory 6015 need to be reproduced (or played),<br>
the storage controller 6014 reads the corresponding data stored in the third memory<br>
6015 and outputs the read data to the corresponding demultiplexer (e.g., the mobile<br>
service data are outputted to the demultiplexer 6003 shown in FIG. 67). At this point,<br>
according to the embodiment of the present invention, since the storage capacity of the<br>
third memory 6015 is limited, the compression encoded mobile service data and/or<br>
main service data that are being inputted are directly stored in the third memory 60J5<br>
without any modification for the efficiency of the storage capacity. In this case,<br>
depending upon the reproduction (or reading) command, the data read from the third<br>
memory 6015 pass trough the demultiplexer so as to be inputted to the corresponding<br>
decoder, thereby being restored to the initial state.<br>
[592]            The storage controller 6014 may control the reproduction (or play), fast-forward,<br>
rewind, slow motion, instant replay functions of the data that are already stored in the<br>
third memory 6015 or presently being buffered. Herein, the instant replay function<br>
corresponds to repeatedly viewing scenes that the viewer (or user) wishes to view once<br>
again. The instant replay function may be performed on stored data and also on data<br>
that are currently being received in real time by associating the instant replay function<br>
with the time shift function. If the data being inputted correspond to the analog format,<br>
for example, if the transmission mode is NTSC, PAL, and so on, the storage controller<br>
6014 compression encodes the inputted data and stored the compression-encoded data<br>
to the third memory 6015. In order to do so. the storage controller 6014 may include an<br>
encoder, wherein the encoder may be embodied as one of software, middleware, and<br>
hardware. Herein, an MPEG encoder may be used as the encoder according to an<br>
embodiment of the present invention. The encoder may also be provided outside of the<br>
storage controller 6014.<br>
[593]            Meanwhile, in order to prevent illegal duplication (or copies) of the input data<br>
being stored in the third memory 6015, the storage controller 6014 scrambles (or<br>
encrypts) the input data and stores the scrambled (or encrypted) data in the third<br>
memory 6015. Accordingly, the storage controller 6014 may include a scramble<br>
algorithm (or encryption algorithm) for scrambling the data stored in the third memory<br>
6015 and a descramble algorithm (or decryption algorithm) for descrambling (or<br>
decrypting) the data read from the third memory 6015. The scrambling method may<br>
include using an arbitrary key (e.g., control word) to modify a desired set of data, and<br>
also a method of mixing signals.<br>
[594]            Meanwhile, the demultiplexer 6003 receives the real-time data outputted from the<br>
demodulating unit 6002 or the data read from the third memory 6015 and de-<br>
multiplexes the received data. In the example given in the present invention, the de-<br>
multiplexer 6003 performs demultiplexing on the mobile service data packet.<br>
Therefore, in the present invention, the receiving and processing of the mobile service<br>
data will be described in detail. However, depending upon the many embodiments of<br>
the present invention, not only the mobile service data but also the main service data<br>
may be processed by the demultiplexer 6003, the audio decoder 6004, the video<br>
decoder 6005, the native TV application manager 6006, the channel manager 6007, the<br>
channel map 6008, the first memory 6009, the SI and/or data decoder 6010, the second<br>
memory 6011, a system manager 6012, the data broadcast application manager 6013,<br>
the storage controller 6014, the third memory 6015, and the GPS module 6020.<br>
Thereafter, the processed data may be used to provide diverse services to the users.<br>
[595]            The demultiplexer 6003 demultiplexes mobile service data and system information<br>
(SI) tables from the mobile service data packet inputted in accordance with the control<br>
of the SI and/or data decoder 6010. Thereafter, the demultiplexed mobile service data<br>
and SI tables are outputted to the SI and/or data decoder 6010 in a section format. In<br>
this case, it is preferable that data for the data service are used as the mobile service<br>
data that are inputted to the SI and/or data decoder 6010. In order to extract the mobile<br>
service data from the channel through which mobile service data are transmitted and to<br>
decode the extracted mobile service data, system information is required. Such system<br>
information may also be referred to as service information. The system information<br>
may include channel information, event information, etc. In the embodiment of the<br>
present invention, the PS I/PS IP tables are applied as the system information. However,<br>
the present invention is not limited to the example set forth herein. More specifically,<br>
regardless of the name, any protocol transmitting system information in a table format<br>
may be applied in the present invention.<br>
[596]            The PSI table is an MPEG-2 system standard defined for identifying the channels<br>
and the programs. The PSIP table is an advanced television systems committee<br>
(ATSC) standard that can identify the channels and the programs. The PSI table may<br>
include a program association table (PAT), a conditional access table (CAT), a<br>
program map table (PMT), and a network information table (NIT). Herein, the PAT<br>
corresponds to special information that is transmitted by a data packet having a PID of<br>
'0'. The PAT transmits PID information of the PMT and PID information of the NIT<br>
corresponding to each program. The CAT transmits information on a paid broadcast<br>
system used by the transmitting system. The PMT transmits PID information of a<br>
transport stream (TS) packet, in which program identification numbers and individual<br>
bit sequences of video and audio data configuring the corresponding program are<br>
transmitted, and the PID information, in which PCR is transmitted. The NIT transmits<br>
information of the actual transmission network.<br>
[597]            The PSIP table may include a virtual channel table (VCT), a system time table<br>
(STT), a rating region table (RRT), an extended text table (ETT), a direct channel<br>
change table (DCCT), an event information table (EIT), and a master guide table<br>
(MGT). The VCT transmits information on virtual channels, such as channel in-<br>
formation for selecting channels and information such as packet identification (PID)<br>
numbers for receiving the audio and/or video data. More specifically, when the VCT is<br>
parsed, the PID of the audio/video data of the broadcast program may be known.<br>
Herein, the corresponding audio/video data are transmitted within the channel along<br>
with the channel name and the channel number.<br>
[598]            FIG. 68 illustrates a VCT syntax according to an embodiment of the present<br>
invention. The VCT syntax of FIG. 68 is configured by including at least one of a<br>
table_id field, a section_syntax_indicator field, a private_indicator field, a<br>
section_ength field, a transport_stream_id field, a version_number field, a<br>
current_nex_indicator field, a section_number field, a last_section_number field, a<br>
protocol_version field, and a num_channels_in_section field.<br>
[599]            The VCT syntax further includes a first 'for' loop repetition statement that is<br>
repeated as much as the num_channels_in_section field value. The first repetition<br>
statement may include at least one of a short_name field, a major_channel_number<br>
field, a minor_channel_number field, a modulation_mode field, a carrier_frequcncy<br>
field, a channel_TSID field, a program_number field, an ETM_location field, an<br>
access_controlled field, a hidden field, a service_type field, a source_id field, a<br>
descriptor_length field, and a second 'for' loop statement that is repeated as much as<br>
the number of descriptors included in the first repetition statement. Herein, the second<br>
repetition statement will be referred to as a first descriptor loop for simplicity. The<br>
descriptor descriptors() included in the first descriptor loop is separately applied to<br>
each virtual channel.<br>
[600]            Furthermore, the VCT syntax may further include an additional_descriptor_length<br>
field, and a third 'for' loop statement that is repeated as much as the number of de-<br>
scriptors additionally added to the VCT. For simplicity of the description of the present<br>
invention, the third repetition statement will be referred to as a second descriptor loop.<br>
The descriptor additional_descriptors() included in the second descriptor loop is<br>
commonly applied to all virtual channels described in the VCT.<br>
[601]            As described above, referring to FIG. 68, the table_id field indicates a unique<br>
identifier (or identification) (ID) that can identify the information being transmitted to<br>
the table as the VCT. More specifically, the table_id field indicates a value informing<br>
that the table corresponding to this section is a VCT. For example, a 0xC8 value may<br>
be given to the table_id field.<br>
[602]            The version_number field indicates the version number of the VCT. The<br>
section_number field indicates the number of this section. The last_section_number<br>
field indicates the number of the last section of a complete VCT. And, the<br>
num_channel_in_section field designates the number of the overall virtual channel<br>
existing within the VCT section. Furthermore, in the first 'for' loop repetition<br>
statement, the short_name field indicates the name of a virtual channel. The<br>
major_channel_number field indicates a 'major' channel number associated with the<br>
virtual channel defined within the first repetition statement, and the<br>
minor_channel_number field indicates a 'minor' channel number. More specifically,<br>
each of the channel numbers should be connected to the major and minor channel<br>
numbers, and the major and minor channel numbers are used as user reference<br>
numbers for the corresponding virtual channel.<br>
[603]            The program_number field is shown for connecting the virtual channel having an<br>
MPEG-2 program association table (PAT) and program map table (PMT) defined<br>
therein, and the program_number field matches the program number within the PAT/<br>
PMT. Herein, the PAT describes the elements of a program corresponding to each<br>
program number, and the PAT indicates the PID of a transport packet transmitting the<br>
PMT. The PMT described subordinate information, and a PID list of the transport<br>
packet through which a program identification number and a separate bit sequence,<br>
such as video and/or audio data configuring the program, are being transmitted.<br>
[604]            FIG. 69 illustrates a service_type field according to an embodiment of the present<br>
invention. The service_type field indicates the service type provided in a cor-<br>
responding virtual channel. Referring to FIG. 69, it is provided that the service_type<br>
field should only indicate an analog television, a digital television, digital audio data,<br>
and digital video data. Also, according to the embodiment of the present invention, it<br>
may be provided that a mobile broadcast program should be designated to the<br>
service_type field. The service_type field, which is parsed by the SI and/or data<br>
decoder 6010 may be provided to a receiving system, as shown in FIG. 67, and used<br>
accordingly. According to other embodiments of the present invention, the parsed<br>
service_type field may also be provided to each of the audio decoder 6004 and video<br>
decoder 6005, so as to be used in the decoding process.<br>
[605]            The source_id field indicates a program source connected to the corresponding<br>
virtual channel. Herein, a source refers to a specific source, such as an image, a text,<br>
video data, or sound. The source_id field value has a unique value within the transport<br>
stream transmitting the VCT. Meanwhile, a service location descriptor may be<br>
included in a descriptor loop (i.e., descriptor{}) within a next 'for' loop repetition<br>
statement. The service location descriptor may include a stream type, PID, and<br>
language code for each elementary stream.<br>
[606]            FIG. 70 illustrates a service location descriptor according to an embodiment of the<br>
present invention. As shown in FIG. 70, the service location descriptor may include a<br>
descriptor_tag field, a descriptor_length field, and a PCR_PID field. Herein, the<br>
PCR_PID field indicates the PID of a transport stream packet within a program<br>
specified by a program_number field, wherein the transport stream packet includes a<br>
valid PCR field. Meanwhile, the service location descriptor includes a<br>
number_elements field so as to indicate a number of PIDs used in the corresponding<br>
program. The number of repetition of a next 'for' descriptor loop repetition statement<br>
can be decided, depending upon the value of the number_elements field. Referring to<br>
FIG. 70, the 'for' loop repetition statement includes a stream_type field, an<br>
elementary_PID field, and an ISO_639_language_code field. Herein, the stream_type<br>
field indicates the stream type of the corresponding elementary stream (i.e., video/<br>
audio data). The elementary_PID field indicates the PID of the corresponding<br>
elementary stream. The ISO_639_language_code field indicates a language code of the<br>
corresponding elementary stream.<br>
[607]            FIG. 71 illustrates examples that may be assigned to the stream_type field<br>
according to the present invention. As shown in FIG. 71, ISO/IEC 11172 Video, ITU-<br>
T Rec. H.262 I ISO/IEC 13818-2 Video or ISO/IEC 11172-2 constrained parameter<br>
video stream, ISO/IEC 11172 Audio, ISO/IEC 13818-3 Audio, TTU-T Rec. H.222.0 I<br>
ISO/IEC 13818-1 private_sections, ITU-T Rec. H.222.0 I ISO/IEC 13818-1 PES<br>
packets containing private data, ISO/IEC 13522 MHEG, ITU-T Rec. H.222.0 I ISO/<br>
IEC 13818-1 Annex A DSM CC, ITU-T Rec. H.222.1, ISO/IEC 13818-6 type A, ISO/<br>
IEC 13818-6 type B. ISO/IEC 13818-6 type C ISO/IEC 13818-6 type D, ISO/IEC<br>
13818-1 auxiliary, and so on may be applied as the stream type. Meanwhile, according<br>
to the embodiment of the present invention, MPH? video stream : Non-hierarchical<br>
mode, MPH? audio stream : Non-hierarchical mode, MPH? Non-A/V stream : Non-<br>
hierarchical mode, MPH? High Priority video stream : Hierarchical mode, MPH? High<br>
Priority audio stream : Hierarchical mode, MPH? Low Priority video stream : Hi-<br>
erarchical mode, MPH? Low priority audio stream : Hierarchical mode, and so on may<br>
further be applied as the stream type.<br>
[608]            As described above, "MPH" corresponds to the initials of "mobile", "pedestrian",<br>
and "handheld" and represents the opposite concept of a fixed-type system. Therefore,<br>
the MPH? video stream : Non-hierarchical mode, the MPH? audio stream : Non-<br>
hierarchical mode, the MPH? Non-A/V stream : Non-hierarchical mode, the MPH?<br>
High Priority video stream : Hierarchical mode, the MPH? High Priority audio stream :<br>
Hierarchical mode, the MPH? Low Priority video stream : Hierarchical mode, and the<br>
MPH? Low priority audio stream : Hierarchical mode correspond to stream types that<br>
are applied when mobile broadcast programs are being transmitted and received. Also<br>
the Hierarchical mode and the Non-hierarchical mode each correspond to values that<br>
are used in stream types having different priority levels. Herein, the priority level is<br>
determined based upon a hierarchical structure applied in any one of the encoding or<br>
decoding method.<br>
[609]            Therefore, when a hierarchical structure-type codec is used, a field value including<br>
the hierarchical mode and the non-hierarchical mode is respectively designated so as to<br>
identify each stream. Such stream type information is parsed by the SI and/or data<br>
decoder 6010, so as to be provided to the video and audio decoders 6004 and 6005.<br>
Thereafter, each of the video and audio decoders 6004 and 6005 uses the parsed stream<br>
type information in order to perform the decoding process. Other stream types that may<br>
be applied in the present invention may include MPEG 4 AUDIO, AC 3, AAC, AAC+,<br>
BSAC, HE AAC, AAC SBR, and MPEG-S for the audio data, and may also include<br>
MPEG 2 VIDEO, MPEG 4 VIDEO, H.264, SVC, and VC-1 for the video data.<br>
[610]            Furthermore, referring to FIG. 71, in fields using the hierarchical mode and the<br>
non-hierarchical mode, such as the MPH? video stream : Non-hierarchical mode and<br>
the MPH? audio stream : Non-hierarchical mode, examples of using the MPEG 4<br>
AUDIO, AC 3, AAC, AAC+, BSAC, HE AAC, AAC SBR, and MPEG-S for the audio<br>
data, and the MPEG 2 VIDEO, MPEG 4 VIDEO, H.264, SVC, and VC-1 for the video<br>
data may also be respectively used as replacements for each of the audio stream and<br>
the video stream may be considered as other embodiments of the present invention and<br>
may, therefore, be included in the scope of the present invention. Meanwhile, the<br>
stream_type field may be provided as one of the fields within the PMT. And, in this<br>
case, it is apparent that such stream_type field includes the above-described syntax.<br>
The STT transmits information on the current data and timing information. The RRT<br>
transmits information on region and consultation organs for program ratings. The ETT<br>
transmits additional description of a specific channel and broadcast program. The EIT<br>
transmits information on virtual channel events (e.g., program title, program start time,<br>
etc.).<br>
[611]            FIG. 72 illustrates a bit stream syntax for an event information table (EIT)<br>
according to the present invention. In this embodiment, the EIT shown in FIG. 72<br>
corresponds to a PS1P table including information on a title, start time, duration, and so<br>
on of an event in a virtual channel. Referring to FIG. 72, the EIT is configured of a<br>
plurality of fields including a table_id field, a section_syntax_indicator field, a<br>
private_indicator field, a source_lD, a version_numbers_in_section field, a<br>
current_next_indicator field, and a num_event field. More specifically, the table_id<br>
field is an 8-bit field having the value of 'oxCB', which indicates that the cor-<br>
responding section is included in the EIT. The section_syntax_indicator field is a 1-bit<br>
field having the value of T. This indicates that the corresponding section passes<br>
through the section_length field and is in accordance with a generic section syntax.<br>
The private_indicator field corresponds to a 1-bit field having the value of ' 1'.<br>
[612]            Also, the source_ID corresponds to an ID identifying a virtual channel that carries<br>
an event shown in the above-described table. The version_numbers_in_section field<br>
indicates the version of an element included in the event information table. In the<br>
present invention, with respect to the previous version number, an event change in-<br>
formation included in the event information table, wherein the event change in-<br>
formation has a new version number is recognized as the latest change in information.<br>
The current_next_indicator field indicates whether the event information included in<br>
the corresponding EIT is a current information or a next information. And, finally, the<br>
num_event field represents the number of events included in the channel having a<br>
source ID. More specifically, an event loop shown below is repeated as many times as<br>
the number of events.<br>
[613]            The above-described EIT field is commonly applied to at least one or more events<br>
included in one EIT syntax. A loop statement, which is included as "for(j=0;j
num_event_in_section;j++){}", describes the characteristics of each event. The<br>
following fields represent detailed information of each individual event. Therefore, the<br>
following fields are individually applied to each corresponding event described by the<br>
EIT syntax. An event_ID included in an event loop is an identifier for identifying each<br>
individual event. The number of the event ID corresponds to a portion of the identifier<br>
for even extended text message (i.e., ETM_1D). A start_time field indicates the starting<br>
time of an event. Therefore, the start_time field collects the starting time information<br>
of a program provided from an electronic program information. A length_in_seconds<br>
field indicates the duration of an event. Therefore, the length_in_seconds field collects<br>
the ending time information of a program provided from an electronic program in-<br>
formation. More specifically, the ending time information is collected by adding the<br>
start_time field value and the length_in_secodns field value. A title_text() field may be<br>
used to indicate the tile of a broadcast program.<br>
[614]            Meanwhile, the descriptor applied to each event may be included in the E1T.<br>
Herein, a descriptors_length field indicates the length of a descriptor. Also, a<br>
descriptor loop (i.e., descriptor{}) included in a 'for' loop repetition statement includes<br>
at least one of an AC-3 audio descriptor, an MPEG 2 audio descriptor, an MPEG 4<br>
audio descriptor, an AAC descriptor, an AAC+ descriptor, an HE AAC descriptor, an<br>
AAC SBR? descriptor, an MPEG surround descriptor, a BSAC descriptor, an MPEG 2<br>
video descriptor, an MPEG 4 video descriptor, an H.264 descriptor, an SVC descriptor,<br>
and a VC-1 descriptor. Herein, each descriptor describes information on audio/video<br>
codec applied to each event. Such codec information may be provided to the audio/<br>
video decoder 6004 and 6005 and used in the decoding process.<br>
[615]            Finally, the DCCT/DCCSCT transmits information associated with automatic (or<br>
direct) channel change. And, the MGT transmits the versions and PID information of<br>
the above-mentioned tables included in the PSIP. Each of the above-described tables<br>
included in the PSI/PSIP is configured of a basic unit referred to as a "section", and a<br>
combination of one or more sections forms a table. For example, the VCT may be<br>
divided into 256 sections. Herein, one section may include a plurality of virtual<br>
channel information. However, a single set of virtual channel information is not<br>
divided into two or more sections. At this point, the receiving system may parse and<br>
decode the data for the data service that are transmitting by using only the tables<br>
included in the PSI, or only the tables included in the PSIP, or a combination of tables<br>
included in both the PSI and the PSIP. In order to parse and decode the mobile service<br>
data, at least one of the PAT and PMT included in the PSI, and the VCT included in<br>
the PSIP is required. For example, the PAT may include the system information for<br>
transmitting the mobile service data, and the PID of the PMT corresponding to the<br>
mobile service data (or program number). The PMT may include the PID of the TS<br>
packet used for transmitting the mobile service data. The VCT may include in-<br>
formation on the virtual channel for transmitting the mobile service data, and the PID<br>
of the TS packet for transmitting the mobile service data.<br>
[616]            Meanwhile, depending upon the embodiment of the present invention, a DVB-SI<br>
may be applied instead of the PSIP. The DVB-SI may include a network information<br>
table (NIT), a service description table (SDT), an event information table (EIT), and a<br>
time and data table (TDT). The DVB-SI may be used in combination with the above-<br>
described PSI. Herein, the NIT divides the services corresponding to particular<br>
network providers by specific groups. The NIT includes all tuning information that are<br>
used during the IRD set-up. The NIT may be used for informing or notifying any<br>
change in the tuning information. The SDT includes the service name and different<br>
parameters associated with each service corresponding to a particular MPEG<br>
multiplex. The EIT is used for transmitting information associated with all events<br>
occurring in the MPEG multiplex. The EIT includes information on the current<br>
transmission and also includes information selectively containing different<br>
transmission streams that may be received by the 1RD. And, the TDT is used for<br>
updating the clock included in the IRD.<br>
[617]            Furthermore, three selective SI tables (i.e., a bouquet associate table (BAT), a<br>
running status table (RST), and a stuffing table (ST)) may also be included. More<br>
specifically, the bouquet associate table (BAT) provides a service grouping method<br>
enabling the IRD to provide services to the viewers. Each specific service may belong<br>
to at least one 'bouquet' unit. A running status table (RST) section is used for promptly<br>
and instantly updating at least one event execution status. The execution status section<br>
is transmitted only once at the changing point of the event status. Other SI tables are<br>
generally transmitted several times. The stuffing table (ST) may be used for replacing<br>
or discarding a subsidiary table or the entire SI tables.<br>
[618]            In the present invention, when the mobile service data correspond to audio data<br>
and video data, it is preferable that the mobile service data included (or loaded) in a<br>
payload within a TS packet correspond to PES type mobile service data. According to<br>
another embodiment of the present invention, when the mobile service data correspond<br>
to the data for the data service (or data service data), the mobile service data included<br>
in the payload within the TS packet consist of a digital storage media-command and<br>
control (DSM-CC) section format. However, the TS packet including the data service<br>
data may correspond either to a packetized elementary stream (PES) type or to a<br>
section type. More specifically, either the PES type data service data configure the TS<br>
packet, or the section type data service data configure the TS packet. The TS packet<br>
configured of the section type data will be given as the example of the present<br>
invention. At this point, the data service data are includes in the digital storage media-<br>
command and control (DSM-CC) section. Herein, the DSM-CC section is then<br>
configured of a 188-byte unit TS packet.<br>
[619]            Furthermore, the packet identification of the TS packet configuring the DSM-CC<br>
section is included in a data service table (DST). When transmitting the DST, '0x95' is<br>
assigned as the value of a stream_type field included in the service location descriptor<br>
of the PMT or the VCT. More specifically, when the PMT or VCT streamjype field<br>
value is '0x95', the receiving system may acknowledge the reception of the data<br>
broadcast program including mobile service data. At this point, the mobile service data<br>
may be transmitted by a data/object carousel method. The data/object carousel method<br>
corresponds to repeatedly transmitting identical data on a regular basis.<br>
[620]           At this point, according to the control of the SI and/or data decoder 6010, the de-<br>
multiplexer 6003 performs section filtering, thereby discarding repetitive sections and<br>
outputting only the non-repetitive sections to the SI and/or data decoder 6010. The de-<br>
multiplexer 6003 may also output only the sections configuring desired tables (e.g.,<br>
VCT or E1T) to the SI and/or data decoder 6010 by section filtering. Herein, the VCT<br>
or E1T may include a specific descriptor for the mobile service data. However, the<br>
present invention does not exclude the possibilities of the mobile service data being<br>
included in other tables, such as the PMT. The section filtering method may include a<br>
method of verifying the PID of a table defined by the MGT, such as the VCT, prior to<br>
performing the section filtering process. Alternatively, the section filtering method<br>
may also include a method of directly performing the section filtering process without<br>
verifying the MGT, when the VCT includes a fixed PID (i.e., a base PID). At this<br>
point, the demultiplexer 6003 performs the section filtering process by referring to a<br>
table_id field, a version_number field, a section_number field, etc.<br>
[621]           As described above, the method of defining the PID of the VCT broadly includes<br>
two different methods. Herein, the PID of the VCT is a packet identifier required for<br>
identifying the VCT from other tables. The first method consists of setting the PID of<br>
the VCT so that it is dependent to the MGT. In this case, the receiving system cannot<br>
directly verify the VCT among the many PSI and/or PSIP tables. Instead, the receiving<br>
system must check the PID defined in the MGT in order to read the VCT. Herein, the<br>
MGT defines the PID, size, version number, and so on, of diverse tables. The second<br>
method consists of setting the PID of the VCT so that the PID is given a base PID<br>
value (or a fixed PID value), thereby being independent from the MGT. In this case,<br>
unlike in the first method, the VCT according to the present invention may be<br>
identified without having to verify every single PID included in the MGT. Evidently,<br>
an agreement on the base PID must be previously made between the transmitting<br>
system and the receiving system.<br>
[622]           Meanwhile, in the embodiment of the present invention, the demultiplexer 6003<br>
may output only an application information table (AIT) to the SI and/or data decoder<br>
6010 by section filtering. The AIT includes information on an application being oper<br>
ated in the receiver for the data service. The AIT may also be referred to as an XAIT,<br>
and an AMT. Therefore, any table including application information may correspond<br>
to the following description. When the AIT is transmitted, a value of '0x05' may be<br>
assigned to a stream_type field of the PMT. The AIT may include application in-<br>
formation, such as application name, application version, application priority, ap-<br>
plication ID, application status (i.e., auto-start, user-specific settings, kill, etc.). ap-<br>
plication type (i.e., Java or HTML), position (or location) of stream including ap-<br>
plication class and data files, application platform directory, and location of application<br>
icon.<br>
[623]            In the method for detecting application information for the data service by using<br>
the AIT, component_tag, original_network_id, transportstream_id, and service_id<br>
fields may be used for detecting the application information. The component_tag field<br>
designates an elementary stream carrying a DSI of a corresponding object carousel.<br>
The original_network_id field indicates a DVB-SI original_network_id of the TS<br>
providing transport connection. The transport_stream_id field indicates the MPEG TS<br>
of the TS providing transport connection, and the service_id field indicates the DVB-<br>
SI of the service providing transport connection. Information on a specific channel<br>
may be obtained by using the original_network_id field, the transport_stream_id field,<br>
and the service_id field. The data service data, such as the application data, detected by<br>
using the above-described method may be stored in the second memory 6011 by the SI<br>
and/or data decoder 6010.<br>
[624]            The SI and/or data decoder 6010 parses the DSM-CC section configuring the de-<br>
multiplexed mobile service data. Then, the mobile service data corresponding to the<br>
parsed result are stored as a database in the second memory 6011. The SI and/or data<br>
decoder 6010 groups a plurality of sections having the same table identification<br>
(table_id) so as to configure a table, which is then parsed. Thereafter, the parsed result<br>
is stored as a database in the second memory 6011. At this point, by parsing data and/<br>
or sections, the SI and/or data decoder 6010 reads all of the remaining actual section<br>
data that are not section-filtered by the demultiplexer 6003. Then, the SI and/or data<br>
decoder 6010 stores the read data to the second memory 6011. The second memory<br>
6011 corresponds to a table and data/object carousel database storing system in-<br>
formation parsed from tables and mobile service data parsed from the DSM-CC<br>
section. Herein, a table_id field, a section_number field, and a last_section_number<br>
field included in the table may be used to indicate whether the corresponding table is<br>
configured of a single section or a plurality of sections. For example, TS packets<br>
having the PID of the VCT are grouped to form a section, and sections having table<br>
identifiers allocated to the VCT are grouped to form the VCT. When the VCT is<br>
parsed, information on the virtual channel to which mobile service data are transmitted<br>
may be obtained.<br>
[625]            Also, according to the present invention, the SI and/or data decoder 6010 parses<br>
the SLD of the VCT, thereby transmitting the stream type information of the cor-<br>
responding elementary stream to the audio decoder 6004 or the video decoder 6005. In<br>
this case, the corresponding audio decoder 6004 or video decoder 6005 uses the<br>
transmitted stream type information so as to perform the audio or video decoding<br>
process. Furthermore, according to the present invention, the SI and/or data decoder<br>
6010 parses an AC-3 audio descriptor, an MPEG 2 audio descriptor, an MPEG 4 audio<br>
descriptor, an AAC descriptor, an AAC+ descriptor, an HE AAC descriptor, an AAC<br>
SBR? descriptor, an MPEG surround descriptor, a BSAC descriptor, an MPEG 2 video<br>
descriptor, an MPEG 4 video descriptor, an H.264 descriptor, an SVC descriptor, a<br>
VC-1 descriptor, and so on, of the EIT, thereby transmitting the audio or video codec<br>
information of the corresponding event to the audio decoder 6004 or video decoder<br>
6005. In this case, the corresponding audio decoder 6004 or video decoder 6005 uses<br>
the transmitted audio or video codec information in order to perform an audio or video<br>
decoding process.<br>
[626]            The obtained application identification information, service component iden-<br>
tification information, and service information corresponding to the data service may<br>
either be stored in the second memory 6011 or be outputted to the data broadcasting<br>
application manager 6013. In addition, reference may be made to the application iden-<br>
tification information, service component identification information, and service in-<br>
formation in order to decode the data service data. Alternatively, such information may<br>
also prepare the operation of the application program for the data service. Furthermore,<br>
the SI and/or data decoder 6010 controls the demultiplexing of the system information<br>
table, which corresponds to the information table associated with the channel and<br>
events. Thereafter, an A/V PID list may be transmitted to the channel manager 6007.<br>
[627]            The channel manager 6007 may refer to the channel map 6008 in order to transmit<br>
a request for receiving system-related information data to the SI and/or data decoder<br>
6010, thereby receiving the corresponding result. In addition, the channel manager<br>
6007 may also control the channel tuning of the tuner 6001. Furthermore, the channel<br>
manager 6007 may directly control the demultiplexer 6003, so as to set up the A/V<br>
PID, thereby controlling the audio decoder 6004 and the video decoder 6005.<br>
[628]             The audio decoder 6004 and the video decoder 6005 may respectively decode and<br>
output the audio data and video data demultiplexed from the main service data packet.<br>
Alternatively, the audio decoder 6004 and the video decoder 6005 may respectively<br>
decode and output the audio data and video data demultiplexed from the mobile<br>
service data packet. Meanwhile, when the mobile service data include data service<br>
data, and also audio data and video data, it is apparent that the audio data and video<br>
data demultiplexed by the demultiplexer 6003 are respectively decoded by the audio<br>
decoder 6004 and the video decoder 6005. For example, an audio-coding (AC)-3<br>
decoding algorithm, an MPEG-2 audio decoding algorithm, an MPEG-4 audio<br>
decoding algorithm, an AAC decoding algorithm, an AAC+ decoding algorithm, an<br>
HE AAC decoding algorithm, an AAC SBR decoding algorithm, an MPEG surround<br>
decoding algorithm, and a BSAC decoding algorithm may be applied to the audio<br>
decoder 6004. Also, an MPEG-2 video decoding algorithm, an MPEG-4 video<br>
decoding algorithm, an H.264 decoding algorithm, an SVC decoding algorithm, and a<br>
VC-1 decoding algorithm may be applied to the video decoder 6005. Accordingly, the<br>
decoding process may be performed.<br>
[629]            Meanwhile, the native TV application manager 6006 operates a native application<br>
program stored in the first memory 6009, thereby performing general functions such as<br>
channel change. The native application program refers to software stored in the<br>
receiving system upon shipping of the product. More specifically, when a user request<br>
(or command) is transmitted to the receiving system through a user interface (UI), the<br>
native TV application manger 6006 displays the user request on a screen through a<br>
graphic user interface (GUI), thereby responding to the user's request. The user<br>
interface receives the user request through an input device, such as a remote controller,<br>
a key pad, a jog controller, an a touch-screen provided on the screen, and then outputs<br>
the received user request to the native TV application manager 6006 and the data<br>
broadcasting application manager 6013. Furthermore, the native TV application<br>
manager 6006 controls the channel manager 6007, thereby controlling channel-<br>
associated operations, such as the management of the channel map 6008, and<br>
controlling the SI and/or data decoder 6010. The native TV application manager 6006<br>
also controls the GUI of the overall receiving system, thereby storing the user request<br>
and status of the receiving system in the first memory 6009 and restoring the stored in-<br>
formation.<br>
[630]            The channel manager 6007 controls the tuner 6001 and the SI and/or data decoder<br>
6010, so as to managing the channel map 6008 so that it can respond to the channel<br>
request made by the user. More specifically, channel manager 6007 sends a request to<br>
the SI and/or data decoder 6010 so that the tables associated with the channels that are<br>
to be tuned are parsed. The results of the parsed tables are reported to the channel<br>
manager 6007 by the SI and/or data decoder 6010. Thereafter, based on the parsed<br>
results, the channel manager 6007 updates the channel map 6008 and sets up a PID in<br>
the demultiplexer 6003 for demultiplexing the tables associated with the data service<br>
data from the mobile service data.<br>
[631]            The system manager 6012 controls the booting of the receiving system by turning<br>
the power on or off. Then, the system manager 6012 stores ROM images (including<br>
downloaded software images) in the first memory 6009. More specifically, the first<br>
memory 6009 stores management programs such as operating system (OS) programs<br>
required for managing the receiving system and also application program executing<br>
data service functions. The application program is a program processing the data<br>
service data stored in the second memory 6011 so as to provide the user with the data<br>
service. If the data service data are stored in the second memory 601 1, the cor-<br>
responding data service data are processed by the above-described application program<br>
or by other application programs, thereby being provided to the user. The management<br>
program and application program stored in the first memory 6009 may be updated or<br>
corrected to a newly downloaded program. Furthermore, the storage of the stored<br>
management program and application program is maintained without being deleted<br>
even if the power of the system is shut down. Therefore, when the power is supplied,<br>
the programs may be executed without having to be newly downloaded once again.<br>
[632]            The application program for providing data service according to the present<br>
invention may either be initially stored in the first memory 6009 upon the shipping of<br>
the receiving system, or be stored in the first memory 6009 after being downloaded.<br>
The application program for the data service (i.e., the data service providing ap-<br>
plication program) stored in the first memory 6009 may also be deleted, updated, and<br>
corrected. Furthermore, the data service providing application program may be<br>
downloaded and executed along with the data service data each time the data service<br>
data are being received.<br>
[633]            When a data service request is transmitted through the user interface, the data<br>
broadcasting application manager 6013 operates the corresponding application<br>
program stored in the first memory 6009 so as to process the requested data, thereby<br>
providing the user with the requested data service. And, in order to provide such data<br>
service, the data broadcasting application manager 6013 supports the graphic user<br>
interface (GUI). Herein, the data service may be provided in the form of text (or short<br>
message service (SMS)), voice message, still image, and moving image. The data<br>
broadcasting application manager 6013 may be provided with a platform for executing<br>
the application program stored in the first memory 6009. The platform may be, for<br>
example, a Java virtual machine for executing the Java program. Hereinafter, an<br>
example of the data broadcasting application manager 6013 executing the data service<br>
providing application program stored in the first memory 6009, so as to process the<br>
data service data stored in the second memory 6011, thereby providing the user with<br>
the corresponding data service will now be described in detail.<br>
[634]            Assuming that the data service corresponds to a traffic information service, the<br>
data service according to the present invention is provided to the user of a receiver that<br>
is not equipped with an electronic map and/or a GPS system in the form of at least one<br>
of a text (or short message service (SMS)), a voice message, a graphic message, a still<br>
image, and a moving image. In this case, when a GPS module 6020 is mounted on the<br>
receiving system, as shown in FIG. 67, the GPS module 6020 receives satellite signals<br>
transmitted from a plurality of low earth orbit satellites and extracts the current<br>
position (or location) information (e.g., longitude, latitude, altitude), thereby outputting<br>
the extracted information to the data broadcasting application manager 6013.<br>
[635]            At this point, it is assumed that the electronic map including information on each<br>
link and nod and other diverse graphic information are stored in one of the second<br>
memory 6011, the first memory 6009, and another memory that is not shown. More<br>
specifically, according to the request made by the data broadcasting application<br>
manager 6013, the data service data stored in the second memory 6011 are read and<br>
inputted to the data broadcasting application manager 6013. The data broadcasting ap-<br>
plication manager 6013 translates (or deciphers) the data service data read from the<br>
second memory 6011, thereby extracting the necessary information according to the<br>
contents of the message and/or a control signal. In other words, the data broadcasting<br>
application manager 6013 uses the current position information and the graphic in-<br>
formation, so that the current position information can be processed and provided to<br>
the user in a graphic format.<br>
[636]            FIG. 73 illustrates a block diagram showing the structure of a digital broadcast (or<br>
television) receiving system according to another embodiment of the present invention.<br>
Referring to FIG. 73, the digital broadcast receiving system includes a tuner 7001, a<br>
demodulating unit 7002, a demultiplexer 7003, a first descrambler 7004, an audio<br>
decoder 7005, a video decoder 7006, a second descrambler 7007, an authentication<br>
unit 7008, a native TV application manager 7009, a channel manager 7010, a channel<br>
map 7011, a first memory 7012, a data decoder 7013, a second memory 7014, a system<br>
manager 7015, a data broadcasting application manager 7016, a storage controller<br>
7017, a third memory 7018, a telecommunication module 7019, and a GPS module<br>
7020. Herein, the third memory 7018 is a mass storage device, such as a hard disk<br>
drive (HDD) or a memory chip. Also, during the description of the digital broadcast (or<br>
television or DTV) receiving system shown in FIG. 73, the components that are<br>
identical to those of the digital broadcast receiving system of FIG. 67 will be omitted<br>
for simplicity.<br>
[637]            As described above, in order to provide services for preventing illegal duplication<br>
(or copies) or illegal viewing of the enhanced data and/or main data that are<br>
transmitted by using a broadcast network, and to provide paid broadcast services, the<br>
transmitting system may generally scramble and transmit the broadcast contents.<br>
Therefore, the receiving system needs to descramble the scrambled broadcast contents<br>
in order to provide the user with the proper broadcast contents. Furthermore, the<br>
receiving system may generally be processed with an authentication process with an<br>
authentication means before the descrambling process. Hereinafter, the receiving<br>
system including an authentication means and a descrambling means according to an<br>
embodiment of the present invention will now be described in detail.<br>
[638]            According to the present invention, the receiving system may be provided with a<br>
descrambling means receiving scrambled broadcasting contents and an authentication<br>
means authenticating (or verifying) whether the receiving system is entitled to receive<br>
the descrambled contents. Hereinafter, the descrambling means will be referred to as<br>
first and second descramblers 7004 and 7007, and the authentication means will be<br>
referred to as an authentication unit 7008. Such naming of the corresponding<br>
components is merely exemplary and is not limited to the terms suggested in the de-<br>
scription of the present invention. For example, the units may also be referred to as a<br>
decryptor. Although FIG. 73 illustrates an example of the descramblers 7004 and 7007<br>
and the authentication unit 7008 being provided inside the receiving system, each of<br>
the descramblers 7004 and 7007 and the authentication unit 7008 may also be<br>
separately provided in an internal or external module. Herein, the module may include<br>
a slot type, such as a SD or CF memory, a memory stick type, a USB type, and so on,<br>
and may be detachably fixed to the receiving system.<br>
[639J            As described above, when the authentication process is performed successfully by<br>
the authentication unit 7008, the scrambled broadcasting contents are descrambled by<br>
the descramblers 7004 and 7007, thereby being provided to the user. At this point, a<br>
variety of the authentication method and descrambling method may be used herein.<br>
However, an agreement on each corresponding method should be made between the<br>
receiving system and the transmitting system. Hereinafter, the authentication and de-<br>
scrambling methods will now be described, and the description of identical<br>
components or process steps will be omitted for simplicity.<br>
[640]            The receiving system including the authentication unit 7008 and the descramblers<br>
7004 and 7007 will now be described in detail. The receiving system receives the<br>
scrambled broadcasting contents through the tuner 7001 and the demodulating unit<br>
7002. Then, the system manager 7015 decides whether the received broadcasting<br>
contents have been scrambled. Herein, the demodulating unit 7002 may be included as<br>
a demodulating means according to embodiment of the present invention as described<br>
in FIG. 38 to FIG. 66. However, the present invention is not limited to the examples<br>
given in the description set forth herein. If the system manager 7015 decides that the<br>
received broadcasting contents have been scrambled, then the system manager 7015<br>
controls the system to operate the authentication unit 7008. As described above, the au-<br>
thentication unit 7008 performs an authentication process in order to decide whether<br>
the receiving system according to the present invention corresponds to a legitimate<br>
host entitled to receive the paid broadcasting service. Herein, the authentication<br>
process may vary in accordance with the authentication methods.<br>
[641]            For example, the authentication unit 7008 may perform the authentication process<br>
by comparing an IP address of an IP datagram within the received broadcasting<br>
contents with a specific address of a corresponding host. At this point, the specific<br>
address of the corresponding receiving system (or host) may be a MAC address. More<br>
specifically, the authentication unit 7008 may extract the IP address from the de-<br>
capsulated IP datagram, thereby obtaining the receiving system information that is<br>
mapped with the IP address. At this point, the receiving system should be provided, in<br>
advance, with information (e.g., a table format) that can map the IP address and the<br>
receiving system information. Accordingly, the authentication unit 7008 performs the<br>
authentication process by determining the conformity between the address of the cor-<br>
responding receiving system and the system information of the receiving system that is<br>
mapped with the IP address. In other words, if the authentication unit 7008 determines<br>
that the two types of information conform to one another, then the authentication unit<br>
7008 determines that the receiving system is entitled to receive the corresponding<br>
broadcasting contents.<br>
[642]            In another example, standardized identification information is defined in advance<br>
by the receiving system and the transmitting system. Then, the identification in-<br>
formation of the receiving system requesting the paid broadcasting service is<br>
transmitted by the transmitting system. Thereafter, the receiving system determines<br>
whether the received identification information conforms with its own unique iden-<br>
tification number, so as to perform the authentication process. More specifically, the<br>
transmitting system creates a database for storing the identification information (or<br>
number) of the receiving system requesting the paid broadcasting service. Then, if the<br>
corresponding broadcasting contents are scrambled, the transmitting system includes<br>
the identification information in the EMM, which is then transmitted to the receiving<br>
system.<br>
[643]            If the corresponding broadcasting contents are scrambled, messages (e.g., en-<br>
titlement control message (ECM), entitlement management message (EMM)), such as<br>
the CAS information, mode information, message position information, that are<br>
applied to the scrambling of the broadcasting contents are transmitted through a cor-<br>
responding data header or anther data packet. The ECM may include a control word<br>
(CW) used for scrambling the broadcasting contents. At this point, the control word<br>
may be encoded with an authentication key. The EMM may include an authentication<br>
key and entitlement information of the corresponding data. Herein, the authentication<br>
key may be encoded with a receiving system-specific distribution key. In other words,<br>
assuming that the enhanced data are scrambled by using the control word, and that the<br>
authentication information and the descrambling information are transmitted from the<br>
transmitting system, the transmitting system encodes the CW with the authentication<br>
key and, then, includes the encoded CW in the entitlement control message (ECM),<br>
which is then transmitted to the receiving system. Furthermore, the transmitting system<br>
includes the authentication key used for encoding the CW and the entitlement to<br>
receive data (or services) of the receiving system (i.e.. a standardized serial number of<br>
the receiving system that is entitled to receive the corresponding broadcasting service<br>
or data) in the entitlement management message (EMM), which is then transmitted to<br>
the receiving system.<br>
[644]            Accordingly, the authentication unit 7008 of the receiving system extracts the<br>
identification information of the receiving system and the identification information<br>
included in the EMM of the broadcasting service that is being received. Then, the au-<br>
thentication unit 7008 determines whether the identification information conform to<br>
each other, so as to perform the authentication process. More specifically, if the au-<br>
thentication unit 7008 determines that the information conform to each other, then the<br>
authentication unit 7008 eventually determines that the receiving system is entitled to<br>
receive the request broadcasting service.<br>
[645]            In yet another example, the authentication unit 7008 of the receiving system may<br>
be detachably fixed to an external module. In this case, the receiving system is<br>
interfaced with the external module through a common interface (CI). In other words,<br>
the external module may receive the data scrambled by the receiving system through<br>
the common interface, thereby performing the descrambling process of the received<br>
data. Alternatively, the external module may also transmit only the information<br>
required for the descrambling process to the receiving system. The common interface<br>
is configured on a physical layer and at least one protocol layer. Herein, in con-<br>
sideration of any possible expansion of the protocol layer in a later process, the cor-<br>
responding protocol layer may be configured to have at least one layer that can each<br>
provide an independent function.<br>
[646]            The external module may either consist of a memory or card having information<br>
on the key used for the scrambling process and other authentication information but<br>
not including any descrambling function, or consist of a card having the above-<br>
mentioned key information and authentication information and including the de-<br>
scrambling function. Both the receiving system and the external module should be au-<br>
thenticated in order to provide the user with the paid broadcasting service provided (or<br>
transmitted) from the transmitting system. Therefore, the transmitting system can only<br>
provide the corresponding paid broadcasting service to the authenticated pair of<br>
receiving system and external module.<br>
[647]            Additionally, an authentication process should also be performed between the<br>
receiving system and the external module through the common interface. More<br>
specifically, the module may communicate with the system manager 7015 included in<br>
the receiving system through the common interface, thereby authenticating the<br>
receiving system. Alternatively, the receiving system may authenticate the module<br>
through the common interface. Furthermore, during the authentication process, the<br>
module may extract the unique ID of the receiving system and its own unique ID and<br>
transmit the extracted IDs to the transmitting system. Thus, the transmitting system<br>
may use the transmitted ID values as information determining whether to start the<br>
requested service or as payment information. Whenever necessary, the system manager<br>
7015 transmits the payment information to the remote transmitting system through the<br>
telecommunication module 7019.<br>
[648]            The authentication unit 7008 authenticates the corresponding receiving system<br>
and/or the external module. Then, if the authentication process is successfully<br>
completed, the authentication unit 7008 certifies the corresponding receiving system<br>
and/or the external module as a legitimate system and/or module entitled to receive the<br>
requested paid broadcasting service. In addition, the authentication unit 7008 may also<br>
receive authentication-associated information from a mobile telecommunications<br>
service provider to which the user of the receiving system is subscribed, instead of the<br>
transmitting system providing the requested broadcasting service. Tn this case, the au-<br>
thentication-association information may either be scrambled by the transmitting<br>
system providing the broadcasting service and, then, transmitted to the user through the<br>
mobile telecommunications service provider, or be directly scrambled and transmitted<br>
by the mobile telecommunications service provider. Once the authentication process is<br>
successfully completed by the authentication unit 7008, the receiving system may<br>
descramble the scrambled broadcasting contents received from the transmitting system.<br>
At this point, the descrambling process is performed by the first and second de-<br>
scramblers 7004 and 7007. Herein, the first and second descramblers 7004 and 7007<br>
may be included in an internal module or an external module of the receiving system.<br>
[649]            The receiving system is also provided with a common interface for communicating<br>
with the external module including the first and second descramblers 7004 and 7007,<br>
so as to perform the descrambling process. More specifically, the first and second de-<br>
scramblers 7004 and 7007 may be included in the module or in the receiving system in<br>
the form of hardware, middleware or software. Herein, the descramblers 7004 and<br>
7007 may be included in any one of or both of the module and the receiving system. If<br>
the first and second descramblers 7004 and 7007 are provided inside the receiving<br>
system, it is advantageous to have the transmitting system (i.e., at least any one of a<br>
service provider and a broadcast station) scramble the corresponding data using the<br>
same scrambling method.<br>
[650]            Alternatively, if the first and second descramblers 7004 and 7007 are provided in<br>
the external module, it is advantageous to have each transmitting system scramble the<br>
corresponding data using different scrambling methods. In this case, the receiving<br>
system is not required to be provided with the descrambling algorithm corresponding<br>
to each transmitting system. Therefore, the structure and size of receiving system may<br>
be simplified and more compact. Accordingly, in this case, the external module itself<br>
may be able to provide CA functions, which arc uniquely and only provided by each<br>
transmitting systems, and functions related to each service that is to be provided to the<br>
user. The common interface enables the various external modules and the system<br>
manager 7015, which is included in the receiving system, to communicate with one<br>
another by a single communication method. Furthermore, since the receiving system<br>
may be operated by being connected with at least one or more modules providing<br>
different services, the receiving system may be connected to a plurality of modules and<br>
controllers.<br>
[651]            In order to maintain successful communication between the receiving system and<br>
the external module, the common interface protocol includes a function of periodically<br>
checking the status of the opposite correspondent. By using this function, the receiving<br>
system and the external module is capable of managing the status of each opposite cor-<br>
respondent. This function also reports the user or the transmitting system of any<br>
malfunction that may occur in any one of the receiving system and the external module<br>
and attempts the recovery of the malfunction.<br>
[652]            In yet another example, the authentication process may be performed through<br>
software. More specifically, when a memory card having CAS software downloaded,<br>
for example, and stored therein in advanced is inserted in the receiving system, the<br>
receiving system receives and loads the CAS software from the memory card so as to<br>
perform the authentication process. In this example, the CAS software is read out from<br>
the memory card and stored in the first memory 7012 of the receiving system.<br>
Thereafter, the CAS software is operated in the receiving system as an application<br>
program. According to an embodiment of the present invention, the CAS software is<br>
mounted on (or stored) in a middleware platform and, then executed. A Java<br>
middleware will be given as an example of the middleware included in the present<br>
invention. Herein, the CAS software should at least include information required for<br>
the authentication process and also information required for the descrambling process.<br>
[653]            Therefore, the authentication unit 7008 performs authentication processes between<br>
the transmitting system and the receiving system and also between the receiving<br>
system and the memory card. At this point, as described above, the memory card<br>
should be entitled to receive the corresponding data and should include information on<br>
a normal receiving system that can be authenticated. For example, information on the<br>
receiving system may include a unique number, such as a standardized serial number<br>
of the corresponding receiving system. Accordingly, the authentication unit 7008<br>
compares the standardized serial number included in the memory card with the unique<br>
information of the receiving system, thereby performing the authentication process<br>
between the receiving system and the memory card.<br>
[654]            If the CAS software is first executed in the Java middleware base, then the au-<br>
thentication between the receiving system and the memory card is performed. For<br>
example, when the unique number of the receiving system stored in the memory card<br>
conforms to the unique number of the receiving system read from the system manager<br>
7015, then the memory card is verified and determined to be a normal memory card<br>
that may be used in the receiving system. At this point, the CAS software may either<br>
be installed in the first memory 7012 upon the shipping of the present invention, or be<br>
downloaded to the first memory 7012 from the transmitting system or the module or<br>
memory card, as described above. Herein, the descrambling function may be operated<br>
by the data broadcasting application manger 7016 as an application program.<br>
[655]            Thereafter, the CAS software parses the EMM/ECM packets outputted from the<br>
demultiplexer 7003, so as to verify whether the receiving system is entitled to receive<br>
the corresponding data, thereby obtaining the information required for descrambling<br>
(i.e., the CW) and providing the obtained CW to the descramblers 7004 and 7007.<br>
More specifically, the CAS software operating in the Java middleware platform first<br>
reads out the unique (or serial) number of the receiving system from the corresponding<br>
receiving system and compares it with the unique number of the receiving system<br>
transmitted through the EMM, thereby verifying whether the receiving system is<br>
entitled to receive the corresponding data. Once the receiving entitlement of the<br>
receiving system is verified, the corresponding broadcasting service information<br>
transmitted to the ECM and the entitlement of receiving the corresponding<br>
broadcasting service are used to verify whether the receiving system is entitled to<br>
receive the corresponding broadcasting service. Once the receiving system is verified<br>
to be entitled to receive the corresponding broadcasting service, the authentication key<br>
transmitted to the EMM is used to decode (or decipher) the encoded CW, which is<br>
transmitted to the ECM, thereby transmitting the decoded CW to the descramblers<br>
7004 and 7007. Each of the descramblers 7004 and 7007 uses the CW to descramble<br>
the broadcasting service.<br>
[656]            Meanwhile, the CAS software stored in the memory card may be expanded in<br>
accordance with the paid service which the broadcast station is to provide. Ad-<br>
ditionally, the CAS software may also include other additional information other than<br>
the information associated with the authentication and descrambling. Furthermore, the<br>
receiving system may download the CAS software from the transmitting system so as<br>
to upgrade (or update) the CAS software originally stored in the memory card. As<br>
described above, regardless of the type of broadcast receiving system, as long as an<br>
external memory interface is provided, the present invention may embody a CAS<br>
system that can meet the requirements of all types of memory card that may be<br>
detachably fixed to the receiving system. Thus, the present invention may realize<br>
maximum performance of the receiving system with minimum fabrication cost,<br>
wherein the receiving system may receive paid broadcasting contents such as broadcast<br>
programs, thereby acknowledging and regarding the variety of the receiving system.<br>
Moreover, since only the minimum application program interface is required to be<br>
embodied in the embodiment of the present invention, the fabrication cost may be<br>
minimized, thereby eliminating the manufacturer's dependence on CAS manufacturers.<br>
Accordingly, fabrication costs of CAS equipments and management systems may also<br>
be minimized.<br>
[657]            Meanwhile, the descramblers 7004 and 7007 may be included in the module either<br>
in the form of hardware or in the form of software. In this case, the scrambled data that<br>
being received are descrambled by the module and then demodulated. Also, if the<br>
scrambled data that are being received are stored in the third memory 7018, the<br>
received data may be descrambled and then stored, or stored in the memory at the point<br>
of being received and then descrambled later on prior to being played (or reproduced).<br>
Thereafter, in case scramble/descramble algorithms are provided in the storage<br>
controller 7017, the storage controller 7017 scrambles the data that are being received<br>
once again and then stores the re-scrambled data to the third memory 7018.<br>
[658]            In yet another example, the descrambled broadcasting contents (transmission of<br>
which being restricted) are transmitted through the broadcasting network. Also, in-<br>
formation associated with the authentication and descrambling of data in order to<br>
disable the receiving restrictions of the corresponding data are transmitted and/or<br>
received through the telecommunications module 7019. Thus, the receiving system is<br>
able to perform reciprocal (or two-way) communication. The receiving system may<br>
either transmit data to the telecommunication module within the transmitting system or<br>
be provided with the data from the telecommunication module within the transmitting<br>
system. Herein, the data correspond to broadcasting data that are desired to be<br>
transmitted to or from the transmitting system, and also unique information (i.e., iden-<br>
tification information) such as a serial number of the receiving system or MAC<br>
address.<br>
[659]            The telecommunication module 7019 included in the receiving system provides a<br>
protocol required for performing reciprocal (or two-way) communication between the<br>
receiving system, which does not support the reciprocal communication function, and<br>
the telecommunication module included in the transmitting system. Furthermore, the<br>
receiving system configures a protocol data unit (PDU) using a tag-length-value (TLV)<br>
coding method including the data that are to be transmitted and the unique information<br>
(or ID information). Herein, the tag field includes indexing of the corresponding PDU.<br>
The length field includes the length of the value field. And, the value field includes the<br>
actual data that are to be transmitted and the unique number (e.g., identification<br>
number) of the receiving system.<br>
[660]            The receiving system may configure a platform that is equipped with the Java<br>
platform and that is operated after downloading the Java application of the transmitting<br>
system to the receiving system through the network. In this case, a structure of<br>
downloading the PDU including the tag field arbitrarily defined by the transmitting<br>
system from a storage means included in the receiving system and then transmitting<br>
the downloaded PDU to the telecommunication module 7019 may also be configured.<br>
Also, the PDU may be configured in the Java application of the receiving system and<br>
then outputted to the telecommunication module 7019. The PDU may also be<br>
configured by transmitting the tag value, the actual data that are to be transmitted, the<br>
unique information of the corresponding receiving system from the Java application<br>
and by performing the TLV coding process in the receiving system. This structure is<br>
advantageous in that the firmware of the receiving system is not required to be changed<br>
even if the data (or application) desired by the transmitting system is added.<br>
[661]            The telecommunication module within the transmitting system either transmits the<br>
PDU received from the receiving system through a wireless data network or configures<br>
the data received through the network into a PDU which is transmitted to the host. At<br>
this point, when configuring the PDU that is to be transmitted to the host, the telecom-<br>
munication module within the transmitting end may include unique information (e.g.,<br>
IP address) of the transmitting system which is located in a remote location. Ad-<br>
ditionally, in receiving and transmitting data through the wireless data network, the<br>
receiving system may be provided with a common interface, and also provided with a<br>
WAP, CDMA lx EV-DO, which can be connected through a mobile telecom-<br>
munication base station, such as CDMA and GSM, and also provided with a wireless<br>
LAN, mobile internet, WiBro, WiMax, which can be connected through an access<br>
point. The above-described receiving system corresponds to the system that is not<br>
equipped with a telecommunication function. However, a receiving system equipped<br>
with telecommunication function does not require the telecommunication module<br>
7019.<br>
[662]            The broadcasting data being transmitted and received through the above-described<br>
wireless data network may include data required for performing the function of<br>
limiting data reception. Meanwhile, the demultiplexer 7003 receives either the real-<br>
time data outputted from the demodulating unit 7002 or the data read from the third<br>
memory 7018, thereby performing demultiplexing. In this embodiment of the present<br>
invention, the demultiplexer 7003 performs demultiplexing on the enhanced data<br>
packet. Similar process steps have already been described earlier in the description of<br>
the present invention. Therefore, a detailed of the process of demultiplexing the<br>
enhanced data will be omitted for simplicity.<br>
[663]            The first descrambler 7004 receives the demultiplexed signals from the de-<br>
multiplexer 7003 and then dcscrambles the received signals. At this point, the first de-<br>
scrambler 7004 may receive the authentication result received from the authentication<br>
unit 7008 and other data required for the descrambling process, so as to perform the<br>
descrambling process. The audio decoder 7005 and the video decoder 7006 receive the<br>
signals descrambled by the first descrambler 7004, which are then decoded and<br>
outputted. Alternatively, if the first descrambler 7004 did not perform the de-<br>
scrambling process, then the audio decoder 7005 and the video decoder 7006 directly<br>
decode and output the received signals. In this case, the decoded signals are received<br>
and then descrambled by the second descrambler 7007 and processed accordingly.<br>
[664] While the present invention has been described and illustrated herein with reference<br>
to the preferred embodiments thereof, it will be apparent to those skilled in the art that<br>
various modifications and variations can be made therein without departing from the<br>
spirit and scope of the invention. Thus, it is intended that the present invention covers<br>
the modifications and variations of this invention that come within the scope of the<br>
appended claims and their equivalents.<br>
Mode for the Invention<br>
[665] Meanwhile, the mode for the embodiment of the present invention is described<br>
together with the 'best Mode' description.<br>
Industrial Applicability<br>
[666] The embodiments of the method for transmitting and receiving signals and the<br>
apparatus for transmitting and receiving signals according to the present invention can<br>
be used in the fields of broadcasting and communication.<br>
Claims<br>
[1]                    A receiving system comprising:<br>
a receiving unit for receiving a broadcast signal including mobile service data<br>
and main service data, the mobile service data configuring a RS frame, the RS<br>
frame including at least one data packet for the mobile service data, RS parity<br>
generated based on the at least one data packet, and CRC checksum generated<br>
based on the at least one data packet and the RS parity;<br>
a demodulator for converting RS frame data included in the broadcast signal<br>
received by the receiving unit into a baseband RS frame data;<br>
an equalizer for performing channel equalization on the data demodulated by the<br>
demodulator;<br>
a block decoder for performing symbol-decoding on the data channel-equalized<br>
by the equalizer in block units; and<br>
a RS frame decoder for performing CRC-decoding and RS-decoding on the<br>
decoded mobile service data in RS frame units, thereby correcting errors<br>
occurred in the mobile service data within the RS frame.<br>
[2]                    The receiving system of claim 1, wherein a data group configures a RS frame,<br>
wherein N number of known data sequences are inserted in some regions among<br>
a plurality of regions within the data group, and wherein a transmission<br>
parameter is inserted between a first known data sequence and a second known<br>
data sequence, among the N number of known data sequences.<br>
[3]                    The receiving system of claim 2, further comprising:<br>
a transmission parameter detector for detecting the transmission parameter; and<br>
a power controller for controlling power based upon the detected transmission<br>
parameter, thereby receiving a slot which a data group including requested<br>
mobile service data is assigned.<br>
[4]                    The receiving system of claim 2, further comprising:<br>
a known sequence detector for detecting the known data, wherein the equalizer<br>
channel-equalizes the mobile service data using the detected known data.<br>
[5]                    The receiving system of claim 2, wherein one RS frame data is assigned to at<br>
least some regions among a plurality of data group, the data group configuring a<br>
plurality of regions, and then the assigned RS frame data is received.<br>
[6]                    The receiving system of claim 2, wherein one RS frame data among a plurality of<br>
RS frame is assigned to some regions among a plurality of data group, the data<br>
group configuring a plurality of regions, and the other RS frame data is assigned<br>
to the remaining regions within the corresponding data group, and then the<br>
assigned RS frame data is received.<br>
[7]                  The receiving system of claim 2, wherein the multiplexing rule of the data group<br>
determines by the following Equation.<br>
SLOTi = ((4(i-1) + Oi) mod 16) + 1<br>
Herein, Oi = 0 if 1 = i = 4,<br>
Oi =2 else if i = 8,<br>
Oi= 1 else if i = 12,<br>
Oi =3 else.<br>
1= SLOT = 16, and 1 = i = TNOG.<br>
SLOT indicates a slot being assigned with an ith data group within a sub-frame,<br>
and TNOG represents a total number of data groups assigned to one sub-frame.<br>
[8]                  A method for processing data in a receiving system, comprising:<br>
receiving a broadcast signal including mobile service data and main service data,<br>
the mobile service data configuring a RS frame, the RS frame including at least<br>
one data packet for the mobile service data, RS parity generated based on the at<br>
least one data packet, and CRC checksum generated based on the at least one<br>
data packet and the RS parity;<br>
converting RS frame data included in the received broadcast signal into a<br>
baseband RS frame data;<br>
performing channel equalization on the demodulated data;<br>
performing symbol-decoding on the channel-equalized data in block units; and<br>
performing CRC-decoding and RS-decoding on the decoded mobile service data<br>
in RS frame units, thereby correcting errors occurred in the mobile service data<br>
within the RS frame.<br>
[9]                  The method of claim 8, wherein a data group configures a RS frame, wherein N<br>
number of known data sequences are inserted in some regions among a plurality<br>
of regions within the data group, and wherein a transmission parameter is<br>
inserted between a first known data sequence and a second known data sequence,<br>
among the N number of known data sequences.<br>
[10]                The method of claim 9, further comprising:<br>
detecting the transmission parameter; and<br>
controlling power based upon the detected transmission parameter, thereby<br>
receiving a slot which a data group including requested mobile service data is<br>
assigned.<br>
[11]                The method of claim 9, further comprising:<br>
detecting the known data, wherein the equalizing step channel-equalizes the<br>
mobile service data using the detected known data.<br>
[12]                The method of claim 9. wherein one RS frame data is assigned to at least some<br>
regions among a plurality of data group, the data group configuring a plurality of<br>
regions, and then the assigned RS frame data is received.<br>
[13]                The method of claim 9, wherein one RS frame data among a plurality of RS<br>
frame is assigned to some regions among a plurality of data group, the data group<br>
configuring a plurality of regions, and the other RS frame data is assigned to the<br>
remaining regions within the corresponding data group, and then the assigned RS<br>
frame data is received.<br>
[14]                The method of claim 9, wherein a multiplexing rule of the data group determines<br>
based upon the following Equation.<br>
SLOTi = ((4(i-1) + Oi) mod 16) + 1<br>
Herein, Oi = 0 if 1 = i = 4,<br>
Oi = 2 else if i = 8,<br>
Oi = 1 else if i = 12,<br>
Oi  = 3 else.<br>
1  = SLOTi = 16, and 1 = i = TNOG.<br>
SLOTi indicates a slot being assigned with an ith data group within a sub-frame,<br>
and TNOG represents a total number of data groups assigned to one sub-frame.<br><br>
A digital broadcasting system and a data processing method are disclosed. A receiving system of the digital broadcasting<br>
system includes a receiving unit, a demodulator, an equalizer, a block decoder, and a RS frame decoder. The receiving unit<br>
receives a broadcast signal including mobile service data and main service data. The mobile service data may configure a RS frame.<br>
The RS frame includes at least one data packet for the mobile service data. RS parity generated based on the at least one data packet,<br>
and CRC checksum generated based on the at least one data packet and the RS parity. The demodulator converts RS frame data<br>
included in the broadcast signal received by the receiving unit into a baseband RS frame data. The equalizer performs channel equalization<br>
on the data demodulated by the demodulator. The block decoder performs symbol-decoding on the data channel-equalized<br>
by the equalizer in block units. The RS frame decoder performs CRC-decoding and RS-decoding on the decoded mobile service<br>
data in RS frame units, thereby correcting errors occurred in the mobile service data within the RS frame.</td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=Y2cVSsdL5hndPAF2uWPSdQ==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==" target="_blank" style="word-wrap:break-word;">http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=Y2cVSsdL5hndPAF2uWPSdQ==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==</a></p>
		<br>
		<div class="pull-left">
			<a href="272705-method-of-establishing-a-hrpd-signal-link.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="272707-circular-buffer-based-rate-matching.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>272706</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>764/KOLNP/2010</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>17/2016</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>22-Apr-2016</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>21-Apr-2016</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>01-Mar-2010</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>LG ELECTRONICS INC.</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>20, YEOUIDO-DONG, YEONGDEUNGPO-GU, SEOUL 150-721 REPUBLIC OF KOREA</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>CHOI, IN HWAN</td>
											<td>LG ELECTRONICS INC. IP GROUP, 16 WOOMYEON-DONG, SEOCHO-GU, SEOUL 137-724 REPUBLIC OF KOREA</td>
										</tr>
										<tr>
											<td>2</td>
											<td>KWAK, KOOK YEON</td>
											<td>LG ELECTRONICS INC. IP GROUP, 16 WOOMYEON-DONG, SEOCHO-GU, SEOUL 137-724 REPUBLIC OF KOREA</td>
										</tr>
										<tr>
											<td>3</td>
											<td>KIM, BYOUNG GILL</td>
											<td>LG ELECTRONICS INC. IP GROUP, 16 WOOMYEON-DONG, SEOCHO-GU, SEOUL 137-724 REPUBLIC OF KOREA</td>
										</tr>
										<tr>
											<td>4</td>
											<td>SONG, WON GYU</td>
											<td>LG ELECTRONICS INC. IP GROUP, 16 WOOMYEON-DONG, SEOCHO-GU, SEOUL 137-724 REPUBLIC OF KOREA</td>
										</tr>
										<tr>
											<td>5</td>
											<td>LEE, HYOUNG GON</td>
											<td>LG ELECTRONICS INC. IP GROUP, 16 WOOMYEON-DONG, SEOCHO-GU, SEOUL 137-724 REPUBLIC OF KOREA</td>
										</tr>
										<tr>
											<td>6</td>
											<td>KIM, JIN WOO</td>
											<td>LG ELECTRONICS INC. IP GROUP, 16 WOOMYEON-DONG, SEOCHO-GU, SEOUL 137-724 REPUBLIC OF KOREA</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>H04N 7/015,H04N 7/00</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/KR2008/004981</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2008-08-25</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>10-2008-0083016</td>
									<td>2008-08-25</td>
								    <td>U.S.A.</td>
								</tr>
								<tr>
									<td>2</td>
									<td>60/957,714</td>
									<td>2007-08-24</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/272706-digital-broadcasting-system-and-method-of-processing-data-in-digital-broadcasting-system by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 00:49:36 GMT -->
</html>
