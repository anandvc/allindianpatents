<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/222838-image-processing-apparatus-and-method-and-image-capturing-apparatus by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 07:33:11 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 222838:IMAGE PROCESSING APPARATUS AND METHOD, AND IMAGE-CAPTURING APPARATUS</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">IMAGE PROCESSING APPARATUS AND METHOD, AND IMAGE-CAPTURING APPARATUS</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>An image processing apparatus for processing image data which is formed of a predetermined number of pixel data, having a plurality of types of components at the same pixel position, obtained by an image-capturing device including a predetermined number of pixels, the pixels having a time integrating function, said image processmg apparatus comprising: area specifying means for specifying, in correspondence with said image data, a mixed area in which foreground object components which form a foreground object and background object components which form a background object are mixed; and mixture-ratio detection means for detecting, in correspondence with said image data, the mixture ratio indicating the ratio of the mixture of said foreground object components to the mixture of said background object components in a mixed area in which said foreground object components and said background object components are mixed, wherein at least one of said area specifying means and said mixture-ratio detection means performs image processing on the basis of said plurality of types of components.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>FORM 2<br>
THE PATENTS ACT 1970<br>
[39 OF 1970]<br>
&amp;<br>
THE PATENTS RULES, 2003<br>
as amended by<br>
THE PATENTS (AMENDMENT) RULES, 2006<br>
COMPLETE SPECIFICATION<br>
[See Section 10; rule 13]<br>
"IMAGE PROCESSING APPARATUS AND METHOD, AND IMAGE-CAPTURING APPARATUS'*<br>
SONY CORPORATION, a Japanese company, of 7-35 Kitashinagawa 6-chome, Shinagawa-ku, Tokyo, 141-0001, Japan<br><br>
The following specification particularly describes the invention and the manner in which it is to be performed:<br><br><br><br>
DESCRIPTION IMAGE PROCESSING APPARATUS AND METHOD, AND IMAGE-CAPTURING APPARATUS<br>
5  Technical Field<br>
The present invention relates to image processing apparatuses and methods, and image-capturing apparatuses, and more particularly, to an image processing apparatus and method, and an image-capturing apparatus in which a 10  difference between a signal detected by a sensor and the real world is taken into consideration.<br>
Background Art<br>
A technique for detecting incidents occurring in the 15  real world by a sensor and for processing sampled data output from the image sensor is widely used.<br>
For example, motion blur occurs in an image obtained by capturing an object moving in front of a predetermined stationary background with a video camera if the moving 20  speed is relatively high.<br>
However, when an object is moving in front of a stationary background, not only does motion blur caused by the mixture of the moving object itself occur, but also the mixture of the background image and the object image occurs. 25  Hitherto, processing corresponding to the mixture state of<br>
2<br><br>
the background image and the moving object has not been considered.<br>
Disclosure invention 5      The present invention has been made in view of such<br>
circumstances.  Accordingly, it is an object of the present invention to know the mixture state of images.<br>
A first image processing apparatus of the present invention comprises area specifying means for specifying, in 10  correspondence with image data, a mixed area in which<br>
foreground object components which form a foreground object and background object components which form a background object are mixed; and mixture-ratio detection means for detecting, in correspondence with the image data, the 15  mixture ratio indicating the ratio of the mixture of the foreground object components to the mixture of the background object components in a mixed area in which the foreground object components and the background object components are mixed, wherein at least one of the area 20  specifying means and the mixture ratio detection means<br>
performs image processing on the basis of the plurality of types of components.<br>
The area specifying means may comprise component mixed-area detection means for detecting the mixed area for each 25  of the plurality of types of components and for outputting<br>
3<br><br>
the detection result corresponding to individual components as component mixed-area information; and mixed-area specifying means for specifying the mixed area corresponding to the image data on the basis of the detection result of the mixed area corresponding to the plurality of types of components detected by the component mixed-area detection means.<br>
The area specifying means may comprise space-correlation-value calculation means for calculating a space correlation value indicating a correlation between designated pixel data corresponding to a designated pixel of a designated frame of the image data and pixel data of a space neighboring pixel positioned in the neighborhood of the designated pixel in the spatial direction on the basis of the plurality of types of components corresponding to the designated pixel; time-correlation-value calculation means for calculating a time correlation value indicating a correlation between the designated pixel data and pixel data of a time neighboring pixel positioned in the neighborhood of the designated pixel in the time direction on the basis of the plurality of types of components corresponding to the designated pixel; and foreground area specifying means for specifying a foreground area formed of only the foreground object components on the basis of the space correlation value and the time correlation value corresponding to the<br>
4<br><br>
designated pixel.<br>
The area specifying means may comprise mixed-area specifying means for specifying the mixed area on the basis of the foreground area of the designated frame and the 5  foreground area of a neighboring frame in the neighborhood of the designated frame.<br>
The mixture-ratio detection means may comprise component mixture-ratio detection means for detecting the mixture ratio for each of the plurality of types of 10  components; and component integrated mixture-ratio detection means for detecting the mixture ratio corresponding to the image data by integrating the detection results of the mixture ratios corresponding to the plurality of types of components detected by the component mixture-ratio detection 15  means.<br>
The mixture-ratio detection means may comprise integration means for integrating the pixel values of the plurality of types of components for each pixel and for outputting the value as integrated data; and integrated data 20  mixture-ratio detection means for detecting the mixture<br>
ratio corresponding to the image data on the basis of the integrated data.<br>
The integration means may add the pixel values of the plurality of types of components for each pixel and may 25  output the added result as the integrated data.<br>
5<br><br>
An image processing method of the present invention comprises an area specifying step of specifying, in correspondence with image data, a mixed area in which foreground object components which form a foreground object and background object components which form a background object are mixed; a mixture-ratio detection step of detecting, in correspondence with the image data, the mixture ratio indicating the ratio of the mixture of the foreground object components to the mixture of the background object components in a mixed area in which the foreground object components and the background object components are mixed; and an output control step of controlling the output of the detected mixture ratio, wherein at least one of the area specifying step and the mixture-ratio detection step performs image processing on the basis of the plurality of types of components.<br>
The area specifying step may comprise a component mixed-area detection step of detecting the mixed  area   for each of the plurality of types of components and for outputting the detection, result corresponding to individual components as component mixed-area information; and a mixed-area specifying step of specifying the mixed area corresponding to the image data on the basis of the detection result of the mixed area corresponding to the plurality of types of components detected in the component<br>
6<br><br>
mixed-area detection step.<br>
The area specifying step may comprise a space-correlation-value calculation step of calculating a space correlation value indicating a correlation between 5  designated pixel data corresponding to a designated pixel of a designated frame of the image data and pixel data of a space neighboring pixel positioned in the neighborhood of the designated pixel in the spatial direction on the basis of the plurality of types of components corresponding to the 10  designated pixel; a time-correlation-value calculation step of calculating a time correlation value indicating a correlation between the designated pixel data and pixel data of a time neighboring pixel positioned in the neighborhood of the designated pixel in the time direction on the basis 15  of the plurality of types of components corresponding to the designated pixel; and a foreground area specifying step of specifying a foreground area formed of only the foreground object components on the basis of the space correlation value and the time correlation value corresponding to the 20  designated pixel.<br>
The area specifying step may comprise a mixed-area specifying step of specifying the mixed area on the basis of the foreground area of the designated frame and the foreground area of a neighboring frame in the neighborhood 25  of the designated frame.<br>
-7"<br><br>
The mixture-ratio detection step may comprise a component mixture-ratio detection step of detecting the mixture ratio for each of the plurality of types of components; and a component integrated mixture-ratio detection step of detecting the mixture ratio corresponding to the image data by integrating the detection results of the mixture ratios corresponding to the plurality of types of components detected in the component mixture-ratio detection step.<br>
The mixture-ratio detection step may comprise an integration step of integrating the pixel values of the plurality of types of components for each pixel and for outputting the value as integrated data; and a data mixture-ratio detection step of detecting the mixture ratio corresponding to the image data on the basis of the integrated data.<br>
In the integration step, the pixel values of the plurality of types of components may be added for each pixel and the added result may be output as the integrated data.<br>
A program of a first recording medium of the present invention comprises an area specifying step of specifying, in correspondence with image data, a mixed area in which foreground object components which form a foreground object and background object components which form a background object are mixed; a mixture-ratio detection step of<br>
8<br><br>
detecting, in correspondence with the image data, the mixture ratio indicating the ratio of the mixture of the foreground object components to the mixture of the background object components in a mixed area in which the 5  foreground object components and the background object components are mixed; and an output control step of controlling the output of the detected mixture ratio, wherein at least one of the area specifying step and the mixture-ratio detection step performs image processing on 10  the basis of the plurality of types of components.<br>
The area specifying step may comprise a component mixed-area detection step of detecting the mixed area for each of the plurality of types of components and for outputting the detection result corresponding to individual 15  components as component mixed-area information; and a mixed-area specifying step of specifying the mixed area corresponding to the image data on the basis of the detection result of the mixed area corresponding to the plurality of types of components detected in the component 20  mixed-area detection step.<br>
The area specifying step may comprise a space-correlation-value calculation step of calculating a space correlation value indicating a correlation between designated pixel data corresponding to a designated pixel of 25  a designated frame of the image data and pixel data of a<br>
9<br><br>
space neighboring pixel positioned in the neighborhood of the designated pixel in the spatial direction on the basis of the plurality of types of components corresponding to the designated pixel; a time-correlation-value calculation step of calculating a time correlation value indicating a correlation between the designated pixel data and pixel data of a time neighboring pixel positioned in the neighborhood of the designated pixel in the time direction on the basis of the plurality of types of components corresponding to the designated pixel; and a foreground area specifying step of specifying a foreground area formed of only the foreground object components on the basis of the space correlation value and the time correlation value corresponding to the designated pixel.<br>
The area specifying step may comprise a mixed-area specifying step of specifying the mixed area on the basis of the foreground area of the designated frame and the foreground area of a neighboring frame in the neighborhood of the designated frame.<br>
The mixture-ratio detection step may comprise a component mixture-ratio detection step of detecting the mixture ratio for each of the plurality of types of components; and a component integrated mixture-ratio detection step of detecting the mixture ratio corresponding to the image data by integrating the detection results<br>
10<br><br>
corresponding to the plurality of types of components detected in the component mixture-ratio detection step.<br>
The mixture-ratio detection step may comprise an integration step of integrating the pixel values of the plurality of types of components for each pixel and outputting the value as integrated data; and an integrated data mixture-ratio detection step of detecting the mixture ratio corresponding to the image data on the basis of the integrated data.<br>
In the integration step, the pixel values of the plurality of types of components may be added for each pixel, and the added result may be output as the integrated data.<br>
A first program of the present invention causes a computer to execute an area specifying step of specifying, in correspondence with image data, a mixed area in which foreground object components which form a foreground object and background object components which form a background object are mixed; a mixture-ratio detection step of detecting, in correspondence with the image data, the mixture ratio indicating the ratio of the mixture of the foreground object components to the mixture of the background object in a mixed area in which the foreground object components and the background object components are mixed; and an output control step of controlling the output of the detected mixture ratio, wherein, in at least one of<br>
11<br><br>
the area specifying step and the mixture-ratio detection step, image processing is performed on the basis of the plurality of types of components.<br>
The area specifying step may comprise a component 5  mixed-area detection step of detecting the mixed area for each of the plurality of types of components and for outputting the detection result corresponding to individual components as component mixed-area information; and a mixed-area specifying step of specifying the mixed area 10  corresponding to the image data on the basis of the<br>
detection result of the mixed area corresponding to the plurality of types of components detected in the component mixed-area detection step.<br>
The area specifying step may comprise a space-15  correlation-value calculation step of calculating a space correlation value indicating a correlation between designated pixel data corresponding to a designated pixel of a designated frame of the image data and pixel data of a space neighboring pixel positioned in the neighborhood of 20  the designated pixel in the spatial direction on the basis<br>
of the plurality of types of components corresponding to the designated pixel; a time-correlation-value calculation step of calculating a time correlation value indicating a correlation between the designated pixel data and pixel data 25  of a time neighboring pixel positioned in the neighborhood<br>
12<br><br>
of the designated pixel in the time direction on the basis of the plurality of types of components corresponding to the designated pixel; and a foreground area specifying step of specifying a foreground area formed of only the foreground 5  object components on the basis of the space correlation value and the time correlation value corresponding to the designated pixel.<br>
The area specifying step may comprise a mixed-area specifying step of specifying the mixed area on the basis of 10  the foreground area of the designated frame and the<br>
foreground area of a neighboring frame in the neighborhood of the designated frame.<br>
The mixture-ratio detection step may comprise a component mixture-ratio detection step of detecting the 15  mixture ratio for each of the plurality of types of components; and a component integrated mixture-ratio detection step of detecting the mixture ratio corresponding to the image data by integrating the detection results of the mixture ratios corresponding to the plurality of types 20  of components detected in the component mixture-ratio detection step.<br>
The mixture-ratio detection step may comprise an integration step of integrating the pixel values of the plurality of types of components for each pixel and for 25  outputting the value as integrated data; and an integrated<br>
13<br><br>
data mixture-ratio detection step of detecting the mixture ratio corresponding to the image data on the basis of the integrated data.<br>
In the integration step, the pixel values of the<br>
5  plurality of types of components may  be added for each pixel,<br>
and the added result may be output as the integrated data.<br>
A first image-capturing apparatus of the present invention comprises image-capturing means for outputting a subject image captured by an image-capturing device 10  including a predetermined number of pixels, the pixels<br>
having a time integrating function, as image data which is formed of a predetermined number of pixel data having a plurality of types of components at the same pixel position; area specifying means for specifying, in correspondence with 15  image data, a mixed area in which foreground object<br>
components which form a foreground object and background object components which form a background object are mixed; and mixture-ratio detection means for detecting, in correspondence with the image data, the mixture ratio 20  indicating the ratio of the mixture of the foreground object components to the mixture of the background object components in a mixed area in which the foreground object components and the background object components are mixed, wherein at least one of the area specifying means and the 25  mixture-ratio detection means performs image processing on<br>
14<br><br>
the basis of the plurality of types of components.<br>
The area specifying means may comprise component mixed-area detection means for detecting the mixed area for each of the plurality of types of components and for outputting the detection result corresponding to individual components as component mixed-area information; and mixed-area specifying means for specifying the mixed area corresponding to the image data on the basis of the detection result of the mixed area corresponding to the plurality of types of components detected by the component mixed-area detection means.<br>
The area specifying means may comprise space-correlation-value calculation means for calculating a space correlation value indicating a correlation between designated pixel data corresponding to a designated pixel of a designated frame of the image data and pixel data of a space neighboring pixel positioned in the neighborhood of the designated pixel in the spatial direction on the basis of the plurality of types of components corresponding to the designated pixel; time-correlation-value calculation means for calculating a time correlation value indicating a correlation between the designated pixel data and pixel data of a time neighboring pixel positioned in the neighborhood of the designated pixel in the time direction on the basis of the plurality of types of components corresponding to the<br>
15<br><br>
designated pixel; and foreground area specifying means for specifying a foreground area formed of only the foreground object components on the basis of the space correlation value and the time correlation value corresponding to the designated pixel.<br>
The area specifying means may comprise mixed-area specifying means for specifying the mixed area on the basis of the foreground area of the designated frame and the foreground area of a neighboring frame in the neighborhood of the designated frame.<br>
The mixture-ratio detection means may comprise component mixture-ratio detection means for detecting the mixture ratio for each of the plurality of types of components; and component integrated mixture-ratio detection means for detecting the mixture ratio for detecting the mixture ratio corresponding to the image data by integrating the detection results of the mixture ratios corresponding to the plurality of types of components detected by the component mixture-ratio detection means.<br>
The mixture ratio detection means may comprise integration means for integrating the pixel values of the plurality of types of components for each pixel and for outputting the value as integrated data; and integrated data mixture-ratio detection means for detecting the mixture ratio corresponding to the image data on the basis of the<br>
16<br><br>
integrated data.<br>
The integration means may add the pixel values of the plurality of types of components for each pixel and may output the added result as the integrated data. 5      A second image processing apparatus of the present<br>
invention comprises image data obtaining means for obtaining image data; and processing performing means for performing, on the basis of the plurality of types of components of the obtained image data, one of processings of (i) an area 10  specifying step of specifying, in correspondence with the image data, a mixed area in which foreground object components which form a foreground object and background object components which form a background object are mixed and (ii) a mixture-ratio detection step of detecting, in 15  correspondence with the image data, the mixture ratio<br>
indicating the ratio of the mixture of the foreground object components to the mixture of the background object components in a mixed area in which the foreground object components and the background object components are mixed. 20      The processing performing means may perform, on the basis of the plurality of types of components of the obtained image data, an area specifying step of specifying, in correspondence with the image data, a mixed area in which foreground object components which form a foreground object 25  and background object components which form a background<br>
17<br><br>
object are mixed.<br>
The processing performing means may perform, on the basis of the plurality of types of components of the obtained image data, a mixture-ratio detection step of 5  detecting, in correspondence with the image data, the mixture ratio indicating the ratio of the mixture of the foreground object components to the mixture of the background object components in a mixed area in which the foreground object components and the background object 10  components are mixed.<br>
A second image processing method of the present invention comprises an image data obtaining step of obtaining image data; and a processing performing step of performing, on the basis of the plurality of types of 15  components of the obtained image data, one of processings of (i) an area specifying step of specifying, in correspondence with the image data, a mixed area in which foreground object components which form a foreground object and background object components which form a background object are mixed 20  and (ii) a mixture-ratio detection step of detecting, in correspondence with the image data, the mixture ratio indicating the ratio of the mixture of the foreground object components to the mixture of the background object components in a mixed area in which the foreground object 25  components and the background object components are mixed.<br>
18<br><br>
In the processing performing step, on the basis of the plurality of types of components of the obtained image data, an area specifying step of specifying, in correspondence with the image data, a mixed area in which foreground object 5  components which form a foreground object and background object components which form a background object are mixed may be performed.<br>
In the processing performing step, on the basis of the plurality of types of components of the obtained image data, 10  a mixture-ratio detection step of detecting, in<br>
correspondence with the image data, the mixture ratio indicating the ratio of the mixture of the foreground object components to the mixture of the background object components in a mixed area in which the foreground object 15  components and the background object components are mixed may be performed.<br>
A program of a second recording medium of the present invention comprises an image data obtaining step of obtaining image data; and a processing performing step of 20  performing, on the basis of the plurality of types of<br>
components of the obtained image data, one of processings of (i) an area specifying step of specifying, in correspondence with the image data, a mixed area in which foreground object components which form a foreground object and background 25  object components which form a background object are mixed<br>
19<br><br>
and (ii) a mixture-ratio detection step of detecting, in correspondence with the image data, the mixture ratio indicating the ratio of the mixture of the foreground object components to the mixture of the background object components in a mixed area in which the foreground object components and the background object components are mixed.<br>
In the processing performing step, on the basis of the plurality of types of components of the obtained image data, an area specifying step of specifying, in correspondence with the image data, a mixed area in which foreground object components which form a foreground object and background object components which form a background object are mixed may be performed.<br>
In the processing performing step, on the basis of the plurality of types of components of the obtained image data, a mixture-ratio detection step of detecting, in correspondence with the image data, the mixture ratio indicating the mixture of the foreground object components to the mixture of the background object components in a mixed area in which the foreground object components and the background object components are mixed may be performed.<br>
A second program of the present invention causes a computer to execute an image data obtaining step of obtaining image data; and a processing performing step of performing, on the basis of the plurality of types of<br>
20<br><br>
components of the obtained image data, one of processings of (i) an area specifying step of specifying, in correspondence with the image data, a mixed area in which foreground object components which form a foreground object and background object components which form a background object are mixed and (ii) a mixture-ratio detection step of detecting, in correspondence with the image data, the mixture ratio indicating the ratio of the mixture of the foreground object components to the mixture of the background object components in a mixed area in which the foreground object components and the background object components are mixed.<br>
In the processing performing step, on the basis of the plurality of types of components of the obtained image data, an area specifying step of specifying, in correspondence with the image data, a mixed area in which foreground object components which form a foreground object and background object components which form a background object are mixed may be performed.<br>
In the processing performing step, on the basis of the plurality of types of components of the obtained image data, a mixture-ratio detection step of detecting, in correspondence with the image data, the mixture ratio indicating the ratio of the mixture of the foreground object components to the mixture of the background object components in a mixed area in which the foreground object<br>
21<br><br>
components and the background object components are mixed may be performed.<br>
A second image-capturing apparatus of the present invention comprises image-capturing means for outputting a 5  subject image captured by an image-capturing device including a predetermined number of pixels, the pixels having a time integrating function, as image data which is formed of a predetermined number of pixel data having a plurality of types of components at the same pixel position; 10  and processing performing means for performing, on the basis of the plurality of types of components of the image data, one of processings of (i) an area specifying step of specifying, in correspondence with the image data, a mixed area in which foreground object components which form a 15  foreground object and background object components which<br>
form a background object are mixed and (ii) a mixture-ratio detection step of detecting, in correspondence with the image data, the mixture ratio indicating the ratio of the mixture of the foreground object components to the mixture 20  of the background object components in a mixed area in which the foreground object components and the background object components are mixed.<br>
The processing performing means may perform, on the basis of the plurality of types of components of the image 25  data, an area specifying step of specifying, in<br>
22<br><br>
correspondence with the image data, a mixed area in which foreground object components which form a foreground object and background object components which form a background object are mixed.<br>
The processing performing means may perform, on the basis of the plurality of types of components of the image data, a mixture-ratio detection step of detecting, in correspondence with the image data, the mixture ratio indicating the ratio of the mixture of the foreground object components to the mixture of the background object components in a mixed area in which the foreground object components and the background object components are mixed.<br>
In correspondence with image data, a mixed area in which foreground object components which form a foreground object and background object components which form a background object are mixed is specified.  The mixture ratio indicating the ratio of the mixture of the foreground object components to the mixture of the background object components in a mixed area in which the foreground object components and the background object components are mixed is detected.  At least one of the area specification operation and the mixture-ratio detection operation performs image processing on the basis of the plurality of types of components.<br>
Image data is obtained, and based on the plurality of<br>
23<br><br>
types of components of the obtained image data, one of processings of (i) an area specifying step of specifying, in correspondence with the image data, a mixed area in which foreground object components which form a foreground object 5  and background object components which form a background<br>
object are mixed and (ii) a mixture-ratio detection step of detecting, in correspondence with the image data, the mixture ratio indicating the ratio of the mixture of the foreground object components to the mixture of the 10  background object components in a mixed area in which the foreground object components and the background object components are mixed is performed.<br>
As a result, the mixture state of the images can be recognized. 15<br>
Brief Description of the Drawings<br>
Fig. 1 shows an embodiment of an image processing apparatus of the present invention.<br>
Fig. 2 is a block diagram illustrating the image 20  processing apparatus.<br>
Fig. 3 illustrates the image capturing performed by a sensor.<br>
Fig. 4 illustrates the arrangement of pixels. Fig. 5 illustrates the operation of a detection device. 25       Fig. 6A illustrates an image obtained by image-<br>
24<br><br>
capturing an object corresponding to a moving foreground and an object corresponding to a stationary background.<br>
Fig. 6B illustrates a model of an image obtained by image-capturing an object corresponding to a moving 5  foreground and an  object corresponding to a stationary background.<br>
Fig. 7 illustrates a background area, a foreground area, a mixed area, a covered background area, and an uncovered background area. 10       Fig. 8 illustrates a model obtained by expanding in the time direction the pixel values of pixels aligned side-by-side in an image obtained by image-capturing an object corresponding to a stationary foreground and an the object corresponding to a stationary background. 15       Fig. 9 illustrates a model in which pixel values are<br>
expanded in the time direction and the period corresponding to the shutter time is divided.<br>
Fig. 10 illustrates a model in which pixel values are expanded in the time direction and the period corresponding 20  to the shutter time is divided.<br>
Fig. 11 illustrates a model in which pixel values are expanded in the time direction and the period corresponding to the shutter time is divided.<br>
Fig. 12 illustrates an example in which pixels in a 25  foreground area, a background area, and a mixed area are<br>
25<br><br>
extracted.<br>
Fig. 13 illustrates the relationships between pixels and a model obtained by expanding the pixel values in the time direction. 5       Fig. 14 illustrates a model in which pixel values are expanded in the time direction and the period corresponding to the shutter time is divided.<br>
Fig. 15 illustrates a model in which pixel values are expanded in the time direction and the period corresponding 10  to the shutter time is divided.<br>
Fig. 16 illustrates a model in which pixel values are expanded in the time direction and the period corresponding to the shutter time is divided.<br>
Fig. 17 illustrates a model in which pixel values are 15  expanded in the time direction and the period corresponding to the shutter time is divided.<br>
Fig. 18 illustrates a model in which pixel values are expanded in the time direction and the period corresponding to the shutter time is divided. 20       Fig. 19 is a flowchart illustrating the processing for adjusting the amount of motion blur.<br>
Fig. 20 is a block diagram illustrating an example of the configuration of the area specifying unit 103. Fig. 21 illustrates an image when an object 25  corresponding to a foreground is moving.<br>
26<br><br>
Fig. 22 illustrates a model in which pixel values are expanded in the time direction and the period corresponding to the shutter time is divided.<br>
Fig. 23 illustrates a model in which pixel values are 5  expanded in the time direction and the period corresponding to the shutter time is divided.<br>
Fig. 24 illustrates a model in which pixel values are expanded in the time direction and the period corresponding to the shutter time is divided. 10       Fig. 25 illustrates the conditions for determining the area.<br>
Fig. 26A illustrates an example of the result obtained by specifying the area by the area specifying unit 103.<br>
Fig. 26B illustrates an example of the result obtained 15  by specifying the area by the area specifying unit 103.<br>
Fig. 26C illustrates an example of the result obtained by specifying the area by the area specifying unit 103.<br>
Fig. 26D illustrates an example of the result obtained by specifying the area by the area specifying unit 103. 20       Fig. 27 illustrates an example of the result obtained by specifying the area by the area specifying unit 103.<br>
Fig. 28 is a flowchart illustrating the area specifying processing.<br>
Fig. 29 is a block diagram illustrating an example of 25  the configuration of the area specifying unit 103,<br>
27<br><br>
Fig. 30 illustrates a model in which pixel values are expanded in the time direction and the period corresponding to the shutter time is divided.<br>
Fig. 31 illustrates an example of a background image. 5      Fig. 32 is a block diagram illustrating the<br>
configuration of a binary-object-image extracting portion 302.<br>
Fig. 33A illustrates the calculation of a correlation value. 10       Fig. 33B illustrates the calculation of a correlation value.<br>
Fig. 34A illustrates the calculation of a correlation value.<br>
Fig. 34B illustrates the calculation of a correlation 15  value.<br>
Fig. 35 illustrates an example of the binary object image.<br>
Fig. 36 is a block diagram illustrating the configuration of a time change detector 303. 20       Fig. 37 illustrates determinations made by an area determining portion 342.<br>
Fig. 38 illustrates an example of determinations made by the time change detector 303.<br>
Fig. 39 is a flowchart illustrating the area specifying 25  processing performed by the area specifying unit 103.<br>
28<br><br>
Fig. 40 is a flowchart illustrating details of the area specifying processing.<br>
Fig. 41 is a block diagram illustrating still another configuration of the area specifying unit 103. 5      Fig. 42 is a block diagram illustrating the configuration of a robust-processing portion 361.<br>
Fig. 43 illustrates motion compensation performed by a motion compensator 381.<br>
Fig. 44 illustrates motion compensation performed by 10  the motion compensator 381.<br>
Fig. 45 is a flowchart illustrating the area specifying processing.<br>
Fig. 46 is a flowchart illustrating details of the robust processing. 15      Fig. 47 is a block diagram illustrating an example of the configuration of a mixture-ratio calculator 104.<br>
Fig. 48 illustrates an example of the ideal mixture-ratio a.<br>
Fig. 49 illustrates a model in which pixel values are 20  expanded in the time direction and the period corresponding to the shutter time is divided.<br>
Fig. 50 illustrates a model in which pixel values are expanded in the time direction and the period corresponding to the shutter time is divided. 25       Fig. 51 illustrates approximation using a correlation<br>
29<br><br>
of foreground components.<br>
Fig. 52 illustrates the relationship among C, N, and P. Fig. 53 is a block diagram illustrating the configuration of the mixture-ratio estimation processor 401. 5       Fig. 54 illustrates an example of an estimated mixture ratio.<br>
Fig. 55 is a block diagram illustrating the configuration of the mixture-ratio calculator 104.<br>
Fig. 56 is a flowchart illustrating the mixture-ratio 10  calculation processing.<br>
Fig. 57 is a flowchart illustrating the processing for calculating the estimated mixture ratio.<br>
Fig. 58 illustrates a straight line for approximating the mixture ratio a. 15       Fig. 59 illustrates a plane for approximating the mixture ratio a.<br>
Fig. 60 illustrates the relationships of the pixels in a plurality of frames when the mixture ratio a is calculated. Fig. 61 is a block diagram illustrating another 20  configuration of the estimated-mixture-ratio processor 401. Fig. 62 illustrates an example of an estimated mixture ratio.<br>
Fig. 63 is a flowchart illustrating the mixture-ratio estimating processing by using a model corresponding to a 2 5  covered background area.<br>
30<br><br>
Fig. 64 is a block diagram illustrating an example of the configuration of a foreground/background separator 105.<br>
Fig. 65A illustrates an input image, a foreground component image, and a background component image. 5      Fig. 65B illustrates a model of an input image, a<br>
foreground component image, and a background component image.<br>
Fig. 66 illustrates a model in which pixel values are expanded in the time direction and the period corresponding to the shutter time is divided. 10      Fig. 67 illustrates a model in which pixel values are expanded in the time direction and the period corresponding to the shutter time is divided.<br>
Fig. 68 illustrates a model in which pixel values are expanded in the time direction and the period corresponding 15  to the shutter time is divided.<br>
Fig. 69 is a block diagram illustrating an example of the configuration of a separating portion 601.<br>
Fig. 70A illustrates an example of a separated foreground component image. 20       Fig. 70B illustrates an example of a separated background component image.<br>
Fig. 71 is a flowchart illustrating the processing for separating a foreground and a background.<br>
Fig. 72 is a block diagram illustrating an example of 25  the configuration of a motion-blur adjusting unit 106.<br>
31<br><br>
Fig. 73 illustrates the unit of processing. Fig. 74 illustrates a model in which the pixel values of a foreground component image are expanded in the time direction and the period corresponding to the shutter time 5  is divided.<br>
Fig. 75 illustrates a model in which the pixel values of a foreground component image are expanded in the time direction and the period corresponding to the shutter time is divided. 10       Fig. 76 illustrates a model in which the pixel values of a foreground component image are expanded in the time direction and the period corresponding to the shutter time is divided.<br>
Fig. 77 illustrates a model in which the pixel values 15  of a foreground component image are expanded in the time<br>
direction and the period corresponding to the shutter time is divided.<br>
Fig. 78 illustrates an  example of another configuration of the motion-blur adjusting unit 106. 20       Fig. 79 is a flowchart illustrating the processing for adjusting the amount of motion blur contained in a foreground component image performed by the motion-blur adjusting unit 106.<br>
Fig. 80 is a block diagram illustrating an example of 25  another configuration of the motion-blur adjusting unit 106.<br>
32<br><br>
Fig. 81 illustrates an example of a model in which the relationships between pixel values and foreground components are indicated.<br>
Fig. 82 illustrates the calculation of foreground 5  components.<br>
Fig. 83 illustrates the calculation of foreground components.<br>
Fig. 84 is a flowchart' illustrating the processing for eliminating motion blur contained in a foreground. 10       Fig. 85 is a block diagram illustrating another configuration of the function of the image processing apparatus.<br>
Fig. 86 illustrates the configuration of a synthesizer 1001. 15       Fig. 87 is a block diagram illustrating still another configuration of the function of the image processing apparatus.<br>
Fig. 88 is a block diagram illustrating the configuration of a mixture-ratio calculator 1101. 20       Fig. 89 is a block diagram illustrating the<br>
configuration of a foreground/background separator 1102.<br>
Fig. 90 is a block diagram illustrating still another configuration of the function of the image processing apparatus. 25       Fig. 91 illustrates the configuration of a synthesizer<br>
33<br><br>
1201.<br>
Fig. 92 shows an embodiment of an image processing apparatus for generating area information on the basis of input images which are input as component signals. 5      Fig. 93  illustrates the relationship among component  1, component 2, and component 3.<br>
Fig. 9.4 is a flowchart illustrating the processing for determining the area using component signals.<br>
Fig. 95 shows another embodiment of an image processing 10  apparatus for generating area information on the basis of input images which are input as component signals.<br>
Fig. 96 is a flowchart illustrating another processing for determining the area using component signals.<br>
Fig. 97 shows still another embodiment of an image 15  processing apparatus for generating area information on the basis of input images which are input as component signals.<br>
Fig. 98 shows the relationship between a space correlation and a time correlation in a stationary area and in a moving area. 20       Fig. 99 illustrates an example of the calculation of a space correlation.<br>
Fig. 100 illustrates an example of the calculation of a time correlation.<br>
Fig. 101 illustrates a time correlation and a space 25  correlation in a stationary area.<br>
34<br><br>
Fig. 102 illustrates a time correlation and a space correlation in a moving area.<br>
Fig. 103 shows an example of an input image. Fig. 104 shows results of the determination of a moving 5  area or a stationary area.<br>
Fig. 105 shows results of the determination of a moving area or a stationary area by using a block of 15 x 15 pixels as units.<br>
Fig. 106 shows results of the determination of a 10  foreground area, a background area, a covered background area, and an uncovered background area.<br>
Fig. 107 is a flowchart illustrating the processing for determining the area using component signals.<br>
Fig. 108 shows an embodiment of an image processing 15  apparatus for calculating a mixture ratio on the basis of an input image and area information, which are input as component signals.<br>
Fig. 109 illustrates the relationship of the mixture ratios in each component signal. 20       Fig. 110 is a flowchart illustrating the processing for calculating a mixture ratio using component signals.<br>
Fig. Ill shows another embodiment of an image processing apparatus for calculating a mixture ratio on the basis of input images and area information, which are input 25  as component signals.<br>
35<br><br>
Fig. 112 is a flowchart illustrating another processing for determining a mixture ratio using component signals.<br>
Fig. 113 shows still another embodiment of an image processing apparatus for calculating a mixture ratio on the 5  basis of input images and area information, which are input as component signals.<br>
Fig. 114 is a block diagram illustrating the configuration of a mixture-ratio calculator 1421.<br>
Fig. 115 illustrates still another processing for 10  calculating a mixture ratio on the basis of input images and area information, which are input as component signals.<br>
Best Mode for Carrying Out the Invention<br>
Fig. 1 shows an embodiment of an image processing<br>
15  apparatus of the present invention.  A CPU (Central<br>
Processing Unit) 21 executes various types of processing according to programs stored in a ROM (Read Only Memory) 22 or in a storage unit 28.  Programs executed by the CPU 21 and data are stored in a RAM (Random Access Memory) 23 as<br>
20  required.  The CPU 21, the ROM 22, and the RAM 23 are connected to each other by a bus 24.<br>
An input/output interface 25 is also connected to the CPU 21 via the bus 24.  An input unit 26, which is formed of a keyboard, a mouse, a microphone, and so  on, and an output<br>
25  unit 27, which is formed of a display, a speaker, and so on,<br>
36<br><br>
are connected to the input/output interface 25.  The CPU 21 executes various types of processing in response to a command input from the input unit 26.  The CPU 21 then outputs an image or sound obtained as a result of the 5  processing to the output unit 27.<br>
The storage unit 2 8 connected to the input/output interface 25 is formed of, for example, a hard disk, and stores programs executed by the CPU 21 and various types of data.  A communication unit 2 9 communicates with an external 10  device via the Internet or another network.  In this example, the communication unit 29 serves as an obtaining unit for obtaining an output of a sensor.<br>
Alternatively, a program may be obtained via the communication unit 29 and stored in the storage unit 28. 15      A drive 30 connected to the input/output interface 25 drives a magnetic disk 51, an optical disc 52, a magneto-optical disk 53, a semiconductor memory 54, or the like, when such a recording medium is attached to the drive 30, and obtains a program or data stored in the corresponding 20  medium.  The obtained program or data is transferred to the storage unit 28 and stored therein if necessary.<br>
Fig. 2 is a block diagram illustrating the image processing apparatus.<br>
It does not matter whether the individual functions of 25  the image processing apparatus are implemented by hardware<br>
37<br><br>
or software.  That is, the block diagrams of this specification may be hardware block diagrams or software functional block diagrams.<br>
In this specification, an image to be captured 5  corresponding to an object in the real world is referred to as an image object.<br>
An input image supplied to the image processing apparatus is supplied to an object extracting unit 101, an area specifying unit 103, a mixture-ratio calculator 104, 10  and a foreground/background separator 105.<br>
The object extracting unit 101 extracts a rough image object corresponding to a foreground object contained in the input image, and supplies the extracted image object to a motion detector 102.  The object extracting unit 101 detects, 15  for example, an outline of the foreground image object<br>
contained in the input image so as to extract a rough image object corresponding to the foreground object.<br>
The object extracting unit 101 extracts a rough image object corresponding to a background object contained in the 20  input image, and supplies the extracted image object to the motion detector 102.  The object extracting unit 101 extracts a rough image object corresponding to the background object from, for example, the difference between the input image and the extracted image object corresponding 25  to the foreground object.<br>
38<br><br>
Alternatively, for example, the object extracting unit 101 may extract the rough image object corresponding to the foreground object and the rough image object corresponding to the background object from the difference between the 5  background image stored in a built-in background memory and the input image.<br>
The motion detector 102 calculates a motion vector of the roughly extracted image object corresponding to the foreground object according to a technique, such as block 10  matching, gradient, phase correlation, or pel-recursive<br>
technique, and supplies the calculated motion vector and the motion-vector positional information (which is information for specifying the positions of the pixels corresponding to the motion vector) to the area specifying unit 103, and a 15  motion-blur adjusting unit 106.<br>
The motion vector output from the motion detector 102 contains information corresponding to the amount of movement v.<br>
The motion detector 102 may output the motion vector of 20  each image object, together with the pixel positional<br>
information for specifying the pixels of the image object, to the motion-blur adjusting unit 106.<br>
The amount of movement v is a value indicating a positional change in an image corresponding to a moving 25  object in units of the pixel pitch.  For example, if an<br>
39<br><br>
object image corresponding to a foreground is moving such that it is displayed at a position four pixels away from a reference frame when it is positioned in the subsequent frame, the amount of movement v of the object image 5  corresponding to the foreground is 4.<br>
The object extracting unit 101 and the motion detector 102 are needed when adjusting the amount of motion blur corresponding to a moving object.<br>
The area specifying unit 103 determines to which of a 10  foreground area, a background area, or a mixed area each<br>
pixel of the input image belongs, and supplies information indicating to which area each pixel belongs (hereinafter referred to as "area information") to the mixture-ratio calculator 104, the foreground/background separator 105, and 15  the motion-blur adjusting unit 106.<br>
The mixture-ratio calculator 104 calculates the mixture ratio corresponding to the pixels contained in a mixed area 63 (hereinafter referred to as the "mixture-ratio a") based on the input image, and the area information supplied from 20  the area specifying unit 103, and supplies the mixture ratio a to the foreground/background separator 105.<br>
The mixture ratio a is a value indicating the ratio of the image components corresponding to the background object (hereinafter also be referred to as "background components") 25  to the pixel value as expressed by equation (3), which is<br>
40<br><br>
shown below.<br>
The foreground/background separator 105 separates the input image into a foreground component image formed of only the image components corresponding to the foreground object (hereinafter also be referred to as "foreground components") and a background component image formed of only the background components based on the area information supplied from the area specifying unit 103 and the mixture ratio a supplied from the mixture-ratio calculator 104, and supplies the foreground component image to the motion-blur adjusting unit 106 and a selector 107.  The separated foreground component image may be set as the final output.  A more precise foreground and background can be obtained compared to a known method in which only a foreground and a background are specified without considering the mixed area.<br>
The motion-blur adjusting unit 106 determines the unit of processing indicating at least one pixel contained in the foreground component image based on the amount of movement v obtained from the motion vector and based on the area information.  The unit of processing is data that specifies a group of pixels to be subjected to the motion-blur adjustments.<br>
Based on the amount by which the motion blur is to be adjusted, which is input into.the image processing apparatus the foreground component image supplied from the<br>
41<br><br>
foreground/background separator 105, the motion vector and the positional information thereof supplied from the motion detector 102, and the unit of processing, the motion-blur adjusting unit 106 adjusts the amount of motion blur 5  contained in the foreground component image by removing, decreasing, or increasing the motion blur contained in the foreground component image.  The motion-blur adjusting unit 106 then outputs the foreground component image in which amount of motion blur is adjusted to the selector 107.  It 10  is not essential that the motion vector and the positional information thereof be used.<br>
Motion blur is a distortion contained in an image corresponding to a moving object caused by the movement of an object to be captured in the real world and the image-15  capturing characteristics of the sensor.<br>
The selector 107 selects one of the foreground component image supplied from the foreground/background separator 105 and the foreground component image in which the amount of motion blur is adjusted supplied from the 20  motion-blur adjusting unit 106 based on, for example, a<br>
selection signal reflecting a user's selection, and outputs the selected foreground component image.<br>
An input image supplied to the image processing apparatus is discussed below with reference to Figs. 3 25  through 18.<br><br>
Fig. 3 illustrates image capturing performed by a sensor.  The sensor is formed of, for example, a CCD (Charge-Coupled Device) video camera provided with a CCD area sensor, which is a solid-state image-capturing device. 5  An object 111 corresponding to a foreground in the real<br>
world moves, for example, horizontally from the left to the right, between an object 112 corresponding to a background and the sensor.<br>
The sensor captures the image of the object 111 10  corresponding to the foreground together with the image of the object 112 corresponding to the background.  The sensor outputs the captured image in units of frames.  For example, the sensor outputs an image having 30 frames per second. The exposure time of the sensor can be 1/30 second.  The 15  exposure time is a period from when the sensor starts<br>
converting input light into electrical charge until when the conversion from the input light to the electrical charge is finished.  The exposure time is also referred to as a "shutter time". 20       Fig. 4 illustrates the arrangement of pixels.  In Fig. 4, A through I indicate the individual pixels.  The pixels are disposed on a plane of a corresponding image.  One detection device corresponding to each pixel is disposed on the sensor.  When the sensor performs image capturing, each 25  detection device outputs a pixel value of the corresponding<br>
43<br><br>
pixel forming the image.  For example, the position of the detection device in the X direction corresponds to the horizontal direction on the image, while the position of the detection device in the Y direction corresponds to the vertical direction on the image.<br>
As shown in Fig. 5, the detection device, which is, for example, a CCD, converts input light into electrical charge during a period corresponding to a shutter time, and stores the converted electrical charge.  The amount of charge is almost proportional to the intensity of the input light and the period for which the light is input.  The detection device sequentially adds the electrical charge converted from the input light to the stored electrical charge during the period corresponding to the shutter time.  That is, the detection device integrates the input light during the period corresponding to the shutter time and stores the electrical charge corresponding to the amount integrated light.  It can be considered that the detection device has an integrating function with respect to time.<br>
The electrical charge stored in the detection device is converted into a voltage value by a circuit (not shown), and the voltage value is further converted into a pixel value, such as digital data, and is output.  Accordingly, each pixel value output from the sensor is a value projected on a linear space, which is a result integrating a certain three-<br>
44<br><br>
dimensional portion of the object corresponding to the foreground or the background with respect to the shutter time.<br>
The image processing apparatus extracts significant 5  information embedded in the output signal, for example, the mixture ratio a, by the storage operation of the sensor. The image processing apparatus adjusts the amount of distortion, for example, the amount of motion blur, caused by the mixture of the foreground image object itself.  The 10  image processing apparatus also adjusts the amount of<br>
distortion caused by the mixture of the foreground image object and the background image object.<br>
Fig. 6A illustrates an image obtained by capturing a object corresponding to a moving foreground and a object 15  corresponding to a stationary background.  Fig. 6B<br>
illustrates a model corresponding to an image obtained by capturing a object corresponding to a moving foreground and a object corresponding to a stationary background.<br>
Fig. 6A illustrates an image obtained by capturing a 20  object corresponding to a moving foreground and a object corresponding to a stationary background.  In the example shown in Fig. 6A, the object corresponding to the foreground is moving horizontally from the left to the right with respect to the screen. 25       Fig. 6B illustrates a model obtained by expanding pixel<br>
45<br><br>
values corresponding to one line of the image shown in Fig. 6A in the time direction.  The horizontal direction shown in Fig. 6B corresponds to the spatial direction X in Fig. 6A. The values of the pixels in the background area are 5  formed only from the background components, that is, the image components corresponding to the background object. The values of the pixels in the foreground area are formed only from the foreground components, that is, the image components corresponding to the foreground object. 10       The values of the pixels of the mixed area are formed<br>
from the background components and the foreground components. Since the values of the pixels in the mixed area are formed from the background components and the foreground components, it may be referred to as a "distortion area".  The mixed 15  area is further classified into a covered background area and an uncovered background area.<br>
The covered background area is a mixed area at a position corresponding to the leading end in the direction in which the foreground object is moving, where the 20  background components are gradually covered with the foreground over time.<br>
In contrast, the uncovered background area is a mixed area corresponding to the trailing end in the direction in which the foreground object is moving, where the background 25  components gradually appear over time.<br>
46<br><br>
As discussed above, the image containing the foreground area, the background area, or the covered background area or the uncovered background area is input into the area specifying unit 103, the mixture-ratio calculator 104, and 5  the foreground/background separator 105 as the input image. Fig. 7 illustrates the background area, the foreground area, the mixed area, the covered background area, and the uncovered background area discussed above.  In the areas corresponding to the image shown in Fig. 6A, the background 10  area is a stationary portion, the foreground area is a<br>
moving portion, the covered background area of the mixed area is a portion that changes from the background to the foreground, and the uncovered background area of the mixed area is a portion that changes from the foreground to the 15  background.<br>
Fig. 8 illustrates a■model obtained by expanding in the time direction the pixel values of the pixels aligned side-by-side in the image obtained by capturing the image of the object corresponding to the stationary foreground and the 20  image of the object corresponding to the stationary<br>
background.  For example, as the pixels aligned side-by-side, pixels arranged in one line on the screen can be selected.<br>
The pixel values indicated by F01 through F04 shown in Fig. 8 are values of the pixels corresponding to the object 25  of the stationary foreground.  The pixel values indicated by<br><br>
B01 through B04 shown in Fig. 8 are values of the pixels corresponding to the object of the stationary background. Time elapses from the top to the bottom in Fig. 8 in the vertical direction in Fig. 8.  The position at the top 5  side of the rectangle. \v-  Fig. %  corresponds "to the time at which the sensor starts converting input light into electrical charge, and the position at the bottom side of the rectangle in Fig. 8 corresponds to the time at which the conversion from the input light into the electrical charge 10  is finished.  That is, the distance from the top side to the bottom side of the rectangle in Fig. 8 corresponds to the shutter time.<br>
The pixels shown in Fig. 8 are described below assuming that, for example, the shutter time is equal to the frame 15  size.<br>
The horizontal direction in Fig. 8 corresponds to the spatial direction X in Fig. 6A.  More specifically, in the example shown in Fig. 8, the distance from the left side of the rectangle indicated by "FOl" in Fig. 8 to the right side 20  of the rectangle indicated by "B04" is eight times the pixel pitch, i.e., eight consecutive pixels.<br>
When the foreground object and the background object are stationary, the light input into the sensor does not change during the period corresponding to the shutter time. 25       The period corresponding to the shutter time is divided<br>
48<br><br>
into two or more portions of equal periods.  For example, if the number of virtual divided portions is 4, the model shown in Fig. 8 can be represented by the model shown in Fig. 9. The number of virtual divided portions can be set according 5  to the amount of movement v of the object corresponding to the foreground within the shutter time.  For example, the number of virtual divided portions is set to 4 when the amount of movement v is 4, and the period corresponding to the shutter time is divided into four portions. 10       The uppermost line in Fig. 9 corresponds to the first<br>
divided period from when the shutter has opened.  The second line in Fig. 9 corresponds to the second divided period from when the shutter has opened.  The third line in Fig. 9 corresponds to the third divided period from when the 15  shutter has opened.  The fourth line in Fig. 9 corresponds to the fourth divided period from when the shutter has opened.<br>
The shutter time divided in accordance with the amount of movement v is also hereinafter referred to as the 20  "shutter time/v".<br>
When the object corresponding to the foreground is stationary, the light input into the sensor does not change, and thus, the foreground component FOl/v is equal to the value obtained by dividing the pixel value FOl by the number 25  of virtual divided portions.  Similarly, when the object.<br><br>
corresponding to the foreground is stationary, the foreground component F02/v is equal to the value obtained by dividing the pixel value F02 by the number of virtual divided portions, the foreground component F03/v is equal to 5  the value obtained by dividing the pixel value F03 by the number of virtual divided portions, and the foreground component F0 4/v is equal to the value obtained by dividing the pixel value F04 by the number of virtual divided portions. 10      When the object corresponding to the background is<br>
stationary, the light input into the sensor does not change, and thus, the background component BOl/v is equal to the value obtained by dividing the pixel value BOl by the number of virtual divided portions.  Similarly, when the object 15  corresponding to the background is stationary, the<br>
background component B02/v is equal to the value obtained by dividing the pixel value B02 by the number of virtual divided portions, the background component B03/v is equal to the value obtained by dividing the pixel value B03 by the 20  number of virtual divided portions, and the background<br>
component B04/v is equal to the value obtained by dividing the pixel value B04 by the number of virtual divided . portions. <br>
More specifically, when the object corresponding to the 25  foreground is stationary, the light corresponding to the<br>
50<br><br>
foreground object input into the sensor does not change during the period corresponding to the shutter time. Accordingly, the foreground component FOl/v corresponding to the first portion of the shutter time/v from when the shutter has opened, the foreground component FOl/v corresponding to the second portion of the shutter time/v from when the shutter has opened, the foreground component FOl/v corresponding to the third portion of the shutter time/v from when the shutter has opened, and the foreground component FOl/v corresponding to the fourth portion of the shutter time/v from when the shutter has opened become the same value.  The same applies to F02/v through F04/v, as in the case of FOl/v.<br>
When the object corresponding to the background is stationary, the light corresponding to the background object input into the sensor does not change during the period corresponding to the shutter time.  Accordingly, the background component BOl/v corresponding to the first portion of the shutter time/v from when the shutter has opened, the background component BOl/v corresponding to the second portion of the shutter time/v from when the shutter has opened, the background component BOl/v corresponding to the third portion of the shutter time/v from when the shutter has opened, and the background component BOl/v corresponding to the fourth portion of the shutter time/v<br>
51<br><br>
from when the shutter has opened become the same value.  The same applies to B02/v through B04/v.<br>
A description is given of the case in which the object corresponding to the foreground is moving and the object 5  corresponding to the background is stationary.<br>
Fig. 10 illustrates a model obtained by expanding in the time direction the pixel values of the pixels in one line, including a covered background area, when the object corresponding to the foreground is moving to the right in 10  Fig. 10.  In Fig. 10, the amount of movement v is 4.  Since one frame is a short period, it can be assumed that the object corresponding to the foreground is a rigid body moving with constant velocity.  In Fig. 10, the object image corresponding to the foreground is moving such that it is 15  positioned four pixels to the right with respect to a<br>
reference frame when it is displayed in the subsequent frame.<br>
In Fig. 10, the pixels from the leftmost pixel to the fourth pixel belong to the foreground area.  In Fig. 10, the pixels from the fifth pixel to the seventh pixel from the 20  left belong to the mixed area, which is the covered<br>
background area.  In Fig. 10, the rightmost pixel belongs to the background area.<br>
The object corresponding to the foreground is moving such that it gradually covers the object corresponding to 25  the background over time.  Accordingly, the components<br>
52<br><br>
contained in the pixel values of the pixels belonging to the covered background area change from the background components to the foreground components at a certain time during the period corresponding to the shutter time.<br>
For example, the pixel value M surrounded by the thick<br>
frame in Fig. 10 is expressed by equation (1) below.<br>
M = B02/v+B02/v+F07/v+F06/v	(1)<br>
For example, the fifth pixel from the left contains a background component corresponding to one portion of the shutter time/v and foreground components corresponding to three portions of the shutter time/v, and thus, the mixture ratio a of the fifth pixel from the left is 1/4.  The sixth pixel from the left contains background components corresponding to two portions of the shutter time/v and foreground components corresponding to two portions of the shutter time/v, and thus, the mixture ratio a of the sixth pixel from the left is 1/2.  The seventh pixel from the left contains background components corresponding to three portions of the shutter time/v and a foreground component corresponding to one portion of the shutter time/v, and thus, the mixture ratio a of the fifth pixel from the left is 3/4.<br>
It can be assumed that the object corresponding to the foreground is a rigid body, and the foreground object is moving with constant velocity such that it is displayed four pixels to the right in the subsequent frame.  Accordingly,<br>
53<br><br>
for example, the foreground component F07/v of the fourth pixel from the left in Fig. 10 corresponding to the first portion of the shutter time/v from when the shutter has opened is equal to the foreground component of the fifth pixel from the left in Fig. 10 corresponding to the second portion of the shutter time/v from when the shutter has opened.  Similarly, the foreground component F07/v is equal to the foreground component of the sixth pixel from the left in Fig. 10 corresponding to the third portion of the shutter time/v from when the shutter has opened, and the foreground component of the seventh pixel from the left in Fig. 10 corresponding to the fourth portion of the shutter time/v from when the shutter has opened.<br>
It can be assumed that the object corresponding to the foreground is a rigid body, and the foreground object is moving with constant velocity such that it is displayed four pixels to the right in the subsequent frame.  Accordingly, for example, the foreground component F06/v of the third pixel from the left in Fig. 10 corresponding to the first portion of the shutter time/v from when the shutter has opened is equal to the foreground component of the fourth pixel from the left in Fig. 10 corresponding to the second portion of the shutter time/v from when the shutter has opened.  Similarly, the foreground component F06/v is equal to the foreground -component of the fifth pixel from the left<br>
54<br><br>
in Fig. 10 corresponding to the third portion of the shutter time/v from when the shutter has opened, and the foreground component of the sixth pixel from the left in Fig, 10 corresponding to the fourth portion of the shutter time/v from when the shutter has opened.<br>
It can be assumed that the object corresponding to the foreground is a rigid body, and the foreground object is moving with constant velocity such that it is displayed four pixels to the right in the subsequent frame.  Accordingly, for example, the foreground component F05/v of the second pixel from the left in Fig. 10 corresponding to the first portion of the shutter time/v from when the shutter has opened is equal to the foreground component of the third pixel from the left in Fig. 10 corresponding to the second portion of the shutter time/v from when the shutter has opened.  Similarly, the foreground component F05/v is equal to the foreground component of the fourth pixel from the left in Fig. 10 corresponding to the third portion of the shutter time/v from when the shutter has opened, and the foreground component of the fifth pixel from the left in Fig. 10 corresponding to the fourth portion of the shutter time/v from when the shutter has opened.<br>
It can be assumed that the object corresponding to the foreground is a rigid body, and the foreground object is moving with constant velocity such that it is displayed four<br>
55<br><br>
pixels to the right in the subsequent frame.  Accordingly, for example, the foreground component F04/v of the left most pixel in Fig. 10 corresponding to the first portion of the shutter time/v from when the shutter has opened is equal to 5  the foreground component of the second pixel from the left in Fig. 10 corresponding to the second portion of the shutter time/v from when the shutter has opened.  Similarly, the foreground component F04/v is equal to the foreground component of the third pixel from the left in Fig. 10 10  corresponding to the third portion of the shutter time/v from when the shutter has opened, and the foreground component of the fourth pixel from the left in Fig. 10 corresponding to the fourth portion of the shutter time/v from when the shutter has opened. 15       Since the foreground area corresponding to the moving object contains motion blur as discussed above, it can also be referred to as a "distortion area".<br>
Fig. 11 illustrates a model obtained by expanding in the time direction the pixel values of the pixels in one 20  line including an uncovered background area when the object corresponding to the foreground is moving to the right in Fig. 11.  In Fig. 11, the amount of movement v is 4.  Since one frame is a short period, it can be assumed that the object corresponding to the foreground is a rigid body 25  moving with constant velocity.  In Fig. 11, the object image<br>
56<br><br>
corresponding to the foreground is moving to the right such that it is positioned four pixels to the right with respect to a reference frame when it is displayed in the subsequent frame, 5      In Fig. 11, the pixels from the leftmost pixel to the fourth pixel belong to the background area.  In Fig. 11, the pixels from the fifth pixel to the seventh pixels from the left belong to the mixed area, which is an uncovered background area.  In Fig. 11, the rightmost pixel belongs to 10  the foreground area.<br>
The object corresponding to the foreground which covers the object corresponding to the background is moving such that it is gradually removed from the object corresponding to the background over time.  Accordingly, the components 15  contained in the pixel values of the pixels belonging to the uncovered background area change from the foreground components to the background components at a certain time of the period corresponding to the shutter time.<br>
For example, the pixel value M' surrounded by the thick<br>
20  frame in Fig. 11 is expressed by equation (2).<br>
M' = F02/v+F01/v+B26/v+B26/v	(2)<br>
For example, the fifth pixel from the left contains background components corresponding to three portions of the shutter time/v and a foreground component corresponding to 25  one.shutter portion of the shutter time/v, and thus, the<br>
57<br><br>
mixture ratio a of the fifth pixel from the left is 3/4. The sixth pixel from the left contains background components corresponding to two portions of the shutter time/v and foreground components corresponding to two portions of the 5  shutter time/v, and thus, the mixture ratio a of the sixth pixel from the left is 1/2.  The seventh pixel from the left contains a background component corresponding to one portion of the shutter time/v and foreground components corresponding to three portions of the shutter time/v, and 10  thus, the mixture ratio a of the seventh pixel from the left is 1/4.<br>
When equations (1) and (2) are generalized, the pixel value M can be expressed by equation (3):<br>
M = a • B + ∑  Fi / v	(3)<br>
i<br>
15  where a is the mixture ratio, B indicates a pixel value of the background, and Fi/v designates a foreground component. It can be.assumed that the object corresponding to the foreground is a rigid body, which is moving with constant velocity, and the amount of movement is 4,  Accordingly, for<br>
20  example, the foreground component FOl/v of the fifth pixel from the left in Fig. 11 corresponding to the first portion of the shutter time/v from when the shutter has opened is equal to the foreground component of the sixth pixel from the left.in Fig. 11 corresponding to the second portion of 25  the shutter time/v from when the shutter has opened.<br>
58<br><br>
Similarly, the foreground component F0l/v is equal to the foreground component of the seventh pixel from the left in Fig. 11 corresponding to the third portion of the shutter time/v from when the shutter has opened, and the foreground component of the eighth pixel from the left in Fig. 11 corresponding to the fourth portion of the shutter time/v from when the shutter has opened.<br>
It can be assumed that the object corresponding to the foreground is a rigid body, which is moving with constant velocity, and the amount of movement v is 4.  Accordingly, for example, the foreground component F02/v of the sixth pixel from the left in Fig. 11 corresponding to the first portion of the shutter time/v from when the shutter has opened is equal to the foreground component of the seventh pixel from the left in Fig. 11 corresponding to the second portion of the shutter time/v from when the shutter has opened.  Similarly, the foreground component F02/v is equal to the foreground component of the eighth pixel from the left in Fig. 11 corresponding to the third portion of the shutter time/v from when the shutter has opened.<br>
It can be assumed that the object corresponding to the foreground is a rigid body, which is moving with constant velocity, and the amount of movement v is 4.  Accordingly, for example, the foreground component F03/v of the seventh pixel from the left in Fig. 11 corresponding to the first<br><br>
portion of the shutter time/v from when the shutter has opened is equal to the foreground component of the eighth pixel from the left in Fig. 11 corresponding to the second portion of the shutter time/v from when the shutter has 5  opened.<br>
It has been described with reference to Figs. 9 through 11 that the number of virtual divided portions is 4.  The number of virtual divided portions corresponds to the amount of movement v.  Generally, the amount of movement v 10  corresponds to the moving speed of the object corresponding to the foreground.  For example, if the object corresponding to the foreground is moving such that it is displayed four pixels to the right with respect to a certain frame when it is positioned in the subsequent frame, the amount of 15  movement v is set to 4.  The number of virtual divided portions is set to 4 in accordance with the amount of movement v.  Similarly, when the object corresponding to the foreground is moving such that it is displayed six pixels to the left with respect to a certain frame when it is 20  positioned in the subsequent frame, the amount of movement v is set to 6, and the number of virtual divided portions is set to 6.<br>
Figs. 12 and 13 illustrate the relationship of the foreground area, the background area, and the mixed area 25  which consists of a covered background or an uncovered<br>
60<br><br>
background, which are discussed above, to the foreground components and the background components corresponding to the divided periods of the shutter time.<br>
Fig. 12 illustrates an example in which pixels in the 5  foreground area, the background area, and the mixed area are extracted from an image containing a foreground corresponding to an object moving in front of a stationary-background.  In the example shown in Fig. 12, the object indicated by "A" corresponding to the foreground is 10  horizontally moving with respect to the screen.<br>
Frame #n+l is a frame subsequent to frame #n, and frame #n+2 is a frame subsequent to frame #n+l.<br>
Pixels in the foreground area, the background area, and the mixed area are extracted from one of frames #n through 15  #n+2, and the amount of movement v is set to 4.  A model obtained by expanding the pixel values of the extracted pixels in the time direction is shown in Fig. 13.<br>
Since the object corresponding to the foreground is moving, the pixel values in the foreground area are formed 20  of four different foreground components corresponding to the shutter time/v.  For example, the leftmost pixel of the pixels in the foreground area shown in Fig. 13 consists of FOl/v, F02/v, F03/v, and F04/v.  That is, the pixels in the foreground contain motion blur. 25       Since the object corresponding to the background is<br>
61<br><br>
stationary, light input into the sensor corresponding to the background during the shutter time does not change.  In this case, the pixel values in the background area do not contain motion blur. 5      The pixel values in the mixed area consisting of a<br>
covered background area or an uncovered background area are formed of foreground components and background components.<br>
A description is given below of a model obtained by expanding in the time direction the pixel values of the 10  pixels which are aligned side-by-side in a plurality of<br>
frames and which are located at the same positions when the frames are overlapped when the image corresponding to the object is moving.  For example, when the image corresponding to the object is moving horizontally with respect to the 15  screen, pixels aligned on the screen can be selected as the pixels aligned side-by-side.<br>
Fig. 14 illustrates a model obtained by expanding in the time direction the pixels which are aligned side-by-side in three frames of an image obtained by capturing an object 20  corresponding to a stationary background and which are<br>
located at the same positions when the frames are overlapped. Frame #n is the frame subsequent to frame #n-l, and frame #n+l is the frame subsequent to frame #n.  The same applies to the other frames. 25       The pixel values B01 through B12 shown in Fig. 14 are<br>
62<br><br>
pixel values corresponding to the stationary background object.  Since the object corresponding to the background is stationary, the pixel values of the corresponding pixels in frame #n-l through frame #n+l do not change.  For example, 5  the pixel in frame #n and the pixel in frame #n+l located at the corresponding position of the pixel having the pixel value B05 in frame #n-l have the pixel value B05.<br>
Fig. 15 illustrates a model obtained by expanding in the time direction the pixels which are aligned side-by-side 10  in three frames of an image obtained by capturing an object corresponding to a foreground that is moving to the right in Fig. 15 together with an object corresponding to a stationary background and which are located at the same positions when the frames are overlapped.  The model shown 15  in Fig. 15 contains a covered background area.<br>
In Fig. 15, it can be assumed that the object corresponding to the foreground is a rigid body moving with constant velocity, and that it is moving such that it is displayed four pixels to the right in the subsequent frame. 20  Accordingly, the amount of movement v is 4, and the number of virtual divided portions is 4.<br>
For example, the foreground component of the leftmost pixel in frame #n-l in Fig. 15 corresponding to the first portion of the shutter time/v from when the shutter has 25  opened is F12/v, and the foreground component of the second<br>
63<br><br>
pixel from the left in Fig. 15 corresponding to the second portion of the shutter time/v from when the shutter has opened is also F12/v.  The foreground component of the third pixel from the left in Fig. 15 corresponding to the third 5  portion of the shutter time/v from when the shutter has<br>
opened and the foreground component of the fourth pixel from the left in Fig. 15 corresponding to the fourth portion of the shutter time/v from when the shutter has opened are F12/v. 10       The foreground component of the leftmost pixel in frame #n-l in Fig. 15 corresponding to the second portion of the shutter time/v from when the shutter has opened is Fll/v. The foreground component of the second pixel from the left in Fig. 15 corresponding to the third portion of the shutter 15  time/v from when the shutter has opened is also Fll/v.  The<br>
foreground component of the third pixel from the left in Fig. 15 corresponding to the fourth portion of the shutter time/v from when the shutter has opened is Fll/v.<br>
The foreground component of the leftmost pixel in frame 20  #n-l in Fig. 15 corresponding to the third portion of the shutter time/v from when the shutter has opened is FlO/v. The foreground component of the second pixel from the left in Fig. 15 corresponding to the fourth portion of the shutter time/v from when the shutter has opened is also 25  FlO/v.  The foreground component of the leftmost pixel in<br>
64<br><br>
frame #n-l in Fig. 15 corresponding to the fourth portion of the shutter time/v from when the shutter has opened is F09/v.<br>
In frame #n-l in Fig. 15, the leftmost pixel from the left belongs to the foreground area, and the second through fourth pixels from the left belong to the mixed area, which is a covered background area.<br>
The fifth through twelfth pixels from the left of frame #n-l in Fig. 15 belong to the background area, and the pixel values thereof are B04 through Bll, respectively.<br>
The first through fifth pixels from the left in frame #n in Fig. 15 belong to the foreground area.  The foreground component in the shutter time/v in the foreground area of frame #n is any one of F05/v through F12/v.<br>
It can be assumed that the object corresponding to the foreground is a rigid body moving with constant velocity, and that it is moving such that the foreground image is displayed four pixels to the right in the subsequent frame. Accordingly, the foreground component of the fifth pixel from the left of frame #n in Fig. 15 corresponding to the first portion of the shutter time/v from when the shutter has opened is F12/v, and the foreground component of the sixth pixel from the left in Fig. 15 corresponding to the second portion of the shutter time/v from when the shutter has opened is also F12/v.  The foreground component of the seventh pixel from the left in Fig. 15 corresponding to the<br>
65<br><br>
third portion of the shutter time/v from when the shutter has opened and the foreground component of the eighth pixel from the left in Fig. 15 corresponding to the fourth portion of"the shutter time/v from when the shutter has opened are 5  F12/v.<br>
The foreground component of the fifth pixel from the left of frame #n in Fig. 15 corresponding to the second portion of the shutter time/v from when the shutter has opened is Fll/v.  The foreground component of the sixth 10  pixel from the left in Fig. 15 corresponding to the third portion of the shutter time/v from when the shutter has opened is also Fll/v.  The foreground component of the seventh pixel from the left in Fig. 15 corresponding to the fourth portion of the shutter time/v from when the shutter 15  has opened is Fll/v.<br>
The foreground component of the fifth pixel from the left of frame #n in Fig. 15 corresponding to the third portion of the shutter time/v from when the shutter has opened is FlO/v.  The foreground component of the sixth 20  pixel from the left in Fig. 15 corresponding to the fourth portion of the shutter time/v from when the shutter has opened is also FlO/v.  The foreground component of the fifth pixel from the left of frame #n in Fig. 15 corresponding to the fourth portion of the shutter time/v from when the 25  shutter has opened is F09/v.<br>
66<br><br>
Since the object corresponding to the background is stationary, the background component of the sixth pixel from the left of frame #n in Fig. 15 corresponding to the first portion of the shutter time/v from when the shutter has 5  opened is B05/v.  The background components of the seventh pixel from the left of frame #n in Fig. 15 corresponding to the first and second portions of the shutter time/v from when the shutter has opened are B06/v.  The background components of the eighth pixel from the left of frame #n in 10  Fig. 15 corresponding to the first through third portion of the shutter time/v from when the shutter has opened are B07/v.<br>
In frame #n in Fig. 15, the sixth through eighth pixels from the left belong to the mixed area, which is a covered 15  background area.<br>
The ninth through twelfth pixels from the left of frame #n in Fig. 15 belong to the background area, and the pixel values thereof are B08 through Bll, respectively.<br>
The first through ninth pixels from the left in frame 20  #n+l in Fig. 15 belong to the foreground area.  The<br>
foreground component in the shutter time/v in the foreground area of frame #n+l is any one of FOl/v through F12/v.<br>
It can be assumed that the object corresponding to the foreground is a rigid body moving with constant velocity, 25  and that it is moving such that the foreground image is<br>
67<br><br>
displayed four pixels to the right in the subsequent frame. Accordingly, the foreground component of the ninth pixel from the left of frame #n+l in Fig. 15 corresponding to the first portion of the shutter time/v from when the shutter 5  has opened is F12/v, and the foreground component of the tenth pixel from the left in Fig. 15 corresponding to the second portion of the shutter time/v from when the shutter has opened is also F12/v.  The foreground component of the eleventh pixel from the left in Fig. 15 corresponding to the 10  third portion of the shutter time/v from when the shutter<br>
has opened and the foreground component of the twelfth pixel from the left in Fig. 15 corresponding to the fourth portion of the shutter time/v from when the shutter has opened are Fl2/v. 15      The foreground component of the ninth pixel from the left of frame #n+l in Fig. 15 corresponding to the second portion of the shutter time/v from when the shutter has opened is Fll/v.  The foreground component of the tenth pixel from the left in Fig. 15 corresponding to the third 20  portion of the shutter time/v from when the shutter has opened is also Fll/v.  The foreground component of the eleventh pixel from the left in Fig. 15 corresponding to the fourth portion of the shutter time/v from when the shutter has opened is Fll/v. 25       The foreground component of the ninth pixel from the<br>
68<br><br>
left of frame #n+l in Fig. 15 corresponding to the third portion of the shutter time/v from when the shutter has opened is FlO/v.  The foreground component of the tenth pixel from the left in Fig. 15 corresponding to the fourth 5  portion of the shutter time/v from when the shutter has<br>
opened is also FlO/v.  The foreground component of the ninth pixel from the left of frame #n+l in Fig. 15 corresponding to the fourth portion of the shutter time/v from when the shutter has opened is F09/v. 10      Since the object corresponding to the background is<br>
stationary, the background component of the tenth pixel from the left of frame #n+l in Fig. 15 corresponding to the first portion of the shutter time/v from when the shutter has opened is B09/v.  The background components of the eleventh 15  pixel from the left of frame #n+l in Fig. 15 corresponding to the first and second portions of the shutter time/v from when the shutter has opened are BlO/v.  The background components of the twelfth pixel from the left of frame #n+l in Fig. 15 corresponding to the.first through third portion 20  of the shutter time/v from when the shutter has opened are Bll/v.<br>
In frame #n+l in Fig. 15, the tenth through twelfth pixels from the left belong to the mixed area, which is a covered background area. 25       Fig. 16 illustrates a model of an image obtained by<br>
69<br><br>
extracting the foreground components from the pixel values shown in Fig. 15.<br>
Fig. 17 illustrates a model obtained by expanding in the time direction the pixels which are aligned side-by-side 5  in three frames of an image obtained by capturing an object corresponding to a foreground that is moving to the right in Fig. 17 together with an object corresponding to a stationary background and which are located at the same positions when the frames are overlapped.  The model shown 10  in Fig. 17 contains an uncovered background area. In Fig. 17, it can be assumed that the object corresponding to the foreground is a rigid body moving with constant velocity, and that it is moving such that it is displayed four pixels to the right in the subsequent frame. 15  Accordingly, the amount of movement v is 4.<br>
For example, the foreground component of the leftmost pixel in frame #n-l in Fig. 17 corresponding to the first portion of the shutter time/v from when the shutter has opened is F13/v, and the foreground component of the second 20  pixel from the left in Fig. 17 corresponding to the second portion of the shutter time/v from when the shutter has opened is also F13/v.  The foreground component of the third pixel from the left in Fig. 19 corresponding to the third portion of the shutter time/v from when the shutter has 25  opened and the foreground component of the fourth pixel from<br>
70<br><br>
the left in Fig. 17 corresponding to the fourth portion of the shutter time/v from when the shutter has opened are F13/v.<br>
The foreground component of the second pixel from the 5  left of frame #n-l in Fig. 17 corresponding to the first portion of the shutter time/v from when the shutter has opened is F14/v.  The foreground component of the third pixel from the left in Fig. 17 corresponding to the second portion of the shutter time/v from when the shutter has 10  opened is also F14/v.  The foreground component of the third pixel from the left in Fig. 17 corresponding to the first portion of the shutter time/v from when the shutter has opened is F15/v.<br>
Since the object corresponding to the background is 15  stationary, the background components of the leftmost pixel in frame #n-l in Fig. 17 corresponding to the second through fourth portions of the shutter time/v from when the shutter has opened are B25/v.  The background components of the second pixel from the left of frame #n-l in Fig. 17 20  corresponding to the third and fourth portions of the<br>
shutter time/v from when the shutter has opened are B26/v. The background component of the third pixel from the left of frame #n~l in Fig. 17 corresponding to the fourth portion of the shutter time/v from when the shutter has opened is B27/v. 25       In frame #n-l in Fig. 17, the leftmost pixel through<br>
71<br><br>
the third pixel belong to the mixed area, which is an uncovered background area.<br>
The fourth through twelfth pixels from the left of frame #n-l in Fig. 17 belong to the foreground area.  The 5  foreground component of the frame is any one of F13/v through F24/v.<br>
The leftmost pixel through the fourth pixel from the left of frame #n in Fig. 17 belong to the background area, and the pixel values thereof are B25 through B28, 10  respectively.<br>
It can be assumed that the object corresponding to the foreground is a rigid body moving with constant velocity, and that it is moving such that it is displayed four pixels to the right in the subsequent frame.  Accordingly, the 15  foreground component of the fifth pixel from the left of frame #n in Fig. 17 corresponding to the first portion of the shutter time/v from when the shutter has opened is F13/v, and the foreground component of the sixth pixel from the left in Fig. 17 corresponding to the second portion of the 20  shutter time/v from when the shutter has opened is also<br>
F13/v.  The foreground component of the seventh pixel from the left in Fig. 17 corresponding to the third portion of the shutter time/v from when the shutter has opened and the foreground component of the eighth pixel from the left in 25  Fig. 17 corresponding to the fourth portion of the shutter<br>
72<br><br>
time/v from when the shutter has opened are F13/v.<br>
The foreground component of the sixth pixel from the left of frame #n in Fig. 17 corresponding to the first portion of the shutter time/v from when the shutter has 5  opened is F14/v.  The foreground component of the seventh pixel from the left in Fig. 17 corresponding to the second portion of the shutter time/v from when the shutter has opened is also F14/v.  The foreground component of the eighth pixel from the left in Fig. 17 corresponding to the 10  first portion of the shutter time/v from when the shutter has opened is F15/v.<br>
Since the object corresponding to the background is stationary, the background components of the fifth pixel from the left of frame #n in Fig. 17 corresponding to the 15  second through fourth portions of the shutter time/v from when the shutter has opened are B29/v.  The background components of the sixth pixel from the left of frame #n in Fig. 17 corresponding to the third and fourth portions of the shutter time/v from when the shutter has opened are 20  B30/v.  The background component of the seventh pixel from the left of frame #n in Fig. 17 corresponding to the fourth portion of the shutter time/v from when the shutter has opened is B31/v.<br>
In frame #n in Fig. 17, the fifth pixel through the 25  seventh pixel from the left belong to the mixed area, which<br>
73<br><br>
is an uncovered background area.<br>
The eighth through twelfth pixels from the left of frame #n in Fig, 17 belong to the foreground area.  The value in the foreground area of frame #n corresponding to 5  the period of the shutter time/v is any one of F13/v through F20/v.<br>
The leftmost pixel through the eighth pixel from the left of frame #n+l in Fig. 17 belong to the background area, and the pixel values thereof are B25 through B32, 10  respectively.<br>
It can be assumed that the object corresponding to the foreground is a rigid body moving with constant velocity, and that it is moving such that it is displayed four pixels to the right in the subsequent frame.  Accordingly, the 15  foreground component of the ninth pixel from the left of<br>
frame #n+l in Fig. 17 corresponding to the first portion of the shutter time/v from when the shutter has opened is F13/v, and the foreground component of the tenth pixel from the left in Fig. 17 corresponding to the second portion of the 20  shutter time/v from when the shutter has opened is also<br>
F13/v.  The foreground component of the eleventh pixel from the left in Fig. 17 corresponding to the third portion of the shutter time/v from when the shutter has opened and the foreground component of the twelfth pixel from the left in 25  Fig. 17 corresponding to the fourth portion of the shutter<br>
74<br><br>
time/v from when the shutter has opened are F13/v.<br>
The foreground component of the tenth pixel from the left of frame #n+l in Fig. 17 corresponding to the first portion of the shutter time/v from when the shutter has 5  opened is F14/v.  The foreground component of the eleventh pixel from the left in Fig. 17 corresponding to the second portion of the shutter time/v from when the shutter has opened is also F14/v.  The foreground component of the twelfth pixel from the left in Fig. 17 corresponding to the 10  first portion of the shutter time/v from when the shutter has opened is F15/v.<br>
Since the object corresponding to the background is stationary, the background components of the ninth pixel from the left of frame #n+l in Fig. 17 corresponding to the 15  second through fourth portions of the shutter time/v from when the shutter has opened are B33/v.  The background components of the tenth pixel from the left of frame #n+l in Fig. 17 corresponding to the third and fourth portions of the shutter time/v from when the shutter has opened are 20  B34/v.  The background component of the eleventh pixel from the left of frame #n+l in Fig. 17 corresponding to the fourth portion of the shutter time/v from when the shutter has opened is B35/v.<br>
In frame #n+l in Fig. 17, the ninth through eleventh 25  pixels from the left in Fig. 17 belong to the mixed area,<br>
75<br><br>
which is an uncovered background area.<br>
The twelfth pixel from the left of frame #n+l in Fig. 17 belongs to the foreground area.  The foreground component in the shutter time/v in the foreground area of frame #n+l 5  is any one of Fl3/v through F16/v, respectively.<br>
Fig. 18 illustrates a model of an image obtained by extracting the foreground components from the pixel values shown in Fig. 17.<br>
Referring back to Fig. 2, the area specifying unit 103 10  specifies flags indicating to which of a foreground area, a background area, a covered background area, or an uncovered background area the individual pixels of the input image belong by using the pixel values of a plurality of frames, and supplies the flags to the mixture ratio calculator 104 15  and the motion-blur adjusting unit 106 as the area information.<br>
The mixture-ratio calculator 104 calculates the mixture ratio a for each pixel contained in the mixed area based on the pixel values of a plurality of frames and the area 20  information, and supplies the calculated mixture-ratio a to the foreground/background separator 105.<br>
The foreground/background separator 105 extracts the foreground component image consisting of only the foreground components based on the pixel values of a plurality of 25  frames, the area information, and the mixture ratio a, and<br>
76<br><br>
supplies the foreground component image to the motion-blur adjusting unit 106.<br>
The motion-blur adjusting unit 106 adjusts the amount of motion blur contained in the foreground component image 5  based on the foreground component image supplied from the foreground/background separator 105, the motion vector supplied from the motion detector 102, and the area information supplied from the area specifying unit 103, and then outputs the foreground component image in which motion 10  blur is adjusted.<br>
The processing for adjusting the amount of motion blur performed by the image processing apparatus is described below with reference to the flowchart of Fig. 19.  In step Sll, the area specifying unit 103 executes area specifying 15  processing, based on an input image, for generating area information indicating to which of a foreground area, a background area, a covered background area, or an uncovered background area each pixel of the input image belongs. Details of the area specifying processing are given below. 20  The area specifying unit 103 supplies the generated area information to the mixture-ratio calculator 104.<br>
In step Sll, the area specifying unit 103 may generate, based on the input image, area information indicating to which of the foreground area, the background area, or the 25  mixed area (regardless of whether each pixel belongs to a<br>
77<br><br>
covered background area or an uncovered background area) each pixel of the input image belongs.  In this case, the foreground/background separator 105 and the motion-blur adjusting unit 106 determine based on the direction of the 5  motion vector whether the mixed area is a covered background area or an uncovered background area.  For example, if the input image is disposed in the order of the foreground area, the mixed area, and the background area in the direction of the motion vector, it is determined that the mixed area is a<br>
10  covered background area.  If the input image is disposed in the order of the background area, the mixed area, and the foreground area in the direction of the motion vector, it is determined that the mixed area is an uncovered background area.<br>
15       In step S12, the mixture-ratio calculator 104<br>
calculates the mixture ratio a for each pixel contained in the mixed area based on the input image, and the area information.  Details of the mixture-ratio calculating processing are given below.  The mixture-ratio calculator<br>
20  104 supplies the calculated mixture-ratio a to the foreground/background separator 105.<br>
In step S13, the foreground/background separator 105 extracts the foreground components from the input image based on the area information and the mixture ratio a, and<br>
2 5  supplies the foreground components to the motion-blur<br>
78<br><br>
adjusting unit 106 as the foreground component image.<br>
In step S14, the motion-blur adjusting unit 106 generates, based on the motion vector and the area information, the unit of processing that indicates the 5  positions of consecutive pixels disposed in the moving<br>
direction and belonging to any of the uncovered background area, the foreground area, and the covered background area, and adjusts the amount of motion blur contained in the foreground components corresponding to the unit of 10  processing.  Details of the processing for adjusting the amount of motion blur are given below.<br>
In step S15, the image processing apparatus determines whether the processing is finished for the whole screen.  If it is determined that the processing is not finished for the 15  whole screen, the process proceeds to step S14, and the<br>
processing for adjusting the amount of motion blur for the foreground components corresponding to the unit of processing is repeated.<br>
If it is determined in step S15 that the processing is 20  finished for the whole screen, the processing is completed. In this manner, the image processing apparatus is capable of adjusting the amount of motion blur contained in the foreground by separating the foreground and the background.  That is, the image processing apparatus is 25  capable of adjusting the amount of motion blur contained in<br>
79<br><br>
sampled data indicating the pixel values of the foreground pixels.<br>
The configuration of each of the area specifying unit 103, the mixture-ratio calculator 104, the 5  foreground/background separator 105, and the motion-blur adjusting unit 106 is described below.<br>
Fig. 20 is a block diagram illustrating an example of the configuration of the area specifying unit 103. The area specifying unit 103 configured as shown in Fig. 20 10  does not use a motion vector.  A frame memory 201 stores an input image in units of frames.  When the image to be processed is frame #n, the frame memory 201 stores frame #n~ 2, which is the frame two frames before frame #n, frame #n-l, which is the frame one frame before frame #n, frame #n, 15  frame #n+l, which is the frame one frame after frame #n, frame #n+2, which is the frame two frames after frame #n.<br>
A stationary/moving determining portion 202-1 reads the pixel value of the pixel in frame #n+2 located at the same position as a designated pixel in frame #n in which the area 20  to which the pixel belongs is determined, and reads the<br>
pixel value of the pixel in frame #n+l located at the same position of the designated pixel in frame #n from the frame memory 201, and calculates the absolute value of the difference between the read pixel values.  The 25  stationary/moving determining portion 202-1 determines<br>
80<br><br>
whether the absolute value of the difference between the pixel value of frame #n+2 and the pixel value of frame #n+l is greater than a preset threshold Th.  If it is determined that the difference is greater than the threshold Th, a 5  stationary/moving determination indicating "moving" is supplied to an area determining portion 203-1.  If it is determined that the absolute value of the difference between the pixel value of the pixel in frame #n+2 and the pixel value of the pixel in frame #n+l is smaller than or egual to 10  the threshold Th, the stationary/moving determining portion 202-1 supplies a stationary/moving determination indicating "stationary" to the area determining portion 203-1.<br>
A stationary/moving determining portion 202-2 reads the pixel value of a designated pixel in frame #n in which the 15  area to which the pixel belongs is determined, and reads the pixel value of the pixel in frame #n+l located at the same position as the designated pixel in frame #n from the frame memory 201, and calculates the absolute value of the difference between the pixel values.  The stationary/moving 20  determining portion 202-2 determines whether the absolute value of the difference between the pixel value of frame #n+l and the pixel value of frame #n is greater than a preset threshold Th.  If it is determined that the absolute value of the difference between the pixel values is greater 25  than the threshold Th, a stationary/moving determination<br>
81<br><br>
indicating "moving" is supplied to the area determining portion 203-1 and an area determining portion 203-2.  If it is determined that the absolute value of the difference between the pixel value of the pixel in frame #n+l and the pixel value of the pixel in frame #n is smaller than or equal to the threshold Th, the stationary/moving determining portion 202-2 supplies a stationary/moving determination indicating "stationary" to the area determining portion 203-1 and the area determining portion 203-2.<br>
A stationary/moving determining portion 202-3 reads the pixel value of a designated pixel in frame #n in which the area to which the pixel belongs is determined, and reads the pixel value of the pixel in frame #n-l located at the same position as the designated pixel in frame #n from the frame memory 201, and calculates the absolute value of the difference between the pixel values.  The stationary/moving determining portion 202-3 determines whether the absolute value of the difference between the pixel value of frame #n and the pixel value of frame #n-l is greater than a preset threshold Th.  If it is determined that the absolute value of the difference between the pixel values is greater than the threshold Th, a stationary/moving determination indicating "moving" is supplied to the area determining portion 203-2 and an area determining portion 203-3.  If it is determined that the absolute value of the difference<br><br>
between the pixel value of the pixel in frame #n and the pixel value of the pixel in frame #n-l is smaller than or equal to the threshold Th, the stationary/moving determining portion 202-3 supplies a stationary/moving determination 5  indicating "stationary" to the area determining portion 203-2 and the area determining portion 203-3.<br>
A stationary/moving determining portion 202-4 reads the pixel value of the pixel in frame #n-l located at the same position as a designated pixel in frame #n in which the area 10  to which the pixel belongs is determined, and reads the<br>
pixel value of the pixel in frame #n-2 located at the same position as the designated pixel in frame #n from the frame memory 201, and calculates the absolute value of the difference between the pixel values.  The stationary/moving 15  determining portion 202-4 determines whether the absolute<br>
value of the difference between the pixel value of frame #n-1 and the pixel value of frame #n-2 is greater than a preset threshold Th.  If it is determined that the absolute value of the difference between the pixel values is greater than 20  the threshold Th, a stationary/moving determination<br>
indicating "moving" is supplied to the area determining portion 203-3.  If it is determined that the absolute value of the difference between the pixel value of the pixel in frame#n-l and the pixel value of the pixel in frame #n-2 is 25  smaller than or equal to the threshold Th, the<br><br>
stationary/moving determining portion 202-4 supplies a stationary/moving determination indicating "stationary" to the area determining portion 203-3.<br>
When the stationary/moving determination supplied from the stationary/moving determining portion 202-1 indicates "stationary" and when the stationary/moving determination supplied from the stationary/moving determining portion 202-2 indicates "moving", the area determining portion 203-1 determines that the designated pixel in frame #n belongs to an uncovered background area, and sets "1", which indicates that the designated pixel belongs to an uncovered background area, in an uncovered-background-area determining flag associated with the designated pixel.<br>
When the stationary/moving determination supplied from the stationary/moving determining portion 202-1 indicates "moving" or when the stationary/moving determination supplied from the stationary/moving determining portion 202-2 indicates "stationary", the area specifying unit 203-1 determines that the designated pixel in frame #n does not belong to an uncovered background area, and sets "0", which indicates that the designated pixel does not belong to an uncovered background area, in the uncovered-background-area determining flag associated with the designated pixel.<br>
The area determining portion 203-1 supplies the uncovered-background-area determining flag in which "1" or<br><br>
"0" is set as discussed above to a determining-flag-storing frame memory 204.<br>
When the stationary/moving determination supplied from the stationary/moving determining portion 202-2 indicates 5  "stationary" and when the stationary/moving determination<br>
supplied from the stationary/moving determining portion 202-3 indicate "stationary", the area determining portion 203-2 determines that the designated pixel in frame #n belongs to the stationary area, and sets "1", which indicates that the 10  pixel belongs to the stationary area, in a stationary-area determining flag associated with the designated pixel.<br>
When the stationary/moving determination supplied from the stationary/moving determining portion 202-2 indicates "moving" or when the stationary/moving determination 15  supplied from the stationary/moving determining portion 202-3 indicate "moving", the area determining portion 203-2 determines that the designated pixel in frame #n does not belong to the stationary area, and sets "0", which indicates that the pixel does not belong to the stationary area, in 20  the stationary-area determining flag associated with the designated pixel.<br>
The area determining portion 203-2 supplies the stationary-area determining flag in which "1" or "0" is set as discussed above to the determining-flag-storing frame 25  memory 204.<br><br>
When the stationary/moving determination supplied from the stationary/moving determining portion 202-2 indicates "moving" and when the stationary/moving determination supplied from the stationary/moving determining portion 202-3 indicate "moving", the area determining portion 203-2 determines that the designated pixel in frame #n belongs to the moving area, and sets "1", which indicates that the designated pixel belongs to the moving area, in a moving-area determining flag associated with the designated pixel. When the stationary/moving determination supplied from the stationary/moving determining portion 202-2 indicates "stationary" or when the stationary/moving determination supplied from the stationary/moving determining portion 202-3 indicate "stationary", the area determining portion 203-2 determines that the designated pixel in frame #n does not belong to the moving area, and sets "0", which indicates that the pixel does not belong to the moving area, in the moving-area determining flag associated with the designated pixel.<br>
The area determining portion 203-2 supplies the moving-area determining flag in which "1" or "0" is set as discussed above to the determining-flag-storing frame memory 204.<br>
When the stationary/moving determination supplied from the stationary/moving determining portion 202-3 indicates<br><br>
"moving" and when the stationary/moving determination supplied from the stationary/moving determining portion 202-4 indicate "stationary", the area determining portion 203-3 determines that the designated pixel in frame #n belongs to 5  a covered background area, and sets "1", which indicates<br>
that the designated pixel belongs to the covered background area, in a covered-background-area determining flag associated with the designated pixel.<br>
When the stationary/moving determination supplied from 10  the stationary/moving determining portion 202-3 indicates "stationary" or when the stationary/moving determination supplied from the stationary/moving determining portion 202-4 indicate "moving", the area determining portion 203-3 determines that the designated pixel in frame #n does not 15  belong to a covered background area, and sets "0", which indicates that the designated pixel does not belong to a covered background area, in the covered-background-area determining flag associated with the designated pixel. The area determining portion 203-3 supplies the 20  covered-background-area determining flag in which "1" or "0" is set as discussed above to the determining-flag-storing frame memory 2 04.<br>
The determining-flag-storing frame memory 204 thus stores the uncovered-background-area determining flag 25  supplied from the area determining portion 203-1, the<br><br>
stationary-area determining flag supplied from the area determining portion 203-2, the moving-area determining flag supplied from the area determining portion 203-2, and the covered-background-area determining flag supplied from the 5  area determining portion 203-3.<br>
The determining-flag-storing frame memory 204 supplies the uncovered-background-area determining flag, the stationary-area determining flag, the moving-area determining flag, and the covered-background-area 10  determining flag stored therein to a synthesizer 205.  The synthesizer 205 generates area information indicating to which of the uncovered background area, the stationary area, the moving area, or the covered background area each pixel belongs based on the uncovered-background-area determining 15  flag, the stationary-area determining flag, the moving-area determining flag, and the covered-background-area determining flag supplied from the determining-flag-storing frame memory 204, and supplies the area information to a determining-flag-storing frame memory 206. 20       The determining-flag-storing frame memory 206 stores<br>
the area information supplied from the synthesizer 205, and also outputs the area information stored therein.<br>
An example of the processing performed by the area specifying unit 103 is described below with reference to 25  Figs. 21 through 25.<br><br>
When the object corresponding to the foreground is moving, the position of the image corresponding to the object on the screen changes in every frame.  As shown in Fig. 21, the image corresponding to the object located at 5  the position indicated by Yn(x, y) in frame #n is positioned at Yn+l(x, y) in frame #n+l, which is subsequent to frame #n.<br>
A model obtained by expanding in the time direction the pixel values of the pixels aligned side-by-side in the moving direction of the image corresponding to the 10  foreground object is shown in Fig. 22.  For example, if the moving direction of the image corresponding to the foreground object is horizontal with respect to the screen, the model shown in Fig. 22 is a model obtained by expanding in the time direction the pixel values of the pixels 15  disposed on a line side-by-side.<br>
In Fig. 22, the line in frame #n is equal to the line in frame #n+l.<br>
The foreground components corresponding to the object contained in the second pixel to the thirteenth pixel from 20  the left in frame #n are contained in the sixth pixel<br>
through the seventeenth pixel from the left in frame #n+l.<br>
In frame #n, the pixels belonging to the covered background area are the eleventh through thirteenth pixels from the left, and the pixels belonging to the uncovered 25  background area are the second through fourth pixels from<br>
89<br><br>
the left.  In frame #n+l, the pixels belonging to the covered background area are the fifteenth through seventeenth pixels from the left, and the pixels belonging to the uncovered background area are the sixth through 5  eighth pixels from the left.<br>
In the example shown in Fig. 22, since the foreground components contained in frame #n are moved by four pixels in frame #n+l, the amount of movement v is 4.  The number of virtual divided portions is 4 in accordance with the amount 10  of movement v.<br>
A description is now given of a change in pixel values of the pixels belonging to the mixed area in the frames before and after a designated frame.<br>
In Fig. 23, the pixels belonging to a covered 15  background area in frame #n in which the background is<br>
stationary and the amount of movement v in the foreground is 4 are the fifteenth through seventeenth pixels from the left. Since the amount of movement v is 4, the fifteenth through seventeenth frames from the left in the previous frame #n-l 20  contain only background components and belong to the<br>
background area.  The fifteenth through seventeenth pixels from the left in frame #n-2, which is one before frame #n-l, contain only background components and belong to the background area. 25       Since the object corresponding to the background is<br>
90<br><br>
stationary, the pixel value of the fifteenth pixel from the left in frame #n-l does not change from the pixel value of the fifteenth pixel from the left in frame #n-2.  Similarly, the pixel value of the sixteenth pixel from the left in 5  frame #n-l does not change from the pixel value of the<br>
sixteenth pixel from the left in frame #n-2, and the pixel value of the seventeenth pixel from the left in frame #n-l does not change from the pixel value of the seventeenth pixel from the left in frame #n-2. 10       That is, the pixels in frame #n-l and frame #n-2 corresponding to the pixels belonging to the covered background area in frame #n consist of only background components, and the pixel values thereof do not change. Accordingly, the absolute value of the difference between 15  the pixel values is almost 0.  Thus, the stationary/moving determination made for the pixels in frame #n-l and frame #n-2 corresponding to the pixels belonging to the mixed area in frame #n by the stationary/moving determining portion 202-4 is "stationary". 20       Since the pixels belonging to the covered background area in frame #n contain foreground components, the pixel values thereof are different from those of frame #n-l consisting of only background components.  Accordingly, the stationary/moving determination made for the pixels 25  belonging to the mixed area in frame #n and the<br>
91<br><br>
corresponding pixels in frame #n-l by the stationary/moving determining portion 202-3 is "moving".<br>
When the stationary/moving determination result indicating "moving" is supplied from the stationary/moving 5  determining portion 202-3, and when the stationary/moving determination result indicating "stationary" is supplied from the stationary/moving determining portion 202-4, as discussed above, the area determining portion 203-3 determines that the corresponding pixels belong to a covered 10  background area.<br>
In Fig. 24, in frame #n in which the background is stationary and the amount of movement v in the foreground is 4, the pixels contained in an uncovered background area are the second through fourth pixels from the left.  Since the 15  amount of movement v is 4, the second through fourth pixels from the left in the subsequent frame #n+l contain only background components and belong to the background area.  In frame #n+2, which is subsequent to frame #n+l, the second through fourth pixels from the left contain only background 20  components and belong to the background area.<br>
Since the object corresponding to the background is stationary, the pixel value of the second pixel from the left in frame #n+2 does not change from the pixel value of the second pixel from the left in frame #n+l.  Similarly, 25  the pixel value of the third pixel from the left in frame<br>
92-<br><br>
#n+2 does not change from the pixel value of the third pixel from the left in frame #n+l, and the pixel value of the fourth pixel from the left in frame #n+2 does not change from the pixel value of the fourth pixel from the left in 5  frame #n+l.<br>
That is, the pixels in frame #n+l and frame #n+2 corresponding to the pixels belonging to the uncovered background area in frame #n consist of only background components, and the pixel values thereof do not change. .10  Accordingly, the absolute value of the difference between the pixel values is almost 0.  Thus, the stationary/moving determination made for the pixels in frame #n+l and frame #n+2 corresponding to the pixels belonging to the mixed area in frame #n by the stationary/moving determining portion 15  202-1 is "stationary".<br>
Since the pixels belonging to the uncovered background area in frame #n contain foreground components, the pixel values thereof are different from those of frame #n+l consisting of only background components.  Accordingly, the 20  stationary/moving determination made for the pixels belonging to the mixed area in frame #n and the corresponding pixels in frame #n+l by the stationary/moving determining portion 202-2 is "moving".<br>
When the stationary/moving determination result 25  indicating "moving" is supplied from the stationary/moving<br>
93<br><br>
determining portion 202-2, and when the stationary/moving determination result indicating "stationary" is supplied from the stationary/moving determining portion 202-1, as discussed above, the area determining portion 203-1 5  determines that the corresponding pixels belong to an uncovered background area.<br>
Fig. 25 illustrates determination conditions for frame #n made by the area specifying unit 103.  When the determination result for the pixel in frame #n-2 located at 10  the same image position as a pixel in frame #n to be<br>
processed and for the pixel in frame #n-l located at the same position as the pixel in frame #n is stationary, and when the determination result for the pixel in frame #n and the pixel in frame #n-l located at the same image position 15  as the pixel in frame #n is moving, the area specifying unit 103 determines that the pixel in frame #n belongs to a covered background area.<br>
When the determination result for the pixel in frame #n and the pixel in frame #n-l located at the same image 20  position as the pixel in frame #n is stationary, and when the determination result for the pixel in frame #n and the pixel in frame #n+l located at the same image position as the pixel in frame #n is stationary, the area specifying unit 103 determines that the pixel in frame #n belongs to 25  the stationary area.<br>
94<br><br>
When the determination result for the pixel in frame #n and the pixel in frame #n-l located at the same image position as the pixel in frame #n is moving, and when the determination result for the pixel in frame #n and the pixel 5  in frame #n+l located at the same image position as the pixel in frame #n is moving, the area specifying unit 103 determines that the pixel in frame #n belongs to the moving area.<br>
When the determination result for the pixel in frame #n 10  and the pixel in frame #n+l located at the same image<br>
position as the pixel in frame #n is moving, and when the determination result for the pixel in frame #n+l located at the same image position as the pixel in frame #n and the pixel in frame #n+2 located at the same image position as 15  the pixel in frame #n is stationary, the area specifying<br>
unit 103 determines that the pixel in frame #n belongs to an uncovered background area.<br>
Figs. 26A through 26D illustrate examples of the area determination results obtained by the area specifying unit 20  103.  In Fig. 26A, the pixels which are determined to belong to a covered background area are indicated in white.  In Fig. 26B, the pixels which are determined to belong to an uncovered background area are indicated in white.<br>
In Fig. 26C, the pixels which are determined to belong 25  to a moving area are indicated in white.  In Fig. 26D, the<br>
95<br><br>
pixels which are determined to belong to a stationary area are indicated in white.<br>
Fig. 27 illustrates the area information indicating the mixed area, in the form of an image, selected from the area 5  information output from the determining-flag-storing frame memory 206.  In Fig. 27, the pixels which are determined to belong to the covered background area or the uncovered background area, i.e., the pixels which are determined to belong to the mixed area, are indicated in white.  The area 10  information indicating the mixed area output from the<br>
determining-flag-storing frame memory 206 designates the mixed area and the portions having a texture surrounded by the portions without a texture in the foreground area.<br>
The area specifying processing performed by the area 15  specifying unit 103 is described below with reference to the flowchart of Fig. 28.  In step S201, the frame memory 201 obtains an image of frame #n-2 through frame #n+2 including frame #n, for which a determination is to be made.<br>
In step S202, the stationary/moving determining portion 20  202-3 determines whether the determination result for the<br>
pixel in frame #n-l and the pixel in frame #n located at the same position is stationary.  If it is determined that the determination result is stationary, the process proceeds to step S203 in which the stationary/moving determining portion 25  202-2 determines whether the determination result for the<br>
96<br><br>
pixel in frame #n and the pixel in frame #n+l located at the same position is stationary.<br>
If it is determined in step S203 that the determination result for the pixel in frame #n and the pixel in frame #n+l 5  located at the same position is stationary, the process<br>
proceeds to step S204.  In step S204, the area determining portion 203-2 sets "1", which indicates that the pixel to be processed belongs to the stationary area, in the stationary-area determining flag associated with the pixel to be<br>
10  processed.  The area determining portion 203-2 supplies the stationary-area determining flag to the determining-flag-storing frame memory 204, and the process proceeds to step S205.<br>
If it is determined in step S202 that the determination<br>
15  result for the pixel in frame #n-l and the pixel in frame #n located at the same position is moving, or if it is determined in step S203 that the determination result for the pixel in frame #n and the pixel in frame #n+l located at the same position is moving, the pixel to be processed does<br>
20  not belong to a stationary area.  Accordingly, the<br>
processing of step S204 is skipped, and the process proceeds to step S205.<br>
In step S205, the stationary/moving determining portion 202-3 determines whether the determination result for the<br>
25  pixel in frame #n-l and the pixel in frame #n located at the<br>
97<br><br>
same position is moving.  If it is determined that the determination result is moving, the process proceeds to step S206 in which the stationary/moving determining portion 202-2 determines whether the determination result for the pixel 5  in frame #n and the pixel in frame #n+l located at the same position is moving.<br>
If it is determined in step S206 that the determination result for the pixel in frame #n and the pixel in frame #n+l located at the same position is moving, the process proceeds 10  to step S207.  In step S207, the area determining portion 203-2 sets "1", which indicates that the pixel to be processed belongs to a moving area, in the moving-area determining flag associated with the pixel to be processed. The area determining area 203-2 supplies the moving-area 15  determining flag to the determining-flag-storing frame memory 204, and the process proceeds to step S208.<br>
If it is determined in step S205 that the determination result for the pixel in frame #n-l and the pixel in frame #n located at the same position is stationary, or if it is 20  determined in step S206 that the determination result for<br>
the pixel in frame #n and the pixel in frame #n+l located at the same position is stationary, the pixel in frame #n does not belong to a moving area.  Accordingly, the processing of step S207 is skipped, and the process proceeds to step S208. 25       In step S208, the stationary/moving determining portion<br>
98<br><br>
202-4 determines whether the determination result for the pixel in frame #n-2 and the pixel in frame #n-l located at the same position is stationary.  If it is determined that the determination result is stationary, the process proceeds 5  to step S209 in which the stationary/moving determining portion 202-3 determines whether the determination result for the pixel in frame #n-l and the pixel in frame #n located at the same position is moving.<br>
If it is determined in step S209 that the determination 10  result for the pixel in frame #n-l and the pixel in frame #n located at the same position is moving, the process proceeds to step S210.  In step S210, the area determining portion 203-3 sets "1", which indicates that the pixel to be processed belongs to a covered background area, in the 15  covered-background-area determining flag associated with the pixel to be processed.  The area determining portion 203-3 supplies the covered-background-area determining flag to the determining-flag-storing frame memory 204, and the process proceeds to step S211.  The area determining portion 203-3 20  supplies the covered-background-area determining flag to the determining-flag-storing frame memory 204, and the process proceeds to step S211.<br>
If it is determined in step S208 that the determination result for the pixel in frame #n-2 and the pixel in frame 25  #n-l located at the same position is moving, or if it is<br>
99<br><br>
determined in step S209 that the pixel in frame #n-l and the pixel in frame #n located at the same position is stationary, the pixel in frame #n does not belong to a covered background area.  Accordingly, the processing of step S210 5  is skipped, and the process proceeds to step S211.<br>
In step S211, the stationary/moving determining portion 202-2 determines whether the determination result for the pixel in frame #n and the pixel in frame #n+l located at the same position is moving.  If it is determined in step S211 10  that the determination result is moving, the process proceeds to step S212 in which the stationary/moving determining portion 202-1 determines whether the determination result for the pixel in frame #n+l and the pixel in frame #n+2 located at the same position is 15  stationary.<br>
If it is determined in step S212 that the determination result for the pixel in frame #n+l and the pixel in frame #n+2 located at the same position is stationary, the process proceeds to step S213.  In step S213, the area determining 20  portion 203-1 sets "1", which indicates that the pixel to be processed belongs to an uncovered background area, in the uncovered-background-area determining flag associated with the pixel to be processed.  The area determining portion 203-1 supplies the uncovered-background-flag determining 25  flag to the determining-flag-storing frame memory 204, and<br>
100<br><br>
the process proceeds to step S214.<br>
If it is determined in step S211 that the determination result for the pixel in frame #n and the pixel in frame #n+l located at the same position is stationary, or if it is 5  determined in step S212 that the determination result for the pixel in frame #n+l and the pixel in frame #n+2 is moving, the pixel in frame #n does not belong to an uncovered background area.  Accordingly, the processing of step S213 is skipped, and the process proceeds to step S214. 10      In step S214, the area specifying unit 103 determines whether the areas of all the pixels in frame #n are specified.  If it is determined that the areas of all the pixels in frame #n are not yet specified, the process returns to step S202, and the area specifying processing is 15  repeated for the remaining pixels.<br>
If it is determined in step S214 that the areas of all the pixels in frame #n are specified, the process proceeds to step S215.  In step S215, the synthesizer 215 generates area information indicating the mixed area based on the 2 0  uncovered-background-area determining flag and the covered-background-area determining flag stored in the determining-flag-storing frame memory 204, and also generates area information indicating to which of the uncovered background area, the stationary area, the moving area, or the covered 25  background area each pixel belongs, and sets the generated<br>
101<br><br>
area information in the determining-flag-storing frame memory 206.  The processing is then completed.<br>
As discussed above, the area specifying unit 103 is capable of generating area information indicating to which 5  of the moving area, the stationary area, the uncovered<br>
background area, or the covered background area each of the pixels contained in a frame belongs.<br>
The area specifying unit 103 may apply logical OR to the area information corresponding to the uncovered 10  background area and the area information corresponding to the covered background area so as to generate area information corresponding to the mixed area, and then may generate area information consisting of flags indicating to which of the moving area, the stationary area, or the mixed 15  area the individual pixels contained in the frame belong. When the object-corresponding to the foreground has a texture, the area specifying unit 103 is able to specify the moving area more precisely.<br>
The area specifying unit 103 is able to output the area 20  information indicating the moving area as the area<br>
information indicating the foreground area, and outputs the area information indicating the stationary area as the area information indicating the background area.<br>
The embodiment has been described, assuming that the 25  object corresponding to the background is stationary.<br>
102<br><br>
However, the above-described area specifying processing can be applied even if the image corresponding to the background area contains motion.  For example, if the image corresponding to the background area is uniformly moving, 5  the area specifying unit 103 shifts the overall image in accordance with this motion, and performs processing in a manner similar to the case in which the object corresponding to the background is stationary.  If the image corresponding to the background area contains locally different motions, 10  the area specifying unit 103 selects the pixels<br>
corresponding to the motions, and executes the above-described processing.<br>
Fig. 29 is a block diagram illustrating another example of the configuration of the area specifying unit 103.  The 15  area specifying unit 103 shown in Fig. 29 does not use a<br>
motion vector.  A background image generator 301 generates a background image corresponding to an input image, and supplies the generated background image to a binary-object-image extracting portion 302.  The background image 20  generator 301 extracts, for example, an image object<br>
corresponding to a background object contained in the input image, and generates the background image.<br>
An example of a model obtained by expanding in the time direction the pixel values of pixels aligned side-by-side in 25  the moving direction of an image corresponding to a<br>
103<br><br>
foreground object is shown in Fig. 30.  For example, if the moving direction of the image corresponding to the foreground object is horizontal with respect to the screen, the model shown in Fig. 30 is a model obtained by expanding 5  the pixel values of pixels disposed side-by-side on a single line in the time direction.<br>
In Fig. 30, the line in frame #n is the same as the line in frame #n-l and the line in frame #n+l.<br>
In frame #n, the foreground components corresponding to 10 the object contained in the sixth through seventeenth pixels from the left are contained in the second through thirteenth pixels from the left in frame #n-l and are also contained in the tenth through twenty-first pixel from the left in frame #n+l. 15       In frame #n-l, the pixels belonging to the covered<br>
background area are the eleventh through thirteenth pixels from the left, and the pixels belonging to the uncovered background area are the second through fourth pixels from the left.  In frame #n, the pixels belonging to the covered 20  background area are the fifteenth through seventeenth pixels from the left, and the pixels belonging to the uncovered background area are the sixth through eighth pixels from the left.  In frame #n+l, the pixels belonging to the covered background area are the nineteenth through twenty-first 25  pixels from the left, and the pixels belonging to the<br>
104<br><br>
uncovered background area are the tenth through twelfth pixels from the left.<br>
In frame #n-l, the pixels belonging to the background area are the first pixel from the left, and the fourteenth 5  through twenty-first pixels from the left.  In frame #n, the pixels belonging to the background area are the first through fifth pixels from the left, and the eighteenth through twenty-first pixels from the left.  In frame #n+l, the pixels belonging to the background area are the first 10  through ninth pixels from the left.<br>
An example of the background image corresponding to the example shown in Fig. 30 generated by the background image generator 301 is shown in Fig. 31.  The background image consists of the pixels corresponding to the background 15  object, and does not contain image components corresponding to the foreground object.<br>
The binary-object-image extracting portion 302 generates a binary object image based on the correlation between the background image and the input image, and 20  supplies the generated binary object image to a time change detector 303.<br>
Fig. 32 is a block diagram illustrating the configuration of the binary-object-image extracting portion 302.  A correlation-value calculator 321 calculates the 25  correlation between the background image supplied from the<br>
105<br><br>
background image generator 301 and the input image so as to generate a correlation value, and supplies the generated correlation value to a threshold-value processor 322.<br>
The correlation-value calculator 321 applies eguation 5  (4) to, for example, 3x3-background image blocks having X4 at the center, as shown in Fig. 33A, and to, for example, 3x3-background image blocks having Y4 at the center which corresponds to the background image blocks, as shown in Fig. 33B, thereby calculating a correlation value corresponding 10  to Y4.<br><br><br><br><br><br>
	(<br>
The correlation-value calculator 321 supplies the 15  correlation value calculated for each pixel as discussed above to the threshold-value processor 322.<br>
Alternatively, the correlation-value calculator 321 may apply equation (7) to, for example, 3x3-background image blocks having X4 at the center, as shown in Fig. 34A, and to, 20  for- example, 3x3-background image blocks having Y4 at the<br>
106<br><br>
center which corresponds to the background image blocks, as shown in Fig. 34B, thereby calculating the sum of absolute<br>
values of differences corresponding to Y4.<br>
s Sum of absolute values of differences = ^ j(Xi - Yi)|      (7)<br>
i = 0<br>
5       The correlation-value calculator 321 supplies the<br>
absolute values of the differences calculated as described above to the threshold-value processor 322 as the correlation value.<br>
The threshold-value processor 322 compares the pixel 10  value of the correlation image with a threshold value thO. If the correlation value is smaller than or equal to the threshold value thO, 1 is set in the pixel value of the binary object image.  If the correlation value is greater than the threshold value thO, 0 is set in the pixel value of 15  the binary object image.  The threshold-value processor 322 then outputs the binary object image whose pixel value is set to 0 or 1.  The threshold-value processor 322 may store the threshold value thO therein in advance, or may use the threshold value thO input from an external source. 20       Fig. 35 illustrates the binary object image<br>
corresponding to the model of the input image shown in Fig. 30.  In the binary object image, 0 is set in the pixel values of the pixels having a higher correlation with the background image.<br>
107<br><br>
Fig. 36 is a block diagram illustrating the configuration of the time change detector 303.  When determining the area of a pixel in frame #n, a frame memory 341 stores a binary object image of frame #n-l, frame #n, 5  and frame #n+l supplied from the binary-object-image extracting portion 302.<br>
An area determining portion 342 determines the area of each pixel in frame #n based on the binary object image of frame #n-l, frame #n, and frame #n+l so as to generate area 10  information, and outputs the generated area information.<br>
Fig. 37 illustrates the determinations made by the area determining portion 342.  When the designated pixel of the binary object image in frame #n is 0, the area determining portion 342 determines that the designated pixel in frame #n 15  belongs to the background area.<br>
When the designated pixel of the binary object image in frame #n is 1, and when the corresponding pixel of the binary object image in frame #n-l is 1, and when the corresponding pixel of the binary object image in frame #n+l 20  is 1, the area determining portion 342 determines that the designated pixel in frame #n belongs to the foreground area. When the designated pixel of the binary object image in frame #n is 1, and when the corresponding pixel of the binary object image in frame #n-l is 0, the area determining 25  portion 342 determines that the designated pixel in frame #n<br>
108<br><br>
belongs to a covered background area.<br>
When the designated pixel of the binary object image in frame #n is 1, and when the corresponding pixel of the binary object image in frame #n+l is 0, the area determining 5  portion 342 determines that the designated pixel in frame #n belongs to an uncovered background area.<br>
Fig. 38 illustrates an example of the determinations made by the time change detector 303 on the binary object image corresponding to the model of the input image shown in 10  Fig. 30.  The time change detector 303 determines that the first through fifth pixels from the left in frame #n belong to the background area since the corresponding pixels of the binary object image in frame #n are 0.<br>
The time change detector 303 determines that the sixth 15  through ninth pixels from the left belong to the uncovered background area since the pixels of the binary object image in frame #n are 1, and the corresponding pixels in frame #n+l are 0.<br>
The time change detector 303 determines that the tenth 20  through thirteenth pixels from the left belong to the<br>
foreground area since the pixels of the binary object image in frame #n are 1, the corresponding pixels in frame #n-l are 1, and the corresponding pixels in frame #n+l are 1. The time change detector 303 determines that the 25  fourteenth through seventeenth pixels from the left belong<br>
109<br><br>
indicated by the example shown in Fig. 44, based on the motion vector supplied from the motion detector 102, and supplies the motion-compensated binary object images to the switch 382. 5       The switch 382 outputs the motion-compensated binary<br>
object image of the first frame to a frame memory 383-1, and outputs the motion-compensated binary object image of the second frame to a frame memory 383-2.  Similarly, the switch 382 outputs the motion-compensated binary object images of 10  the third through (N-l)-th frame to frame memories 383-3<br>
through 383-(N-l), and outputs the motion-compensated binary object image of the N-th frame to a frame memory 383-N.<br>
The frame memory 383-1 stores the motion-compensated binary object image of the first frame, and outputs the 15  stored binary object image to a weighting portion 384-1.<br>
The frame memory 383-2 stores the motion-compensated binary object image of the second frame, and outputs the stored binary object image to a weighting portion 384-2.<br>
Similarly, the frame memories 383-3 through 383-(N-l) 20  stores the motion-compensated binary object images of the<br>
third through (N-l)-th frames, and outputs the stored binary object images to weighting portions 384-3 through 384-(N-l). The frame memory 383-N stores the motion-compensated binary object image of the N-th frame, and outputs the stored 25  binary object image to a weighting portion 384-N.<br>
110<br><br>
The weighting portion 384-1 multiplies the pixel value of the motion-compensated binary object image of the first frame supplied from the frame memory 3 83-1 by a predetermined weight wl, and supplies a weighted binary 5  object image to an accumulator 385.  The weighting portion 384-2 multiplies the pixel value of the motion-compensated binary object image of the second frame supplied from the frame memory 3 83-2 by a predetermined weight w2, and supplies the weighted binary object image to the accumulator 10  385.<br>
Likewise, the weighting portions 384-3 through 384-(N-1) multiply the pixel values of the motion-compensated binary object images of the third through (N-l)-th frames supplied from the frame memories 383-3 through 383- (N-l) by 15  predetermined weights w3 through w(N-l), and supplies the weighted binary object images to the accumulator 385.  The weighting portion 384-N multiplies the pixel value of the motion-compensated binary object image of the N-th frame supplied from the frame memory 383-N by a predetermined 20  weight wN, and supplies the weighted binary object image to the accumulator 385.<br>
The accumulator 385 accumulates the pixel values of the motion-compensated binary object images multiplied by the weights wl through wN of the first through N-th frames, and 25  compares the accumulated pixel value with the predetermined<br>
111<br><br>
threshold value thO, thereby generating the binary object image.<br>
As discussed above, the robust-processing portion 361 generates a robust binary object image from N binary object 5  images, and supplies it to the time change detector 303. Accordingly, the area specifying unit 103 configured as shown in Fig. 41 is able to specify the area more precisely than that shown in Fig. 29 even if noise is contained in the input image. 10       The area specifying processing performed by the area specifying unit 103 configured as shown in Fig. 41 is described below with reference to the flowchart of Fig. 45. The processings of step S341 through step S343 are similar to those of step S301 through step S303 discussed with 15  reference to the flowchart of Fig. 39, and an explanation thereof is thus omitted.<br>
In step S344, the robust-processing portion 361 performs the robust processing.<br>
In step S345, the time change detector 303 performs the 20  area determining processing, and the processing is completed. Details of the processing of step S345 are similar to the processing discussed with reference to the flowchart of Fig. 40, and an explanation thereof is thus omitted.<br>
Details of the robust processing corresponding to the 25  processing of step S344 in Fig. 45 are given below with<br>
112<br><br>
reference to the flowchart of Fig. 46.  In step S361, the motion compensator 381 performs the motion compensation of an input binary object image based on the motion vector and the positional information thereof supplied from the motion 5  detector 102.  In step S362, one of the frame memories 383-1 through 383-N stores the corresponding motion-compensated binary object image supplied via the switch 382.<br>
In step S363, the robust-processing portion 361 determines whether N binary object images are stored.  If it 10  is determined that N binary object images are not stored, the process returns to step S361, and the processing for compensating for the motion of the binary object image and the processing for storing the binary object image are repeated. 15      If it is determined in step S363 that N binary object images are stored, the process proceeds to step S364 in which weighting is performed.  In step S364, the weighting portions 384-1 through 384-N multiply the corresponding N binary object images by the weights wl through wN. 20       In step S365, the accumulator 385 accumulates the N weighted binary object images.<br>
In step S366, the accumulator 385 generates a binary object image from the accumulated images by, for example, comparing the -accumulated value with a predetermined 25  threshold value thl, and the processing is completed.<br>
113<br><br>
As discussed above, the area specifying unit 103 configured as shown in Fig. 41 is able to generate area information based on the robust binary object image.<br>
As is seen from the foregoing description, the area 5  specifying unit 103 is able to generate area information<br>
indicating to which of the moving area, the stationary area, the uncovered background area, or the covered background area each pixel contained in a frame belongs.<br>
Fig. 47 is a block diagram illustrating an example of 10  the configuration of the mixture-ratio calculator 104.  An estimated-mixture-ratio processor 401 calculates an estimated mixture ratio for each pixel by calculations corresponding to a model of a covered background area based on the input image, and supplies the calculated estimated 15  mixture ratio to a mixture-ratio determining portion 403.<br>
An estimated-mixture-ratio processor 402 calculates an estimated mixture ratio for each pixel by calculations corresponding to a model of an uncovered background area based on the input image, and supplies the calculated 20  estimated mixture ratio to the mixture-ratio determining portion 403.<br>
Since it can be assumed that the object corresponding to the foreground is moving with constant velocity within the shutter time, the mixture ratio a of the pixels 25  belonging to a mixed area exhibits the following<br>
114<br><br>
characteristics.  That is, the mixture ratio a linearly changes according to the positional change in the pixels. If the positional change in the pixels is one-dimensional, a change in the mixture ratio a can be represented linearly. 5  If the positional change in the pixels is two-dimensional, a change in the mixture ratio a can be represented on a plane.<br>
Since the period of one frame is short, it can be assumed that the object corresponding to the foreground is a rigid body moving with constant velocity. 10       The gradient of the mixture ratio a is inversely<br>
proportional to the amount of movement v within the shutter time of the foreground.<br>
An example of the ideal mixture-ratio a is shown in Fig. 48.  The gradient 1 of the ideal mixture-ratio a in the 15  mixed area can be represented by the reciprocal of the amount of movement v.<br>
As shown in Fig. 48, the ideal mixture-ratio a has the value of 1 in the background area, the value of 0 in the foreground area, and the value of greater than 0 and smaller 20  than 1 in the mixed area.<br>
In the example shown in Fig. 49, the pixel value C06  of the seventh pixel from the left in frame #n can be indicated by equation (8) by using the pixel value P06 of the seventh pixel from the left in frame #n-l. 25<br>
115<br><br><br><br>
In equation (8), the pixel value C06 is indicated by a pixel value M of the pixel in the mixed area, while the pixel value P06 is indicated by a pixel value B of the pixel 5  in the background area.  That is, the pixel value M of the pixel in the mixed area and the pixel value B of the pixel in the background area can be represented by equations (9) and (10), respectively.<br>
M = C06	(9)<br>
10       B = P06	(10)<br>
In equation (8), 2/v corresponds to the mixture ratio a. Since the amount of movement v is 4, the mixture ratio a of the seventh pixel from the left in frame #n is 0.5.<br>
As discussed above, the pixel value C in the designated<br>
15  frame #n is considered as the pixel value in the mixed area,<br>
while the pixel value P of  frame #n-l prior to frame #n is<br>
considered as the pixel value in the background area.<br>
Accordingly, equation (3) indicating the mixture ratio a can<br>
be represented by equation (11):<br>
20       C = a-P+f	(11)<br>
where f in equation (11) indicates the sum of the foreground components ∑1Fi/v contained in the designated pixel.  The variables contained in equation (11) are two factors, i.e.,<br>
116<br><br>
the mixture ratio a and the sum f of the foreground components.<br>
Similarly, a model obtained by expanding in the time direction the pixel values in which the amount of movement 5  is 4 and the number of virtual divided portions is 4 in an uncovered background area is shown in Fig. 50.<br>
As in the representation of the covered background area, in the uncovered background area, the pixel value C of the designated frame #n is considered as the pixel value in the 10  mixed area, while the pixel value N of frame #n+l subsequent to frame #n is considered as the background area. Accordingly, equation (3) indicating the mixture ratio a can be represented by equation (12).<br>
C = oc-N+f	(12)<br>
15      The embodiment has been described, assuming that the background object is stationary.  However, equations (8) through (12) can be applied to the case in which the background object is moving by using the pixel value of a pixel located corresponding to the amount of movement v of 20  the background.  It is now assumed, for example, in Fig. 49, that the amount of movement v of the object corresponding to the background is 2, and the number of virtual divided portions is 2.  In this case, when the object corresponding to the background is moving to the right in Fig. 49, the 25  pixel value B of the pixel in the background area in<br>
117<br><br>
equation (10) is represented by a pixel value P04.<br>
Since equations (11) and (12) each contain two variables, the mixture ratio a cannot be determined without modifying the equations.  Here, generally, since an image 5  has a strong correlation in relation to space, pixels in proximity to each other have approximately the same pixel values.<br>
Accordingly, since the foreground components have a strong correlation in relation to space, the equation is 10  modified so that the sum f of the foreground components can be derived from the previous or subsequent frame, and the mixture ratio a is determined.<br>
The pixel value Mc of the seventh pixel from the left in frame #n in Fig. 51 can be expressed by equation (13):<br>
(13)<br>
15 <br>
In equation (13), 2/v of the first term of the right side corresponds to the mixture ratio a.  The second term of the right side in equation (13) is shown as in equation (14) :<br>
(14)<br>
20 <br>
Here, by using the space correlation of the foreground components, it is assumed that equation (15) holds:<br>
F = F05 = F06 = F07 = F08 -  F09 = F10 = Fll = F12  (15)<br>
118<br><br>
Equation (14) can be replaced as shown in equation (16) by using equation (15):<br>
  (16)<br>
As a result, P can be expressed by equation (17) :<br>
5       (3 = 2/4	(17)<br>
In general, if it is assumed that, as shown in equation (15), the foreground components related to the mixed area are equal, equation (18) holds for all the pixels of the mixed area on the basis of the relation of the internal 10  ratio:<br>
P = 1 - a	(18)<br>
If it is assumed that equation (18) holds, equation (11) can be expanded as shown in equation (19):<br>
  (19)<br>
15       Similarly, if it is assumed that equation (18) holds, equation (12) can be expanded as shown in equation (20):<br>
  (20)<br>
119<br><br>
In equations (19) and (20), since C, N, and P are known pixel values, the variables contained in equations (19) and (20) are only the mixture ratio a.  The relationship among C, N, and P in equations (19) and (20) is shown in Fig. 52.  C indicates the pixel value of the designated pixel in frame #n.  N indicates the pixel value of the pixel in frame #n+l, whose position in the spatial direction corresponds to the designated pixel.  P indicates the pixel value of the pixel in frame #n-l, whose position in the spatial direction corresponds to the designated pixel.<br>
Therefore, since equations (19) and (20) each contain a single variable, the mixture ratio a can be calculated using the pixel values of the pixels of three frames.  By solving equations (19) and (20), it is shown that the condition under which the correct mixture ratio a is calculated is that the foreground components related to the mixed area are equal, that is, the pixel values of the successive pixels of a number twice the amount of movement v, which are the pixels positioned at the boundary of the image object, corresponding to the moving direction of the object of the foreground, in the image object of the foreground, which is captured when the foreground object is stationary, are fixed.<br>
As discussed above, the mixture ratio a of the pixels belonging to the covered background area is calculated on the basis of equation (21), and the mixture ratio a of the<br>
120<br><br>
pixels belonging to the uncovered background area is<br>
calculated on the basis of equation (22).<br>
a = (C-N)/ (P-N)	(21)<br>
a = (C-P)/ (N-P)	(22)<br>
5       Fig. 53 is a block diagram illustrating the<br>
configuration of the mixture ratio estimation processor 401. A frame memory 421 stores input images in units of frames, and supplies the frame which is one frame after the frame input as the input image to a frame memory 422 and a 10  mixture-ratio calculator 423.<br>
The frame memory 422 stores input images in units of frames, and supplies the frame which is one frame after the frame supplied from the frame memory 421 to the mixture-ratio calculator 423. 15       Therefore, when the frame #n+l has been input as an<br>
input image to the mixture-ratio calculator 423, the frame memory 421 supplies frame #n to the mixture-ratio calculator 423, and the frame memory 422 supplies the frame #n-l to the mixture-ratio calculator 423. 20       Based on the calculation shown in equation (21), the mixture-ratio calculator 423 calculates the estimated mixture ratio of the designated pixel, on the basis of the pixel value C of the designated pixel in frame #n, the pixel value N of the pixel in frame #n+l, whose spatial position 25  corresponds to the designated pixel, and the pixel value P<br>
121<br><br>
of the pixel in frame #n-l, whose spatial position corresponds to the designated pixel, and outputs the calculated estimated mixture ratio.  For example, when the background is stationary, the mixture-ratio calculator 423 5  calculates the estimated mixture ratio of the designated pixel on the basis of the pixel value C of the designated pixel in frame #n, the pixel value N of the pixel in frame #n+l, whose position within the frame is the same as that of the designated pixel, and the pixel value P of the pixel in 10  frame #n-l, whose position within the frame is the same as that of the designated pixel, and outputs the calculated estimated mixture ratio.<br>
In this manner, the estimated-mixture-ratio processor 401 is able to calculate the estimated mixture ratio based 15  on the input image, and supplies it to the mixture-ratio determining portion 403.<br>
The estimated-mixture-ratio processor 402 is configured the same as the estimated-mixture-ratio processor 401 except that, whereas the estimated-mixture-ratio processor 401 20  calculates the estimated mixture ratio of the designated<br>
pixel on the basis of the calculation shown in equation (21), the estimated-mixture-ratio processor 402 calculates the estimated mixture ratio of the designated pixel on the basis of the calculation shown in equation (22), and an 25  explanation thereof is thus omitted.<br>
122<br><br>
Fig. 54 shows an example of an estimated mixture ratio calculated by the estimated-mixture-ratio processor 401. The estimated mixture ratio shown in Fig. 54 shows, for one line, the result in a case where the amount of movement v of 5  the foreground corresponding to an  object  moving with constant velocity is 11.<br>
It can be seen that the estimated mixture ratio nearly changes linearly, as shown in Fig. 48.<br>
Referring back to Fig. 47, a mixture-ratio determining 10  portion 403 sets the mixture ratio a based on the area<br>
information supplied from the area specifying unit 103 and indicating to which of the foreground area, the background area, the covered background area, or the uncovered background area the pixel for which the mixture ratio a is 15  to be calculated belongs.  The mixture-ratio determining portion 403 sets the mixture ratio a to 0 when the corresponding pixel belongs to the foreground area, and sets the mixture ratio a to 1 when the corresponding pixel belongs to the background area.  When the corresponding 2 0  pixel belongs to the covered background area, the mixture-ratio determining portion 403 sets the estimated mixture ratio supplied from the estimated-mixture-ratio processor 401 as the mixture ratio a.  When the corresponding pixel belongs to the uncovered background area, the mixture-ratio 25  determining portion 403 sets the estimated mixture ratio<br>
123<br><br>
supplied from the estimated-mixture-ratio processor 402 as the mixture ratio a.  The mixture-ratio determining portion 403 outputs the mixture ratio a which has been set based on the area information. 5      Fig. 55 is a block diagram illustrating another configuration of the mixture-ratio calculator 104.  A selector 441 supplies a pixel belonging to the covered background area and the corresponding pixel in the previous and subsequent frames to an estimated-mixture-ratio 10  processor 442 based on the area information supplied from the area specifying unit 103.  The selector 441 supplies a pixel belonging to the uncovered background area and the corresponding pixel in the previous and subsequent frames to an estimated-mixture-ratio processor 443 based on the area 15  information supplied from the area specifying unit 103.<br>
Based on the pixel values input from the selector 441, the estimated-mixture-ratio processor 442 calculates the estimated mixture ratio of the designated pixel belonging to the covered background area by the calculation shown in 20  equation (21), and supplies the calculated estimated mixture ratio to a selector 444.<br>
Based on the pixel values input from the selector 441, the estimated-mixture-ratio processor 443 calculates the estimated mixture ratio of the designated pixel belonging to 25  the uncovered background area by the calculation shown in<br>
124<br><br>
equation (22), and supplies the calculated estimated mixture ratio to the selector 444.<br>
Based on the area information supplied from the area specifying unit 103, the selector 444 sets the mixture ratio 5  a to 0 when the designated pixel belongs to the foreground area, and sets the mixture ratio a to 1 when the designated pixel belongs to the background area.  When the designated pixel belongs to the covered background area, the selector 444 selects the estimated mixture ratio supplied from the 10  estimated-mixture-ratio processor 442 and sets it as the<br>
mixture ratio a.  When the designated pixel belongs to the uncovered background area, the selector 444 selects the estimated mixture ratio supplied from the estimated-mixture-ratio processor 443 and sets it as the mixture ratio  a. 15  The selector 444 then outputs the mixture ratio a which has been selected and set based on the area information.<br>
As discussed above, the mixture-ratio calculator 104 configured as shown in Fig. 55 is able to calculate the mixture ratio a for each pixel contained in the image, and 20  outputs the calculated mixture ratio a.<br>
The calculation processing for the mixture ratio a performed by the mixture-ratio calculator 104 configured as shown in Fig. 47 is discussed below with reference to the flowchart of Fig. 56.  In step S401, the mixture-ratio 25  calculator 104 obtains area information supplied from the<br>
129<br><br>
area specifying unit 103.  In step S402, the estimated-mixture-ratio processor 401 executes the processing for estimating the mixture ratio by using a model corresponding to a covered background area, and supplies the estimated 5  mixture ratio to the mixture-ratio determining portion 403. Details of the processing for estimating the mixture ratio are discussed below with reference to the flowchart of Fig. 57.<br>
In step S403, the estimated-mixture-ratio processor 402 10  executes the processing for estimating the mixture ratio by using a model corresponding to an uncovered background area, and supplies the estimated mixture ratio to the mixture-ratio determining portion 403.<br>
In step S404, the mixture-ratio calculator 104 15  determines whether the mixture ratios have been estimated for the whole frame.  If it is determined that the mixture ratios have not yet been estimated for the whole frame, the process returns to step S402, and the processing for estimating the mixture ratio a for the subsequent pixel is 20  executed.<br>
If it is determined in step S404 that the mixture ratios have been estimated for the whole frame, the process proceeds to step S405.  In step S405, the mixture-ratio determining portion 403 sets the mixture ratio based on the 25  area information supplied from the area specifying unit 103<br>
126<br><br>
and indicating to which of the foreground area, the background area, the covered background area, or the uncovered background area the pixel for which the mixture ratio a is to be calculated belongs.  The mixture-ratio 5  determining portion 403 sets the mixture ratio a to 0 when the corresponding pixel belongs to the foreground area, and sets the mixture ratio a to 1 when the corresponding pixel belongs to the background area.  When the corresponding pixel belongs to the covered background area, the mixture-10  ratio determining portion 403 sets the estimated mixture ratio supplied from the estimated-mixture-ratio processor 401 as the mixture ratio a.  When the corresponding pixel belongs to the uncovered background area, the mixture-ratio determining portion 403 sets the estimated mixture ratio 15  supplied from the estimated-mixture-ratio processor 402 as the mixture ratio a.  The processing is then completed.<br>
As discussed above, the mixture-ratio calculator 104 is able to calculate the mixture ratio a, which indicates a feature quantity corresponding to each pixel, based on the 20  area information supplied from the area specifying unit 103, and the input image.<br>
The processing for calculating the mixture ratio a performed by the mixture-ratio calculator 104 configured as shown in Fig.. 55 is similar to that discussed with reference 25  to the flowchart of Fig. 56, and an explanation thereof is<br>
131<br><br>
thus omitted.<br>
A description is now given, with reference to the flowchart of Fig. 57, of the mixture-ratio estimating processing by using a model of the covered background area 5  in step S402 of Fig. 56.<br>
In step S421, the mixture-ratio calculator 423 obtains the pixel value C of the designated pixel in frame #n from the frame memory 421.<br>
In step S422, the mixture-ratio calculator 423 obtains 10  the pixel value P of the pixel in frame #n-l, corresponding to the designated pixel, from the frame memory 422.<br>
In step S423, the mixture-ratio calculator 423 obtains the pixel value N of the pixel in frame #n+l, corresponding to the designated pixel contained in the input image. 15       In step S424, the mixture-ratio calculator 423<br>
calculates the estimated mixture ratio on the basis of the pixel value C of the designated pixel in frame #n, the pixel value P of the pixel in frame #n-l, and the pixel value N of the pixel in frame #n+l. 20       In step S425, the mixture-ratio calculator 423<br>
determines whether or not processing for calculating the estimated mixture ratio is terminated for the whole frame. When it is determined that processing for calculating the estimated mixture ratio is not terminated for the whole 25  frame, the process returns to step S421, and the processing<br>
132-<br><br>
for calculating the estimated mixture ratio for the next pixel is repeated.<br>
When it is determined in step S425 that processing for calculating the estimated mixture ratio is terminated for 5  the whole frame, the processing is terminated.<br>
As discussed above, the estimated-mixture-ratio processor 401 is able to calculate the estimated mixture ratio based on the input image.<br>
The mixture-ratio estimating processing by using a 10  model corresponding to the uncovered background area in step S403 of Fig. 56 is similar to the processing indicated by the flowchart of Fig. 57 by using the equations corresponding to a model of the uncovered background area, and an explanation thereof is thus omitted. 15       The estimated-mixture-ratio processor 442 and the estimated-mixture-ratio processor 443 shown in Fig. 55 perform processing similar to that of the flowchart shown in Fig. 57 in order to calculate the estimated mixture ratio, and an explanation thereof is thus omitted. 20       The embodiment has been described, assuming that the object corresponding to the background is stationary. However, processing for determining the above-described mixture-ratio a can be applied even if the image corresponding to the background area contains motion.  For 25  example, if the image corresponding to the background area<br>
129<br><br>
is uniformly moving, the estimated-mixture-ratio processor 401 shifts the overall image in accordance with the motion of the background, and performs processing in a manner similar to the case in which the object corresponding to the 5  background is stationary.  If the image corresponding to the background area contains locally different motions of the background, the estimated-mixture-ratio processor 401 selects the pixels corresponding to the motions of the background as the pixels belonging to the mixed area, and 10  executes the above-described processing.<br>
The mixture-ratio calculator 104 may execute the mixture-ratio estimating processing on all the pixels only by using a model corresponding to the covered background area, and outputs the calculated estimated mixture ratio as 15  the mixture ratio a.  In this case, the mixture ratio a indicates the ratio of the background components for the pixels belonging to the covered background area, and indicates the ratio of the foreground components for the pixels belonging to the uncovered background area. 20  Concerning the pixels belonging to the uncovered background area, the absolute value of the difference between the calculated mixture-ratio a  and 1 is determined, and the calculated absolute'value is set as the mixture ratio a. Then, the image processing apparatus is able to determine 25  the mixture ratio a  indicating the ratio of the background<br>
134<br><br>
components for the pixels belonging to the uncovered background area.<br>
Similarly, the mixture-ratio processor 104 may execute the mixture-ratio estimating processing on all the pixels 5  only by using a model corresponding to the uncovered background area, and outputs the calculated estimated mixture ratio as the mixture ratio a.<br>
Next, a description is given of the estimated-mixture-ratio calculator 104 for calculating the mixture ratio cc by 10  using characteristics in which the mixture ratio a changes linearly.<br>
As discussed above, since equations (11) and (12) each contain two variables, the mixture ratio a, cannot be determined without modifying the equations. 15       By utilizing the characteristics in which the mixture ratio a linearly changes in accordance with a change in the position of the pixels because the object corresponding to the foreground is moving with constant velocity, an equation in which the mixture ratio a and the sum f of the foreground 20  components are approximated in the spatial direction is<br>
established.  By utilizing a plurality of sets of the pixel values of the pixels belonging to the mixed area and the pixel values of the pixels belonging to the background area, the equations in which the mixture ratio cc and the sum f of 25  the foreground components are approximated are solved.<br>
135<br><br>
When a change in the mixture ratio a is approximated as a straight line, the mixture ratio a can be expressed by equation (23).<br>
a = il+p	(23)<br>
5  In equation (23), i indicates the spatial index when the position of the designated pixel is set to 0, 1 designates the gradient of the straight line of the mixture ratio a, and p designates the intercept of the straight line of the mixture ratio a and also indicates the mixture ratio a of 10  the designated pixel.  In equation (23), the index i is<br>
known, and the gradient 1 and the intercept,p are unknown.<br>
The relationship among the index i, the gradient 1, and the intercept p is shown in Fig. 58.  In Fig. 58, the while dot indicates the designated pixel, and the black dots 15  indicate the pixels located in close proximity with the designated pixel.<br>
By approximating the mixture ratio a as equation (23), a plurality of different mixture-ratios a for a plurality of pixels can be expressed by two variables.  In the example 20  shown in Fig. 58, the five mixture-ratios for five pixels<br>
are expressed by the two variables, i.e., the gradient 1 and the intercept p.<br>
When the mixture ratio a.  is approximated in the plane shown in Fig. 59, equation (23) is expanded into the plane 25  by considering the movement v corresponding to the two<br>
132<br><br>
directions, i.e., the horizontal direction and the vertical<br>
direction of the image, and the mixture ratio a can be<br>
expressed by equation (24).  In Fig. 59, the white dot<br>
indicates the designated pixel.<br>
5      a = jm+kq+p	(24)<br>
In equation (24), j is the index in the horizontal direction and k is the index in the vertical direction when the position of the designated pixel is 0.  m designates the horizontal gradient of the mixture ratio a in the plane, and 10  q indicates the vertical gradient of the mixture ratio a in the plane.  p indicates the intercept of the mixture ratio a in the plane.<br>
For example, in frame #n shown in Fig. 49, equations (25) through (27) can hold true for C05 through C07, 15  respectively.<br>
C05 = a05 . B05/v+f05	(25)<br>
C06 = a06 . B06/v+f06	(26)<br>
C07 = a07 . B07/v+f07	(27)<br>
Assuming that the foreground components positioned in 20  close proximity with each other are equal to each other, i.e., that F01 through F03 are equal, equation (28) holds true by replacing F01 through F03 by fc.<br>
f (x) = (l-cc(x) ) -Fc	(28)<br>
In equation (28), x indicates the position in the spatial 25  direction.<br>
133<br><br>
When a(x) is replaced by equation (24), equation (28) can be expressed by equation (29). f(x) = (1- (jm+kq+p) ) -Fc<br>
= j.(-m-Fc)+k-(-q-Fc)+((1-p)-Fc)<br>
5	= js+kt+u	(29)<br>
In equation (29), (-m-Fc), (-q-Fc), and (l-p)-Fc are replaced, as expressed by equations (30) through (32), respectively.<br>
s = -m-Fc	(30)<br>
10      t = -q-Fc	(31)<br>
u = (1-p)-Fc	(32)<br>
In equation (29), j is the index in the horizontal direction and k is the index in the vertical direction when the position of the designated pixel is 0. 15      As discussed above, since it can be assumed that the object corresponding to the foreground is moving with constant velocity within the shutter time, and that the foreground components positioned in close proximity with each other are uniform, the sum of the foreground components 20  can be approximated by equation (29).<br>
When the mixture ratio a is approximated by a straight line, the sum of the foreground components can be expressed by equation (33).<br>
f(x) = is+u	(33)<br>
25       By replacing the mixture ratio a and the sum of the<br><br>
foreground components in equation (92) by using equations (24) and (29), the pixel value M can be expressed by equation (34).<br>
M = (jm+kq+p) -B+js+kt+u<br>
5	= jB-m+kB-q+B-p+j-s+k-t+u	(34)<br>
In equation (34), unknown variables are six factors, such as the horizontal gradient m of the mixture ratio oc in the plane, the vertical gradient q of the mixture ratio a in the plane, and the intercepts of the mixture ratio a in the 10  plane, p, s, t, and u.<br>
According to the pixels in close proximity with the designated pixel, the pixel value M or the pixel value B is set in the normal equation shown in equation (34).  Then, a plurality of normal equations in which the pixel value M or 15  the pixel value B is set are solved by the method of least squares, thereby calculating the mixture ratio a.<br>
For example, the horizontal index j of the designated pixel is set to 0, and the vertical index k is set to 0. Then, the pixel value M or the pixel value B is set in 20  normal equation (34) for 3x3 pixels located close to the<br>
designated pixel, thereby obtaining equations (35) through (43) .<br><br><br><br><br>
10       (43)<br>
Since the horizontal index j of the designated pixel is 0, and the vertical index k of the designated pixel is 0, the mixture ratio a of the designated pixel is equal to the value when j is 0 and k is 0 in equation (24), i.e., the 15  mixture ratio a is equal to the intercept p in equation (24). Accordingly, based on nine equations, i.e., equations (35) through (43), the horizontal gradient m, the vertical gradient q, and the intercepts p, s, t, and u are calculated by the method of least squares, and the intercept p is 20  output as the mixture ratio a.<br>
A specific process for calculating the mixture ratio a by applying the method of least squares is as follows.<br>
When the index i and the index k are indicated by a single index x, the relationship among the index i, the 25  index k, and the index x is expressed by equation (44).<br>
136<br><br>
x = (j+1) -3+(k+l)	(44)<br>
It is now assumed that the horizontal gradient m, the vertical gradient q, and the intercepts p, s, t, and u are expressed by variables wO, wl, w2, w3, w4, and w5, 5  respectively, and jB, kB, B, j, k and 1 are expressed by aO, al, a2, a3, a4, and a5, respectively.  In consideration of the error ex, equations (35) through (43) can be modified into equation (45).<br>
  (45)<br>
10  In equation (45), x is any one of the integers from 0 to 8. Equation (46) can be found from equation (45).<br>
  (46)<br>
Since the method of least squares is applied, the square sum E of the error is defined as follows, as 15  expressed by equation (47) .<br><br>
In order to minimize the error, the partial differential value of the variable Wv with respect to the square sum E of the error should be 0.  v is any one of the 20  integers from 0 to 5.  Thus, wy is determined so that equation (48) is satisfied.<br>
137<br><br><br><br><br>
By substituting equation (46) into equation (48), equation (49) is obtained.<br>
  (49)<br>
5 For example, the sweep-out method (Gauss-Jordan elimination) is applied to the normal equations of six normal equations obtained by substituting one of the integers from 0 to 5 into v in equation (49) , thereby obtaining wy. As stated above, wO is the horizontal 10 gradient m, wl is the vertical gradient q, w2 is the intercept p, w3 is s, w4 is t, and w5 is u.<br>
As discussed above, by applying the method of least squares to the equations in which the pixel value M and the pixel value B are set, the horizontal gradient m, the 15  vertical gradient q, and the intercepts p, s, t, and u can be determined.<br>
A description has been given with reference to equations (35) through (43), by assuming that the pixel value of the pixel contained in the mixed area is M, and the 20  pixel value of the pixel contained in the background area is B.  In this case, it is necessary to set normal equations for each of the cases where the designated pixel is<br>
138<br><br>
contained in the covered background area, or the designated pixel is contained in the uncovered background area.<br>
For example, when the mixture ratio a of the pixel contained in the covered background area in frame #n shown 5  in Fig. 49 is determined, C04 through C08 of the pixels in frame #n and the pixel values P04 through P08 of the pixels in frame #n-l are set in the normal equations.<br>
For determining the mixture ratio a of the pixel contained in the uncovered background area in frame #n shown 10  in Fig. 50, the pixels C28 through C32 of frame #n and the<br>
pixel values N28 through N32 of the pixels in frame #n+l are set in the normal equations.<br>
139<br>
Moreover, if, for example, the mixture ratio a of the pixel contained in the covered background area shown in Fig. 15  60 is calculated, the following equations (50) through (58) are set.  In Fig. 60, the white dots indicate pixels to belong to the background, and the black dots indicate pixels to belong to the mixed area.  The pixel value of the pixel for which the mixture ratio a is calculated is Mc5. <br><br><br><br><br><br><br><br>
For calculating the mixture ratio a of the pixel 5  contained in the covered background area in frame #n, the<br>
pixel values Bel through Bc9 of the pixels of the background area in frame #n-l corresponding to the pixels in frame #n in equations (50) through (58), respectively, are used.<br>
When the mixture ratio a of the pixel contained in the 10  uncovered background area shown in Fig. 60 is calculated, the following equations (59) through (77) are set.  The pixel value of the pixel for which the mixture ratio a is calculated is Mu5.<br>
Mul = (-1)-Bul-m+(-l)-Bul-q+Bul-p+(-l)-s+(-l)-t+u   (59) 15  Mu2 = (0) -Bu2-m+(-1) -Bu2-q+Bu2-p+(0) -s+(-1) -t+u   (60)<br>
Mu3 = (+1)-Bu3-m+(-l)-Bu3-q+Bu3-p+(+l)-s+(-l)-t+u   (61) Mu4 = (-1) -Bu4-m+(0) -Bu4-q+Bu4-p+(-1) -s+(0) -t+u   (62) Mu5 = (0)-Bu5-m+(0)-Bu5-q+Bu5'p+(0)-s+(0)-t+u   (63) Mu6 = (+1)-Bu6-m+(0)-Bu6-q+Bu6-p+(+l)-s+(0)-t+u   (64) 20  Mu7 = (-1)-Bu7-m+(+l)Bu7q+Bu7-p+(-1)-s+(+l)-t+u   (65) Mu8 = (0) -Bu8-m+( + 1) -Bu8-q+Bu8-p+(0)s+( + 1) •t+u   (66) Mu9 = (+1)-Bu9-m+(+1)-Bu9-q+Bu9-p+(+1)-s+(+l)-t+u   (67)<br>
For calculating the mixture ratio a of the pixel contained in the uncovered background area in frame #n, the 25  pixel values Bul through Bu9 of the pixels of the background<br>
140<br><br>
area in frame #n+l corresponding to the pixels in frame #n in equations (59) through (67), respectively, are used.<br>
Fig. 61 is a block diagram illustrating the configuration of the estimated-mixture-ratio processor 401. 5  An image input into the estimated-mixture-ratio processor 401 is supplied to a delay circuit 501 and an adder 502.<br>
The delay circuit 501 delays the input image for one frame, and supplies the image to the adder 502.  When frame #n is supplied as the input image to the adder 502, the 10  delay circuit 501 supplies frame #n-l to the adder 502. The adder 502 sets the pixel value of the pixel adjacent to the pixel for which the mixture ratio a is calculated, and the pixel value of frame #n-l in the normal equation.  For example, the adder 502 sets the pixel values 15  Mel through Mc9 and the pixel values Bel through Bc9 in the normal equations based on equations (50) through (58), respectively.  The adder 502 supplies the normal equations in which the pixel values are set to a calculator 503.<br>
The calculator 423 determines the estimated mixture 2 0  ratio by solving the normal equations supplied from the adder 502 by using the sweep-out method, and outputs the determined estimated mixture ratio.<br>
In this manner, the estimated-mixture-ratio processor 401 is able to calculate the estimated mixture ratio based 25  on the input image, and supplies it to the mixture ratio<br>
141<br><br>
determining portion 403.<br>
The estimated-mixture-ratio processor 402 is configured similar to the estimated-mixture-ratio processor 401, and an explanation thereof is thus omitted. 5      Fig. 62 shows an example of the estimated mixture ratio calculated by the estimated-mixture-ratio processor 401. For the estimated mixture ratio shown in Fig. 62, the motion v of the foreground corresponding to an object moving with constant velocity is 11, and the results calculated by 10  generating an equation using blocks of 7 x 7 pixels as units are shown for one line.<br>
It can be seen from Fig. 61 that the estimated mixture ratio changes approximately linearly in the mixed area. A description is now given, with reference to the 15  flowchart of Fig. 63, of the mixture ratio estimating processing by the estimated-mixture-ratio processor 401 having the configuration shown in Fig. 61 by using a model of the covered background area.<br>
In step S521, the adder 502 sets the pixel value 20  contained in the input image and the pixel value contained<br>
in the image supplied from the delay circuit 501 in a normal equation corresponding to a model of the covered background area.<br>
In step S522, the estimated-mixture-ratio processor 401 25  determines whether the setting of the target pixels is<br><br>
finished.  If it is determined that the setting of the target pixels is not finished, the process returns to step S521, and the processing for setting the pixel values in the normal equation is repeated. 5       If it is determined in step S522 that the setting for the target pixels is finished, the process proceeds to step S523.  In step S523, a calculator 503 calculates the estimated mixture ratio based on the normal equations in which the pixels values are set, and outputs the calculated 10  mixture-ratio.<br>
As discussed above, the estimated-mixture-ratio processor 401 having the configuration shown in Fig. 61 is able to calculate the estimated mixture ratio based on the input image. 15       The mixture-ratio estimating processing by using a model corresponding to the uncovered background area is similar to the processing indicated by the flowchart of Fig. 63 by using the normal equations corresponding to a model of the uncovered background area, and an explanation thereof is 2 0  thus omitted.<br>
The embodiment has been described, assuming that the object corresponding to the background is stationary. However, the above-described mixture-ratio calculation processing can be applied even if the image corresponding to 25  the background area contains motion.  For example, if the<br>
143<br><br>
image corresponding to the background area is uniformly-moving, the estimated —mixture—ratio processor 401 shifts the overall image in accordance with this motion, and performs processing in a manner similar to the case in which the 5  object corresponding to the background is stationary.  If the image corresponding to the background area contains locally different motions, the estimated-mixture-ratio processor 401 selects the pixels corresponding to the motions as the pixels belonging to the mixed area, and 10  executes the above-described processing.<br>
As described above, the mixture-ratio calculator 102 able to calculate the mixture ratio a, which is a feature quantity corresponding to each pixel, based on the input image and the area information supplied from the area 15  specifying unit 101.<br>
By utilizing the mixture ratio a, it is possible to separate the foreground components and the background components contained in the pixel values while maintainin the information of motion blur contained in the image 20  corresponding to the moving object.<br>
By combining the images based on the mixture ratio a it is also possible to generate an image which contains correct motion blur that coincides with the speed of a moving object and which faithfully reflects the real worli 25      The foreground/background separator 105 is discussed<br>
144<br><br>
below.  Fig. 64 is a block diagram illustrating an example of the configuration of the foreground/background separator 105.  The input image supplied to the foreground/background separator 105 is supplied to a separating portion 601, a 5  switch 602, and a switch 604.  The area information supplied from the area specifying unit 103 and indicating the information of the covered background area and the uncovered background area is supplied to the separating portion 601. The area information indicating the foreground area is 10  supplied to the switch 602.  The area information indicating the background area supplied to the switch 604.<br>
The mixture ratio a supplied from the mixture-ratio calculator 104 is supplied to the separating portion 601. The separating portion 601 separates the foreground 15  components from the input image based on the area<br>
information indicating the covered background area, the area information indicating the uncovered background area, and the mixture ratio a, and supplies the separated foreground components to a synthesizer 603.  The separating portion 601 20  also separates the background components from the input<br>
image, and supplies the separated background components to a synthesizer 605.<br>
The switch 602 is closed when a pixel corresponding to the foreground is input based on the area information 25  indicating the foreground area, and supplies only the pixels<br>
145<br><br>
corresponding to the foreground contained in the input image to the synthesizer 603.<br>
The switch 604 is closed when a pixel corresponding to the background is input based on the area information indicating the background area, and supplies only the pixels corresponding to the background contained in the input image to the synthesizer 605.<br>
The synthesizer 603 synthesizes a foreground component image based on the foreground components supplied from the separating portion 601 and the pixels corresponding to the foreground supplied from the switch 602, and outputs the synthesized foreground component image.  Since the foreground area and the mixed area do not overlap, the synthesizer 603 applies, for example, logical OR to the foreground components and the foreground pixels, thereby synthesizing the foreground component image.<br>
In the initializing processing executed at the start of the synthesizing processing for the foreground component image, the synthesizer 603 stores an image whose pixel values are all 0 in a built-in frame memory.  Then, in the synthesizing processing for the foreground component image, the synthesizer 603 stores the foreground component image (overwrites the previous image by the foreground component image).  Accordingly, 0 is stored in the pixels corresponding to the background area in the foreground<br><br>
component image output from the synthesizer 603.<br>
The synthesizer 605 synthesizes a background component image based on the background components supplied from the separating portion 601 and the pixels corresponding to the background supplied from the switch 604, and outputs the synthesized background component image.  Since the background area and the mixed area do not overlap, the synthesizer 605 applies, for example, logical OR to the background components and the background pixels, thereby synthesizing the background component image.<br>
In the initializing processing executed at the start of the synthesizing processing for the background component image, the synthesizer 605 stores an image whose pixel values are all 0 in a built-in frame memory.  Then, in the synthesizing processing for the background component image, the synthesizer 605 stores the background component image (overwrites the previous image by the background component image).  Accordingly, 0 is stored in the pixels corresponding to the foreground area in the background component image output from the synthesizer 605.<br>
Fig. 65A illustrates the input image input into the foreground/background separator 105 and the foreground component image and the background component image output from the foreground/background separator 105.  Fig. 65B illustrates a model corresponding to the input image input<br>
146<br><br>
into the foreground/background separator 105 and the foreground component image and the background component image output from the foreground/background separator 105. Fig. 65A is a schematic diagram illustrating the image 5  to be displayed, and Fig. 65B is a model obtained by<br>
expanding in the time direction the pixels disposed in one line including the pixels belonging to the foreground area, the pixels belonging to the background area, and the pixels belonging to the mixed area corresponding to Fig. 65A. 10      As shown in Figs. 65A and 65B, the background component image output from the foreground/background separator 105 consists of the pixels belonging to the background area and the background components contained in the pixels of the mixed area. .15      As shown in Figs. 65A and 65B, the foreground component image output from the foreground/background separator 105 consists of the pixel belonging to the foreground area and the foreground components contained in the pixels of the mixed area. 20       The pixel values of the pixels in the mixed area are<br>
separated into the background components and the foreground components by the foreground/background separator 105.  The separated background components form the background component image together with the pixels belonging to the 25  background area.  The separated foreground components form<br>
148<br><br>
the foreground component image together with the pixels belonging to the foreground area.<br>
As discussed above, in the foreground component image, the pixel values of the pixels corresponding to the 5  background area are set to 0, and significant pixel values are set in the pixels corresponding to the foreground area and the pixels corresponding to the mixed area.  Similarly, in the background component image, the pixel values of the pixels corresponding to the foreground area are set to 0, 10  and significant pixel values are set in the pixels corresponding to the background area and the pixels corresponding to the mixed area.<br>
A description is given below of the processing executed by the separating portion 601 for separating the foreground 15  components and the background components from the pixels belonging to the mixed area.<br>
Fig. 66 illustrates a model of an image indicating foreground components and background components in two frames including a foreground object moving from the left to 20  the right in Fig. 66.  In the model of the image shown in Fig. 66, the amount of movement v is 4, and the number of virtual divided portions is 4.<br>
In- frame #n, the leftmost pixel and the fourteenth through eighteenth pixels from the left consist of only the 25  background components and belong to the background area.  In<br>
149<br><br>
frame #n, the second through fourth pixels from the left contain the background components and the foreground components, and belong to the uncovered background area.  In frame #n, the eleventh through thirteenth pixels from the 5  left contain background components and foreground components, and belong to the covered background area.  In frame #n, the fifth through tenth pixels from the left consist of only the foreground components, and belong to the foreground area.<br>
In frame #n+l, the first through fifth pixels from the 10  left and the eighteenth pixel from the left consist of only<br>
the background components, and belong to the background area. In frame #n+l, the sixth through eighth pixels from the left contain background components and foreground components, and belong to the uncovered background area.  In frame #n+l, the 15  fifteenth through seventeenth pixels from the left contain background components and foreground components, and belong to the covered background area.  In frame #n+l, the ninth through fourteenth pixels from the left consist of only the foreground components, and belong to the foreground area. 20      Fig- 67 illustrates the processing for separating the foreground components from the pixels belonging to the covered background area.  In Fig. 67, al through al8 indicate mixture-ratios of the individual pixels of frame #n. In Fig. 67, the fifteenth through seventeenth pixels from 25  the left belong to the covered background area.<br>
150<br><br>
The pixel value C15 of the fifteenth pixel from the<br>
left in frame #n can be expressed by equation (68):<br>
C15 = Bl5/v+F09/v+F08/v+F07/v<br>
= al5-B15+F09/v+F08/v+F07/v<br>
5	= al5-P15+F09/v+F08/v+F07/v	(68)<br>
where al5 indicates the mixture ratio of the fifteenth pixel from the left in frame #n, and P15 designates the pixel value of the fifteenth pixel from the left in frame #n-l. The sum fl5 of the foreground components of the 10  fifteenth pixel from the left in frame #n can be expressed by equation (69) based on equation (68). fl5 = F09/v+F08/v+F07/v<br>
= C15-OC15-P15	(69)<br>
Similarly, the sum fl6 of the foreground components of 15  the sixteenth pixel from the left in frame #n can be expressed by equation (70), and the sum fl7 of the foreground components of the seventeenth pixel from the left in frame #n can be expressed by equation (71).<br>
fl6 = C16-al6-P16	(70)<br>
20       fl7 = C17-CX17-P17	(71)<br>
In this manner, the foreground components fc contained<br>
in the pixel value C of the pixel belonging to the covered<br>
background area can be expressed by equation (72):<br>
fc - C-a-P	(72)<br>
25  where P designates the pixel value of the corresponding<br>
151<br><br>
pixel in the previous frame.<br>
Fig. 68 illustrates the processing for separating the foreground components from the pixels belonging to the uncovered background area.  In Fig. 68, ccl through al8 5  indicate mixture-ratios of the individual pixels of frame #n. In Fig. 68, the second through fourth pixels from the left belong to the uncovered background area.<br>
The pixel value C02 of the second pixel from the left in frame #n can be expressed by equation (73): 10       C02 = B02/v+B02/v+B02/v+F01/v = cc2-B02+F01/v<br>
= (X2-N02+F01/v	(73)<br>
where <x2 indicates the mixture ratio of second pixel from left in frame and n02 designates value></x2>
The sum f02 of the foreground components of the second<br>
pixel from the left in frame #n can be expressed by equation<br>
(74) based on equation (73).<br>
f02 = FOl/v<br>
20	= C02-CC2-N02	(74)<br>
Similarly, the sum f03 of the foreground components of the third pixel from the left in frame #n can be expressed by equation (75), and the sum f04 of the foreground components of the fourth pixel from the left in frame #n can 25  be expressed by equation (76).<br>
153<br><br>
f03 = C03-CX3-N03	(75)<br>
f04 = C04-a4-N04	(76)<br>
In this manner, the foreground components fu contained<br>
in the pixel value C of the pixel belonging to the uncovered<br>
5  background area can be expressed by equation (77):<br>
fu = C-a-N	(77)<br>
where N designates the pixel value of the corresponding pixel in the subsequent frame.<br>
As discussed above, the separating portion 601 is able 10  to separate the foreground components from the pixels<br>
belonging to the mixed area and the background components from the pixels belonging to the mixed area based on the information indicating the covered background area and the information indicating the uncovered background area 15  contained in the area information, and the mixture ratio a for each pixel.<br>
Fig. 69 is a block diagram illustrating an example of the configuration of the separating portion 601 for executing the above-described processing.  An image input 20  into the separating portion 601 is supplied to a frame<br>
memory 621, and the area information indicating the covered background area and the uncovered background area supplied from the mixture-ratio calculator 104 and the mixture ratio a are supplied to a separation processing block 622. 25       The frame memory 621 stores the input images in units<br>
153<br><br>
of frames.  When a frame to be processed is frame #n, the frame memory 621 stores frame #n-l, which is the frame one frame before frame #n, frame #n, and frame #n+l, which is the frame one frame after frame #n. 5      The frame memory 621 supplies the corresponding pixels in frame #n-l, frame #n, and frame #n+l to the separation processing block 622.<br>
The separation processing block 622 applies the calculations discussed with reference to Figs. 67 and 68 to 10  the pixel values of the corresponding pixels in frame #n-l, frame #n, and frame #n+l supplied from the frame memory 621 based on the area information indicating the covered background area and the uncovered background area and the mixture ratio a so as to separate the foreground components 15  and the background components from the pixels belonging to the mixed area in frame #n, and supplies them to a frame memory 62 3.<br>
The separation processing block 622 is formed of an uncovered area processor 631, a covered area processor 632, 20  a synthesizer 633, and a synthesizer 634.<br>
A multiplier 641 of the uncovered area processor 631 multiplies the pixel value of the pixel in frame #n+l supplied from the frame memory 621 by the mixture ratio a, and outputs the resulting pixel value to a switch 642.  The 25  switch 642 is closed when the pixel in frame #n<br>
154<br><br>
(corresponding to the pixel in frame #n+l) supplied from the frame memory 621 belongs to the uncovered background area, and supplies the pixel value multiplied by the mixture ratio a supplied from the multiplier 641 to a calculator 643 and 5  the synthesizer 634.  The value obtained by multiplying the pixel value of the pixel in frame #n+l by the mixture ratio cc output from the switch 642 is equivalent to the background components of the pixel value of the corresponding pixel in frame #n. 10       The calculator 643 subtracts the background components supplied from the switch 642 from the pixel value of the pixel in frame #n supplied from the frame memory 621 so as to obtain the foreground components.  The calculator 643 supplies the foreground components of the pixel in frame #n<br>
15  belonging to the uncovered background area to the synthesizer 633.<br>
A multiplier 651 of the covered area processor 632 multiplies the pixel value of the pixel in frame #n-l supplied from the frame memory 621 by the mixture ratio a,<br>
20  and outputs the resulting pixel value to a switch 652.  The switch 652 is closed when the pixel in frame #n (corresponding to the pixel in frame #n-l) supplied from the frame memory 621 belongs to the covered background area, and supplies the pixel value multiplied by the mixture ratio a<br>
25  supplied from the multiplier 651 to a calculator 653 and the<br>
156<br><br>
synthesizer 634.  The value obtained by multiplying the pixel value of the pixel in frame #n-l by the mixture ratio a output from the switch 652 is equivalent to the background components of the pixel value of the corresponding pixel in 5  frame #n.<br>
The calculator 653 subtracts the background components supplied from the switch 652 from the pixel value of the pixel in frame #n supplied from the frame memory 621 so as to obtain the foreground components.  The calculator 653 10  supplies the foreground components of the pixel in frame #n belonging to the covered background area to the synthesizer 633.<br>
The synthesizer 633 combines the foreground components of the pixels belonging to the uncovered background area and 15  supplied from the calculator 643 with the foreground<br>
components of the pixels belonging to the covered background area and supplied from the calculator 653, and supplies the synthesized foreground components to the frame memory 623. The synthesizer 634 combines the background components 20  of the pixels belonging to the uncovered background area and supplied from the switch 642 with the background components of the pixels belonging to the covered background area and supplied from the switch 652, and supplies the synthesized background components to the frame memory 623. 25       The frame memory 623 stores the foreground components<br>
156<br><br>
and the background components of the pixels in the mixed area of frame #n supplied from the separation processing block 622.<br>
The frame memory 623 outputs the stored foreground 5  components of the pixels in the mixed area in frame #n and the stored background components of the pixels in the mixed area in frame #n.<br>
By utilizing the mixture ratio oc, which indicates the feature quantity, the foreground components and the 10  background components contained in the pixel values can be completely separated.<br>
The synthesizer 603 combines the foreground components of the pixels in the mixed area in frame #n output from the separating portion 601 with the pixels belonging to the 15  foreground area so as to generate a foreground component image.  The synthesizer 605 combines the background components of the pixels in the mixed area in frame #n output from the separating portion 601 with the pixels belonging to the background area so as to generate a 20  background component image.<br>
Fig. 70A illustrates an example of the foreground component image corresponding to frame #n in Fig. 66.  The leftmost pixel and the fourteenth pixel from the left consist of only the background components before the 25  foreground and the background are separated, and thus, the<br>
157<br><br>
pixel values are set to U.<br>
The second and fourth pixels from the left belong to the uncovered background area before the foreground and the background are separated.  Accordingly, the background components are set to 0, and the foreground components are maintained.  The eleventh through thirteenth pixels from the left belong to the covered background area before the foreground and the background are separated.  Accordingly, the background components are set to 0, and the foreground components are maintained.  The fifth through tenth pixels from the left consist of only the foreground components, which are thus maintained.<br>
Fig. 70B illustrates an example of the background component image corresponding to frame #n in Fig. 66.  The leftmost pixel and the fourteenth pixel from the left consist of only the background components before the foreground and the background are separated, and thus, the background components are maintained.<br>
The second through fourth pixels from the left belong to the uncovered background area before the foreground and the background are separated. Accordingly, the foreground components are set to 0, and the background components are maintained. The eleventh through thirteenth pixels from the left belong to the covered background area before the foreground and the background are separated.  Accordingly,<br>
158<br><br>
the foreground components are set to 0, and the background components are maintained.  The fifth through tenth pixels from the left consist of only the foreground components, and thus, the pixel values are set to 0. 5      The processing for separating the foreground and the background executed by the foreground/background separator 105 is described below with reference to the flowchart of Fig. 71.  In step S601, the frame memory 621 of the separating portion 601 obtains an input image, and stores 10  frame #n for which the foreground and the background are separated together with the previous frame #n-l and the subsequent frame #n+l.<br>
In step S602, the separation processing block 622 of the separating portion 601 obtains area information supplied 15  from the mixture-ratio calculator 104.  In step S603, the separation processing block 622 of the separating portion 601 obtains the mixture ratio a supplied from the mixture-ratio calculator 104.<br>
In step S604, the uncovered area processor 631 extracts 2 0  the background components from the pixel values of the<br>
pixels belonging to the uncovered background area supplied from the frame memory 621 based on the area information and the mixture ratio a.<br>
In step S605, the uncovered area processor 631 extracts 25  the foreground components from the pixel values of the<br>
159<br><br>
pixels belonging to the uncovered background area supplied from the frame memory 621 based on the area information and the mixture ratio a.<br>
In step S606, the covered area processor 632 extracts 5  the background components from the pixel values of the pixels belonging to the covered background area supplied from the frame memory 621 based on the area information and the mixture ratio ex.<br>
In step S607, the covered area processor 632 extracts 10  the foreground components from the pixel values of the<br>
pixels belonging to the covered background area supplied from the frame memory 621 based on the area information and the mixture ratio a.<br>
In step S608, the synthesizer 633 combines the 15  foreground components of the pixels belonging to the<br>
uncovered background area extracted in the processing of step S605 with the foreground components of the pixels belonging to the covered background area extracted in the processing of step S607.  The synthesized foreground 20  components are supplied to the synthesizer 603.  The<br>
synthesizer 603 further combines the pixels belonging to the foreground area supplied via the switch 602 with the foreground components supplied from the separating portion 601 so as to generate a foreground component image. 25       In step S609, the synthesizer 634 combines the<br><br>
background components of the pixels belonging to the uncovered background area extracted in the .processing of step S604 with the background components of the pixels belonging to the covered background area extracted in the 5  processing of step S606.  The synthesized background components are supplied to the synthesizer 605.  The synthesizer 605 further combines the pixels belonging to the background area supplied via the switch 604 with the background components supplied from the separating portion 10  601 so as to generate a background component image. In step S610, the synthesizer 603 outputs the foreground component image.  In step S611, the synthesizer 605 outputs the background component image.  The processing is then completed. 15      As discussed above, the foreground/background separator 105 is able to separate the foreground components and the background components from the input image based on the area information and the mixture ratio a, and outputs the foreground component image consisting of only the foreground 20  components and the background component image consisting of only the background components.<br>
Adjustments of the amount of motion blur from a foreground component image are described below.<br>
Fig. 72 is a block diagram illustrating an example of 25  the configuration of the motion-blur adjusting unit 106.<br>
161<br><br>
The motion vector and the positional information thereof supplied from the motion detector 102 and the area information supplied from the area specifying unit 103 are supplied to a unit-of-processing determining portion 801 and 5  a model-forming portion 802.  The area information supplied from the foreground/background separator 105 is supplied to the adder 804.<br>
The unit-of-processing determining portion 801 supplies, together with the motion vector, the unit of processing that 10  is generated based on the motion vector and the positional information thereof and the area information to the model-forming portion 802.  The unit-of-processing determining portion 801 supplies the generated unit of processing to the adder 804. 15      As an example indicated by "A" is shown in Fig. 73, the unit of processing generated by the unit-of-processing determining portion 801 indicates consecutive pixels disposed in the moving direction starting from the pixel corresponding to the covered background area of the 20  foreground component image until the pixel corresponding to the uncovered background area, or indicates consecutive pixels disposed in the moving direction starting from the pixel corresponding to the uncovered background area until the pixel corresponding to the covered background area.  The 25  unit of processing is formed of two pieces of data which<br>
162<br><br><br>
indicate, for example, the upper left point (which is the position of the leftmost or the topmost pixel in the image designated by the unit of processing) and the lower right point. 5       The model-forming portion 802 forms a model based on the motion vector and the input unit of processing.  More specifically, for example, the model-forming portion 802 may store in advance a plurality of models in accordance with the number of pixels contained in the unit of processing, 10  the number of virtual divided portions of the pixel value in the time direction, and the number of foreground components for each pixel.  The model-forming portion 902 then may select the model in which the correlation between the pixel values and the foreground components is designated, such as 15  that in Fig. 74, based on the unit of processing and the<br>
number of virtual divided portions of the pixel value in the time direction.<br>
It is now assumed, for example, that the number of pixels corresponding to the unit of processing is 12, and 20  that the amount of movement v within the shutter time is 5. Then, the model-forming portion 802 sets the number of virtual divided portions to 5, and selects a model formed of eight types of foreground components so that the leftmost pixel contains one foreground component, the second pixel 25  from the left contains two foreground components, the third<br>
163<br><br><br>
pixel from the left contains three foreground components, the fourth pixel from the left contains four pixel components, the fifth pixel from the left contains five foreground components, the sixth pixel from the left contains five foreground components, the seventh pixel from the left contains five foreground components, the eighth pixel from the left contains five foreground components, the ninth pixel from the left contains four foreground components, the tenth pixel from the left contains three foreground components, the eleventh pixel from the left contains two foreground components, and the twelfth pixel from the left contains one foreground component.<br>
Instead of selecting a model from the prestored models, the model-forming portion 802 may generate a model based on the motion vector and the unit of processing when the motion vector and the unit of processing are supplied.<br>
The model-forming portion 802 supplies the selected model to an equation generator 803.<br>
The equation generator 803 generates an equation based on the model supplied from the model-forming portion 802.<br>
A description is given below, with reference to the model of the foreground component image shown in Fig. 74, of equations generated by the equation generator 803 when the number of foreground components is 8, the number of pixels corresponding to the unit of processing is 12, and the<br>
164<br><br>
amount of movement v is 5.<br>
When the foreground components contained in the foreground component image corresponding to the shutter time/v are FOl/v through F08/v, the relationships between 5  FOl/v through F08/v and the pixel values COl through C12 can be expressed by equations (78) through (89).<br><br>
COl	=	FOl/v	(78)<br>
C02	=	F02/v+F01/v	(79)<br>
C03	=	F03/v+F02/v+F01v	(80)<br>
C04	=	F04/v+F03/v+F02/v+F01v	(81)<br>
C05	=	F05/v+F04/v+F03/v+F02/v+F01v	(82)<br>
C06	=	F06/v+F05/v+F04/v+F03/v+F02/v	(83)<br>
C07	=	F07/v+F06/v+F05/v+F04/v+F03/v	(84)<br>
C08	=	FQ8/v+F07/v+F06/v+F05/v+F04/v	(85)<br>
C09	=	F08/v+F07/v+F0 6/v+F05/v	(86)<br>
CIO	=	F08/v+F07/v+F06/v	(87)<br>
Cll	=	F08/v+F07/v	(88)<br>
C12	=	F08/v	(89)<br>
The	equation generator 803 generates an equation by<br>
20  modifying the generated equations.  The equations generated by the equation generator 803 are indicated by equations (90) though (101) . COl = l-F01/v+0-F02/v+0-F03/v+0-F04/v+0-F05/v<br>
+0-F06/v+0-F07/v+0-F08/v	(90)<br>
25  C02 = l-F01/v+l-F02/v+0-F03/v+0'F04/v+0-F05/v<br>
165<br><br>
+0-F06/v+0-F07/v+0-F08/v	(91)<br>
C03 = l-F01/v+l-F02/v+l-F03/v+0-F04/v+0-F05/v<br>
+0-F06/v+0-F07/v+0-F08/v	(92)<br>
C04 = l-F01/v+l-F02/v+l-F03/v+l-F04/v+0-F05/v<br>
5	+0-F06/v+0-F07/v+0-F08/v	(93)<br>
C05 = l-F01/v+l-F02/v+l-F03/v+l-F04/v+l-F05/v<br>
+0-F06/v+0-F07/v+0-F08/v	(94)<br>
C06 = 0-F01/v+l-F02/v+l'F03/v+l-F04/v+l-F05/v<br>
+l-F06/v+0"F07/v+0-F08/v	(95)<br>
10  C07 = 0-F01/v+0-F02/v+l-F03/v+l-F04/v+l-F05/v<br>
+l-F06/v+l-F07/v+0-F08/v	(96)<br>
C08 = 0-F01/v+0-F02/v+0-F03/vfl-F04/v+l-F05/v<br>
+l-F06/v+l-F07/v+l-F08/v	(97)<br>
C09 = 0-F01/v+0-F02/v+0-F03/v+0-F04/v+l-F05/v<br>
15	+l-F06/v+l-F07/v+l-F08/v	(98)<br>
CIO = 0-F01/v+0-F02/v+0-F03/v+0-F04/v+0-F05/v<br>
+l-F06/v+l-F07/v+l-F08/v	(99)<br>
Cll = 0-F01/v+0-F02/v+0-F03/v+0-F04/v+0-F05/v<br>
+0-F06/v+l-F07/v+l-F08/v	(100)<br>
20  C12 = 0-F01/v+0-F02/v+0-F03/v+0-F04/v+0-F05/v<br>
+0-F06/v+0-F07/v+l-F08/v	(101)<br>
Equations (90) through (101) can be expressed by-equation (102) .<br>
08<br><br><br><br>
166<br><br>
In equation (102) , j designates the position of the pixel. In this example, j has one of the values from 1 to 12.  In equation (102) , i designates the position of the foreground value.  In this example, i has one of the values from 1 to 8. 5  In equation (102), aij has the value 0 or 1 according to the values of i and j.<br>
Equation (102) can be expressed by equation (103) in consideration of the error.<br>
  (103)<br>
10  In equation (103), ej designates the error contained in the designated pixel Cj.<br>
Equation (103) can be modified into equation (104).<br>
  (104)<br>
In order to apply the method of least squares, the 15  square sum E of the error is defined as equation (105) .<br>
  (105)<br>
In order to minimize the error, the partial differential value using the variable Fk with respect to the square sum E of the error should be 0.  Fk is determined so 20  that equation (106) is satisfied.<br>
167<br><br>
  (106)<br>
In equation (10 6) , since the amount of movement v is a fixed value, equation (107) can be deduced.<br>
  (107)<br>
5      To expand equation (107) and transpose the terms, equation (108) can be obtained.<br>
  (108)<br>
Equation (108) is expanded into eight equations by substituting the individual integers from 1 to 8 into k in 10  equation (108).  The obtained eight equations can be<br>
expressed by one matrix equation.  This equation is referred to as a "normal equation".<br>
An example of the normal equation generated by the equation generator 803 based on the method of least squares 15  is indicated by equation (109) .<br>
168<br><br><br><br><br><br>
0 0 0 10 0<br>
1 2 3 4 5 4<br>
3 4 5 4 3 2 1<br>
4 5 4 3 2 1<br>
0 0<br>
0 0 0<br><br>
2 3 4 5 4 3 2 1<br><br>
1 2 3 4 5 4 3 2<br><br>
2 3 4 5 4 3<br><br>
When equation (109) is expressed by A-F = v-C, C, A, and v are known, and F is unknown.  A and v are known when the model is formed, while C becomes known when the pixel 5  value is input in the addition processing.<br>
By calculating the foreground components according to the normal equation based on the method of least squares, the error contained in the pixel C can be distributed.<br>
The equation generator 803 supplies the normal equation 10  generated as discussed above to the adder 804.<br>
The adder 804 sets, based on the unit of processing supplied from the unit-of-processing determining portion 801, the pixel value C contained in the foreground component image in the matrix equation supplied from the equation 15  generator 803.  The adder 804 supplies the matrix in which<br>
169<br><br>
the pixel value C is set to a calculator 805.<br>
The calculator 805 calculates the foreground component Fi/v from which motion blur is eliminated by the processing based on a solution, such as a sweep-out method (Gauss-5  Jordan elimination), so as to obtain Fi corresponding to i indicating one of the integers from 1 to 8, which is the pixel value from which motion blur is eliminated.  The calculator 805 then outputs the foreground component image consisting of the pixel values Fi without motion blur, such 10  as that in Fig. 75, to a motion-blur adder 806 and a selector 807.<br>
In the foreground component image without motion blur shown in Fig. 75, the reason for setting F01 through F08 in C03 through C10, respectively, is not to change the position 15  of the foreground component image with respect to the screen. However, F01 through F08 may be set in any desired positions.<br>
The motion-blur adder 806 is able to adjust the amount of motion blur by adding the amount v' by which motion blur is adjusted, which is different from the amount of movement 20  v, for example, the amount v' by which motion blur is adjusted, which is one half the value of the amount of movement v, or the amount v' by which motion blur is adjusted, which is irrelevant to the amount of movement v. For example, as shown in Fig. 76, the motion-blur adder 806 25  divides the foreground pixel value Fi without motion blur by<br>
170<br><br>
the amount v' by which motion blur is adjusted so as to obtain the foreground component Fi/v'.  The motion-blur adder 806 then calculates the sum of the foreground components Fi/v', thereby generating the pixel value in 5  which the amount of motion blur is adjusted.  For example, when the amount v1 by which motion blur is adjusted is 3, the pixel value C02 is set to (F01)/v', the pixel value C3 is set to (F01+F02)/v', the pixel value C04 is set to (F01+F02+F03)/v', and the pixel value C05 is set to 10   (F02+F03+F04)/v'.<br>
The motion-blur adder 806 supplies the foreground component image in which the amount of motion blur is adjusted to a selector 807.<br>
The selector 807 selects one of the foreground 15  component image without motion blur supplied from the<br>
calculator 805 and the foreground component image in which the amount of motion blur is adjusted supplied from the motion-blur adder 806 based on a selection signal reflecting a user's selection, and outputs the selected foreground 2 0  component image.<br>
As discussed above, the motion-blur adjusting unit 106 is able to adjust the amount of motion blur based on the selection signal and the amount v' by which motion blur is adjusted. 25      Also, for example, when the number of pixels<br>
171<br><br>
corresponding to the unit of processing is 8, and the amount of movement v is 4, as shown in Fig. 77, the motion-blur adjusting unit 106 generates a matrix equation expressed by equation (110).<br><br>
08<br>
(110)<br>
In this manner, the motion-blur adjusting unit 106 calculates Fi, which is the pixel value in which the amount of motion blur is adjusted, by setting up the equation in accordance with the length of the unit of processing. 10  Similarly, for example, when the number of pixels contained in the unit of processing is 100, the equation corresponding to 100 pixels is generated so as to calculate Fi.<br>
Fig. 78 illustrates an example of another configuration of the motion-blur adjusting unit 106.  The same elements as 15  those shown in Fig. 72 are designated with like reference numerals, and an explanation thereof is thus omitted.<br>
Based on a selection signal, a selector 821 directly supplies an input motion vector and a positional signal thereof to the unit-of-processing determining portion 801<br>
172<br><br>
and the model-forming portion 802.  Alternatively, the selector 821 may substitute the magnitude of the motion vector by the amount v' by which motion blur is adjusted, and then supplies the motion vector and the positional 5  signal thereof to the unit-of-processing determining portion 801 and the model-forming unit 802.<br>
With this arrangement, the unit-of-processing determining portion 801 through the calculator 805 of the motion-blur adjusting unit 106 shown in Fig. 78 are able to 10  adjust the amount of motion blur in accordance with the<br>
amount of movement v and the amount v' by which motion blur is adjusted.  For example, when the amount of movement is 5, and the amount v' by which motion blur is adjusted is 3, the unit-of-processing determining portion 801 through the 15  calculator 805 of the motion-blur adjusting unit 106 shown in Fig. 7 6 execute computation on the foreground component image in which the amount of movement v is 5 shown in Fig. 74 according to the model shown in Fig. 76 in which the amount v' by which motion blur is adjusted is 3.  As a 20  result, the image containing motion blur having the amount of movement v of (amount of movement v)/(amount V by which motion blur is adjusted) = 5/3, i.e., about 1.7 is obtained. In this case, the calculated image does not contain motion blur corresponding to the amount of movement v of 3. 25  Accordingly, it should be noted that the relationship<br>
173<br><br>
between the amount of movement v and the amount v' by which motion blur is adjusted is different from the result of the motion-blur adder 806.<br>
As discussed above, the motion-blur adjusting unit 106 5  generates the equation in accordance with the amount of movement v and the unit of processing, and sets the pixel values of the foreground component image in the generated equation, thereby calculating the foreground component image in which the amount of motion blur is adjusted. 10       The processing for adjusting the amount of motion blur contained in the foreground component image executed by the motion-blur adjusting unit 106 is described below with reference to the flowchart of Fig. 79.<br>
In step S801, the unit-of-processing determining 15  portion 801 of the motion-blur adjusting unit 106 generates the unit of processing based on the motion vector and the area information, and supplies the generated unit of processing to the model-forming portion 802.<br>
In step S802, the model-forming portion 802 of the 20  motion-blur adjusting unit 106 selects or generates the<br>
model in accordance with the amount of movement v and the unit of processing.  In step S803, the equation generator 803 generates the normal equation based on the selected model. 25       In step S804, the adder 804 sets the pixel values of<br>
174<br><br>
the foreground component image in the generated normal equation.  In step S805, the adder 804 determines whether the pixel values of all the pixels corresponding to the unit of processing are set.  If it is determined that the pixel 5  values of all the pixels corresponding to the unit of<br>
processing are not yet set, the process returns to step S804, and the processing for setting the pixel values in the normal equation is repeated.<br>
If it is determined in step S805 that the pixel values 10  of all the pixels corresponding to the unit of processing are set, the process proceeds to step S806.  In step S806, the calculator 805 calculates the pixel values of the foreground in which the amount of motion blur is adjusted based on the normal equation in which the pixel values are 15  set supplied from the adder 804.  The processing is then completed.<br>
As discussed above, the motion-blur adjusting unit 106 is able to adjust the amount of motion blur of the foreground image containing motion blur based on the motion 20  vector and the area information.<br>
That is, it is possible to adjust the amount of motion blur contained in the pixel values, that is, contained in sampled data.<br>
As is seen from the foregoing description, the image 25  processing apparatus shown in Fig. 2 is able to adjust the<br>
175<br><br>
amount of motion blur contained in the input image.  The image processing apparatus configured as shown in Fig. 2 is able to calculate the mixture ratio a, which is embedded information, and outputs the calculated mixture-ratio a.<br>
Fig. 80 is a block diagram illustrating another example of the configuration of the motion-blur adjusting unit 106. The motion vector and the positional information thereof supplied from the motion detector 102 are supplied to a unit-of-processing determining portion 901 and an adjusting portion 905.  The area information supplied from the area specifying unit 103 is supplied to the unit-of-processing determining portion 901.  The foreground component image supplied from the foreground/background separator 105 is supplied to a calculator 904.<br>
The unit-of-processing determining portion 901 supplies, together with the motion vector, the unit of processing generated based on the motion vector and the positional information thereof and the area information to a model-forming portion 902.<br>
The model-forming portion 902 forms a model based on the motion vector and the input unit of processing.  More specifically, for example, the model-forming portion 902 may store in advance a plurality of models in accordance with the number of pixels contained in the unit of processing, the number of virtual divided portions of the pixel value in<br>
176<br><br>
the time direction, and the number of foreground components for each pixel.  The model-forming portion 902 then may select the model in which the correlation between the pixel values and the foreground components is designated, such as 5  that in Fig. 81, based on the unit of processing and the<br>
number of virtual divided portions of the pixel value in the time direction.<br>
It is now assumed, for example, that the number of pixels corresponding to the unit of processing is 12, and 10  that the amount of movement v within the shutter time is 5. Then, the model-forming portion 902 sets the number of virtual divided portions to 5, and selects a model formed of eight types of foreground components so that the leftmost pixel contains one foreground component, the second pixel 15  from the left contains two foreground components, the third pixel from the left contains three foreground components, the fourth pixel from the left contains four pixel components, the fifth pixel from the left contains five foreground components, the sixth pixel from the left 20  contains five foreground components, the seventh pixel from the left contains five foreground components, the eighth pixel from the left contains five foreground components, the ninth pixel from the left contains four foreground components, the tenth pixel from the left contains three 25  foreground components, the eleventh pixel from the left<br>
177<br><br>
contains two foreground components, and the twelfth pixel from the left contains one foreground component.<br>
Instead of selecting a model from the prestored models, the model-forming portion 902 may generate a model based on the motion vector and the unit of processing when the motion vector and the unit of processing are supplied.<br>
An equation generator 903 generates an equation based on the model supplied from the model-forming portion 902.<br>
A description is now given, with reference to the models of foreground component images shown in Figs. 81 through 83, of an example of the equation generated by the equation generator 903 when the number of foreground components is 8, the number of pixels corresponding to the unit of processing is 12, and the amount of movement v is 5.<br>
When the foreground components contained in the foreground component image corresponding to the shutter time/v are FOl/v through F08/v, the relationships between FOl/v through F08/v and pixel values C01 through C12 can be expressed by equations (78) through (89), as stated above.<br>
By considering the pixel values C12 and Cll, the pixel value C12 contains only the foreground component F08/v, as expressed by equation (111), and the pixel value Cll consists of the product sum of the foreground component F08/v and the foreground component F07/v.  Accordingly, the foreground component F07/v can be found by equation (112).<br><br>
F08/v = C12	(111)<br>
F07/v = C11-C12	(112)<br>
Similarly, by considering the foreground components contained in the pixel values CIO through C01, the 5  foreground components F06/v through FOl/v can be found by equations (113) through (118), respectively.<br>
F06/v = C10-C11	(113)<br>
F05/v = C09-C10	(114)<br>
F04/v = C08-C09	(115)<br>
10       F03/v = C07-C08+C12	(116)<br>
F02/v = C06-C07+C11-C12	(117)<br>
FOl/v = C05-C06+C10-C11	(118)<br>
The equation generator 903 generates the equations for calculating the foreground components by the difference 15  between the pixel values, as indicated by the examples of equations (111) through (118).  The equation generator 903 supplies the generated equations to the calculator 904.<br>
The calculator 904 sets the pixel values of the foreground component image in the equations supplied from 20  the equation generator 903 so as to obtain the foreground<br>
components based on the equations in which the pixel values are set.  For example, when equations (111) through (118) are supplied from the equation generator 903, the calculator 904 sets the pixel values C05 through C12 in equations (111) 25  through (118) .<br>
179<br><br>
The calculator 904 calculates the foreground components based on the equations in which the pixel values are set. For example, the calculator 904 calculates the foreground components FOl/v through F08/v, as shown in Fig. 82, based 5  on the calculations of equations (111) through (118) in which the pixel values COS through C12 are set.  The calculator 904 supplies the foreground components FOl/v through F08/v to the adjusting portion 905.<br>
The adjusting portion 905 multiplies the foreground 10  components supplied from the calculator 904 by the amount of movement v contained in the motion vector supplied from the unit-of-processing determining portion 901 so as to obtain the foreground pixel values from which motion blur is eliminated.  For example, when the foreground components 15  FOl/v through F08/v are supplied from the calculator 904, the adjusting portion 905 multiples each of the foreground components FOl/v through F08/v by the amount of movement v, i.e., 5, so as to obtain the foreground pixel values F01 through F08 from which motion blur is eliminated, as shown 20  in Fig. 83.<br>
The adjusting portion 905 supplies the foreground component image consisting of the foreground pixel values without motion blur calculated as described above to a motion-blur adder 906 and a selector 907. 25       The motion-blur adder 906 is able to adjust the amount<br>
180<br><br>
of motion blur by using the amount v' by which motion blur is adjusted, which is different from the amount of movement v, for example, the amount v' by which motion blur is adjusted, which is one half the value of the amount of 5  movement v, or the amount v' by which motion blur is<br>
adjusted, which is irrelevant to the amount of movement v. For example, as shown in Fig. 76, the motion-blur adder 906 divides the foreground pixel value Fi without motion blur by the amount v' by which motion blur is adjusted so as to 10  obtain the foreground component Fi/v'.  The motion-blur adder 906 then calculates the sum of the foreground components Fi/v', thereby generating the pixel value in which the amount of motion blur is adjusted.  For example, when the amount v1 by which motion blur is adjusted is 3, 15  the pixel value C02 is set to (F01)/v', the pixel value C3 is set to (F01+F02)/v', the pixel value C04 is set to (F01+F02+F03)/v', and the pixel value COS is set to (F02+F03+F04)/v'.<br>
The motion-blur adder 906 supplies the foreground 20  component image in which the amount of motion blur is adjusted to the selector 907.<br>
The selector 907 selects either the foreground component image without motion blur supplied from the adjusting portion 905 or the foreground component image in 25  which the amount of motion blur is adjusted supplied from<br>
181<br><br>
the motion-blur adder 906 based on a selection signal reflecting a user's selection, and outputs the selected foreground component image.<br>
As discussed above, the motion-blur adjusting unit 106 5  is able to adjust the amount of motion blur based on the selection signal and the amount v' by which motion blur is adjusted.<br>
The processing for adjusting the amount of motion blur of the foreground executed by the motion-blur adjusting unit 10  106 configured as shown in Fig. 80 is described below with reference to the flowchart of Fig. 84.<br>
In step S901, the unit-of-processing determining portion 901 of the motion-blur adjusting unit 106 generates the unit of processing based on the motion vector and the 15  area information, and supplies the generated unit of processing to the model-forming portion 902 and the adjusting portion 905.<br>
In step S902, the model-forming portion 902 of the motion-blur adjusting unit 106 selects or generates the 20  model according to the amount of movement v and the unit of processing.  In step S903, the equation generator 903 generates, based on the selected or generated model, the equations for calculating the foreground components by the difference between  the  pixel values  of  the  foreground 2 5  component image.<br>
182<br><br>
In step S904, the calculator 904 sets the pixel values . of the foreground component image in the generated equations, and extracts the foreground components by using the difference between the pixel values based on the equations 5  in which the pixel values are set.  In step S905, the calculator 904 determines whether all the foreground components corresponding to the unit of processing have been extracted.  If it is determined that all the foreground components corresponding to the unit of processing have not 10  been extracted, the process returns to step S904, and the processing for extracting the foreground components is repeated.<br>
If it is determined in step S905 that all the foreground components corresponding to the unit of 15  processing have been extracted, the process proceeds to step S906.  In step S906, the adjusting portion 905 adjusts each of the foreground components FOl/v through F08/v supplied from the calculator 904 based on the amount of movement v so as to obtain the foreground pixel values FOl/v through F08/v 20  from which motion blur is eliminated.<br>
In step S907, the motion-blur adder 906 calculates the foreground pixel values in which the amount of motion blur is adjusted, and the selector 907 selects the image without motion blur or the image in which the amount of motion blur 25  is adjusted, and outputs the selected image.  The processing<br>
183<br><br>
is then completed.<br>
As described above, the motion-blur adjusting unit 106 configured as shown in Fig. 80 is able to more speedily adjust motion blur of the foreground image containing motion 5  blur according to simpler computations.<br>
A known technique for partially eliminating motion blur, such as a Wiener filter, is effective when being used in the ideal state, but is not sufficient for an actual image quantized and containing noise.  In contrast, it is proved 10  that the motion-blur adjusting unit 106 configured as shown in Fig. 80 is sufficiently effective for an actual image quantized and containing noise.  It is thus possible to eliminate motion blur with high precision.<br>
Fig. 85 is a block diagram illustrating another 15  configuration of the function of the image processing apparatus.<br>
The elements similar to those shown in Fig. 2 are designated with like reference numerals, and an explanation thereof is thus omitted. 20       The area specifying unit 103 supplies area information to the mixture-ratio calculator 104 and a synthesizer 1001.<br>
The mixture-ratio calculator 104 supplies the mixture ratio a to the foreground/background separator 105 and the synthesizer 1001. 25       The foreground/background separator 105 supplies the<br>
184<br><br>
foreground component image to the synthesizer 1001.<br>
The synthesizer 1001 combines a certain background image with the foreground component image supplied from the foreground/background separator 105 based on the mixture 5  ratio a supplied from the mixture-ratio calculator 104 and the area information supplied from the area specifying unit 103, and outputs the synthesized image in which the certain background image and the foreground component image are combined. 10      Fig. 86 illustrates the configuration of the<br>
synthesizer 1001.  A background component generator 1021 generates a background component image based on the mixture ratio a and a certain background image, and supplies the background component image to a mixed-area-image 15  synthesizing portion 1022.<br>
The mixed-area-image synthesizing portion 1022 combines the background component image supplied from the background component generator 1021 with the foreground component image so as to generate a mixed-area synthesized image, and 20  supplies the generated mixture-area synthesized image to an image synthesizing portion 1023.<br>
The image synthesizer 1023 combines the foreground component image, the mixed-area synthesized image supplied from the mixed-area-image synthesizing portion 1022, and the 25  certain background image based on the area information so as<br>
185<br><br>
to generate a synthesized image, and outputs it.<br>
As discussed above, the synthesizer 1001 is able to combine the foreground component image with a certain background image. 5      The image obtained by combining a foreground component image with a certain background image based on the mixture ratio cc, which is the feature quantity, appears more natural compared to an image obtained by simply combining pixels. Fig. 87 is a block diagram illustrating still another 10  configuration of the function of the image processing<br>
apparatus for adjusting the amount of motion blur.  The image processing apparatus shown in Fig. 2 sequentially performs the area-specifying operation and the calculation for the mixture ratio a.  In contrast, the image processing 15  apparatus shown in Fig. 87 simultaneously performs the area-specifying operation and the calculation for the mixture ratio a.<br>
The functional elements similar to those in the block diagram of Fig. 2 are designated with like reference 20  numerals, and an explanation thereof is thus omitted. An input image is supplied to a mixture-ratio calculator 1101, a foreground/background separator 1102, the area specifying unit 103, and the object extracting unit 101. The mixture-ratio calculator 1101 calculates, based on 25  the input image, the estimated mixture ratio when it is<br>
186<br><br>
assumed that each pixel contained in the input image belongs to the covered background area, and the estimated mixture ratio when it is assumed that each pixel contained in the input image belongs to the uncovered background area, and 5  supplies the estimated mixture ratios calculated as<br>
described above to the foreground/background separator 1102.<br>
Fig. 88 is a block diagram illustrating the configuration of the mixture-ratio calculator 1101.<br>
An estimated-mixture-ratio processor 401 shown in Fig. 10  88 is the same as the estimated-mixture-ratio processor 401 shown in Fig. 47.  An estimated-mixture-ratio processor 402 shown in Fig. 88 is the same as the estimated-mixture-ratio processor 402 shown in Fig. 47.<br>
The estimated-mixture-ratio processor 401 calculates 15  the estimated mixture ratio for each pixel by the<br>
computation corresponding to a model of the covered background area based on the input image, and outputs the calculated estimated mixture ratio.<br>
The estimated-mixture-ratio processor 402 calculates 20  the estimated mixture ratio for each pixel by the<br>
computation corresponding to a model of the uncovered background area based on the input image, and outputs the calculated estimated mixture ratio.<br>
The foreground/background separator 1102 generates the 25  foreground component image from the input image based on the<br>
187<br><br>
estimated mixture ratio calculated when it is assumed that the pixel belongs to the covered background area supplied from the mixture-ratio calculator 1101, the estimated mixture ratio calculated when it is assumed that the pixel 5  belongs to the uncovered background area supplied from the mixture-ratio calculator 1101, and the area information supplied from the area specifying unit 103, and supplies the generated foreground component image to the motion-blur adjusting unit 106 and the selector 107. 10       Fig. 89 is a block diagram illustrating an example of the configuration of the foreground/background separator 1102.<br>
The elements similar to those of the foreground/background separator 105 shown in Fig. 64 are 15  designated with like reference numerals, and an explanation thereof is thus omitted.<br>
A selector 1121 selects, based on the area information supplied from the area specifying unit 103, either the estimated mixture ratio calculated when it is assumed that 20  the pixel belongs to the covered background area supplied from the mixture-ratio calculator 1101 or the estimated mixture ratio calculated when it is assumed that the pixel belongs to the uncovered background area supplied from the mixture-ratio calculator 1101, and supplies the selected 25  estimated mixture ratio to the separating portion 601 as the<br>
178<br><br>
mixture ratio a.<br>
The separating portion 601 extracts the foreground components and the background components from the pixel   ! values of the pixels belonging to the mixed area based on 5  the mixture ratio a supplied from the selector 1121 and the area information, and supplies the extracted foreground components to the synthesizer 603 and also supplies the foreground components to the synthesizer 605.<br>
The separating portion 601 can be configured similarly 10  to the counterpart shown in Fig. 69.<br>
The synthesizer 603 synthesizes the foreground component image and outputs it.  The synthesizer 605 synthesizes the background component image and outputs it.<br>
The motion-blur adjusting unit 106 shown in Fig. 87 can 15  be configured similarly to the counterpart shown in Fig. 2. The motion-blur adjusting unit 10 6 adjusts the amount of motion blur contained in the foreground component image supplied from the foreground/background separator 1102 based on the area information and the motion vector, and outputs 20  the foreground component image in which the amount of motion blur is adjusted.<br>
The selector 107 shown in Fig. 87 selects the foreground component image supplied from the foreground/background separator 1102 or the foreground 2 5  component image in which the amount of motion blur is<br>
179<br><br>
adjusted supplied from the motion-blur adjusting unit 106 based on, for example, a selection signal reflecting a user's selection, and outputs the selected foreground component image. 5      As discussed above, the image processing apparatus<br>
shown in Fig. 87 is able to adjust the amount of motion blur contained in an image corresponding to a foreground object of the input image, and outputs the resulting foreground object image.  The image processing apparatus having the 10  configuration shown in Fig. 87 is able to calculate the<br>
mixture ratio a, which is embedded information, and outputs the calculated mixture-ratio a in the same manner as in the first embodiment.<br>
Fig. 90 is a block diagram illustrating still another 15  configuration of the function of the image processing<br>
apparatus for adjusting the amount of motion blur.  The image processing apparatus shown in Fig. 85 sequentially performs the area-specifying operation and the calculation for the mixture ratio a.  In contrast, the image processing 20  apparatus shown in Fig. 90 simultaneously performs the area-specifying operation and the calculation for the mixture ratio a.<br>
The functional elements similar to those indicated by the block of Fig. 87 are designated with like reference 25  numerals, and an explanation thereof is thus omitted.<br>
190<br><br>
The mixture-ratio calculator 1101 shown in Fig. 90 calculates, based on the input image, the estimated mixture ratio when it is assumed that each pixel contained in the input image belongs to the covered background area, and the estimated mixture ratio when it is assumed that each pixel contained in the input image belongs to the uncovered background area, and supplies the estimated mixture ratios calculated as described above to the foreground/background separator 1102 and a synthesizer 1201.<br>
The foreground/background separator 1102 shown in Fig. 90 generates the foreground component image from the input image based on the estimated mixture ratio calculated when it is assumed that the pixel belongs to the covered background area supplied from the mixture-ratio calculator 1101, the estimated mixture ratio calculated when it is assumed that the pixel belongs to the uncovered background area supplied from the mixture-ratio calculator 1101, and the area information supplied from the area specifying unit 103, and supplies the generated foreground component image to the synthesizer 1201.<br>
The synthesizer 1201 combines a certain background image with the foreground component image supplied from the foreground/background separator 1102 based on the estimated mixture ratio calculated when it is assumed that the pixel belongs to the covered background area supplied from the<br><br>
mixture-ratio calculator 1101, the estimated mixture ratio calculated when it is assumed that the pixel belongs to the uncovered background area supplied from the mixture-ratio calculator 1101, and the area information supplied from the 5  area specifying unit 103, and outputs the synthesized image in which the background image and the foreground component image are combined.<br>
Fig. 91 illustrates the configuration of the synthesizer 1201.  The functional elements similar to those 10  of the block diagram of Fig. 86 are designated with like<br>
reference numerals, and explanation thereof is thus omitted.<br>
A selector 1221 selects, based on the area information supplied from the area specifying unit 103, either the estimated mixture ratio calculated when it is assumed that 15  the pixel belongs to the covered background area supplied from the mixture-ratio calculator 1101 or the estimated mixture ratio calculated when it is assumed that the pixel belongs to the uncovered background area supplied from the mixture-ratio calculator 1101, and supplies the selected 20  estimated mixture ratio to the background component generator 1021 as the mixture ratio a.<br>
The background component generator 1021 shown in Fig. 91 generates a background component image based on the mixture ratio a supplied from the selector 1221 and a 25  certain background image, and supplies the background<br>
192<br><br>
component image to the mixed-area-image synthesizing portion 1022.<br>
The mixed-area-image synthesizing portion 1022 shown in Fig. 91 combines the background component image supplied 5  from the background component generator 1021 with the<br>
foreground component image so as to generate a mixed-area synthesized image, and supplies the generated mixed-area synthesized image to the image synthesizing portion 1023. The image synthesizing portion 1023 combines the 10  foreground component image, the mixed-area synthesized image supplied from the mixed-area-image synthesizing portion 1022, and the background image based on the area information so as to generate a synthesized image and outputs it.<br>
In this manner, the synthesizer 1201 is able to combine 15  the foreground component image with a certain background image.<br>
A description is given of an image processing apparatus for processing an input image, which is input as component signals, according to the present invention. 20       In this specification, the component refers to an individual signal, such as a luminance signal, a color-difference signal, or an RGB (Red-green-blue) signal in the component signal.<br>
A description is given below based on an example in 2 5  which component 1 is a luminance value Y, component 2 is a<br>
193<br><br>
color difference U, and component 3 is a color difference V.<br>
Fig. 92 shows an embodiment of an image processing apparatus for generating area information on the basis of an input image which is input as component signals. 5      The component 1, which is one of the component signals of the input image, is input to an area specifying unit 103-1.  The component 2, which is another one of the component signals of the input image, is input to an area specifying unit 103-2.  The component 3, which is still another one of 10  the component signals of the input image, is input to an area specifying unit 103-3.<br>
Based on the component 1, the area specifying unit 103-<br>
1	generates area information 1 and supplies the generated<br>
area information 1 to a logical OR processor 1301.  The area<br>
15 specifying unit 103-1 has the same configuration as that of the area specifying unit 103, and an explanation thereof is thus omitted.<br>
Based on the component 2, the area specifying unit 103-<br>
2	generates area information 2 and supplies the generated<br>
20  area information 2 to a logical OR processor 1302.  The area specifying unit 103-2 has the same configuration as that of the area specifying unit 103, and an explanation thereof is thus omitted.<br>
Based on the component 3, the area specifying unit 103-<br>
25  3 generates area information 3 and supplies the generated<br>
194<br><br>
area information 3 to a logical OR processor 1303.  The area specifying unit 103-3 has the same configuration as that of the area specifying unit 103, and an explanation thereof is thus omitted. 5      Based on the area information 1 supplied from the area specifying unit 103-1, the area information 2 supplied from the area specifying unit 103-2, and the area information 3 supplied from the area specifying unit 103-3, the logical OR processor 1301 calculates the logical OR of the foreground 10  area indicated by the area information 1, the foreground<br>
area indicated by the area information 2, and the foreground area indicated by the area information 3, and generates area information in which the foreground area calculated by logical OR is set.  Based on the area information 1 supplied 15  from the area specifying unit 103-1, the area information 2 supplied from the area specifying unit 103-2, and the area information 3 supplied from the area specifying unit 103-3, the logical OR processor 1301 computes the logical OR of the background area indicated by the area information 1, the 20  background area indicated by the area information 2, and the background area indicated by the area information 3, and generates area information in which the background area calculated by logical OR is set.<br>
Based on the area information 1 supplied from the area 25  specifying unit 103-1, the area information 2 supplied from<br>
195<br><br>
the area specifying unit 103-2, and the area information 3 supplied from the area specifying unit 103-3, the logical OR processor 1301 computes the logical OR of the covered background area indicated by the area information 1, the 5  covered background area indicated by the area information 2, and the covered background area indicated by the area information 3, and generates area information in which the covered background area calculated by logical OR is set. Based on the area information 1 supplied from the area 10  specifying unit 103-1, the area information 2 supplied from the area specifying unit 103-2, and the area information 3 supplied from the area specifying unit 103-3, the logical OR processor 1301 computes the logical OR of the uncovered background area indicated by the area information 1, the 15  uncovered background area indicated by the area information 2, and the uncovered background area indicated by the area information 3, and generates area information in which the uncovered background area calculated by logical OR is set. The logical OR processor 1301 outputs the area 20  information in which the foreground area, the background area, the covered background area, and the uncovered background area are set.<br>
Fig. 93 illustrates the relationship among the component 1,. the component 2, and the component 3,   contained 25  in the component signals.  In Fig. 93, reference letter A<br>
196<br><br>
denotes the component 1, reference letter B denotes the component 2, and reference letter C denotes the component 3.<br>
A sensor has, for example, three CCD area sensors corresponding to the component 1, the component 2, and the 5  component 3.  The characteristics of the CCD area sensor<br>
corresponding to the component 1, the characteristics of the CCD area sensor corresponding to the component 2, and the characteristics of the CCD area sensor corresponding to the component 3 are the same, and distortions which occur in the 10  component 1, the component 2, and the component 3 are the same.<br>
The sensor captures the image of an object 111 corresponding to a single foreground and an object 112 corresponding to a single background, and outputs the 15  component 1, the component 2, and the component 3.<br>
The real world including the object 111 corresponding to a single foreground and the object 112 corresponding to a single background is one, and the phenomenon which occurs in the real world is one.  That is, for example, the shape of 20  the object 111 corresponding to a single foreground is one, and the motion of the object 111 corresponding to a foreground is one.<br>
Therefore, when the image of the object 111 corresponding to a single foreground and the image of the 25  object 112 corresponding to a single background are captured<br><br>
by the sensor, the foreground area, the background area, the mixed area, and the mixture ratio a of the component 1, the foreground area, the background area, the mixed area, and the mixture ratio a of the component2, and the foreground area, the background area, the mixed area, and the mixture ratio a of the component 3 are the same as each other.<br>
However, when the same processing is performed based on each of the component 1, the component 2, and the component 3, the same area information and the same mixture ratio a cannot always be calculated for each.<br>
For example, when the image of the object 111 corresponding to a foreground and the image of the object 112 corresponding to a background, having chroma in which the color-difference signal corresponding to the component 3 which is a color-difference signal, is approximately 0 are captured, the component 1 which is a luminance signal and the component 2 which is a color-difference signal contain significant values, but the component 3 which is a color-difference signal scarcely contains significant values.  In such a case, even if the area signal and the mixture ratio a are calculated based on the component 3, significant values cannot be determined.<br>
Furthermore, for example, when the component 1 which is a luminance signal scarcely changes in the time direction and in the spatial direction and only the color-difference<br>
198<br><br>
signal changes in the time direction or in the spatial direction, even if the area signal and the mixture ratio a are calculated based on the component 1, significant values cannot be determined, and if the area signal and the mixture 5  ratio a are calculated based on the component 2 or 3, significant values can be determined.<br>
Furthermore, there are cases in which the CCD area sensor corresponding to a specific component may cause an error to occur. 10      As discussed above, as a result of performing<br>
processing using a plurality of components corresponding to single area information and a single mixture ratio a to be calculated, results with a higher accuracy compared to processing using, for example, a single component signal or 15  a single composite signal are obtained.<br>
When a statistical process is performed using a plurality of components, since the amount of data is increased, the accuracy of the processed results is improved further.  Furthermore, for example, the accuracy of the 20  mixture ratio a which is calculated by applying a method of least squares to a plurality of components is higher than the accuracy of the mixture ratio a  calculated by processing using a single component signal or a single composite signal. Next, referring to the flowchart in Fig. 94, a 25  description will now be given of area determining processing<br>
199<br><br>
using a component signal by the image processing apparatus configured as shown in Fig. 92.<br>
In step S1301, the area specifying unit 103-1 executes area specifying processing on the basis of the component 1 5  in order to generate area information 1, and supplies the generated area information 1 to the logical OR processor 1301.  The processing of step S1301 is the same as the processing of step Sll, and a detailed explanation thereof is thus omitted. 10       In step S1302, the area specifying unit 103-2 executes area specifying processing based on the component 2 in order to generate area information 2, and supplies the generated area information 2 to the logical OR processor 1301.  The processing of step S1302 is the same as the processing of 15  step Sll, and a detailed explanation thereof is thus omitted. In step S1303, the area specifying unit 103-3 executes area specifying processing based on the component 3 in order to generate area information 3, and supplies the generated area information 3 to the logical OR processor 1301.  The 20  processing of step S1303 is the same as the processing of step Sll, and an explanation thereof is thus omitted.<br>
In step S1304, the logical OR processor 1301 calculates the logical OR of the foreground area specified by the component 1, the foreground area specified by the component 25  2, and the foreground area specified by the component 3, and<br><br>
sets the foreground area calculated by logical OR as area information.<br>
In step S1305, the logical OR processor 1301 calculates the logical OR of the background area specified by the 5  component 1, the background area specified by the component 2, and the background area specified by the component 3, and sets the background area calculated by logical OR as area information.<br>
In step S1306, the logical OR processor 1301 calculates 10  the logical OR of the covered background area specified by the component 1, the covered background area specified by the component 2, and the covered background area specified by the component 3, and sets the covered background area calculated by logical OR as area information. 15       In step S1307, the logical OR processor 1301 determines the logical OR of the uncovered background area specified by the component 1, the uncovered background area specified by the component 2, and the uncovered background area specified by the component 3, and sets the uncovered background area 20  calculated by logical OR as area information.  The logical OR processor 1301 outputs the area information in which the foreground area, the background area, the covered background area, and the uncovered background area are set, and then the processing is terminated. 25      As discussed above, the image processing apparatus<br>
201<br><br>
configured as shown in Fig. 92 specifies an area for each component of the component signal and determines the logical OR of the specified areas in order to generate final area information.  The image processing apparatus configured as 5  shown in Fig. 92 is able to thoroughly output the area information in which the foreground area, the background area, the covered background area, and the uncovered background area are specified.<br>
Fig. 95 shows another embodiment of the image 10  processing apparatus for generating area information on the basis of an input image which is input as component signals.<br>
The same elements as those shown in Fig. 92 are designated with like reference numerals, and an explanation thereof is thus omitted. 15      Based on the area information supplied from the area<br>
specifying unit 103-1, the area information 2 supplied from the area specifying unit 103-2, and the area information 3 supplied from the area specifying unit 103-3, a logical AND processor 1321 calculates the logical AND of the foreground 20  area indicated by the area information 1, the foreground area indicated by the area information 2, the foreground area indicated by the area information 3, and generates area information in which the foreground area calculated by logical AND is set.  Based on the area information supplied 25  from the area specifying unit 103-1, the area information 2<br>
202<br><br>
supplied from the area specifying unit 103-2, and the area information 3 supplied from the area specifying unit 103-3, the logical AND processor 1321 calculates the logical AND of the background area indicated by the area information 1, the background area indicated by the area information 2, the background area indicated by the area information 3, and generates area information in which the background area calculated by logical AND is set.<br>
Based on the area information supplied from the area specifying unit 103-1, the area information 2 supplied from the area specifying unit 103-2, and the area information 3 supplied from the area specifying unit 103-3, the logical AND processor 1321 calculates the logical AND of the covered background area indicated by the area information 1, the covered background area indicated by the area information 2, the covered background area indicated by the area information 3, and generates area information in which the covered background area calculated by logical AND is set. Based on the area information supplied from the area specifying unit 103-1, the area information 2 supplied from the area specifying unit 103-2, and the area information 3 supplied from the area specifying unit 103-3, the logical AND processor 1321 calculates the logical AND of the uncovered background area indicated by the area information 1, the uncovered background area indicated by the area<br>
203<br><br>
information 2, the uncovered background area indicated by the area information 3, and generates area information in which the uncovered background area calculated by logical AND is set. 5       The logical AND processor 1321 outputs the area<br>
information in which the foreground area, the background area, the covered background area, and the uncovered background area are set.<br>
Next, referring to the flowchart in Fig. 96, a 10  description will now be given of area determining processing using components, performed by the image processing apparatus configured as shown in Fig. 95.<br>
In step S1321, the area specifying unit 103-1 executes area specifying processing on the basis of the component 1 15  in order to generate area information 1 and supplies the generated area information 1 to the logical AND processor 1321.   The processing of step S1321 is the same as the processing of step Sll, and a detailed explanation thereof is thus omitted. 20       In step S1322, the area specifying unit 103-2 executes area specifying processing on the basis of the component 2 in order to generate area information 2 and supplies the generated area information 2 to the logical AND processor 1321.  The processing of step S1322 is the same as the 25  processing of step Sll, and a detailed explanation thereof<br><br>
is thus omitted.<br>
In step S1323, the area specifying unit 103-3 executes area specifying processing on the basis of the component 3 in order to generate area information 3 and supplies the 5  generated area information 3 to the logical AND processor 1321.  The processing of step S1323 is the same as the processing of step Sll, and a detailed explanation thereof is thus omitted.<br>
In step S1324, the logical AND processor 1321 10  determines the logical AND of the foreground area specified by the component 1, the foreground area specified by the component 2, and the foreground area specified by the component 3, and sets the foreground area calculated by logical AND as area information. 15       In step S1325, the logical AND processor 1321<br>
determines the logical AND of the background area specified by the component 1, the background area specified by the component 2, and the background area' specified by the component 3, and sets the background area calculated by 20  logical AND as area information.<br>
In step S1326, the logical AND processor 1321 determines the logical AND of the covered background area specified by the component 1, the covered background area specified by the component 2, and the covered background 25  area specified by the component 3, and sets the covered<br><br>
background area calculated by logical AND as area information.<br>
In step S1327, the logical AND processor 1321 determines the logical AND of the uncovered background area 5  specified by the component 1, the uncovered background area specified by the component 2, and the uncovered background area specified by the component 3, and sets the uncovered background area calculated by logical AND as area information.  The logical AND processor 1321 outputs the 10  area information in which the foreground area, the<br>
background area, the covered background area, and the uncovered background area are set, and the processing is then terminated.<br>
As discussed above, the image processing apparatus 15  configured as shown in Fig. 95 specifies an area for each component, and determines the logical AND of the specified areas in order to generate final area information.  The image processing apparatus configured as shown in Fig. 95 is able to output area information having a small amount of 20  errors.<br>
Fig. 97 shows still another embodiment of the image processing apparatus for generating area information on the basis of an input image which is input as component signals. An area specifying unit 1331 adds, for each pixel, the 2 5  component 1, the component 2, and the component 3, contained<br>
206<br><br>
in the input component signals, and determines whether the pixel belongs to a moving area or a stationary area on the basis of the component 1, the component 2, and the component 3, which are added for each pixel.  The area specifying unit 5  1331 generates area information on the basis of the result of the determination of the moving area or the stationary area, and outputs the generated area information.<br>
Referring to Figs. 98 to 102, the processing of the area specifying unit 1331 will now be described. 10       As shown in Fig. 98, from the viewpoint of statistical characteristics of images, the time correlation is stronger than the space correlation in the stationary area of the image.  Furthermore, in the moving area of the image, conversely, the space correlation is stronger than the time 15  correlation.<br>
When the space correlation for the determination of the moving area or the stationary area is to be calculated, as shown in Fig. 99, for example, with regard to the pixels of a block of 5 x 5 pixels with the designated pixel being the 20  center, the area specifying unit 1331 calculates the<br>
differences of the pixel values of the adjacent pixels, and calculates the total sum of the absolute values of the calculated differences.  The area specifying unit 1331 calculates the correlation value corresponding to the space 25  correlation by dividing the total sum of the absolute values<br>
207<br><br>
of the calculated differences by the number of the differences.<br>
For example, when the designated pixel is x33 and the pixel values of the pixels contained in the block are xll to 5  x55, the area specifying unit 1331 calculates the sum of the absolute values the differences, which is the total sum of the absolute values of the differences of the pixel values of the adjacent pixels, shown in equation (119): absdute values = l(xI/-xZ2)|+|(x/2-xZ3)| + |(ri3-^|+-of differences  + |(x52-x53)|+|(x53-x54T)|+|(xS4-x55)|<br>
+ \(xll-x21)\+\{x21-x31)\+\{x31-x41)\+-+ \(x25-x35)\+\(x35-x45)\+\(x4S-x55)(119)<br>
10       The area specifying unit 1331 calculates the<br>
correlation value corresponding to the space correlation by dividing the sum of the absolute values the differences by the difference number, i.e., 40.<br>
When the time correlation for determining whether or<br>
15  not it is a moving area or a stationary area is to be<br>
calculated, the area specifying unit 1331 calculates the difference between the pixel value of the designated pixel and the pixel value of the pixel at the corresponding position in the previous frame, and also calculates the 20  difference between the pixel value of the designated pixel and the pixel value of the pixel at the corresponding<br>
208<br><br>
position in the subsequent frame.  In order to prevent the area from being determined to be wide in the boundary as a result of using a difference indicating a stronger correlation, the area specifying unit 1331 selects either 5  the difference with respect to the pixel value of the pixel at the corresponding position in the previous frame or the difference with respect to the pixel value of the pixel at the corresponding position in the previous frame, which is smaller. 10      The area specifying unit 1331 calculates the total sum of the absolute values of the selected differences.  The area specifying unit 1331 calculates the correlation value corresponding to the time correlation by dividing the total sum of the absolute values of the calculated differences by 15  the number of differences.<br>
For example, when the designated frame is frame #n, as shown in Fig. 100, the area specifying unit 1331 calculates the differences between respective pixels of a block of 3 x 3 pixels, for example, with the designated pixel x22 being 20  the center.<br>
The area specifying unit 1331 calculates the difference between the pixel value xll of the pixel in frame #n and the pixel value xll of the pixel at the corresponding position in frame #n-l, and the difference between the pixel value 25  xll of the pixel in frame #n and the pixel value xll of the<br>
209<br><br>
pixel at the corresponding position in frame #n+l.  The area specifying unit 1331 selects either the difference with respect to the pixel value xll of the pixel at the corresponding position in frame #n-l or the difference with 5  respect to the pixel value xll of the pixel at the<br>
corresponding position in frame #n+l, which is smaller.<br>
Similarly, the area specifying unit 1331 calculates the difference between each of the pixel values xl2 to x33 of the pixels in frame #n and each of the pixel values xl2 to 10  x33 of the pixels at the corresponding positions in frame #n-l, and the difference between each of the pixel values xl2 to x33 of the pixels in frame #n and each of the pixel values xl2 to x33 of the pixels at the corresponding positions in frame #n+l.  The area specifying unit 1331 15  selects either the corresponding difference with each of the pixel values xl2 to x33 of the pixels at the corresponding positions in frame #n-l or the corresponding difference with each of the pixel values xl2 to x33 of the pixels at the corresponding positions in frame #n + l, which is smaller. 20      The area specifying unit 1331 determines the total sum of the absolute values of the selected nine differences. The area specifying unit 1331 calculates the correlation value corresponding to the time correlation by dividing the total sum of the absolute values of the calculated 25  differences by the number of differences, i.e., 9.<br><br>
Furthermore, the area specifying unit 1331 may calculate the time correlation and the space correlation for each pixel.  Furthermore, the area specifying unit 1331 may calculate, in addition to the sum of the absolute values of 5  the differences, values indicating other correlations, such as the sum of squares of differences, as values indicating the time correlation and the space correlation.<br>
The number of pixels contained in the block for which the time correlation and the space correlation are to be 10  calculated does not limit the present invention.<br>
Fig. 101 illustrates a time correlation and a space correlation in a stationary area.  For example, in the stationary area, since the image is stationary, the pixel value J of the designated pixel is the same as the pixel 15  value J of the pixel at the corresponding position.<br>
Therefore, in the stationary area, the time correlation is very strong.<br>
In contrast, the pixel adjacent to the designated pixel has a pixel value I or a pixel value K differing from the 20  pixel value J.<br>
As discussed above, in the stationary area, the space correlation is weaker than the time correlation.<br>
Fig. 102 illustrates a time correlation and a space correlation in a-moving area.  For example, of the 25  components 1/4, J/4, K/4, and L/4 of the image, contained in<br>
211<br><br>
the designated pixel in the moving area, the components 1/4, J/4, and K/4 of the image are contained in the adjacent pixels, and the components J/4, K/4, and L/4 of the image are contained in other adjacent pixels.  Therefore, in the 5  moving area, the space correlation is strong.<br>
In contrast, the pixel of the adjacent frame, corresponding to the designated pixel, contains different image components.<br>
As discussed above, in the moving area, the time 10  correlation is weaker than the space correlation.<br>
As is seen from the above description, by determining the space correlation and the time correlation and by comparing the space correlation with the time correlation, the area specifying unit 1331 is able to know whether, the 15  designated pixel is contained in the moving area or in the stationary area.<br>
The area specifying unit 1331 performs the determination of the moving area or the stationary area with respect to all the pixels contained in the frame. 20      Based on the determination result of the moving area or the stationary area, the area specifying unit 1331 determines to which one of the foreground area, the background area, the covered background area, and the uncovered background area each pixel belongs, and generates 25  area information.<br>
212<br><br>
For example, when the same area as the foreground area is determined to be a moving area, the area specifying unit 1331 makes a determination as to the foreground area, the background area, the covered background area, and the 5  uncovered background area for each pixel in the following<br>
manner.  When the designated pixel in frame #n is determined to be moving, the area specifying unit 1331 determines that the designated pixel in frame #n belongs to the foreground area. 10      When the designated pixel in frame #n is determined to be stationary, and when the pixel in frame #n+l located at the same position as the position of the designated pixel in frame #n in the image, is determined to be moving, the area specifying unit 1331 determines that the designated pixel in 15  frame #n belongs to the covered background area.<br>
When the designated pixel in frame #n is determined to be stationary, and when the pixel in frame #n-l located at the same position as the position of the designated pixel in frame #n in the image, is determined to be moving, the area 20  specifying unit 1331 determines that the designated pixel in frame #n belongs to the uncovered background area.<br>
The area specifying unit 1331 determines that the pixel which is determined to be stationary and which does not belong to the covered background area or the uncovered 25  background area belongs to the background area.<br>
213<br><br>
When the area formed of the background area and the mixed area is determined to be a moving area, the area specifying unit 1331 makes a determination as to the foreground area, the background area, the covered background 5  area, and the uncovered background area for each pixel by referring to the stationary area of the adjacent frame.<br>
A description will now be given of an example of processing results with reference to Figs. 103 to 106. Fig. 103 shows an example of an input image 10  corresponding to the component 1, the component 2, and the component 3, which are input to the area specifying unit 1331.<br>
Fig. 104 shows results in which the area specifying unit 1331 makes a determination as to the moving area or the 15  stationary area for each pixel in such a manner as to<br>
correspond to the input image shown in Fig. 103.  In Fig. 104, white indicates a moving area, and black indicates a stationary area.  It can be seen that, although there are incorrectly determined portions, the moving area or the 20  stationary area is nearly specified as a whole.<br>
Fig. 105 shows results in which the area specifying unit 1331 has made the determination of the moving area or the stationary area by using a block of 15 x 15 pixels as units in such a manner as to correspond to the input image 25  shown in Fig, 103.  In Fig. 105, white indicates a moving<br><br>
area, and black indicates a stationary area.  It can be seen that the moving area or the stationary area is specified nearly accurately.<br>
Fig. 106 shows results in which the area specifying 5  unit 1331 has made the determination of the foreground area, the background area, the covered background area, and the uncovered background area on the basis of the results of the determination of the moving area or the stationary area shown in Fig. 105.  In Fig. 106, reference letter A 10  indicates a background area.  Reference letter B indicates an uncovered background area.  Reference letter C indicates a foreground area.  Reference letter D indicates a covered background area.<br>
It can be seen that, since the area is determined based 15  on the almost accurate specification of the moving area or the stationary area, the foreground area, the background area, the covered background area, and the uncovered background area can almost be specified accurately.<br>
The area specifying processing using components, 20  performed by the area specifying unit 331, is described below with reference to the flowchart of Fig. 107.<br>
In step S1331, the area specifying unit 1331 calculates the total sum of the components for each pixel.<br>
In step S1332, the area specifying unit 1331 determines 25  the space correlation by using, for example, a block<br>
215<br><br>
composed of a predetermined number of pixels as units.  In step S1333, the area specifying unit 1331 determines the time correlation by using, for example, a block composed of a predetermined number of pixels as units. 5      In step S1334, the area specifying unit 1331 compares the space correlation with the time correlation for each pixel in order to determine whether or not the time correlation is stronger than the space correlation.  When it is determined that the time correlation is stronger than the 10  space correlation, the process proceeds to step S1335, where the area specifying unit 1331 sets the designated pixel as being in a stationary area, and then the process proceeds to step S1337.<br>
When it is determined in step S1334 that the time 15  correlation is not stronger than the space correlation, since the space correlation is stronger than the time correlation, the process proceeds to step S1336, where the area specifying unit 1331 sets the designated pixel as being in a moving area, and then the process proceeds to step 20  S1337.<br>
Processings of steps S1334 through S1336 are performed from each of all the pixels within the frame.<br>
In step S1337, based on the stationary or moving setting, the area specifying unit 1331 makes a determination 25  as to the foreground area, the background area, the covered<br>
216<br><br>
background area, or the uncovered background area, and then the processing is terminated.<br>
For example, when it is determined in step S1337 that the designated pixel in frame #n is determined to be moving, 5  the area specifying unit 1331 determines that the designated pixel in frame #n belongs to the foreground area.<br>
When it is determined that the designated pixel in frame #n is stationary, and when it is determined that the pixel in frame #n+l located at the same position as the 10  position of the designated pixel in frame #n in the image is moving, the area specifying unit 1331 determines that the designated pixel in frame #n belongs to the covered background area.<br>
When it is determined that the designated pixel in 15  frame #n is stationary, and when it is determined that the pixel in frame #n-l located at the same position as the position of the designated pixel in frame #n in the image is moving, the area specifying unit 1331 determines that the designated pixel in frame #n belongs to the uncovered 20  background area.<br>
The area specifying unit 1331 determines that the pixel which is determined to be stationary and which does not belong to the covered background area or the uncovered background area belongs to the background area. 25      As discussed above, based on the components, the area<br><br>
specifying unit 1331 shown in Fig. 97 is able to specify the foreground area, the background area, the covered background area, or the uncovered background area.<br>
Fig. 108 shows an embodiment of an image processing 5  apparatus for calculating the mixture ratio a on the basis of input images and area information, which are input as component signals.<br>
A mixture-ratio calculator 104-1 calculates a mixture ratio 1 on the basis of the area information and the 10  component 1, and supplies the calculated mixture ratio 1 to an averaging processor 1401.  The mixture-ratio calculator 104-1 has the same configuration as that of the estimated-mixture-ratio calculator 104, and an explanation thereof is thus omitted. 15       A mixture-ratio calculator 104-2 calculates a mixture ratio 2 on the basis of the area information and the component 2, and supplies the calculated mixture ratio 2 to the averaging processor 1401.  The mixture-ratio calculator 104-2 has the same configuration as that of the estimated-20  mixture-ratio calculator 104, and an explanation thereof is thus omitted.<br>
A mixture-ratio calculator 104-3 calculates a mixture ratio 3 on the basis of the area information and the component 3, and supplies the calculated mixture ratio 3 to 25  the averaging processor 1401.  The mixture-ratio calculator<br>
218<br><br>
104-3 has the same configuration as that of the estimated-mixture-ratio calculator 104, and an explanation thereof is thus omitted.<br>
The averaging processor 1401 calculates the average 5  value of the mixture ratio 1 supplied from the mixture-ratio calculator 104-1, the mixture ratio 2 supplied from the mixture-ratio calculator 104-2, and the mixture ratio 3 supplied from the mixture-ratio calculator 104-3, and outputs the calculated average value as the mixture ratio a. 10      As indicated by "A" in Fig. 109, the mixture ratio a corresponding to the luminance value Y which is the component 1, the mixture ratio a corresponding to the color difference U which is the component 2, and the mixture ratio a corresponding to the color difference V which is the 15  component 3 in a predetermined pixel are the same.  The<br>
image processing apparatus configured as shown in Fig. 108 is able to calculate the mixture ratio a more accurately by calculating the mixture ratio a using the component 1, the component 2, and the component 3. 20       Referring to the flowchart of Fig. 110, a description<br>
is given of the processing for calculating the mixture ratio a using component signals, performed by the image processing apparatus configured as shown in Fig. 108.<br>
In step S1401, the mixture-ratio calculator 104-1 25  calculates the mixture ratio 1 on the basis of the area<br>
219<br><br>
information and the component 1.  The mixture-ratio calculator 104-1 supplies the calculated mixture ratio 1 to the averaging processor 1401.  The processing of step S1401 is similar to that of step S12, and a detailed explanation 5  thereof is thus omitted.<br>
In step S1402, the mixture-ratio calculator 104-2 calculates the mixture ratio 2 on the basis of the area information and the component 2.  The mixture-ratio calculator 104-2 supplies the calculated mixture ratio 2 to 10  the averaging processor 1401.  The processing of step S1402 is similar to that of step S12, and a detailed explanation thereof is thus omitted.<br>
In step S1403, the mixture-ratio calculator 104-3 calculates the mixture ratio 3 on the basis of the area 15  information and the component 3.  The mixture-ratio<br>
calculator 104-3 supplies the calculated mixture ratio 3 to the averaging processor 1401.  The processing of step S1403 is similar to that of step S12, and a detailed explanation thereof is thus omitted. 20       In step S1404, the averaging processor 1401 calculates the average value of the mixture ratio 1 based on the component 1, the mixture ratio 2 based on the component 2, and the mixture ratio 3 based on the component 3, and outputs the calculated average value as the mixture ratio a. 25  The processing is then terminated.<br><br>
As discussed above, the image processing apparatus configured as shown in Fig. 108 calculates the mixture ratio for each component, and calculates the average value of the calculated mixture ratios in order to generate the final 5  mixture ratio a.  The image processing apparatus configured as shown in Fig. 108 is able to calculate the mixture ratio a in which an influence due to an error which occurs in one component is reduced.<br>
Fig. Ill shows another embodiment of an image 10  processing apparatus for calculating the mixture ratio a on the basis of input images and area information, which are input as component signals.  The same elements as those shown in Fig. 108 are designated with like reference numerals, and an explanation thereof is thus omitted. 15      A majority processor 1411 classifies the mixture ratio 1 supplied from the mixture-ratio calculator 104-1, the mixture ratio 2 supplied from the mixture-ratio calculator 104-2, and the mixture ratio 3 supplied from the mixture ratio calculator 104-3 at a predetermined interval, and 20  determines the frequency corresponding to the representative value of the interval.  The majority processor 1411 determines the mixture ratio a on the basis of the frequency corresponding to the representative value and outputs the determined mixture ratio a. 25       For example, when the width of the interval is 0.1 and<br>
221<br><br>
the representative values are 0.0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, and 1.0, and when the mixture ratio 1 is 0.12, the mixture ratio 2 is 0.13, and the mixture ratio 3 is 0.41, the majority processor 1411 determines the 5  frequency of the representative value 0.1 to be 2 and<br>
determines the frequency of the representative value 0.4 to be 1.  The majority processor 1411 sets the representative value 0.1 corresponding to the largest frequency 2 to the mixture ratio a. 10       Referring to the flowchart of Fig. 112, a description<br>
is given of the processing for calculating the mixture ratio a, using components, performed by the area specifying unit 331 configured as shown in Fig. 111.<br>
The processings of step S1411 through step S1413 are 15  similar to those of step S1401 through step S1403,<br>
respectively, and an explanation thereof is thus omitted.<br>
In step S1414, the majority processor 1411 classifies the mixture ratio of each component at a predetermined interval, and determines the frequency. 20       In step S1415, the majority processor 1411 determines the mixture ratio a on the basis of the frequency, and then the processing is terminated.<br>
As discussed above, the image processing apparatus configured as shown in Fig. Ill calculates the mixture ratio 25  for each component, and generates the final mixture ratio a<br>
222<br><br>
on the basis of the frequency of the calculated mixture ratio.  The image processing apparatus configured as shown in Fig. Ill is able to calculate a highly reliable mixture ratio a in which an influence of a mixture ratio whose value 5  differs greatly due to an error of a single component is eliminated.<br>
Fig. 113 shows•still another embodiment of the image processing apparatus for calculating the mixture ratio a on the basis of input images and the area information, which 10  are inputs as component signals.<br>
A mixture-ratio calculator 1421 adds, for each pixel, the pixel values of the input component 1, component 2, and component 3, calculates the mixture ratio a on the basis of the added pixel values of the component 1, the component 2, 15  and the component 3 and the area information, and outputs the calculated mixture ratio a.<br>
Fig. 114 is a block diagram illustrating the configuration of the mixture-ratio calculator 1421.  An adder 1431' adds, for each pixel, the pixel values of the 20  input component 1, component 2, and component 3, and<br>
supplies the added value to the estimated-mixture-ratio processor 401 and the estimated-mixture-ratio processor 402.<br>
Based on the value in which the pixel values of the component 1, the component 2, and the component 3 are added 25  for each pixel, the estimated-mixture-ratio processor 401<br><br>
calculates the estimated mixture ratio for each pixel by-<br>
calculations corresponding to a model in the covered<br>
background area, and supplies the calculated estimated<br>
mixture ratio to the mixture-ratio determining portion 403.<br>
5      Equation (21) showing the mixture ratio a of the pixel<br>
belonging to the covered background area can be expressed by<br>
equation (120) through equation (122) for each component:<br>
aY « (CY-NY)/(PY-NY)	(120)<br>
aU » (CU-NU)/(PU-NU)	(121)<br>
10       aV * (CV-NV)/(PV-NV)	(122)<br>
CY denotes a pixel value of frame #n in the component 1, which is the luminance value Y.  NY denotes a pixel value of frame #n+l which is subsequent to frame #n in the component 1.  PY denotes a pixel value of frame #n-l which is previous 15  to frame #n in the component 1.<br>
CU denotes a pixel value of frame #n in the component 2, which is the color difference U.  NU denotes a pixel value of frame #n+l which is subsequent to frame #n in the component 2.  PU denotes a pixel value of frame #n-l which 20  is previous to frame #n in the component 2.<br>
CV denotes a pixel value of frame #n in the component 3, which is the color difference V.  NV denotes a pixel value of frame #n+l which is subsequent to frame #n in the component  3.     PV denotes a pixel value of frame #n-l which 25  is previous to frame #n in the component 3.<br>
224<br><br>
Since the mixture ratio a to be calculated is the same<br>
value in the components 1 to 3, equation (123) holds:<br>
ocY = ecu = (XV	(123)<br>
Equation (124) can be derived from equations (120) to 5  (123) .<br>
(CY-NY)-(PY-NY) = (CU-NU)/ (PU-NU) = (CV-NV)/(PV-NV)<br>
(124) Furthermore, equation (125) for calculating the mixture ratio a can be derived from equation (124). 10       a= ((CY+CU+CV)-(NY+NU+NV))/((PY+PU+PV)-(NY+NU+NV))<br>
(125) As discussed above, the mixture ratio a can be calculated based on the value in which the pixel values of the component 1, the component 2, and the component 3 are 15  added.<br>
The estimated-mixture-ratio processor 402 calculates an estimated mixture ratio for each pixel by calculations corresponding to a model of an uncovered background area based on the value in which the pixel values of the 2 0  component 1, the component 2, and the component 3 are added for each pixel, and supplies the calculated estimated mixture ratio to the mixture-ratio determining portion 403.<br>
The mixture-ratio determining portion 403 sets the mixture ratio a to 0 when the target pixel belongs to the 25  foreground area, and sets the mixture ratio a to 1 when the<br>
225<br><br>
target pixel belongs to the background area.  When the target pixel belongs to the covered background area, the mixture-ratio determining portion 403 sets the estimated mixture ratio supplied from the estimated-mixture-ratio 5  processor 401 as the mixture ratio a.  When the target pixel belongs to the uncovered background area, the mixture-ratio determining portion 403 sets the estimated mixture ratio supplied from the estimated-mixture-ratio processor 402 as the mixture ratio a.  The mixture-ratio determining portion 10  403 outputs the mixture ratio a which has been set based on the area information.<br>
As discussed above, by using the component 1, the component 2, and the component 3, the mixture-ratio calculator 1421 is able to calculate the mixture ratio a 15  having a higher accuracy than the mixture ratio a calculated based on a single signal.<br>
Next, referring to the flowchart of Fig. 115, a description is given of the processing for calculating the mixture ratio a based on the input image and the area 20  information, which are input as component signals, performed by the image processing apparatus of Fig. 113.  In step S1421, an adder 1431 adds up the pixel values of the input component 1, component 2, and component 3 for each pixel. The adder 1431 supplies the added-up pixel value to the 25  estimated-mixture-ratio processor 401 and the estimated-<br>
226<br><br>
mixture-ratio processor 402.<br>
In step S1422, based on the added-up pixel value, the estimated-mixture-ratio processor 401 calculates the estimated mixture ratio for each pixel by a calculation 5  corresponding to a model of a covered background area.  The estimated-mixture-ratio processor 401 supplies the calculated estimated mixture ratio to the mixture-ratio determining portion 403.  Details of the processing of step S1422 are similar to those of the processing of step S402, 10  and an explanation thereof is thus omitted.<br>
In step S1423, based on the added-up pixel value, the estimated-mixture-ratio processor 402 calculates the estimated mixture ratio for each pixel by calculations corresponding to a model of the uncovered background area. 15  The estimated-mixture-ratio processor 402 supplies the calculated estimated mixture ratio to the mixture-ratio determining portion 403.  Details of the processing of step S1423 are similar to those of the processing of step S403, and an explanation thereof is thus omitted. 20       In step S1424, the mixture-ratio calculator 104<br>
determines whether the mixture ratios have been estimated for the whole frame.  If it is determined that the mixture ratios have not yet been estimated for the whole frame, the process returns to step S1422, and the processing for 25  estimating the mixture ratio for the subsequent pixel is<br>
227<br><br>
repeated.<br>
If it is determined in step S1424 that the mixture ratios have been estimated for the whole frame, the process proceeds to step S1425.  In step S1425, the mixture-ratio 5  determining portion 403 sets the mixture ratio a based on the area information indicating to which of the foreground area, the background area, the covered background area, or the uncovered background area the pixel belongs.  The mixture-ratio determining portion 403 sets the mixture ratio 10  a to 0 when the target pixel belongs to the foreground area, and sets the mixture ratio a to 1 when the target pixel belongs to the background area.  When the target pixel belongs to the covered background area, the mixture-ratio determining portion 403 sets the estimated mixture ratio 15  supplied from the estimated-mixture-ratio processor 401 as the mixture ratio a.  When the target pixel belongs to the uncovered background area, the mixture-ratio determining portion 403 sets the estimated mixture ratio supplied from the estimated-mixture-ratio processor 402 as the mixture 20  ratio a.  The processing is then terminated.<br>
As discussed above, the image processing apparatus configured as shown in Fig. 113 is able to calculate the mixture ratio a, which is a feature quantity, corresponding to each pixel, with higher accuracy on the basis of the area 25  information, the component 1, the component 2, and the<br>
228<br><br>
component 3.<br>
The embodiment has been discussed above by setting the mixture ratio a to the ratio of the background components contained in the pixel values.  However, the mixture ratio a 5  may be set to the ratio of the foreground components contained in the pixel values.<br>
The embodiment has been discussed above by setting the moving direction of the foreground object to the direction from the left to the right.  However, the moving direction 10  is not restricted to the above-described direction.<br>
In the above description, a real-space image having a three-dimensional space and time axis information is projected onto a time space having a two-dimensional space and time axis information by using a video camera.  However, 15  the present invention is not restricted to this example, and can be applied to the following case.  When a greater amount of first information in one-dimensional space is projected onto a smaller amount of second information in a two-dimensional space, distortion generated by the projection 20  can be corrected, significant information can be extracted, or a more natural image can be synthesized.<br>
The sensor is not restricted to a CCD, and may be another type of sensor, such as a solid-state image-capturing device, for example, a CMOS (Complementary Metal 25  Oxide Semiconductor) a BBD (Bucket Brigade Device), a CID<br>
229<br><br>
(Charge Injection Device), or a CPD (Charge Priming Device). Also, the sensor  does not have to be a sensor in which detection devices are arranged in a matrix, and may be a sensor in which detection devices are arranged in one line. 5      A recording medium in which a program for performing the signal processing of the present invention is recorded may be formed of a packaged medium in which the program is recorded, which is distributed for providing the program to a user separately from the computer, as shown in Fig. 1, 10  such as the magnetic disk 51 (including a floppy (registered trade name) disk), the optical disc 52 (CD-ROM (Compact Disc-Read Only Memory) and a DVD (Digital Versatile Disc)), the magneto-optical disk 53 (including MD (Mini-Disc) (registered trade name)), or the semiconductor memory 54. 15  The recording medium may also be formed of the ROM 22 or a hard disk contained in the storage unit 28 in which the program is recorded, such recording medium being provided to the user while being prestored in the computer.<br>
The steps forming the program recorded in a recording 20  medium may be executed chronologically according to the<br>
orders described in the specification. However, they do not have to be executed in a time-series manner, and they may be executed concurrently or individually.<br>
25  Industrial Applicability<br>
230<br><br>
We claim:<br>
1. An image processing apparatus for processing image data which is formed of a predetermined number of pixel data, having a plurality of types of components at the same pixel position, obtained by an image-capturing device including a predetermined number of pixels, the pixels having a time integrating function, said image processmg apparatus comprising:<br>
area specifying means for specifying, in correspondence with said image data, a mixed area in which foreground object components which form a foreground object and background object components which form a background object are mixed; and<br>
mixture-ratio detection means for detecting, in correspondence with said image data, the mixture ratio indicating the ratio of the mixture of said foreground object components to the mixture of said background object components in a mixed area in which said foreground object components and said background object components are mixed,<br>
wherein at least one of said area specifying means and said mixture-ratio detection means performs image processing on the basis of said plurality of types of components.<br>
2.       An image processing apparatus as claimed in claim 1, wherein said area specifying means comprises:<br>
component mixed-area detection means for detecting said mixed area for each of said plurality of types of components and for outputting the detection result corresponding to individual components as component mixed-area information; and<br>
236<br><br>
mixed-area specifying means for specifying said mixed area corresponding to said image data on the basis of the detection result of said mixed area corresponding to said plurality of types of components detected by said component mixed-area detection means.<br>
An image processing apparatus as claimed in claim 1, wherein said area specifying means comprises:<br>
space-correlation-value calculation means for calculating a space correlation value indicating a correlation between designated pixel data corresponding to a designated pixel of a designated frame of said image data and pixel data of a space neighboring pixel positioned in the neighborhood of said designated pixel in the spatial direction on the basis of said plurality of types of components corresponding to said designated pixel;<br>
time-correlation-value calculation means for calculating a time correlation value indicating a correlation between said designated pixel data and pixel data of a time neighboring pixel positioned in the neighborhood of said designated pixel in the time direction on the basis of said plurality of types of components corresponding to said designated pixel; and<br>
foreground area specifying means for specifying a foreground area formed of only said foreground object components on the basis of said space correlation value and said time correlation value corresponding to said designated pixel.<br>
4.       An image processing apparatus as claimed in claim 3, wherein said area specifying means further comprises mixed-area specifying means for<br>
237<br>
 4 AUG 2008<br><br>
specifying said mixed area on the basis of said foreground area of said designated frame and said foreground area of a neighboring frame in the neighborhood of said designated frame.<br>
An image processing apparatus as claimed in claim 1, wherein said mixture-ratio determining means comprises:<br>
component mixture-ratio determining means for determining the mixture ratio for each of said plurality of pixel value signal components; and the mixture-ratio determining means determines the mixture ratio in the image data by summing the determination results of the mixture ratios corresponding to said plurality of pixel value signal components determined by said component mixture-ratio determination means.<br>
An image processing apparatus as claimed in claim 1, wherein said mixture-ratio determination means comprises:<br>
integration means for summing the pixel values of said plurality of pixel value signal components for each pixel and for outputting the value as summed data; and<br>
integrated data mixture-ratio determination means for determining the mixture ratio corresponding to said image data on the basis of said summed data.<br>
An image processing apparatus as claimed in claim 6, wherein said integration means adds said pixel values of said plurality of types of components for each pixel and outputs the added result as said integrated data.<br>
238<br>
4 AUG 2008<br><br>
8.	An image processing method for use with an image processing apparatus<br>
for processing image data which is formed of a predetermined number of<br>
pixel data, having a plurality of types of components at the same pixel<br>
position, obtained by an image-capturing device including a<br>
predetermined number of pixels, the pixels having a time integrating<br>
function, said image processing method comprising:<br>
an area specifying step of specifying, in correspondence with said image data, a mixed area in which foreground object components which form a foreground object and background object components which form a background object are mixed;<br>
a mixture-ratio detection step of detecting, in correspondence with said image data, the mixture ratio indicating the ratio of the mixture of said foreground object components to the mixture of said background object components in a mixed area in which said foreground object components and said background object components are mixed; and<br>
an output control step of controlling the output of said detected mixture ratio,<br>
wherein at least one of said area specifying step and said mixture-ratio detection step performs image processing on the basis of said plurality of types of components.<br>
9.	An image processing method as claimed in claim 8, wherein said area<br>
specifying step comprises:<br>
a component mixed-area detection step of detecting said mixed area for each of said plurality of types of components and for<br>
239<br>
4 AUG 2008<br><br>
outputting the detection result corresponding to individual components as component mixed-area information; and<br>
a mixed-area specifying step of specifying said mixed area corresponding to said image data on the basis of the detection result of said mixed area corresponding to said plurality of types of components detected in said component mixed-area detection step.<br>
An image processing method as claimed in claim 8, wherein said area specifying step comprises:<br>
a space-correlation-value calculation step of calculating a space correlation value indicating a correlation between designated pixel data corresponding to a designated pixel of a designated frame of said image data and pixel data of a space neighboring pixel positioned in the neighborhood of said designated pixel in the spatial direction on the basis of said plurality of types of components corresponding to said designated pixel;<br>
a time-correlation-value calculation step of calculating a time correlation value indicating a correlation between said designated pixel data and pixel data of a time neighboring pixel positioned in the neighborhood of said designated pixel in the time direction on the basis of said plurality of types of components corresponding to said designated pixel; and<br>
a foreground area specifying step of specifying a foreground area formed of only said foreground object components on the basis of said space correlation value and said time correlation value corresponding to said designated pixel.<br>
240<br>
 4 AUG 2008<br><br>
11.	An image processing method  as  claimed  in  claim  7,  wherein  said<br>
mixture-ratio determination step comprises:<br>
a component mixture-ratio determination step of determining the mixture ratio for each of said plurality of pixel value signal components; and the mixture ratio in the image data is determined by summing the determination results of the mixture ratios corresponding to said plurality of pixel value signal components determined in said component mixture-ratio determination step.<br>
12.	An image processing method as claimed in claim  10,  wherein said<br>
mixture-ratio detection step comprises:<br>
a summation step of summing the pixel values of said plurality of pixel value signal components for each pixel and for outputting the value as summed data; and<br>
a data mixture-ratio determining step of determining the mixture ratio corresponding to said image data on the basis of said summed data.<br>
13.	An  image processing method  as  claimed  in  claim  8,  wherein  said<br>
mixture-ratio detection step comprises:<br>
an integration step of integrating the pixel values of said plurality of types of components for each pixel and for outputting the value as integrated data; and<br>
a data mixture-ratio detection step of detecting the mixture ratio corresponding to said image data on the basis of said integrated data.<br>
241<br>
4 AUG 2OO8<br><br>
14.	An image processing method as claimed in claim 13, wherein, in said integration step, said pixel values of said plurality of types of components are added for each pixel, and the added result is output as said integrated data.<br>
15.	An image-capturing apparatus comprising:<br>
Image-capturing means for outputting a subject image captured by an image-capturing device including a predetermined number of pixels, the pixels having a time integrating function, as image data which is formed of a predetermined number of pixel data having a plurality of types of components at the same pixel position;<br>
area specifying means for specifying, in correspondence with said image data, a mixed area in which foreground object components which form a foreground object and background object components which form a background object are mixed; and<br>
mixture-ratio detection means for detecting, in correspondence with said image data, the mixture ratio indicating the ratio of the mixture of said foreground object components to the mixture of said background object components in a mixed area in which said foreground object components and said background object components are mixed,<br>
wherein at least one of said area specifying means and said mixture-ratio detection means performs image processing on the basis of said plurality of types of components.<br>
16.	An image-capturing apparatus as claimed in claim 15, wherein said area<br>
specifying means comprises:<br>
242<br>
 4 AUG 2008<br><br>
component mixed-area detection means for detecting said mixed area for each of said plurality of types of components and for outputting the detection result corresponding to individual components as component mixed-area information; and<br>
mixed-area specifying means for specifying said mixed area corresponding to said image data on the basis of the detection result of said mixed area corresponding to said plurality of types of components detected by said component mixed-area detection means.<br>
An image-capturing apparatus as claimed in claim 15, wherein said area specifying means comprises:<br>
space-correlation-value calculation means for calculating a space correlation value indicating a correlation between designated pixel data corresponding to a designated pixel of a designated frame of said image data and pixel data of a space neighboring pixel positioned in the neighborhood of said designated pixel in the spatial direction on the basis of said plurality of types of components corresponding to said designated pixel;<br>
time-correlation-value calculation means for calculating a time correlation value indicating a correlation between said designated pixel data and pixel data of a time neighboring pixel positioned in the neighborhood of said designated pixel in the time direction on the basis of said plurality of types of components corresponding to said designated pixel; and<br>
foreground area specifying means for specifying a foreground area formed of only said foreground object components on the basis of<br>
243<br>
 4 AUG 2008<br><br>
said space correlation value and said time correlation value corresponding to said designated pixel.<br>
18.	An image-capturing apparatus as claimed in claim 17, wherein said area specifying means further comprises mixed-area specifying means for specifying said mixed area on the basis of said foreground area of said designated frame and said foreground area of a neighboring frame in the neighborhood of said designated frame.<br>
19.	An image-capturing apparatus as claimed in claim 15, wherein said mixture-ratio detection means comprises:<br>
component mixture-ratio detection means for detecting the mixture ratio for each of said plurality of types of components; and<br>
component integrated mixture-ratio detection means for detecting the mixture ratio for detecting the mixture ratio corresponding to said image data by integrating the detection results of the mixture ratios corresponding to said plurality of types of components detected by said component mixture-ratio detection means.<br>
20.	An image-capturing apparatus as claimed in claim 15, wherein said<br>
mixture-ratio detection means comprises:<br>
integration means for integrating the pixel values of said plurality of types of components for each pixel and for outputting the value as integrated data; and<br>
integrated data mixture-ratio detection means for detecting the mixture ratio corresponding to said image data on the basis of said integrated data.<br>
244<br>
 4 AUG 2008<br><br>
An image-capturing apparatus as claimed in claim 15, wherein said integration means adds said pixel values of said plurality of types of components for each pixel and outputs the added result as said integrated data.<br>
An image processing apparatus for processing image data which is formed of a predetermined number of pixel data, having a plurality of types of components at the same pixel position, obtained by an image-capturing device including a predetermined number of pixels, the pixels having a time integrating function, said image processing apparatus comprising:<br>
image data obtaining means for obtaining said image data; and<br>
processing performing means for performing, on the basis of said plurality of types of components of said obtained image data, one of processings of (i) an area specifying step of specifying, in correspondence with said image data, a mixed area in which foreground object components which form a foreground object and background object components which form a background object are mixed and (ii) a mixture-ratio detection step of detecting, in correspondence with said image data, the mixture ratio indicating the ratio of the mixture of said foreground object components to the mixture of said background object components in a mixed area in which said foreground object components and said background object components are mixed.<br>
An image processing apparatus as claimed in claim 22, wherein said processing performing means performs, on the basis of said plurality of types of components of said obtained image data, an area specifying step of specifying, in correspondence with said image data, a mixed area in<br>
245<br>
 4 AUG 2008<br><br>
which foreground object components which form a foreground object and background object components which form a background object are mixed.<br>
An image processing apparatus as claimed in claim 22, wherein said processing performing means performs, on the basis of said plurality of types of components of said obtained image data, a mixture-ratio detection step of detecting, in correspondence with said image data, the mixture ratio indicating the ratio of the mixture of said foreground object components to the mixture of said background object components in a mixed area in which said foreground object components and said background object components are mixed.<br>
An image processing method for processing image data which is formed of a predetermined number of pixel data, having a plurality of types of components at the same pixel position, obtained by an image-capturing device including a predetermined number of pixels, the pixels having a time integrating function, said image processing method comprising:<br>
an image data obtaining step of obtaining said image data; and<br>
a processing performing step of performing, on the basis of said plurality of types of components of said obtained image data, one of processings of (i) an area specifying step of specifying, in correspondence with said image data, a mixed area in which foreground object components which form a foreground object and background object components which form a background object are mixed and (ii) a mixture-ratio detection step of detecting, in correspondence with said image data, the mixture ratio indicating the ratio of the mixture of said foreground object components to the mixture of said background object components in a mixed area<br>
246<br>
4 AUG 2008<br><br>
in which said foreground object components and said background object components are mixed.<br>
An image processing method as claimed in claim 25, wherein, in said processing performing step, on the basis of said plurality of types of components of said obtained image data, an area specifying step of specifying, in correspondence with said image data, a mixed area in which foreground object components which form a foreground object and background object components which form a background object are mixed is performed.<br>
An image processing method as claimed in claim 25, wherein, in said processing performing step, on the basis of said plurality of types of components of said obtained image data, a mixture-ratio detection step of detecting, in correspondence with said image data, the mixture ratio indicating the ratio of the mixture of said foreground object components to the mixture of said background object components in a mixed area in which said foreground object components and said background object components are mixed is performed.<br>
An image-capturing apparatus comprising:<br>
image-capturing means for outputting a subject image captured by an image-capturing device including a predetermined number of pixels, the pixels having a time integrating function, as image data which is formed of a predetermined number of pixel data having a plurality of types of components at the same pixel position; and<br>
processing performing means for performing, on the basis of said plurality of types of components of said image data, one of processings   of   (i)   an   area   specifying   step   of  specifying,   in<br>
247<br>
4 AUG 2008<br><br>
correspondence with said image data, a mixed area in which foreground object components which form a foreground object and background object components which form a background object are mixed and (ii) a mixture-ratio detection step of detecting, in correspondence with said image data, the mixture ratio indicating the ratio of the mixture of said foreground object components to the mixture of said background object components in a mixed area in which said foreground object components and said background object components are mixed.<br>
29.	An image-capturing apparatus as claimed in claim 28, wherein said processing performing means performs, on the basis of said plurality of types of components of said image data, an area specifying step of specifying, in correspondence with said image data, a mixed area in which foreground object components which form a foreground object and background object components which form a background object are mixed.<br>
30.	An image processing apparatus as claimed in claim 28, wherein said processing performing means performs, on the basis of said plurality of types of components of said image data, a mixture-ratio detection step of detecting, in correspondence with said image data, the mixture ratio indicating the ratio of the mixture of said foreground object components to the mixture of said background object components in a mixed area in which said foreground object components and said background object components are mixed.<br><br>
Dated this 7th day of February, 2003<br><br><br>
VARUN SHARMA<br>
OF REMFRY 8s SAGAR<br>
ATTORNEY FOR THE APPLICANTS<br>
248<br><br>
4 AUG 2008<br></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTk5LW11bW5wLTIwMDMtY2FuY2VsbGVkIHBhZ2VzKDA0LTA4LTIwMDgpLnBkZg==" target="_blank" style="word-wrap:break-word;">199-mumnp-2003-cancelled pages(04-08-2008).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTk5LW11bW5wLTIwMDMtY2xhaW1zKGdyYW50ZWQpLSgwNC0wOC0yMDA4KS5kb2M=" target="_blank" style="word-wrap:break-word;">199-mumnp-2003-claims(granted)-(04-08-2008).doc</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTk5LW11bW5wLTIwMDMtY2xhaW1zKGdyYW50ZWQpLSgwNC0wOC0yMDA4KS5wZGY=" target="_blank" style="word-wrap:break-word;">199-mumnp-2003-claims(granted)-(04-08-2008).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTk5LW11bW5wLTIwMDMtY29ycmVzcG9uZGVuY2UoMDQtMDgtMjAwOCkucGRm" target="_blank" style="word-wrap:break-word;">199-mumnp-2003-correspondence(04-08-2008).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTk5LW11bW5wLTIwMDMtY29ycmVzcG9uZGVuY2UoaXBvKS0oMTEtMDgtMjAwOCkucGRm" target="_blank" style="word-wrap:break-word;">199-mumnp-2003-correspondence(ipo)-(11-08-2008).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTk5LW11bW5wLTIwMDMtZm9ybSAxMygyOC0xMi0yMDA3KS5wZGY=" target="_blank" style="word-wrap:break-word;">199-mumnp-2003-form 13(28-12-2007).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTk5LW11bW5wLTIwMDMtZm9ybSAxOCgyMi0wNi0yMDA2KS5wZGY=" target="_blank" style="word-wrap:break-word;">199-mumnp-2003-form 18(22-06-2006).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTk5LW11bW5wLTIwMDMtZm9ybSAxYSgwNy0wMi0yMDAzKS5wZGY=" target="_blank" style="word-wrap:break-word;">199-mumnp-2003-form 1a(07-02-2003).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTk5LW11bW5wLTIwMDMtZm9ybSAyKGdyYW50ZWQpLSgwNC0wOC0yMDA4KS5kb2M=" target="_blank" style="word-wrap:break-word;">199-mumnp-2003-form 2(granted)-(04-08-2008).doc</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTk5LW11bW5wLTIwMDMtZm9ybSAyKGdyYW50ZWQpLSgwNC0wOC0yMDA4KS5wZGY=" target="_blank" style="word-wrap:break-word;">199-mumnp-2003-form 2(granted)-(04-08-2008).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTk5LW11bW5wLTIwMDMtZm9ybSAzKDA2LTAyLTIwMDMpLnBkZg==" target="_blank" style="word-wrap:break-word;">199-mumnp-2003-form 3(06-02-2003).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTk5LW11bW5wLTIwMDMtZm9ybSAzKDMxLTEyLTIwMDcpLnBkZg==" target="_blank" style="word-wrap:break-word;">199-mumnp-2003-form 3(31-12-2007).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTk5LW11bW5wLTIwMDMtZm9ybSA1KDMxLTEyLTIwMDcpLnBkZg==" target="_blank" style="word-wrap:break-word;">199-mumnp-2003-form 5(31-12-2007).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTk5LW11bW5wLTIwMDMtcGV0aXRpb24gdW5kZXIgcnVsZSAxMzcoMzEtMTItMjAwNykucGRm" target="_blank" style="word-wrap:break-word;">199-mumnp-2003-petition under rule 137(31-12-2007).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTk5LW11bW5wLTIwMDMtcGV0aXRpb24gdW5kZXIgcnVsZSAxMzgoMzEtMTItMjAwNykucGRm" target="_blank" style="word-wrap:break-word;">199-mumnp-2003-petition under rule 138(31-12-2007).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTk5LW11bW5wLTIwMDMtcG93ZXIgb2YgYXV0aG9yaXR5KDI3LTEyLTIwMDIpLnBkZg==" target="_blank" style="word-wrap:break-word;">199-mumnp-2003-power of authority(27-12-2002).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTk5LW11bW5wLTIwMDMtcG93ZXIgb2YgYXV0aG9yaXR5KDI4LTEyLTIwMDcpLnBkZg==" target="_blank" style="word-wrap:break-word;">199-mumnp-2003-power of authority(28-12-2007).pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="222837-switching-system-for-controlling-the-starting-of-an-electrical-motor.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="222839-method-of-quantitative-determination-of-the-phase-of-a-radiation-wave-field.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>222838</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>199/MUMNP/2003</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>39/2008</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>26-Sep-2008</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>26-Aug-2008</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>07-Feb-2003</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>SONY CORPORATION</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>7-35 KITASHINAGAWA 6-CHOME, SHINAGAWA-KU, TOKYO,141-0001,</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>JUNICHI ISHIBASHI</td>
											<td>C/O SONY CORPORATION, 7-35 KITASHINAGAWA 6-CHOME, SHINAGAWA-KU, TOKYO, 141-0001</td>
										</tr>
										<tr>
											<td>2</td>
											<td>TAKAHIRO NAGANO</td>
											<td>C/O SONY CORPORATION, 7-35 KITASHINAGAWA 6-CHOME, SHINAGAWA-KU, TOKYO, 141-0001</td>
										</tr>
										<tr>
											<td>3</td>
											<td>TORU MIYAKE</td>
											<td>C/O SONY CORPORATION, 7-35 KITASHINAGAWA 6-CHOME, SHINAGAWA-KU, TOKYO, 141-0001</td>
										</tr>
										<tr>
											<td>4</td>
											<td>TETSUJIRO KONDO</td>
											<td>C/O SONY CORPORATION, 7-35 KITASHINAGAWA 6-CHOME, SHINAGAWA-KU, TOKYO, 141-0001</td>
										</tr>
										<tr>
											<td>5</td>
											<td>TAKASHI SAWAO</td>
											<td>C/O SONY CORPORATION, 7-35 KITASHINAGAWA 6-CHOME, SHINAGAWA-KU, TOKYO, 141-0001</td>
										</tr>
										<tr>
											<td>6</td>
											<td>NAOKI FUJIWARA</td>
											<td>C/O SONY CORPORATION, 7-35 KITASHINAGAWA 6-CHOME, SHINAGAWA-KU, TOKYO, 141-0001</td>
										</tr>
										<tr>
											<td>7</td>
											<td>SEIJI WADA</td>
											<td>C/O SONY CORPORATION, 7-35 KITASHINAGAWA 6-CHOME, SHINAGAWA-KU, TOKYO, 141-0001</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>G06T1/00</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/JP02/06382</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2002-06-26</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>P2001-194607</td>
									<td>2001-06-27</td>
								    <td>Japan</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/222838-image-processing-apparatus-and-method-and-image-capturing-apparatus by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 07:33:12 GMT -->
</html>
