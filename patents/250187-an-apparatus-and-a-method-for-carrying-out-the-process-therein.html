<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/250187-an-apparatus-and-a-method-for-carrying-out-the-process-therein by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 14:34:35 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 250187:AN APPARATUS AND A METHOD FOR CARRYING OUT THE PROCESS THEREIN</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">AN APPARATUS AND A METHOD FOR CARRYING OUT THE PROCESS THEREIN</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>Apparatus comprising: an automated banking machine system including: a plurality of document holding areas, wherein each document holding area is configured to hold at least one document; a plurality of document handling devices, wherein each document handling device is selectively operative to move a document, wherein each document holding area is in operative connection with at least one document handling device; a user interface including at least one input device, wherein the input device is operative to receive a user input; a transaction processor, wherein the transaction processor is in operative connection with the input device, and wherein the transaction processor is operative responsive to a user input to generate a first TP signal, wherein the first TP signal corresponds to moving a first document between a holding area and a document location; a first module processor, wherein the first module processor is operative to receive the first TP signal and to generate a first reservation sequence, wherein the first reservation sequence corresponds to moving the first document through the document handling devices between the holding area and the document location, and wherein the first module processor is operative to generate first MP signals responsive to the first reservation sequence; and a plurality of module controllers, wherein each module controller is in operative connection with at least one document handling device, and wherein the module controllers are operative to control the document handling devices responsive to the first MP signals to move the first document between the holding area and the document location.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>CONTROL SYSTEM FOR CURRENCY RECYCLING AUTOMATED BANKING MACHINE<br>
TECHNICAL FIELD<br>
This invention relates to automated banking machines. Specifically this invention relates to an automated banking machine that enables currency bills, notes or other documents deposited by one customer to be identified and stored in the machine, and later selectively dispensed to another customer.<br>
BACKGROUND ART<br>
Automated banking machines are known in the prior art. A popular type of automated banking machine is an automated teller machine (ATM). Other types of automated banking machines are used to count and dispense cash. These machines are often used by tellers or customer service representatives in banking and other transaction environments.<br>
Some types of automated banking machines are used to dispense other items such as tickets, travelers checks, coupons, scrip, wagering slips, vouchers or other items of value. Some automated banking machines accept deposits in the form of envelopes, checks, cash or other items. Some automated banking machines can be used for providing credit, making bill payments or to debit or deposit funds in various accounts. For purposes of this disclosure an automated banking machine shall be considered any type of machine which carries out transactions of value.<br>
ATM machines commonly in use accept deposits from customers and process the deposits using devices which are separate from the devices which dispense currency and other items to customers. Most common ATM depositories require customers to place their deposits in an envelope. The envelope is accepted into the machine for storage. Although the customer indicates the value of the contents of the envelope, the customer's account is often not credited for the amount of deposit until the envelope is removed from the ATM by bank personnel and the contents verified.<br>
Other ATM machines have the capability of receiving checks and other negotiable instruments. Such machines may include a device such as is shown<br>
in U.S. Patent Number 5,422,467. Devices of this type can be used to cancel and produce electronic images of checks which are deposited into an ATM machine. The cancelled checks are stored in the machine for later removal by bank personnel.<br>
Currency notes, travelers checks and other documents and sheet materials that are commonly dispensed by ATMs, are generally housed in the machine in removable canisters. Sheets are dispensed from the canisters and delivered by the machine to customers. Periodically these canisters must be removed from the machine and the supply of sheets therein replenished. This is a labor intensive activity. To replace the canisters the secure portion of the ATM must be opened. The canisters in the machine must be removed and new canisters, which include a new supply of sheets, placed in the machine. Alternatively the canisters in the machine may be opened, money or other sheets added, and then replaced. After the canisters are replaced the secure portion of the machine must be closed.<br>
The replacement or resupply of canisters often requires transporting filled canisters to the machine and returning partially depleted canisters to a remote location. While efforts have been made in the design of canisters to minimize opportunities for pilferage, there is always some risk. Therefore such activities are normally carried out by armed couriers. More than one person is often assigned to any task where there is access to the cash or other valuables in the machine. Because numerous individuals may be involved in loading replacement canisters, transporting replacement canisters to ATM machines, replacing the canisters, returning the removed canisters and auditing the contents of returned canisters, it is often difficult to identify the cause of any losses.<br>
The need to periodically replace currency canisters is an inconvenience because the ATM must be shut down. Customers are not able to use the ATM while the supply of currency is being replenished, and lost opportunities to conduct transactions and customer dissatisfaction may result. Customers will<br>
also be disappointed if replenishment operations are not performed frequently enough and the machine runs out of currency or other documents.<br>
Other types of automated banking machines, such as those that dispense cash to customer service representatives, have the same drawbacks as ATM machines. Periodic replenishment of the currency or other valuable documents that are dispensed by the machine must be done to keep the machine in operation. While such machines speed the cash dispensing service to the customer, there is a significant cost associated with segregating, preparing and transporting the currency before it is placed within the machine.<br>
Other banking machines have been developed for identifying and counting currency. Such machines may be used in banking and vending environments. Machines which count currency generally require that the currency be pre-oriented a particular way to obtain proper identification. This is time consuming for the person operating the machine. Many currency counting machines also tend to reject valid notes due to natural deterioration which occurs in U.S. currency. The speed associated with such currency counting and accepting machines is also less than desirable in many cases.<br>
Automated banking machines which are capable of receiving currency, identifying the particular type and denomination of currency, storing the currency and later dispensing it to a customer have been used in countries outside the United States. Such recycling machines are feasible in countries such as Japan where currency notes include special features which facilitate their identification by machines. However, such recycling machines have not generally been feasible with U.S. currency notes which generally do not include special features that facilitate identification by machine. U.S. currency notes also are subject to a wide range of conditions such as wear, soiling and bleaching which do not render a note unfit for use, but which render it very difficult for a machine to properly identify.<br>
The currency recycling type banking machines that have been developed also generally suffer from slow operating speeds. This is particularly true when the machines are used to process a large number of<br>
notes. Often such machines require that the notes be oriented in a particular way and considerable time is associated with the rejection of notes due to improper orientation. The handling of the sheets to facilitate identification and storage is also a time consuming process. Once a sheet has been initially identified as proper and stored in the machine, there is generally no check to be sure that the original determination of the type and character of the note was correct. As a result, a customer may receive a misidentified note. This can reduce customer satisfaction.<br>
Thus there exists a need for a currency recycling automated banking machine that is more reliable, operates more quickly, and which can be used with U.S. and other currencies as well as other documents which have a wide range of properties.<br>
DISCLOSURE OF INVENTION<br>
It is an object of the present invention to provide a currency recycling automated banking machine.<br>
It is a further object of the present invention to provide a currency recycling automated banking machine that is reliable and that operates more rapidly.<br>
It is a further object of the present invention to provide a currency recycling automated banking machine that works with currency notes and other documents that have a wide variety of properties.<br>
It is a further object of the present invention to provide a currency recycling automated banking machine that is capable of unstacking and separating documents input in a stack.<br>
It is a further object of the present invention to provide an automated banking machine that orients documents relative to a sheet path while moving such documents at a high rate of speed.<br>
It is a further object of the present invention to provide a currency recycling automated banking machine that can transport a plurality of documents in a sheet path concurrently and at a high rate of speed.<br>
It is a further object of the present invention to provide a currency recycling automated banking machine that identifies documents and which returns unidentifiable documents to a customer.<br>
It is a further object of the present invention to provide a currency recycling automated banking machine that enables a customer to deposit documents into the banking machine, and after the documents have been identified, to elect whether to deposit the documents or to have them returned.<br>
It is a further object of the present invention to provide a currency recycling automated banking machine that can identify deposited documents regardless of orientation.<br>
It is a further object of the present invention to provide a currency recycling automated banking machine that enables selectively storing deposited documents in storage areas in the machine.<br>
It is a further object of the present invention to provide a currency recycling automated banking machine that enables selectively storing deposited documents in removable canisters.<br>
It is a further object of the present invention to provide a currency recycling automated banking machine that enables recovery of documents stored in storage areas and dispensing the documents to customers.<br>
It is a further object of the present invention to provide an automated banking machine in which documents may concurrently be transported, oriented, stored in storage areas and dispensed from other storage areas within the machine.<br>
Further objects of the present invention will be made apparent in the following Best Modes for Carrying Out the Invention and the appended claims.<br>
The foregoing objects are accomplished in a preferred embodiment of the present invention by a currency recycling automated banking machine.<br>
The machine includes an input/output area in which a customer may insert documents that are to be deposited and from which a customer withdrawing documents may receive documents.<br>
A customer deposits documents in a stack. The documents are moved from the input/output area into a central transport. In an unstack area documents are removed from the stack one by one and separated into a stream of single separate documents. The documents move along a document path in the central transport. The documents moving in the central transport are each deskewed to properly orient them relative to the direction of travel along the document path. The documents are further moved to align them into a proper centered relation in the document path.<br>
Each document is then moved past a document type identifier device which operates to identify the type and/or denomination of each document. Identifiable documents are directed into an escrow area while unidentifiable documents are directed into a reject area of the input/output area of the machine.<br>
A customer is informed of any unidentifiable documents through input and output devices on the machine. Any unidentifiable documents may then be delivered to the customer from the reject area. Alternatively, depending on the programming of the machine such rejected documents may be stored in the machine for later analysis.<br>
Properly identified documents are initially held in the escrow area. The output devices on the machine indicate to the customer the type and/or value of the identifiable documents. The customer preferably is enabled to select whether to have such documents returned or to deposit such documents. If the customer elects to have the documents returned, the documents are passed out of the input/output area and the customer's account is not credited for the value of the documents.<br>
If the customer elects to deposit the documents the documents are again moved through the central transport in a stream of rapidly moving separated documents. The documents are again identified by the identification<br>
device. However, rather than being routed to the reject and escrow areas, the identified documents are now preferably routed by the control system of the machine to selected storage locations. The storage locations are locations in which documents of the particular types are stored in the machine. The storage areas in the machine of the preferred embodiment are areas in a plurality of removable canisters. The customer's account is then credited for the value of the deposited documents.<br>
The same customer who deposited documents or a subsequent customer wishing to make a withdrawal from the machine may receive documents that have been previously stored in the storage areas. Document dispensing mechanisms associated with the storage areas selectively remove documents from the storage areas and route them to the central transport of the machine. As the documents move through the central transport they pass the identification device. The type and denomination of each document being dispensed is verified. This assures that the initial identification of the documents made when they were deposited in the machine is correct. This third verification assures that a customer withdrawing documents from the machine is not given an improper document. The documents are removed from the storage areas concurrently so as to facilitate rapid operation of the machine and are controlled in movement through the remote transport segments and the central transport to assure that they move as a stream of separated documents as they pass the identification device.<br>
The identified documents to be dispensed to the customer are moved by the central transport to an escrow area. From the escrow area they are presented to the customer. The customer's account is then charged or debited for the documents that have been withdrawn.<br>
The control system of the preferred embodiment includes a distributed processing system. The processing system has a hierarchy with the highest level being a terminal processor (TP). The terminal processor runs a terminal application which communicates with external devices as well as the other levels in the control system hierarchy. A module processor (MP) is below the<br>
terminal processor in the control system hierarchy. The module processor coordinates activities within the machine and tracks the dispense and acceptance of media. The module processor handles the details of the instructions that it receives from the terminal processor.<br>
The module processor communicates with a plurality of module controllers (MC). The module controllers communicate with the devices that sense, move and direct media. The module controllers communicate with the module processor and receive instructions therefrom. The module controllers run tasks to control the physical devices based on the instructions that they receive from the module processor. The tasks executed by the module controllers carry out the particular activities associated with the instructions received from the module processor.<br>
The hierarchy of the control system of the preferred embodiment enables each level to deal with particular functions that are most effectively handled by that level. This provides faster processing as well as coordination between activities so that documents may be moved concurrently through the machine.<br>
BRIEF DESCRIPTION OF DRAWINGS<br>
Figure 1 is a schematic cross sectional view of currency recycling automated banking machine of a preferred embodiment of the present invention.<br>
Figure 2 is a schematic diagram of the functions performed by the machine shown in Figure 1.<br>
Figure 3 is a cross sectional view of the components of the central transport and the input/output area of the machine.<br>
Figure 4 is a view similar to Figure 1 schematically representing input of a stack of documents by a customer.<br>
Figure 5 is a schematic view of the input/output area shown receiving a stack of documents from a customer.<br>
Figure 6 is a view similar to Figure 5 showing the document stack after it has been placed inside the machine.<br>
Figure 7 is a schematic view similar to Figure 1 showing an inserted document stack being moved from the input/output area of the machine to the document unstack area of the machine.<br>
Figure 8 is a schematic view showing the stack moving from the input/output area to the unstack area.<br>
Figure 9 is a schematic view of the unstack area of the machine prior to arrival of the stack.<br>
Figure 10 is a schematic view of the unstack area showing a stack of documents being transported into the unstack area.<br>
Figure 11 is a view similar to Figure 10 showing the stack of documents moving into position for unstacking.<br>
Figure 12 is a view similar to Figure 11 with the documents in position for unstacking in the unstack area.<br>
Figure 13 is a view similar to Figure 1 showing documents passing from the unstack area through the central transport to the reject and escrow areas of the machine.<br>
Figure 14 is a view similar to Figure 12 showing a document being unstacked in the unstack area.<br>
Figure 15 is a view similar to Figure 14 showing a document being removed from the stack and moving past the sensors for sensing doubles and pre-centering.<br>
Figure 16 is a schematic view showing a double note being retracted into the stack.<br>
Figure 17 is a cross sectional view of a mechanism used for unstacking notes in the unstack area.<br>
Figure 18 is a schematic view of a shuttle half which is part of a deskewing mechanism, the shuttle half being shown in a note passing position.<br>
Figure 19 is a view similar to Figure 18 showing the shuttle half in a note stopping position.<br>
Figure 20 is a top plan view of a shuttle used for deskewing and centering documents in the central transport.<br>
Figure 21 is a schematic view of a skewed note.<br>
Figure 22 is a schematic view similar to Figure 21 showing the note being deskewed by the operation of the shuttle.<br>
Figure 23 is a view similar to Figure 22 showing the note aligned transversely to the direction of travel in the central transport but in an off center condition.<br>
Figure 24 is a schematic view of the note shown in Figure 23 having been moved by the shuttle to a centered position in the central transport.<br>
Figure 25 is a schematic view showing the shuttle moving a document transversely to the direction of travel in the central transport.<br>
Figure 26 is a schematic view of the pre-centering and centering circuitry used in connection with a preferred embodiment of the present invention.<br>
Figure 27 is a schematic view of the input/output area of the machine as documents are delivered from the central transport.<br>
Figure 28 is a schematic view similar to Figure 1 showing unidentifiable documents being delivered out of the machine to a customer.<br>
Figure 29 is a schematic view of the input/output area showing unidentifiable documents being moved out of the machine.<br>
Figure 30 is a schematic view similar to Figure 29 showing unidentifiable documents being routed into the machine for storage.<br>
Figure 31 is a schematic view similar to Figure 1 showing documents held in escrow being routed into the central transport for storage in the machine.<br>
Figure 32 is a schematic view of the input/output area moving the documents held in the escrow area.<br>
Figure 33 is a schematic view showing a portion of the drive mechanism for the drive belts in the input/output area.<br>
Figure 34 is an isometric schematic view of the input/output area drive mechanism.<br>
Figure 35 is a schematic view similar to Figure 1 showing documents that have been previously held in the escrow area being unstacked and passed through the central transport and into the machine for storage in storage areas of document storage canisters.<br>
Figure 36 is a schematic view of a belt and carriage roll arrangement used for transporting documents in the central transport of the machine.<br>
Figure 37 is a side view of a guide used in connection with the carriage transport rolls.<br>
Figure 38 is a cross sectional side view of the carriage rolls, document belts and guides shown in supporting connection with a document.<br>
Figure 39 is a side view of a gate mechanism used for routing documents moving in remote transport segments, with the gate mechanism shown in a position enabling a document to pass directly therethrough.<br>
Figure 40 is a side view of the gate mechanism shown in Figure 39 in a condition passing a document from the remote transport segment to a canister transport.<br>
Figure 41 is a view similar to Figure 39 with the gate mechanism shown passing a document from a canister transport into the remote transport segment.<br>
Figure 42 is a view of the gate mechanism shown in Figure 39 in a condition that enables a document to pass from the canister transport into the remote transport segment, with the document moving in an opposed direction from that shown in Figure 41.<br>
Figure 43 is a view of the gate mechanism shown in Figure 39 with a document passing from the remote transport segment into the canister transport with the document moving in an opposed direction from that shown in Figure 40.<br>
Figure 44 is a schematic view of an arrangement of belts and pulleys adjacent to the gate mechanism shown in Figure 39.<br>
Figure 45 is a schematic view of a sheet transport exemplifying the principles used for moving documents in the remote transport segments and in the canister transports.<br>
Figure 46 is a cross sectional schematic view showing a document moving in a transport of the type shown in Figure 45.<br>
Figure 47 is a top plan view of a lid covering a storage area within a recycling currency canister.<br>
Figure 48 is a side cross sectional view of a storage area in a currency canister shown with a sheet moving towards the storage area.<br>
Figure 49 is a view similar to Figure 48 showing the sheet partially accepted into the storage area.<br>
Figure 50 is a front plan view of the feed wheels, take away wheels and thumper wheels adjacent to the storage area, with the sheet shown moving into the storage area as shown in Figure 49.<br>
Figure 51 is a view similar to Figure 49 with the sheet moved into the storage area but positioned above the stack of documents held therein.<br>
Figure 52 is a view similar to Figure 50 with the accepted sheet integrated into the stack.<br>
Figure 53 is a view similar to Figure 52 with the newly accepted sheet held as part of the stack by fingers positioned adjacent to the storage area.<br>
Figure 54 is a schematic view similar to Figure 1 showing the flow of sheets from a storage area to an escrow area in response to a document dispense request input by a user.<br>
Figure 55 is a cross sectional view of a storage area including a stack of sheets therein from which one sheet is to be removed as part of a dispensing operation.<br>
Figure 56 is a view similar to Figure 55 in which the fingers holding the stack of sheets in the storage area have been retracted to enable the sheets to engage the inner surface of the bin door.<br>
Figure 57 is a view similar to Figure 56 in which the bin door is raised with the feed wheels and thumper wheels shown beginning to move so as to pick a sheet from the stack.<br>
Figure 58 is a view similar to Figure 57 showing the feed and thumper wheels moved to a position in which a top sheet in the stack is being removed therefrom.<br>
Figure 59 is a front view of the feed wheels, thumper wheels, stripper wheel and take away wheels in engagement with a sheet as it is being removed from the stack in the manner shown in Figure 58.<br>
Figure 60 is a view similar to Figure 58 with the sheet shown having been removed from the storage area and being sensed by a doubles detector.<br>
Figure 61 is a top plan view of the bin door overlying a storage area showing a sheet having been removed therefrom and moving towards a gate mechanism adjacent to the remote transport.<br>
Figure 62 is a schematic view similar to Figure 1 showing a stack of sheets that have been dispensed from storage locations being delivered to a user of the machine.<br>
Figure 63 is a schematic view of the architecture of the control system of a preferred embodiment of the machine.<br>
Figures 64-68 are a simplified flow chart showing an exemplary transaction flow for a deposit transaction conducted at a currency recycling automated banking machine of the present invention.<br>
Figures 69 and 70 are a simplified flow chart showing the transaction flow of a withdrawal transaction conducted at the machine.<br>
Figure 71 is a schematic view of the class categories which operate in the module processor and the relationships between the class categories.<br>
Figure 72 is a schematic view showing the map, slot and station numbering convention used by the module processor in the preferred embodiment of the invention.<br>
Figure 73 is a schematic view of a module map produced by the module processor corresponding to the central transport of the preferred embodiment of the machine.<br>
Figure 74 is a schematic view of a module map developed by the module processor for a transport, canister and gate combination referred to as a multimedia recycler (MMR) in a preferred embodiment of the present invention.<br>
Figure 75 is a table of events and actions which occur in response to the events in the operation of the module processor.<br>
Figure 76 is a schematic view of tasks which operate in a module controller and the task manager which also runs therein.<br>
Figure 77 is a schematic view of the software flow for a typical accept operation for accepting documents in the central transport of the machine.<br>
BEST MODES FOR CARRYING OUT INVENTION Referring now to the drawings and particularly to Figure 1 there is shown therein a currency recycling automated banking machine of the present invention generally indicated 10. The machine includes a housing 12. Housing 12 includes a customer interface area generally indicated 14. Interface area 14 includes components used for communicating with a user of the machine. These components may include a display 16 which serves as an output device. The interface area may also include a keypad 18 and/or a card reader 20 which serve as manually actuatable input devices through which a user may input information or instructions into the machine. It should be understood that these devices are exemplary and other input and output devices such as a touch screen, display, audio speakers, iris scan devices, fingerprint reading devices, infrared transmitters and receivers and other devices which are capable of receiving or providing information may be used.<br>
The machine also includes other devices which are indicated schematically. Such devices may include a receipt printer 22 which provides receipts to customers concerning activities related to their transactions. Other devices indicated schematically include a journal printer 24 for making a paper record of transactions. A passbook printer 26 indicated schematically may also be included within the housing of the machine. A check imaging device 28 may also be included for purposes of producing electronic images of checks deposited into the machine as well as for cancelling such checks. Such a check imaging device may be of the type shown in U.S. Patent Number 5,422,467 or other similar mechanism.<br>
Devices 22, 24, 26 and 28 are exemplary and other devices may also be included in the machine such as video cameras for connecting to a remote location, an envelope deposit accepting mechanism, ticket printing devices, devices for printing statements and other devices. It should further be understood that while the embodiment described herein is in the form of an automated teller machine (ATM) the present invention may be used in connection with other types of automated banking machines.<br>
The machine 10 includes a control system generally indicated 30. The control system is in operative connection with the components of the machine and controls the operation thereof in accordance with programmed instructions. Control system 30 also provides communications with other computers concerning transactions conducted at the machine. Such communications may be provided by any suitable means, such as through telephone lines, wireless radio link or through a connection through a proprietary transaction network.<br>
The preferred embodiment of the invention has the capability of recycling currency or other sheets or documents representative of value received from a customer. For purposes of this description except where indicated, the words documents, sheets, notes and currency are used interchangeably to refer to the sheet materials processed by the invention. The process of recycling involves receiving the documents in bulk from a<br>
customer, identifying the type of documents deposited and storing the documents in appropriate locations within the machine. The stored documents may then be selectively retrieved and provided to customers who wish to withdraw funds from the machine.<br>
The preferred embodiment of the invention includes the functional components schematically indicated in Figure 2. These functional components include an input/output function which receives documents from and delivers documents to users of the machine. An unstack function 34 receives documents from the input/output function 32. The unstack function serves to separate the documents from the stack and deliver them into a sheet path in separate, spaced relation.<br>
The functional components of the machine further include a deskew function 36. As later discussed in detail, the deskew function operates to orient the documents so that they are properly transversely aligned with a sheet path. An alignment function 38 further orients the moving documents by centering them with regard to the sheet path. After the documents have been aligned they are passed to an identify function 40. The identify function operates to determine the type of document passing through the sheet path. In the preferred embodiment the identify function includes determining the type and denomination of a currency bill or other document. Also the identify function determines if a document appears suspect or is simply not identifiable.<br>
The identify function is linked to the input/output function so that customers may have any suspect documents or identifiable documents returned to them, rather than be deposited in the machine. The identify function is also linked to document store and recover functions 42, 44, 46 and 48. The store and recover functions operate to store documents in selected locations, and to recover those documents for purposes of dispensing the documents to a customer.<br>
Referring again to Figure 1 the apparatus which performs the previously described functions is shown schematically. The input/output<br>
function is performed in an input/output area generally indicated 50. The input/output area is adjacent to an opening 52 in the housing of the machine. Access through opening 52 is controlled by a movable gate 54 which is shown in the closed position in Figure 1.<br>
Input/output area 50 includes four belt type transports. These belt type transports are devices suitable for moving a stack of sheets, and preferably each comprise a plurality of belts such as is shown in U.S. Patent Number 5,507,481. First belts 56 and second belts 58 bound a delivery/reject area 60 which extends vertically between the belts. As later explained, belts 56 and 58 are movable vertically relative to one another and move in coordinated relation to transport a stack of sheets which are positioned therebetween.<br>
Input/output area 50 also includes third belts 62 and fourth belts 64. Third belts 62 and fourth belts 64 vertically bound an escrow area generally indicated 66. Belts 62 and 64 are similar to belts 56 and 58 and are capable of moving a stack of documents therebetween. The belts in the input/output area, as well as gate 54, are driven by appropriate motors schematically indicated 68 which are operated by the control system 30. The input/output area can be operated in various modes, examples of which will be discussed hereafter. Figure 3 shows the input/output area 50 in greater detail.<br>
The input/output area communicates with a central transport generally indicated 70. Central transport 70 includes an unstack area generally indicated 72. The unstack area includes a tray 74 which is suitable for moving a stack of documents thereon. Unstack area 72 further includes transport belts 76 and pick belts 78. As later explained in detail, the unstack area operates to separate documents and deliver them in spaced relation into the document path of the central transport.<br>
The deskew operation also includes doubles sensors 80 for use in detecting instances of double documents which have been removed from a stack in the unstack area. These documents can be separated in a manner later discussed. Pre-centering sensors are also provided in association with the<br>
unstack operation, which sensors operate to assure that the deskew and alignment operations can be performed properly.<br>
From the unstack area sheets are transported to a deskew and centering device 84. Deskew and centering device 84 performs the functions of aligning sheets transversely to a sheet path. It also performs the function of moving the sheets so that they are centered relative to the sheet path through the central transport.<br>
From the deskew and centering device, documents change direction by being turned on carriage rolls 86 and are moved past an identification device 88. Identification device 88 is preferably of the type shown in U.S. Patent Application Serial Number 08/749,260 filed November 15, 1996 which is owned by the Assignee of the present invention, and the disclosure of which is incorporated herein by reference. In alternative embodiments, other types of identification devices may be used. The identification devices preferably identify the type and character of passing note. The identification device also preferably distinguishes genuine documents such as genuine currency bills from unidentifiable or suspect documents.<br>
From the identification device, documents are moved selectively in response to the position of divert gates schematically indicated 90. The divert gates operate under the control of the control system to direct documents either to the delivery/reject area 60, the escrow area 66 or into the document storage and recovery areas of the machine.<br>
The document storage and recovery areas include recycling canisters 92, 94, 96 and 98, which are later described in detail. The recycling canisters are preferably removable from the machine by authorized personnel. Each of the recycling canisters shown include four storage areas therein. These are represented by storage areas 100, 102, 104 and 106 in canister 94. The storage areas provide locations for storing documents that have satisfactorily passed through the central transport. Documents are preferably stored in the storage areas with documents of the same type. Documents stored in the storage areas can later be removed therefrom one at a time and delivered to other customers.<br>
Documents are moved to the canisters through remote transport segments generally indicated 108, 110, 112 and 114. The remote transport segments are preferably arranged in aligned relation such that documents may be passed between the transport segments. Each remote transport segment has a media gate mechanism associated therewith. The media gates generally indicated 116, 118, 120 and 122 operate in a manner later explained to selectively direct documents from the remote document segments into connection with adjacent canister delivery transports indicated 124, 126, 128 and 130. The canister transports operate in a manner later explained, to move documents to and from the storage areas in the canisters.<br>
It should be appreciated that the various components which comprise the gates, transports and storage areas have associated motors and sensors, all of which are in operative connection with the control system 30 for purposes of sensing and controlling the movement of documents therethrough.<br>
It should also be noted that in the preferred embodiment of the invention a dump area generally indicated 132 is provided within the housing ofthe machine at the bottom of the remote transport segments. Dump area 132 functions as a receptacle for documents that are determined not to be suitable for handling or which are otherwise deemed not suitable for later recovery and dispensing to a customer. In the preferred embodiment dump area 132 comprises a tray which can be moved outward on the housing ofthe machine to facilitate cleaning and removal of documents when the interior of the machine is accessed.<br>
The operation ofthe currency recycling automated banking machine will now be explained through an example ofthe operative steps and functions carried out in connection with a deposit transaction by a customer. It should be understood that this is only an example of one manner in which the machine may be operated. Other methods of operation and functions may be achieved based on the programming ofthe machine.<br>
The transaction flow for the deposit transaction is shown in Figures 64-68. A customer approaching the machine 10 operates the components in the<br>
customer interface area 14 to enable operation of the machine. This may include for example insertion of a credit or debit card and the input of a personal identification number (PIN). Of course other steps may be required by the customer to identify themselves to the machine. This may include other modes of operation such as finger print identification or biometric type devices. These steps which the customer goes through to identify themselves to the machine is represented in Figure 64 by the customer ID sequence which is indicated 134.<br>
After the customer identifies themselves to the machine, the machine is programmed to proceed through the main transaction sequence generally indicated 136. This main transaction sequence preferably provides the customer with a menu of the various transaction options that are available to be conducted at the machine 10. The transaction flow proceeds in Figure 64 from a step 138 in which a customer chooses to conduct a deposit transaction which involves the input of documents, such as currency bills or notes.<br>
When the customer indicates that they intend to make a deposit the machine next executes a step 140. In step 140 an inner gate indicated 142 in Figures 4 and 5 moves to block further access to the interior of the machine from delivery/reject area 60. After the inner gate 142 is extended, the program next executes a step 144 in which the front gate 54 on the machine is moved to uncover opening 52. In this position a customer is enabled to insert a stack of documents indicated 146 in Figure 5 into the delivery/reject area 60 between belts 58 and 56. As shown in Figure 5, belts 58 and 56 may also be run inwardly to help to position the stack 146 against the inner gate 142.<br>
As shown in Figure 6, delivery/receipt sensors 148, 150 are positioned inside the housing of the machine adjacent to opening 52. In the transaction flow, as shown in Figure 64, a step 152 is executed to determine if the deposit stack 146 has been moved past the sensors. A determination is made at a step 154 as to whether the sensors are clear. If sensors 148 and 150 are not clear, a step 154 is carried out. In step 154 efforts are made to clear the sensors. This is done by running the transport belts 56 and 58 inward at a step 156 and<br>
prompting the customer at step 158 to input their deposit. A check is then made again to see if the sensors have cleared. Provisions are made in the transaction flow so that after a number of tries to clear the sensors, the transport belts 56 and 58 are run in reverse to remove anything that has been input into the machine, and the gate 54 is closed.<br>
If however the sensors 148 and 150 are clear indicating that a stack of documents has been properly inserted, the transaction flow moves to a step 160 in which the front gate 54 is again closed as shown in Figure 6. The transaction flow then moves on to a step 162 in which the inner gate 142 is retracted so that the stack 146 can be further processed in the manner hereafter described.<br>
The stack is next moved as schematically shown in Figure 7 from the delivery/reject area 60 to the unstack area 72. This is accomplished as shown in Figure 65 by moving a carriage which supports fourth belts 64 upwards in the input/output area 50 as shown in Figure 8. The carriage for belts 64 is moved upward to engage a carriage supporting belts 62 and 58 and to move it upward as well. The carriages move upward until stack 146 is sandwiched between belts 56 and 58. This is represented by step 164 in Figure 65. Belts 58 and 56 are then driven to move the stack inwardly toward the unstack area 72.<br>
The unstack area 72 is shown in greater detail in Figure 9. It includes transport belts 76 and pick belts 78, which are independently operable by motors or other suitable driving devices. A strip back stop 166 is movably positioned in the area between transport belts 76 and belts 168 on tray 74. It should be understood that belts 76, 78 and 168 are arranged to be in intermediate relation when the tray 74 is moved adjacent thereto in a manner described in U.S. Patent Number 5,507,481 the disclosure of which is incorporated herein by reference.<br>
Unstack area 72 includes an unstack wall 170. Unstack wall 170 includes a plurality of steps 172 thereon, the purpose of which is later explained. Unstack wall 170 includes therein a plurality of generally vertically<br>
extending slots (not shown). Tray 74 includes a plurality of tray projections 174 which extend from an upper surface of the tray and into the slots. Adjacent to pick belt 78 are contact stripper wheels indicated 176 and non-contact stripper wheels 178, the function of which is later explained.<br>
In operation of the machine the stack 146 is moved into the unstack area for unstacking. This is represented by a step 180 in Figure 65. As shown in Figure 10, in the step of moving the stack 146 into the unstack area, the tray 174 is moved sufficiently away from the transport belts 76 so that stack 146 may be moved therebetween. The backstop 166 is raised to allow entry of the stack. Transport belts 76 and tray belts 168 move forward so that stack 146 moves towards unstack wall 170. In the preferred form of the invention tray 74 is spring biased upwards and once stack 146 is moved therebetween the stack is held between belts 168 on tray 74 and transport belts 76 and pick belts 78 by the biasing force acting on the tray.<br>
As shown in Figure 11, once the stack 146 moves past the backstop 166, the backstop is lowered to be in position behind the stack. As later discussed, the backstop is particularly useful when stripping double notes which may be picked during the unstack operation. As shown in Figure 11 belts 78 are further run in the forward direction to move stack 146 towards wall 170. As shown in Figure 12 when the stack is fully moved against the wall 170, the steps 172 on the wall tend to splay the sheets in the stack. This splaying of the sheets tends to break the surface tension between the adjacent sheets and facilitates the separation of each adjacent sheet from one another. It should be noted that the steps 172 are configured in a progression so that the engagement of the sheets in the stack 146 with the steps 172 do not interfere with the movement of tray 74 upward as sheets are removed from the stack. This enables tray 74 to apply a continuous upward biasing force such that the upper most sheet in the stack engages pick belts 78.<br>
Referring again to the transaction flow in Figure 65, once the stack has been moved to the unstack position a check is made at a step 182 to verify the presence of bills in the unstack area. Assuming that bills are properly in<br>
position the flow then moves to an unstack routine at a step 184. As later explained in detail, the control system 30 of the present invention is a novel type control system which facilitates the rapid operation of the machine. As represented by phantom step 186 the control system operates to perform tasks concurrently. As a result, rather than unstacking a single note in the manner hereafter described and then waiting for it to be processed, the preferred embodiment of the control system 30 unstacks a note and as soon as that note has left the unstack area, proceeds to unstack another note. This enables providing a stream of separated sheets which are concurrently moving in the central transport under control of the control system. This greatly speeds the operation of the machine.<br>
The operation of the machine in the unstack operation is schematically represented in Figure 13. As shown therein, the stack 146 in the unstack area 72 is separated into single sheets which are moved through the central transport 70 in the direction of Arrows C. The notes are then selectively directed for reasons later explained by divert gates 90 into either the delivery/reject area 60 or the escrow area 66.<br>
The operation of the machine to unstack sheets in the unstack area 72 is explained with reference to Figures 14-17. The stack 146 is biased upwards against the pick belts 78 by the tray 74. The lower flight of belts 78, which is engaged with the top sheet in the stack, is moved towards the left in Figure 14 to pick a sheet 188. As shown in Figure 17 the pick belts 78 are supported on rollers and extend beyond the outer circumference of abutting non-contract stripper wheels 178. Contact stripper wheels 176 are arranged in generally abutting relation opposite the inner two strip belts 78. As the strip belts move to the left, as shown in Figure 14, the contact stripper wheels and non-contact stripper wheels 176 and 178 do not move. This serves to keep sheets other than the top sheet in the stack.<br>
Referring again to Figure 14, if the sheet 188 that is moved from the stack is a single sheet, this condition is sensed by the doubles sensors 80. This means that the sheet is suitable for movement in the central transport. The<br>
sheet then moves past the doubles sensors 80 into the vicinity of take away rolls 190, 192. In response to the sheet being sensed as a single sheet, take away roll 192 moves from the position shown in phantom to the position shown in solid lines in which wherein it is in engagement with the sheet 188. The take away rolls 192, 190 are driven in the directions indicated to move the sheet away from the stack. The driving of the take away rolls is timed by the control system 30 to assure that sheet 188 is properly spaced a distance from the proceeding unstacked sheet moving through the central transport.<br>
As shown in Figure 15 sheet 188 is moved by take away rolls 190 and 192 past pre-centering sensors 82. The pre-centering sensors operate in a manner later described to sense the position of the edges of the sheet. The signals from the pre-centering sensors 82 are used by the control system 30 to move a shuttle which is associated with deskewing and centering operations for the sheet. The control system moves the shuttle transversely in the transport path to a position in which it is enabled to catch the moving sheet in the manner that will enable the sheet to be aligned. This is particularly valuable when the sheets which are removed from the stack are of different sizes.<br>
It should be understood that while the U.S. has currency which is the same size for all denominations, other countries use different sized documents for various currency types. It is a fundamental advantage of the present invention that the documents inserted by a user need not be arranged so that the documents are all of the same size, nor do the documents need to be oriented in any particular direction in order to be handled by the preferred embodiment of the invention. The unstacking mechanism of the preferred embodiment is particularly well adapted to unstacking the sheets having various sizes and which may not necessarily be positioned so as to be in alignment with the wall 170, particularly for the sheets in the middle of the stack 146.<br>
In the event that a double bill is sensed by doubles sensors 80, the bills can be separated. A double bill is indicated in Figure 16 by sheets 194 which<br>
for purposes of this example, are considered to be two overlapped sheets. To separate these sheets pick belts 78 are stopped and tray 74 is moved downward so that the stack 146 is no longer biased against the lower flights of pick belts 78.<br>
Pick belts 78 are then run backwards such that the lower flight thereof is moved to the right as shown. This pulls sheets 194 back into the stack. The contact stripper wheels 176 and the non-contact stripper wheels also rotate to facilitate pulling the sheets back into the stack. This is accomplished in the preferred embodiment by having the stripper wheels operated by a one way clutch. The stripper wheels may rotate freely in the direction shown in Figure 16, but may not rotate in the opposed direction. The movement of belts 78 pulls the sheets 194 back into the stack. The strip backstop operates to prevent the sheets from moving too far and falling out of the stack.<br>
Once the sheets 194 are returned to the top of the stack the tray 74 is again raised and a picking operation is attempted. Generally one or more repeated attempts to strip the sheets will be successful such that sheets are continuously removed from the stack 146 one by one.<br>
The transaction flow associated with the sensing of doubles and efforts to strip the top sheet are represented in Figure 65. In a step 196 a determination is made as to whether a double has been sensed during the unstack routine. If so, the step associated with lowering the stack 198 is executed. The pick belts are moved in reverse in a step 200 to pull the doubles back into the stack and the stack is then raised at a step 202. As previously discussed, the unstack routine is then started again. Of course if doubles are not sensed when a sheet is picked, the sheet moves past the pre-centering sensors 82 and the transverse position of the note in the transport is sensed at a step 204.<br>
After a document passes the pre-centering sensors, it then moves to the deskew and aligning device 84. This device is adapted to catch a moving sheet and align its leading edge transversely to the direction of travel of the sheet in the sheet path. Once the leading edge of the sheet has been<br><br>
transversely aligned the device 84 operates to move the sheet so that its center line is in alignment with the center line of the transport path. Doing this enables the document to be more rapidly identified for reasons which are later explained.<br>
As shown in Figure 20 the deskew and alignment device includes a shuttle indicated 204. The shuttle is comprised of a pair of shuttle halves 206 and 208. Each shuttle half is connected to a drive shaft 210 which operates to move pinch wheels 212 and 214 on the shuttle halves in the manner hereafter explained. The shuttle 204 is also movable transversely on drive shaft 210. The shuttle also includes a first sensor 216 adjacent to shuttle half 206 and a second sensor 218 adjacent to shuttle half 208. The shuttle also includes a middle sensor 220. The pinch rolls engage a segmented idler shaft 222.<br>
Referring to Figure 18, shuttle half 206 is schematically shown therein. The shuttle half includes a solenoid 224. Solenoid 224 is connected to a movable brake rod 226 which is movable on pins 228. The pinch wheel 212 revolves around a center pin 230. The center pin 230 is movably mounted in a slot 232 on the body of the shuttle half 206.<br>
The drive shaft 210 is a splined type shaft as shown. The shaft 210 extends through a drive wheel 234 which is mounted for rotation on the body of the shuttle half 206.<br>
As shown in Figure 18 when the solenoid 224 is not energized the pinch wheel 212 is biased into engagement with the drive wheel 234 by a spring schematically indicated 236. The pinch wheel 212 rotates in response to rotation of the drive shaft 210. The rotation of the pinch wheel 212 also engages the independently rotatable segments of the segmented shaft 222. Documents are enabled to pass through the nip between pinch wheels 212 and 222 in response to rotation of pinch roll 212 by the drive wheel 234.<br>
As shown in Figure 19, when the solenoid 224 is energized the brake rod 226 moves. The movement of the brake rod causes the brake rod to engage pinch wheel 212. As the brake rod engages the pinch wheel, the pinch wheel is displaced from the drive wheel 234 and is prevented from moving<br><br>
until the solenoid is again de-energized and the brake rod is retracted. As a result, any document that is positioned in the nip between pinch roll 212 and segmented shaft 222 when the solenoid is energized, will be stopped in this position. The documents is prevented from moving in the area of the nip until the solenoid is de-energized.<br>
The operation of the shuttle is schematically indicated in Figures 21-24. As shown in Figure 21 a sheet or document 238 is shown moving in the direction of the arrow in the sheet path. The shuttle is moved prior to arrival of the sheet in a transverse direction on the drive shaft 210 so that pinch rolls 212 and 214 will both engage the sheet. This is done by the control system 30 based on the signals from the pre-centering sensors 82 which are upstream of the shuttle 204. The shuttle is moved transversely in the sheet path by a fast acting motor or other suitable device.<br>
In response to the sheet 238 moving into the area adjacent to the pinch rolls, the sensors 216, 218 and 220 sense the sheet. Because the sample sheet 238 is skewed, the sensor adjacent to pinch roll 214 which is sensor 218, will sense the leading edge of the sheet first. When this occurs, the solenoid associated with the shuttle half 208 energizes, stopping movement of pinch roll 214, while roll 212 continues to rotate in response to rotation of shaft 210. As a result, sheet 238 begins to rotate about the pinch point 240 created between the stationary roll 214 and segmented shaft 222. Sheet 238 moves such that its leading edge 242 begins to move into an aligned condition in a direction transverse to the direction of sheet movement.<br>
As shown in Figure 23, sheet 238 rotates about pinch point 240 until leading edge 242 is transversely aligned with the sheet path. When an aligned condition is reached, the solenoid 224 is energized to stop movement of pinch roll 212. This produces a second pinch point 244 between the note 238 and the idler shaft 222.<br>
In the stopped condition of the note shown in Figure 23, the leading edge 242 of the sheet extends in the sheet path beyond centering sensors, generally indicated 246. The centering sensors are operative to sense the side<br><br>
edges of the sheet indicated 248 and 250 in Figure 23, in a manner hereinafter described. Upon sensing the side edges the control system 30 determines the position of a center line of the sheet 238. This center line is indicated schematically in Figure 23 as 252. The shuttle then moves the sheet transversely in the manner indicated in Figure 25. The sheet is moved in engaged relation between the pinch rolls 212 and 214 and the segmented idler shaft 222. As shown in Figure 24, sheet 238 is moved to the right such that the sheet center line 252 is in alignment with a center line of the transport path 254.<br>
Once the sheet has been deskewed in this manner and has been moved into a centered relation in the transport path, the solenoids operating the pinch rolls 212 and 214 are released simultaneously to discharge the sheet 238 from the shuttle. This is done in the manner which assures that sheet 238 is properly spaced from a preceding sheet. Optimally the sheet is not delayed any longer than is absolutely necessary to assure that the sheet is properly oriented.<br>
The schematic view of the components of the centering circuit which is used in connection with the centering sensors 246 and the pre-centering sensors 82 is schematically indicated in Figure 26. In the preferred embodiment of the invention the sensors 246 are charged coupled devices (CCDs) which are used for sensing edges of the sheet. An emitter is provided on an opposed side of devices for providing a radiation source for sensing the edges of the sheet. Signals from the sensors 246 are transmitter to an amplifier 256. Signals from the amplifier are forwarded to a digitizing comparator 258. The digitizing comparator is provided with a threshold input from an interface 260.<br>
A trip point output from the interface 260 is determined by a software routine that adjust the threshold input for the presence of a note based on the radiation received by the sensors when no note is present. This enables adjusting the sensors for changes during the operation of the device, such as<br>
changes in the intensity of the emitters or accumulation of dirt on the emitters or sensors.<br>
The output from the digitizing comparator is transmitted to a programmable logic device 262. The programmable logic device determines the position of the edge of the note and transmits output signals along with timer signals to a processor 264. The processor generates signals in accordance with its programming to move the shuttle to the desired position. In the case of the pre-centering sensors, the shuttle is moved to a position to ensure that it encounters the note. In the case of the centering and deskew operation sensors the shuttle is moved to assure that the note is moved to align it with the center of the transport. The timing signals also track when the leading and trailing edges of the note encounter the sensors to enable the control system to maintain proper separation of the notes within the central transport. The signals from the sensors 246, as well as those from sensors 216, 218 and 220 on the shuttle, are used to assure that a note which has been released from the shuttle moves away in the proper coordinated fashion.<br>
The logic flow associated with the deskew and alignment operations is shown with reference to the steps shown in Figure 65. As indicated by a step 266, the signals from the pre-center sensors 82 are used to move the shuttle to assure that it engages the note. A deskewing step 268 operates in the manner already described to align a leading edge of the note so that it extends transversely to the direction of sheet movement in the transport. At a step 270 the center line of the sheet is moved into alignment with the center line of the sheet transport. The sheet having been deskewed and aligned, it is released at a step 272 in a timed manner and continues on its way in the sheet path.<br>
As shown in Figure 13, after a document leaves the deskew and alignment device the document moves through the area of the central transport where it is sensed by various sensors associated with the identification device 88. In the preferred form of the invention the identification device is of a type shown in U.S. Patent Application Serial Number 08/749,260 filed November 15, 1996 which is incorporated herein. This identification device is suitable<br>
for identifying the type and denomination of a passing document. It also is suitable for distinguishing genuine documents from suspect documents. An advantage of the device used in the preferred embodiment is its ability to identify a document despite the failure of the document to be in alignment with the sheet path. It should be understood that because of variable conditions, despite efforts made to orient the sheet, sheets may still be somewhat out of alignment at the time of analysis by the identification device. Of course in other embodiments, other devices for identifying sheets may be used.<br>
The analysis of the note by the identification device 88 produces signals. These signals may be indicative of the note type and denomination. Alternatively, the signals may be indicative that the note cannot be satisfactorily identified or are invalid. These signals are transmitted to the control system 30 which operates the divert gates 90 adjacent to the central transport. As shown in Figure 27, in a preferred embodiment of the invention, documents which cannot be identified with a high degree of confidence are routed by gates 90 to the delivery/reject area 60 and are supported on second belts 58. Such rejected notes are represented in Figure 27 by a stack 274.<br>
Identified documents suitable for deposit are routed by divert gate 90 into the escrow area 66 where such notes are supported on belts 64. Such identified documents are represented in Figure 27 by stack 276. It should be understood that the routing of identified sheets to the escrow position 266 is optional depending on the programming of the control system 30 of the machine. Identifiable notes may be directly routed to appropriate storage areas for recovery.<br>
The transaction flow associated with the analysis of the documents and routing to the reject/delivery and escrow areas is represented in Figure 66. The analysis of the moving documents is represented by a step 278. If the note is properly identified in a step 280, a check is next made at a step 282 to determine if the machine is in a deposit mode. If so properly identified notes are routed to storage locations in the recycling canisters. If the machine is not<br>
currently in a deposit mode, which is the case with the example described, properly identified notes are routed to the escrow position in a step 284.<br>
If in step 280 a note is not identifiable or is identified as unacceptable the note is routed to the reject position in a step 286. Of course it should be understood that the unstacking, pre-centering, deskewing, aligning and note identifying steps are all ongoing concurrently as each document passes through the central transport. The notes are continuously being directed to the escrow or reject positions until the stack of notes has been completely unstacked.<br>
In the operation of the invention of the preferred embodiment, unidentifiable sheets, sheets which are unacceptable and sheets which appear suspect are returned to the customer from the input/output area 50. This is schematically represented in Figure 28 which shows the reject stack 274 being delivered to the customer through the opening 52. This is normally done by the machine after displaying to the customer, through the interface 14, information on the number of documents which were unidentifiable or unacceptable in the deposit stack that they submitted. The customer would also be advised of the value of the documents that have been properly identified. In alternative embodiments the customer may be given the option through an input to the customer interface to retry the rejected sheets to determine if they can be identified. If this occurs, the machine may be programmed to run the reject stack 274 back through the central transport in the manner previously done with the deposited stack. This is a matter of choice in the programming of the machine and depends on the preferences of the operator of the machine.<br>
Assuming that the reject stack 274 is to be returned to the customer, the reject stack is delivered to the customer in the manner indicated in Figure 29. The inner gate 142 is extended while the carriage supporting belts 64 are raised so that stack 276 engages the carriage supporting belts 62 and 58. Belts 58 are raised such that the reject stack engages belts 56. As reject stack 274 is sandwiched between belts 56 and 58 the gate 54 is opened. The reject stack<br>
274 is moved by belts 56 and 58 out through opening 52 in the housing of the machine. The delivery and receipt sensors 148, 150 adjacent to opening 52 are operative to sense movement of the stack.<br>
The transaction flow associated with the delivery of the reject stack to the customer is represented in Figure 66. In a step 288, a determination is made as to whether notes are present in a reject stack after all the sheets have been unstacked and passed through the central transport. If so, the reject stack is moved to the delivery position in step 290. The inner gate is closed in a step 292, as shown in Figure 29. The front gate is then opened at a step 294 and the belts are driven to deliver the reject stack to the customer at a step 296.<br>
As shown in Figure 67, the customer may then be prompted to take the reject stack at a step 298. This is done through the customer interface. The sensors 148 and 150 are then monitored at a step 300 and a decision is made at a step 302 as to whether the reject sheets have been taken. If the sheets have been taken the front gate 54 of the machine is closed at a step 304 and the inner gate is retracted at a step 306.<br>
As previously discussed, in the described embodiment of the invention the customer is required to take the reject sheets. Therefore if at step 302 the customer has not taken the sheets, the transport is operated to push the sheets out the opening 52 in a step 308. After the transport has been run sufficiently to push the sheets out, the front gate is closed.<br>
In alternative embodiments of the invention the customer may have the option of having the reject stack retried to determine if the documents can be identified. In other alternative embodiments the machine may be programmed not to return unidentifiable or rejected sheets to the customer. This may be done for purposes such as to prevent potentially counterfeit sheets from being placed back in circulation. If the machine is programmed in this manner the reject stack 274 may be moved in the manner shown in Figure 30 back into the unstack area of the machine for a further pass through the central transport. In this second pass the sheets may either be again returned to the reject area if they cannot be identified; placed in the escrow area if they may be identified;<br>
or alternatively, passed into a storage location in the recycling canisters or dump area 132 for later analysis. Because the preferred embodiment of the present invention is capable of tracking individual sheets which are passed through the machine, it is possible for the machine to track where particular sheets originated based on their storage location and position within a storage location.<br>
Returning to the operation of the described embodiment, the stack 276 held in the escrow position is now moved upward in the input/output area as indicated in Figure 31. At this point the customer may have the option of receiving the identifiable sheets that they have deposited back. This may be done for example if the customer does not agree with the count of the sheets by the machine. This may be accomplished by programming the machine so that the customer can obtain return of the documents in escrow by an appropriate input to the interface.<br>
If the machine is programmed to deposit the identified documents held in escrow, the machine moves the document stack 276 in a manner shown in Figure 31. Alternatively, the escrow stack will be moved in the manner shown in Figure 31 if the machine requires a customer input to deposit the escrow documents and such an input is given through the customer interface.<br>
When the escrow stack 276 is to be deposited in the machine, belt 64 is raised to the position shown in Figure 32 and the escrow stack 276 is sandwiched between belts 62 and 64. The belts are then driven to move the escrow stack 276 into the unstack area of the machine in the manner previously described.<br>
The operation of the drive rolls and movable belt carriages of the input/output area 50 are described in greater detail in Figures 33 and 34. The carriage associated with belts 64 is moved upward and downward by a driving mechanism. The carriage supporting belts 62 and 58 is free floating but is restricted in the degree to which it may move downward. The carriage supporting belts 56 may rotatably conform to the position of an adjacent stack<br>
but is generally prevented from moving downward. This configuration minimizes the complexity of the input/output mechanism.<br>
In a preferred embodiment of the invention, the carriage supporting belts 64, 62 and 68 are guided to move vertically by a first guide/drive shaft 310 and a second guide/drive shaft 312. The guide/drive shafts not only extend generally vertically, but also are splined shafts that are rotatable by suitable transmission mechanisms in the directions shown. Movable journal guide blocks 314 and 316 are movable vertically on shaft 310. Each journal guide block represented by guide block 314 in Figure 33 includes bevel gears 318. The bevel gears operate to transmit rotational motion from the guide/drive shaft 310 to shafts 320 and 322. Shafts 320, 322 include rollers upon which belts 56 and 58 are supported respectively.<br>
Journal guide blocks 324 and 326 are movable on shaft 312. As indicated in Figure 33 by journal guide block 324, the journal guide block includes bevel gears 328 which operate to transmit rotational motion of the drive/guide shaft 312 to shafts 330 and 332. Belts 62 and 64 are supported on rolls which are driven by shafts 330 and 332 respectively.<br>
As should be appreciated, this arrangement for driving the belts in the input/output area reduces complexity compared to other arrangements. This arrangement also increases flexibility for selectively positioning stacks of documents.<br>
Returning to the sample transaction flow with the escrow stack 276 in the position shown in Figure 31, the transaction flow proceeds in the manner indicated in Figure 67. As indicated in a step 334, the escrow stack is moved upwards so that it is in a position to either be delivered to the customer or to be moved back into the unstack position. The customer operating the machine is then prompted at a step 336 to indicate whether they wish to have the escrow stack returned to them or to deposit the amount in the escrow stack into the machine. As indicated by a step 338, if the customer chooses to have the stack returned rather than deposited, the machine proceeds to return the stack to the customer.<br>
The process of returning the stack is indicated through the transaction flow represented in Figure 68. At this point in the transaction flow the escrow stack 276 is adjacent to opening 52, and may be readily delivered to the customer. The inner gate is closed at a step 340 and the front gate is opened at a step 342. Belts 62 and 64 are then driven to move the escrow stack outward to present it to the customer at a step 344. A determination is made at a step 346 whether the customer has taken the stack. This is based on signals from the sensors 148 and 150. If the escrow stack is sensed as taken the machine returns to the main ATM transaction sequence at a step 348.<br>
If the customer does not take the stack, steps are executed to encourage the customer to take the stack, or to retract it into the machine. If the stack is not sensed as taken in step 346, the customer is prompted through the interface of the machine at a step 350 to take the stack. If the stack is now sensed as taken, a step 352 returns the machine to the main sequence. If however the stack is still not taken, the transaction flow proceeds through steps 354 and 356 in which the stack is recovered and stored, and an irregular transaction is noted. This may occur for example by retracting the stack into the machine, closing the gate, and then passing the stack through the central transport to one of the storage areas.<br>
Alternative forms of the invention may provide for crediting the customer's account for amounts which they indicated they wished to have returned but did not take. If the machine is programmed to operate in this manner the documents in the escrow stack will be stored according to their type and denomination in the various storage areas in the recycling canisters. Alternatively, the documents in the escrow stack may be stored separately in one of the storage areas. The machine may be programmed to allow the customer to return at a later time and obtain the documents in the escrow stack. This may be valuable for example if the customer forgets to take the stack or is distracted while performing their transaction.<br>
In most cases when a customer has deposited documents in the machine, they will choose to have the funds credited to their account. As a<br>
result, in the transaction flow at step 338 they will indicate through the customer interface that they wish to make a deposit. The transaction flow moves through a step 358 in which the machine is set to deposit mode. Thereafter the escrow stack 276 is moved to the unstack area at a step 360. This is done in the manner previously described for the deposited stack.<br>
As shown schematically in Figure 35, the escrow stack will now be unstacked in the manner previously discussed. However, now instead of the unstacked bills being routed by the divert gate 90 to the escrow area and delivery/reject area, the bills are selectively routed downward in the machine as shown, to the various storage areas in the recycling canisters. During this operation each of the unstacked bills is again identified by the bill identification apparatus 88. The identification of the bill type is used to selectively route each document to the storage area where documents of that type are stored. It should also be understood that the internal memory of the machine is preferably programmed to record the type of document held in the escrow stack and to compare the document type determination made in the initial pass to the type determination made in the second pass. In the event of an error or inconsistency, the divert gate 90 may be used to route any irregular documents to the delivery/reject area 60 instead of moving them down into a storage location in the machine.<br>
As can be appreciated with the transaction flow beginning at step 358 in Figure 67, the escrow stack undergoes the unstacking process previously described in connection with steps 184, 196 and 204. Each note is also deskewed and centered with regard to the transport path and then released.<br>
The note undergoes analysis in the manner discussed in connection with step 278 and if the note is properly identified in step 280, the transaction flow moves to a step 262 when the machine is in the deposit mode. In step 262 each note is dispatched to an appropriate storage location. Notes are moved through this central transport in the direction of Arrows "D" shown in Figure 35. Each note is then routed to an appropriate storage location at a step 264. It should be appreciated that notes are moving concurrently toward<br>
different storage locations under the control of the control system. Figure 35 shows an example of a note being deposited in storage area 102. It should be understood however that notes may be moved into numerous storage areas during the deposit process.<br>
The notes in the stack 276 continue to be unstacked until the stack is determined to be depleted at a step 266. Assuming that no notes have been rejected during the deposit process, the transaction flow may then return to the main ATM transaction sequence at a step 268. The customer may be provided with a receipt for their deposit and may continue with other transactions.<br>
In the operation of the central transport 70 there are places in which moving notes must undergo generally 180 degree turns. One example of this is indicated by transport section 370 which is shown in Figure 35. In transport section 370, documents that have been aligned in the transport path have their direction reversed so that they can be passed adjacent to the identification device 88. Transport section 370 requires that the bills be transported accurately and maintain their spaced aligned relation. The documents are also preferably not crumpled or otherwise distorted, as this may adversely impact their ability to be identified in the following section. More details regarding transport section 370 are shown in Figures 36-38.<br>
Transport section 370 includes a plurality of belts 372. These belts in the preferred embodiment are V-type belts that engage driving and idling rolls 374, 376 and 378. In the preferred form of the invention the "V" cross section of belts 372 is pointed radially inward as the belt passes rolls 374, 376 and 378.<br>
As belts 372 move between rolls 374 and 376 they are supported on carriage rolls 380. The carriage rolls 380 support the belt in a manner such that the "V" section is pointed away from the carriage rolls. A flat top surface of each belt is positioned adjacent to an annular dimple 382 on the outer circumference of each carriage roll. Carriage rolls 380 are also spaced from one another. Guides 384 which generally have a somewhat lesser diameter<br>
than the carriage rolls are positioned in between. An example of a guide 384 is shown in greater detail in Figure 37.<br>
When a note 386 passes through transport section 370 it is held between the flat surfaces of belt 372 and dimples 382 of the carriage rolls as shown in Figure 38. The notes move around the carriage rolls without being skewed or distorted. When the notes are passed to the area adjacent to roll 376 projections 388 on the guides urge the note away from engagement with the carriage rolls and in the desired direction.<br>
This configuration is used in a preferred embodiment of the invention as it has been found that notes may generally be transported through the transport section 370 without adversely impacting their aligned and separated relation. The ability to turn the note path 180 degrees also greatly reduces the overall size of the automated banking machine.<br>
As shown in Figure 35 notes which are passed through the central transport 70, and which are moved to storage areas within the machine, pass downward through the central transport through remote transport segments 108, 110, 112 and 114. These remote transport segments operate as part of a remote transport. The remote transport segments are vertically aligned in the preferred embodiment so as to enable documents to be selectively transported between the transport segments. The transport segments also enable documents to be selectively directed either through the transport segments or into or out of the adjacent canister transports, one of which is positioned adjacent to each transport segment. The selective directing of documents is achieved through use of a media gate associated with each transport segment which is operated under the control of the control system 30.<br>
An example of a transport segment used in a preferred embodiment of the invention is indicated by transport segment 110 shown in Figure 39. Transport segment 110 includes a plurality of spaced belt supporting rolls 390, 392. Each of the rolls support a belt 394 thereon (see Figure 44). An inner flight 396 of each belt 394 is positioned adjacent to a first sheet supporting surface 398 and a second sheet supporting surface 400. The sheet supportingsurfaces each include a plurality of spaced raised projections or dimples thereon. These raised projections serve to break surface tension and minimize the risk of documents sticking thereon.<br>
The principles of operation of transport segment 110 as well as the canister transport used in the preferred embodiment, can be appreciated with reference to Figures 45 and 46. The transports operate by holding documents in engaged relation between an outer surface of a belt flight and projections which extend toward the belt flight from an adjacent supporting surface. In the example shown in Figure 45, belt flights 402 extend adjacent to a supporting surface 404. Projections 406 extend transversely between the belt flights from the supporting surface. A document 408 which is engaged between the belt flights and the supporting surface is biased by the projections 406 to remain engaged with the belt flights. This enables movement of the belt flights to accurately move the document 408 in engaged relation therewith.<br>
Returning to Figure 39, projections 410 extend from first sheet supporting surface 398. Projections 410 are generally segmented projections and include tapered leading and trailing edges to minimize the risk of documents snagging thereon. Idler rolls 412 and 416 are also joumaled on and in supporting connection with the member which includes sheet supporting surface 398. Idler rolls 412 and 416 are generally positioned in aligned relation with inner flights 396 and perform a function which is later explained.<br>
Each remote transport segment has a canister transport adjacent thereto. In the case of transport segment 110, canister transport 126 extends adjacent thereto as shown in Figure 1. Canister transport 126 includes a pair of spaced belt supporting rolls 418, only one of which is shown in Figure 39. Rolls 418 support belts 420 which include lower flights 422. Lower flights 422 extend adjacent to a supporting surface 424 which includes dimpled projections thereon of the type previously discussed. Projections 426 extend from supporting surface 424 between the belts and are generally parallel thereto. This structure enables documents to be transported in engaged<br><br>
relation between the projections 426 and the belt flights 422 in the manner previously described.<br>
As shown in Figure 44 the rolls 418 of the canister transports and rolls 390 of the remote transport segments are arranged in transversely intermediate relation, similar to the manner in which the projections on the supporting surface are positioned transversely intermediate of the belt flights. This assures that documents can be passed between the transport segments in controlled relation in the manner hereinafter described.<br>
Each of the remote transport segments include a media gate which is selectively operable to direct documents in desired directions. In the case of transport segment 110 the media gate associated therewith is gate 118. Gate 118 includes a plurality of movable arms 428. The arms are engaged to move together and are selectively movable about an axis of rolls 390. Each arm 428 has a roll 430 movably mounted thereon. Each roll 430 which serves as a diverter roll, is positioned in alignment with a corresponding inner belt flight 396.<br>
The operation of the remote transport segment and media gate will now be explained with reference to Figures 39-43. As shown in Figure 39, when the diverter roll 430 of the gate 118 is disposed from the belt flights 396, a document 432 is enabled to pass directly through the remote transport segment. Although the document 432 is shown as moving upward in Figure 39, it should be understood that documents may be moved downward as well. Likewise documents may be moved downward and then upward in the remote transport segment.<br>
Figure 40 shows a document 434 moving in a downward direction while the diverter roll 430 of the gate 118 is extended. In this condition the document 434 is directed toward the nip created by belt flights 422 and projections 426 of the canister transport 126. As a result, moving the belt flights 420 in the direction shown as the media gate is actuated transfers the document into a canister transport path along which it is carried by the canister transport. As can be appreciated from Figure 40, when the gate 118 is<br><br>
actuated belt flight 396 is deformed. Idler roll 416 supports the belt flight in the deformed position to prevent excessive wear as a result of friction.<br>
Figure 41 shows a document 436 being moved from the canister transport to the remote transport segment 110. In the position shown the media gate 118 operates to direct document 436 towards the remote transport segment 108 positioned above remote transport section 110 (see Figure 35) and towards the central transport.<br>
Figure 42 shows the gate 118 in a condition that directs a document 438 from the canister transport 126 downward into the remote transport segment 110. As will be appreciated from the foregoing discussion, the preferred embodiment of the invention enables moving documents from one storage area to another. This function is enabled by the control system of the machine moving documents from storage areas in canisters where they have been stored to storage areas in canisters either above or below the storage canister in the machine.<br>
Figure 43 shows a document 440 moving upward in the remote transport segment 110 and being directed by the gate 118 into the canister transport 126. The ability to move the documents in the manner shown in Figures 39-43 greatly facilitates the ability of the preferred embodiment of the present invention to store and recover documents. As will be appreciated from the foregoing Figures, the gate mechanisms may also be used to selectively orient documents. This may be desirable, particularly when it is desired to provide customers with documents uniformly oriented in a stack. This may be accomplished by re-orienting the documents prior to storage based on the orientation of each document as determined by the identification device 88. However as discussed previously, the present invention does not require documents to be oriented in any particular way for satisfactory operation.<br>
The storage of documents in a storage location is now described with reference to Figures 47-53. For purposes of this illustration, storage of a document in storage area 102, as shown in Figure 35, will be discussed. However it should be understood that the following description is generally<br><br>
applicable to the storage of documents in any of the storage areas available in the machine of the preferred embodiment.<br>
Referring to Figure 47, storage area 102 is shown from the top. Belt flights 422 of the canister transport 26 extend above a bin door 442. Bin door 442 is movably mounted above storage area 102. Bin door 442 includes a supporting surface 444 which supports notes or other documents moving thereon to and from adjacent storage areas. Supporting surface 444 includes dimpled projections which serve to reduce surface tension and sticking of documents that move thereon.<br>
Bin door 442 includes projections 446 which engage passing documents and maintain the documents in engagement with belts 422. A pair of openings 448 are in aligned relation with projections 446. Openings 448 provide access for thumper wheels which are later discussed. As can be seen in Figure 47 projections 446 are tapered adjacent to openings 448 to minimize the risk of documents sticking thereon. Bin door 442 also includes a plurality of rollers 450. Rollers 450 are positioned in aligned relation with belts 422. Rollers 450 engage the belts and facilitate movement of the belts when the bin door 442 is opened to accept a document in a manner that is later described.<br>
Bin door 442 also includes a central opening 452. Opening 452 is sized to accept a pair of closely spaced thumper wheels 454 therein. The central thumper wheels 454 are similar in construction to outboard thumper wheels 456 which extend through openings 448. Central opening 452 is also sized to accept feed wheels 458 and 460 which are positioned adjacent to the front of the bin door 442 covering storage area 102. The feed wheels 458 and 460 are connected to thumper wheels 454 by a feed belt 462.<br>
Is should be understood that thumper wheels 454 and 456, as well as feed wheels 458 and 460, are supported on a surface positioned adjacent to and vertically above bin door 442. The feed wheels and thumper wheels are preferably supported on the housing of the machine, whereas storage area 102 and bin door 442 are supported on recycling canister 94. The recycling<br><br>
canister may be removed from the machine when the feed wheels and the thumper wheels are positioned so they do not extend through opening 452.<br>
Bin door 442 also includes a sensor 464. Sensor 464 is an optical receiver type sensor that receives signals from an opto-emitter device which is positioned in the machine adjacent to and above sensor 454 when the canister 94 is in its operative position. Sensor 464 is in connection with the control circuitry of the machine.<br>
The steps involved in storing a note in storage area 102 is now described with reference to Figures 48-53. Storage area 102 holds a stack 466 of documents. Stack 466 is preferably a plurality of horizontally oriented documents which are supported on a push plate 468. Push plate 468 is biased upwards by a spring or similar mechanism. The stack is held at its upper end by a plurality of transversely spaced front fingers 470 and back fingers 472. The front fingers and back fingers are movable in the manner hereinafter discussed.<br>
Bin door 442 includes an inner surface 474 which includes a plurality of downward extending projections with recesses therebetween. In the position of fingers 470 and 472, inward facing projections 476, 478 adjacent the upper ends of the fingers 470 and 472 respectively, extend above the stack and are movable in the recesses of the inner surface of the bin door. These inward extending projections 476 and 478 of fingers 470 and 472 hold the top of the stack in captured relation in the positions shown in Figure 48..<br>
In Figure 48 a document 480 is shown as it moves toward the storage area 402. In this position prior to arrival of the document, the feed wheels and thumper wheels are positioned above the supporting surface 444 of the bin door. Take away wheels 482 which are movably mounted on the canister 94 which includes storage area 102, are moved to a position disposed away from the feed wheels 458 and 460.<br>
Upon arrival of the document 480 at the storage area 102 the bin door 442 rises upward in a front area adjacent to a front surface thereof. The take away rolls 482 move upward while the feed wheels 458 and 460 engage and<br><br>
move the document into the storage area 102. Fingers 470 and 472 also move the upper surface of the stack downward against the biasing force which is applied upward by the push plate 468. This enables document 480 to move into the storage area above the inward projections of the fingers.<br>
Figure 50 shows the configuration of the feed wheels and take away wheels as document 480 is moved into the storage area. In this condition the feed wheels 458 and 460 engage document 480 as do the take away wheels 482, so that the document may be driven into the storage area. As shown in Figure 50 a stripper roll 484, the operation of which is later discussed in detail, remains disposed away from the feed belt 462 as the document 480 enters the storage area.<br>
As shown in Figure 51 document 480 enters the storage area 102 above the stack 466. Fingers 470 and 472 are then moved outwardly as shown in Figure 51.<br>
As shown in Figure 52, eventually fingers 470 and 472 are moved outwardly a sufficient distance to release the stack 466 so it moves upwardly in response to the biasing force on the push plate 468. As a result, document 480 is integrated into the stack as the bin door 442 moves downward to its original position. When the bin door is moved downwardly the inward extending projections on the fingers 472 and 470 are in aligned relation with the recesses on the inside surface of the bin door.<br>
From the positions shown in Figure 52, fingers 470 and 472 move inwardly to again capture the top surface of the stack which now includes document 480. The take away wheels 482 are again retracted downward and storage area 102 is again ready to receive further documents for storage therein.<br>
As will be appreciated from the foregoing discussion, mechanisms in addition to those shown are used to move the bin door fingers and wheels of the invention. These mechanisms may include conventional motors and other mechanisms and linkages suitable for use in moving the components in the<br><br>
manner described. Such conventional components are not shown herein to promote clarity and facilitate understanding of the operation of the invention. It should be understood that when one or more documents are routed into a storage location in the machine, the storage location where the particular document(s) are to be stored undergoes the described series of steps. While the series of operations for the storage location has been described as receiving documents and then integrating them into the stack in the storage location one document at a time, it should be understood that the mechanisms in the storage areas may optimally be configured so that a plurality of documents may be collected in the storage area above the fingers and then the fingers and bin door moved to integrate the plurality of documents into the stack. Such a configuration may be used to optimize the speed of operation of the automated banking machine. It should be further understood that while the mechanism for storing documents in the storage areas is exemplary, other mechanisms which store such documents may be used in alternative embodiments of the invention.<br>
The operation of machine 10 is now described with regard to a transaction in which documents are retrieved from storage areas in the machine and dispensed to a customer. This is represented schematically in Figure 54. In a dispensing operation, documents will generally be removed from a plurality of storage locations and moved concurrently under the control of control system 30 to the escrow area 66. As shown schematically in Figure 54, each of the documents removed from a storage area is moved from the respective canister transport to the adjacent remote transport segment and directed upward by the gate to the central transport. In the central transport the documents each pass the identification device 88. The type and character of the document is again determined prior to being dispensed to the customer. The flow of documents during this dispensing (document recovery) operation is represented by Arrows "E" in Figure 54. Of course as can be appreciated from the foregoing discussion, if at any time in the processing of documents which are to be provided to a customer, an improper or unidentifiable document is found, it<br><br>
may be routed to the delivery/reject area 60 for reprocessing or return into the machine.<br>
The recovery of documents from a storage area is represented by the sequence of operations shown in Figures 55-61 in connection with storage area 102. For purposes of clarity and simplicity document 480, which was previously deposited at the top of the stack 466, will be dispensed in this exemplary sequence of events.<br>
As shown in Figure 55 in the initial position of storage area 102, bin door 442 is disposed downward. The inward projections of the fingers 470 and 472 extend in the recesses in the inner surface 474 of the bin door. The fingers along with the inner surface of the bin door retain the top of the stack which is bounded by document 480. The stack 466 is biased upwardly by spring action of push plate 468.<br>
In the next step in dispensing the document, the fingers 470 and 472 are moved outward relative to the stack. This enables document 480 at the upper surface of the stack 466 to be fully engaged with the inner surface 474 of the bin door 422.<br>
As next shown in Figure 57 the front of the bin door 422 is moved upward. The take away wheels 482 are moved upward to engage the feed wheels 458 and 460 (see Figure 59). Likewise stripper roll 484 is moved upward to engage feed belt 462.<br>
It should be noted with regard to Figure 59 that feed wheel 460 includes an inner portion which has a high friction segment 486 thereon. High friction segment 486 comprises a band of resilient material that extends part way circumferentially about the inner portion of the wheel. Feed wheel 458 has a similar high friction segment 488 thereon. The high friction segments provide gripping engagement with a top document in the stack when the feed wheels are positioned to place the high friction segments in engagement with the top document.<br>
It should further be understood that stripper roll 484 includes a one way clutch type mechanism. This one way clutch mechanism enables the<br><br>
stripper roll to rotate in a manner which allows a document to readily move into the storage area 102. The clutch associated with stripper roll 484 is oriented to resist movement of documents out of the storage area. In this manner the stripper roll 484 generally strips all but the document at the very top of the stack and prevents other documents from leaving the storage area. This is achieved because the high friction segments provide greater force moving the single document outward than the resistance applied by the stripper roll.<br>
As is also shown in Figures 57 and 59, thumper wheels 454 and 456 include an outward extending portion. These outward extending portions are aligned so that all of the extending portions extend through the respective openings in the bin door simultaneously. As is shown in Figure 59 these extending portions are generally in arcuate alignment with the high friction segments on the feed wheels.<br>
As shown in Figure 58 to pick a document the feed wheels and thumper wheels are rotated so that the extending portions of the thumper wheels and the high friction segments of the feed wheels engage document 480 at the top of stack 466. The action of the thumper wheels, feed wheels, take away wheels and stripper roll, operate to separate document 480 from the stack and move it outwardly from the storage area as shown in Figure 58. The preferred embodiment of the apparatus is generally sized so that a single rotation of the feed wheels and thumper wheels is sufficient to remove a document from the storage area. Once the document is removed from the storage area the bin door 442 is again closed and the take away wheels and stripper roll moved so as to be retracted from the canister. The fingers 470 and 472 are moved upward and then inward to again engage the top of the stack.<br>
As document 480 is removed from storage area 102 the transmissivity of light through the document is sensed. The transmission of light through the document is sensed by a sensor 490 which is similar to sensor 464 and is positioned on the bin door or other structure covering the storage area or otherwise in front of storage area 102. Emitter 492 mounted on the machine<br><br>
emits sufficient light so that it can be determined if a double note has been removed from the stack.<br>
Emitter 492 and sensor 490 are connected to the control system which is programmed to recognize when a double document has been picked from the storage area. The machine may operate in a number of ways to deal with this occurrence. If the document has been removed entirely from the stack, the document may be reversed in direction and deposited back into the stack. Then an attempt made to again remove it. Alternatively, in an attempted second picking operation the feed wheels may be oscillated back and forth as the note is being picked to minimize the possibility that two notes will be removed together. This may be done automatically in some conditions where documents are known to have a particularly high affinity or surface tension which makes them difficult to separate.<br>
Finally, in the event that repeated attempts to pick a single note from the storage area are unsuccessful, the machine may operate to route the picked document(s) to another storage area or to the dump area 132. The machine may then proceed to pick a next note from the stack. The programming of the machine 10 is preferably established to minimize the delay associated when a picking problem is encountered.<br>
After the document 480 has been successfully removed from the storage area 102 it is transported to the remote transport segment 110 and is routed by the gate 118 toward the central transport. Document 480 along with other documents passes the identification device 88 which confirms the identity of each document. The documents are deposited in the escrow area 66 where an escrow stack 494 is accumulated. Thereafter as schematically represented in Figure 62, escrow stack 494 is moved upwardly in the input/output area 50 of the machine. Gate 54 is opened and the stack is delivered to the customer through opening 52.<br>
The transaction flow executed by the control system for carrying out the operations of the machine in a withdrawal transaction is represented in Figure 69 and 70. As is the case with the deposit transaction, the machine first<br><br>
goes through a customer identification sequence represented by a step 134 in which the customer operating the machine is identified. This customer ID sequence is not executed when the customer has operated the machine to conduct a prior transaction. After the customer has identified themselves, the machine goes through the main ATM transaction sequence 136, as previously described.<br>
The customer next indicates at a step 496 through the customer interface that they wish to conduct a withdrawal transaction. The amount of the withdrawal is then received by the machine based on customer inputs at a step 498. At a step 500 the machine operates to determine if the amount of the withdrawal that the customer has requested is authorized by the programming of the machine and/or the programming of a computer which is in communication with the machine. If not, the machine returns to the main sequence and provides instructions to the customer.<br>
If the amount of the withdrawal is authorized, the control system of the machine looks up the storage locations of the various bill denominations at a step 502, and calculates a bill mix to be provided to the customer at a step 504. It should be noted that in some embodiments of the invention, which are intended to be used primarily by commercial customers, the customer may be allowed to select the mix of denominations of bills that the customer will receive. This is done by the control system using programmed prompts displayed on the customer interface. The customer inputs through the customer interface the quantity of each bill type they desire. If however the machine does not provide that option or the customer does not provide a specific denomination selection, the machine will operate to determine the number of various types of bills that it has available and will provide bills to the customer in denominations which will minimize the probability that the machine will run out of bills of any particular type.<br>
The machine next proceeds to a step 506 in which the control system operates to pick notes from the various storage areas. As indicated by phantom step 508, the picking operations are executed concurrently in the<br><br>
preferred embodiment of the invention. Multiple bills may be picked from the various storage locations and moved as a stream of separated notes through the remote transport segments and into the central transport of the machine.<br>
For each picking operation, after the note is picked a step 510 is executed to sense for double notes having been picked from a storage location. If a double is sensed at a step 512 the note is retracted at a step 514 and an effort is again made to pick a single note. If however in step 512 a single bill is sensed the bill is released in a step 516. In step 516 the note is released in coordinated relation with the other notes by the control system to assure that each note reaches the central transport of the machine in spaced relation with the other notes. However the spacing is such that the notes move concurrently and are delivered into the escrow location at high speed.<br>
An analysis of each passing note is done by the identification device 88 which is indicated at a step 518. If the note is recognized as proper at a step 520, the note is routed to the escrow area 66 at a step 522. If the note is not recognized in step 520 or is improper, it is routed to delivery/reject area 60 in a step 524. The failure to identify a note which has come from a storage location is an unusual event. This is because each stored note has usually been twice previously identified. Problems may arise when the note was loaded into the canister outside the machine. If a note is rejected, the transaction flow proceeds to an error recovery step 526. This error recovery program may include routing the note back through the central transport to a designated storage location for later analysis.<br>
Notes are delivered into the escrow area until all the notes which respond to the withdrawal request by the customer have been delivered. The completion of the delivery is checked at a step 528. A check is then made at a step 530 to determine if all the notes that have been delivered have been properly identified. If not and there are notes in the reject area, the error recovery step 526 is executed.<br>
If however the notes have all been properly identified the escrow stack corresponding to stack 494 in Figure 62 is moved to the delivery position in a<br><br>
step 532. The inner gate is then closed at a step 534. The front gate is opened at a step 536 and the transport belts move to deliver the notes to the customer at a step 538.<br>
At a step 540 a determination is made based on reading from sensors 148 and 150 as to whether the stack of notes has been taken by the customer. If so, the front gate is closed at a step 542. The transaction flow then returns to the main ATM sequence at a step 544.<br>
If however the notes are not taken by the customer routines may be executed to prompt the customer through the customer interface to remove the notes. However if the customer does not take the notes, then step 546 is executed to retract the notes into the machine. The front gate is closed at a step 548 and the machine then proceeds to the error recovery routine. This may include for example storing the notes in a particular storage location. Alternatively it may involve reversing the withdrawal transaction requested by the customer and placing the notes again back in the various storage areas by running them through the central transport.<br>
An advantage of the preferred embodiment of the present invention is its ability to operate at high speeds. This is achieved through the architecture of the control system 30 which is schematically represented in Figure 63. The preferred embodiment of the system uses a control system which includes a terminal processor (TP) 548. The terminal processor executes the general programming of the machine as well as the steps necessary for operation of the communication and other functions that the machine carries out. As indicated in Figure 63, terminal processor 548 is in operative connection with a data store which includes program and other data. Terminal processor 548 is in communication through appropriate interfaces with various hardware devices 550.<br>
Terminal processor 548 is also in operative communication with a module processor (MP) 552. Module processor 552 orchestrates the operations carried out by the plurality of module controllers (MC) 554, 556, 558, 560, 562 and 564. As indicated, module processor 552 is also in<br><br>
operative connection with its own respective data store which holds its programming and other data. Likewise each of the module controllers preferably include data storage for various programmed operations and data. The module processor 552 is operatively connected to each of the module controllers through a data bus 566. The module controllers each communicate through the data bus only with the module processor 552, and the module processor communicates directly with each module controller. Each module controller has associated therewith hardware devices schematically indicated 567. Each module controller has associated therewith its own respective types of hardware devices which it is responsible for operating and controlling. In some embodiments of the invention each module controller includes a single processor referred to as a Module Controller Processor (MCP). However in other embodiments each module controller may include multiple processors (MCP's). Similarly, multiple processors may be used in other embodiments for the TP and/or the MP.<br>
In operation of the system each module controller executes programs to carry out particular tasks associated with each hardware device that is connected to it. This may be for example a particular function associated with moving a mechanism or a document. These tasks are coordinated with other tasks being executed by the module controller concerning other hardware devices. The movement of documents concurrently however is coordinated by the module processor 552 operating to send the control signals to the various module controllers, so that document handling functions are carried out in a timed and coordinated manner. The terminal processor 548 controls the operation of the module processor to carry out the particular transactions which are indicated by the terminal programming. As a result of this configuration, documents are enabled to be handled concurrently, yet independently throughout the machine which greatly speeds the operation of storing and retrieving documents.<br>
Terminal processor 548 runs programs stored in its associated memory which enable the ATM 10 to communicate with external devices and systems.<br><br>
This includes host computers operated by a bank or other financial institution which operates the ATM. The terminal processor also communicates with sensors and other devices in the ATM that interface with the user of the machine. This includes for example the display 16, and input devices such as keypad 18 and card reader 20. The terminal processor also communicates and controls the operation of devices such as printers and depositories which are a part of machine 10.<br>
In the preferred embodiment the terminal processor 548 also communicates with identification device 88 which determines the type and denomination of documents as they pass through the machine. The memory associated with the terminal processor includes information that correlates the information resolved by the identification device with particular document types. The identification device used in the preferred embodiment of the invention is a currency validator and counterfeit detector (CVCD). The CVCD determines that the data sensed from a passing note corresponds to one of a plurality of templates stored in memory, each of which templates reflect data that is expected to be received from a particular note type and denomination having a particular orientation. The memory of the terminal processor includes information which enables the terminal processor based on the template which corresponds to the document or note, the note type, denomination and orientation. The terminal processor also maintains a record in its memory of the storage locations or bin numbers where documents or notes of each type are stored.<br>
When a customer operates the machine 10, the terminal processor 548 operates in accordance with its programming to cause the module processor and terminal processor to execute the necessary instructions to carry out the transactions. In the case of a deposit transaction, carried out in response to a user input the terminal processor determines the storage areas in the canisters where each document type is to be stored. The terminal processor then instructs the MP to carry out the storage activity and to report back when it is completed. The MP processes the commands from the TP to move the media<br><br>
to the storage locations in accordance with the instructions which comprise signals from the TP. Likewise in a dispense transaction, which is similarly carried out in response to a user input, the TP communicates to the MP messages which indicate how many documents are to be dispensed from particular storage areas. The MP receives these messages and moves the media to the desired locations.<br>
As can be appreciated from the foregoing discussion, the messages that the TP communicates to the MP are generally general instructions concerning notes, sheets or other documents or media moved through the machine. The details of operating the devices and tracking the media to assure that it properly moves simultaneously as desired is carried out under the control of the MPs and the MCs.<br>
The module controllers (MC) are associated with particular devices or combinations of devices in the system. The MCs generally run relatively simple limited routines which are stored in their associated memories. The programs run by the MCs are generally referred to as tasks. The tasks are state based programs (state machines) that enable starting or controlling other tasks from signals received from the MP as well as from sensors, devices or from other tasks.<br>
Each MC in the preferred embodiment is associated with a group of physical devices. In the preferred embodiment an MC is associated with the CVCD to control the operation of its sampling devices and sensors. The MC associated with the CVCD runs tasks which activate emitters and receivers to generate the sample data. The MC for the CVCD also provides signals associated with the leading and trailing edges of the note. It also calculates the angle of skew of a document as it passes through the CVCD. The signals and information resolved by the MC associated with the CVCD is communicated to the MP.<br>
The devices which move documents through the input/output function 32 and the unstack, deskew and centering alignment functions 34, 36 and 38 are all controlled by a single module controller in the preferred embodiment.<br><br>
These functions and the devices associated therewith are referred to as the central transport (CT). The module controller associated with the central transport executes tasks necessary for the movement of documents through the central transport as later discussed in detail. An MC is also associated with each currency recycling canister and the mechanisms in the machine that remove and deposit documents in the bin areas in the canisters. The MC associated with each canister also controls the canister delivery transport associated with the transport as well as the remote transport segment and media gate associated with the transport. The devices which operate to perform these functions are referred to as a multimedia recycler (MMR). As will be appreciated, each canister in the machine is associated with a separate MMR and each is operated under the control of a separate MC.<br>
While the TP performs the high level functions associated with currency recycling and the MCs perform the lowest level functions, the MP performs the critical functions which enable everything to work in coordinated relation. The MP is an object oriented software system. The MP operates to control the flow of media between the CT and the MMRs. The MP does this in response to the dispense and deposit media instructions which comprise signals it receives from the TP. The MP also provides customizable thresholds and functions for deposit, reject and divert operations. The MP also functions to process the information that it receives from the MCs which are associated with each MMR, the CVCD and the CT.<br>
The MP also performs a data logging function in the system. A log is kept of TP-MP communications as well as MP-MC communications. The MP also maintains a log of internal software assertions or faults. A log of external software assertions or faults is also maintained by the MP in its associated data store. The MP also maintains a virtual representation of the system and the media therein. This includes a virtual representation of the order and placement of all the elements which handle media in the machine. In addition, the MP maintains information concerning the number of documents stored at various locations and the identification information which corresponds to the<br><br>
various stored documents. The MP also functions to detect media jams and other problems, and operates to attempt recoveries. The MP detects the trailing and leading edges of documents which move through the system. It also verifies events for time, source, order and validity in a manner which is later described.<br>
The MP controls the MCs to perform recoveries in certain circumstances and reprograms the MCs when necessary. The MP retrieves limited data logs maintained in the MCs and stores the information in its associated non-volatile memory. The MP also operates to detect failures of an MC and to reset MC time stamps when necessary.<br>
The MP communicates with the TP and performs all of the activities necessary to carry out the TP instructions. The MP generally operates to finish all operations associated with a current transaction before beginning to fulfill a new transaction request from the TP. For example, after a collection of documents has been successfully delivered or accepted from a customer, the MP must perform other operations such as data log transfer from the MCs before the next transaction can commence. The MP operates in accordance with its programming to assure that these functions are carried out.<br>
The MP also operates to coordinate the movement of media between the devices controlled by the various MCs. This includes the movement of documents from the central transport to the remote transport segments associated with the MMRs and vice versa. The MP also provides the system clock for controlling the coordinated movement of the documents through the devices, and provides the necessary communications between the MP and the TP as well as from the MP to the MCs. As will be appreciated, in the preferred form of the system, the MCs only communicate with the MP and not with other MCs or the TP. Likewise the TP only communicates with the MP. This approach assures that the communications are effectively routed and the system processes documents quickly and effectively.<br>
In accordance with the architecture of the MP used in the preferred embodiment of the invention, the MP controls the flow of each note, document<br><br>
or other piece of media within the system without regard to media which may be preceding or following the particular piece of media. Rather, the operation of the system controls and tracks the movement of each piece of media to achieve the desired routing thereof within timed parameters. The MP accomplishes media movement by moving the media through locations. Locations serve as document holding areas for holding one or more documents, either on a short term basis as in the case of the escrow area, or a longer term basis such as the storage areas in the recycling canisters. Locations are defined as either a control point or a sense point. A control point is an element where some physical action takes place. A sense point is an element that gives some information about a document's position within the system. Control points direct media to its destination while sense points move the media toward its destination. A gate is an example of a control point and a sensor is an example of a sense point. For purposes of this disclosure all devices which serve to move or direct documents are referred to as document handling devices.<br>
In the preferred embodiment every control point and every sense point in the recycling mechanism has a reservation queue. The reservation queue indicates the order in which documents will pass a particular point. The reservation queue is a FIFO ordering of all the documents destined to pass a given point. The reservation queues must have the correct order to work correctly. The system insures order integrity by carefully watching document movements within calculated timing constraints.<br>
Each control point along a path that a document is to follow knows what state it should be in to direct the document correctly. For example, a gate may have the states of "in" which directs a document to or from an associated canister delivery transport, or "through" which enables a document to proceed straight through a remote transport segment. Once a document passes a control point, the control point queries the next document to pass it and changes state to accommodate it. In general, if a sense point is associated with a control point, it passes the sense event to the control point. It is then the<br><br>
control point's responsibility to decide what to do and when to do it. A sense point is generally the leading or trailing edge of a document. In summary, each control point has the knowledge of what to do and when to do it in order to direct the next document along the path to that document's destination, and this knowledge is derived from the reservation queue.<br>
The architecture of the MP allows any object to communicate with any other object. These communication messages form events which drive the system. Events comprise both media and map point events, for example lead edge, trail edge, dispensed, etc., and system events such as start accept, hold, reset, etc. Objects send and receive abstract message forms to other objects. Objects interpret the messages based on their source and content. Some source examples are the TP, the MC or a specific MP object. Content depends on the source and message ID. This architecture allows any object to receive a specific map point message caused by a unique physical document. The preferred architecture also treats all messages as object to object even if eventual message destination is another processor such as the TP or an MC. The physical layer differences are transparent to the client.<br>
The MP has several class categories which group one or more similar classes. These class categories and their relationships are schematically represented in Figure 71. The EDT commands class category schematically indicated 700, processes and dispatches commands to the devices connected to the MCs. EDT commands dispatch commands to EDT modules 702 and receive notification when documents have completed their moves. EDT commands 700 also maintains a synopsis of the command execution for later usage and to provide the TP with the end result. This class category also has switching duty for all communications with the TP.<br>
The EDT commands class category maintains the overall system status, dispense status and accept status. It validates commands considering the current system status, and rejects those commands that it cannot process. EDT commands also verifies command and parameter inputs from the TP. It<br><br>
handles locally the interface errors and hard errors that result from communications faults.<br>
The classes within the EDT commands class categories include interface classes. The interface classes interpret and process TP signals representative of commands, provide the results of commands, manage the document dispense sequence, track completed document moves and disable the system when the document movement is completed.<br>
EDT commands further includes deposit results class. The deposit results interpret the messages which indicate that document transit is complete, stores the results, and processes the results into a document movement response to the TP. It also maintains a synopsis of media movements and collates the media movements into their constituent parts. The deposit results class adds a new entry to the results for each document that reaches its destination and saves a transit record for that document. The EDT commands also includes a status class. The status class stores the state of the system and retrieves the state of individual elements. The status class also determines whether a potential document movement is possible. If such movement is not possible, it may reject a command.<br>
EDT commands also includes a withdraw results class. This class interprets the TP withdraw message and provides the withdraw sequence. The withdraw results class also stores the results and processes the results into a TP media movement response. A synopsis of document movements is maintained and collates document movements into their constituent parts. The withdraw results class also verifies the actual media results against what was expected and supplies supplemental messages to complete the TP withdraw message if the results do not conform to what was requested.<br>
In the course of a withdrawal transaction, EDT commands 700 issues dispense commands to EDT modules 702 without considering any possible interference situations from previous dispense commands. EDT modules operates to check for interference from other modules and inside the current module. This enables EDT modules 702 to perform any module preparation<br><br>
during the interference time. As a result, documents are dispensed as soon as any interference clears. EDT modules 702 return a systems event (dispense complete) to EDT commands 700 and disables the location where the dispense is complete. The dispense complete system event triggers EDT commands 700 to issue the next dispense command in the sequence. Each media instance will report a system event (media home) to EDT commands upon reaching its destination. EDT commands will use this information to complete the transaction, update the results, disable the system and report to the TP.<br>
Since EDT commands can send dispense commands without interference considerations, the EDT modules class category 702 must determine when it can begin processing the next dispense. To accomplish this, EDT modules 702 operates to wait until the last media from the previous dispense command has entered the remote transport segment and is moving vertically towards the CT. EDT modules 702 register for the "clearance event" from the module at the interference slot. An event message schedule delivery option after the event insures proper media spacing. Thus, EDT modules 702 will receive the event when it needs it, not exactly when it actually occurs.<br>
The EDT commands class categories and EDT modules class categories also interact when documents move from the escrow position of the input/output area 50 and are deposited into the storage areas of the machine. EDT commands 700 calls EDT modules 702 to get the document stack into the UDC (unstack-deskew-center) devices. Then EDT commands 700 issues the deposit command to EDT modules. Each media instance reports a system event (media home) to EDT commands upon reaching its destination. EDT modules return a system event (accept complete) to EDT commands and performs station disables when the last document reaches its destination based on the identification of the document by the CVCD. EDT commands then calls EDT modules to disable all modules when the last systems event is received indicating that the last document has been received.<br>
Another example is the operation of the EDT commands and EDT modules when the machine is operated to have the machine identify<br><br>
documents deposited by the customer and to hold them in escrow until the customer indicates that they should be deposited. The EDT commands 700 sends commands to EDT modules 702 to move the media stack into the UDC. To move the entire stack to the escrow location, EDT commands issues an "escrow all" command to EDT modules. EDT modules only enables the module controller for the central transport after each document is identified by the CVCD. EDT modules sets the destination to either "accept escrow" or "reject escrow". Each document reports "media home" upon reaching its destination in either the escrow or reject area. EDT commands maintains an account of each document in accept escrow and reject escrow. The modules are disabled while waiting for the customer to acknowledge the transaction. EDT commands then sends the result to the TP.<br>
If the customer confirms the amount and indicates that they wish to have the documents deposited, the system returns the reject notes in the manner previously described and the media stack is moved to the UDC. The accept behavior is now followed. If however the customer cancels, EDT commands 700 directs that all notes be returned. The documents returned include those in the reject area and those acceptable notes held in escrow. The MP controls these actions in accordance with the signals from the sensors in the input/output area.<br>
EDT modules 702 has responsibility for controlling the system during normal activity. EDT modules 702 build a representation of themselves from individual module elements. Module elements are sensors, gates and stations the documents traverse in the system. Each module prepares itself for a transaction and insures that all module requirements are met for proper operation. In the preferred embodiment there are two module types, CT and the MMR. The EDT modules class has responsibility to enable all modules in the system at the start of the transaction. It also knows the specific interface to each module element such as an MMR bin or gate. This holds for both send and receive interface messages. This class category controls the entire module<br><br>
including the bin and gate physical element actions. It is also responsible for controlling the sensors.<br>
EDT modules create module elements that represent the physical modules. Each module element has slot and station numbers to identify its position, as well as its type, i.e., gate, location, sensor, etc. Each module element has exclusive interface knowledge to its physical counterpart. This allows the send and receive messages to be handled in one context as opposed to splitting them across class categories.<br>
EDT modules 702 maintains various lists and sequences. Reservation and event sequences which are later discussed in detail, set up the system for each document movement.<br>
The EDT modules class category 702 also contains a map which serves as a guide to navigating the devices through which documents may pass. Just as a driver uses a map to get to a destination, so do the documents. The document objects traverse the system through the use of a virtual map. The map is a software representation of the physical order of the EDT modules and module elements. Instead of a physical entry being at each location, there is a software representation that houses information about the state of the module element. In software terms the map is a linked list of indirectly referenced objects that are unique to each module they represent. The map itself is comprised of these elements, gates, locations, transports and sensors. As graphically represented in Figure 72, each module is a given slot number starting with the CT at slot zero. The slots increase with movement down the module stack into the MMRs and decrease with movement above the CT. It should be noted that as indicated in Figure 72, the slot numbers are negative above the CT and the vertical transport station which comprises the remote transport segments is assigned station zero. The stations which are above the central transport in Figure 72 are positions for additional modules in the architecture and are not used in machine 10.<br>
The station numbers start at zero indicating the vertical transport which comprises the remote transport segments. The station numbers increase with<br><br>
movement away from the vertical transport. For example, each MMR has five stations. These begin with zero for the vertical transport at the remote transport segment and number one through four corresponding with each of the storage areas or bins with movement away from the vertical transport.<br>
The virtual map stores and organizes for the system status and element data which indicates whether certain elements are okay, failed, full, empty, etc. It may also indicate conditions such as bins or notes that are stuck, distance and position. The map also holds counts of media transactions, doubles and retries. The map is used as an information warehouse to organize and understand the state of module elements. Typically when EDT modules 702 receives a message from an MC, it uses the address data, sensor or bin number, to locate the corresponding module element. The module element contains counts and lists which allow modules to track activity and state.<br>
The virtual maps created by the EDT modules class categories are represented in Figures 73 and 74. Figure 73 shows a virtual map corresponding to devices in the central transport. Virtual element 710 corresponds to the devices which serve to unstack, deskew and center documents in the central transport. Virtual element 712 corresponds to a transport section which transports the stream of documents to the document identification device (CVCD) which is shown as a virtual element 714. Documents then pass through a virtual element 716 which corresponds to a transport which moves documents to a virtual element 718 which corresponds to a sensor.<br>
A transport represented by virtual element 720 is connected to a virtual element 722 which corresponds to the CT gate which directs documents in one of three directions. Virtual element 722 is connected to element 724 which corresponds to a transport to an escrow accept area represented by virtual element 726.<br>
The central transport gate represented by virtual element 722 is also connected in the virtual map to element 728 which represents a transport which leads to the reject area or reject escrow represented by element 730.<br><br>
Likewise, the gate of the central transport may also direct documents into the vertical transport comprised of remote transport segments 108, 110, 112 and 114. This is done through a device which is represented by virtual element 732 in Figure 73.<br>
Virtual element 734 in Figure 73 represents a transport which carries documents from the remote transport segments into the central transport such as during a dispense transaction. It should be noted that although the same physical transport is used during deposit and withdrawal transactions, the same physical element is represented by two virtual elements.<br>
Figure 74 is a representation of a virtual map for an MMR. It includes a virtual element 736 which corresponds to a sensor adjacent to a gate represented by virtual element 738. A transport corresponding to a remote transport segment is represented by virtual element 740.<br>
The physical elements associated with the recycling canister and a canister delivery transport are represented by virtual element 742 which corresponds to a transport adjacent to the gate. Each of the four bins in the recycling canister have three virtual elements associated with devices therein. Only two of the four bins or storage areas are shown in Figure 74. Virtual element 744 corresponds to a transport section of the canister delivery transport. Virtual element 746 corresponds to a sensor adjacent to a bin and element 748 corresponds to a bin. It will be appreciated that the control of the system through the use of virtual elements, the operation of which is controlled at a detailed level by tasks within an MC, greatly reduces the complexity of the classes at the TP and MP levels needed to control the system operation.<br>
The modules within the EDT modules class category 702 include a destination selection class. This class selects a deposit destination based on a document's identity and various heuristic control parameters. The destination selection also determines end points for reservation sequence and event sequence construction. This class also selects a destination for documents which have a problem during dispense, such as doubles.<br><br>
Locations use destination selection to determine the midpoint for the respective reservation sequences. The midpoint defines the end of the dispense sequences and the beginning of the accept sequences. Each location in the module stack also registers the document identifying data used by the CVCD to indicate the documents it can receive with this class. Destination selection puts the class into a collection of possible receipt points for each type of document.<br>
The CVCD invokes destination selection with the resolution of a particular template identifier. Destination selection then looks in its collection of possible destinations to find a suitable storage area. If no item can accept it, the media is routed to reject or divert depending on the mode settings.<br>
Destination selection also contains a helper class called destinations. Destinations is a collection of module element references to all possible stack locations where media could be deposited. Destination selection contains an array which is sized to the number of templates each referencing a destinations class. When a particular template ID is found, destinations selection indexes the array and queries the collection of module element references to find the best deposit location.<br>
EDT modules 702 also includes an event sequence class. The event sequence class builds the event sequence from a given module element to another module element. It also operates to manage the events list. The events sequence class builds and stores an event sequence for a client. The operation serves to copy this sequence to a specific document instance for reference during transit. The event sequence is a series of event objects put together in a chronologically ordered stream.<br>
The event sequence builds itself by starting at its source and traversing the system through the intermediate document handling devices to a desired destination. The event sequence class creates an event for each module type element and places it in the sequence. The module element class provides the system navigation. After the event sequence is built, this class calculates interevent times between sensor events from their distances. Locations have<br><br>
their interevent times built in since they are more dependent on the mechanism rather than distance.<br>
Each location has one or two event sequences. For example, unstack-deskew-center (UDC) has only a dispense event sequence. In contrast, an MMR bin has both dispense and accept event sequences.<br>
Each event sequence when viewed alone covers only a part of a document's movement. An MMR bin event sequence is from the bin to some point beyond when the CVCD results are available (the escrow gate sensor) at which point a decision is made as to a final destination of media. Transfer of the document to a final destination involves a further event sequence which is added to the original event sequence to direct the rest of the document's movement. The event sequence class adds the new sequence and makes a timing adjustment at the addition point. Partial event sequences relieve the need to edit the event validation object from the media tracking class 704 when the original desired destination of media is incorrect.<br>
The reservation queue class of EDT modules uses the media reservation queue as a key to document instances as documents traverse the system. As events occur on module elements they consult the reservation queue to see which media event is expecting this event. The module elements know what event triggers them to remove the media from the queue. This is usually the trailing edge event for sensors and gates and the dispense/accept event for locations.<br>
The reservation sequence class of EDT modules builds and stores a reservation sequence for a client. Once built, the client can invoke methods which reserve module elements along a document's path to a destination. Each reservation causes the document reference to be added to the module element's reservation queue. As documents pass a module element, the document reference is "popped" from the queue and used to resolve the proper interobject communication handle to forward events.<br>
The reservation sequence builds itself by starting at its source and traversing the system to the desired destination. The module elements decide<br><br>
whether they are to be included in this sequence and know which element is next along the path to the destination. The module element class provides system navigation.<br>
Each location has one or two reservation sequences. The unstack-deskew-center (UDC) has only a dispense reservation sequence. An MMR bin has both dispense and accept reservation sequences. Each reservation sequence when viewed alone covers only a part of a document's movement. An MMR bin reservation sequence is from the bin to a point where the CVCD results are received. At this point a decision is made as to the final destination of the document. The final destination contains another reservation sequence which completes the reservations to cover the rest of the document's movement. Partial reservation sequences relieve the need to delete the reservations from module elements when the original desired destination of media is incorrect. In the preferred embodiment of the invention the capability to "unreserve" is provided. For example, this may be necessary when a location expects media to be dispensed and it is not. The UDC empty response is an example of this scenario.<br>
The module manager class of EDT modules 702 acts as a client interface to control EDT modules. It coordinates activity between modules while enabling operating and disabling modules in response to operation requests with completion events. The module manager also includes a helper class called station withdraw. Its job is to aid the module manager in managing the current and pending dispenses. Station withdraw also forms and sends the withdraw messages to the modules.<br>
The module element class of the EDT modules plays a primary role in building the reservation sequences and the event sequence. They know whether they should be included on a given reservation sequence and their type determines what entries, if any, are needed on event sequences.<br>
Module elements also know how to navigate the system to a given point. They follow general rules based on slot and station numbers to get to a specific location. The navigation method is virtual and subclasses such as<br><br>
gate, override this method in special cases. For instance, gate has a third module element reference to its switchpoint and navigates to that point when entering a module's slot.<br>
The module elements correspond to the physical elements and include a CVCD module element class. The CVCD enables and disables the element and verifies responses for timeliness and validity. The element preferably does the counterfeit detection and currency validation functions during the accept mode and currency denomination function only during a dispense. The response from the CVCD is a template ID and some additional confidence data. The CVCD also supplies a lead edge event which is sent to media tracking 704 as a lead edge and a trail edge event, as media tracking expects both lead and trail events for each sensor. The CVCD interprets the data and decides whether to route the media to a storage or other location for valid media, or reject it. The CVCD also detects doubles and media skew angle. The CVCD considers these factors as it decides whether a document is valid or allowable. The CVCD uses destination selection to find a location corresponding to the document status, i.e., normal, double, force, reject, etc. The CVCD updates media tracking with a template ID skew angle and any other pertinent data, and uses the final destination to complete media tracking events sequence and the required reservations.<br>
A gate module element class is an abstract class which models the behaviors common to all gates. Solenoids controlled by MCs control physical gate elements. The gate class contains solenoid data and initializes MC control parameters.<br>
Each gate is associated with a sensor. The sensor forwards events to the gate. The gate interprets the event, consults the reservation queue and changes its state to direct the next media along the path to its destination. The gate has the knowledge of when to send the MC message based on the current media size and the next media size. If the action is to be taken after some delay, the gate schedules the MC message to be sent after the delay. Otherwise the MC message is sent immediately.<br><br>
The gate bases its state decision on how to direct the next media to pass. In situations where there is no next media indication on the reservation queue, the gate changes state for that media immediately. The very first document in the transaction is an example of this scenario. The gate knows to change state for the next media when the current media is clear of the gate. If there is no current document or media to wait for, then obviously there is no need to wait. Therefore when the gate receives a reservation for media and the reservation queue is empty, the gate changes state for that media immediately.<br>
The gate class operates to remove media from the reservation queue when it receives the trailing edge from the sensor. There are two concrete subclasses to the gate class. This is CT gate and vertical transport gate. Each overrides virtual methods in gate to implement these special cases.<br>
A location class is an abstract class which models the behaviors common to all locations. A client enables/disables locations for dispense or accept. Locations sequentially dispense a number of documents or asynchronously accept documents.<br>
Each location builds its reservation and event sequences according to its special needs. For example, the last sensor in the accept event sequence to an MMR bin does not generate an edge event. When a bin is enabled its sensor is used for media accept detection and not for edge detection. The location knows this and builds its sequences a little differently. It builds from the point just beyond its sensor to the midpoint and then from the midpoint to the point just beyond its sensor. It then adds the dispense or accept sequence as needed. The same example holds for the first sensor in the dispense sequence. Each location knows what special rules govern the building of each sequence. This is how the unique features and rules of the modules and module elements are reflected in the event sequence.<br>
An escrow class serves as a concrete class for the "accept escrow" and "reject escrow" stations. The CT instantiates this class twice, once for the accept escrow and once for the reject escrow. The only difference is the station number. Escrow has one reservation sequence and one event sequence,<br><br>
both from the midpoint to this module element. CVCD invokes the complete media accept method which sets media's destination at the event sequence that makes the reservations for media.<br>
The process message method simply interprets the accept message, removes the next media from the reservation queue and sends the media the event. Escrow also keeps a transaction count of the number of accepted media and whether it is empty.<br>
An MMR bin class controls all the storage locations in the machine. The MMR bin enables and disables the element and verifies responses for timeliness and validity. To verify the MC response, the MMR bin schedules a call back to a time out method. When the command response is received, the call back is cancelled. If the time out method executes, the MC has not responded in the allotted time and a recovery action is started.<br>
MMR bin also has two event sequences, one for deposits and one for withdrawals. The withdrawal sequence defines the events media tracking expects from this bin to the stack. The deposit sequence defines the events media tracking expects from the CVCD to this bin.<br>
The bins enable or disable themselves on the destination of the next media. If this is the next media's destination, the bin is enabled. Otherwise, it is disabled. The MMR bin is associated with a sensor which has reservation queue of all the media to pass that sensor. The sensor forwards events to the bin and the bin decides what its next state should be. These states are "in" for directing media into the bin, or "through" which enables the media or the documents to pass by. If the action is to be taken after some delay, bin schedules the MC message to be sent after the delay. Otherwise, the MC message is sent immediately. The MMR bin adjusts the time out value to compensate for a delay in message delivery.<br>
The MMR bin class bases its state decision on how to direct the next media to pass. The question is what to do if there is no next media in the reservation queue. The very first media in the transaction is an example of this scenario. The bin knows to change state for the next media when the current<br><br>
media is clear of the bin. If there is no current media to wait for, then obviously there is no need to wait. Therefore, when the bin receives a reservation for media and the reservation queue is empty, the bin changes state for that media immediately. The bin removes media from the reservation queue when it receives the MC accepted message. When the MMR bin class operates to dispense a document, the bin waits for any previous dispensed media to clear and then enables itself. It gets and initializes a media instance, releases the media and finally commands the MC to dispense some number of media. The MC sets the gap and reports as it dispenses each media. As the bin receives each dispensed message, it interprets the dispensed message as to status of the media. The bin updates media with this status (which is usually normal) and forwards a dispense event to the current media on its reservation queue and gets and initializes the next media. After the last dispense the bin disables itself and sends a completion event to the client.<br>
Media initialization entails setting physical parameters and source and destination references. The bin also sets media trackings events sequence and makes the appropriate reservations. All the initialization is complete before the bin releases media. The bin removes the media from its reservation queue when it receives the dispense message.<br>
The module elements further include a sensor class. At the start of a transaction all sensors are enabled to sense media. The enabling and disabling of sensors is handled by the MC as part of the module control. Each sensor element contains the knowledge of what to do to watch for a given transaction. For example, on dispense a sensor may watch for trailing edge only, while on accept it may enable for leading and trailing edge detection. At the end of a transaction the sensors are disabled or go into an infrequent watch mode to look for foreign objects in the transport.<br>
During a transaction the sensor class receives messages and judges their validity to determine if the message data is correct. The sensor class also has a reservation queue containing an ordered list of media documents to pass by. The sensor consults the reservation queue for the media causing the event<br><br>
and the next expected media. If this sensor has a relationship with a control element, the event is forwarded to the control element. Next the event is forwarded to the media causing the event for interevent timing checks and positioning. Finally, the sensor updates the reservation queue.<br>
The sensor also includes a recovery method when media tracking determines it has missed an event. The sensor pretends that the event has occurred. It does everything it would normally do, queue, control point, etc., but does not send the edge event to media since media tracking has already timed out on the sensor.<br>
The modules also include an unstack-deskew-center (UDC) class. The UDC is enabled and disabled as part of the module control. The UDC also issues the dispense message command to begin depositing media. The MC controls the unstack-deskew-center functions locally including setting the intermedia gap. The MC will continue unstacking, deskewing and centering until all media is exhausted or it is told to stop. As each dispense message is received, UDC interprets the message and updates media with data from the unstacked-deskew-center operation. It then forwards a dispense event to the media. The UDC also analyzes the input and output values for skew and center and applies any necessary offsets. It also uses the skew angle as center data seen by CVCD to adjust the deskew-center operation.<br>
The UDC class is not used during withdrawal transactions. This is because during withdrawals documents do not pass through the portion of the central transport which involves unstacking. The UDC also executes the pause-recover-resume sequence when the MC indicates it has a problem. The UDC requests notification when the last media is safely out of the way, executes the recovery and then resumes the dispense.<br>
A transport class is also provided. This class stores and provides access to a specific transport section. This class serves as the concrete class which models the length and physical nature of the various transports which handle documents.<br><br>
A module class serves as an abstract base class for all specific module classes and provides a means to move from module to module in both the accept and dispense directions. At system initialization, the modules are instructed to build a simulation of their structure consisting of module elements. Each module slot is connected to the other modules forming a virtual map of the system.<br>
At the start of a transaction, the modules enable their transports and send any other necessary elements which affect the whole module. The reverse is performed at the end of the transaction. A control task receives messages from module manager and coordinates its module elements to perform the action requested in the message. A distribution task receives MC messages from the modules' address and the command response class. Thus, the module does not specifically interpret all MC messages.<br>
Module classes do not include the responsibility to control individual module elements. Each module element controls itself. The module class serves to coordinate activity between module elements when preparing for a transaction or stopping after a transaction.<br>
The module classes include a central transport class. The central transport class models the physical CT module. During deposit, the CT class directs the customer stack media accept movement and verifies that the stack has moved to the unstacker. The CT informs the client of the stack acceptance. The CT begins the single media deposit by enabling the module to deposit. The CT commands the UDC to begin dispense. The CT routes MC messages to the stations until told to shut down the module. The stations do most of the work themselves. After the UDC dispenses all media, the module manager commands the module to shut down and the CT disables itself.<br>
In a withdrawal, the CT enables itself and the CVCD for the dispense operation. When all media have completed their movement, module manager commands a shut down of the system which instructs a disable of the CT module. The CT disables itself and sends a completion event.<br><br>
The MMR module class configures the module for deposit and enables the module elements for deposit. During deposit, MMR routes MC messages to the appropriate module element. The MMR disables the module elements at the end of the transaction.<br>
During a withdrawal, MMR class configures the module for withdrawal and enables the module elements for withdrawal. Each bin dispenses in sequence and informs the module after the correct number of media are dispensed. The MMR disables the module elements at the end of the transaction.<br>
The module class further includes a stack handling class. Stack handling accepts media from a user and then presents the stack to the UDC. Stack handler accepts media from the accept escrow location and presents it to the customer. Stack handling also processes module controller messages from the central transport which routes documents to the stacks in the input/output area of the machine. Stack handling also insures that the gate is closed after accepting or delivering a media stack to a customer.<br>
The EDT modules class category 702 further includes transport control classes. The transport control provides an interface to control transports within the machine. The class further forms and sends transport messages or signals to the MCs and interprets the transport on response. The EDT modules classes use this class to enable and disable transports in the system.<br>
The media tracking class category 704 operates to model every piece of physical media on the MP with a proxy. The proxy is the main class of the media tracking class category. This category maintains each media's position, identity, source, destination and timing information along with several other items. Media tracking has the responsibility to house all the pertinent information about all media traversing the system. Each instance of media tracking also owns an event validation object to verify events received while moving around the system.<br>
Media tracking sends events when it reaches its destination or it detects an event problem. It keeps a media list for recycling a finite number of media<br><br>
objects after each completed move. This list also serves to identify which media items are actively moving, which are ready for a new assignment and in what order they are released. This is essentially a dispense order.<br>
Media tracking involves an "event check" on each event message received. An event validation object checks the event and takes any given event action. The event validation object provides media tracking with the next event expected time. This is how event time outs are detected. When an event time out occurs, media tracking notifies transaction recovery classes which determines a course of action. Media tracking stops using the event validation object when it has reached its destination. Each media instance tracks a physical piece of media (i.e., document) anywhere in the system. EDT modules stores a unique event sequence for each movement in the system as previously discussed. This event sequence is copied to media tracking's event validation prior to releasing media. This allows each media instance to track any physical media from any point to any other point within the system with no impact on the media class itself.<br>
EDT modules class category is responsible for getting a media instance and performing the necessary initialization. It builds and stores the appropriate event and reservation sequences which allow media to get to a destination and verify its journey. Finally, EDT modules copies an event sequence for media tracking to use, releases the instance and sends the command to dispense the physical media. Media is released first since the physical media may generate a sensor event before the actual dispense event is received. This insulates the system from apparent out of order events that are dependent on the media's dispense location. Media tracking is responsible for receiving and sending system events, processing events from the module elements, checking timing and updating media positions. The events sequence contains all the information for media tracking to process events, timing, the next module, element position and other information.<br>
During document movement EDT modules forwards events as messages to the media instance. These "media events" also allow EDT<br><br>
modules to set important values based on the event messages such as the skew angle, center data, document identifier template and size.<br>
Media events are the means by which EDT modules and media tracking collaborate to insure that movement is proceeding as expected. Media events are basically messages from EDT modules to media tracking that contain information about what, where and when events are happening in the system. It is also a means by which the system detects a potential problem or suspect condition. Basically, media is routed by following a stream of events that should occur during its movement.<br>
The EDT modules has the event sequence objects which contain events one expects while enroute from one module element to another. Media tracking contains event validation objects which copy an event sequence and validate the events as they are received from sensing devices that sense documents or other conditions.<br>
Events can fail in either time, identity or source. An event can be too early or late or it can simply be the wrong event. Media position is checked based on a difference in time from the last known reference point which is a previous event. The event identity defines things such as a trail edge dispensed or accepted as corresponding media traverses a system. Of course, the event can come from an unexpected position as well, indicating that something has been misplaced.<br>
A listing of media events which occur within the system and the actions that are taken in response to media events are indicated in the table shown in Figure 75. Of course, in other embodiments of the invention other events and corresponding actions may be used in connection with the movement of documents.<br>
Event validation has responsibility to know the format of all EDT modules to media tracking event messages, how to compare those messages to the stream events and how to validate the event in terms of time and place. Media's position is updated based on the specific event data.<br><br>
EDT modules presents the events stream from the source to the midpoint somewhere after the CVCD. CVCD uses the destination to complete the event stream during the results processing. This also allows events to perform specific module or event location actions. For example, the events contain information on how to update media's position. Events may also carry some information which is used in performing transaction recovery of what to do when the event fails.<br>
Referring to Figure 71, the transaction recovery class category is schematically indicated 706. This category is accountable for module level and system level media error recoveries. Transaction recovery has the responsibility to look at the system, determine the probable areas and select and execute a suitable recovery. The input to a recovery is some unexpected behavior and an unknown media state. The outcome of a recovery is a system in a known state ready to continue a current transaction, or a degraded or completely inoperable system.<br>
Transaction recovery operates as an entirely separate context. It assumes system wide control until the error is resolved. Transaction recovery uses media tracking to determine the locations of documents and current state data. Once media tracking detects an apparent problem it notifies transaction recovery with this information such as an erroneous or missed event. Transaction recovery classifies the problem and decides how to proceed.<br>
Transaction recovery also communicates with EDT commands 700 to indicate a recovery is in progress and EDT modules 702 to indicate it is now in control. Transaction recovery uses EDT modules as an interface for control and notification. The EDT modules no longer performs autonomous actions, but rather is relegated to transaction recovery in this mode. Error recovery is only executed when safe in terms of entire transactions sequence. Transaction recovery preferably allows the transaction to continue until it is safe for it to start executing. This may include delivery of non-error media to its destination, halting further operations or stopping certain horizontal belt sections. Transaction recovery has responsibility for handling most hard<br><br>
errors, out of order events, missed events, MC communication faults, media jams and other failures.<br>
During a recovery, EDT modules presents an atomic module control interface. Transaction recovery then does very special actions which are outside the normal EDT modules operating context. The current module state helps determine what the problem is and what recovery to execute. During recovery EDT modules forwards all event messages to transaction recovery instead of media tracking.<br>
Prior to executing a recovery, transaction recovery directs EDT modules to refresh the state of all its module elements. Some module elements schedule MC messages for future delivery. If the recovery occurs in this time there is a potential state conflict. Polling the module elements insures that the state presented to transaction recovery is the actual one which exists in the system.<br>
Transaction recovery also consults media tracking to get media positions in the system. It will halt some media and allow others to continue to their destination. Media track instances provide transaction recovery with media, position, size, identity and event timing information necessary to make a decision about the problem and the recovery to execute. Once the recovery is complete, transaction recovery will reset all media track instances halted during the recovery. This presents a known system state so the transaction sequence can continue. Transaction recovery preferably does not use media track instances to watch media move during the recovery.<br>
As represented in Figure 71, the class categories which reside in the module processor also include EDT logging, schematically indicated 750. The global EDT logging category is used for all types of data logging, message tracing and user event recording. Logs exist for each MC, TP/MP communications, MP/MC communications and MP software events. Any active MC data logs are retrieved by the MP after each transaction. The MP saves all active data logs to a mass storage device after each transaction.<br><br>
Interobject communication (IOC) class category 752 is a class category which handles all object to object communications within the MP. Any MP object can send a message to any other MP object that is executing a task. The interobject communications has the capabilities to enable objects to talk to one another. The sender of the message specifies which object is to receive the message and IOC routes the message to the recipient. The IOC also allows objects to talk to other processors such as the TP or MC.<br>
The IOC manages the internal differences of how to talk to other processors. All messages to an IOC receiver are placed on the same input queue and are of equal priority. Clients do not register for messages from other MP objects. The sender is responsible for knowing the receiver's IOC identifier. However, receivers of messages from other processors must manually register their IOC identifier for the addresses from which they wish to receive. This allows multiple objects to receive messages based on message class from other processors. The IOC maintains a list of each MC, its assigned address, slot identifier, module type and other information.<br>
To send a message to a particular object, the sender gets the receiver's IOC handle and forwards the message to it. Each object or task which intends to communicate through the IOC has an IOC handle. Clients use the IOC to converse with other MP objects. The relationship is created by the client through creating a receive queue instance and using it to wait for input. The IOC gives clients messages for sending. After interpretation the client returns messages to the IOC for reuse by another object.<br>
The MP class categories also includes error handling, schematically indicated 754. In Figure 71 the global error handling class category is used by the MP software for processing all soft errors. Error handling requires knowledge of the current system state and in some instances may wait for completion of other processing. This category contains the assert routines used when a soft error is detected.<br>
The start up and shut down class category is schematically indicated 756 in Figure 71. This category possesses behavior and knowledge which<br><br>
enables it to get the system to a known state of power up. It also gracefully shuts down the system when required. Start up includes booting each MC, downloading applications and invoking start up classes of the other class categories. Shut down covers uploading any non-volatile settings and placing the machine in a secure state.<br>
Although the class categories shown in Figure 71 are used in the preferred embodiment, other embodiments of the invention may use other arrangements. The function performed by class categories may be carried out in other processors or at other levels in the transaction hierarchy. Other embodiments may also include additional or different class categories.<br>
A fundamental advantage of the preferred embodiment of the present invention is that the classes enable the development of an event sequence and a reservation sequence associated with the routing of each document that is moved in the system. This provides for the creation of reservation queues in each location, which are used to monitor movement of documents and direct them appropriately. This approach enables handling of the document by the physical document handling devices in the system concurrently and without the need to wait for each document to reach its final destination before beginning another document movement. In the preferred embodiment of the invention the TP delivers its document delivery instructions so as to build a document stack for delivery to the customer. This enables the TP to select the order in which the documents are to be stacked. This may be important to some users such as merchants that desire to have documents presented in a particular order. In alternative embodiments, the machine may include separators in a storage area, the dispense of which may be controlled similar to other documents so as to separate particular types of documents such as denominations of notes. Such separators may be dispensed in a manner similar to other documents handled by the machine.<br>
Alternatively, the TP may operate to minimize transaction processing speed without regard to providing the document stack with any particular document order. In this case the TP may send dispense messages in a manner<br><br>
that causes documents to be dispensed from storage areas which are closest to the central transport and then moving progressively further away from the central transport. In this manner documents began reaching the central transport more quickly. Documents which must begin moving further away may enter and join the stream of documents following on those preceding documents . The particular approach used will depend on the programming of the TP and the needs and requirements of the particular customer operating the machine.<br>
As schematically indicated in Figure 63, the module controllers 554, 556, 558, 560, 562 and 564 all communicate on the MC communications bus 566. The MCs communicate only with the module processor and not with one another. The MCs also control devices 567 through appropriate interfaces.<br>
The MCs include programs or tasks which control the associated devices. The tasks are generally fairly simple processes that are frequently repeated in the normal course of operation. Tasks are state machines in the preferred embodiment and can be initiated or interrupted by messages from the MP or another task. A software environment in an MC is schematically indicated 758 in Figure 76. MC 78 is shown operating five tasks therein schematically indicated 760, 762, 764, 766 and 768. It should be understood that the tasks operating in the MC change during the course of operation of the MC as do the number of tasks concurrently running.<br>
An example of the operation of an MC is indicated schematically with reference to the MC software flow associated with the central transport which is represented in Figure 77. Figure 77 shows tasks which run in the MC as a function of time during the course of handling a stack of documents. It also indicates the source of a signal or message which causes a task to be initiated. A module status task 770 is the first task shown in Figure 77 which is initiated in the MC from an MP message. This task is associated with receiving a stack of documents from the customer. The module status task returns a message back to the MP which then initiates a task indicated 772 in which a stack of documents is accepted from a customer. This task then initiates a task 774 in<br><br>
which the elements of the machine are operated to secure an input stack between the transport belts in the input/output area 50 of the machine in the manner shown in Figure 4.<br>
The MP then initiates a task 776 in which the stack is moved and thereafter a task 778 which enables the module. The module enabled then enables a stack task 780. The MP also initiates an export on task 782 and an unstack task 784.<br>
As can be appreciated from the foregoing description of the unstack, deskew and centering operations, the unstack initiates a pre-center task 786 which moves the shuttle to catch a document that has been unstacked. The pre-center task then launches the deskew task 788. The deskew task in turn initiates the centering task 790 in which the shuttle centers the deskewed note in the transport. Thereafter the centering task initiates a release note task 792. The release note task initiates the repetition of the unstacking cycle in the unstack task and the process continues to operate the document handling devices until all the notes are unstacked.<br>
After unstacking, a module disable task 794 is initiated by the MP as is an export off task 796. It should be appreciated that in performing these tasks communications are exchanged with the MP so that the MP may coordinate the transport of the documents. The MP messages are not shown, other than the MP messages which initiate a task. The capability of the MC to carry out these various tasks and control the associated devices enables the MP to concentrate on coordinating the document movement activities.<br>
As can be appreciated with regard to tasks 784, 786, 788, 790 and 792, tasks which run on an MC are often interdependent. As shown by these tasks, a task may be initiated in response to a change of state which occurs in another task. In conventional transaction processing systems, once a change of state has occurred so as to initiate a follow on task, the follow on task will continue to completion. However, in the preferred embodiment of the invention where documents are moved concurrently, the conventional approach is generally not acceptable. This is because with plural documents moving concurrently as is<br><br>
necessary to achieve higher transaction speed, a change in state back to a prior state or further state may occur after a subsequent task is initiated. A failure to take appropriate action to discontinue or otherwise modify a task after it has been launched may result in an error or failure of the machine.<br>
To deal with the need to process documents concurrently, the MCs of the present invention include a task manager schematically indicated 798 in Figure 76. The task manager in the preferred embodiment comprises an array which includes the then current state of each of the tasks then running in the MC. The state of each task is checked on a periodic basis to determine if a state has changed which would require a change in the operation of a task that is currently running. In the preferred embodiment the task manager checks the states of all the tasks each millisecond. The checking of these states is indicated by a pointer 799 in Figure 76. As will be appreciated, this pointer schematically indicates the cyclical checking of the then current state of each of the tasks.<br>
As the tasks are operated in the MC, the task manager continuously monitors on a periodic basis for any changes in states that may affect the operation of another currently operating task. If a change in state occurs any tasks which were initiated or are otherwise ongoing dependent on the prior state, are modified appropriately in accordance with their configuration to conform to the change which has occurred. For example, in the deskew and centering operation, once a note is centered the shuttle operates to release it. If however a malfunction occurs and the note continues to be engaged with the shuttle, failure to stop the next note until the prior note is released will result in a collision of the notes. If a note is not released, the task manager may notify the task controlling unstack to interrupt its operation to prevent the release of another note towards the shuttle.<br>
It should be understood that this is but one example of a situation where an unanticipated change in state is detected by the task manager and is used to modify another task. There are many other examples in the system which will be appreciated by those skilled in the art. The operation of a task<br><br>
manager in each MC enhances reliable operation of the system and enables the system to tolerate unexpected events. It should be understood that although the principles of the present invention have been described to a three tier arrangement of processors (TP, MP and MC-MCPs) other embodiments may use a different processor architecture. This includes different numbers of tiers of processors and different allocations of activities among the processors. It should further be understood that the designations given to the components and features given to the described embodiment are used to facilitate the description thereof and are not intended to be limiting in terms of the functions that corresponding features and components may perform in other embodiments.<br>
Thus the preferred embodiment of the present invention achieves the above stated objectives, eliminates difficulties encountered in the use of prior devices, systems and methods, and attains the desired results described herein.<br>
In the foregoing description certain terms have been used for brevity, clarity and understanding. However, no unnecessary limitations are to be implied therefrom because such terms are used for descriptive purposes and are intended to be broadly construed. Moreover the foregoing descriptions and illustrations are by way of examples and the invention is not limited to the details shown or described.<br>
In the following claims any feature described as a means for performing a function shall be construed as encompassing any means capable of performing the recited function and shall not be limited to the means shown and described in the foregoing description as performing the recited function, or mere equivalents thereof.<br>
Having described the features, discoveries and principles of the invention, the manner in which it is constructed and operated and the new and useful results attained; the new and useful structures, devices, elements, arrangements, parts, combinations, systems, operations, methods and relationships are set forth in the appended claims.<br><br><br><br><br><br><br><br><br><br><br><br><br>
CLAIMS<br>
We claim:<br>
1.	Apparatus comprising:<br>
an automated banking machine system including:<br>
a plurality of document holding areas, wherein each document holding area is configured to hold at least one document;<br>
a plurality of document handling devices, wherein each document handling device is selectively operative to move a document, wherein each document holding area is in operative connection with at least one document handling device;<br>
a user interface including at least one input device, wherein the input device is operative to receive a user input;<br>
a transaction processor, wherein the transaction processor is in operative connection with the input device, and wherein the transaction processor is operative responsive to a user input to generate a first TP signal, wherein the first TP signal corresponds to moving a first document between a holding area and a document location;<br>
a first module processor, wherein the first module processor is operative to receive the first TP signal and to generate a first reservation sequence, wherein the first reservation sequence<br>
corresponds to moving the first document through the document handling devices between the holding area and the document location, and wherein the first module processor is operative to generate first MP signals responsive to the first reservation sequence; and<br>
a plurality of module controllers, wherein each module controller is in operative connection with at least one document handling device, and wherein the module controllers are operative to control the document handling devices responsive to the first MP signals to move the first document between the holding area and the document location.<br>
2.	The apparatus according to claim 1 wherein the transaction<br>
processor is further operative to generate a second TP signal responsive to the user input, wherein the second TP signal corresponds to moving a second document between a holding area and a document location; and<br>
wherein the first module processor is operative to receive the second TP signal and to generate a second reservation sequence, wherein the second reservation sequence corresponds to moving the second document through the document handling devices between the holding area and the document location, and wherein the first module processor is operative to generate second MP signals responsive to the second reservation sequence; and<br>
wherein the module controllers are operative responsive to the second MP signals to control the document handling devices to move the second document between the holding area and the document location, wherein the second document is moved by<br>
at least one document handling device while the first document is moved by at least one document handling device.<br>
3.	The apparatus according to claim 2 wherein the machine further comprises first and second document storage areas and wherein the first document is moved by the document handling devices between a first document location and the first document storage area, and the second document is moved by the document handling devices between the first document location and the second document storage area.<br>
4.	The apparatus according to claim 1 wherein the document handling devices move the first document from the holding area to the document location.<br>
5.	The apparatus according to claim 1 wherein the document handling devices move the first document from the document location to the holding area.<br>
6.	The apparatus according to claim 1 and further comprising:<br>
a plurality of document sensing devices, wherein each document sensing device is in operative connection with at least one document handling device, and wherein the document sensing devices are in operative connection with the first module processor; and<br>
wherein the first module processor is operative responsive to the first TP signal to generate a first event sequence, wherein the first event sequence corresponds to events expected to be sensed by sensing devices as the document handling devices move the first document, and wherein the module processor is<br>
operative to compare the sensing of the first document by the document sensing devices and the event sequence.<br>
7.	The apparatus according to claim 6 wherein the first module processor is operative to interrupt operation of the document handling devices in accordance with the reservation sequence when the sensing of documents by the document sensing devices does not correspond to the event sequence.<br>
8.	The apparatus according to claim 6 and further including an MP memory, and wherein the module processor is in operative connection with the MP memory, and wherein the module processor is operative to store in the MP memory data corresponding to a current real time location of the first document relative to the document handling devices.<br>
9.	The apparatus according to claim 1 and further comprising a memory in operative connection with the first module processor, wherein for each document handling device the memory includes a corresponding device queue, and wherein each device queue is operative to hold device instructions, wherein the document handling device corresponding to the device queue operates responsive to the device instructions in the device queue, and wherein the first module processor is operative responsive to the reservation sequence to cause device instructions to be stored in the device queues of document handling devices moving the first document, wherein the device instructions are operative to cause the document handling devices to move the first document.<br>
10.	The apparatus according to claim 1 wherein at least one of the module controllers is operative to execute a plurality of tasks simultaneously and to operate at least two document handling devices responsive to the plurality of executed tasks, and wherein the one module controller includes a task manager, wherein the task manager is operative to compare device signals<br>
corresponding to conditions of the document handling devices and to interrupt execution of at least one task when the conditions of the document handling devices are no longer suitable for the simultaneous execution of the plurality of tasks.<br>
11.      Apparatus comprising:<br>
an automated banking machine system including:<br>
a plurality of document handling devices, wherein each document handling device is selectively operative to move a document, and wherein a plurality of the document handling devices are operative to produce condition signals responsive to conditions of the respective device;<br>
a module controller, wherein the module controller is in operative connection with a memory including instructions to carry out a plurality of tasks, and wherein the module controller is in operative connection with a plurality of the document handling devices, wherein the document handling devices are operative to move documents responsive to tasks executed by the module controller; and<br>
wherein the module controller further includes a task manager, and wherein the task manager is operative when a plurality of tasks are executed simultaneously by the module controller to read task manager signals corresponding to condition signals from the document handling devices operating simultaneously responsive to the execution of the simultaneous tasks and to modify operation of at least one task responsive to the task manager reading signals corresponding to a malfunction.<br>
12.	The apparatus according to claim 11 wherein the tasks comprise state programs, and the task manager signals include state signals corresponding to current states of the simultaneously executing tasks.<br>
13.	The apparatus according to claim 12 wherein the task manager includes an array of then current states of the plurality of concurrently executing tasks.<br>
14.	The apparatus according to claim 11 and further comprising:<br>
a plurality of module controllers, wherein each module controller is in operative connection with at least one document handling device; and<br>
a first module processor, wherein the first module processor is in operative connection with a plurality of module controllers, wherein the module processor is operative to generate a first MP reservation sequence, wherein the first MP reservation sequence corresponds to moving a first document through a plurality of document handling devices between a first document location and a second document location, and wherein at least one module controller is operative responsive to the first MP reservation sequence to execute at least one task, wherein the first document is moved from the first document location to the second document location responsive to execution of the task.<br>
15.	The apparatus according to claim 14 wherein the module<br>
processor is further operative to generate a second MP reservation sequence,<br>
wherein the second MP reservation sequence corresponds to moving a second<br>
document through a plurality of document handling devices between a third<br>
document location and a fourth document location, and wherein at least one module controller is operative responsive to the second reservation sequence to execute at least one task, wherein the second document is moved from the third document location to the fourth document location responsive to execution of the one task, and wherein the first and second documents move simultaneously.<br>
16.	The apparatus according to claim 15 wherein the machine further comprises at least one document storage area, and wherein at least one of the first, second, third or fourth document locations comprises a document storage area.<br>
17.	The apparatus according to claim 14 and further comprising:<br>
a plurality of sensing devices, wherein the sensing devices are operative to sense events, wherein each sensing device senses events occurring adjacent to at least one document handling device, and wherein the sensing devices are in operative connection with the first module processor; and<br>
wherein the first module processor is operative responsive to the first reservation sequence to generate a first event sequence, wherein the first event sequence corresponds to a sequence of events expected to be sent by the sensing devices when the document handling devices operate responsive to the reservation sequence.<br>
18.	The apparatus according to claim 17 wherein the first module<br>
processor is operative to compare signals corresponding to the events sensed<br>
by the sensing devices and the event sequence, and to generate a signal<br>
indicative of a result of such comparison.<br>
19.	The apparatus according to claim 11 and further comprising a terminal processor, and a customer interface including an input device for accepting user inputs, wherein the input device is in operative connection with the terminal processor, and wherein the terminal processor is in operative connection with the module controller, wherein a user input to the input device is operative to cause the plurality of tasks to be executed simultaneously by the module controller.<br>
20.	The apparatus according to claim 14 and further comprising a terminal processor, and a customer interface including an input device for accepting user inputs, wherein the input device is in operative connection with the terminal processor, and wherein the terminal processor is in operative connection with the module processor, and wherein the terminal processor is operative responsive to an input to the input device to produce a first TP signal corresponding to moving the first document from the first document location to the second document location, and wherein the module processor generates the first MP reservation sequence responsive to the first TP signal.<br>
21.	A method comprising the steps of:<br><br>
(a)	generating a first reservation sequence with a module processor operating in connection with an automated banking machine, wherein the first reservation sequence corresponds to actions required by a plurality of document handling devices in the automated banking machine to move a first document from a first location to a second location in the machine; and<br>
(b)	operating the document handling devices in accordance with the first reservation sequence, wherein the first<br>
document is moved between the first and second locations.<br>
22.	The method according to claim 21 and further comprising the<br>
steps of:<br>
(c)	generating a second reservation sequence with the module processor, wherein the second reservation sequence corresponds to actions required by a plurality of document handling devices to move a second document from a third location to a fourth location in the machine; and<br>
(d)	concurrently during at least a portion of step (b) operating the document handling devices in accordance with the second reservation sequence, wherein the second document is moved between the third and fourth locations while the first document is being moved in the machine.<br>
23.	The method according to claim 21 and further comprising the<br>
steps of:<br>
(c)	generating a first event sequence with the module processor, wherein the first event sequence corresponds to a plurality of events which are expected to occur as the first document moves between the first and second locations;<br>
(d)	sensing with sensing devices events which occur as the first document moves in the machine; and<br>
(e)       comparing the first event sequence to the events sensed with the sensing devices in step (d).<br>
24.	The method according to claim 21 and further comprising the<br>
steps of:<br>
(c)	sensing with a plurality of sensing devices the then current position of the first document among the document handling devices; and<br>
(d)	storing data representative of the then current position of the first document in a memory.<br>
25.	The method according to claim 21 and prior to step (a) further<br>
comprising the steps of:<br>
receiving an input from a user of the machine through an input device;<br>
generating with a terminal processor responsive to the input a first TP signal corresponding to an instruction to move the first document from the first location to the second location; and<br>
wherein the module processor is operative to perform step (a) responsive to receipt of the first TP signal.<br>
26.	The method according to claim 21 wherein step (b) includes:<br>
operating at least one of the module controllers responsive to the reservation sequence, wherein the one module controller is in operative connection with at least one document handling<br>
device, wherein the one module controller operates the document handling device to move the first document between the first location to the second location.<br>
27.       The method according to claim 26 wherein step (b) further includes:<br>
operating a task manager in at least one module controller, wherein the module controller executes a plurality of tasks simultaneously, wherein execution of the tasks operate at least one document handling device, and wherein the task manager checks the then current state of each of the simultaneously executing tasks and responsive to the state of the tasks alternatively either allows the plurality of tasks to continue to be executed, or interrupts execution of at least one of the tasks.<br>
28. Apparatus substantially as  herein described with  reference  to  the accompanying drawings.<br><br></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MzU3Ni1kZWwtMTk5OC1jbGFpbXMucGRm" target="_blank" style="word-wrap:break-word;">3576-del-1998-claims.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MzU3Ni1kZWwtMTk5OC1kZXNjcmlwdGlvbiAoY29tcGxldGUpLnBkZg==" target="_blank" style="word-wrap:break-word;">3576-del-1998-description (complete).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MzU3Ni1kZWwtMTk5OC1kcmF3aW5ncy5wZGY=" target="_blank" style="word-wrap:break-word;">3576-del-1998-drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MzU3Ni1kZWwtMTk5OC1mb3JtLTIucGRm" target="_blank" style="word-wrap:break-word;">3576-del-1998-form-2.pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="250186-a-device-providing-an-electronic-forms-application-for-electronic-data-interchange-edi-translation.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="250188-chromate-free-resin-composite-type-vibration-deadening-material-excellent-in-durable-bondability.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>250187</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>3576/DEL/1998</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>50/2011</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>16-Dec-2011</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>14-Dec-2011</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>27-Nov-1998</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>DIEBOLD INCORPORATED</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>5995 MAYFAIR ROAD, NORTH CANTON, OHIO 44720, USA</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>ROBERT BOWSER</td>
											<td>211 BRIAR AVENUE, N.E. NORTH CANTON, OHIO 44720, USA</td>
										</tr>
										<tr>
											<td>2</td>
											<td>MIKE RYAN</td>
											<td>1403 44TH STREET, N.E. CANTON, OHIO 44714, USA</td>
										</tr>
										<tr>
											<td>3</td>
											<td>KEITH A. DRESCHER</td>
											<td>3606 KINGS WAY S.E. OLYMPIA, WASHINGTON 98501, USA</td>
										</tr>
										<tr>
											<td>4</td>
											<td>MATTHEW FORCE</td>
											<td>2624 COUNTRY SQUARE, UNIONTOWN, OHIO 44685,USA</td>
										</tr>
										<tr>
											<td>5</td>
											<td>BILL SCHADT</td>
											<td>8622 GLENRIDGE AVENUE, N.W. CLINTON, OHIO 44216,USA</td>
										</tr>
										<tr>
											<td>6</td>
											<td>MARK DAVID SMITH</td>
											<td>1910 HUNTING VALLEY, N.W. NORTH CANTON, OHIO 44720, USA</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>G06F 17/60</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>N/A</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td></td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>60/067,320</td>
									<td>1997-11-28</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/250187-an-apparatus-and-a-method-for-carrying-out-the-process-therein by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 14:34:36 GMT -->
</html>
