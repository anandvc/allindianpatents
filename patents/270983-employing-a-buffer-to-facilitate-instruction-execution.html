<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/270983-employing-a-buffer-to-facilitate-instruction-execution by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 03:04:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 270983:“EMPLOYING A BUFFER TO FACILITATE INSTRUCTION EXECUTION”</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">“EMPLOYING A BUFFER TO FACILITATE INSTRUCTION EXECUTION”</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>Instruction execution is facilitated by employing a buffer to handle instructions having special circumstances. When such an instruction is to be executed, a pointer of the instruction is directed to the buffer. The instruction is executed from the buffer and then the pointer is recovered to point to a location other than the buffer.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>FORM 2<br>
THE PATENT ACT 1970 (AS AMENDED)<br>
[39 OF 1970]<br>
&amp;<br>
The Patents Rules, 2003<br>
COMPLETE SPECIFICATION<br>
[See section 10 and rule 13]<br>
“EMPLOYING A BUFFER TO FACILITATE INSTRUCTION EXECUTION”<br>
Name of the Applicant: INTERNATIONAL BUSINESS MACHINES CORPORATION; 1, North Castle Drive, Armonk, New York 10504, USA.<br>
Nationality: United States of America<br>
The following specification particularly describes the invention and the manner in which it is to be performed<br>
1<br>
TECHNICAL FIELD<br>
This invention relates, in general, to processing instructions within a processing environment, and in particular, to employing buffers to facilitate instruction execution.<br>
BACKGROUND OF THE INVENTION<br>
Typically, during execution of an instruction stream, an instruction is executed, a plurality of tests are performed, and then a next instruction is executed, etc. Certain instructions, however, require special handling. For instance, an execute instruction specifies a target instruction that can be modified prior to execution. This modification is to be managed. Further, an instruction that is crossing a memory boundary (e.g., a page boundary) requires that physically discontiguous portions of the instruction be obtained. Again, this situation is to be managed.<br>
The handling of these circumstances is important. However, the handling of these circumstances during mainline processing degrades system performance.<br>
BRIEF DESCRIPTION OF THE ACCOMPANYING DRAWINGS<br>
One or more aspects of the invention are particularly pointed out and distinctly claimed as examples in the claims at the conclusion of the specification. The foregoing and other objects, features, and advantages of the invention are apparent from the following detailed description taken in conjunction with the accompanying drawings in which:<br>
FIG. 1 depicts one embodiment of a processing environment to incorporate and use one or more aspects of the invention;<br>
FIG. 2 depicts one embodiment of a system architecture of the processing environment of FIG. 1, in accordance with an aspect of the invention;<br>
FIG. 3 depicts further details of one embodiment of an emulator of the system architecture of FIG. 2, in accordance with an aspect of the invention;<br>
FIG. 4A depicts further details of one embodiment of a central processing unit (CPU) implementation of the emulator of FIG. 3, in accordance with an aspect of the invention;<br>
FIG. 4B depicts further details of one embodiment of interpreter code of the CPU implementation of FIG. 4A, in accordance with an aspect of the invention;<br>
FIG. 5 depicts one embodiment of a flow of instruction execution, in accordance with an aspect of the invention; 2<br>
FIG. 6 depicts one embodiment of the logic associated with executing an instruction stream, in accordance with an aspect of the invention;<br>
FIG. 7 depicts one embodiment of the logic associated with processing a test set of FIG. 6, in accordance with an aspect of the invention; and<br>
FIG. 8 depicts one embodiment of a computer program product incorporating one or more aspects of the invention.<br>
DETAILED DESCRIPTION<br>
Based on the foregoing, a need exists for a capability that handles the special circumstances external to mainline processing. In particular, a need exists for a capability that facilitates instruction execution. In one example, buffers are used to facilitate instruction execution, such that the special circumstances are handled external to mainline processing. When an instruction with special circumstances is observed, a pointer of the instruction points to a temporary buffer which at the very least has a copy of that instruction. The instruction is executed from the temporary buffer and then the pointer is recovered to point to the appropriate location in memory.<br>
The shortcomings of the prior art are overcome and additional advantages are provided through the provision of a method as claimed in claim 1.<br>
A corresponding computer program and system are also described and claimed herein.<br>
Additional features and advantages are realized through the techniques of the invention. Other embodiments and aspects of the invention are described in detail herein and are considered a part of the claimed invention.<br>
In accordance with an aspect of the invention, a capability is provided to control instruction execution in a processing environment. As one example, instructions within a mainline instruction stream continue to be processed, in response to passing a single test. However, if the test fails, then a test set is executed, rather than an instruction in the mainline stream.<br>
The single test includes a comparison of an instruction counter to a variable, referred to herein as end-of-range, which is selectively set to a value. While that value is not met, instruction execution continues to proceed to the next instruction in the mainline instruction stream. However, upon reaching or exceeding the value, execution falls through to a predetermined test set, which is then executed.<br>
3<br>
In one embodiment, during processing of a test set, a buffer may be employed to facilitate instruction execution. For instance, certain instructions require special handling when being processed (e.g., Execute instructions, and instructions crossing page boundaries). To facilitate this handling, a buffer is used in which the target instruction is copied enabling modifications to be made to the instruction, if necessary or desired.<br>
One embodiment of a processing environment to incorporate and use one or more aspects of the invention is described with reference to FIG. 1. In this example, a processing environment 100 is based on one architecture, which may be referred to as a native architecture, but emulates another architecture, which may be referred to as a guest architecture. As examples, the native architecture is the Power4 or PowerPC® architecture offered by International Business Machines Corporation, Armonk, New York, or an Intel® architecture offered by Intel Corporation; and the guest architecture is the z/Architecture® also offered by International Business Machines Corporation, Armonk, New York. Aspects of the z/Architecture® are described in “z/Architecture Principles of Operation,” IBM Publication No. SA22-7832-04, September 2005, which is hereby incorporated herein by reference in its entirety.<br>
Processing environment 100 includes, for instance, a native processor 102 (e.g., a central processing unit (CPU)), a memory 104 (e.g., main memory) and one or more input/output (I/O) devices 106 coupled to one another via, for example, one or more buses 108. As examples, processor 102 is a part of a pSeries® server offered by International Business Machines Corporation (IBM®), Armonk, New York. IBM®, pSeries® Power PC®, and z/Architecture® are registered trademarks of International Business Machines Corporation, Armonk, New York, U.S.A. Intel® is a registered trademark of Intel Corporation. Other names used herein may be registered trademarks, trademarks or product names of International Business Machines Corporation or other companies.<br>
Native central processing unit 102 includes one or more native registers 110, such as one or more general purpose registers and/or one or more special purpose registers, used during processing within the environment. These registers include information that represent the state of the environment at any particular point in time.<br>
4<br>
To provide emulation, the processing environment is architected to include an emulator, a guest operating system and one or more guest applications. These architected features are further described with reference to FIG. 2.<br>
Referring to FIG. 2, one embodiment of a system architecture 200 of processing environment 100 is described. System architecture 200 includes, for instance, a plurality of implementation layers, which define the architected aspects of the environment. In this particular example, the layers include hardware 202, which is coupled to memory 204 and input/output devices and/or networks 206 via one or more interfaces and/or controllers; a host operating system 208; an emulator 210; a guest operating system 212; and one or more guest applications 214; as examples. One layer is coupled to at least one other layer via one or more interfaces. For instance, guest applications 214 are coupled to guest operating system 212 via at least one interface. Other interfaces are used to couple the other layers. Moreover, the architecture can also include other layers and/or interfaces. Various of the layers depicted in FIG. 2 are further described below.<br>
Hardware 200 is the native architecture of the processing environment and is based on, for instance, Power4, PowerPC®, Intel®, or other architectures. Running on the hardware is a host operating system 202, such as AIX® offered by International Business Machines Corporation, or LINUX. AIX® is a registered trademark of International Business Machines Corporation, Armonk, New York.<br>
Emulator 210 includes a number of components used to emulate an architecture that differs from the native architecture. In this embodiment, the architecture being emulated is the z/Architecture® offered by International Business Machines Corporation, but other architectures may be emulated as well. The emulation enables a guest operating system 212 (e.g., z/OS®, a registered trademark of International Business Machines Corporation) to execute on the native architecture and enables the support of one or more guest applications 214 (e.g., Z applications). Further details regarding emulator 210 are described with reference to FIG. 3.<br>
Referring to FIG. 3, emulator 210 includes a shared memory 300 coupled to one or more service processes 302, an input/output (I/O) implementation 304, and a central processing unit (CPU) implementation 306, each of which is described in further detail below.<br>
5<br>
Shared memory 300 is a representation of a portion of memory in the host that is visible from service processes 302, I/O implementation 304, and CPU implementation 306. It is a storage area in which the independent processes (e.g., service processes, I/O implementation, CPU implementation) communicate by reading and storing data into the shared memory. As one example, the shared memory includes a plurality of regions including, for instance, system global information, CPU contexts and information, emulated main storage, emulated main storage keys, and subchannels (i.e., data structures that represent I/O devices).<br>
Service processes 302 include one or more processes used to create the CPUs and one or more other processes, as well as provide architected operator facilities, such as start, stop, reset, initial program load (IPL), etc. It may also provide other functions, such as displays or alteration of emulated system facilities, obtaining/freeing shared resources, other maintenance commands, etc.<br>
Input/output implementation 304 includes, for instance, one or more subchannel processes and an I/O controller used to communicate with I/O devices. The I/O controller is responsible for starting the subchannel processes and performing recovery, in one aspect of the invention.<br>
Central processing unit (CPU) implementation 306 is responsible for executing instructions and managing the processing. It includes a number of components, which are described with reference to FIGs. 4A-4B.<br>
Referring to FIG. 4A, CPU implementation 306 includes, for instance, interpreter code 400 used to obtain, translate and execute instructions; an architectured co-processor 402 that aids in initial start-up and communication with the chip (e.g., Service Call Logical Processor (SCLP) processes); and timing facilities 404 that are responsible for timing functions of the emulator. Further details regarding interpreter code 400 are described with reference to FIG. 4B.<br>
Interpreter code 400 includes, for instance, an interpretation unit 420 coupled to a memory access unit 422, a CPU control 426, an asynchronous interruption handler 428 and a synchronous interruption handler 430.<br>
Interpretation unit 420 is responsible for obtaining one or more guest instructions from memory, providing native instructions for the guest instructions, and executing the native instructions. The guest instructions comprise software instructions (e.g., machine instructions) that were developed to be executed in an architecture other 6<br>
than that of native CPU 102. For example, the guest instructions may have been designed to execute on a z/Architecture® processor, but are instead being emulated on native CPU 102, which may be, for instance, a pSeries® server.<br>
In one example, the providing of the native instructions includes selecting a code segment in the emulator that is associated with the guest instruction. For instance, each guest instruction has an associated code segment in the emulator, which includes a sequence of one or more native instructions, and that code segment is selected to be executed.<br>
In a further example, the providing includes creating during, for instance, a translation process, a native stream of instructions for a given guest instruction. This includes identifying the function and creating the equivalent native instructions.<br>
If an instruction includes a memory access, then memory access routines 422 are used to access shared memory 300. The memory access routines may use translation mechanisms, such as dynamic address translation (DAT) 432 or access register translation (ART) 434, to translate a logical address to an absolute address, which is then used to access the memory or may be further translated, if needed.<br>
In this embodiment, the processing within interpretation unit 420 is to be streamlined. Thus, if a more complicated circumstance arises, such as a wait state, or changing from one architecture level to another architecture level (e.g., z/Architecture® to ESA/390), etc., control is transferred to CPU control 426, which handles the event and then returns control to interpretation unit 420.<br>
Moreover, if an interrupt occurs, then processing transitions from interpretation unit 420 to either asynchronous interruption handler 428, if it is an asynchronous interruption, or synchronous interruption handler 430, if it is a synchronous interruption. After the interrupt is handled, processing returns to interpretation unit 420.<br>
In particular, the interpretation unit monitors certain locations in shared memory and if a location has changed, it signifies an interrupt has been set by one of the CPUs or I/O. Thus, the interpretation unit calls the appropriate interruption handler.<br>
Further details regarding interpretation unit 420 are described with reference to FIG. 5. In particular, FIG. 5 depicts one embodiment of a processing flow associated with the interpretation unit. In this embodiment, the processing flow is considered threaded, since each instruction routine has an associated decode/dispatch routine (i.e.,<br>
7<br>
no central control). This flow is executing instructions that are emulating the z/Architecture®, in one embodiment.<br>
With reference to FIG. 5, it is shown that a processing flow 500 includes two sections, one referred to herein as the mainline processing 502 and the other which is referred to as test set processing 504. The mainline processing is streamlined processing in which processing proceeds from one instruction routine to another instruction routine without performing significant tests between instructions. In this embodiment, the only test performed between instruction execution is a simple test that determines whether mainline processing is to continue or whether processing is to fall through to the test sets. If further testing is to be performed or other action is required, then processing exits the mainline processing and enters test set processing 504. Once the tests or other processing are performed, then processing resumes in mainline processing. It is expected that a vast majority of the time, processing will remain in mainline processing.<br>
In one embodiment, prior to entering mainline processing, certain initialization is performed. For instance, a pointer is input to interpretation unit 420 (FIG. 4b), which indicates a particular file or memory area that includes the instruction stream to be executed. This instruction stream includes, for instance, Z instructions to be executed on the native processor.<br>
In addition to providing a pointer to the instruction stream, an instruction counter for the instruction stream is provided, as well as state associated with the processing environment being emulated (e.g., Z state). The state includes various registers and flags that indicate, for instance, whether instruction program event recording (I-PER) mode is active, whether I-STEP or ADSTOP is active, the current execution mode, etc. The state is evaluated and based on that evaluation, one of the test sets of test set processing 504 (FIG. 5) is selected. For instance, if I-PER mode is active, a PER test set may be selected. A pointer is set to the selected test set and processing continues at that test set.<br>
The selected test set is performed, which may include performing one or more tests and/or one or more actions, as described below. In the test set, a decision is made as to which test set is to be selected next, if processing falls through mainline processing again. Further, a variable, end-of range, is set which is used in the single test to determine if mainline processing is to continue. This variable is set based on the 8<br>
testing being performed and the processing stage of the instruction stream, as described in further detail below.<br>
Subsequent to performing the test set, processing continues to an instruction routine 506 of the mainline processing, which is determined by the test set. When that selected instruction routine is completed, control continues at a decode/dispatch routine 508 associated with the selected instruction routine 506.<br>
The decode/dispatch routine reads the instruction stream for a next opcode and proceeds to that instruction or falls through to a test set. For example, in the decode/dispatch routine, a single test is performed to determine whether streamlined mainline processing continues or whether processing temporarily falls through to the test set processing. That is, at the decode/dispatch point, a test is made to determine whether more complex processing is needed or whether processing can remain in the main inline stream. If more complex processing is required, then the circumstances surrounding the instruction are artificially modified in a predetermined test set to make them simple before advancing to an instruction routine, since the instruction routine assumes the situation is simple. For instance, the instruction stream assumes it can fetch an instruction from physically contiguous locations. If decode/dispatch indicates that it cannot because the instruction crosses a page boundary, then processing continues to a test set in which additional processing is performed.<br>
There are various test sets that can be selected for processing including, for instance, Instruction Page Boundary Crossing 510, Recover 511, I-PER Fetch 512, I-Step and Adstop 514, Start and Exit 516, and Collect Statistics Decide Execution Mode (JIT mode) 518. Although these test sets are provided as examples, additional, less or different test sets may be employed. Each test set can include one or more actions to be performed prior to returning to the mainline processing. Further details regarding the test sets are described below.<br>
One test set that can be selected is the Instruction Page Boundary Crossing test set 510, which is used to determine whether an instruction is crossing a page boundary. This test set is invoked when an instruction is close to the end of a page (or other designated unit of memory). For instance, the end-of-range variable is set to, for instance, a value that equals end of page minus 4 bytes. In the decode/dispatch routine associated with the instruction routine that just completed, the end-of-range value is<br>
9<br>
compared to the instruction counter to determine whether the instruction is close to end of page. If this single test is satisfied, test set 510, in this example, is invoked.<br>
In test set 510, a test is performed to determine whether the instruction spans more than one page. As an example, if the page still has 4 bytes and an instruction is only 2 bytes, then it still fits on the page. Thus, processing resumes in mainline processing, which executes the instruction. However, if the instruction is 6 bytes and only 4 bytes of the instruction are on the one page, then it is determined that the instruction is crossing a page boundary. Since the last 2 bytes of the instruction are logically contiguous, but physically discontiguous, processing is performed in order to obtain the last 2 bytes and provide the 6 bytes, as if they were physically contiguous. The 6 bytes are obtained, as if they were in physical contiguous memory, and are provided to the appropriate instruction routine (via a pointer) to be executed.<br>
As described above, instead of performing the page boundary crossing test within each instruction in mainline processing, this test is only performed when desired or necessary. That is, it is only performed when it is determined that the instruction is close to the end of a page.<br>
Another test set is the Recover test set 511. This test set is invoked when special handling for an instruction is needed, as described in further detail below. In one example, values of various variables are stored, and those variables are subsequently changed. Recover is then used to return those variables to the saved values.<br>
Another test set is the I-PER Fetch test set 512. PER monitoring is a z/Architected debugging tool that monitors certain program events, such as fetching an instruction from a designated storage area. This test set is employed when the end-of-range value indicates I-PER mode is to begin. For instance, if PER monitoring is to begin in a middle of the page, and a comparison of the end-of-range variable and the instruction counter indicates the middle of the page and PER monitoring is to begin, this test set is invoked and processing associated with PER is performed.<br>
Another test set is the I-Step and Adstop test set 514. The I-Step and Adstop are debugging tools in the architected z/Architecture®. For I-Step, the processor is placed in a mode in which it steps through a single instruction and then goes into a halt state. During the halt state, the state of the machine is examined. For instance, the registers are manually read, and thereafter, a continue I-Step mode is issued. For the I-Step test set to be invoked, the end-of-range variable coincides with the instruction<br>
10<br>
counter. After executing any kind of instruction, the instruction counter will be over the end of range immediately, thus, the end-of-range is artificially set to zero. Thus, the program execution goes to the test block immediately after each instruction. It will go to a halt state, wait for user interaction, and then continue.<br>
Adstop is a stop when the instruction address is within a particular range. It is similar to PER mode.<br>
Another test set is the Start and Exit test set. This test set is used when control is to be transferred to CPU control and back. When program execution changes from one architecture mode to another, then this flow is exited and control continues with the CPU control. To invoke this test set, the end-of-range variable is set to zero, as an example.<br>
The Collect Statistics/Decide Execution Mode test set 518 is used to determine which mode is to be used for execution. This test set collects usage statistics and chooses an execution mode based on the statistics. Examples of execution modes include interpretative mode (return to mainline processing 502); recording mode in which each executed instruction is copied to a buffer; and translation mode, which is used when the addresses have been previously translated. To invoke this test set, the end-of-range variable is set to zero, as an example. This allows this test set to be processed after each instruction.<br>
Although in the above test sets, a primary test or action is indicated, each test set may include other actions. For instance, each test set may also check, for instance, whether an instruction page boundary crossing is being crossed or whether an interrupt is pending, in addition to the primary test or action. Many other examples also exist.<br>
Further details associated with processing an instruction stream by interpreter 420 are described with reference to FIG. 6.<br>
Initially, a pointer to an instruction stream is input to interpreter 420, along with an instruction counter and state associated with the instruction stream, STEP 600. The state includes, for instance, registers, including, floating point, general, control and/or addressing registers, as examples, and flags indicating for instance, PER mode active, I-Step active, etc. This state is evaluated, STEP 602.<br>
Based on the evaluation, one of the test sets is selected and processing of that test set commences, STEP 604. This test set is predetermined in that the evaluation indicates that processing is to commence with a particular test set. In the test set,<br>
11<br>
certain actions are performed depending on the test set. Additionally, the test set determines the next test set to be invoked, if needed, and sets a test set pointer to point to that next test set. The next test set can be the same test set or a different test set depending on the evaluation performed within the test set (e.g., PER active, close to a page boundary crossing, I-Step active, etc.)<br>
In response to executing the test set, flow proceeds to a selected instruction routine in the mainline processing, and that routine is executed, STEP 606. In one example, the routine includes one instruction; although, in other examples, it can include a plurality of instructions. When the instruction routine completes, processing continues with the decode/dispatch routine associated with the instruction routine, STEP 608. At decode/dispatch, the single test is performed to determine whether processing is to continue to the next instruction or fall through to a test set, STEP 610. This single test is a check as to whether the value of end-of-range has been met. If it has not been met, INQUIRY 612, then processing continues with mainline execution, STEP 606. Otherwise, processing falls through to the predetermined test set, STEP 614, and the test set is processed, STEP 616. Processing then continues with the next instruction routine to be processed, as indicated by the test set.<br>
Additional details relating to processing the test set are described with reference to FIG. 7. During processing of a test set, an instruction may be executed that includes special handling. To facilitate handling such an instruction, a buffer is employed, as described below.<br>
Referring to FIG. 7, processing of a test set commences and an instruction is encountered, STEP 700. A determination is made as to whether this instruction is of the type that requires special handling, INQUIRY 702. For instance, a check is made as to whether the instruction is an execute instruction or an instruction crossing a page boundary. If it is an instruction that requires special handling, then the buffer is employed. This buffer is a temporary buffer residing in local memory of the processor. For instance, if the instruction is an execute instruction, which is a Z instruction that specifies a target instruction to be performed, the target instruction is loaded into the buffered memory location, STEP 704. By copying the target instruction to the buffer, at least one aspect associated with the instruction can be modified, STEP 706. For example, assume that the target instruction is a move character (MVC) instruction and the number of bytes to be moved, as specified in the instruction, is to be modified. The<br>
12<br>
instruction is copied to the buffer and is modified to indicate the number of bytes to be moved. For instance, if the original number of bytes to be moved is 4 bytes, this can be changed to another value, such as 8 bytes. Thus, instead of moving the 4 bytes, the target instruction is modified to move 8 bytes (or any other number of bytes).<br>
As a further example, assume the instruction is an instruction crossing a page boundary. In this case, the target instruction is the instruction to be executed, and the logically contiguous, but physically non-contiguous, bytes of the instruction are copied to the buffer to make them physically contiguous. For instance, a first set of bytes of the instruction located on one page is copied to the buffer and the remaining bytes of the instruction on another page are also copied to the buffer, STEP 704. In this example, the instruction need not be modified, and thus, STEP 706, is ignored.<br>
Subsequent to initializing the buffer, various tasks are performed as part of the test set being processed. These tasks include, for instance, redirecting the instruction pointer to the buffer and saving values of various variables for later use, STEP 708. For instance, the current value of the end-of-range variable is saved, as well as the current value of the next test set indicator.<br>
Thereafter, the values of these variables are replaced, STEP 710. For instance, end-of-range is set to zero, and the next test set indicator is set to point to the recovery test set.<br>
The instruction in the buffer is then executed. At decode/dispatch, the single test (e.g., end-of-variable) fails, so the recovery test set is selected, STEP 714. During recovery, the actions at STEPs 708-710 are undone. For instance, the instruction pointer is redirected to the original instruction stream; the end-of-range variable is set to its saved value; and the next test set indicator is also reset to its saved value. Processing then continues at the next instruction, STEP 716.<br>
Returning to INQUIRY 702, if the instruction is not of the type requiring special handling, then processing continues with the next instruction of the test set or back in mainline processing, as directed by the test set.<br>
One or more aspects of the invention can be included in an article of manufacture (e.g., one or more computer program products) having, for instance, computer usable media. The media has therein, for instance, computer readable program code means or logic (e.g., instructions, code, commands, etc.) to provide and<br>
13<br>
facilitate the capabilities of the invention. The article of manufacture can be included as a part of a computer system or sold separately.<br>
One example of an article of manufacture or a computer program product incorporating one or more aspects of the invention is described with reference to FIG. 8. A computer program product 800 includes, for instance, one or more computer usable media 802 to store computer readable program code means or logic 804 thereon to provide and facilitate one or more aspects of the invention. The medium can be an electronic, magnetic, optical, electromagnetic, infrared, or semiconductor system (or apparatus or device) or a propagation medium. Examples of a computer readable medium include a semiconductor or solid state memory, magnetic tape, a removable computer diskette, a random access memory (RAM), a read-only memory (ROM), a rigid magnetic disk and an optical disk. Examples of optical disks include compact disk-read only memory (CD-ROM), compact disk-read/write (CD-R/W) and DVD.<br>
A sequence of program instructions or a logical assembly of one or more interrelated modules defined by one or more computer readable program code means or logic direct the performance of one or more aspects of the invention.<br>
Advantageously, a capability for controlling instruction execution is provided, in which control is maintained within mainline processing, unless testing (other than the single end-of-range test) or other actions are required, as determined by the single end-of-range test. By performing the tests only when needed, performance is enhanced and coding is simplified (e.g., each instruction need not include the code for all of the tests).<br>
Advantageously, processing is streamlined in that branching occurs to the next routine (assuming a test set need not be processed), instead of back to the interpreter and then to the next routine.<br>
As a further advantage, overhead associated with certain instructions, such as execute instructions, is reduced by using the buffer. With an execute instruction, there is overhead associated with jumping from one page of memory to another page of memory. For example, the execute instruction, which is on one page of memory, is executed, and then the target instruction, which is on a different page of memory, is executed. After the target instruction is executed, processing returns to the instruction after the execute instruction. There is overhead associated with this branching back and forth. However, by using the buffer, a record is maintained of leaving the first<br>
14<br>
page, so when processing returns, recovery can be performed and additional testing and/or actions (e.g., address translation, etc.) need not be performed.<br>
Although various embodiments are described above, these are only examples. For instance, the processing environment can include processing units that are based on architectures other than Power4, PowerPC® or Intel®. Additionally, servers other than pSeries® servers can incorporate and use one or more aspects of the invention. Moreover, operating systems other than those mentioned herein can be used. Further, the processing environment can emulate environments other than the z/Architecture®. Additionally, various emulators can be used. Emulators are commercially available and offered by various companies. Yet further, the processing environment need not include emulator code. Many other types of processing environments can incorporate and/or use one or more aspects of the invention.<br>
Additionally, although a buffer is employed in processing certain instructions, such as execute instructions and instructions crossing page boundaries, there may be other instructions and/or situations in which the buffer is to be used, and these are included within the scope of the invention.<br>
Further, although test sets have been provided as examples. Additional, less and/or other test sets may be employed. The number of test sets included is design dependent. Many variations to the invention are possible and are included within the scope of the invention.<br>
Moreover, in one or more embodiments, a data processing system suitable for storing and/or executing program code is usable that includes at least one processor coupled directly or indirectly to memory elements through a system bus. The memory elements include, for instance, local memory employed during actual execution of the program code, bulk storage, and cache memory which provide temporary storage of at least some program code in order to reduce the number of times code must be retrieved from bulk storage during execution.<br>
Input/Output or I/O devices (including, but not limited to, keyboards, displays, pointing devices, DASD, tape, CDs, DVDs, thumb drives and other memory media, etc.) can be coupled to the system either directly or through intervening I/O controllers. Network adapters may also be coupled to the system to enable the data processing system to become coupled to other data processing systems or remote printers or storage devices through intervening private or public networks. Modems,<br>
15<br>
cable modems, and Ethernet cards are just a few of the available types of network adapters.<br>
The capabilities of one or more aspects of the invention can be implemented in software, firmware, hardware, or some combination thereof. At least one program storage device readable by a machine embodying at least one program of instructions executable by the machine to perform the capabilities of the invention can be provided.<br>
The flow diagrams depicted herein are just examples. There may be many variations to these diagrams or the steps (or operations) described therein without departing from the spirit of the invention. For instance, the steps may be performed in a differing order, or steps may be added, deleted, or modified. All of these variations are considered a part of the claimed invention.<br>
Although embodiments have been depicted and described in detail herein, it will be apparent to those skilled in the relevant art that various modifications, additions, substitutions and the like can be made without departing from the spirit of the invention and these are therefore considered to be within the scope of the invention as defined in the following claims.<br>
16<br>
We claim:<br>
1. A method of facilitating instruction execution in a processing environment, said method comprising:<br>
providing a buffer with an instruction;<br>
determining whether an aspect of the instruction in the buffer is to be modified;<br>
modifying the aspect, in response to the determining step; and<br>
redirecting an instruction pointer to the buffer in order to enable execution of the instruction from the buffer, instead of execution of the instruction in memory.<br>
2. The method as claimed in claim 1, wherein the providing comprises copying the instruction from a logically contiguous but physically discontiguous location in memory to a physically contiguous location in the buffer.<br>
3. The method as claimed in claim 1, wherein the instruction comprises an instruction crossing a page boundary, and the providing comprises copying a first part of the instruction from one page of memory to the buffer and a second part of the instruction from another page of memory to the buffer.<br>
4. The method as claimed in claim 1, wherein the instruction comprises a target instruction of an execute instruction, and wherein the modifying comprises modifying a register of the target instruction.<br>
5. The method as claimed in claim 1, wherein the processing environment comprises an emulator.<br>
6. A system comprising means adapted for carrying out all the steps of the method according to any preceding method claim.<br>
Dated this 28th day of August, 2009<br>
P.H.D.RANGAPPA<br>
IN/PA 1538<br>
OF K &amp; S PARTNERS<br>
AGENT FOR THE APPLICANT</td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=MccpzO8JGWKiu16sgJ3yHw==&amp;amp;loc=egcICQiyoj82NGgGrC5ChA==" target="_blank" style="word-wrap:break-word;">http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=MccpzO8JGWKiu16sgJ3yHw==&amp;amp;loc=egcICQiyoj82NGgGrC5ChA==</a></p>
		<br>
		<div class="pull-left">
			<a href="270982-purification-devices.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="270984-a-process-for-the-production-of-4-h-graphite-by-thermal-plasma-heat-treatment-of-calcined-petroleum-coke-powder.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>270983</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>5031/CHENP/2009</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>05/2016</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>29-Jan-2016</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>29-Jan-2016</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>28-Aug-2009</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>INTERNATIONAL BUSINESS MACHINES CORPORATION</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>1  North Castle Drive  Armonk  New York 10504  United States of America</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>Theodore Bohizic</td>
											<td>118 Cardinal Road,  Hyde Park,  New York 12603,  United States of America.</td>
										</tr>
										<tr>
											<td>2</td>
											<td>Mark Decker</td>
											<td>3 Reeder Road  Rhinebeck New York 12572  United States of America</td>
										</tr>
										<tr>
											<td>3</td>
											<td>Viktor Gyuris</td>
											<td>6 Tanglewood Drive  Wappingers Falls  New York 12590  United States of America</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>G06F 9/38</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/EP2008/050652</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2008-01-21</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>11/670,187</td>
									<td>2007-02-01</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/270983-employing-a-buffer-to-facilitate-instruction-execution by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 03:04:38 GMT -->
</html>
