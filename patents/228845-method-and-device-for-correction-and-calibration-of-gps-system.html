<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/228845-method-and-device-for-correction-and-calibration-of-gps-system by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 09:28:34 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 228845:METHOD AND DEVICE FOR CORRECTION AND CALIBRATION OF GPS SYSTEM</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">METHOD AND DEVICE FOR CORRECTION AND CALIBRATION OF GPS SYSTEM</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>The present invention relates to provide accurate and quick position measurements in a practical mobile position location system, the GPS receiver is calibrated, a frequency error in the next time period is predicted using a first frequency locked to an externally transmitted signal, and a second frequency is generated by a GPS oscillator. To predict the error in the next time period, several measurements are made over time, error estimations are made, an error function is approximated responsive to the set of error estimations. This predicted error is then used to correct the GPS receiver in the next time period. In one implementation, a multiple function portable device is disclosed for providing cellular communication using a network of cellular stations that operate at predefined ideal cellular frequencies, and also for providing position location using GPS satellites that transmit GPS signals at a predefined GPS frequency.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td> <br><br>
CALIBRATION AND CORRECTION SYSTEM FOR SATELLITE POSITION<br>
LOCATION SYSTEMS<br>
BACKGROUND OE THE INVENTION<br>
Related Application<br>
[000] This application claims priority to U.S. Provisional Application Serial Xo. 60/433,138, filed on December 13, 2002.<br>
Field of the Invention<br>
[001] This invention relates to an apparatus and method for computing the position of a mobile device by use of wireless signals, such as GPS systems.<br>
Description of Related Art<br>
[002] Existing position location technologies based on GPS use a network of satellites that transmit signals at a predefined GPS frequency at a known time. A GPS receiver on the ground measures the times of arrival of the signals room each satellite in the skv it can "see". The times of arrival of the signals along with the exact location on the satellites and the exact times the signals were transmitted from each satellite are used to triangulate the position of the GPS receiver. A standard GPS receiver includes a local oscillator that is used to receive the GPS signals from the satellites.<br>
[003] The acquisition of signals from the GPS satellites is highly sensitive to frequency variations in the local oscillator of the GPS receiver. A number of factors contribute to making the acquisition of the GPS signals difficult. The GPS signals are transmitted at a relatively low power, and the GPS satellites are in earth orbit. By the time the GPS signals reach the ground, their initially low power has been greatly reduced, making the signal extremely weak. As a result, if the GPS receiver's local oscillator frequency is even slighty off the GPS frequency, it may be difficult and time consuming to effectively receive the GPS signals.<br>
[004] In many communication systems, including GPS receiving systems, there exists a primary local oscillator, called a "reference local oscillator". The output signal of the reference local oscillator is in turn fed to one or more frequency synthesis circuits, which in turn produce additional signals at other frequencies that are provided to various circuits in such systems.   As an example, it is common for GPS receiving systems to utilize a<br><br>
reference local oscillator with a nominal output frequency of 16.368 MHz. This oscillator output is typically fed to a frequency synthesis circuit that uses the reference frequency ;o produce a local oscillator frequency in the vicinity of 15^5.42 MHz, which in turn is used in a downconverter circuit that translates the input GPS signals to near baseband. Similarly this reference oscillate: output may be used to synthesize a sample clock, often with a frequency being a multiple of 1.023 MHz. where this sample clock is used as nan of a digitizins circuit that samples the near-baseband translated GPS signal. Similarly, in cellphone receivers, a reference oscillator often has a frequency of oscillation in the 10 MHz to 20 MHz range (depending upon design), which is used to pr:duce additional frequencies for purposes of signal down conversion and sampling.<br>
[005] In some situations it may be advantageous for a GPS system 10 utilize a frequency calibration method such as disclosed in U.S. patent Nos. 5,8-11.396. 6.421.002. and "others. In one approach, the average frequency of the cell phone's local oscillator (VCTCXO) is measured, and used to calibrate the frequency error of the GPS receiver's oscillator. This VCTCXO is typically frequency locked to the highly stable received cellular signal. An alternative approach is to frequency lock the GPS oscillator to the ceil phone's local oscillator. This latter approach suffers in performance :f the short term stability of the cell phone's oscillator is poor. Such cell phone oscillator stability is dependent upon a number of factors, such as the cell phone design, and piatform motion. [006] The calibration method sometimes suffers performance problems, including: [007] (A) frequency "racing"' problems due to heating/cooling associated with the ceil phone's transmitter turning on/off;<br>
[008] (B) frequency variation due to voltage fluctuations, again associated with the cell phone's transmitter turning on/off; and<br>
[009] (C) other heating/cooling situations due to environmental effects. [010] Although the above calibration measurement method may work adequately in a platform that is static or moving at relatively slow speeds, such as pedestrian speeds, rapid frequency fluctuations of the cellular oscillator observed in vehicular usage will cause the performance of the calibration to deteriorate. That is, because the cellular oscillator is frequency locked to the network, rapid fluctuations in received frequency of the cellular signal may cause large errors in calibration. Such rapid fluctuations may occur, for example, when a vehicle is approaching a serving cell base station and their passes the station.  During this short time, the observed frequency of the direct pilot from this cell<br><br>
base nation may rapidly change from a large positive Doppler (e.g. +100 Hz) to a large negative Doppler (e.g. -100 Hz) in a matter of a second or several seconds. This rapid variation in received cellular carrier frequency, coupled with a cell phone transmitter being turned on or off, may cause a deterioration of the efficacy of the frequency-locked calibration method.<br>
SUMMARY OF THE INVENTION<br>
[Oil] To provide accurate and quick position measurements in a practical mobile position location device, a system described herein calibrates a GPS receiver by predicting a trecuency error in the next time penod responsive to a first frequency locked to an externally transmitted signal and a second frequency generated by a GPS oscillator. Particularly, the calibration system makes making several measurements over time, estimates an error in each measurement, and approximates an error function, and predicts an error for the next time period. The predicted error is then used to correct the GPS receive: in the next time period.<br>
[012] A method and apparatus is disclosed for calibrating and correcting a GPS receive: in the mobile device using an externally transmitted signal (other than a GPS signal) that has a predefined precision carrier frequency. To receive the GPS signal transmitted at a predefined GPS frequency, the method includes generating a first frequency signal responsive to the precision carrier frequency, and generating a second frequency signal in the GPS receiver that is applied to process the GPS signal. For example, the first frequency may be a subharmonic of the frequency received by a cellular receiver, and the second frequency signal may be generated directly by a reference GPS oscillator in the GPS receiver, or it may be derived from a reference GPS oscillator. The calibration method includes estimating an error between the first and second frequencies in a first time period, repeating the error estimating step for at least one additional time period to provide a set of error estimations, approximating an error function of the second frequency responsive to the set of error estimations, and predicting an error in a next time period utilizing the approximated function. A correction signal is generated, and an oscillator in the GPS receiver is corrected in the next time period to process the GPS signal responsive to the predicted error.<br><br>
[013] Typically, the calibration method includes repeatedly measuring a ratio of the second and the first frequencies over a plurality of time periods, and for each time penod comparing this ratio to a predetermined number to estimate the error respectively for eiieh time period. The error prediction step typically includes determining i frequency error vs. time of the second frequency by fitting a mathematical function responsive to the set of error estimations, such as by averaging the set of error estimations, and performing a mathematical regression method utilizing the set of error estimations to produce a least-mean-square fit to the set of error estimations.<br>
[014] In some disclosed methods, tne correcting step includes correeting a GPS local oscillator that supplies the second frequency to convert the GPS signal at the GPS frequency into a predetermined intermediate frequency, and in other disclosed methods the GPS receiver comprises a digital processing system that includes a digital local oscillator. and the correcting step includes correcting the digital local oscillator. [015] In one implementation, a multiple function portable device is disclosed for providing cellular communication using a network of cellular stations that operate at predefined ideal cellular frequencies." and also for providing position l::ation using GPS satellites that transmit GPS signals at a predefined GPS frequency. The multi-function portable device comprises a cellular communication system including a first local oscillator that generates a first frequency for demodulating communications with the network of cellular stations, a GPS system including a second !cca: oscillator that generates a second frequency coupled to process the GPS signals, an error prediction and correction system that predicts an error in a next rime period responsive to measurements of the first and second frequencies over a plurality of previous time periods, the system also generating a correction signal for the next time period responsive to the predicted error, and a local oscillator in the GPS system that receives the correction signal and responsive thereto processes the GPS signal during the next time period.<br>
BRIEF DESCRIPTION OF THE DRAWINGS<br>
[016] For a more complete understanding of this invention, reference is now made to the following detailed description of the embodiments as illustrated in the accompanying drawing, wherein:<br>
[017] Fig. 1 is a perspective view of a plurality of cellular base stations, GPS satellites, and a user holding a mobile device such as a cell phone;<br><br>
[018]      Fig.  2 is  a block diagram of the  mobile  device in  one embodiment that<br>
incorporates communication and position location systems;<br>
[019]      Fig. 3 is a block diagram of one embodiment of the communication system.<br>
position location system, and the error prediction and calibration system;<br>
[020]      Fig. 4 is a block diagram of another embodiment of the communication system.<br>
position location system, and :he error prediction and calibration system;<br>
[021]      Fig. 5 is a flow chart that shows a series of steps performed to predict an error<br>
and generate a correction signal in one embodiment:<br>
[022]      Fig. 6A is a graph of typicai frequency variations of cellular and GPS oscillator<br>
frequencies in one example;<br>
[023]      Fig. 6B is a graph that shows the ratio of the GPS oscillator frequency to the<br>
cellular oscillator frequency using the frequency observations of Fig. 6A;<br>
[024]      Fig. 6C is a graph of the error estimations using the ratios from Fig. 6B;<br>
[025]      Fig. 6D is a graph showing frequency corrections approximated from the error<br>
estimations in Fig. 6C;<br>
[026]      Fig. 7 is a graph of a linear slope estimate resulting from a nearly instantaneous<br>
+100 Hz to -100Hz frequency jump;<br>
[027]      Fig. 8 is a graph that shows a linear slope estimate of an example in which a cell<br>
base tower is about 15 meters from the roadway and about 15 meters high; and<br>
[028]      Fig. 9 is a graph that shows a linear slope estimate for random frequency data<br>
normally distributed.<br>
DETAILED DESCRIPTION<br>
[029]     This invention is described in the following description with reference to the<br>
figures, in which like numbers represent the same or similar elements.<br>
Glossary of Terms and Acronyms<br>
[030]     The following terms and acronyms are used throughout the detailed description:<br>
[031]     Base station A station that transmits a precision carrier frequency, such as a cell<br>
site in a cellular phone network.<br>
[032]      Calibration  A process that relates to measuring errors at the present time and<br>
predicting errors at a future time.<br><br>
[033]      Correction   A method that relates to compensating for errors predicted in the<br>
calibration process.<br>
[034]      CDMA Code Division Multiple Access<br>
[035]      FSK Frequency Shift Keying<br>
[036]      GPS Global Positioning System Although the term GPS is often taken to mean<br>
the United States Global Positionins Svstem, the meaning of this term herein ano tfte<br>
methods of all apparatus described herein apply equally well to other Global Positioning<br>
Systems, such as the Russian Glonass Svstem and the planned European Galileo Svstem.<br>
*	J	t	J.	»<br>
In some systems, the term Satellite Positioning System (SPS) is used in substitution for rite<br>
GPS terminology.<br>
[037]      GSM Global System for Mobile Communications<br>
[038]      Mobile device A portable device, such as a cell phone, typically carried by a user<br>
whose location is to be determined.<br>
[039]      Multi-function device A device that has two or more operating functions, such as<br>
a GPS system and a cellular communication system.<br>
[040]      Pilot Signal    A signal, typically modulated by a psuedo-random sequence.<br>
emitted by a cellular station for the purpose of establishing communication with remote<br>
devices. Althoughthe term "pilot" is often used in the context of CDMA cellular systems.<br>
this term also applies broadly herein to all other cellular communication systems.<br>
[041]      Precision Carrier Frequency   A highly predictable, accurate frequency that is<br>
transmitted from an external source. A precision cairier frequency can be emitted directly<br>
by the external source, or it may be derivable from the signal emitted from the exterr.al<br>
source, such as disclosed in U.S. Patent No. 6,421,002.<br>
Table of Variables<br>
[042]      Following is a table that sets forth some of the variables discussed herein:<br>
Variable       Description<br>
Sf	difference between the ideal frequency and the actual (for either cellular or GPS<br>
frequencies)<br>
fc	actual cellular oscillator frequency (e.g. first oscillator frequency)<br>
fc5   "	ideal cellular oscillator frequency (e.g. a precision carrier frequency)<br><br>
L	GPS oscillator frequency (e.g. second oscillator frequency"'<br>
fg*	GPS mixing frequency supplied by frequency synthesizer :r. one embodiment"<br>
fgo	ideal GPS oscillator frequency<br>
fi	initial GPS oscillator frequency at time t=0 (e.g. 16.368 MKz)<br>
fa	initial cellular oscillator frequency at time :=0 (e.^. 19.2 MHz;<br>
R	the measured ratio between the first and second oscillator frequencies<br>
Ro	the ideal ratio between the cellular and GPS oscillator frequencies<br>
S	scale factor used as a correction signal in one embodiment<br>
[043] As described in the background section, the reference frequency from a reference local oscillator may be used to synthesize (or mere generally, derive) other frequencies for use in the system. For description purposes for some embodiments herein we may utilize the terminology "local oscillator', or "oscillator', which in one embodiment is synonymous with the reference local oscillator. However, alternative embodiments may associate the term "local oscillator' or "oscillator" with anv oscillaticn signals derived from such a reference local oscillator via a frequency synthesis procedure, for example. Since such derived signals have average frequencies that bear a known relationship relative to that of the reference oscillator, it is straightforward to apply the methods and apparatus of this invention to any of these oscillators' outputs. Hence in this invention description the term "local oscillator" or "oscillator" is denned broadly to include the reference oscillator or any oscillator whose frequency is derived frcm the reference oscillator. Similarly when we utilize the term "oscillator frequency' we mean that of the reference oscillator or that of any oscillator whose frequency is derived from the reference oscillator. In a multi-function communication device, such as a combined cellphone transceiver and GPS receiver, there may be two or more reference oscillators, e.g. one for the cellphone circuitry and one for the GPS circuitry. We use the terminology GPS local oscillator and cellphone local oscillator to distinguish between the different oscillator chains.<br>
[044] We should also note that a reference oscillator may have a slightly variable frequency, where such frequency may be controlled in some fashion in order to compensate for various errors relative to an ideal frequency. For example in cellphones it is common to utilize a Voltage Controlled Temperature Compensated Crystal Oscillator<br><br>
(VCTCXO) as a frequency reference. Here, a compensation procedure is used in which a nighiy stable received cellular signal is used to measure and correct errors in the VCTCXO's frequency. Also, a temperature measurement circuit is used to compensate for frequency errors that result as a function r: ambient temperature fluctuations.<br>
Overview<br>
[045] As discussed in the Background, rapid variations in the received cellular oscillator frequency, which may coincide with a cell phone transmitter being turned on or off, may cause a deterioration of the efficacy of a calibration method in which a GPS lecal oscillator is calibrated using an external precision earner frequency observed by the cellular system's local oscillator. Using the system described herein, calibration of a GPS oscillator can be improved by observing frequency variations in local oscillator frequencies of the cell phone and/or the GPS system over a sufficiently long time period. As described herein, a frequency comparison process can be performed periodically, perhaps at 0.5 to 1.0 second intervals, to yield a set of observations. Then these observations (e.g. the 10 to 20 most recent observations) can be used to determine frequency rate of change vs. time utilizing curve-firing techniques such as linear (or higher order) regression. This process can yield an error prediction that is then used to calibrate a local oscillator in the GPS system, which will tend to smooth out errors that result from a rapid frequency jump, such as a +100 to -100 Hz frequency jump that may occur when a mobile device in a car travels by a cell base station.<br>
[046] The method and apparatus disclosed herein is useful in the situation in which the GPS oscillator frequency is drifting with respect to time. Hence the various errors and corrections discussed herein are functions of time, for example, as a result of rapid ambient temperature changes. As described herein, a multiplicity of such measurements (at least two) may then be used to predict the future GPS oscillator frequency vs. time, and hence allow for the correction of drifts to this oscillator. Typically, over relatively short periods of time (say 30 seconds), such drifts are well modeled as linear functions of time, and over longer periods, a 2ad order curve fit (or even higher order fit) may be more appropriate. Derivation of a curve fit to the measurement error(s) as described herein allows compensation for such GPS oscillator drifts.<br><br>
Description<br>
[047] Fig. 1 illustrates one environment in which the present invention can be implemented. In the illustrated environment, a GPS receiver and ceil phone are implemented together in a mobile unit; however it should be apparent that the present invention could be used in other systems in which the frequency of a first oscillator locked to a precision carrier frequency is used to calibrate a second oscillator. [048] Fig. 1 is a perspective view of a plurality of cellular base stations shown collectively at 10, GPS satellites shown collectively at 11, and a user 12 grasping a mobile device 14. As described in more detail with reference to Fig. 2, the mobile device 14 may include a communication svstem such as a cell phone and a nosition location svstem such<br>
•*	A.	J.	rf<br>
as a GPS system. The user 12 may be on foot as shown, or may be traveling in a car or on public transportation, for example.<br>
[049] The cellular base stations 10 comprise any collection of cellular base stations* utilized as part of a communication network for connection with the mobile device. The cellular base stations are connected to a cellular infrastructure network 15 that orovides communication services with a plurality of other communication networks such as a public phone system 16, computer networks 17 such as the Internet, and other communication systems shown at 18. The cellular infrastructure network typically provides communication services that allow the user of a cell Dhone to connect to another nhone using the phone system 16; however the cellular base stations could also be utilized to communicate with other devices and/or for other communication purposes, such as an internet connection with a handheld personal digital assistant (PDA). [050] In one embodiment, the cellular base stations 10 are part of a CDMA communication network; however in other embodiments other types of communication networks, such as GSM networks, may be used. In CDMA systems each cellular station periodically emits a psuedo-random sequence that uniquely identifies the cell station. The psuedo-random sequence is a series of bits that are useful for the receiver to lock upon. In CDMA terminology this psuedo-random sequence is termed a "pilot signal"; as used herein, the term pilot signal can apply to any cellular system as well as to CDMA systems. For example, various synchronization signals are provided by GSM cellular stations. CDMA and GSM signals are transmitted from the cell stations at predefined, highly accurate frequencies, which provide precision carrier frequencies in one embodiment described herein.<br><br>
[051] The GPS satellites 11 comprise any group of satellites usea for cushioning a GPS receiver. The satellites communicate with a land-based GPS communication system 19. which provides control functions for the GPS system. The satellites ire s\nchronized to periodically send out wireless signals a: ±c same time. When these signal; are detected by the GPS receiver, the GPS system calculates the amount of time it takes fcr the detected GPS signals to travel from their respective satellites to the receiver. This assumes that the GPS receiver has an accurate local clock. However the clock may be set by the received GPS signals themselves as long as four or more such signals are received simultaneously. [052] Fig. 2 is a block diagram ox one embodiment of the  device 14 incorporating communication and position location systems. Fig. 2 shews a cellular communication system 22 connected to an antenna 21. The cellular communication system 22 comprises suitable devices, hardware, and software fcr communicating with and/or detecting signals from cellular base stations, including a local oscillator 23 and an automatic frequency control (AFC) system 24 that locks the local oscillator 23 to cellular base frequency. Ideally this frequency is fc0. As discussed above, although the local oscillator is locked to the received cellular base frequency under .AFC control, the actual cell frequency fc generated by the local oscillator may be different than, the ideal base frequency fc0 for reasons such as movement of the mobile device. In ether words, the transmitted base frequency and the actual local oscillator frequency might r.ct be perfectly synchronized. The cellular communication system 22 is coupled to an error prediction and calibration system 30, thereby allowing transfer of data such as the cellular local oscillator frequency fc, which is used for error prediction as described elsewhere in detail. [053] In one embodiment, the cellular communication system 22 comprises a CDMA communication system suitable for communicating with a CDMA, network of base stations; however in other embodiments the cellular communication system may comprise another type of network such as GSM.<br>
[054] A mobile device control system 25, is connected to the communication system 22 and the position location system 27. The mobile device control system 25 -includes any appropriate structure, such as a microprocessor, memory, other hardware, firmware, and software to provide appropriate control functions for the systems to which it is connected. The control system 25 is connected to a user interface 26, which includes any suitable components to interface with the user, such as a keypad, a microphone/speaker for voice communication services, and a display such as a backlit LCD display. The mobile device<br><br>
control system 25 and user interface 26, conne to the position location system 2 provides suitable functions for the GPS receiver such as controlling user input and displaying results.<br>
[055] A position location system 27. in this embodiment a GPS system, is connected to a GPS antenna 28 to receive GPS signals that -are transmitted at or near the ideal GPS frequency. The GPS system 27 comprises any suitable hardware and software for receiving and processing GPS signals and perform any calculations necessary to determine position using any suitable position location algorithm. Examples of GPS systems are shown in Figs. 3 and 4 and described with reference thereto. Other examples of GPS systems are disclosed in US Patents 5,841,396. 6,002,363, 6,421,002, by Norman F. Krasner. The GPS system 27 includes one or more local oscillators 29 that are used to downconvert the GPS signals from the GPS satellite.<br>
[056] The GPS system 27 is coupled to an error prediction and calibration system 30, thereby allowing transfer of data such as the GPS oscillator frequency fe. As described elsewhere herein in detail, the GPS oscillator frequency fg is used together with the cellular oscillator frequency fc to make an error prediction and to generate a correction signal that is supplied to the GPS system 27.<br>
[057] Reference is now made to Fig. 3, which illustrates one embodiment of the position location system 27a, the communication system 22a, and the error prediction and calibration system 30a. Implementations of previously described elements are designated by appending a lowercase letter to the previously discussed reference numeral (e.g. appending "a" to "21" make 21a).<br>
[058] The communication system 22a includes a wireless modem 32 that has an AFC circuit that frequency locks to the received communication signal to provide the cellular oscillator frequency output fc on a line 33, which is supplied to the error prediction and control system 30a.<br>
[059] The position location system 27a in this embodiment includes a GPS RF-IF downconverter 34 that receives the GPS signal and converts it to a signal at an intermediate frequency fo on the line 35. The intermediate frequency (IF) signal is supplied to an analog-to-digital converter 36, and then the digital output is supplied to a GPS digital processing system 37 that receives the digital signal and processes it in a manner to provide position location information.<br><br>
[060] The RF-IF downconverter 34 operates by combining the received GPS signal with a synthesized frequency fg* supplied from a frequency synthesizer 3S. The result of the combination process in the downconverter is a signal at the intermediate frequency f-L for example, if it is desired that the IF be zero, then the frequency synthesizer must provide a trequency equal to that of the received GPS signal. However, if the synthesized frequency fg* supplied by the frequency synthesizer is unequal to frequency of the received GPS signal, then the intermediate frequency fIF will not be zero, but will differ by some amount. And if the intermediate frequency fIF is sufficiently different from the expected GPS frequency, then it may be difficult or even impossible to acquire the GPS signal. [061] The GPS local oscillator 39 is coupied to supply the GPS local oscillator frequency fg to the frequency synthesizer 38. which synthesizes the local oscillator frequency fg to provide the synthesized frequency fg* which in turn is used by the downconverter 34 to process the GPS signal. Because the synthesized frecuency f3* determines the intermediate frequency fIF, and the synthesized frequency is synthesized from the GPS oscillator frequency fg, any variations in the GPS local oscillator frequency fg will also affect the intermediate frequency fIF. This effect can be significant due to a multiplier characteristic: a typical frequency synthesizer may multiply the iccai oscillator frequency by lOOx or more. Therefore any error in the local oscillator frequency f, is multiplied to provide fg*, and this multiplied error can significantly vary the intermediate frequency fo from its desired value.<br>
[062] In order to observe and predict errors in the local oscillator and calibrate the GPS receiver with respect to the GPS signal, the erxor prediction and calibration system 30a receives the GPS local oscillator frequency fg from the GPS local oscillator 39 on a line 40, and also receives the cellular oscillator freauencv on the line 33. A frequencv comparison circuit 41 monitors the two frequencies and periodically provides its measurements to the following circuit; for example, the frequency comparison circuit may count over a fixed time interval the number of cycles for each of these two frequencies and provide these numbers directly to the error monitoring and prediction vs. time system 42. Alternatively, the frequency comparison circuit 41 may count the number of zero crossings, which equals 2x the number of cycles, and would improve accuracy due to doubling the number of comparisons. The counted number may be periodically provided in any suitable form, such as a raw count, as a ratio between the two frequencies, or as a<br><br>
frequency difference Si. Vinous other frequency comparison methods are also possible such as chose using spectral analysis methods, such as Fast Fourier Transform methods. [063] An error monitering and prediction vs. rime system 42 is coupied to the frequency comparison circuit 41 :o receive measurements of the two freauencies. Topically the measurements ire made and provided periodically, such as every one-half second or every second. The error monitoring and prediction vs. time system -42 'includes any suitable hardware or scfr.vare. and may include analog or digital devices. For example, the system 42 may be implemented digitally including a microprocessor, memory, firmware, and'or so ft"-are to provide its desired functions. As discussed in more detail with reference to Figs. 5 through 9, for example, the error monitoring system receives the frequency measurements, estimates and stores an error for each measurement, and determines a mathematical function responsive to a set of error estimations. From this function. :t calculates an error prediction value for the next time interval in any suitable form.<br>
[064] The error prediction value is supplied to the frequency correction generation circuit 43. which generates a correction signal on a line 44. In one embodiment the correction signal is in the form of a scale factor S. The correction signal is supplied to the GPS local oscillator 39. which in response adjusts the output GPS local oscillator frequency fg to correct for the predicted error.<br>
[065] Reference is now made to Fig. 4, which illustrates an alternate e embodiment of the posticn location system 27 and the error prediction and calibration system 30. In Fig. 4, many of the components are similar to those in Fig. 3, however, the correction signal is supplied on a line 45 to a digital oscillator 46 in the digital processing system 37a, instead of supplying the correction signal to the GPS local oscillator 39 as in Fig. 3. In Fig. 4, the digital processing system 37a includes a digital downconverter 47 coupled to the digital oscillator -6, to assist the GPS downconverter 34 in demodulating the GPS signal. The digital downconverter 47 receives the digital signal from the A/D converter 35, digitally combines it with the frequency of the digital oscillator 46, and generates a digitally-converted signal at a digital intermediate frequency firo- A GPS digital processing system 48 then receives the digitally-converted signal, attempts to acquire the GPS signal(s) contained therein, and processes it appropriately.<br>
[066] It may be noted that in the embodiment of Fig. 4, the GPS local oscillator 39'is not coupled to the error correction circuit 30b, and accordingly is not locked to the cellular<br><br>
oscillator trequency. Instead, the GPS local oscillator is allowed normal frequency variations- which will have the effect of varying the intermediate frequency fIF c: the signal from the GPS downconverter. The digital local oscillator 46 and -he digital downconverter 47 are utilized 10 convert rhe intermediate frequency fw to a new frequency fIF that corrects an error in the intermediate frequency fff responsive to the correction signal. Therefore in the embcdiment of F12. 4 the correction signal mav not be :centicai in form with the correction signal in the embodiment of Fig. 3 because thev are intended to control different elements. Also, the correction signal in either embodiment may include other adjustments as appropnate in addition to the error correction adjustment. [0671 Reference is now made to Fig. 5, which is a flow chart that shows a series of steps performed to predict an error and generate a correction signal in one embodiment of the invention. The following discussion with reference to Fig. 5 is intended to provide an overview of the error prediction and calibration method. Various aspects of this method are also described elsewhere in detail, such as with reference to Figs. 6A to 6D."". S, and 9. [068]      At 51, an observation time interval (period) begins.<br>
[069] At 52. the frequencies of the GPS and the cellular local oscillator are observed. In one embodiment, the GPS" and local oscillator frequencies are observed by comparing the difference between the two frequencies. In another, the ratio of the two frequencies is compared.<br>
[070] At 53, at the end of an observation interval a frequency measurement is made. For example, if the observation involves observing the frequency ratio between the GPS and local oscillator signals, then the average frequency ratio observed over that interval, such as by counting, is taken as the measurement. Then, the observation process returns to 51 to begin the next interval and repeat an observation and measurement for each subsequent period. Generally measurements are taken periodically, for example at 0.5 second to 2 second intervals.<br>
[071] At 54, the frequency measurement is used to estimate a frequency error for its respective time period. The frequency error estimation process at 54 may include comparing the frequency ratio during that period with a predetermined constant; for example, since the ratio between the GPS and ideal cellular frequencies is a predetermined constant Ro, then the error for the measurement can be estimated by looking at the difference between vthe predetermined constant and the observed ratio between the two frequencies.<br><br>
[072] At 55, after the error has been estimated, i: is stored in a suitable location, such us a memory in a digital implementation. For example, the error monitoring svstem -2 (Figs. 3 and 4) may include a database to store information regarding error estimation? for a plurality of time periods.<br>
[073] At 56, a set of error estimations is selected to provide data for the next steo. which is the function approximation step. The set may be preselected to 'Include a number of the most recent error estimations, such as the most recent 10 to 20 err:r estimations. [074] At 57, a function is approximated using the set of error estimations. For example, a mathematical function may be approximated by methods such as averaging said error estimations in said set; performing a linear regression method utilizing the error estimations in said set; or calculating a least-mean-square curve utilizing the error estimations in said set.<br>
[075] At 58, using the approximated function, a predicted'frequency error for the next time interval is determined. For example, the approximated function may be used directly to predict the frequency error in the next time interval.<br>
[076] At 59, the predicted frequency error is usee to develop a correction signal thai is applied to the appropriate local oscillator for the next time interval. F:r example, in the implementation of Fig. 3 the correction signal is supplied to the GPS lecal oscillator 29. and in the implementation of Fig. 4 the correction signal is supplied to the digital local oscillator 46.<br>
Frequency Errors in GPS Oscillator and Cell Phone Master Oscillator<br>
[077] Reference is now made to Figs. 6A, 6B. 6C, and 6D. The following is a analysis of the frequency errors for two cases: for case L the effects of platform motion are assumed minimal and the accuracy of the base station transmitter's carrier frequency is assumed essentially perfect and is tracked exactly by the cellular phone's oscillator. Case 2 differs in that it assumes that there are variations in the cellular phone"s oscillator. [078] For reference purposes, the oscillator that is frequency locked to the received ceil phone signal (or signals) is termed the cell phone master oscillator, and its frequency is referred to as the "cellular reference" or "cellular oscillator" frequency. The oscillator that is used to drive the GPS circuitry is referred to as the ;GPS reference" or "GPS oscillator". [079] Fig. 6A is a graph of typical frequency variations of cellular and GPS oscillator frequencies under stressed conditions in one example.  As shown in Fig. 6A, the cellular<br><br>
oscillator frequency fc is increasing from its initial value of fb and at the same time the GPS oscillator frequency fs is increasing from its initial value of f2 but at a faster rate. This is typical because the majority or the frequency error is often in the GPS oscillator rather than the cellular oscillator.<br>
[080] Fig. 6B is a graph of the ratio of the GPS oscillator frequency to the cellular ■ oscillator frequency over time using rhe frequency observations of Fig. 6A. As can be seen, the ratio is a function of both frequencies: however it is typically dominated by the GPS oscillator frequency. Although the ratio is shown as the GPS oscillator frequency divided by the cellular oscillator frequency, the inverse (i.e. the cellular oscillator frequency divided by the GPS oscillator frequency) could be used instead. A detailed discussion relating to frequency measurement and ratio calculation is provided elsewhere herein.<br>
[081] Fig. 6C is a graph of the error estimations using the ratios from Fig. 6B. In Fig. 6C the error estimation for each 1 second interval is taken at the midpoint of the time inverval: in other embodiments other suitable points may be used for the error estimations. Furthermore, in some embodiments, the frequency measurements and/or error corrections may be utilized to compute a set of calibration corrections, which may then be used in the curve fit procedure to approximate a function.<br>
[082] Fig. 6D is a graph of the frequency correction curve that is approximated from the error estimations in Fig. 6C. One process for generating the frequency correction curve is described in more detail below. It may be noted that the y-axis has units of a dimensionless "GPS oscillator frequency correction factor", which is a scale factor to be supplied to the GPS oscillator frequency in order to compensate for its errors.<br>
Case 1: Perfect Cellular Oscillator, Imperfect GPS Oscillator<br>
[083] Suppose the mobile oscillator locked to the cell site (the "cellular oscillator") has a first frequency fc and the mobile oscillator used to drive the GPS circuitry ("the GPS oscillator') has a second frequency fg. Suppose we write:<br>
r&gt;fgo+Sf,	(1)<br>
[084] where fgo is the ideal GPS frequency, which is the desirec GPS oscillator frequency, and Sf is defined as the difference between the ideal GPS frequency and the actual GPS oscillator frequency. . One example of the cellular "and GPS oscillator frequencies is shown in Fig. 6A.<br><br>
[085] The ideal GPS frequency bears a specific ratio relative to the ideal cellular frequency:<br>
Ro= fgo/ fco-	(2A ■-<br>
[086] If we assume that the cellular oscillator frequency fc is ideal (i.e. assume f: = f:0), then<br>
Ro=fgo/fc.	,	(2B)<br>
[087] Fig. 6B shows the one example of the calculated ratio using the observations from Fig. 6A. In alternative embodiments a similar procedure can be employed in which the ratio of the cellular oscillator frequency to that of the GPS reference oscillator is measured, i.e. we compute the quantity fc/ fg instead of R (see (3)[088] In one example the desired GPS oscillator frequency r\o might he 16.368 MHz and fc (ideal) might be 19.2 MHz in which case Ro=0.8525. Fig. 6C is a graph that shows the error measurements for successive intervals, by forming the ratio:<br>
R= V fc= (fgo+5f)/fc= Ro+8f/fc.	(3)<br>
[089] Since we know Ro we can subtract it from this ratio (the ratio is measured for example using a frequency counter type operation, as explained below) leaving us with an error ratio 5f/fc. Of course, with knowledge of fc we can determine 5f. [090] To correct fcr the GPS error in one embodiment the GPS oscillator frequency f% can be scaled by an amount that produces a frequency fso; that is, we wish to find a scale factor S that produces S = fgo/fg. This scale factor is then computed to be:<br>
S   =  fgo/f* = fgo'Cfgo+Sf) = l/(l+5f/fgo) = (1 - 5f/fgo - (Sf/f^o)2 - „.)<br>
- (l-5f/fgo)	(4)<br>
[091] where the latter approximation follows from the fact that the fractional error in the oscillator frequency is typically very small (between 10 and 100 PPM). This is computed in one example, and shown in Fig. 6D. We see that for all practical purposes the modification of the GPS frequency is the factor (1 - 5f/fgo). Note that the sign of the scale factor correction is the opposite of the error ratio correction (see equation (3)).<br>
Case 2 Imperfect Cellular and GPS Oscillators [092]      Here we write<br>
fg=fgo+Sfg, for ttie GPS oscillator and<br>
fc=fc0+5fc,<br><br>
for the cellular oscillator, where fg0 and fc0 are the :deal GPS and cellular oscillator frequencies, and 5fg. and 5fc are the errors present in each of the oscillators. [093]      Typically these errors vary as a function of time. Then following the analysis ;:r case 1 above we have the ratio of the frequencies:<br>
R= fs/fc= (fgo-r-SfgV (fcc-ofc) = :&gt;;f,o(l+ofg/fgo)/|,l--5fc/fco)<br>
- Ro(l+5fg/fg0)(l-ofc/f.o)<br>
~ Ro(l +5fs/fso - 5fc/fco)<br>
=  Ro -rOfg/fcO ~ 5f: toQit:0'	'■<br>
[094] where we have neglected higher order terms, which is valid due to the small size of Sfc/fco and 5f3/fco- Examining (5) we see that it is identical to (2). except for the last term - 5fc fso/fc<f which is now nonzero since we assume nonzero. also see that the effect on ratio of cellular oscillator error relative to gps proportional ratios these two errors i.e. hence for example if in hertz was and nominal frequencies were same then would be due by itself. when compensate utilizing an equation based upon only first quantities right hand side will make error. typically have no way measuring it zero some cases a long term average cause short variations this quantity small correction scale factor similar case computed sfg however from instead residual subtracting ro fgo accordingly correct apply incorrect i last term. second latter approximately one determines left after compensation procedure.></f>
Frequency Measurements<br>
[096]      In one embodiment the ratio of the frequencies is computed using a frequency<br>
counting type procedure in which, the cellular oscillator is used as a "timebase" ar-d the<br><br>
GPS oscillator is used as the frequency :o be counted. Typically a fixed number of cycles of the timebase are counted to establish a time interval.<br>
[0971 For example if the cellular oscillator frequency were nominally 19.2 MHz. then counting 19.2 million cycles would establish a time interval of 1 second. During this time interval, the number of cycles, or the number of zero-crossings of the GPS oscillator .-ire counted. The number of cycles of the GPS oscillator counted over this 1 second interval is clearly proportional to the frequency of the GPS oscillator. In fact for this particular example, the number of cycles counted over the 1 second interval would be the estimate of :he GPS oscillator frequencv in Hertz. Counting zero crossings of this oscillator provides improved accuracy since there are approximately twice as many zero crossings as complete cycles over any interval.<br>
[098] One alternative to the above is to use the GPS oscillator as the timebase. i.e. to establish the counting interval, and then to count the number of cycles or zero-crossings of the cellular oscillator. Obviously this ratio is proportional to the reciprocal ox the frequency of the GPS oscillator frequency, i.e. to the period of the GPS oscillator frequency. This method is called the reciprocal counting method, or inverse method, whereas the prior mentioned method is called the direct method. -[099] The direct counting method is normally superior to the reciprocal counting method, when the GPS oscillator frequency exceeds that of the cellular oscillator, and conversely the reciprocal counting method is superior when the cellular oscillator frequency exceeds that of the GPS oscillator frequency.<br>
[0100] In alternative embodiment, more precision methods of computing frequency ratios are available, at the expense of more complexity. One of the main sources of error in the above counting procedures is the fact that the number of counts of an oscillator during a time interval is quantized in units of either one cycle or one-half cycle, depending upon the method used. This time quantization effect can be reduced in several ways. In one method, instead of performing a single frequency counting procedure over a period of time T, we perform M counting procedures over adjacent periods of time T/M each, without stopping the counters. Individual count numbers for each of the M intervals will be obtained and this set of numbers can be fit with a linear regression procedure (assuming that the frequency drift is linear) to determine a least-mean square fit to the frequency. This approach win reduce the RMS error due to quantization (and even other sources of<br><br>
noise), by an amount approximately equal to M1/2, relative to the procedure that utilizes<br>
one time interval of length T.<br>
[0101]    In another embodiment, the clock from the frequency source to be measured mav<br>
be treated like an analog signal and is sampled at times determined by the timebase i'e.^. at<br>
times equal to N clock cycles of the timebase).  The data so obtained is Fourier analyzed<br>
and will produce a spectral line at a frequency related to that of the reference clock.<br>
Various interpolation procedures may be utilized to make a precise estimate of this<br>
frequency.   This approach also provides improved performance over that of the single<br>
interval count method.<br>
[0102]    Other frequency estimation methods may also be utilized, but the net result is to<br>
perform an estimate of the ratio of the frequencies of the cellular and the GPS oscillators.<br>
Linear Regression Example for Approximating a Function<br>
[0103]    Following is an example of one method for approximating a function o:<br>
frequency error vs. time.  For example, a frequency calibration process can be performed<br>
periodically, perhaps at 1 second intervals. A set of error estimations is used to determine<br>
frequency rate of change vs. time utilizing linear (or even higher order) regression, which<br>
will tend to smooth out a rapid frequency jump, such as as —100 to -100 Hz frequency<br>
jump that may occur when driving by a cell base station.<br>
[0104]    If the last m error estimations comprise the set used to determine the frequency<br>
drift profile, then in one example the least-mean-square fit to a linear drift is given by:<br>
Eyn(n-n)<br>
f.= v  /     ^	,;6A)<br>
2,1101-n)<br>
f0=y-f,n	»6B)<br>
[0105] where yn are the set of M frequency measurements, each having variance Z", n are the measurement times, fj is the estimate of the linear frequency vs. time characteristic and  f0  is the estimate of frequency corresponding to the first of the m frequerxy<br>
measurements. The overbar indicates an average of the corresponding quantity. In the presence of random RMS error per measurement of magnitude C, the mean-square errors of the measurements of (6) are given by:<br><br><br>
measurements is 1/2 cycle of rhe supplied correction signal (from -he cellular oscillator for example). If this signal is 19 MHz. then the quantization step size for a 1 second measurement interval is 1/38C6=2.6L10" . If the error is uniformiv distributed over this step size, the RMS error in frequency for a 1 second measurement interval is simply<br>
2.61O'3l2 =7.6ll0"9, which corresponds to 12.0 Hz at the GPS LI frequency. From (7B) it can be seen that if we process twelve such measurements, the RMS frequency error would be around 3.45 Hz. Furthermore, the error in frequency slope is found from (7A) to be 0.0S4 times the RMS error per measurement, or 0.084D7.6D10'9=6.35I10"10 Hz/sec. This corresponds to approximately 1.0 Hz/sec at the GPS LI frequency. Clearly the calibration method utilizing 12 measurements can produce superior frequency slope measurements. We see that the calibration method itself should be more :han adequate to provide the frequency measurement accuracy needed to determine the frequency offset and rate of change of the GPS oscillator. In cases where a linear slope model may not provide an accurate fit, a quadratic slope fit is often appropriate. Particularly, in those cases, a quadratic regression alternative to (6) may work well.<br>
[0107] Of course in some embodiments it is possible that the above errors may be dominated by errors in the cellular oscillator rather than the GPS oscillator. However, for CDMA systems the cellular oscillator tracks a cellular signal that in principle achieves long term stability commensurate with cesium standards. In GSM systems, the cellular signed is also very stable, being synchronized to a high quality TCXO. Typically the dominant source of error in the cellular oscillator is that associated with platform motion. [0108] One advantage of the approach described herein is that the normal frequency variations are usually bounded by the Doppler frequency limits associated with the vehicle motion. Therefore, the following discussion will analyze the deleterious effects of the platform motion upon the estimates.<br>
[0109] In some circumstances an issue may arise when using a linear regression approach such as that discussed above. Suppose the uncorrected GPS local oscillator exhibits a linear frequency error versus time. If one observes this error over a period of M<br><br>
time periods, then the resulting correction will be a constant plus a linear function of time. Accordingly- at time period M+l, the corrected GPS local oscillator will exhibit very little error. Hence, if one then performs a linear regression using the errors for the last M periods including the small error at time period M+L one will get an erroneous result. One way around this problem is to compute for ezch time period (M-l. M+2, and so forth), the GPS local oscillator frequency that would have been present if the frequency corrections were not made. This is straightforward to do since we need only accumulate the set of GPS local oscillator frequency corrections and subtract these from the current oscillator sening to arrive at the uncorrected frequencies. These uncorrected frequencies may then be applied to the linear (or higher order) regression procedure. Other approaches to avoid the above effect are those based upon closed loop correction procedures in which a fraction of the currently measured error is fed to a filter whose output represents the current correction to the oscillator's control.<br>
Tracking Errors due to Motion<br>
[0110]    Reference is now made to Figs. 7, 8, and 9 to illustrate an analysis of vehicle<br>
motion in the context of the error calibration approach described herein. Motion should be<br>
of consequence  only  for  vehicular speeds;  at  pedestrian  speeds,  for example   1.0<br>
meter/second, the maximum Doppler at LI frequency is only 5,3 Hz and significant<br>
acceleration is not common. Such small Dopplers should negligibly affect tracking<br>
performance.<br>
Rapid Frequency Jumps Due to Vehicle Passing Near Cell Tower [0111] Fig. 7 is a graph showing a linear slope estimate resulting from a nearly instantaneous +100 Hz to 400Hz frequency jump. Particularly, in Fig. 7, the observed Doppler from a cell tower, as computed for the GPS frequency, changes from +100 Hz to -100 Hz in one second. This could occur for example if the cell base station tower is immediately next to a roadway across which an automobile is traveling a: around 42 miles per hour. This of course can be scaled up for higher speed vehicles. However, normally the cell tower is much further from the highway and hence it would not be typical to observe such an abrupt change in frequency; instead it is more likely to observe a smoothly changing Doppler, perhaps over several seconds. This more realistic situation is analyzed shortly.<br><br>
[0112] Assume we use the procedure described in the previous section and we use 12 calibration measurements together with the linear regression fit. With the above assumptions, if we did not use the linear regression fit. we might observe a rapid change in frequency of 200 Hz/sec, maximum. The smoothing effect of the 'inear regression, however, is shown in Fig. 7.<br>
[0113] To obtain the curve of Fig. 7 running estimates of frequency slope vs. time were performed utilizing a set of twelve measurements in the absence of added noise or any other linear slopes. As can be seen in the figure the maximum error in slope estimate is about-25.1 Hz.<br>
[0114] If +100 to -100 Hz jump were present together with an additional linear slope (e.g. due to oscillator drift), then the estimator error will still be identical to that shown in Fig. 7. In one experiment, the performance loss for 25 Hz frequency slope error is analyzed and the output SNR loss is found to be only about 0.6 dB for the typical'settings used during high sensitivity tracking. The discussion of the prior section also illustrates that the quantization related errors in slope estimation are insignificant compared to this error.<br>
[0115] Fig. 8 is a graph that shows a linear slope estimate of a somewhat more realistic situation in which a cell base station tower is about 15 meters from the roadway and about 15 meters high and a vehicle is traveling at 60 miles per hour (27 meters per second). This is a relatively low cell tower close to the highway. This results in an excursion in Doppler from +142 Hz to -142 over a period of several seconds. The resulting linear slope estimate is shown in Fig. 8. It is also assumed that only the direct pilot from the cell tower is utilized for the AFC measurement (i.e. not weighted by other reflected pilots). The presence of additional pilots will typically improve the situation. In the single pilot case one sees that the worst case estimate is in error by about 34.2 Hz. One analysis has shown that the degradation in output SNR for this case to be about 1.13 dB.<br>
Random Fluctuations Due to Pilot Tone Power Variations<br>
[0116] The celltower situation analyzed above with reference to Fig. 3 is expected to be a worst case situation under most conditions. Other situations of interest include those in which several pilot signals are received and combined to control the AFC loop. One or the other such pilots may dominate as a function of time, causing the AFC to shift around. However, one would expect this rapid shifting to be most prominent in heavy urban<br><br>
environments where vehicle speed  -ormally expected to be substantially less than that analyzed above. In addition random fluctuations of the AFC as a function of time will :end to cause an averaging effect that reduces the frequency sloce excursions. [0117] Fig. 9 is a graph that depicts :he linear slope estimate for random frequency data normally distributed. Suppose the effects of the vehicle motion cause the AFC frequency to wander about the range [-50 Hz, 50 Hz] with a random value every second. Then a simulation over 1000 seconds of this situation produces a frequency slope estimate shown in Fig. 9. Analysis of this simulation with the prior 12 measurement linear regression indicates an RMS slope estimate errrr4.2 Hz, which is consistent with the prediction from (7A) that would be -.18 Hz :*-:r this case. This small error causes negligible performance loss.<br>
3.        Further Comments and Improvements<br>
[0118] Various modifications of the above linear regression may be utilized to further improve the above results. For example, special filtering may be done on the calibration samples. In one scenario above, the frequency vs. time function is basically a step function, and thus, if one differentiates a step function the result will be a large spike that can be filtered out via a suitable thresholding technique. A further integration operation yields the calibration samples with the frequency step function removed. Alternative methods may be developed based upon recognizing certain "patterns" of calibration values vs. time that are most likely associated with expected conditions. Also, it should be clear the system described herein applies generally to any positioning system for example the Russian Glosnass System, the planned European Galileo System, the U.S. Global Positioning System, and any other Satellite Positioning System.<br>
[0119] It will be appreciated by those skilled in the art, in view of these teachings, that alternative embodiments may be implemented without deviating from the spirit or scope of the invention. This invention is to be limited only by the following claims, which include all such embodiments and modifications when viewed in conjunction with the above specification and accompanying drawings.<br><br><br>
CLAIMS<br>
WHAT IS CLAIMED IS:<br>
 A method ot calibrating and correcing GPS receiver to receive a GPS signal in a mobile device using an externally transmitted signal, comprising:<br>
producing a first frequency locked to said externally transmitted signal: generating a second frequency in a GPS oscillator that is applied to process said GPS signal;<br>
predicting a GPS oscillator error for the next time period: and correcting the GPS receiver in the next time period responsive to said predicted GPS frequency error.<br>
2.	The method of claim 1 wherein said step of predicting a GPS oscillator error further<br>
comprising repeatedly measuring said firs: and second frequencies over a plurality of time<br>
periods to provide a plurality of measurements.<br>
3.	The naethod of claim 2 wherein said step of predicting a GPS oscillator ^rror in the next<br>
time period includes:<br>
calculating  a set of error estimations  responsive to  said plurality of measurements; and<br>
fitting a mathematical function responsive to said set of error estimations.<br>
4.	The method of claim 1 wherein said correcting step comprises correcting a GPS local<br>
oscillator that supplies said second frequency to convert said GPS signal at said GPS<br>
frequency into a predetermined intermediate frequency.<br>
5.	The method of claim 1 wherein said GPS receiver comprises a digital processing<br>
system that includes a digital local oscillator, and said correcting step comprises correcting<br>
said digital iocal oscillator.<br>
6.	A method of calibrating and correcting a GPS receiver in a mobile device usins an<br>
externally transmitted signal- other than a GPS signal, said externally transmitted signal<br>
having a predefined precision carrier frequency, to receive a GPS signal transmitted at a<br><br>
predefined GPS frequency, comprising the steps of:<br>
generating a first frequency signal -esponsive to said precision carrer frequency;<br>
generating a second frequency signal in said GPS receiver, said second frequency signal applied to process said GPS signal;<br>
estimating an error in said first and second frequencies in a first time period, and<br>
repeating said error estimating step for it least one additional time period x nrovide a set of error estimations;<br>
approximating an error function of said second frequency responsive to said set of error estimations;<br>
predicting an error'in a next time period utilizing said approximated<br>
function; and	<br>
correcting said second frequency of said GPS receiver to process said GPS signal in said next time period responsive to said predicted error.<br>
7.	The method of claim 6 further comprising repeatedly measuring a ratio of =aid second<br>
and said first frequencies over a plurality of time periods, and for each time period<br>
comparing this ratio to a predetermined number to estimate said error respectively for each<br>
time period.<br>
8.	The method of claim 6 wherein said error prediction step induces determining a<br>
frequency error vs. time of said second-frequency by fitting a mathematical function<br>
responsive to said set of error estimations.<br>
9.	The method of claim S wherein said error prediction step comprises one of:<br>
averaging said set of error estimations; and<br>
performing a mathematical regression method utilizing said set of error estimationsto produce a least-mean-square fit to said set of error estimations.<br>
10.	The method of claim 6 wherein said externally-transmitted signal is provided by a<br>
cellular base station, said mobile device comprises a cellular transceiver, and further<br>
comprising:<br><br>
frequency-Seeking said precision carrier frequency to provide said first frequency; and<br>
communicating between said mobile device and said cellular base station.<br>
11.	The method of claim 6 further comprising extracting a precision carrier frequency from said externally-transmitted signal to provide said first frequency.<br>
12.	The method of claim 6 wherein said correcting steo comprises correcting a GPS local oscillator that supplies said second frequency to convert said GPS signal at said GPS frequency into a predetermined intermediute-frequency.<br>
13.	The method of claim 6 wherein said GPS receiver comprises a digital processing<br>
svstem that includes a digital local oscillator, and said correcting step comprises correcting<br>
said digital local oscillator.<br>
14.	A method of calibrating and correcting a GPS receiver in a mobile device to<br>
receive a GPS signal transmitted at a predefined GPS frequency using a communication<br>
signal transmitted from a cellular base staion, said communication signal including a<br>
predefined precision carrier frequency, comprising the steps of:<br>
synchronizing a first local oscillator to the precision carrier frequency to generate a first frequency;<br>
generating a second frequency signal in said GPS receiver having a nominal value close to a predetermined value, said second frequency signal applied to process said GPS signal;<br>
monitoring said first and second frequencies over a plurality of time periods :o provide a frequency measurement for each of said plurality of time periods;<br>
estimating an error in said first and second frequencies for each monitored time period to provide a set of error estimations;<br>
approximating a frequency error vs. time function for said second frequency by fitting a mathematical function responsive to said set of error estimations;<br>
predicting an error in a next time period utilizing said approximated<br>
function;	v   -<br>
developing a correction signal for said next time period responsive to said predicted error; and<br><br>
processing said GPS signal responsive :o said correction signal.<br>
15.	The method of claim 1- wherein said monitoring step comprises repeatedly measuring<br>
a ratio of said second and said first frequencies over a plurality of time periods, and for<br>
each time period comparing this ratio to a predetermined number to estimate said error<br>
respectively for each time period.<br>
16.	The method of claim 14 wherein said error prediction step comprises one of:<br>
averaging said error estimations in said set;<br>
performing a mathematical regression method utilizing the error estimations in said set in order to<br>
calculate a least-mean-square curve to said error estimations.<br>
17.	The method of claim 14 further comprising the step of correcting the frequency or a GPS local oscillator that supplies said second frequency to convert said GPS signal at said GPS frequency into a predetermined intermediate frequency, responsive to said correction signal.<br>
18.	The method of claim 14 wherein said GPS receiver comprises a digital processing system that includes a digital local oscillator, and further comprising the step of correcting a frequency output from said digital local oscillator, responsive to said correction signal.<br>
19.	A multiple function portable device for providing cellular communication using a<br>
network of cellular stations that operate at predefined ideal cellular frequencies, and also<br>
for providing position location using GPS satellites that transmit GPS signals at a<br>
predefined GPS frequency, comprising:<br>
a cellular communication system including a first local oscillator that generates a first frequency for demodulating communications with said network of cellular stations;<br>
a GPS system including a second local oscillator that generates a second frequency coupled to process said GPS signals;<br>
an error prediction and correction system that predicts an error in a next time period responsive to measurements of said first and second frequencies over a<br><br>
plurality of previous time periods, said system also generating a correction signal for said next time peniod responsive to said predicted error; and<br>
a local oscillator in said GPS system that receives said correction signal and responsive thereto processes said GPS signai during said next time period.<br>
20.	The multiple function portable device of claim 19 wherein said error prediction and<br>
correction system comprises:<br>
a frequency comparison circuit;<br>
an error mcnitor and prediction circuit; and<br>
a frequency correction generation circuit.<br>
21.	The multiple function portable device of claim 19 wherein said frequency comparision circuit includes means for monitoring said first and second frequencies and periodically providing measurements indicative of said the first and second frequencies during an observation period, and said error monitor and prediction circuit periodically compares each said measurement with a predetermined number to orovide an error estimation for each time period.<br>
22.	The multiple function portable device of claim 19 wherein said error monitor and prediction circuit comprises a system for approximating a mathematical function responsive to said plurality of error estimations.<br>
23.	The multiple function portable device of claim 22 wherein said approximating system comprises one of:<br>
means for averaging said error esdmations over a predefined number of periods;<br>
means for performing a mathematical regression method utilizing said error estimations over a predefined number of periods of time to calculate a least-mean-square of said error estimations over said plurality of periods of time.<br>
24.	The multiple function portable device of claim 19 wherein said local oscillator<br>
comprises a GPS local oscillator that provides said second frequency.<br><br>
25. The multiple function portable device of claim 19 wherein said local oscillator comprises a digital local oscillator that is utilized in the digital frequency translation of a GPS signal.<br><br></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyOS1DSEVOUC0yMDA1IENMQUlNUyBHUkFOVEVELnBkZg==" target="_blank" style="word-wrap:break-word;">1229-CHENP-2005 CLAIMS GRANTED.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyOS1DSEVOUC0yMDA1IENPUlJFU1BPTkRFTkNFIE9USEVSUy5wZGY=" target="_blank" style="word-wrap:break-word;">1229-CHENP-2005 CORRESPONDENCE OTHERS.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyOS1DSEVOUC0yMDA1IENPUlJFU1BPTkRFTkNFIFBPLnBkZg==" target="_blank" style="word-wrap:break-word;">1229-CHENP-2005 CORRESPONDENCE PO.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyOS1DSEVOUC0yMDA1IEZPUk0gMS5wZGY=" target="_blank" style="word-wrap:break-word;">1229-CHENP-2005 FORM 1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyOS1DSEVOUC0yMDA1IEZPUk0gMi5wZGY=" target="_blank" style="word-wrap:break-word;">1229-CHENP-2005 FORM 2.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyOS1DSEVOUC0yMDA1IEZPUk0gMy5wZGY=" target="_blank" style="word-wrap:break-word;">1229-CHENP-2005 FORM 3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyOS1DSEVOUC0yMDA1IEZPUk0gNS5wZGY=" target="_blank" style="word-wrap:break-word;">1229-CHENP-2005 FORM 5.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyOS1DSEVOUC0yMDA1IFBFVElUSU9OUy5wZGY=" target="_blank" style="word-wrap:break-word;">1229-CHENP-2005 PETITIONS.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyOS1DSEVOUC0yMDA1IFBPV0VSIE9GIEFUVE9STkVZLnBkZg==" target="_blank" style="word-wrap:break-word;">1229-CHENP-2005 POWER OF ATTORNEY.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyOS1jaGVucC0yMDA1LWFic3RyYWN0LnBkZg==" target="_blank" style="word-wrap:break-word;">1229-chenp-2005-abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyOS1jaGVucC0yMDA1LWNsYWltcy5wZGY=" target="_blank" style="word-wrap:break-word;">1229-chenp-2005-claims.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyOS1jaGVucC0yMDA1LWNvcnJlc3BvbmRuZWNlLW90aGVycy5wZGY=" target="_blank" style="word-wrap:break-word;">1229-chenp-2005-correspondnece-others.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyOS1jaGVucC0yMDA1LWNvcnJlc3BvbmRuZWNlLXBvLnBkZg==" target="_blank" style="word-wrap:break-word;">1229-chenp-2005-correspondnece-po.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyOS1jaGVucC0yMDA1LWRlc2NyaXB0aW9uKGNvbXBsZXRlKS5wZGY=" target="_blank" style="word-wrap:break-word;">1229-chenp-2005-description(complete).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyOS1jaGVucC0yMDA1LWRyYXdpbmdzLnBkZg==" target="_blank" style="word-wrap:break-word;">1229-chenp-2005-drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyOS1jaGVucC0yMDA1LWZvcm0gMS5wZGY=" target="_blank" style="word-wrap:break-word;">1229-chenp-2005-form 1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyOS1jaGVucC0yMDA1LWZvcm0xOC5wZGY=" target="_blank" style="word-wrap:break-word;">1229-chenp-2005-form18.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyOS1jaGVucC0yMDA1LXBjdC5wZGY=" target="_blank" style="word-wrap:break-word;">1229-chenp-2005-pct.pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="228844-insecticidal-proteins-derived-from-bacillus-thuringiensis.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="228846-applicator-with-two-liquids.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>228845</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>1229/CHENP/2005</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>12/2009</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>20-Mar-2009</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>11-Feb-2009</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>13-Jun-2005</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>QUALCOMM INCORPORATED</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>5775 MOREHOUSE DRIVE, SAN DIEGO, CALIFORNIA 92121,</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>KRASNER, NORMAN, F</td>
											<td>3 LAKE COURT, EMERALD HILLS, CA 94062,</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>G01S 5/14</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/US03/39495</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2003-12-10</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>60/433,138</td>
									<td>2002-12-13</td>
								    <td>U.S.A.</td>
								</tr>
								<tr>
									<td>2</td>
									<td>10/336,125</td>
									<td>2003-01-03</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/228845-method-and-device-for-correction-and-calibration-of-gps-system by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 09:28:35 GMT -->
</html>
