<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/226717-method-of-encoding-pictures-of-an-uncompressed-digital-video-sequence-method-of-transcoding-pictures-of-a-compressed-digital-video-sequence-and-apparatuses-therefor by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 04:58:08 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 226717:METHOD OF ENCODING PICTURES OF AN UNCOMPRESSED DIGITAL VIDEO SEQUENCE, METHOD OF TRANSCODING PICTURES OF A COMPRESSED DIGITAL VIDEO SEQUENCE AND APPARATUSES THEREFOR .</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">METHOD OF ENCODING PICTURES OF AN UNCOMPRESSED DIGITAL VIDEO SEQUENCE, METHOD OF TRANSCODING PICTURES OF A COMPRESSED DIGITAL VIDEO SEQUENCE AND APPARATUSES THEREFOR .</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>A method of encoding pictures of an uncompressed digital video sequence includes analyzing (12 or 14) a picture of the uncompressed digital video sequence with a first algorithm (MPEG2) to measure a first value of the picture&#x27;s complexity (X12, Xp2 or Xb2) and to assign the first picture&#x27;s picture type, and estimating (18) a second value of the picture&#x27;s complexity (X14, XP4 or XB4) using the first measured value as a parameter. The picture is then encoded (24) with a distinct second algorithm (H.264) employing the second value of the first picture&#x27;s complexity and the first picture&#x27;s picture type as parameters.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>METHOD OF ENCODING PICTURES OF AN UNCOMPRESSED DIGITAL VIDEO<br>
SEQUENCE, METHOD OF TRANSCODING PICTURES OF A COMPRESSED DIGITAL<br>
VIDEO SEQUENCE AND APPARATUSSES THEREFOR<br>
BACKGROUND OF THE INVENTION<br>
[0001] The present invention relates to compression coding of<br>
video signals, and more particularly to rate control with a picture-<br>
bass i lookahead window for dual-pass compression encoding /<br>
transcoding, and a method of encoding pictures of an uncompressed<br>
digital viceo sequence, a method of transcoding pictures of a<br>
compressed cigital video sequence and apparatusses for the same.<br>
[0002] '"wo of the international standards for digital video<br>
compression are known as MPEG2 (H.262) and H.264 (MPEG 4 part 10).<br>
There are several other standards to which the invention might be<br>
applied, such as H.261, MPEGl and H.263, but the following<br>
description of an embodiment of the invention refers mainly to MPEG2<br>
and F. 264 so we will not discuss the other standards.<br>
[0003] A: uncompressed video stream can be described as a<br>
consecutive series of pictures, or frames. An individual frame<br>
describes a particular setting at a particular instant in time. A<br>
scene is a series of frames describing the same setting at<br>
consecutive moments in time. The second frame of a scene shows the<br>
same setting as the first frame, slightly further in the future. MPEG<br>
standards take advantage of that repetition of information using what<br>
is known as temporal encoding. In accordance with an MPEG video<br>
compression standard, such as MPEG2, the encoder divides a video<br>
stream into sets of related pictures, known as groups of pictures<br>
(GOPs) . Each frame within a GOP is labeled by the encoder as an<br>
intrafrome, a predicted frame or a bi-directional frame. An<br>
intrafreme (I type frame) is encoded using only information from<br>
within that frame. No temporal encoding is used to compress<br>
the frame. A predicted (P type) frame is encoded using<br>
information from within the frame and uses an earlier I<br>
frane or P frame as a reference for temporal compression. I<br>
and P frames are referred to as anchor frames. A bidirectional<br>
(B type) frame is encoded using information<br>
from within the frame and can also use information from at<br>
least one earlier anchor frame and at least one later anchor<br>
frame. Within a GOP, the I frame is generally the most<br>
complex, followed by the P frames, and the B frames typically<br>
have the least amount complexity.<br>
[0004] In one conventional implementation of MPEG2, each<br>
GO3 {which is referred to herein as a standard GOP) has a<br>
period (N) of 15 pictures, or frames, and includes only one I<br>
type picture, which is the first picture in the GOP. The<br>
fourth, seventh, tenth and thirteenth pictures are P type<br>
pictures and the remaining ten pictures are B type pictures.<br>
Thus, each standard GOP is composed of 5 sub-groups of 3<br>
pictures each. Each sub-group is made up of an anchor picture<br>
and two B type pictures. The spacing between anchor pictures,<br>
in this case 3, is known as the intra-period (M) of the GOP.<br>
Thus a standard GOP, in display order, will appear as:<br>
IBBPBBPBBPBBPBB<br>
[0005] In this conventional implementation of MPEG2, the<br>
standard GOP is closed, i.e.. it does not make any<br>
predictions based on frames outside of the GOP.<br>
[0006] A video stream is further sub-divided in MPEG<br>
standards by defining a frame as being made up of a series of<br>
macro-blocks (MBs) . A macro-block contains all the<br>
information required to display an area of the picture<br>
representing 16x16 luminance pixels.<br>
[0C07] MPEG2 and H.264 specify the syntax of a valid bit<br>
sti earn and the ways in which a decoder must interpret such a<br>
bit stream to arrive at the intended output, the output being<br>
uncompressed digital video. The MPEG standards do not,<br>
however, specify an encoder. An encoder is defined as any<br>
device, hardware or software, capable of outputting a bit<br>
stream that will produce the desired output when input to an<br>
MPEG compliant decoder.<br>
[0008] In a typical application of an encoder, an<br>
uncompressed video signal is input to the encoder and encoded<br>
in accordance with the applicable compression standard and<br>
the newly encoded signal is output from the encoder, received<br>
by a decoder and decoded for viewing. In order to accommodate<br>
variation in the rate at which data is received by the<br>
decoder, the decoder may include a buffer that receives the<br>
encoded data and provides data to the decoding process. The<br>
encoder must ensure that the encoded signal is being output<br>
at such a rate that the decoder may be continuously decoding<br>
the encoded signal and transmitting the decoded signal. If<br>
the encoder transmits the signal too slowly, there will be<br>
gaps in the data transmitted by the decoder as the decoder<br>
waits for data from the encoder. If the encoder transmits the<br>
signal too quickly, the decoder may not be able to keep up,<br>
causing buffer overflow at the decoder and unacceptable<br>
information loss. The process of managing an encoder's rate<br>
of transmission is known as rate control. The encoder keeps<br>
track of decoder buffer fullness by use of a virtual buffer.<br>
[0009] A simplistic method of rate control would be to<br>
assign a set number of bits to each picture, or frame, of the<br>
video signal to be encoded. However this is not efficient, as<br>
the number of bits used to encode every picture in the video<br>
stream must then be large enough no accommodate the most<br>
complex frame possible, when in fact a simple frame, such as<br>
a picture of a blue sky, will require fewer bits to encode<br>
than a complex frame (a picture of cloudy sunrise at the<br>
horizon} . A measure of a picture's complexity, prior to the<br>
picture being encoded, allows the encoder to make a hotter<br>
decision, regarding how many bits should be used to encode the<br>
picture. This method can be further improved if the encoder<br>
has knowledge of the complexity of frames that it will be<br>
encoding in the future. Consider a video stream that begins<br>
showing a clear blue sky, and then pans down to show a<br>
sunset. The initial frames will have a low measure of<br>
complexity and thus will be encoded using a relatively small<br>
number of bits. The later frames, however, contain much more<br>
complex information and will require a larger number of bits<br>
to encode. If, while deciding how many bits to allocate to<br>
the initial, simple, video frames, the encoder is made aware<br>
that it. will soon need to allocate a large number of bits to<br>
encoding more complex frames, the encoder may further reduce<br>
the number of bits used to encode the simple frames and avoid<br>
or redu:e the risk of overflowing a downstream decoder.<br>
[0010] Another effective method of controlling the number<br>
of bits used to encode a picture is by modifying the<br>
quantization step size dynamically for each MB within the<br>
frame. For an MB of generally uniform color and intensity<br>
only a small number of possible pixel values are necessary<br>
and thus less bits will be required to describe it. The<br>
inverse is true for an MB containing a wide variety of color<br>
and intensity values since the encoder will have to describe<br>
wider range of pixel values. In accordance with this approach<br>
each ME is assigned a quantization scale factor (Mquant) that<br>
is used, to modify quantization step size.<br>
[0011] During the development of the MPEG2 standard it<br>
became necessary to design a generic rate control and<br>
quantisation methodology with which to test bit-stream<br>
syntax, decoder designs and other aspects of the standard.<br>
This methodology was known as the Test Model and it evolved<br>
as the development of MPEG2 continued. The fifth and final<br>
version of the model (TM-5) was produced with the freezing of<br>
the MPi'132 standard. TM-5 is divided into three primairy steps:<br>
(a) target bit allocation; (b) rate control; and (c) adaptive<br>
quantisation.<br>
a) Target Bit Allocation<br>
[0012] As discussed above, the amount of bits allocated to<br>
a certain picture for encoding is a func-ion of that<br>
picture's complexity, relative to other pictures. For a<br>
particular GOP, a complexity weight factor is assigned for<br>
each picture type (X12, XP2 and XB2 for I, P and B type<br>
pictures respectively). X12. XP2 and XB2 represent the<br>
complexity measure for I, P, B pictures and may be calculated<br>
as:<br>
X12 = SI2QI2<br>
Xp2 = Sp2Qp2<br>
XB2 = Sb2Qb2<br>
where Si2, SP2 and SB2 are the number of bits for each picture<br>
and Q13, Qp2 and QB2 are the average quantization parameters<br>
for a]1 MBs in each picture (see below).<br>
[0013] In TM-5, bit allocation for a picture is targeted<br>
based on how much of the bit space allocated for the GOP is<br>
remaining, the type of picture being encoded, and the<br>
complexity statistics of recently encoded pictures of the<br>
same type. The target bit allocation is the number of bits<br>
TM-5 anticipates will be necessary to encode the frame.<br>
b) Rate Control<br>
[0014] If there is a difference between the target bit<br>
allocation (Btar) and the actual number of bits required to<br>
encode a picture (Bact) , than there is a risk of under or over<br>
filling TM-5's virtual buffer. The virtual buffer tracks the<br>
fullness of the decoder's buffer on an MB by MB basis while a<br>
picture is being encoded. Encoding all the MBs up to, but not<br>
including, the jth MB should use a certain portion of the<br>
total targeted bits. This portion is equal to Btar multiplied<br>
by this number of MBs already encoded (j-1) and divided by the<br>
total number of MBs in the picture (MB_cnt) . The number of<br>
bits actually generated by encoding up to, but not including,<br>
the jth MB is equal to B(j-t). The delta between the targeted<br>
and generated number of bits represents a change in the<br>
fullness of the virtual buffer after each MB is encoded (dj)<br>
and is calculated prior to encoding the jth MB.<br>
dj = d0 + B(j-1) - Btar* (j-1)/MB_cnt<br>
where d0 equals the fullness of the virtual buffer at the<br>
beginning of the current picture.<br>
[0015] If the virtual buffer begins to overflow, the<br>
quantization step size increases, leading to a smaller yield<br>
of bizs for the subsequent MBs. Similarly, if the virtual<br>
buffer begins to underfill, the quantization step size is<br>
decreased, leading to a larger yield of bits for subsequent<br>
MBs. This measure of the virtual buffer fullness is used to<br>
generate the MB's reference quantization number (Qj) .<br>
c) Adaptive Quantization<br>
[0016] The macro-block quantization step size is further<br>
modulated as a function of spatial activity (actj). The<br>
macro-block is divided into four 8x8 sub-blocks and the<br>
spatill activity is measured for each sub-block. The smallest<br>
of the four measurements is then normalized (N_actj) against<br>
the average spatial activity (avg_act) of the previously<br>
encoded picture. The minimum spatial activity measurement is<br>
used because the quality of a macro-block is no better than<br>
its sub-block of highest visible distortion.<br>
N_actj = (2*actj + avg_act)/(actj + 2*avg_act)<br>
[0017] The product of a MB's normalized spatial activity<br>
and its reference quantization parameter gives the MB's<br>
quantization scale factor (Mquantj)'.<br>
Mquantj = Qj*N_actj<br>
Generally, the encoding algorithms recommended by newer<br>
compression standards are more efficient, but they are<br>
usual_y more complicated to implement. With the fast growth<br>
in computation speeds of central processing units (CPUs) and<br>
digital signal processing (DSP) chips, implementation of more<br>
and more sophisticated algorithms has become practically<br>
feasiole. Video encoders/decoders (codecs) built based on<br>
newer standards eventually replace those built based on older<br>
standards in applications where specifications overlap, such<br>
as for bit-rate, resolution, etc. This replacement procedure<br>
takes a long period of time, since it is expensive to replace<br>
older video codecs with newer ones. Another reason older<br>
codecs continue to be used is that many video streams have<br>
already been compressed with the older algorithms, and may<br>
easily be decompressed by the older codecs. However where<br>
high coding efficiency is desired, there arises the mixed use<br>
of bcth older and newer codecs. In some applications it is<br>
desirable to re-transmit video streams compressed with an<br>
olden codec at a new bit-rate that is lower than the older<br>
codec can achieve for the same video quality. Therefore to<br>
obtain higher compression efficiency a transcoder having<br>
mixec codecs (an older decoder and a newer encoder) is used.<br>
One good example is a transcoder that converts MPEG2<br>
compressed video streams to H.264 compressed video streams.<br>
[0018] It is recognized by the digital compression<br>
industry that dual-pass encoding with a iookahead window<br>
provides higher coding efficiency than single-pass encoding.<br>
For the emerging, more sophisticated, compression<br>
technologies, even single-pass encoding is expensive and the<br>
cost of dual-pass encoding is much higher than that of<br>
single-pass encoding. Using two sophisticated codecs for<br>
encoding/transcoding in a dual-pass architecture raises the<br>
cost of the encoder/transcoder by almost an order of<br>
magnitude over the older technology codecs.<br>
In Klein Gunnewiek (U.S. Pat. No. 5, 757, 434), a picture's<br>
complexity is measured by an encoder / preanalyzer 8 using, for<br>
example, the MPEG 2 video coding standard. The measured complexity is<br>
then used oy an encoder 2 to encode the picture, also using the MPEG<br>
2 standard. The measured complexity is manipulated, but there is no<br>
description of using the measured complexity value to estimate a<br>
second complexity value or of the encoder 2 using a different<br>
encoding algorithm than the encoder 8.<br>
Keesmin (U.S. Pat. No. 5, 805, 224) describes using a decoding<br>
suk-assembly 201 to decode an encoded picture using a conventional<br>
MPE3 decoder (Col. 5, line 34 and col. 6, line 59) and to measure the<br>
decided picture's complexity and then the measured complexity is used<br>
in encoding the decoded picture using an MPEG based (Col. 9, line 41)<br>
encoding sub-assembly 202. As in Klein Gunnewiek, the measured<br>
complexity is manipulated, but there is no description of using the<br>
measured value to estimate a second value of the decoded picture's<br>
complexity or of the encoding sub-assembly 202 using a different<br>
encoding algorithm than the decoding sub-assembly 201.<br>
[0019] What is desired is the ability to achieve higher coding<br>
efficiency for minimal cost in an encoder / transcoder using mixed<br>
codecs.<br>
BRIEF SUMMARY OF THE INVENTION<br>
[0020] In accordance with a first aspect of the invention there<br>
is prcvided a method of encoding pictures of an uncompressed digital<br>
video sequence, each picture having a level of complexity, said<br>
method compri sing : analyzing a first picture of the uncompressed<br>
digital, video sequence with a first algorithm to measure a first<br>
value of the first picture's complexity and to assign the first<br>
picture's picture type, estimating a second value of the first<br>
picture's complexity using the first measured value as a parameter,<br>
and encoding the first picture with a distinct second algorithm<br>
employing the second value of the first picture's complexity and the<br>
first picture's picture type as parameters.<br>
[0021] In accordance with a second aspect of the invention there<br>
is a method of transcoding pictures of a compressed digital video<br>
stream each picture being encoded according to a first encoding<br>
algori:hm and having a level of complexity, said method comprising :<br>
decoding a first picture of the compressed digital video stream with<br>
a first decocing algorithm to produce a decoded version of the first<br>
picture and to measure a first value of the first picture's<br>
complexcity and to determine the first picture's picture type,<br>
estimating a second value of the first picture's complexity using the<br>
first value as a parameter, and encoding the decoded version of the<br>
first picture with a distinct second encoding algorithm employing the<br>
second value of the first picture's complexity and the first<br>
picture's pic ;ure type as parameters.<br>
[0022] In accordance with a third aspect of the invention there<br>
is an apparatus for encoding an uncompressed digital video input<br>
sequence composed of a succession of pictures, each picture having a<br>
plurality or characteristics associated therewith, said apparatus<br>
compr.sing : an extraction means for receiving the succession of<br>
pictures of the uncompressed digital video input sequence and<br>
employing a first method to obtain measured values for the plurality<br>
of characteristics of a picture of the input sequence and to assign a<br>
picture type to the picture, a delay means for receiving the<br>
succession of pictures of the input sequence and outputting the<br>
pictures in delayed fashion relative to the pictures of the input<br>
sequence, a value storage means for storing the measured values and<br>
the p cture type of a picture in the delay means, and a first<br>
encoding means for receiving a picture from the delay means and<br>
encoding the picture, the first encoding means being responsive to a<br>
measured value stored in the value storage means for adjusting the<br>
size c f the encoded version of the picture, wherein the first<br>
encoding means1 encodes the picture by a first encoding method and the<br>
extrac- ion means includes a second encoding means for encoding the<br>
pictures by a second encoding method, distinct from the first<br>
encoding method.<br>
[0023] In accordance with a fourth aspect of the invention there<br>
is an apparatus for transcoding a compressed digital video input<br>
stream composed of a succession of encoded pictures, each encoded<br>
picture having a plurality of characteristics associated therewith,<br>
said apparatus comprising : a decoding means for receiving the<br>
succession of encoded pictures of the compressed digital video input<br>
stream and emoloying a first method having a corresponding first<br>
encoding method to obtain a succession of decoded pictures and<br>
measure 1 values for the plurality of characteristics of a decoded<br>
picture and to assign a picture type to each of the decoded<br>
picture., a delay means for receiving the succession of decoded<br>
picture of the input stream and outputting the decoded pictures in<br>
delayed fashion relative to the encoded pictures of the input stream,<br>
a value storage means for storing the measured values and the picture<br>
type of a decoded picture in the delay means, and an encoding means<br>
for receiving a decoded picture from the delay means and encoding the<br>
picture using a second video coding method distinct from the encoding<br>
method corresponding to said first method, the encoding means being<br>
respcrsive to a measured value stored in the value storage means for<br>
adjusting the size of the encoded version of the picture, wherein the<br>
value storage means includes a means for manipulating a measured<br>
value of a first characteristic of a decoded picture to derive<br>
estimated values for a second characteristic of the decoded picture.<br>
[0024] An embodiment of the present invention provides<br>
rate control with a picture-based lookahead window for<br>
encoders/transcoders having mixed codecs in a dual-pass<br>
compressed video architecture. In a transcoder, where the<br>
input video signal is a compressed video signal, statistics<br>
are extracted by using a simple compression decoder to<br>
produce the statistics from the compressed video signal; and<br>
in an encoder, where the input video signal is an<br>
uncompressed video signal, statistics are extracted by using<br>
a simple compression encoder to generate the statistics from<br>
the uncompressed video signal. A trans-factor is calculated<br>
for a current picture based on previous pictures in a sliding<br>
"past" window to predict the complexity of the current<br>
picture, the trans-factor being a ratio of global complexity<br>
measures for the simple compression standard versus a<br>
sophisticated compression standard. Bits for the current<br>
picture are then allocated based on the complexity of future<br>
pictures in the lookahead or "future" window. If future<br>
pictures are difficult to encode, then less bits are<br>
a.L.-ocated to the current picture, and vice versa. This is<br>
effective for a scene change. Because the lookahead window<br>
takes into account the statistics of future pictures, i.e.,<br>
pictures that have not yet been compressed according to the<br>
sophisticated compression standard, a more reasonable bit<br>
allocation and better quality is achieved. After encoding<br>
the current picture according to the sophisticated<br>
corrpression standard, the actual bits, the picture complexity<br>
and the trans-factor for the encoded picture are updated as<br>
the past and lookahead windows are shifted by one picture,<br>
i.e., the encoded picture moves into the past window and out<br>
of the lookahead window as a new picture is loaded into the<br>
looks read window.<br>
[0025] The objects, advantages and other novel features of<br>
the present invention are apparent from the following<br>
detailed description when read in conjunction with the<br>
appended claims and attached drawings.<br>
ACCOMPANYING<br>
brief description of the several views of the drawings<br>
[0026] Fig. 1 is a block diagram view of a dual-pass<br>
encoder/transcoder architecture implementing rate control<br>
with a picture-based lookahead window according to the<br>
present, invention.<br>
[0027] Fig. 2 is a flow chart view of a rate control<br>
algorithm according to the present invention.<br>
[0028] Fig. 3 is a conceptual view of virtual sliding<br>
windows according to the present invention.<br>
DETAILED DESCRIPTION OF THE INVENTION<br>
[0029] Fig. 1 illustrates an encoder/transcoder having a<br>
simple compression decoder 12 for receiving and decoding a<br>
compressed video stream encoded according to a simple<br>
compression standard, such as MPEG2, to produce an<br>
uncompressed video signal and related statistics.<br>
Alternatively a simple compression encoder 14 receives an<br>
uncompressed video stream to generate related statistics.<br>
The statistics are input to a lookahead window module 18 for<br>
processing by a rate control algorithm, described below,<br>
while the uncompressed video signal in either configuration<br>
(transcoder or encoder) is input to a storage and delay<br>
nodule 16. The storage and delay module is a buffer memory<br>
that receives, delays and outputs the uncompressed video<br>
stream. The lookahead window module contains the statistics<br>
for each picture in the storage and delay module 16, for<br>
example, the number of bits for the picture, the picture type<br>
and the average quantization step size over all the macro-<br>
blocks for the picture. The lookahead window module 18<br>
generates bit allocation data from the statistics for use by<br>
a sophisticated compression encoder 24, such as an H.264<br>
encoder, in determining rate control for the sophisticated<br>
encoding process. The storage and delay module compensates<br>
for the time required for the lookahead window module 18 to<br>
generate bit allocation data.<br>
[0030] The delayed uncompressed video stream from the<br>
storage and delay module 16 is input to an adaptive pre-<br>
filtsr 20 to produce a filtered uncompressed video stream.<br>
The iiilter may be a low-pass filter that attenuates high<br>
spatal frequencies in the images represented by the<br>
uncompressed video stream and thus serves to "blur" the<br>
unconpressed video stream so that it is easier to compress,<br>
i.e., is less complex and so requires fewer bits to compress.<br>
The strength of the filtering may depend on a threshold or<br>
cut-off frequency above which spatial frequency components<br>
are attenuated and on the degree to which high spatial<br>
frequencies are attenuated.<br>
[0031] Both the delated uncompressed video stream from the<br>
storage and delay module 16 and the filtered, uncompressed<br>
video stream are input to a switch 22 which selects one of<br>
the streams. The selected uncompressed video stream from the<br>
switch 22 and the bit allocation data from the look ahead<br>
window module 18 are input to the sophisticated compression<br>
encoder 24 to produce a compressed video stream according to<br>
a sophisticated compressed video standard, such as H.2 64<br>
(MPEG4, Part 10). The sophisticated compression encoder 24<br>
also provides a control signal to the adaptive pre-filter 20<br>
and to the switch 22 that determines the "strength" of the<br>
filtering and which uncompressed video stream is to be'<br>
encoded. The strength of the filtering may be implemented as<br>
different filtering levels or may be continuous. The<br>
adaptive pre-filter 20 may be switched off or set to a low<br>
strength for minimum filtering when the filtered uncompressed<br>
video stream is not selected for encoding by the<br>
sophisticated compression encoder 24.<br>
[0032] By using a simple encoder/decoder 12/14 instead of<br>
a sophisticated encoder/decoder at the input, the<br>
implementation cost is reduced close to that of a single-pass<br>
sophisticated codec. However the information on complexity<br>
estimation for pictures in the lookahead window module 18 is<br>
not exactly the desired information for the sophisticated<br>
compression encoder 24. For example, a P-type picture needs<br>
high b.-t-rate for motion compensation in simple (MPEG2)<br>
compression encoding if its corresponding original picture<br>
was recorded during light off/on/off transition time. On the<br>
ether Land this P-type picture may be a simple picture for<br>
the sophisticated (H.264) encoder. Despite this deficiency,<br>
a correlation of picture complexity estimation can be made,<br>
based on both the simple and sophisticated compression<br>
standards. In most cases a picture or a group of pictures<br>
(GOP) that is relatively complicated/simple for the simple<br>
compression standard is also relatively complicated/simple<br>
for the sophisticated compression encoder 24. The complexity<br>
statistics still indicate important relationships among<br>
picturee and macro-blocks (MBs), with the error being<br>
colerable. Therefore compared to single-pass sophisticated<br>
coding, the pseudc dual-pass sophisticated coding is superior<br>
in video coding efficiency with only a slightly higher<br>
implemennation cost.<br>
[0033] The statistics of picture complexity are used for:<br>
- estimation of a bit-rate target and selection of<br>
coantizer step sizes of macro-blocks for a current, picture<br>
before second pass encoding; and<br>
- control of the strength of the adaptive pre-filter 20<br>
for a current GOP which includes the current picture before<br>
second pass encoding.<br>
[0034] The larger the volume of statistics that are<br>
available to compute the bit allocation provided to the<br>
compression encoder 24, the better the video quality<br>
performance of the encoder/transcoder". Therefore the storage<br>
and delay module 16 stores multiple uncompressed images. Each<br>
image of the uncompressed video stream will ultimately be<br>
encoded by the sophistficated compression encoder 24 as an I,<br>
P or B type picture. The type of picture (I, P or B) that a<br>
given uncompressed image will be encoded as is based on the<br>
statistics provided to the lookahead window module 18.<br>
Therefore, even though the images stored in the module 16 are<br>
not encoded, it will be convenient to refer to these images<br>
as I, P, or B type pictures. The number of images stored by<br>
the module 16 is limited by the size of the memory and an<br>
allowed maximum delay. A storage length corresponding to at<br>
least two GOPs of the input video signal is desired. For the<br>
purpose of this description, it is assumed that the storage<br>
and delay module is designed to contain two standard GOPs of<br>
fifteen pictures each.<br>
[0035] "'The lookahead window module 18 sets a bit-rate<br>
target for the current picture being encoded based on the<br>
received statistics, which include picture types (I, P or B),<br>
picture size (in bytes), and average quantizer step sizes at<br>
picture levels.<br>
[0036] The picture complexity in the sense of encoding is<br>
not the same for the two different compression standards. A<br>
t-type picture may be complicated and need high bit-rate for<br>
rotion compensation in MPEG2 encoding if its corresponding<br>
original picture was recorded during flash light off/on/off<br>
transition time. On the other hand this P-type picture may<br>
be a simple picture to an H.264 encoder which is able to select one out of up to six reference pictures for motion<br>
prediction, and one of the references may be strongly<br>
correlated with this P-type picture, as indicated above.<br>
[0037] In addition to setting the bit-rate target, the<br>
statistics of picture complexity obtained by the lookahead<br>
window module 18 may also be used for generating the control<br>
signal for the adaptive pre-filter 20 to control the strength<br>
of the low-pass filtering. If the rate control information<br>
indicates that the current picture is a difficult picture<br>
which needs more bit-rate to encode, the strength of the<br>
adaptive pre-filter 20 may be increased so that the picture<br>
is heavily low-pass filtered, i.e., becomes softer and easier<br>
to encode. The sophisticated compression encoder 24 employs<br>
the switch 22 to select either the delayed uncompressed video<br>
signal output from the storage and delay module 16 or the<br>
filtered video signal output by the adaptive pre-filter 20<br>
based on the rate control information and on the virtual<br>
buffer fullness of the sophisticated compression encoder 24.<br>
For example, if the virtual buffer is approaching full and<br>
the rate information indicates that the current picture for<br>
encoding requires more bits than are available in the virtual<br>
buffer, then the amount of pre-filtering is increased so that<br>
the virtual buffer does not overflow and the filtered<br>
uncompressed video is the video signal that is encoded. If<br>
there is no danger of virtual buffer overflow, then the<br>
currez t picture is slightly filtered or not filtered at all.<br>
In the latter event the uncompressed video signal from the<br>
storage and delay module 16 is used as the input for<br>
encoding. However, frequently and abruptly changing the<br>
filter strength and/or switching between the uncompressed<br>
video signal and the filtered uncompressed video signal<br>
within a GOP may lead to a motion compensating residue signal<br>
for P and B pictures. This is avoided by smoothly<br>
controlling the pre-filter 20 within a GOP. If a picture is<br>
filtered, any other pictures which use it as reference should<br>
also be filtered with at least the same filter strength.<br>
[0038] The rate control algorithm used, by way of<br>
illustration, is based on the Test Model 5 (TM5)<br>
specification. TM5 takes a complexity measure to allocate<br>
target: bits for each picture and then sets a quantization<br>
parameter for each MB based en the fullness of the virtual<br>
buffer. In the transcoder configuration all of the<br>
information about the input video signal is available from<br>
the encoded compressed video stream via the decoder 12,<br>
especially the statistics about the complexity of the input<br>
content. In the encoder configuration all the information<br>
about the input video signal is available from the<br>
uncompressed video stream via the simple encoder 14,<br>
especially the statistics about the complexity of the input<br>
contents. The rate control algorithm includes two parts:<br>
1 Take "past" statistics for complexity prediction.<br>
2 Take "future" statistics for bit allocation.<br>
Both processes are adaptive and a past sliding window and a<br>
future sliding window are maintained to update the statistics<br>
after each picture is encoded. Note that the past sliding<br>
window is located in the lookahead window 18 and the future<br>
sliding window is located in the sophisticated compression<br>
encoder 24. Contrary to prior applications that used sliding<br>
windows which increment in terms of GOPs, the sliding windows<br>
of the present invention are picture-based, and move forward<br>
after encoding each picture.<br>
[0039] The rate control algorithm has four steps: (a)<br>
statistics extraction; (b) complexity prediction; (c) bit<br>
allocation; and (d) statistics update.<br>
(a) Statistics Extraction<br>
[0040] When transcoding from an MPEG2 variable bit-rate<br>
(VBR) stream to an H.264 constant bit-rate (CBR) stream or<br>
encoding an uncompressed video stream to an H.264 CBR stream<br>
the following information is collected:<br>
1. Average quantization parameters (quantization step<br>
size) for each picture.<br>
2. Output bits for each picture.<br>
3. Picture type (I, P, B) for each picture.<br>
Items 1 and 2 are used for calculation of the input video's<br>
complexity, while item 3 records the picture type that is<br>
used by the sophisticated compression encoder 24.<br>
(b) Complexity Prediction<br>
[0041] Complexity prediction is to predict the complexity<br>
of a current picture from a prior simple/sophisticated<br>
(MPEG2/H.264) complexity ratio and the input complexity of<br>
the current picture. In TM5 the current picture's complexity<br>
is predicted by that of the previous picture of the s.sme<br>
type. In an embodiment of the invention, the current<br>
picture's complexity is predicted on the basis of the<br>
complexity of all pictures of the same type in the past<br>
window. However since the statistics are based on a sample<br>
encoding format an adjustment to the algorithm in the form of<br>
a scaling factor, referenced here as trans-factor, is<br>
introduced to take into account the difference between; the<br>
sophistication of the two standards and/or the two bit rates.<br>
The trans-factor is calculated as the average of previous<br>
simple/sophisticated ratios and is updated after the encoding<br>
of each picture. Because of the different properties of<br>
different picture types, the trans-factor is calculated<br>
independently for each picture type.<br>
[0042] The complexity prediction algorithm has two steps:<br>
[0043] 1. Calculate a current trans-factor for a current<br>
picture by averaging previous trans-factors<br>
[0044] At the beginning of a video sequence to be<br>
encoded/transcoded there are three initial values for :he<br>
trans-factor, corresponding to the three picture types (I, P,<br>
B) respectively. The average trans-factor over a past sliding<br>
window is generally better than that of only one picture and<br>
takes into account pictures that have already been encoded by<br>
the sophisticated encoder 24 and are within the past window.<br>
[0045] A GOP can be described as containing NI I type<br>
pictures, NP P type pictures and NB B type, pictures. For a<br>
standard GOP, as described above:<br>
N = 15<br>
M = 3<br>
Ni = 1<br>
Np = (N/M) - NI = (15/3) - 1 =4<br>
Nh = N - NI - Np =15-1-4 =10<br>
[0046] The storage and delay module 16 contains W GOPs.<br>
For this discussion, it will be assumed that the module 16 is<br>
designed to store 2 standard GOPs. Wi, WP and WB represent the<br>
total number of I, P and B type pictures respectively in the<br>
storage and delay module 16.<br>
WI = WNi =2* (!) = 2<br>
Wr = W(Np) = 2* (4) = 8<br>
WB = W(Nb) = 2* (10) = 20<br>
[0047] The trans-factor Tcur of a picture in the<br>
uncompressed video stream is calculated by averaging the<br>
trans-factors of the previous Wtype pictures of the same type<br>
(I, P or B), the number of previous trans-factors that are<br>
averaged being equal to the total number of pictures of that<br>
type in the storage and delay module 16 (WlA WP, WB).<br><br>
where j is the picture number of the current picture.<br>
[0048] For a storage and delay module 16 that contains two<br>
standard GOPs, as described above, two, eight or twenty<br>
previous trans-factors are averaged for an I, P or B type<br>
picture respectively.<br>
[0049] 2. Predict current picture's complexity<br>
[0050] For I and P type pictures, the current picture's<br>
sophisticated, or MPEG4, complexity (X14, XP4 or XB4) is then<br>
predicted from the picture's simple, or MPEG2, complexity<br>
(XI2. Xp2 or Xb2) using the updated trans-factor (Tcur) to<br>
appropriately scale the simple complexity factor. The trans-<br>
factors for B type pictures are further adjusted by a weight<br>
facLor (KB4) to take into account the different quality<br>
requirements for different picture types. This weight factor<br>
has been empirically determined and is a function of the<br>
ratio of the current GOP's I type simple complexity and the<br>
average simple complexity of the GOP's B type pictures.<br>
 )<br>
[0C51] Kb4 is larger for a well-predicted sequence, i.e. a<br>
sequence without fast motion, and is smaller for a sequence<br>
with fast motion. KBi is set adaptively after encoding each<br>
GCP in accordance with the ratio Xi/XB where Xi and XB are the<br>
average simple complexity of all I and B pictures in the<br>
current GOP .<br>
[0052] In principle, the sophisticated complexity XP4 for a<br>
P type picture may also adjusted by a weight factor (KP4) , but<br>
it ha= been found that this is not necessary in practice.<br>
c) Bit Allocation<br>
[0053] Bit allocation may be based on GOP-layer and<br>
picture-layer. Picture-layer breaks the GOP boundary and<br>
performs better than GOP-layer. This is particularly<br>
effective for scene changes in the video signal. Bit<br>
allocation has two steps.<br>
[0054] 1. Allocate target bits for current (kth) picture<br>
[0055] The target size (Tw) , in bits, for all the pictures<br>
currently referenced in the sliding lookahead window is<br>
calculated based on the number of pictures in the window<br>
(wF) , the constant bit rate (R) , in bits per second, and the<br>
picture rate (F), in pictures per second.<br>
Tw -- WF(R/F)<br>
[0056] Then the targeted number of bits (B4_tar(k)) to be<br>
ellocated for the kth picture is calculated by multiplying TM<br>
t/ the ratio of the current picture's complexity factor to<br>
the complexity factor of all the pictures in the sliding<br>
I )okahead window.<br><br>
[0057] This calculation essentially identifies the<br>
proportior of the target size (TM) that should be used for<br>
the currert picture. The size of the current picture when<br>
encoded by the complex encoding algorithm is not permitted to<br>
be larger than the size of the current picture when encoded<br>
by the simple compression algorithm (B2 (k)) . Thus, the size<br>
of the current picture when encoded is clamped to B2 (k) . If<br>
B4 .ar(k) does exceed B2 (k) , the number of bite targeted for<br>
the kta picture is still B4_tar(k). However it is already known<br>
that the smaller number B2 (k) will be the upper limit of bits<br>
used when the encoding actually takes place. Thus there is a<br>
known surplus of bits in the target window. The target window<br>
size in then modified to take the extra bits into account.<br><br>
[0058] 2. Adaptive quantization and encoding (TM5)<br>
[0059] Before encoding MBj the fullness of the virtual<br>
buffer is computed for I, P, B independently:<br><br>
where 2j is the number of bits generated by encoding all MBs<br>
in the picture up to and including j, MB_cnt is the number of<br>
MBs in the picture, T is the constant bit rate (CBR) per<br>
picture, d0 is the initial fullness of the virtual buffer and<br>
dj is the fullness of the virtual buffer at MBj. The<br>
reference quantization parameter Qj is then computed for MBj<br>
Qj = dj*5l/r<br>
where the reaction parameter, r, is<br>
r = 2*R/F<br>
Adaptive quantization:<br>
[0060] The spatial activity for MBj from four luminance<br>
picture-organized sub-blocks (n = 1 . . . 4) and four<br>
luminance field-organized sub-blocks (n=5. . .8) are<br>
computer using the original pixel values<br><br>
where<br>
where- P is the pixel gray level.<br>
Then normalize acty.<br>
N_actj = ; {2*actj) + avg_act) / {actj + (2*avgr_act) )<br>
where avg_act is the average value of actj for the last<br>
picture to be encoded.<br>
Then adjust mquantj as:<br>
mquantj = Qj* N_actj<br>
The t:.nal value of mquantj is clipped to a range [1 ... 51]<br>
and used for the quantization. Delta Q? should be clipped to<br>
[-26,26], as defined by H.264 semantics. Then encode one MB<br>
with mquantj and repeat this step until all MBs of the<br>
current picture are encoded.<br>
[0061] (d). Update picture complexity and trans-factor for<br>
just ancoded picture<br>
[0062] The picture complexity and trans-factor for the<br>
just encoded picture are updated and stored in the sliding<br>
past vindow for use with future pictures.<br>
[0063] 1. Trans-factor is defined as the ratio of<br>
"global complexity measure" of corresponding simple and<br>
sophisticated compression standards pictures.<br>
Cr [current_picture_SNj = XI2/X14<br>
Tp [current_picture_SNj = XP2/Xp4<br>
Tß [current_picture_SNj = XB2/XB4<br>
standard complexity is determined and entered in the past<br>
window while the oldest one is shifted out. A new picture a<br>
statistics are leaded into the lookahead window to determine<br>
a new complexity for the window as the next picture to be<br>
encoded becomes the current picture.<br>
[0066] Thus the present invention provides rate control<br>
with a picture-based sliding window to simplify<br>
transcoding/encoding from a simple compression standard to a<br>
sophisticated compression standard by extracting statistics<br>
for a video signal using the simple compression standard, by<br>
using the extracted statistics and virtual buffer fullness to<br>
control a lowpass pre-filter for the uncompressed video<br>
signal, and by encoding the filtered or unfaltered<br>
uncompressed video signal using a trans-factor which is the<br>
ratio of global complexity measures for the simple and<br>
sophisticated compression generated standards pictures with a<br>
sliding window on a picture-by-picture basis, updating the<br>
trans-factor and sliding window for each picture.<br>
[0067] It will be appreciated that the invention is not<br>
restricted to the particular embodiment that has be?n<br>
described, and that variations may be made therein without<br>
departing from the scope of the invention as defined in the<br>
appended claims and equivalents thereof. Unless the contex,<br>
indicates otherwise, a reference in a claim to the rumber of<br>
instances of an element, be in a reference to one instance of<br>
more than one instance, requires at least the stated number<br>
of instances of the element but is not. intended to exclude<br>
from the scope of the claim a structure or method having more<br>
instances of that element than stated.<br>
WE CLAIM :<br>
1. A method of encoding pictures of an uncompressed digital video sequence, each picture having<br>
a level of complexity, said method comprising :<br>
analyzing a first picture of the uncompressed digital video sequence with a first algorithm to<br>
measure a first value of the first picture's complexity and to assign the first picture's picture type,<br>
estimating a second value of the first picture's complexity using the first measured value as a<br>
parame er. and<br>
encoding the first picture with a distinct second algorithm employing the second value of the<br>
first picture's complexity and the first picture's picture type as parameters.<br>
2. A method as claimed in claim 1, comprising :<br>
analyzing the first picture with the second encoding algorithm to measure a third value of the<br>
first pit lure's complexity, and<br>
storing the picture type and a complexity ratio of the first picture.<br>
3. A method as claimed in claim 1 or 2, comprising, prior to encoding the first picture with the<br>
second algorithm,<br>
generating an encoded version of a past picture with the second algorithm, said encoded version<br>
of the past picture having a size, and<br>
estimating a value of a future picture's complexity,<br>
and wherein the step of encoding the first picture with the second algorithm further comprises :<br>
determining a target size for the first picture using the size of the past picture and the<br>
estimated value of the future picture's complexity as parameters, and<br>
encoding the first picture with the second algorithm employing the first picture's target<br>
size as a parameter.<br>
4. A method as claimed in claim 3, wherein the step of encoding the first picture with the second<br>
algorithm produces an encoded version of the first picture, and the step of determining the target size<br>
of the firsr. picture comprises predicting the size of said encoded version of the first picture.<br>
5. A method as claimed in claim 2, 3 or 4, wherein the first picture's complexity ratio is calculated<br>
by dividing the first value of the picture's complexity by the third value of the first picture's complexity.<br>
6. A method as claimed in any one of claims 1 to 5, wherein the first picture is followed by a<br>
plurality of pictures of the uncompressed video sequence, and the method comprises :<br>
analyzing each of the plurality of pictures of the uncompressed digital video sequence with the<br>
first algorithm to measure first values of each picture's complexity and to assign each picture's picture<br>
type,<br>
estimating a second value of each picture's complexity, using each picture's first value as a<br>
parameter, and<br>
encoding each of the plurality of pictures with the second algorithm employing the second value<br>
and picture type of each picture as parameters.<br>
7. A method as claimed in claim 6, comprising :<br>
analyzing each of the plurality of pictures with the second encoding algorithm to measure a third<br>
value of the complexity for each picture, and<br>
storing the picture type and complexity ratio for each of the plurality of pictures.<br>
8. A method as claimed in claim 6 or 7, wherein the plurality of pictures is followed by a second<br>
picture, and the method comprises :<br>
aralyzing the second picture with the first algorithm to measure a first value of the second<br>
picture's amplexity and to assign the second picture's picture type,<br>
estimating a second value of the second picture's complexity using the first value as a parameter,<br>
and<br>
encoding the second picture with the second algorithm, employing the second value of the<br>
second picture's complexity and the second picture's picture type as parameters.<br>
9. A method as claimed in claim 8, comprising estimating the second picture's second value by<br>
dividing the second picture's first value by a translation factor.<br>
10. A method as claimed in claim 9, comprising calculating the second picture's translation factor<br>
by averaging the stored complexity ratios associated with a sub-set of the plurality of pictures, the subset<br>
being the pictures that have been encoded by the second algorithm and have the same picture type<br>
as the second picture.<br>
11. A method as claimed in claim 10, comprising :<br>
analyzing the second picture with the second encoding algorithm to measure a third value of the<br>
second picture's complexity, and<br>
storing the picture type and complexity ratio of the second picture.<br>
12. A method as claimed in any one of claims 1 to 8, wherein the step of estimating the first<br>
picture's second value comprises dividing the first value by a default value based on the first picture's<br>
picture type.<br>
13. A method as claimed in any one of claims 1 to 12, comprising :<br>
receiving an unfiltered version of the first picture,<br>
creating a filtered version of the first picture prior to encoding the first picture with the second<br>
algoriihm, and<br>
selecting either the unfiltered or filtered version of the first picture for encoding by the second<br>
algoriihm.<br>
14. A method of transcoding pictures of a compressed digital video stream, each picture being<br>
encoded according to a first encoding algorithm and having a level of complexity, said method<br>
comprising :<br>
decoding a first picture of the compressed digital video stream with a first decoding algorithm to<br>
produce a decoded version of the first picture and to measure a first value of the first picture's<br>
comp exity and to determine the first picture's picture type.<br>
estimating a second value of the first picture's complexity using the first value as a parameter,<br>
and<br>
encoding the decoded version of the first picture with a distinct second encoding algorithm<br>
empleying the second value of the first picture's complexity and the first picture's picture type as<br>
parameters.<br>
15. A method as claimed in claim 14, comprising :<br>
analyzing the decoded version of the first picture with the second encoding algorithm to<br>
measure a third value of the first picture's complexity, and<br>
storing the picture type and a complexity ratio of the first picture.<br>
16. A method as claimed in claim 14 or 15, comprising, prior to encoding the decoded version of<br>
the first picture with the second algorithm,<br>
generating an encoded version of a past picture with the second algorithm, said encoded version<br>
of the past picture having a size, and<br>
estimating a value of a future picture's complexity.<br>
and wherein the step of encoding the decoded version of the first picture with the second<br>
algorithm comprises :<br>
determining a target size for the decoded version of the first picture using the size of the<br>
past picture and the second value of the future picture's complexity as parameters, and<br>
encoding the decoded version of the first picture with the second algorithm employing<br>
the first picture's target size as a parameter.<br>
17. A method as claimed in claim 16, wherein the step of encoding the first picture with the second<br>
algorithm produces an encoded version of the first picture, and the step of determining the target size of<br>
the decoded version of the first picture comprises predicting the size of said encoded version of the first<br>
picture.<br>
18 A method as claimed in claim 15, 16 or 17, wherein the first picture's complexity ratio is<br>
calculated by cividing the first value of the picture's complexity by the third value of the first picture's<br>
complexity.<br>
19. A method as claimed in any one of claims 14 to 18, wherein the first picture is followed by a<br>
pluralil&gt; of pictures of the compressed video stream, and the method comprises<br>
analyzing each of the plurality of pictures of the compressed digital video stream with the first<br>
algorithm to produce a decoded version of each picture and to measure a first value of each picture's<br>
complexly and to determine each picture's picture type,<br>
estimating a second value of each picture's complexity using each picture's first value as a<br>
parameter, and<br>
encoding the decoded version of each of the plurality of pictures with the second algorithm,<br>
employing the second value and picture type of each picture as parameters.<br>
20. A method as claimed in claim 19, comprising :<br>
analyzing the decoded version of each of the plurality of pictures with the second algorithm to<br>
measure a third value of the complexity of each picture and<br>
storing the picture type and complexity ratio for each of the plurality of pictures.<br>
21. A method as claimed in claim 19 or 20, wherein the plurality of pictures is followed by a second<br>
picture, and the method comprises :<br>
analyzing the second picture with the first algorithm to produce a decoded version of the second<br>
picture and to measure a first value of the second picture's complexity and to determine the second<br>
picture's picture type,<br>
estimating a second value of the second picture's complexity using the first value as a parameter,<br>
and<br>
encoding the decoded version of the second picture with the second algorithm employing the<br>
second value of the second picture's complexity and the second picture's picture type as parameters.<br>
22. A method as claimed in claim 21, comprising estimating the second picture's second value by<br>
dividing the second picture's first value by a translation factor.<br>
23. A method at claimed in claim 22, comprising calculating the second picture's translation factor<br>
by averaging the stored complexity ratios associated with a sub-set of the plurality of pictures, the sub-<br>
set being the pictures that have been encoded by the second algorithm and have the same picture type as<br>
the second picture<br>
24. A method as claimed in claim 23, comprising :<br>
analyzing the decoded version of the second encoded picture with the second algorithm to<br>
measure a third value of the second picture's complexity, and<br>
soring the picture type and the complexity ratio of the second picture.<br>
25. A method as claimed in any one of claims 14 to 21, wherein the step of estimating the first<br>
picture's second value is carried out by dividing the first value by a default value based on the first<br>
picture's picture type.<br>
26. A method as claimed in any one of claims 14 to 25, comprising :<br>
creating a filtered version of the first picture from an unfiltered, uncompressed version of the<br>
first picture prior to encoding the first picture with the second algorithm, and<br>
selecting either the unfiltered or filtered version of the first picture for encoding by the second<br>
algorithm .<br>
27. An apparatus for encoding an uncompressed digital video input sequence composed of a<br>
succession of pictures, each picture having a plurality of characteristics associated therewith, said<br>
apparatus comprising :<br>
ar extraction means for receiving the succession of pictures of the uncompressed digital video<br>
input sequence and employing a first method to obtain measured values for the plurality of<br>
characteristics of a picture of the input sequence and to assign a picture type to the picture,<br>
a delay means for receiving the succession of pictures of the input sequence and outputting the<br>
pictures in delayed fashion relative to the pictures of the input sequence,<br>
a value storage means for storing the measured values and the picture type of a picture in the<br>
delay means, and<br>
a first encoding means for receiving a picture from the delay means and encoding the picture,<br>
the first encoding means being responsive to a measured value stored in the value storage means for<br>
adjusting the size of the encoded version of the picture,<br>
wherein the first encoding means encodes the picture by a first encoding method and the<br>
extraction means includes a second encoding means for encoding the pictures by a second encoding<br>
method, distinct from the first encoding method.<br>
28. An apparatus as claimed in claim 27, wherein the value storage means comprises a means for<br>
manipulating a measured value of a first characteristic of a picture to derive estimated values for a<br>
second, characteristic of the picture.<br>
29. An apparatus as claimed in claim 27 or 28, wherein the first encoding means receives the<br>
picture type, a measured value of a characteristic and an estimated value of a characteristic associated<br>
with said picture and uses said picture type, said measured value and said estimated value as parameters<br>
for creating the encoded version of said picture.<br>
30. An apparatus as claimed in claim 27, 28 or 29, wherein the value storage means determines a<br>
predicted value of the size of an encoded version of a picture in the delay means and wherein the first<br>
encoding means adjusts the size of the encoded version of the picture received from the delay means in<br>
responst to the predicted value.<br>
31. An apparatus as claimed in any one of claims 27 to 30. wherein the first encoding means<br>
comprises a means for measuring a value of a picture's complexity, a means for storing the measured<br>
complexity value, and a means for storing the size of an encoded version of a picture.<br>
32. An apparatus as claimed in any one of claims 27 to 31, comprising :<br>
a filtering means for receiving an unfiltered picture from the delay means and creating a filtered<br>
picture and<br>
a switching means for receiving the unfiltered picture from the delay means, receiving the<br>
filtered picture from the filtering means and selectively transmitting either the unfiltered picture or the<br>
filtered picture to the first encoding means.<br>
33. An apparatus as claimed in claim 32, wherein the switching means is responsive to the first<br>
encoding means for selecting the unfiltered picture or the filtered picture for transmission to the first<br>
encoding means.<br>
34. An apparatus for transcoding a compressed digital video input stream composed of a succession<br>
of encoded pictures, each encoded picture having a plurality of characteristics associated therewith, said<br>
apparatus comprising :<br>
a decoding means for receiving the succession of encoded pictures of the compressed digital<br>
video input stream and employing a first method having a corresponding first encoding method to<br>
obtain a succession of decoded pictures and measured values for the plurality of characteristics of a<br>
decoded picture and to assign a picture type to each of the decoded pictures,<br>
a delay means for receiving the succession of decoded pictures of the input stream and<br>
outputting the decoded pictures in delayed fashion relative to the encoded pictures of the input stream,<br>
a value storage means for storing the measured values and the picture type of a decoded picture<br>
in the delay means, and<br>
a encoding means for receiving a decoded picture from the delay means and encoding the<br>
picture using a second video coding method distinct from the encoding method corresponding to said<br>
first method, the encoding means being responsive to a measured value stored in the value storage<br>
means for adjusting the size of the encoded version of the picture,<br>
wherein the value storage means includes a means for manipulating a measured value of a first<br>
characteristic of a decoded picture to derive estimated values for a second characteristic of the decoded<br>
picture.<br>
35. An apparatus as claimed in claim 34, wherein the encoding means receives a decoded picture,<br>
the picture type, a measured value of a characteristic and an estimated value of a characteristic<br>
associate: with said decoded picture and uses said picture type, said measured value and said estimated<br>
value as parameters for creating the encoded version of said decoded picture.<br>
36. An apparatus as claimed in claim 34 or 35, wherein the value storage means determines a<br>
predicted value of the size of an encoded version of a decoded picture in the delay means and wherein<br>
the encoding means adjusts the size of the encoded version of the decoded picture received from the<br>
delay means in response to the predicted value.<br>
37. An apparatus as claimed in claim 34, 35 or 36, wherein the encoding means comprises a means<br>
for measuring a value of a decoded picture's complexity, a means for storing the measured complexity<br>
value, and a means for storing the size of an encoded version of a decoded picture.<br>
38. An apparatus as claimed in claim 34, 35, 36 or 37 comprising :<br>
a filtering means for receiving an unfiltered decoded picture from the delay means and creating<br>
a filtered picture and<br>
a switching means for receiving the unfiltered picture from the delay means, receiving the<br>
filtered picture from the filtering means and selectively transmitting either the unfiltered decoded<br>
picture or the filtered picture to the encoding means.<br>
39. An apparatus as claimed in claim 38, wherein the switching means is responsive to the encoding<br>
means for selecting the unfiltered decoded picture or the filtered picture for transmission to the<br>
encoding means.<br>
A method of encoding pictures of an uncompressed digital video sequence<br>
includes analyzing (12 or 14) a picture of the uncompressed digital video sequence with<br>
a first algorithm (MPEG2) to measure a first value of the picture's complexity (X12, Xp2<br>
or Xb2) and to assign the first picture's picture type, and estimating (18) a second value<br>
of the picture's complexity (X14, XP4 or XB4) using the first measured value as a<br>
parameter. The picture is then encoded (24) with a distinct second algorithm (H.264)<br>
employing the second value of the first picture's complexity and the first picture's<br>
picture type as parameters.</td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyNS1LT0xOUC0yMDA1LUZPUk0tMjcucGRm" target="_blank" style="word-wrap:break-word;">1225-KOLNP-2005-FORM-27.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyNS1rb2xucC0yMDA1LWdyYW50ZWQtYWJzdHJhY3QucGRm" target="_blank" style="word-wrap:break-word;">1225-kolnp-2005-granted-abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyNS1rb2xucC0yMDA1LWdyYW50ZWQtYXNzaWdubWVudC5wZGY=" target="_blank" style="word-wrap:break-word;">1225-kolnp-2005-granted-assignment.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyNS1rb2xucC0yMDA1LWdyYW50ZWQtY2xhaW1zLnBkZg==" target="_blank" style="word-wrap:break-word;">1225-kolnp-2005-granted-claims.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyNS1rb2xucC0yMDA1LWdyYW50ZWQtY29ycmVzcG9uZGVuY2UucGRm" target="_blank" style="word-wrap:break-word;">1225-kolnp-2005-granted-correspondence.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyNS1rb2xucC0yMDA1LWdyYW50ZWQtZGVzY3JpcHRpb24gKGNvbXBsZXRlKS5wZGY=" target="_blank" style="word-wrap:break-word;">1225-kolnp-2005-granted-description (complete).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyNS1rb2xucC0yMDA1LWdyYW50ZWQtZHJhd2luZ3MucGRm" target="_blank" style="word-wrap:break-word;">1225-kolnp-2005-granted-drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyNS1rb2xucC0yMDA1LWdyYW50ZWQtZXhhbWluYXRpb24gcmVwb3J0LnBkZg==" target="_blank" style="word-wrap:break-word;">1225-kolnp-2005-granted-examination report.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyNS1rb2xucC0yMDA1LWdyYW50ZWQtZm9ybSAxLnBkZg==" target="_blank" style="word-wrap:break-word;">1225-kolnp-2005-granted-form 1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyNS1rb2xucC0yMDA1LWdyYW50ZWQtZm9ybSAxMy5wZGY=" target="_blank" style="word-wrap:break-word;">1225-kolnp-2005-granted-form 13.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyNS1rb2xucC0yMDA1LWdyYW50ZWQtZm9ybSAxOC5wZGY=" target="_blank" style="word-wrap:break-word;">1225-kolnp-2005-granted-form 18.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyNS1rb2xucC0yMDA1LWdyYW50ZWQtZm9ybSAzLnBkZg==" target="_blank" style="word-wrap:break-word;">1225-kolnp-2005-granted-form 3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyNS1rb2xucC0yMDA1LWdyYW50ZWQtZm9ybSA1LnBkZg==" target="_blank" style="word-wrap:break-word;">1225-kolnp-2005-granted-form 5.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyNS1rb2xucC0yMDA1LWdyYW50ZWQtcmVwbHkgdG8gZXhhbWluYXRpb24gcmVwb3J0LnBkZg==" target="_blank" style="word-wrap:break-word;">1225-kolnp-2005-granted-reply to examination report.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTIyNS1rb2xucC0yMDA1LWdyYW50ZWQtc3BlY2lmaWNhdGlvbi5wZGY=" target="_blank" style="word-wrap:break-word;">1225-kolnp-2005-granted-specification.pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="226716-a-device-for-measuring-pressure-and-a-method-performed-thereat.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="226718-process-for-the-expoxidation-of-olefins.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>226717</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>1225/KOLNP/2005</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>52/2008</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>26-Dec-2008</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>24-Dec-2008</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>23-Jun-2005</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>TUT SYSTEMS, INC. ,</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>6000 S.W. MEADOWS ROAD, SUITE 200, LAKE OSWEGO, OREGON 97035</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>YU GUOYAO</td>
											<td>12715 NW MILFORD STREET, PORTLAND, OR 97229</td>
										</tr>
										<tr>
											<td>2</td>
											<td>ZHOU ZHI</td>
											<td>3801 BROOKLYN AVENUE NE, #M305, SEATTLE, WA 98105</td>
										</tr>
										<tr>
											<td>3</td>
											<td>VAN DUSEN CHARLES H</td>
											<td>P.O. BOX 868, BEAVERTON, OR 97075</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>H04N 7/12</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/US2003/039184</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2003-12-09</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>10/316,483</td>
									<td>2002-12-10</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/226717-method-of-encoding-pictures-of-an-uncompressed-digital-video-sequence-method-of-transcoding-pictures-of-a-compressed-digital-video-sequence-and-apparatuses-therefor by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 04:58:09 GMT -->
</html>
