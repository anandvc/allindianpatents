<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/232306-a-method-and-system-of-forming-multicast-distribution-structures-within-a-network by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 13:05:09 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 232306:A METHOD AND SYSTEM OF FORMING MULTICAST DISTRIBUTION STRUCTURES WITHIN A NETWORK</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">A METHOD AND SYSTEM OF FORMING MULTICAST DISTRIBUTION STRUCTURES WITHIN A NETWORK</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>Techniques allow network devices to set up multiple multicast distribution structures for a given multicast group and source. According to the techniques, a multicast protocol is extended to include an instance number in the control messages, where the instance number corresponds to one of a plurality of instances for the multicast group and source. The network device sends a join request for each of the N instances for the multicast group to a plurality of upstream routers. Each of the join requests specifies a different instance of the multicast group to be joined. The source device for the multicast group selects one of the N instances, for example using a unicast Equal Cost Multipath (ECMP) haslling algorithm, and sends multicast content for the multicast group to via the multicast distribution structure corresponding to the selected one of the N instances.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td> <br><br>
FORMING EQUAL COST MULTIPATH MULTICAST DISTRIBUTION<br>
STRUCTURES<br>
TECHNICAL FIELD<br>
[0001] The invention relates to computer networks and, more particularly, to transmission of multicast content within a computer network.<br>
BACKGROUND<br>
[0002] A computer network is a collection of interconnected computing devices that exchange data and share resources. There are a number of approaches for communicating the data between the computing devices within the network. One approach, known as "multicasting," makes use of multicast trees allowing a source device to send a single data packet for distribution to a group of one or more recipient computing devices. With multicasting, the source device assigns a multicast identifier to the data, enabling each computing device of the group to receive a copy of the data. In some cases, the source device sends multicast packets over the network to a router configured for multicasting. In turn, the router replicates the packets and forwards copies of the packets to other multicast-enabled routers. The other routers, in turn, replicate the packets and repeat the forwarding process so that each of the recipient devices receives copies of the packets. In this manner, multicast packets are delivered through one or more networks using a multicast tree.<br>
[0003] Consumers may switch between different multicast content provided by a content provider or multiple content providers by submitting "multicast action requests.' In particular, the multicast action requests allow consumers to join and leave the various multicast groups associated with the multicast identifiers. An exemplary protocol for issuing multicast action requests, such as a join request, is the Internet Group Management Protocol (IGMP). To join a particular multicast group, receiving devices send multicast join requests to upstream (i.e., intermediate) routers, which in turn forward the join request to the source device.<br><br>
SUMMARY<br>
[0004] In general, the invention is directed to techniques for improving efficiency of multicast transmission in the network. Instead of establishing a single distribution structure (e.g., tree) for a given multicast group and source, the techniques may allow devices to set up multiple multicast distribution structures for a given multicast group and source. According to the techniques, a multicast protocol may be extended to include an instance number in the control messages used to set up a multicast distribution structure, where the instance number corresponds to one of a plurality of instances for the multicast group and source. The source device may then select one of the plurality of multicast distribution structures to use for sending the multicast content, for example using a unicast Equal Cost Multipath (ECMP) hashing algorithm.<br>
[0005] Each receiving node knows (e.g., by configuration or discovery protocol) the width of the ECMP, i.e., the number N of the plurality of instances for a multicast group and source. Each receiving node then sends Adjoin messages, each having a different instance number, distributed among the upstream devices. In this manner. N multicast trees may be formed, but since the source device selects only one of the plurality of multicast trees to send multicast content, each receiving device only receives one copy of the multicast content from the source device. The join messages may be sent using an extended Protocol-Independent Multicast (PIM) protocol or point-to-multipoint (P2MP) label distribution protocol (LDP). Although described for exemplary purposes with respect to IP multicast, the principles of the invention may also be applied to building multicast trees in other environments, such as LDP, P2MP, or multi-protocol label switching (MPLS) environments.<br>
[0006] In one embodiment, a method of forming multicast distribution structures within a network comprises joining, at a device, a plurality of instances N of a multicast group from a single source device, wherein each of the N instances corresponds to a different multicast distribution structure within the network for the multicast group.<br>
[0007] In another embodiment, a using multicast distribution structures within a network comprises selecting, at a source device for a multicast group, one of a plurality of instances N for the multicast group, and sending multicast content for the multicast group to the device via the multicast distribution structure corresponding to the selected one of the N instances.<br><br>
[0008] In further embodiment, a network device comprises a control unit storing configuration data that specifies an instance number N, and a multicast protocol executing within the control unit that, based on the instance number N, generates Adjoin requests for a plurality of instances N of a multicast group, wherein each of the N instances corresponds to a different multicast distribution structure for the multicast group. Each of the join requests specifies a different one of the N instances of the multicast group to be joined. The network device also includes an interface to output the join requests to a plurality of upstream devices located between the network device and a source device for the multicast group to join the multicast group.<br>
[0009] In yet another embodiment, a system comprises a source device that provides multicast content for a multicast group, and a network device coupled to the source device via a plurality of upstream devices located between the network device and the source device. The network device sends a join request for each of a specified plurality of instances N for a multicast group from the network device to the plurality of upstream routers. Each of the N instances corresponds to a different multicast distribution structure for the multicast group, and each of the join requests specifies a different one of the N instances to be joined. The source device selects one of the N instances and sends the multicast content for the multicast group to the network device via the multicast distribution structure corresponding to the selected one of the N instances.<br>
[0010] In another embodiment, a computer-readable medium comprises instructions for causing a programmable processor to specify a plurality of instances N for a multicast group from a single source device, wherein each of the N instances corresponds to a different multicast distribution structure for the multicast group. The instructions further cause the programmable processor to send a join request for each of the N instances from the device to a plurality of upstream routers located between the device and the source device for the multicast group. Each of the join requests specifies a different one of the N instances of the multicast group to be joined.<br>
[0011] The details of one or more embodiments of the invention are set forth in the accompanying drawings and the description below. Other features, objects, and advantages of the invention will be apparent from the description and drawings, and from the claims.<br><br>
BRIEF DESCRIPTION OF DRAWINGS<br>
[0012] FIGS. 1A-1D are a series of block diagrams illustrating an example system in which<br>
receiver devices and intermediate routers exchange multicast optimization data (MOD) and<br>
select upstream routers for receiving multicast traffic in a manner consistent with the<br>
principles of the invention.<br>
[0013] FIG. 2A is a block diagram illustrating an exemplary packet format for use by a<br>
downstream device in sharing multicast optimization data with an upstream device in a<br>
system to improve multicasting efficiency.<br>
[0014] FIG. 2B is a block diagram illustrating an exemplary packet format for use by an<br>
upstream device in sharing multicast optimization data with a downstream device in a system<br>
to improve multicasting efficiency.<br>
[0015] FIG. 3 is a flowchart illustrating example operation of a receiver in sharing multicast<br>
optimization data with neighboring upstream routers.<br>
[0016] FIG. 4 is a flowchart illustrating example operation of an upstream router in sharing<br>
multicast optimization data with neighboring devices.<br>
[0017] FIG. 5 is a block diagram illustrating an exemplary router that distributes or receives<br>
multicast optimization data in accordance with an embodiment of the invention.<br>
[0018] FIG 6 is a block diagram illustrating an example data structure storing multicast<br>
optimization data.<br>
[0019] FIG 7 is a block diagram illustrating a local area network (LAN) environment, in<br>
which a source device injects a multicast data stream for a group into a backbone via one or<br>
more intermediate devices.<br>
[0020] FIG 8 is a block diagram illustrating another example computing system in which<br>
receivers send multicast join requests for multiple instances corresponding to multiple<br>
multicast trees for the same multicast group.<br>
[0021] FIG 9 is a block diagram illustrating the example system of FIG. 8 after a plurality of<br>
multicast trees are formed for multiple instances of the same multicast group.<br>
[0022] FIG 10 is a block diagram illustrating an exemplary multicast packet format that has<br>
been extended to include an instance number.<br>
[0023] FIG. 11 is a flowchart illustrating example operation of a receiver, upstream router,<br>
and source of a system in accordance with the principles of the invention.<br><br>
DETAILED DESCRIPTION<br>
[0024] FIG. 1A is a block diagram illustrating an example system 10 in which receivers 14A-14D (collectively, receivers 14) select one or more routers for receiving multicast traffic from source device 12 in a manner consistent with the principles of the invention. Source device 12 provides content, such as Internet Protocol (IP) video services, IP television (IPN), desktop conferences, corporate broadcasts, or other content, to receivers 14. For example, source device 12 may provide content in the form of multicast data packet streams to one or more multicast groups that receivers 14 have joined. Each multicast data packet includes a multicast identifier that identifies the respective multicast group. Routers 16A-16F (collectively, routers 16) may maintain information associating the receivers 14 with the multicast groups, and transmit copies of the multicast data packets from source device 12 to the receivers 14.<br>
[0025] The invention will be described for exemplary purposes with respect to using IP multicast to build multicast trees. However, the techniques may also be applied to building multicast distribution structures in other environments, such as label distribution protocol (LDP), point-to-multipoint (P2MP), or multi-protocol label switching (MPLS) environments. For example, a multicast stream may be sent over a label switched path (LSP), e.g., a P2MP LSP, as described in "Point to Multi-Point Label Switched Paths with Label Distribution Protocol," U.S. Application Serial No. 11/215,813, filed August 29, 2005, the entire content of which is incorporated herein by reference.<br>
[0026] The configuration of system 10 illustrated in FIG. 1A is merely exemplary. For example, system 10 may include additional source devices (not shown). In general, source device 12 represents any source of multicast content, such as a video server. Moreover, receivers 14 may include any type of device capable of receiving multicast content, such as personal computers, laptop computers, handheld computers, workstations, servers, digital televisions, network-enabled cell phones and the like.<br>
[0027] Receivers 14 may interact with routers 16 via the Internet Group Management Protocol (IGMP) or some other multicasting protocol to issue multicast action requests. Receivers 14 may, for example, issue a join or leave multicast action request to join or leave a multicast group, respectively. For example, receivers 14 may issue multicast join requests<br><br>
to become members of the exemplary multicast group for which routers 16 deliver multicast data packets. As another example, one of receivers 14 may issue a multicast leave action request (also called a "prune" action request) to leave a group, thereby terminating content delivery from its respective router 16. In a similar manner, receivers 14 may issue multicast action requests to routers 16 to switch between multicast groups, allowing receivers 14 to access different content provided by source device 12.<br>
[0028] In accordance with the principles of the invention, receivers 14 and routers 16 may exchange messages containing information with respect to the multicast groups of which they are members, and the number of upstream or downstream devices to which they are connected that are either capable of or already providing multicast content for the groups. Receivers 14 as well as routers 16 may use this information to intelligently select an "upstream" router to which to issue a multicast join request. In making the decision, the receiving device may monitor conditions of system 10 and utilize any of a variety of criteria to rank the upstream routers 16, such as minimization of multicast traffic duplication, load balancing current bandwidth levels, and avoiding paths experiencing communication delays.<br>
[0029] Whether a router is an "upstream" router between a receiver and a source may depend on the definition of "upstream" used by the devices. Every router in the network should have the same definition of "upstream." For example, according to one definition of "upstream," a router is an upstream router for a given receiver and a given source if the distance from the source to the particular router is less than the distance from the source to the receiver, where the distances are determined according to the Internet Gateway Protocol (IGP) metric. According to another definition of "upstream," a router is an upstream router for the receiver and the source if the distance from the router to the source is less than the distance from the destination to the source. This definition may provide different results than the first definition since the IGP metric between two devices may be non-symmetric. Yet another set of definitions add an additional requirement that an upstream router must be on the shortest path from the particular router to the source (or from the source to the router, respectively), as defined by IGP metrics. Moreover, a given router may both an upstream router in some contexts and a downstream router in other contexts, depending on its relationship to a given source and receiver.<br><br>
[0030] In the example of FIG. 1A, assume system 10 currently has a single multicast stream 26 originating from source 12 and delivered only to receiver 14A. In addition, assume receiver 14B wishes to join the exemplary multicast group <source group> associated with multicast stream 26. Consequently, receiver 14B initially sends a multicast optimization (MO) packet 20A to every upstream router to which receiver 14B is connected, i.e., router 16A. MO packet 20A may, for example, inform router 16A as to the number of upstream routers to which receiver 14B is connected, as well as the number of upstream routers from which receiver 14B could receive multicast traffic for the particular source and group <source group> associated with multicast stream 26.<br>
[0031] In this example, router 16A is the only upstream router associated with receiver 14B, so MO packet 20A would inform router 16A that receiver 14B has only a single upstream router for receiving multicast traffic for the group <source group>. MO packet 20A may also inform router 16A how many downstream devices receiver 14B has that may potentially join a group, and how many downstream devices receiver 14B has that are already members of a group. Here, receiver 14B has no such downstream devices in either category. When router 16A receives MO packet 20A, router 16A may save the information contained within the packet to a database as multicast optimization data (MOD).<br>
[0032] In response, router 16A sends an MO reply packet 21A to receiver 14B. MO reply packet 21A may, for example, inform receiver 14B as to the number of dependent and non-dependent downstream devices router 16A has, and whether any dependent devices have already joined the multicast group. The term dependent downstream device is used to refer to a device that is dependent upon the router, i.e., the router is the only upstream router from which the downstream device can receive a multicast stream. The term non-dependent downstream device is used to refer to a device that may potentially receive a multicast stream from the router for a group, but that is also connected to other upstream routers from which the downstream device may receive the multicast stream.<br>
[0033] In this case, MO reply packet 21A informs receiver 14B that router 16A has a single dependent downstream device (i.e., receiver 14B), one non-dependent downstream device (i.e. receiver 14C), and zero joined downstream devices. Router 16A may have previously been made aware that receiver 14C is a non-dependent downstream device by a similar MO packet 20 (not shown) received from receiver 14C. In this manner, receiver 14B learns<br><br>
whether any peer devices downstream of router 16A have already joined the multicast group, and whether the peer devices may be dependent upon router 16A to receive multicast traffic in the future.<br>
[0034] When receiver 14C receives the MO reply packet 21 A, receiver 14C may save the multicast optimization data contained within the packet to a data structure. In addition, receiver 14C sends a join request 24A to router 16A to request to join the multicast group <source group> associated with multicast stream 26.<br>
[0035] Before or after receiver 14B has issued join request 24A to join the group, router 16A sends MO packets 20B5 20C to routers 16D and 16E, respectively. MO packets 20B, 20C may indicate that router 16A has two potential upstream routers from which router 16A could receive multicast traffic for the particular source and group of interest. MO packets 20B, 20C may also indicate that router 16A has two downstream devices (i.e. receivers 14B, 14C) and one downstream device that has joined the particular <s g> (i.e., receiver 14B). In some embodiments, router 16A may send MO packets 20B, 20C even before receiver 14B has joined the group.<br>
[0036] In response, routers 16D and 16E each send MO reply packets 2IB, 21C, respectively, to router 16A. MO reply packet 20B indicates that router 16D has two downstream devices (i.e., receiver 14A and intermediate router 16A), one of which has already joined the group (i.e., receiver 14A). MO reply packet 21C indicates that router 16E has two downstream devices, none of which have joined the group. Based on this information, router 16A may intelligently form a multicast sub-tree. For example, as shown in FIG. 1A, router 16A may select router 16D as the upstream router from which router 16A will receive the multicast stream 26 for the <source group>, since router 16D is already receiving multicast traffic for that group from source 12. In this manner, the routers may avoid unnecessary duplication of multicast packets in system 10. As another example, router 16A may select router 16E for load balancing purposes.<br>
[0037] Assuming router 16A selects router 16D, router 16A sends a join request 24B to the selected router 16D. Router 16D may likewise send a MO packet 20D to source device 12. receive a MO reply packet 2 ID from source device 12, and send a join request 24D to source device 12. Source device 12 sends multicast stream 26 for group <s g> to router 16D. which duplicates the stream 26 and sends packets to both receiver 14A and router 16A.<br><br>
Router 16A then sends multicast stream 26 to receiver 14B. In one embodiment, multicast stream 26 may be sent over a label switched path (LSP), e.g.. a point-to-multipoint (P2MP) LSP.<br>
[0038] In this manner, multicast optimization data (MOD) is propagated upstream and downstream to local devices to allow downstream devices to intelligently select optimal upstream devices for a particular multicast group, thereby forming optimal multicast distribution structures (e.g., trees and sub-trees) and increasing the efficiency of multicasting within system 10. The MO packets 20, 21 may be sent as an extension to an existing routing protocol, e.g.. Open Shortest Path First (OSPF), or an existing multicast protocol, such as IGMP, Protocol-Independent Multicast (PIM), Distance Vector Multicast Routing Protocol (DVMRP), Multicast OSFP (MOSFP), or Multicast Transport Protocol (MTP), or as a separate protocol specifically designed for exchanging MOD. The devices may send the MO packets periodically, only when a change has occurred to the multicast optimization data, or in response to multicast action requests.<br>
[0039] For example, the multicast optimization data may indicate one or more of a number of other devices downstream from the respective upstream device that have already joined the multicast group, a number of dependent downstream devices for which the upstream device is the only potential upstream device that can provide the multicast data for the multicast group, a number of non-dependent downstream devices capable of receiving the multicast data from the upstream device or at least one other upstream device, a number of potential upstream devices, a number of potential downstream devices. As other examples, the MOD may indicate a distance from a source of the multicast group to the respective upstream device, a distance to the source from the respective upstream device, a delay from the source to the respective upstream device, a number of multicast groups transiting the upstream device, and a total multicast bandwidth transiting the upstream device. <br>
[0040] With respect to FIG. IB, assume that receiver 14C subsequently wishes to receive multicast content associated with multicast stream 26. As illustrated in FIG. IB, receiver 14C sends MO packets 20E, 20F to upstream devices 16A and 16B, respectively. MO packets 20E, 20F may indicate that receiver 14C has two potential upstream devices from which receiver 14C could receive multicast traffic for group <source group>.<br><br>
MO packets 20E, 20F may also indicate that receiver 14C has zero potential downstream devices and zero joined downstream devices.<br>
[0041] In response, routers 16A and 16B may each send MO reply packets 2IE, 2IF. respectively, to receiver 14C. MO reply packet 2IE indicates that router 16A has one downstream device that has already joined the group (i.e., receiver 14B). MO reply packet 21F indicates that router 16B has no downstream devices having already joined the group. Based on this information, receiver 14C may intelligently select an upstream router from which receiver 14C will receive the multicast stream for the group. In this example, receiver 14C selects router 16A because router 16A is already receiving multicast traffic for the group. In this manner, the upstream routers may avoid unnecessary duplication of multicast packets in system 10. Alternatively, receiver 14C may have utilized other criteria as described above.<br>
[0042] Assuming receiver 14C selects router 16A, receiver 14C sends a join request 24E to router 16A. Router 16A adds receiver 14C as a joined downstream device, and proceeds to duplicate the multicast stream 26 for the particular <s g> associated with multicast data stream 26 to send copies of the packets to both receivers 14B and 14C. In some embodiments, router 16A may send an MO update message 29A to receiver 14B and an MO update message 29B to router 16D, indicating that router 16A now has two joined downstream devices for the particular <s g>.<br>
[0043] With respect to FIG. 1C, assume that receiver 14D subsequently wishes to receive multicast content associated with multicast stream 26. As illustrated in FIG. 1C, receiver 14C sends MO packets 20G, 20H to routers 16B and 16C, respectively. MO packets 20G, 20H may indicate that receiver 14D has two potential upstream devices from which receiver 14D could receive multicast content for group <source group>. MO packets 20G, 20H may also indicate that receiver 14D has zero potential downstream devices and zero joined downstream devices.<br>
[0044] In response, or previously, routers 16B and 16C may send MO reply packets 21G, 21H, respectively, to receiver 14D. MO reply packet 21G indicates that router 16B has a downstream device (i.e.. receiver 14C) that has already joined the particular group of interest through an upstream router other than router 16B. MO reply packet 21H indicates that router 16C has no downstream devices having already joined the group.<br><br>
[0045] Based on this information, receiver 14D may intelligently select router 16B as the upstream router from which receiver 14D will receive the multicast stream for the group. In addition, receiver 14D may also consider information about other groups having multicast streams (not shown) going through routers 16B and 16C, and select an upstream router so as to provide load balancing to system 10. In this example, receiver 14D sends a join request 24G to router 16B.<br>
[0046] Router 16B may send MO update message 29C to receiver 14C indicating that router 16B now has a joined downstream device for the group <source group>. Receiver 14C may save the information contained within MO update message 29C as multicast optimization data in a database. Router 16B may propagate the MO information and join request upstream to router 16E, in a manner similar to that discussed above with respect to router 16A in FIG. 1A. When router 16E receives the join request 24J from router 16B, router 16E may send an MO update message 29D to router 16A indicating that router 16B now has a joined downstream device for the group <source group>. Router 16E propagates the information upstream and sends a join request 24K to source 12. Source device 12 then sends multicast stream 26' for the group <source group> to router 16E, which sends multicast stream 26' to router 16B. Router 16B then sends multicast stream 26' to receiver 14D.<br>
[0047] With respect to FIG. ID, assume that receiver 34A subsequently leaves the multicast group <source group>. As illustrate in FIG. ID, receiver 14A sends a leave request 32A to router 16D to request to leave multicast group <source group>. Router 16D removes receiver 14A from the group, and stops sending the multicast stream to receiver 14 A.<br>
[0048] In addition, router 16D sends an MO update message 29E to router 16A, indicating that router 16D now only has one downstream device that is a member of group <source group>. With respect to this particular multicast group, router 16A may intelligently use this information to switch upstream routers from router 16D to router 36E based on MO update message 29D from router 16E (FIG. 1C) indicating that router 16E is receiving a multicast stream 26' for the same group <source group>. Router 16A may therefore send a leave request 32B to router 16D to request to leave the group, and may send a join request 24L to router 16E to join the group. Router 16E adds router 16A as a<br><br>
downstream device in the group, and sends multicast stream 26' to router 16A. resulting in the new multicast tree illustrated in FIG. ID.<br>
[0049] FIG. 2A is a block diagram illustrating an exemplary format for a multicast optimization packet 34 for use by a downstream device in sharing multicast optimization data with an upstream device. Packet 34 may be a packet used by an extended multicast protocol or an extended routing protocol. Alternatively, packet 34 may be used by a separate protocol designed for multicast optimization. A downstream device may, for example, send packet 34 to all of its upstream devices in anticipation of joining a group <s> to share multicast optimization data (MOD) with and obtain MOD about neighboring devices. In this way the downstream device may intelligently select an upstream device to which to send a join request to join the particular multicast group.<br>
[0050] In the example of FIG. 2A, packet 34 contains a header 36 containing typical packet source and destination information. For example, header 36 may contain IP addresses, ports, protocol or other information. Packet 34 also contains a group identification field 38 ("ID") that contains a group identifier, for example, the source device and the group number that identifies the respective multicast group to which the subsequent data applies. As another example, the group identifier may be a multicast address.<br>
[0051] MOD fields 40A-40C (collectively, MOD fields 40) contain information that a downstream device may share to help optimize multicast transmission. For example, MOD field 40A contains a number of upstream devices to which a downstream device is connected and from which the downstream device could potentially receive multicast traffic for the specific multicast group. MOD field 40B contains the number of downstream devices connected to the downstream device sending packet 34 that may potentially issue joins to receive multicast traffic for the multicast group. MOD field 40C contains a number of devices downstream to the device sending packet 34 that have actually joined the particular multicast group. The MOD fields 40 shown are merely exemplary, and other types of multicast optimization data may be included in packet 34. Moreover, this or other information for multiple multicast groups may be conveyed in a single packet. [0052] FIG. 2B is a block diagram illustrating an exemplary multicast optimization reply-packet 42 for use by an upstream device in sharing multicast optimization data with a downstream device. The receipt of packet 34 (FIG. 2A) from a downstream device may<br><br>
trigger the receiving upstream device to send a corresponding reply packet 42 containing other MOD about neighboring devices of the upstream device. Alternatively, an upstream device may send reply packet 42 periodically, as configured by an administrator, or in response to multicast action requests. Regardless, the upstream device may communicate multicast optimization information to neighboring devices via one or more packets conforming to the format of packet 34 to increase efficiency in multicasting. <br>
[0053] Reply packet 42 contains a header 44 indicating the source and destination information for the reply packet, and a group ID field 46 that identifies a particular multicast group at issue. MOD fields 48A-48C (collectively, MOD fields 48) contain information that an upstream device may share to aid the selection and formation of optimal multicast trees within a network. In this example, MOD field 48A contains the number of downstream devices for which the upstream device sending packet 42 is the only upstream device able to deliver multicast traffic for the identified multicast group (i.e., dependent downstream devices). MOD field 48B contains the number of downstream devices that may potentially receive a multicast stream from the upstream router, but that are also connected to other upstream routers from which to receive the multicast stream for the multicast group (i.e., non-dependent downstream devices). MOD field 48C contains the number of devices downstream to the device sending packet 42 that have actually joined the multicast group. The MOD fields 48 shown are merely exemplary, and other types of multicast optimization data may be included in packet 42. Moreover, this or other information for multiple multicast groups may be conveyed in a single packet.<br>
[0054] FIG. 3 is a flowchart illustrating example operation of a receiver, such as any of receivers 14 of FIGS. 1A-1D, in sharing multicast optimization data with neighboring upstream routers. FIG. 3 will be described with respect to receiver 14C.<br>
[0055] Initially, receiver 14C desires to receive a multicast stream for group <s.g> (typically in response to a user request), causing receiver 14C to join the group (50). Receiver 14 determines potential upstream routers (52), depending on the appropriate definition of "upstream." In some embodiments, receiver 14 may calculate a shortest path to the source device. There may be multiple paths that have an equal cost metric to the source, and receiver 14C may use MOD to choose between the shortest paths. Alternatively, receiver 14C may not calculate a shortest path, and instead may consider all potential paths to the<br><br>
source device. In any case, receiver 14C will need to decide to which upstream router to send a join request.<br>
[0056] Receiver 14C sends a multicast optimization (MO) packet 34 (FIG. 2A) to each of the upstream routers on all paths to the source or a subset based on a cost metric or length, i.e., to upstream routers 22A and 22B (54). Receiver 14C then receives a MO reply packet 42 (FIG. 2B) from each of the upstream routers (56). Receiver 14C may save the multicast optimization data contained within the MO reply packets to a database. Receiver 14C selects an upstream router based on the multicast optimization data (58). For example, receiver 14C may consider whether an upstream router is already receiving multicast traffic for the group. As another example, receiver 14C may utilize any of a variety of criteria to rank the routers 16, such as minimization of multicast traffic duplication, load balancing current bandwidth levels, and avoiding paths experiencing communication delays. Receiver 14C sends a join request to the selected upstream router (60) and receives multicast packets from the selected upstream router (62).<br>
[0057] FIG. 4 is a flowchart illustrating example operation of an upstream router, such as any of routers 16 of FIGS. 1A-1D, in sharing multicast optimization data with neighboring devices. FIG. 4 will be described with respect to router 16A. Router 16Amay receive an MO packet 34 (FIG 2A) from one or both of receivers 14B and 14C (64). For example, router 16A may receive an MO packet from receiver 14B indicating that receiver 14B has only one upstream router for this group, i.e., that receiver 14B is dependent on router 16A to receive multicast content for the respective group. Router 16A may also receive an MO packet from receiver 14C indicating that receiver 14C has two potential upstream routers for this group.<br>
[0058] Router 16A sends an MO reply packet 42 (FIG 2B) to one or both of receivers 14B and 14C (66). The MO reply packet 42 may indicate, for example, that router 16A has one dependent downstream device, and one non-dependent downstream device. Router 16A is thus sharing the MO data received from each of its downstream devices with all of the other downstream devices. In this manner, router 16A facilitates the exchange of information in system 10, so that downstream devices may intelligently select an optimal upstream router for receiving multicast.<br><br>
[0059] Router 16A may receive a join request from a receiver (68). If router 16A is not already receiving multicast packets for the requested group, router 16A may propagate the MO data and join requests to the next upstream device. In some embodiments, router 16A may optionally calculate the shortest path to the source device. Router 16A may send MO packets 34 to other routers upstream of router 16A, i.e., routers 16D and 16E (70), and may receive MO reply packets 42 from routers 16D and 16E (72). Router 16Amay select an upstream router from which to receive the multicast content for the group based on the received multicast optimization data (74), send a join request to the selected upstream router (76), and receive multicast packets from the selected upstream router (78).<br>
[0060] FIG. 5 is a block diagram illustrating an exemplary router 80 that stores, distributes, and receives multicast optimization data (MOD) 81 in accordance with an embodiment of the invention. Router 80 may operate substantially similar to routers 16 in FIGS. 1A-1D. In some cases, router 80 may be an edge router and receivers 14 may connect to router 80 via network switches, e.g., DSLAMs or Ethernet switches. Alternatively, router 80 may be an intermediate router that is not directly connected to receivers 14. In general, router 80 is capable of receiving and sending MO packets and MO reply packets containing MOD 81. [0061] In the illustrated embodiment, router 80 includes interface cards 82A-82N ("IFCs 82") that receive packets on inbound links 84A-84N ("inbound links 84") and send packets on outbound links 86A-86N ("outbound links 86"). IFCs 82 are interconnected by a highspeed switch 88 and links 90. In one example, switch 88 comprises switch fabric, switchgear, a configurable network switch or hub, and the like. Links 90 comprise any form of communication path, such as electrical paths within an integrated circuit, external data busses, optical links, network connections, wireless connections, or other type of communication path. IFCs 82 are coupled to inbound links 84 and outbound links 86 via a number of interface ports (not shown).<br>
[0062] Router 80 also includes a control unit 94 that maintains routing information 96 to reflect the current topology of a network and other network entities to which router 80 is connected. In general, when router 80 receives a unicast packet via one of inbound links 84, control unit 94 determines a destination for the packet in accordance with routing information 96 and outputs the packet on one of outbound links 86 based on the destination.<br><br>
[0063] Control unit 94 further maintains multicast forwarding information 98. When router 80 receives a multicast packet via one of inbound links 84, control unit 94 forwards the packet on a set of outbound links 86 in accordance with multicast forwarding information 98. Control unit 94 provides an operating environment for routing protocol 100, e.g., OSPF, LDP, MPLS, IGP, and multicast protocol 102, e.g., IGMP. Router 80 may use multicast protocol 102 to send and receive multicast action requests, e.g., join and leave requests. In other embodiments, other protocols may be executed within control unit 94.<br>
[0064] One or both of routing protocol 100 and multicast protocol 102 may be, for example, extended in a manner that allows multicast optimization data 81 to be conveyed to and received from other devices for optimizing multicasting. As described herein, the protocol extension allows a variable number of MOD fields to be communicated to other devices. In other embodiments, a separate protocol may be established for exchanging MOD 81. For example, a number of potential upstream devices, a number of potential downstream devices, a number of joined downstream devices, a number of dependent downstream devices, a number of non-dependent downstream devices, or other MOD may be specified in accordance with the techniques described herein.<br>
[0065] In the example of FIG. 5, multicast protocol 102 maintains MOD 81. Router 80 may use multicast protocol 102 or routing protocol 100 to send MOD packets via one of outbound links 86 and receive MOD reply packets via one of inbound links 84 containing MOD, or to send and receive MO update messages. When router 80 sends an MOD packet, which may be similar to MOD packet 34 of FIG. 2 A, router 80 may fill the fields of the MOD packet with data from MOD 81. When router 80 receives an MOD reply packet, which may be similar to MOD reply packet 42 of FIG 2B, router 80 may save the information contained within the fields of the MOD reply packet to MOD 81. Control unit 94 maintains routing information 98. multicast forwarding information 98, and MOD 81 in the form of one or more tables, databases, link lists, radix trees, databases, flat files, or any other data structures<br>
[0066] In operation, router 80 applies MOD 81 when determining an upstream router to senc a join request for a particular group. In particular, when router 80 needs to join a group, router 80 may send and receive MOD packets and MOD reply packets containing MOD 81 to learn about multicast content actually or potentially being transmitted to neighboring devices for the group. Router 80 may use the MOD 81 to determine which upstream router<br><br>
to send the join request. More specifically, router 80 may consider whether multicast content for the group is already being received by one of the upstream routers. Router 80 may also use MOD 81 to allow for load-balancing considerations in selecting an upstream router for receiving multicast content.<br>
[0067] The architecture of router 80 illustrated in FIG. 5 is shown for exemplary purposes only. The invention is not limited to this architecture. In other embodiments, router 80 may be configured in a variety of ways. In one embodiment, for example, control unit 94 and its corresponding functionality may be distributed within IFCs 82. In another embodiment, control unit 94 may include a routing engine that performs routing functions and maintains a routing information base (RIB), e.g., routing information 96, and a forwarding engine that performs packet forwarding based on a forwarding information base (FIB) generated in accordance with the RIB.<br>
[0068] Control unit 94 may be implemented solely in software, or hardware, or may be implemented as a combination of software, hardware, or firmware. For example, control unit 94 may include one or more processors that execute software instructions. In that case, the various software modules of control unit 94, such as routing protocol 100 and multicast protocol 102, may comprise executable instructions stored on a computer-readable medium, such as computer memory or hard disk.<br>
[0069] FIG 6 is a block diagram illustrating an example data structure 104 storing multicast optimization data. In the example of FIG. 6, example data structure 104 is maintained by the control unit of receiver 14C. For example, data structure 104 may be similar to MOD 81 maintained by control unit 94 of FIG. 5. Receiver 14C may populate the rows and columns of data structure 104 using MOD received in MO packets. Data structure 104 includes device column 106, which indicates the network device for which MOD is stored in the corresponding row. Data structure 104 also includes a source column 108 and multicast group column 110, which together indicate the multicast group <s>.<br>
[0070] Column 112 of data structure 104 stores the number of potential upstream devices ("NPU") that the corresponding device has, while column 114 stores the number of potential downstream devices ("NPD?") that the corresponding device has. Column 116 stores the number of joined downstream devices ("JD") that the corresponding device has, column 118 stores the number of dependent downstream devices ("NDD") that the corresponding device<br><br>
has, and column 120 stores the number of non-dependent downstream devices ("NNDD") hat the corresponding device has. "When receiver 14C receives an MO message, e.g., an MO racket, an MO reply packet, or an MO update message, the control unit of receiver 14C may inter a new row or update an existing row in data structure 104.<br>
[0071] In the example of FIG. 6, the first three rows correspond to device 10.1.1.2, which in his example is the IP address for receiver 14C. The fourth and fifth rows correspond to device 10.1.1.6 (the IP address for router 16A), and the last row corresponds to device 10.1.8.7 (the IP address for router 16B). The first row corresponds to multicast source 224.0.0.195 (the multicast address for source device 12), group 1, and the second row corresponds to source 224.0.0.195, group 2. <source group> is the multicast group discussed in FIGS. 1A-1D. The third row corresponds to source 224.0.0.200, another multicast source device (not shown in FIGS. 1A-1D).<br>
[0072] In the example of FIG. 6, receiver 14C maintains MOD about itself in data structure 104. For example, for <source group> and <source group>, receiver 14C has two potential upstream devices, zero potential downstream devices, and consequently zero joined downstream devices, zero dependent downstream devices, and zero non-dependent downstream devices.<br>
[0073] Receiver 14C also obtains MOD from routers 16A and 16B via MO reply packets sent to receiver 14C by routers 16A and 16B in response to MO packets. Receiver 14C saves this MOD to data structure 104. For example, receiver 14C has stored in the fourth row that for <source group>, router 16Ahas two potential upstream devices, two potential downstream devices, one joined downstream device, one dependent downstream device, and one non-dependent downstream device. As another example, receiver 14C has stored in the last row that for <source group>, router 16B has one potential upstream devices, two potential downstream devices, zero joined downstream devices, zero dependent downstream devices, and two non-dependent downstream devices.<br>
[0074] Data structure 104 of FIG. 6 is merely exemplary. Other types of MOD not shown in example data structure 104 may be stored by receiver 14C. As explained above, although illustrated in the form of a table, data structure 104 may be maintained in the form of one or more tables, databases, link lists, radix trees, databases, flat files, or any other data structures.<br><br>
[0075] FIG. 7 is a block diagram illustrating a local area network (LAN) environment 126, in which a source device 128 injects a multicast data stream 130 for a group into backbone 132 via one or more of intermediate devices 134A-134B (collectively, intermediate devices 134). Receivers 136A-136C (collectively, receivers 136) may access and share multicast data stream 130 flowing on backbone 132. The principles of the invention described herein may readily be applied to LAN environment 126. For example, receiver 136B may send MOD packets to and receive MOD reply packets from neighboring devices to obtain MOD. Receiver 136B may use the MOD to more intelligently select an upstream router to use for joining the group. For example, in this case receiver 136B may select intermediate device 134Ato send a join request to, since source 128 is already sending multicast data stream 130 to intermediate device 134A. In this manner, source 128 need not inject duplicate data streams into LAN environment 126.<br>
[0076] FIG. 8 is a block diagram illustrating another example computing system 138 in which receivers 140A-140B (collectively, receivers 140) send multicast join requests 142 for a plurality of "instances" for the same multicast group. As described in further detail below, control information exchanged between the receivers 140 and routers 144 has been extended to incorporate the use of an instance number to allow a single multicast group to potentially set up a plurality of multicast trees, each potentially taking different paths from source device 146 to the receivers 140. Source device 146 may then utilize the different trees when sourcing multicast content for the group, allowing the source device to utilize principles such as equal cost multipath (ECMP) to load balance or otherwise control delivery of the content through the computer network.<br>
[0077] More specifically, the different instances correspond to a plurality of multicast trees for a multicast group from a single source device 146. To form the multicast trees, receivers 140 send a plurality of join requests 142 for the same multicast group to a subset of routers 144A-144F along different paths to source device 146. In one embodiment, each device in system 138 is configured with a parameter specifying the number of instances required. The number of the plurality of instances for a given source and multicast group <source s group g> may be denoted by N. For example, the devices may be configured by an administrator or a software agent. The number of instances may be the same for all multicast groups in the network, or may be determined independently on a per-group basis.<br><br>
Alternatively, the devices may exchange information to select an optimum N for a given group based on the current topology of system 138 and optionally utilizing multicast optimization data (MOD) described above to cooperatively select N. The devices may run a discovery protocol e.g., Multicast Virtual Private Network (MVPN) protocol or Multicast Virtual Private Local Area Network Service (MVPLS) protocol, to verify that each device has correctly specified the number of instances. If a device does not know the correct number of instances, this may result in the device receiving duplicate multicast streams or nc multicast streams for a multicast group.<br>
[0078] In the example of FIG. 8, assume N = 3 for <source device group>. Thus, each receiver 140 will send three join requests 142, one for each instance. Join requests 142 may be extended to include an instance number in the group identifier. Each receiver 140 determines along which paths to send each of the join requests 142. Receivers 140 may attempt to distribute the join requests among the upstream routers to build alternative multicast trees for the different instances. Receivers 140 may also use the multicast optimization techniques described above to intelligently select which upstream router to send the join requests for each instance, for example to send a join request for a particular instance to an upstream router that has already received a join request for that instance.<br>
[0079] In this example, receiver 140A initially sends a first join request 142A to router 144A. Join request 142A requests to join the multicast tree for <source device group instance> (hereafter <s g>). Receiver 140A also sends join requests 142B and 142C to router 144B, requesting to join <s g> and <s g>, respectively. Receiver HOB sends join request 142D to router 144A requesting to join <s g>, sends join request 142E to router 144B requesting to join <s g>, and sends join request 142F t. In this manner, the multicast join action has been extended to include an instance number when specifying the particular multicast group and source.<br>
[0080] Router 144A receives join requests 142A and 142D for <s g>. Router 144A determines whether router 144A already has state for <s g>, i.e., whether router 144A has an entry in multicast forwarding information 98 (FIG. 5) for <s g.>. In other words, router 144A determines whether it has already received a join request for the same source,<br><br>
group and instance (<s g.> in this example). If not router 144A sends join request 142G to an upstream router to join <s. g>. Otherwise, router 144A does not forward the join request as this would be a redundant join request and may result in receipt of multiple copies of the same multicast content. In this manner, the routers 144 selectively forward the join requests thereby ensuring that no receiving device receives duplicate copies of the same multicast content even though each receiver may be a leaf node to multiple instances associated with the same group.<br>
[0081] In the example of FIG. 8, router 144A selects router 144D to which to forward join request 142G. Router 144D in turn likewise determines whether router 144D already has state for <s g>, and if not, sends a join request 142L to source device 146 for <s g>. In this manner, receivers 140A and 140B join the multicast tree for instance 3 of the multicast group.<br>
[0082] Similarly, router 144B receives join requests 142B and 142E for <s5 g>, and 142* for <s g>. Router 144B determines whether router 144B already has state for <s g> and <s g>, and if not sends join requests 142H and 142J to an upstream router to join <s g> and <s g.>. Here, router 144B only has one upstream router, so router 144B sends both join requests to router 144E. Router 144E receives the join requests, determines whether router 144E already has state for the instances, and if not, sends join requests 142N and 142N to source device 146 to join <s g> and <s g>, respectively. In this manner receiver 140 A joins the multicast tree for instances 1 and 2 of the multicast group, and 140] joins the multicast tree for instance 1 of the multicast group.<br>
[0083] Router 144C receives join request 142F to join <s g>, determines whether route 144C has state for <s g>, and if not, sends join request 142K to router 144F to join <s g.>. Router 144F receives join request 142K, determines whether router 144F has state 1 <s. g.>, and if not, sends join request 142P to source device 146 to join <s g>. In th manner, receiver 140B joins the multicast tree for instance 2 of the multicast group. Receivers 140 and routers 144 may similarly issue leave requests that specify the particular instance, to leave an instance of a multicast group.<br>
[0084] FIG 9 is a block diagram illustrating the example system 138 of FIG. 8 after a plurality of multicast trees 150A, 150B, and 150C (collectively, multicast trees 150) are<br><br>
formed for instances 3, 1, and 2, respectively, of multicast group <source device group>.<br>
[0085] In practice, when source device 146 receives a multicast flow for multicast group 1. source device 146 selects one of multicast trees 150 for sending the multicast flow. For example, source device 146 may use a flow hash function such as is used by unicast equal cost multipath (ECMP) to select one of instances <s g>, <s g>, or <s g>. As another example, source device 146 may monitor network 138 to determine which multicast tree 150 is experience the least congestion, or has the most bandwidth available.<br>
[0086] Multicast trees 150 need not be completely separate trees. Multicast trees 150 may partially or even completely overlap. In the example of FIG. 9, a portion of multicast tree 150B overlaps with a portion of multicast tree 150C. It may be desirable to spread out the multicast trees to avoid overlapping where possible, so that the multicast trees traverse different paths.<br>
[0087] Typically, source device 146 will use a single multicast tree for sending all of the packets in a multicast flow, so that packets need not be reordered at receivers 140. However, in some embodiments, source device 146 may send packets in a multicast flow using multiple multicast trees 150 in a round-robin fashion, and receivers 140 would reorder the packets upon receipt. In any case, no matter which multicast tree 150 that source device 146 selects for sending the multicast flow, receivers 140 will each receive only a single copy of each multicast packet in the multicast flow.<br>
[0088] Assume that source device 146 selects the multicast tree corresponding to instance 1, i.e., multicast tree 150B, to send the multicast content. In this case, source device 146 sends one copy of each packet to router 144E. Router 144E duplicates the packets, and sends one copy of each packet to receiver 140A, and one copy of each packet to receiver 1406. In this manner, receivers 140 each receive only one copy of each packet in the multicast flow.<br>
[0089] If, for example, router 144E were to become inoperative, source device 146 could stop sending the multicast flow for Group 1 via multicast tree 150B, and switch to sending the multicast flow via multicast tree 150A. In this manner, source device 146 may seamlessly switch between pre-established multicast trees to avoid multicasting interruptions and provide improved multicast service to network 138.<br><br>
[0090] FIG 10 is a block diagram illustrating an exemplary multicast packet format of a packet 152 that has been extended to include an instance number. For example, packet 152 may be an IP packet that encapsulates a join request, a leave request, a Protocol-Independent Multicast (PIM) hello message, or other multicast control message. Packet 152 may be used by an extended multicast protocol, e.g. PIM, point-to-multipoint (P2MP) label distribution protocol (LDP), or a separate protocol designed for multicast optimization. A receiver 140 of an upstream device 144 (FIG. 8) may send a packet 152 for each of N required instances of a multicast group.<br>
[0091] In the example of FIG. 10, packet 152 contains a header 154 containing typical packet source and destination information. For example, header 154 may contain IP addresses, ports, checksums, protocol or other information. Packet 152 also contains group identification fields 156A-156C (collectively, group identification fields 156). Source identification field 156A contains an identifier for the source of the multicast traffic. Group identification field 156B contains a group identifier (e.g., a multicast address) that identifies the group. Instance field 156C identifies the instance number. Type field 158 contains a value associated with the particular control message.<br>
[0092] FIG. 11 is a flowchart illustrating example operation of an exemplary receiver, upstream router, and source of a system in forming ECMP multicast trees in accordance with the principles of the invention. For exemplary purposes, FIG 11 will be explained with reference to receiver 140 A, router 144 A, and source device 146 of FIG. 8.<br>
[0093] Receiver 140 A receives configuration information informing receiver 140 A of the number of instances N for a particular group (160). In this example, receiver 140A is configured with the information that for the multicast group <source device group>, the number of instances is three. An administrator or a software agent may provide this configuration information to receiver 140A, or receiver 140A may use a discovery protocol to exchange information with neighboring devices to determine an optimal number of instances, possibly using previously exchanged MOD.<br>
[0094] When receiver 140A wishes to receive multicast content for <source device group>, possibly in response to a user request, the receiver 140A sends three join requests to upstream routers, one for each of the three instances for <source device group> (162). The join requests may be similar to packet 152 of FIG 10. Where<br><br>
possible, receiver 140Amay distribute the join requests among its upstream routers. Receiver 140A may also optionally utilize the multicast optimization techniques described above to share multicast optimization data with neighboring devices. In this manner, receiver 140A may make a more intelligent decision about upstream routers to which to send the join requests. For example, receiver 140A may send multicast optimization (MO) packets that are similar to packet 34 of FIG. 2A, but that contain an additional field specifying the instance number to which the packets relate. Receiver 140A may send such an MO packet for each of the three instances, to all upstream routers, and may receive in response MO reply packets from the upstream routers that are similar to packet 42 of FIG. 2B, but that contain an additional field specifying the instance number to which the packets relate. [0095] Receiver 140A may receive an MO reply packet from router 144A informing receiver 140Athat router 144Ahas one joined downstream device for <source device group instance> (i.e., receiver HOB), and may receive an MO reply packet from router 144B informing receiver 140A that router 144B has one joined downstream device for <source device .146 group instance> (i.e., receiver HOB). Using this MOD, receiver 140A may decide to send the join request for <s g> to router 144A, and send the join request for <s g> to router 144B.<br>
[0096] Router 144Areceives one or more join requests from its downstream devices (164). Router 144A may determine whether state already exists for the instance specified in the join request, i.e., whether router 144A is already part of the multicast tree for that instance (166). If router 144A does not have state for the instance, router 144A creates an entry in its multicast forwarding information 98 for the instance, and sends a join message to one of the upstream neighbors (168). If router 144A already has state for the instance, router 144A adds the downstream device (e.g., receiver 140A) so that multicast content for that group and instance will be transmitted to receiver 140A (170). Additional upstream routers between router 144Aand source device 146 may similarly perform any of steps 164-170. [0097] Source device 146 receives join requests for the various N instances for <source device group> (172). In this way, multiple multicast trees may be formed between receivers 140 and source device 146. When source device 146 receives multicast traffic for <source device group>, source device 146 selects one of the<br><br>
multicast trees corresponding to the instances, for example by using a unicast ECMP flow hash function (174), and sends the multicast content via the selected multicast tree (176).<br>
[0098] Receivers 140 and routers 144 may be similar to router 80 of FIG. 5. In accordance with the principles of the invention, multicast protocol 102 (e.g., PIM) may be extended to operate on a multicast group instance basis. For example, router 80 may use multicast protocol 102 to send and receive enhanced join and leave requests to join or leave particular instances of a multicast group. Multicast forwarding information 98 and MOD 81 may include entries for each of the plurality of instances for each multicast group to which router 80 belongs.<br>
[0100] Various embodiments of the invention have been described. These and other embodiments are within the scope of the following claims.<br><br>
CLAIMS:<br>
1.	A method of forming multicast distribution structures within a network comprising:<br>
joining, at a device, a plurality of instances N of a multicast group from a single<br>
source device, wherein each of the N instances corresponds to a different multicast distribution structure within the network for the multicast group.<br>
2.	The method of claim 1? wherein joining comprises sending a join request for each of the N instances from the device to a plurality of upstream devices located between the device and the source device for the multicast group, wherein each of the join requests specifies a different one of the N instances of the multicast group to be joined.<br>
3.	The method of claim 1, further comprising distributing the join requests among the<br>
plurality of upstream devices.<br>
4.	The method of claim 1, further comprising specifying at the device the plurality of instances N for the multicast group.<br>
5.	The method of claim 4, wherein specifying at a device a plurality of instances N of a multicast distribution structure for a multicast group comprises using a discovery protocol to distribute the plurality of instances N.<br>
6.	The method of claim 5, wherein the discovery protocol is one of Multicast Virtual Private Network (MVPN) protocol or Multicast Virtual Private Local Area Network Service (MVPLS) protocol.<br>
7.	The method of claim 4, wherein specifying at a device a plurality of instances N of a multicast distribution structure for a multicast group comprises configuring the plurality of instances N by an administrator.<br><br>
8.	The method of claim 7, further comprising configuring the plurality of instances N to be the same for all multicast groups in the network.<br>
9.	The method of claim 7, further comprising configuring the plurality of instances N independently for each multicast group in the network.<br>
10.	The method of claim 1, wherein the device comprises an end-user receiving device or an intermediate device.<br>
11.	The method of claim 1, further comprising:<br>
receiving with a device a respective message from at least two upstream devices located between the device and a source for a multicast group, wherein the message includes multicast optimization data that specifies at least one criterion for selecting an upstream device; and<br>
selecting at least one and up to N of the at least two upstream devices based on the multicast optimization data,<br>
wherein sending a join request comprises sending the join requests for each of the N instances from the device to the selected upstream devices to join the N instances for the multicast group.<br>
12.	The method of claim 11,<br>
wherein selecting at least one and up to N of the at least two upstream devices comprises applying one or more criteria to the multicast optimization data of the messages to rank the upstream devices, and<br>
wherein the criteria for ranking the upstream devices includes one or more of minimization of multicast traffic duplication for the instances of the multicast group within the network, load balancing the multicast traffic within the network, and selecting a network path experiencing shorter communication delays.<br>
13.	The method of claim 1, wherein the multicast distribution structures corresponding to<br>
the N instances are partially overlapping.<br><br>
1<br>
14.	The method of claim 1, wherein joining the plurality of instances comprises joining<br>
the instances using an extension of one of the Protocol-Independent Multicast (PIM) protocol<br>
and the point-to-multipoint (P2MP) label distribution protocol (LDP).<br>
15.	A method of using multicast distribution structures within a network comprising:<br>
selecting, at a source device for a multicast group, one of a plurality of instances TV for<br>
the multicast group; and<br>
sending multicast content for the multicast group to the device via the multicast<br>
distribution structure corresponding to the selected one of the N instances.<br>
16.	The method of claim 15, wherein selecting at the source device for the multicast group one of the N instances comprises using an equal cost multipath (ECMP) flow hash function to select the one of the TV instances.<br>
17.	The method of claim 15, further comprising specifying at the device the plurality of instances N for the multicast group.<br>
18.	The method of claim 17, wherein specifying at a device a plurality of instances N of a multicast distribution structure for a multicast group comprises configuring the plurality of instances TV by an administrator.<br>
19.	The method of claim 17, wherein specifying at a device a plurality of instances TV of a multicast distribution structure for a multicast group comprises using a discovery protocol to distribute the plurality of instances N.<br><br>
20.	A network device comprising:<br>
a control unit storing configuration data that specifies an instance number N;<br>
a multicast protocol executing within the control unit that, based on the instance number A", generates Adjoin requests for a plurality of instances N of a multicast group, wherein each of the N instances corresponds to a different multicast distribution structure for the multicast group, and wherein each of the join requests specifies a different one of the N instances of the multicast group to be joined; and<br>
an interface to output the join requests to a plurality of upstream devices located between the network device and a source device for the multicast group to join the multicast group.<br>
21.	The network device of claim 20, wherein the control unit distributes the join requests among the plurality of upstream devices.<br>
22.	The network device of claim 20, wherein an administrator configures the control unit<br>
to specify the plurality of instances N for the multicast group.<br>
23.	The network device of claim 20, further comprising a discovery protocol executing within the control unit to distribute the plurality of instances N.<br>
24.	The network device of claim 20,<br>
wherein the interface receives a respective message from at least two of the plurality of upstream devices, wherein each of the messages includes multicast optimization data that specifies at least one criterion for selecting an upstream device,<br>
wherein the control unit selects one and up to N of the at least two upstream devices based on the multicast optimization data, and generates a join request for each of the N instances, and<br>
wherein the interface outputs the join requests to the selected upstream devices to join the N instances for the multicast group.<br><br>
25.	The network device of claim 24,<br>
wherein the control unit selects at least one and up to N of the at least two upstream devices by applying one or more criteria to the multicast optimization data of the messages to rank the upstream devices, and<br>
wherein the criteria for ranking the upstream devices includes one or more of minimization of multicast traffic duplication for the instances of the multicast group within the network, load balancing the multicast traffic within the network, and selecting a network path experiencing shorter communication delays.<br>
26.	The network device of claim 20, wherein the multicast protocol comprises one of the Protocol-Independent Multicast (PIM) protocol and the point-to-multipoint (P2MP) label distribution protocol (LDP).<br>
27.	A system comprising:<br>
a source device that provides multicast content for a multicast group; and<br>
a network device coupled to the source device via a plurality of upstream devices located between the network device and the source device,<br>
wherein the network device sends a join request for each of a specified plurality of instances N for a multicast group from the network device to the plurality of upstream routers,<br>
wherein each of the N instances corresponds to a different multicast distribution structure for the multicast group, and each of the join requests specifies a different one of the N instances to be joined, and<br>
wherein the source device selects one of the N instances and sends the multicast content for the multicast group to the network device via the multicast distribution structure corresponding to the selected one of the N instances.<br>
28.	The system of claim 27, wherein the network device distributes the join requests<br>
among the plurality of upstream devices.<br><br>
29.       A computer-readable medium comprising instructions for causing a programmable processor to:<br>
specify a plurality of instances N for a multicast group from a single source device, wherein each of the N instances corresponds to a different multicast distribution structure for the multicast group; and<br>
send a join request for each of the N instances from the device to a plurality of upstream routers located between the device and the source device for the multicast group, wherein each of the join requests specifies a different one of the N instances of the multicast group to be joined.<br>
Dated this 4 day of August 2006<br><br></source></source></s></s></source></source></source></source></source></s></s></s></source></s></s.></s></s></s></s></s></s></s></s></s></s></s5></s></s></s.></s></s></s></s></s></s></s></s></s></source></source></source></source></source></source></source></source></s></s.g></s></source></source></source></source></source></source></source></source></s></s></source></s></source></s></source></source></source></source></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM5OC1jaGUtMjAwNiBhYnN0cmFjdC1kdXBsaWNhdGUucGRm" target="_blank" style="word-wrap:break-word;">1398-che-2006 abstract-duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM5OC1jaGUtMjAwNiBjbGFpbXMtZHVwbGljYXRlLnBkZg==" target="_blank" style="word-wrap:break-word;">1398-che-2006 claims-duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM5OC1DSEUtMjAwNiBDT1JSRVNQT05ERU5DRSBPVEhFUlMucGRm" target="_blank" style="word-wrap:break-word;">1398-CHE-2006 CORRESPONDENCE OTHERS.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM5OC1DSEUtMjAwNiBDT1JSRVNQT05ERU5DRSBQTy5wZGY=" target="_blank" style="word-wrap:break-word;">1398-CHE-2006 CORRESPONDENCE PO.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM5OC1jaGUtMjAwNiBkZXNjcmlwdGlvbiAoY29tcGxldGUpLWR1cGxpY2F0ZS5wZGY=" target="_blank" style="word-wrap:break-word;">1398-che-2006 description (complete)-duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM5OC1jaGUtMjAwNiBkcmF3aW5ncy1kdXBsaWNhdGUucGRm" target="_blank" style="word-wrap:break-word;">1398-che-2006 drawings-duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM5OC1DSEUtMjAwNiBGT1JNIDE4LnBkZg==" target="_blank" style="word-wrap:break-word;">1398-CHE-2006 FORM 18.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM5OC1DSEUtMjAwNiBGT1JNIDIucGRm" target="_blank" style="word-wrap:break-word;">1398-CHE-2006 FORM 2.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM5OC1DSEUtMjAwNiBGT1JNIDMucGRm" target="_blank" style="word-wrap:break-word;">1398-CHE-2006 FORM 3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM5OC1DSEUtMjAwNiBQRVRJVElPTi5wZGY=" target="_blank" style="word-wrap:break-word;">1398-CHE-2006 PETITION.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM5OC1DSEUtMjAwNiBQT1dFUiBPRiBBVFRPUk5FWS5wZGY=" target="_blank" style="word-wrap:break-word;">1398-CHE-2006 POWER OF ATTORNEY.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM5OC1jaGUtMjAwNi1hYnN0cmFjdC5wZGY=" target="_blank" style="word-wrap:break-word;">1398-che-2006-abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM5OC1jaGUtMjAwNi1hc3NpZ25lbWVudC5wZGY=" target="_blank" style="word-wrap:break-word;">1398-che-2006-assignement.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM5OC1jaGUtMjAwNi1jbGFpbXMucGRm" target="_blank" style="word-wrap:break-word;">1398-che-2006-claims.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM5OC1jaGUtMjAwNi1jb3JyZXNwb25kbmVjZS1vdGhlcnMucGRm" target="_blank" style="word-wrap:break-word;">1398-che-2006-correspondnece-others.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM5OC1jaGUtMjAwNi1kZXNjcmlwdGlvbihjb21wbGV0ZSkucGRm" target="_blank" style="word-wrap:break-word;">1398-che-2006-description(complete).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM5OC1jaGUtMjAwNi1kcmF3aW5ncy5wZGY=" target="_blank" style="word-wrap:break-word;">1398-che-2006-drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM5OC1jaGUtMjAwNi1mb3JtIDEucGRm" target="_blank" style="word-wrap:break-word;">1398-che-2006-form 1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM5OC1jaGUtMjAwNi1mb3JtIDE4LnBkZg==" target="_blank" style="word-wrap:break-word;">1398-che-2006-form 18.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM5OC1jaGUtMjAwNi1mb3JtIDMucGRm" target="_blank" style="word-wrap:break-word;">1398-che-2006-form 3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM5OC1jaGUtMjAwNi1mb3JtIDUucGRm" target="_blank" style="word-wrap:break-word;">1398-che-2006-form 5.pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="232305-method-of-washing-solid-grain.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="232307-record-carrier-of-a-writeable-type-and-a-device-for-scanning-the-record-carrier.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>232306</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>1398/CHE/2006</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>13/2009</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>27-Mar-2009</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>16-Mar-2009</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>04-Aug-2006</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>JUNIPER NETWORKS, INC</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>1194 North Mathilda Avenue, Sunnyvale, California 94089-1206,</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>KOMPELLA, KIREETI</td>
											<td>732 Parma Way, Los Altos CA 94024,</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>H04L12/16</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>N/A</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td></td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>60/763,302</td>
									<td>2006-01-30</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/232306-a-method-and-system-of-forming-multicast-distribution-structures-within-a-network by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 13:05:10 GMT -->
</html>
