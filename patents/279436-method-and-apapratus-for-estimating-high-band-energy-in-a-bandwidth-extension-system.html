<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/279436-method-and-apapratus-for-estimating-high-band-energy-in-a-bandwidth-extension-system by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 00:59:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 279436:METHOD AND APAPRATUS FOR ESTIMATING HIGH-BAND ENERGY IN A BANDWIDTH EXTENSION SYSTEM</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">METHOD AND APAPRATUS FOR ESTIMATING HIGH-BAND ENERGY IN A BANDWIDTH EXTENSION SYSTEM</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>A method (100) includes receiving (101) an input digital audio signal comprising a narrow-band signal. The input digital audio signal is processed (102) to generate a processed digital audio signal. A high-band energy level corresponding to the input digital audio signal is estimated (103) based on an estimated enery of a transition- band of the processed digital audio signal within a predetermined upper frequency range of a narrow-band bandwidth. A high-band digital audio signal is generated (104) based on the high-band energy level and an estimated high-band spectrum corresponding to the high-band energy level.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>METHOD AND APPARATUS FOR ESTIMATING HIGH-BAND ENERGY IN<br>
A BANDWIDTH EXTENSION SYSTEM<br>
Related Application<br>
[0001] This application is related to co-pending and co-owned U.S. patent<br>
application number, entitled 11/946,978 and filed on November 29, 2007, which is<br>
incorporated by reference in its entirety herein.<br>
Technical Field<br>
[0002] This invention relates generally to rendering audible content and<br>
more particularly to bandwidth extension techniques.<br>
Background<br>
[0003] The audible rendering of audio content from a digital representation<br>
comprises a known area of endeavor. In some application settings the digital<br>
representation comprises a complete corresponding bandwidth as pertains to an<br>
original audio sample. In such a case, the audible rendering can comprise a highly<br>
accurate and natural sounding output. Such an approach, however, requires<br>
considerable overhead resources to accommodate the corresponding quantity of<br>
data. In many application settings, such as, for example, wireless communication<br>
settings, such a quantity of information cannot always be adequately supported.<br>
[0004] To accommodate such a limitation, so-called narrow-band speech<br>
techniques can serve to limit the quantity of information by, in turn, limiting the<br>
representation to less than the complete corresponding bandwidth as pertains to an<br>
original audio sample. As but one example in this regard, while natural speech<br>
includes significant components up to 8 kHz (or higher), a narrow-band<br>
representation may only provide information regarding, say, the 300 - 3,400 Hz<br>
range. The resultant content, when rendered audible, is typically sufficiently<br>
intelligible to support the functional needs of speech-based communication.<br>
Unfortunately, however, narrow-band speech processing also tends to yield speech<br>
that sounds muffled and may even have reduced intelligibility as compared to full-<br>
band speech.<br>
[0005] To meet this need, bandwidth extension techniques are sometimes<br>
employed. One artificially generates the missing information in the higher and/or<br>
lower bands based on the available narrow-band information as well as other<br>
information to select information that can be added to the narrow-band content to<br>
thereby synthesize a pseudo wide (or full) band signal. Using such techniques, for<br>
example, one can transform narrow-band speech in the 300 - 3400 Hz range to<br>
wide-band speech, say, in the 100 - 8000 Hz range. Towards this end, a critical<br>
piece of information that is required is the spectral envelope in the high-band<br>
(3400 - 8000 Hz). If the wide-band spectral envelope is estimated, the high-band<br>
spectral envelope can then usually be easily extracted from it. One can think of the<br>
high-band spectral envelope as comprised of a shape and a gain (or equivalently,<br>
energy).<br>
[0006] By one approach, for example, the high-band spectral envelope<br>
shape is estimated by estimating the wideband spectral envelope from the narrow-<br>
band spectral envelope through codebook mapping. The high-band energy is then<br>
estimated by adjusting the energy within the narrow-band section of the wideband<br>
spectral envelope to match the energy of the narrow-band spectral envelope. In<br>
this approach, the high-band spectral envelope shape determines the high-band<br>
energy and any mistakes in estimating the shape will also correspondingly affect<br>
the estimates of the high-band energy.<br>
[0007] In another approach, the high-band spectral envelope shape and the<br>
high-band energy are separately estimated, and the high-band spectral envelope<br>
that is finally used is adjusted to match the estimated high-band energy. By one<br>
related approach the estimated high-band energy is used, besides other parameters,<br>
to determine the high-band spectral envelope shape. However, the resulting high-<br>
band spectral envelope is not necessarily assured of having the appropriate high-<br>
band energy. An additional step is therefore required to adjust the energy of the<br>
high-band spectral envelope to the estimated value. Unless special care is taken,<br>
this approach will result in a discontinuity in the wideband spectral envelope at the<br>
boundary between the narrow-band and high-band. While the existing approaches<br>
to bandwidth extension, and, in particular, to high-band envelope estimation are<br>
reasonably successful, they do not necessarily yield resultant speech of suitable<br>
quality in at least some application settings.<br>
[0008] In order to generate bandwidth extended speech of acceptable<br>
quality, the number of artifacts in such speech should be minimized. It is known<br>
that over-estimation of high-band energy results in annoying artifacts. Incorrect<br>
estimation of the high-band spectral envelope shape can also lead to artifacts but<br>
these artifacts are usually milder and are easily masked by the narrow-band<br>
speech.<br>
Brief Description of the Drawings<br>
[0009] The above needs are at least partially met through provision of the<br>
method and apparatus for estimating high-band energy in a bandwidth extension<br>
system described in the following detailed description. The accompanying figures<br>
where like reference numerals refer to identical or functionally similar elements<br>
throughout the separate views and which together with the detailed description<br>
below are incorporated in and form part of the specification, serve to further<br>
illustrate various embodiments and to explain various principles and advantages<br>
all in accordance with the present invention.<br>
[0010] FIG. 1 comprises a flow diagram as configured in accordance with<br>
various embodiments of the invention;<br>
[0011] FIG. 2 comprises a graph as configured in accordance with various<br>
embodiments of the invention;<br>
[0012] FIG. 3 comprises a block diagram as configured in accordance with<br>
various embodiments of the invention;<br>
[0013] FIG. 4 comprises a block diagram as configured in accordance with<br>
various embodiments of the invention;<br>
[0014] FIG. 5 comprises a block diagram as configured in accordance with<br>
various embodiments of the invention; and<br>
[0015] FIG. 6 comprises a graph as configured in accordance with various<br>
embodiments of the invention.<br>
[0016] Skilled artisans will appreciate that elements in the figures are<br>
illustrated for simplicity and clarity and have not necessarily been drawn to scale.<br>
For example, the dimensions and/or relative positioning of some of the elements in<br>
the figures may be exaggerated relative to other elements to help to improve<br>
understanding of various embodiments of the present invention. Also, common but<br>
well-understood elements that are useful or necessary in a commercially feasible<br>
embodiment are often not depicted in order to facilitate a less obstructed view of<br>
these various embodiments of the present invention. It will further be appreciated<br>
that certain actions and/or steps may be described or depicted in a particular order<br>
of occurrence while those skilled in the art will understand that such specificity<br>
with respect to sequence is not actually required. It will also be understood that the<br>
terms and expressions used herein have the ordinary technical meaning as is<br>
accorded to such terms and expressions by persons skilled in the technical field as<br>
set forth above except where different specific meanings have otherwise been set<br>
forth herein.<br>
Detailed Description<br>
[0017] Teachings discussed herein are directed to a cost-effective method<br>
and system for artificial bandwidth extension. According to such teachings, a<br>
narrow-band digital audio signal is received. The narrow-band digital audio signal<br>
may be a signal received via a mobile station in a cellular network, for example,<br>
and the narrow-band digital audio signal may include speech in the frequency<br>
range of 300 - 3400 Hz. Artificial bandwidth extension techniques are<br>
implemented to spread out the spectrum of the digital audio signal to include low-<br>
band frequencies such as 100 - 300 Hz and high-band frequencies such as 3400-<br>
8000 Hz. By utilizing artificial bandwidth extension to spread the spectrum to<br>
include low-band and high-band frequencies, a more natural-sounding digital<br>
audio signal is created that is more pleasing to a user of a mobile station<br>
implementing the technique.<br>
[0018] In the artificial bandwidth extension techniques, the missing<br>
information in the higher (3400 -8000 Hz) and lower (100 - 300 Hz) bands are<br>
artificially generated based on the available narrow-band information as well as<br>
apriori information derived and stored from a speech database and added to the<br>
narrow-band signal to synthesize a pseudo wide-band signal. Such a solution is<br>
quite attractive because it requires minimal changes to an existing transmission<br>
system. For example, no additional bit rate is needed. Artificial bandwidth<br>
extension can be incorporated into a post-processing element at the receiving end<br>
and is therefore independent of the speech coding technology used in the<br>
communication system or the nature of the communication system itself, e.g.,<br>
analog, digital, land-line, or cellular. For example, the artificial bandwidth<br>
extension techniques may be implemented by a mobile station receiving a narrow-<br>
band digital audio signal, and the resultant wide-band signal is utilized to generate<br>
audio played to a user of the mobile station.<br>
[0019] In determining the high-band information, the energy in the high-<br>
band is estimated first. A subset of the narrow-band signal is utilized to estimate<br>
the high-band energy. The subset of the narrow-band signal that is closest to the<br>
high-band frequencies generally has the highest correlation with the high-band<br>
signal. Accordingly, only a subset of the narrow-band, as opposed to the entire<br>
narrow-band, is utilized to estimate the high-band energy. The subset that is used<br>
is referred to as the "transition-band" and may include frequencies such as 2500-<br>
3400 Hz. More specifically, the transition-band is defined herein as a frequency<br>
band that is contained within the narrow-band and is close to the high-band, i.e., it<br>
serves as a transition to the high-band. This approach is in contrast with prior art<br>
bandwidth extension systems which estimate the high-band energy in terms of the<br>
energy in the entire narrow-band, typically as a ratio.<br>
[0020] In order to estimate the high-band energy, the transition-band<br>
energy is first estimated via techniques discussed below with respect to FIGS. 4<br>
and 5. For example, the transition-band energy of the transition-band may be<br>
calculated by first up-sampling an input narrow-band signal, computing the<br>
frequency spectrum of the up-sampled narrow-band signal, and then summing the<br>
energies of the spectral components within the transition-band. The estimated<br>
transition-band energy is subsequently inserted into a polynomial equation as an<br>
independent variable to estimate the high-band energy. The coefficients or<br>
weights of the different powers of the independent variable in the polynomial<br>
equation including that of the zeroth power, that is, the constant term, are selected<br>
to minimize the mean squared error between true and estimated values of the high-<br>
band energy over a large number of frames from a training speech database. The<br>
estimation accuracy may be further enhanced by conditioning the estimation on<br>
parameters derived from the narrow-band signal as well as parameters derived<br>
from the transition-band signal as is discussed in further detail below. After the<br>
high-band energy has been estimated, the high-band spectrum is estimated based<br>
on the high-band energy estimate.<br>
[0021] By utilizing the transition-band in this manner, a robust bandwidth<br>
extension technique is provided that produces a corresponding audio signal of<br>
higher quality than would be possible if the energy in the entire narrow-band were<br>
used to estimate the high-band energy. Moreover, this technique may be utilized<br>
without unduly adversely affecting existing communication systems because the<br>
bandwidth extension techniques are applied to a narrow-band signal received via<br>
the communication system, i.e., existing communication systems may be utilized<br>
to send the narrow-band signals.<br>
[0022] FIG. 1 illustrates a process 100 for generating a bandwidth extended<br>
digital audio signal in accordance with various embodiments of the invention.<br>
First, at operation 101, a narrow-band digital audio signal is received. In a typical<br>
application setting, this will comprise providing a plurality of frames of such<br>
content. These teachings will readily accommodate processing each such frame as<br>
per the described steps. By one approach, for example, each such frame can<br>
correspond to 10 - 40 milliseconds of original audio content.<br>
[0023] This can comprise, for example, providing a digital audio signal that<br>
comprises synthesized vocal content. Such is the case, for example, when<br>
employing these teachings in conjunction with received vo-coded speech content<br>
in a portable wireless communications device. Other possibilities exist as well,<br>
however, as will be well understood by those skilled in the art. For example, the<br>
digital audio signal might instead comprise an original speech signal or a re-<br>
sampled version of either an original speech signal or synthesized speech content.<br>
[0024] Referring momentarily to FIG. 2, it will be understood that this<br>
digital audio signal pertains to some original audio signal 201 that has an original<br>
corresponding signal bandwidth 202. This original corresponding signal<br>
bandwidth 202 will typically be larger than the aforementioned signal bandwidth<br>
as corresponds to the digital audio signal. This can occur, for example, when the<br>
digital audio signal represents only a portion 203 of the original audio signal 201<br>
with other portions being left out-of-band. In the illustrative example shown, this<br>
includes a low-band portion 204 and a high-band portion 205. Those skilled in the<br>
art will recognize that this example serves an illustrative purpose only and that the<br>
unrepresented portion may only comprise a low-band portion or a high-band<br>
portion. These teachings would also be applicable for use in an application setting<br>
where the unrepresented portion falls mid-band to two or more represented<br>
portions (not shown).<br>
[0025] It will therefore be readily understood that the unrepresented<br>
portion(s) of the original audio signal 201 comprise content that these present<br>
teachings may reasonably seek to replace or otherwise represent in some<br>
reasonable and acceptable manner. It will also be understood this signal bandwidth<br>
occupies only a portion of the Nyquist bandwidth determined by the relevant<br>
sampling frequency. This, in turn, will be understood to further provide a<br>
frequency region in which to effect the desired bandwidth extension.<br>
[0026] Referring back to FIG. 1, the input digital audio signal is processed<br>
to generate a processed digital audio signal at operation 102. By one approach, the<br>
processing at operation 102 is an up-sampling operation. By another approach, it<br>
may be a simple unity gain system for which the output equals the input. At<br>
operation 103, a high-band energy level corresponding to the input digital audio<br>
signal is estimated based on a transition-band of the processed digital audio signal<br>
within a predetermined upper frequency range of a narrow-band bandwidth.<br>
[0027] By using the transition-band components as the basis for the<br>
estimate, a more accurate estimate is obtained than would generally be possible if<br>
all of the narrow-band components were collectively used to estimate the energy<br>
value of the high-band components. By one approach, the high-band energy value<br>
is used to access a look-up table that contains a plurality of corresponding<br>
candidate high-band spectral envelope shapes to determine the high-band spectral<br>
envelope, i.e. the appropriate high-band spectral envelope shape at the correct<br>
energy level.<br>
[0028] This process 100 will then optionally accommodate combining 104<br>
the digital audio signal with high-band content corresponding to the estimated<br>
energy value and spectrum of the high-band components to provide a bandwidth<br>
extended version of the narrow-band digital audio signal to be rendered. Although<br>
the process shown in FIG. 1 only illustrates adding the estimated high-band<br>
components, it should be appreciated that low-band components may also be<br>
estimated and combined with the narrow-band digital audio signal to generate a<br>
bandwidth extended wide-band signal.<br>
[0029] The resultant bandwidth extended audio signal (obtained by<br>
combining the input digital audio signal with the artificially generated out-of-<br>
signal bandwidth content) has an improved audio quality versus the original<br>
narrow-band digital audio signal when rendered in audible form. By one approach,<br>
this can comprise combining two items that are mutually exclusive with respect to<br>
their spectral content. In such a case, such a combination can take the form, for<br>
example, of simply concatenating or otherwise joining the two (or more) segments<br>
together. By another approach, if desired, the high-band and/or low-band<br>
bandwidth content can have a portion that is within the corresponding signal<br>
bandwidth of the digital audio signal. Such an overlap can be useful in at least<br>
some application settings to smooth and/or feather the transition from one portion<br>
to the other by combining the overlapping portion of the high-band and/or low-<br>
band bandwidth content with the corresponding in-band portion of the digital<br>
audio signal.<br>
[0030] Those skilled in the art will appreciate that the above-described<br>
processes are readily enabled using any of a wide variety of available and/or<br>
readily configured platforms, including partially or wholly programmable<br>
platforms as are known in the art or dedicated purpose platforms as may be desired<br>
for some applications. Referring now to FIG. 3, an illustrative approach to such a<br>
platform will now be provided.<br>
[0031] In this illustrative example, in an apparatus 300 a processor 301 of<br>
choice operably couples to an input 302 that is configured and arranged to receive<br>
a digital audio signal having a corresponding signal bandwidth. When the<br>
apparatus 300 comprises a wireless two-way communications device, such a<br>
digital audio signal can be provided by a corresponding receiver 303 as is well<br>
known in the art. In such a case, for example, the digital audio signal can comprise<br>
synthesized vocal content formed as a function of received vo-coded speech<br>
content.<br>
[0032] The processor 301, in turn, can be configured and arranged (via, for<br>
example, corresponding programming when the processor 301 comprises a<br>
partially or wholly programmable platform as are known in the art) to carry out<br>
one or more of the steps or other functionality set forth herein. This can comprise,<br>
for example, estimating the high-band energy value from the transition-band<br>
energy and then using the high-band energy value and a set of energy-index<br>
shapes to determine the high-band spectral envelope.<br>
[0033] As described above, by one approach, the aforementioned high-<br>
band energy value can serve to facilitate accessing a look-up table that contains a<br>
plurality of corresponding candidate spectral envelope shapes. To support such an<br>
approach, this apparatus can also comprise, if desired, one or more look-up tables<br>
304 that are operably coupled to the processor 301. So configured, the processor<br>
301 can readily access the look-up table 304 as appropriate.<br>
[0034] Those skilled in the art will recognize and understand that such an<br>
apparatus 300 may be comprised of a plurality of physically distinct elements as is<br>
suggested by the illustration shown in FIG. 3. It is also possible, however, to view<br>
this illustration as comprising a logical view, in which case one or more of these<br>
elements can be enabled and realized via a shared platform. It will also be<br>
understood that such a shared platform may comprise a wholly or at least partially<br>
programmable platform as are known in the art.<br>
[0035] It should be appreciated the processing discussed above may be<br>
performed by a mobile station in wireless communication with a base station. For<br>
example, the base station may transmit the narrow-band digital audio signal via<br>
conventional means to the mobile station. Once received, processors) within the<br>
mobile station perform the requisite operations to generate a bandwidth extended<br>
version of the digital audio signal that is clearer and more audibly pleasing to a<br>
user of the mobile station.<br>
[0036] Referring now to FIG. 4, input narrow-band speech snb sampled at 8<br>
kHz is first up-sampled by 2 using a corresponding upsampler 401 to obtain up-<br>
sampled narrow-band speech snb sampled at 16 kHz. This can comprise<br>
performing an 1:2 interpolation (for example, by inserting a zero-valued sample<br>
between each pair of original speech samples) followed by low-pass filtering<br>
using, for example, a low-pass filter (LPF) having a pass-band between 0 and<br>
3400 Hz.<br>
[0037] From snb, the narrow-band linear predictive (LP) parameters, Anb =<br>
{1, a1, a2,..., aP} where P is the model order, are also computed using an LP<br>
analyzer 402 that employs well-known LP analysis techniques. (Other possibilities<br>
exist, of course; for example, the LP parameters can be computed from a 2:1<br>
decimated version of These LP parameters model the spectral envelope of the<br>
narrow-band input speech as<br>
<br>
[0039] In the equation above, the angular frequency to in radians/sample is<br>
given by where/is the signal frequency in Hz and Fs is the sampling<br>
frequency in Hz. For a sampling frequency Fs of 8 kHz, a suitable model order P,<br>
for example, is 10.<br>
[0040] The LP parameters Anb are then interpolated by 2 using an<br>
interpolation module 403 to obtain Using <br>
the up-sampled narrow-band speech is inverse filtered using an analysis filter<br>
404 to obtain the LP residual signal (which is also sampled at 16 kHz). By one<br>
approach, this inverse (or analysis) filtering operation can be described by the<br>
equation<br>
<br>
[0042] where n is the sample index.<br>
[0043] In a typical application setting, the inverse filtering of to obtain<br>
 can be done on a frame-by-frame basis where a frame is defined as a sequence<br>
of N consecutive samples over a duration of T seconds. For many speech signal<br>
applications, a good choice for T is about 20 ms with corresponding values for N<br>
of about 160 at 8 kHz and about 320 at 16 kHz sampling frequency. Successive<br>
frames may overlap each other, for example, by up to or around 50%, in which<br>
case, the second half of the samples in the current frame and the first half of the<br>
samples in the following frame are the same, and a new frame is processed every<br>
772 seconds. For a choice of T as 20 ms and 50% overlap, for example, the LP<br>
parameters Anb are computed from 160 consecutive snb samples every 10 ms, and<br>
are used to inverse filter the middle 160 samples of the corresponding frame of<br>
320 samples to yield 160 samples of <br>
[0044] One may also compute the 2P-order LP parameters for the inverse<br>
filtering operation directly from the up-sampled narrow-band speech. This<br>
approach, however, may increase the complexity of both computing the LP<br>
parameters and the inverse filtering operation, without necessarily increasing<br>
performance under at least some operating conditions.<br>
[0045] The LP residual signal is next full-wave rectified using a full-<br>
wave rectifier 405 and high-pass filtering the result (using, for example, a high-<br>
pass filter (HPF) 406 with a pass-band between 3400 and 8000 Hz) to obtain the<br>
high-band rectified residual signal rrhb. In parallel, the output of a pseudo-random<br>
noise source 407 is also high-pass filtered 408 to obtain the high-band noise signal<br>
nhb. Alternately, a high-pass filtered noise sequence may be pre-stored in a buffer<br>
(such as, for example, a circular buffer) and accessed as required to generate nhb-<br>
The use of such a buffer eliminates the computations associated with high-pass<br>
filtering the pseudo-random noise samples in real time. These two signals, viz.,<br>
rrhb and nhb, are then mixed in a mixer 409 according to the voicing level v<br>
provided by an Estimation &amp; Control Module (ECM) 410 (which module will be<br>
described in more detail below). In this illustrative example, this voicing level v<br>
ranges from 0 to 1, with 0 indicating an unvoiced level and 1 indicating a fully-<br>
voiced level. The mixer 409 essentially forms a weighted sum of the two input<br>
signals at its output after ensuring that the two input signals are adjusted to have<br>
the same energy level. The mixer output signal mhb is given by<br>
<br>
[0047] Those skilled in the art will appreciate that other mixing rules are<br>
also possible. It is also possible to first mix the two signals, viz., the full-wave<br>
rectified LP residual signal and the pseudo-random noise signal, and then high-<br>
pass filter the mixed signal. In this case, the two high-pass filters 406 and 408 are<br>
replaced by a single high-pass filter placed at the output of the mixer 409.<br>
[0048] The resultant signal mhb is then pre-processed using a high-band<br>
(HB) excitation preprocessor 411 to form the high-band excitation signal exhb. The<br>
pre-processing steps can comprise: (i) scaling the mixer output signal mhb to match<br>
the high-band energy level Ehb, and (ii) optionally shaping the mixer output signal<br>
mhb to match the high-band spectral envelope SEhb. Both Ehb and SEhb are provided<br>
to the HB excitation pre-processor 411 by the ECM 410. When employing this<br>
approach, it may be useful in many application settings to ensure that such shaping<br>
does not affect the phase spectrum of the mixer output signal mhb; that is, the<br>
shaping may preferably be performed by a zero-phase response filter.<br>
[0049] The up-sampled narrow-band speech signal and the high-band<br>
excitation signal exhb are added together using a summer 412 to form the mixed-<br>
band signal . This resultant mixed-band signal is input to an equalizer filter<br>
413 that filters that input using wide-band spectral envelope information SEwb<br>
provided by the ECM 410 to form the estimated wide-band signal The<br>
equalizer filter 413 essentially imposes the wide-band spectral envelope SEwb on<br>
the input signal to form (further discussion in mis regard appears below).<br>
The resultant estimated wide-band signal is high-pass filtered, e.g., using a<br>
high pass filter 414 having a pass-band from 3400 to 8000 Hz, and low-pass<br>
filtered, e.g., using a low pass filter 415 having a pass-band from 0 to 300 Hz, to<br>
obtain respectively the high-band signal and the low-band signal These<br>
signals and the up-sampled narrow-band signal are added together in<br>
another summer 416 to form the bandwidth extended signal sbwe.<br>
[0050] Those skilled in the art will appreciate that there are various other<br>
filter configurations possible to obtain the bandwidth extended signal sbwe. If the<br>
equalizer filter 413 accurately retains the spectral content of the up-sampled<br>
narrow-band speech signal which is part of its input signal then the<br>
estimated wide-band signal can be directly output as the bandwidth extended<br>
signal sbwe thereby eliminating the high-pass filter 414, the low-pass filter 415, and<br>
the summer 416. Alternately, two equalizer filters can be used, one to recover the<br>
low frequency portion and another to recover the high-frequency portion, and the<br>
output of the former can be added to high-pass filtered output of the latter to<br>
obtain the bandwidth extended signal sbwe.<br>
[0051] Those skilled in the art will understand and appreciate that, with this<br>
particular illustrative example, the high-band rectified residual excitation and the<br>
high-band noise excitation are mixed together according to the voicing level.<br>
When the voicing level is 0 indicating unvoiced speech, the noise excitation is<br>
exclusively used. Similarly, when the voicing level is 1 indicating voiced speech,<br>
the high-band rectified residual excitation is exclusively used. When the voicing<br>
level is in between 0 and 1 indicating mixed-voiced speech, the two excitations are<br>
mixed in appropriate proportion as determined by the voicing level and used. The<br>
mixed high-band excitation is thus suitable for voiced, unvoiced, and mixed-<br>
voiced sounds.<br>
[0052] It will be further understood and appreciated that, in this illustrative<br>
example, an equalizer filter is used to synthesize swb. The equalizer filter considers<br>
the wide-band spectral envelope SEwb provided by the ECM as the ideal envelope<br>
and corrects (or equalizes) the spectral envelope of its input signal smb to match the<br>
ideal. Since only magnitudes are involved in the spectral envelope equalization,<br>
the phase response of the equalizer filter is chosen to be zero. The magnitude<br>
response of the equalizer filter is specified by SEwb(?)/SEmb(?). The design and<br>
implementation of such an equalizer filter for a speech coding application<br>
comprises a well understood area of endeavor. Briefly, however, the equalizer<br>
filter operates as follows using overlap-add (OLA) analysis.<br>
[0053] The input signal is first divided into overlapping frames, e.g., 20<br>
ms (320 samples at 16 kHz) frames with 50% overlap. Each frame of samples is<br>
then multiplied (point-wise) by a suitable window, e.g., a raised-cosine window<br>
with perfect reconstruction property. The windowed speech frame is next analyzed<br>
to estimate the LP parameters modeling its spectral envelope. The ideal wide-band<br>
spectral envelope for the frame is provided by the ECM. From the two spectral<br>
envelopes, the equalizer computes the filter magnitude response as<br>
SEwb(?)/SEmb(?) and sets the phase response to zero. The input frame is then<br>
equalized to obtain the corresponding output frame. The equalized output frames<br>
are finally overlap-added to synthesize the estimated wide-band speech swb.<br>
[0054] Those skilled in the art will appreciate that besides LP analysis,<br>
there are other methods to obtain the spectral envelope of a given speech frame,<br>
e.g., cepstral analysis, piecewise linear or higher order curve fitting of spectral<br>
magnitude peaks, etc.<br>
[0055] Those skilled in the art will also appreciate that instead of<br>
windowing the input signal smb directly, one could have started with windowed<br>
versions of snb, rrhb, and nhb to achieve the same result. It may also be convenient<br>
to keep the frame size and the percent overlap for the equalizer filter the same as<br>
those used in the analysis filter block used to obtain rnb from snb.<br>
[0056] The described equalizer filter approach to synthesizing swb offers a<br>
number of advantages: i) Since the phase response of the equalizer filter 413 is<br>
zero, the different frequency components of the equalizer output are time aligned<br>
with the corresponding components of the input. This can be useful for voiced<br>
speech because the high energy segments (such as glottal pulse segments) of the<br>
rectified residual high-band excitation exhb are time aligned with the corresponding<br>
high energy segments of the up-sampled narrow-band speech snb at the equalizer<br>
input, and preservation of this time alignment at the equalizer output will often act<br>
to ensure good speech quality; ii) the input to the equalizer filter 413 does not need<br>
to have a flat spectrum as in the case of LP synthesis filter; iii) the equalizer filter<br>
413 is specified in the frequency domain, and therefore a better and finer control<br>
over different parts of the spectrum is feasible; and iv) iterations are possible to<br>
improve the filtering effectiveness at the cost of additional complexity and delay<br>
(for example, the equalizer output can be fed back to the input to be equalized<br>
again and again to improve performance).<br>
[0057] Some additional details regarding the described configuration will<br>
now be presented.<br>
[0058] High-band excitation pre-processing: The magnitude response of the<br>
equalizer filter 413 is given by SEwb(?)/SEmb(?) and its phase response can be set<br>
to zero. The closer the input spectral envelope SEmb(?) is to the ideal spectral<br>
envelope SEwb(?), the easier it is for the equalizer to correct the input spectral<br>
envelope to match the ideal. At least one function of the high-band excitation pre-<br>
processor 411 is to move SEmb(?) closer to SEwb(?) and thus make the job of the<br>
equalizer filter 413 easier. First, this is done by scaling the mixer output signal mhb<br>
to the correct high-band energy level Ehb, provided by the ECM 410. Second, the<br>
mixer output signal mhb is optionally shaped so that its spectral envelope matches<br>
the high-band spectral envelope SEhb provided by the ECM 410 without affecting<br>
its phase spectrum. A second step can comprise essentially a pre-equalization step.<br>
[0059] Low-band excitation: Unlike the loss of information in the high-<br>
band caused by the band-width restriction imposed, at least in part, by the<br>
sampling frequency, the loss of information in the low-band (0 - 300 Hz) of the<br>
narrow-band signal is due, at least in large measure, to the band-limiting effect of<br>
the channel transfer function consisting of, for example, a microphone, amplifier,<br>
speech coder, transmission channel, or the like. Consequently, in a clean narrow-<br>
band signal, the low-band information is still present although at a very low level.<br>
This low-level information can be amplified in a straight-forward manner to<br>
restore the original signal. But care should be taken in this process since low level<br>
signals are easily corrupted by errors, noise, and distortions. An alternative is to<br>
synthesize a low-band excitation signal similar to the high-band excitation signal<br>
described earlier. That is, the low-band excitation signal can be formed by mixing<br>
the low-band rectified residual signal rrlb and the low-band noise signal nib, in a<br>
way similar to the formation of the high-band mixer output signal mhb.<br>
[0060] Referring now to FIG. 5, the Estimation and Control Module (ECM)<br>
410 takes as input the narrow-band speech snb, the up-sampled narrow-band<br>
speech snb, and the narrow-band LP parameters Anb and provides as output the<br>
voicing level v, the high-band energy Ehb, the high-band spectral envelope SEhb,<br>
and the wide-band spectral envelope SEwb.<br>
[0061] Voicing level estimation: To estimate the voicing level, a zero-<br>
crossing calculator 501 calculates the number of zero-crossings zc in each frame of<br>
the narrow-band speech snb as follows:<br>
<br>
[0063] where<br>
<br>
[0065] n is the sample index, and N is the frame size in samples. It is<br>
convenient to keep the frame size and percent overlap used in the ECM 410 the<br>
same as those used in the equalizer filter 413 and the analysis filter blocks, e.g., T<br>
= 20 ms, N = 160 for 8 kHz sampling, N= 320 for 16 kHz sampling, and 50%<br>
overlap with reference to the illustrative values presented earlier. The value of the<br>
zc parameter calculated as above ranges from 0 to 1. From the zc parameter, a<br>
voicing level estimator 502 can estimate the voicing level v as follows.<br>
<br>
[0067] where, ZClow and ZChigh represent appropriately chosen low and high<br>
thresholds respectively, e.g., ZClow = 0.40 and ZChigh = 0.45. The output d of an<br>
onset/plosive detector 503 can also be fed into the voicing level detector 502. If a<br>
frame is flagged as containing an onset or a plosive with d = 1, the voicing level of<br>
that frame as well as the following frame can be set to 1. Recall that, by one<br>
approach, when the voicing level is 1, the high-band rectified residual excitation is<br>
exclusively used. This is advantageous at an onset/plosive, compared to noise-only<br>
or mixed high-band excitation, because the rectified residual excitation closely<br>
follows the energy versus time contour of the up-sampled narrow-band speech<br>
thus reducing the possibility of pre-echo type artifacts due to time dispersion in the<br>
bandwidth extended signal.<br>
[0068] In order to estimate the high-band energy, a transition-band energy<br>
estimator 504 estimates the transition-band energy from the up-sampled narrow-<br>
band speech signal snb. The transition-band is defined here as a frequency band<br>
that is contained within the narrow-band and close to the high-band, i.e., it serves<br>
as a transition to the high-band, (which, in this illustrative example, is about 2500<br>
- 3400 Hz). Intuitively, one would expect the high-band energy to be well<br>
correlated with the transition-band energy, which is borne out in experiments. A<br>
simple way to calculate the transition-band energy Etb, is to compute the frequency<br>
spectrum of snb (for example, through a Fast Fourier Transform (FFT)) and sum<br>
the energies of the spectral components within the transition-band.<br>
[0069] From the transition-band energy Etb in dB (decibels), the high-band<br>
energy Ehb0 in dB is estimated as<br>
<br>
[0071] where the coefficients a and ß are selected to minimize the mean<br>
squared error between the true and estimated values of the high-band energy over<br>
a large number of frames from a training speech database.<br>
[0072] The estimation accuracy can be further enhanced by exploiting<br>
contextual information from additional speech parameters such as the zero-<br>
crossing parameter zc and the transition-band spectral slope parameter sl as may<br>
be provided by a transition-band slope estimator 505. The zero-crossing<br>
parameter, as discussed earlier, is indicative of the speech voicing level. The slope<br>
parameter indicates the rate of change of spectral energy within the transition-<br>
band. It can be estimated from the narrow-band LP parameters Anb by<br>
approximating the spectral envelope (in dB) within the transition-band as a<br>
straight line, e.g., through linear regression, and computing its slope. The zc-sl<br>
parameter plane is then partitioned into a number of regions, and the coefficients a<br>
and ß are separately selected for each region. For example, if the ranges of zc and<br>
sl parameters are each divided into 8 equal intervals, the zc-sl parameter plane is<br>
then partitioned into 64 regions, and 64 sets of a and ß coefficients are selected,<br>
one for each region.<br>
[0073] By another approach (not shown in FIG. 5), further improvement in<br>
estimation accuracy is achieved as follows. Note that instead of the slope<br>
parameter sl (which is only a first order representation of the spectral envelope<br>
within the transition band), a higher resolution representation may be employed to<br>
enhance the performance of the high-band energy estimator. For example, a vector<br>
quantized representation of the transition band spectral envelope shapes (in dB)<br>
may be used. As one illustrative example, the vector quantizer (VQ) codebook<br>
consists of 64 shapes referred to as transition band spectral envelope shape<br>
parameters tbs that are computed from a large training database. One could replace<br>
the sl parameter in the zc-sl parameter plane with the tbs parameter to achieve<br>
improved performance. By another approach, however, a third parameter referred<br>
to as the spectral flatness measure sfm is introduced. The spectral flatness measure<br>
is defined as the ratio of the geometric mean to the arithmetic mean of the narrow-<br>
band spectral envelope (in dB) within an appropriate frequency range (such as, for<br>
example, 300 - 3400 Hz). The sfm parameter indicates how flat the spectral<br>
envelope is - ranging in this example from about 0 for a peaky envelope to 1 for a<br>
completely flat envelope. The sfm parameter is also related to the voicing level of<br>
speech but in a different way than zc. By one approach, the three dimensional zc-<br>
sfm-tbs parameter space is divided into a number of regions as follows. The zc-sfm<br>
plane is divided into 12 regions thereby giving rise to 12 x 64 = 768 possible<br>
regions in the three dimensional space. Not all of these regions, however, have<br>
sufficient data points from the training data base. So, for many application<br>
settings, the number of useful regions is limited to about 500, with a separate set<br>
of a and ß coefficients being selected for each of these regions.<br>
[0074] A high-band energy estimator 506 can provide additional<br>
improvement in estimation accuracy by using higher powers of Etb in estimating<br>
Ehbo, e.g.,<br>
<br>
[0076] In this case, five different coefficients, viz., a4, a3, a2, a1 and ß, are<br>
selected for each partition of the zc-sl parameter plane (or alternately, for each<br>
partition of the zc-sfm-tbs parameter space). Since the above equations (refer to<br>
paragraphs 69 and 74) for estimating Ehbo are non-linear, special care must be<br>
taken to adjust the estimated high-band energy as the input signal level, i.e,<br>
energy, changes. One way of achieving this is to estimate the input signal level in<br>
dB, adjust Etb up or down to correspond to the nominal signal level, estimate Ehb0,<br>
and adjust Ehb0 down or up to correspond to the actual signal level.<br>
[0077] While the high-band energy estimation method described above<br>
works quite well for most frames, occasionally there are frames for which the<br>
high-band energy is grossly under- or over-estimated. Such estimation errors can<br>
be at least partially corrected by means of an energy track smoother 507 that<br>
comprises a smoothing filter. The smoothing filter can be designed such that it<br>
allows actual transitions in the energy track to pass through unaffected, e.g.,<br>
transitions between voiced and unvoiced segments, but corrects occasional gross<br>
errors in an otherwise smooth energy track, e.g., within a voiced or unvoiced<br>
segment. A suitable filter for this purpose is a median filter, e.g., a 3-point median<br>
filter described by the equation<br>
<br>
[0079] where k is the frame index, and the median (.) operator selects the<br>
median of its three arguments. The 3-point median filter introduces a delay of one<br>
frame. Other types of filters with or without delay can also be designed for<br>
smoothing the energy track.<br>
[0080] The smoothed energy value Ehbl can be further adapted by an<br>
energy adapter 508 to obtain the final adapted high-band energy estimate Ehb. This<br>
adaptation can involve either decreasing or increasing the smoothed energy value<br>
based on the voicing level parameter v and/or the d parameter output by the<br>
onset/plosive detector 503. By one approach, adapting the high-band energy value<br>
changes not only the energy level but also the spectral envelope shape since the<br>
selection of the high-band spectrum can be tied to the estimated energy.<br>
[0081] Based on the voicing level parameter v, energy adaptation can be<br>
achieved as follows. For v = 0 corresponding to an unvoiced frame, the smoothed<br>
energy value Ehbl is increased slightly, e.g., by 3 dB, to obtain the adapted energy<br>
value Ehb. The increased energy level emphasizes unvoiced speech in the band-<br>
width extended output compared to the narrow-band input and also helps to select<br>
a more appropriate spectral envelope shape for the unvoiced segments. For v = 1<br>
corresponding to a voiced frame, the smoothed energy value Ehbl is decreased<br>
slightly, e.g., by 6 dB, to obtain the adapted energy value Ehb. The slightly<br>
decreased energy level helps to mask any errors in the selection of the spectral<br>
envelope shape for the voiced segments and consequent noisy artifacts.<br>
[0082] When the voicing level v is in between 0 and 1 corresponding to a<br>
mixed-voiced frame, no adaptation of the energy value is done. Such mixed-<br>
voiced frames represent only a small fraction of the total number of frames and<br>
un-adapted energy values work fine for such frames. Based on the onset/plosive<br>
detector output d, energy adaptation is done as follows. When d = 1, it indicates<br>
that the corresponding frame contains an onset, e.g., transition from silence to<br>
unvoiced or voiced sound, or a plosive sound, e.g., /t/. In this case, the high-band<br>
energy of the particular frame as well as of the following frame is adapted to a<br>
very low value so that its high-band energy content is low in the band-width<br>
extended speech. This helps to avoid the occasional artifacts associated with such<br>
frames. For d = 0, no further adaptation of the energy is done; i.e., the energy<br>
adaptation based on voicing level v, as described above, is retained.<br>
[0083] The estimation of the wide-band spectral envelope SEwb is described<br>
next. To estimate SEwb, one can separately estimate the narrow-band spectral<br>
envelope SEnb, the high-band spectral envelope SEhb, and the low-band spectral<br>
envelope SElb, and combine the three envelopes together.<br>
[0084] A narrow-band spectrum estimator 509 can estimate the narrow-<br>
band spectral envelope SEnb from the up-sampled narrow-band speech snb. From<br>
snb, the LP parameters, Bnb = {1, b1, b2,..., bQ} where Q is the model order, are<br>
first computed using well-known LP analysis techniques. For an up-sampled<br>
frequency of 16 kHz, a suitable model order Q, for example, is 20. The LP<br>
parameters Bnb model the spectral envelope of the up-sampled narrow-band speech<br>
as<br>
<br>
[0086] In the equation above, the angular frequency at in radians/sample is<br>
given by a = 2nfl2Fs, where/is the signal frequency in Hz and Fs is the sampling<br>
frequency in Hz. Notice that the spectral envelopes SEnbin and SEusnb are different<br>
since the former is derived from the narrow-band input speech and the latter from<br>
the up-sampled narrow-band speech. However, inside the pass-band of 300 to<br>
3400 Hz, they are approximately related by to within a<br>
constant. Although the spectral envelope SEusnb is defined over the range 0 - 8000<br>
(Fs) Hz, the useful portion lies within the pass-band (in this illustrative example,<br>
300 - 3400 Hz).<br>
[0087] As one illustrative example in this regard, the computation of SEusnb<br>
is done using FFT as follows. First, the impulse response of the inverse filter<br>
Bnb(z) is calculated to a suitable length, e.g., 1024, as {l,b1,b2, ... , bQ, 0, 0, ... ,<br>
0}. Then an FFT of the impulse response is taken, and magnitude spectral<br>
envelope SEutnb is obtained by computing the inverse magnitude at each FFT<br>
index. For an FFT length of 1024, the frequency resolution of SEusnb computed as<br>
above is 16000/1024 = 15.625 Hz. From SEusnb, the narrow-band spectral envelope<br>
SEnb is estimated by simply extracting the spectral magnitudes from within the<br>
approximate range, 300 - 3400 Hz.<br>
[0088] Those skilled in the art will appreciate that besides LP analysis,<br>
there are other methods to obtain the spectral envelope of a given speech frame,<br>
e.g., cepstral analysis, piecewise linear or higher order curve fitting of spectral<br>
magnitude peaks, etc.<br>
[0089] A high-band spectrum estimator 510 takes an estimate of the high-<br>
band energy as input and selects a high-band spectral envelope shape that is<br>
consistent with the estimated high-band energy. A technique to come up with<br>
different high-band spectral envelope shapes corresponding to different high-band<br>
energies is described next.<br>
[0090] Starting with a large training database of wide-band speech sampled<br>
at 16 kHz, the wide-band spectral magnitude envelope is computed for each<br>
speech frame using standard LP analysis or other techniques. From the wide-band<br>
spectral envelope of each frame, the high-band portion corresponding to 3400 -<br>
8000 Hz is extracted and normalized by dividing through by the spectral<br>
magnitude at 3400 Hz. The resulting high-band spectral envelopes have thus a<br>
magnitude of 0 dB at 3400 Hz. The high-band energy corresponding to each<br>
normalized high-band envelope is computed next. The collection of high-band<br>
spectral envelopes is then partitioned based on the high-band energy, e.g., a<br>
sequence of nominal energy values differing by 1 dB is selected to cover the entire<br>
range and all envelopes with energy within 0.5 dB of a nominal value are grouped<br>
together.<br>
[0091] For each group thus formed, the average high-band spectral<br>
envelope shape is computed and subsequently the corresponding high-band<br>
energy. In FIG. 6, a set of 60 high-band spectral envelope shapes 600 (with<br>
magnitude in dB versus frequency in Hz) at different energy levels is shown.<br>
Counting from the bottom of the figure, the 1st, 10th, 20th, 30th, 40th, 50th, and 60th<br>
shapes (referred to herein as pre-computed shapes) were obtained using a<br>
technique similar to the one described above. The remaining 53 shapes were<br>
obtained by simple linear interpolation (in the dB domain) between the nearest<br>
pre-computed shapes.<br>
[0092] The energies of these shapes range from about 4.5 dB for the 1st<br>
shape to about 43.5 dB for the 60th shape. Given the high-band energy for a frame,<br>
it is a simple matter to select the closest matching high-band spectral envelope<br>
shape as will be described later in the document. The selected shape represents the<br>
estimated high-band spectral envelope SEhb to within a constant. In FIG. 6, the<br>
average energy resolution is approximately 0.65 dB. Clearly, better resolution is<br>
possible by increasing the number of shapes. Given the shapes in FIG. 6, the<br>
selection of a shape for a particular energy is unique. One can also think of a<br>
situation where there is more than one shape for a given energy, e.g., 4 shapes per<br>
energy level, and in this case, additional information is needed to select one of the<br>
4 shapes for each given energy level. Furthermore, one can have multiple sets of<br>
shapes each set indexed by the high-band energy, e.g., two sets of shapes<br>
selectable by the voicing parameter v, one for voiced frames and the other for<br>
unvoiced frames. For a mixed-voiced frame, the two shapes selected from the two<br>
sets can be appropriately combined.<br>
[0093] The high-band spectrum estimation method described above offers<br>
some clear advantages. For example, this approach offers explicit control over the<br>
time evolution of the high-band spectrum estimates. A smooth evolution of the<br>
high-band spectrum estimates within distinct speech segments, e.g., voiced speech,<br>
unvoiced speech, and so forth is often important for artifact-free band-width<br>
extended speech. For the high-band spectrum estimation method described above,<br>
it is evident from FIG. 6 that small changes in high-band energy result in small<br>
changes in the high-band spectral envelope shapes. Thus, smooth evolution of the<br>
high-band spectrum can be essentially assured by ensuring that the time evolution<br>
of the high-band energy within distinct speech segments is also smooth. This is<br>
explicitly accomplished by energy track smoothing as described earlier.<br>
[0094] Note that distinct speech segments, within which energy smoothing<br>
is done, can be identified with even finer resolution, e.g., by tracking the change in<br>
the narrow-band speech spectrum or the up-sampled narrow-band speech spectrum<br>
from frame to frame using any one of the well known spectral distance measures<br>
such as the log spectral distortion or the LP-based Itakura distortion. Using this<br>
approach, a distinct speech segment can be defined as a sequence of frames within<br>
which the spectrum is evolving slowly and which is bracketed on each side by a<br>
frame at which the computed spectral change exceeds a fixed or an adaptive<br>
threshold thereby indicating the presence of a spectral transition on either side of<br>
the distinct speech segment. Smoothing of the energy track may then be done<br>
within the distinct speech segment, but not across segment boundaries.<br>
[0095] Here, smooth evolution of the high-band energy track translates into<br>
a smooth evolution of the estimated high-band spectral envelope, which is a<br>
desirable characteristic within a distinct speech segment. Also note that this<br>
approach to ensuring a smooth evolution of the high-band spectral envelope within<br>
a distinct speech segment may also be applied as a post-processing step to a<br>
sequence of estimated high-band spectral envelopes obtained by prior-art methods.<br>
In that case, however, the high-band spectral envelopes may need to be explicitly<br>
smoothed within a distinct speech segment, unlike the straightforward energy<br>
track smoothing of the current teachings which automatically results in the smooth<br>
evolution of the high-band spectral envelope.<br>
[0096] The loss of information of the narrow-band speech signal in the<br>
low-band (which, in this illustrative example, may be from 0 - 300 Hz) is not due<br>
to the bandwidth restriction imposed by the sampling frequency as in the case of<br>
the high-band but due to the band-limiting effect of the channel transfer function<br>
consisting of, for example, the microphone, amplifier, speech coder, transmission<br>
channel, and so forth.<br>
[0097] A straight-forward approach to restore the low-band signal is then to<br>
counteract the effect of this channel transfer function within the range from 0 to<br>
300 Hz. A simple way to do this is to use a low-band spectrum estimator 511 to<br>
estimate the channel transfer function in the frequency range from 0 to 300 Hz<br>
from available data, obtain its inverse, and use the inverse to boost the spectral<br>
envelope of the up-sampled narrow-band speech. That is, the low-band spectral<br>
envelope SElb is estimated as the sum of SEusnb and a spectral envelope boost<br>
characteristic SEboost designed from the inverse of the channel transfer function<br>
(assuming that spectral envelope magnitudes are expressed in log domain, e.g.,<br>
dB). For many application settings, care should be exercised in the design of<br>
SEboost. Since the restoration of the low-band signal is essentially based on the<br>
amplification of a low level signal, it involves the danger of amplifying errors,<br>
noise, and distortions typically associated with low level signals. Depending on<br>
the quality of the low level signal, the maximum boost value should be restricted<br>
appropriately. Also, within the frequency range from 0 to about 60 Hz, it is<br>
desirable to design SEboost to have low (or even negative, i.e., attenuating) values to<br>
avoid amplifying electrical hum and background noise.<br>
[0098] A wide-band spectrum estimator 512 can then estimate the wide-<br>
band spectral envelope by combining the estimated spectral envelopes in the<br>
narrow-band, high-band, and low-band. One way of combining the three<br>
envelopes to estimate the wide-band spectral envelope is as follows.<br>
[0099] The narrow-band spectral envelope SEnb is estimated from snb as<br>
described above and its values within the range from 400 to 3200 Hz are used<br>
without any change in the wide-band spectral envelope estimate SEwb. To select<br>
the appropriate high-band shape, the high-band energy and the starting magnitude<br>
value at 3400 Hz are needed. The high-band energy Ehh in dB is estimated as<br>
described earlier. The starting magnitude value at 3400 Hz is estimated by<br>
modeling the FFT magnitude spectrum of snb in dB within the transition-band, viz.,<br>
2500 - 3400 Hz, by means of a straight line through linear regression and finding<br>
the value of the straight line at 3400 Hz. Let this magnitude value by denoted by<br>
M3400 in dB. The high-band spectral envelope shape is then selected as the one<br>
among many values, e.g., as shown in FIG. 6, that has an energy value closest to<br>
Ehb - M3400. Let this shape be denoted by SEcloset. Then the high-band spectral<br>
envelope estimate SEhb and therefore the wide-band spectral envelope SEwb within<br>
the range from 3400 to 8000 Hz are estimated as SEclasest + Mim.<br>
[00100] Between 3200 and 3400 Hz, SEwb is estimated as the linearly<br>
interpolated value in dB between SEnb and a straight line joining the SEnb at 3200<br>
Hz and M3400 at 3400 Hz. The interpolation factor itself is changed linearly such<br>
that the estimated SEwb moves gradually from SEnb at 3200 Hz to M3400 at 3400 Hz.<br>
Between 0 to 400 Hz, the low-band spectral envelope SElb and the wide-band<br>
spectral envelope SEwb are estimated as SEnb + SEboost, where SEboost represents an<br>
appropriately designed boost characteristic from the inverse of the channel transfer<br>
function as described earlier.<br>
[00101] As alluded to earlier, frames containing onsets and/or plosives may<br>
benefit from special handling to avoid occasional artifacts in the band-width<br>
extended speech. Such frames can be identified by the sudden increase in their<br>
energy relative to the preceding frames. The onset/plosive detector 503 output d<br>
for a frame is set to 1 whenever the energy of the preceding frame is low, i.e.,<br>
below a certain threshold, e.g., -50 dB, and the increase in energy of the current<br>
frame relative to the preceding frame exceeds another threshold, e.g., 15 dB.<br>
Otherwise, the detector output d is set to 0. The frame energy itself is computed<br>
from the energy of the FFT magnitude spectrum of the up-sampled narrow-band<br>
speech snb within the narrow-band, i.e., 300 - 3400 Hz. As noted above, the output<br>
of the onset/plosive detector 503 d is fed into the voicing level estimator 502 and<br>
the energy adapter 508. As described earlier, whenever a frame is flagged as<br>
containing an onset or a plosive with d = 1, the voicing level v of that frame as<br>
well as the following frame is set to 1. Also, the adapted high-band energy value<br>
Ehb of that frame as well as the following frame is set to a low value. Alternately,<br>
bandwidth extension may be bypassed altogether for those frames.<br>
[00102] Those skilled in the art will appreciate that the described high-band<br>
energy estimation techniques may be used in conjunction with other prior-art<br>
bandwidth extension systems to scale the artificially generated high-band signal<br>
content for such systems to an appropriate energy level. Furthermore, note that<br>
although the energy estimation technique has been described with reference to the<br>
high frequency band, (for example, 3400 - 8000 Hz), it can also be applied to<br>
estimate the energy in any other band by appropriately redefining the transition<br>
band. For example, to estimate the energy in a low-band context, such as 0 - 300<br>
Hz, the transition band may be redefined as the 300 - 600 Hz band. Those skilled<br>
in the art will also recognize that the high-band energy estimation techniques<br>
described herein may be employed for speech/audio coding purposes. Likewise,<br>
the techniques described herein for estimating the high-band spectral envelope and<br>
high-band excitation may also be used in the context of speech/audio coding.<br>
[00103] Note that while the estimation of parameters such as spectral<br>
envelope, zero crossings, LP coefficients, band energies, and so forth has been<br>
described in the specific examples previously given as being done from the<br>
narrow-band speech in some cases and the up-sampled narrow-band speech in<br>
other cases, it will be appreciated by those skilled in the art that the estimation of<br>
the respective parameters and their subsequent use and application, may be<br>
modified to be done from the either of those two signals (narrow-band speech or<br>
the up-sampled narrow-band speech), without departing from the spirit and the<br>
scope of the described teachings.<br>
[00104] Those skilled in the art will recognize that a wide variety of<br>
modifications, alterations, and combinations can be made with respect to the<br>
above described embodiments without departing from the spirit and scope of the<br>
invention, and that such modifications, alterations, and combinations are to be<br>
viewed as being within the ambit of the inventive concept.<br>
We claim:<br>
1. A method comprising:<br>
receiving an input digital audio signal comprising a narrow-band signal;<br>
processing the input digital audio signal to generate a processed digital<br>
audio signal; and<br>
estimating a high-band energy level corresponding to the input digital<br>
audio signal, based on a transition-band of the processed digital audio signal<br>
within a predetermined upper frequency range of a narrow-band bandwidth.<br>
2. The method of claim 1, further comprising generating a high-band digital<br>
audio signal based at least on the high-band energy level and an estimated high-<br>
band spectral envelope corresponding to the high-band energy level.<br>
3. The method of claim 2, further comprising combining the input digital<br>
audio signal and the high-band digital audio signal to generate a resultant digital<br>
audio signal having an extended signal bandwidth.<br>
4. The method of claim 1, wherein the processing comprises up-sampling the<br>
input digital audio signal to generate the processed digital audio signal.<br>
5. The method of claim 1, wherein the estimating comprises calculating an<br>
energy level of the processed digital audio signal by computing a frequency<br>
spectrum of the processed<br>
digital audio signal and summing energies of spectral components within the<br>
transition-band.<br>
6. The method of claim 1, wherein the estimating further comprises utilizing<br>
at least one predetermined speech parameter, based on the input digital audio<br>
signal, to generate a parameter space.<br>
7. The method of claim 6, wherein the predetermined speech parameter is at<br>
least one of a zero-crossing parameter, a spectral flatness measure parameter, a<br>
transition-band spectral slope parameter, and a transition band spectral envelope<br>
shape parameter.<br>
8. The method of claim 6, wherein the estimating further comprises<br>
partitioning the parameter space into regions and assigning coefficients for each<br>
region to estimate the high-band energy level.<br>
9. The method of claim 1, wherein the narrow-band signal has a bandwidth of<br>
about 300 - 3400 Hz.<br>
10. An apparatus, comprising:<br>
an input configured and arranged to receive an input digital audio signal<br>
comprising a narrow-band signal;<br>
a processor operably coupled to the input and being configured and<br>
arranged to:<br>
process the input digital audio signal to generate a processed digital<br>
audio signal; and<br>
estimate a high-band energy level corresponding to the input digital<br>
audio signal, based on a transition-band of the processed digital audio<br>
signal within a predetermined upper frequency range of a narrow-band<br>
bandwidth<br>
<br>
A method (100) includes receiving (101) an input digital audio signal comprising a narrow-band signal. The input<br>
digital audio signal is processed (102) to generate a processed digital audio signal. A high-band energy level corresponding to the<br>
input digital audio signal is estimated (103) based on an estimated enery of a transition- band of the processed digital audio signal<br>
within a predetermined upper frequency range of a narrow-band bandwidth. A high-band digital audio signal is generated (104)<br>
based on the high-band energy level and an estimated high-band spectrum corresponding to the high-band energy level.</td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=E4CGbNzWfMqdZ0H2QUe1YA==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==" target="_blank" style="word-wrap:break-word;">http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=E4CGbNzWfMqdZ0H2QUe1YA==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==</a></p>
		<br>
		<div class="pull-left">
			<a href="279435-a-method-for-the-removal-of-arsenite-from-arsenic-contaminated-water.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="279437-method-and-apparatus-for-conditional-broadcast-of-barrier-operations.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>279436</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>2440/KOLNP/2010</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>04/2017</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>27-Jan-2017</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>23-Jan-2017</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>06-Jul-2010</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>GOOGLE TECHNOLOGY HOLDINGS LLC</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>1600 AMPHITHEATRE PARKWAY,MOUNTAIN VIEW,CALIFORNIA 94043,UNITED STATES OF AMERICA</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>JASIUK, MARK A.</td>
											<td>6221 NORTH MELVINA AVENUE, CHICAGO, ILLINOIS 60646 UNITED STATES OF AMERICA</td>
										</tr>
										<tr>
											<td>2</td>
											<td>RAMABADRAN, TENKASI V.</td>
											<td>1852 RANCHVIEW DRIVE, NAPERVILLE, ILLINOIS 60565 UNITED STATES OF AMERICA</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>G10L 21/02</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/US2009/032256</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2009-01-28</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>12/024,620</td>
									<td>2008-02-01</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/279436-method-and-apapratus-for-estimating-high-band-energy-in-a-bandwidth-extension-system by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 00:59:32 GMT -->
</html>
