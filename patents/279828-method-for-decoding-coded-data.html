<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/279828-method-for-decoding-coded-data by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 04 Apr 2024 23:00:44 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 279828:METHOD FOR DECODING CODED DATA</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">METHOD FOR DECODING CODED DATA</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>A picture coding apparatus (300) is a picture coding apparatus that codes a difference between picture data (Img) representing an input picture and predictive picture data (Pred) representing a predictive picture for the input picture and generates coded picture data, and includes a picture decoding unit (104) for decoding coded picture data (Img) after the picture data (Img) is coded; inter pixel filters A and B (303 and 304) for performing inter pixel filter operation for decoded picture data (Recon) obtained by the picture decoding unit (104), switches (301 and 302) for selecting one of the inter-pixel filters; and an inter picture predicting unit (108) for generating the predictive picture data (Pred) for the input picture data (Img) using filtered decoded image data (Filteredlmgl), as reference picture data (Ref), obtained by the selected inter-pixel filter. Figure 3.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>Technical Field<br>
The present invention relates to a picture coding method, a picture decoding method, a picture coding apparatus, a picture decoding apparatus, a program for executing such methods in the form of software, and a recording medium on which the program is recorded.<br>
10<br>
Background Art<br>
With the development of multimedia applications, it has become common in recent years to handle information of all sorts of media such as audio, video and text in an integrated manner.    In<br>
15 doing so, it becomes possible to handle media integrally by digitalizing ail the media. However, since digitallzed pictures have an enormous amount of data, Information compression techniques are of absolute necessity for their storage and transmission. On the other hand, in order to interoperate compressed picture data,<br>
20 standardization of compression techniques is also important. Standards on picture compression techniques include H. 261 and H. 263 recommended by ITU-T (International Telecommunication Union Telecommunication Standardization Sector), and MPEG (Moving   Picture Experts Group)-l,  MPEG-2 and MPEG-4 of ISO<br>
25     (International Organization for Standardization),<br>
Fig. 1 is a block diagram showing a structure of a conventional picture coding apparatus 100. Note that, in the present invention, the unit consisting of one sheet of Image is referred to as a picture. In an Interlace image signal, a picture means a field or a frame, and<br>
30    In a progressive image signal, a picture means a frame.<br>
The picture coding apparatus 100 Includes a difference calculator 101, a picture coding unit 102, a variable length coding<br>
 <br>
unit 103, a picture decoding unit 104, an adder 105, an inter pixel filter 106, a picture memory 107, an Inter picture predicting unit 108, and an inter picture prediction estimating unit 109. The difference calculator 101 subtracts a predictive picture inputted to a minus 5 input terminal from an input picture inputted to a plus input terminal so as to output the differential picture. The picture coding unit 102 codes the inputted differential picture. For example, the picture coding unit 102 codes the inputted data by performing frequency transformation   of  it  using   DCT or the   like  and  quantizing  the<br>
10 frequency data as the transformation result. The variable length coding unit 103 performs variable length coding of the coded differential picture and predictive parameters from the inter picture prediction estimating unit 109, adds relevant data such as a header describing information relevant to the resulting coded data to it,<br>
15     formats it into an output coded bit stream, and outputs it outside the picture  coding  apparatus   100.     The  picture  decoding  unit  104 decodes the differential picture coded by the picture coding unit 102, by performing processing inverse to the coding by the picture coding unit 102 for the differential picture.    For example, after performing<br>
20 inverse quantization of the coded differential picture, the picture decoding unit 104 performs inverse frequency transformation such as inverse DCT to decode the difference between the input picture and the predictive picture. The adder 105 adds the decoded differential picture and the predictive picture to decode the input<br>
25 picture. The inter pixel filter 106 performs filtering such as suppressing coding noise in the high frequency components of the decoded input picture. The picture memory 107 holds the picture data of at least one picture among the pictures decoded by the adder 105 as a reference picture.    The inter picture predicting unit 108<br>
30 reads out a predictive picture from the reference picture in the picture memory 107 based on the prediction result obtained by the inter picture  prediction  estimating  unit  109.    The  inter picture<br>
 <br>
prediction estimating unit 109 derives a predictive parameter PredParam that is the amount of change in motion of the input picture from the reference picture.<br>
I^lore specifically, picture data Img is inputted to the picture 5 coding apparatus 100 from outside. The picture data Img is inputted to the plus input terminal of the difference calculator 101, The difference calculator 101 calculates the difference between the pixel values of this picture data Img and the predictive picture data Pred inputted to the minus input terminal to output the result as<br>
10 differential picture data Res. This predictive picture data Pred is obtained in the following manner. First, reference picture data Ref, that is an image of an already coded picture, and is once coded and then decoded to be an image for one picture, is stored in the picture memory 107.     Next, from this reference picture data Ref, data<br>
15 representing an image corresponding to each block in the inputted picture data Img is extracted based on the predictive parameter PredParam. The data representing this image of each block is the predictive picture data Pred. The picture coding apparatus 100 stores several sheets of coded pictures as reference picture data Ref<br>
20 for prediction in the picture memory 107, and the inter picture predicting unit 108 generates predictive picture data Pred from the reference picture data Ref stored in the picture memory 107. The inter picture prediction estimating unit 109 obtains predictive parameter data PredParam used for prediction (for instance, motion<br>
25 vector information used in the I^PEG picture coding method, and the like) from the input picture data Img and the reference picture data Ref, Note that pixel values of a predictive picture shall be "0" in the case of intra picture coding.<br>
The picture coding unit 102 codes differential picture data Res,<br>
30 and outputs it as coded differential picture data CodedRes. The picture decoding unit 104 decodes the coded differential picture data CodedRes and outputs it as decoded differential picture data<br>
 <br>
ReconRes in order to use it as a reference picture for inter picture prediction. Tlie pixel values indicated by this decoded differential picture data ReconRes and pixel values Indicated by the predictive picture data Pred are added by the adder 105 and outputted as 5 decoded picture data Recon. The inter pixel filter 106 performs filter operation processing for the decoded picture data Recon, and stores it as filtered decoded picture data Filteredlmg in the picture memory 107.<br>
The inter pixel filter 106 has the effect of reducing coding<br>
10 noise of decoded picture data Recon and improving prediction efficiency if the picture is used as a reference picture. As an example of the inter pixel filter 106, there is an H. 261 loop filter recommended by ITU-T. The filtered decoded picture data Filteredlmg   which   has  been   performed   of the  inter pixel  filter<br>
15 operation by the inter pixel filter 106 is stored in the picture memory 107, and used as a reference picture when the following pictures are coded. The variable length coding unit 103 performs variable length coding of the coded differential picture data CodedRes and the predictive parameter data PredParam, and puts them together<br>
20 into one coded data Bitstream to output the result outside the picture coding apparatus 100. Fig. 2 is a block diagram showing the structure of a conventional picture decoding apparatus 200. The picture decoding apparatus 200 includes a variable length decoding unit 201, a picture decoding unit 202, an adder 203, an<br>
25 inter pixel filter 204, a picture memory 205 and an inter picture predicting unit 206. The coded data Bitstream is inputted to the picture decoding apparatus 200 from outside. The variable length decoding unit 201 performs variable length decoding of the inputted coded  data   Bitstream,  and  separates  it  into  coded  differential<br>
30 picture data CodedRes and predictive parameter data PredParam. The picture decoding unit 202 decodes the coded differential picture data CodedRes and outputs it as decoded differential picture data<br>
 <br>
ReconRes. Note that a picture which has been referred to by a picture outputted as the decoded differentia! picture data ReconRes, that iSr a picture corresponding to the reference picture data Ref in the picture coding apparatus 100, has been already decoded and 5 stored in the picture memory 107. Therefore, the inter picture predicting unit 206 generates predictive picture data Pred from the reference picture data Ref based on the predictive parameter data PredParam. The adder 203 adds the predictive picture data Pred and the decoded differential picture data ReconRes to output the<br>
10 result as decoded picture data Recon. The inter pixel filter 204 performs inter pixel filter operation of the decoded picture data Recon, and outputs the result as filtered decoded picture data Filteredlmg outside the picture decoding apparatus 200. The outside of the picture decoding apparatus 200 means a display<br>
15 apparatus such as a television. And, the filtered decoded picture data FJlteredlmg is stored in the picture memory 205 and referred to as reference picture data Ref for the following pictures.<br>
However,  if considering  the case  of transmitting   moving pictures via a mobile phone or the like, it is desired to minimize<br>
20 power consumption of a mobile apparatus as a whole in order to make available hours per charge longer, so it is not desirable for the apparatus to have high processing capability which requires a larger amount of power for picture processing. Therefore, in using a mobile apparatus which can use only an operating unit with low<br>
25 processing capability for picture processing, there is sometimes the case where it can use only an inter pixel filter which is required of a small processing load. Meanwhile, it is sometimes requested to use a high-performance inter pixel filter for some applications that strongly require transmission of high quality moving pictures and<br>
30 high coding efficiency, even if an operating unit is required of larger processing load. If a coding method is capable of responding to such requirements flexibly, it is useful with the expanding range of<br>
 <br>
applications to a picture coding apparatus and picture decoding apparatus according to such a coding method and decoding method. The present invention has been conceived in view of these conventional problems, and aims at providing a picture coding 5 apparatus that uses an inter pixel filter selectively depending on various situations so as to generate coded data, and a picture decoding apparatus that decodes the coded data.<br>
Disclosure of Invention<br>
10	The   picture   coding   apparatus   according   to   the   present<br>
invention is a picture coding apparatus that codes differential picture data that is a difference between input picture data representing an input picture and predictive picture data representing a predictive picture for a picture in the input picture, so<br>
16 as to generate coded picture data, the picture coding apparatus comprising: a decoding unit operable to decode the coded differential picture data and add the decoded differential picture data and the predictive picture data, after the differential picture data is coded; a plurality of inter pixel filters for performing an inter<br>
20 pixel filtering for the decoded picture data obtained by the decoding unit; a selecting unit operable to select one of the plurality of inter pixel filters; and a predictive picture generating unit operable to generate the predictive picture data for the input picture data, using the   filtered   decoded   picture   data,   as   reference   picture   data,<br>
26    obtained by the selected inter pixel filten<br>
Therefore, there is an effect that the picture coding apparatus according to the present invention is capable of switching to an appropriate inter pixel filter depending on the processing capability on the picture coding apparatus side, the processing capability on<br>
30 the picture decoding apparatus side that receives a coded signal, or the properties, compression rates and so on of a picture to be coded, so as to create the coded signal.<br>
 <br>
Also, the picture decoding apparatus according to the present invention is a picture decoding apparatus that decodes coded picture data obtained by coding a difference between picture data representing a picture in original moving pictures and predictive 5 picture data representing another picture in the original moving pictures to generate a plurality of picture data representing the original moving pictures, the picture decoding apparatus comprising: a decoding unit operable to add the decoding result of the coded picture data and the already decoded predictive picture<br>
10 data associated with the coded picture data to generate picture data representing an original picture; a selecting unit operable to select one of a plurality of inter pixel filters for performing an inter pixel filtering for the decoded picture data; and a predictive picture generating unit operable to generate the predictive picture data<br>
15     associated with another coded picture data from the picture data<br>
which is performed of the filtering by the selected inter pixel filter<br>
Therefore,   there   is   an   effect   that  the   picture   decoding<br>
apparatus according to the present invention is capable of selecting<br>
an inter pixel filter depending on the processing capability of the<br>
20     picture decoding apparatus or whether a picture is referred to or not, so as to generate a predictive picture.    Also, when the picture coding apparatus switches the inter pixel filter, the picture decoding apparatus    can    also    perform    decoding    properly    using    the corresponding inter pixel filter.<br>
25	Further, the picture coding apparatus (or the picture decoding<br>
apparatus) according to the present invention is a picture coding apparatus or the like that codes pictures which are inputted in sequence, the picture coding apparatus comprising: a coding unit operable    to    code    a    picture    by    performing    predetermined<br>
30 transformation processing for the picture; an inverse transformation unit operable to perform inverse transformation processing to the transformation processing for the picture coded by the coding unit;<br>
 <br>
a filtering unit operable to perform filtering for the picture; a memorizing unit operable to memorize the picture; and a controlling unit operable to perform control so as to store the picture obtained by the inverse transformation processing by the Inverse 5 transformation unit in the memorizing unit after the filtering is performed by the filtering unit, or to store the picture in the memorizing unit without the filtering being performed by the filtering unit, wherein the coding unit codes the picture with reference to a past picture which has been stored in the memorizing<br>
10     unit.<br>
Thereby, inter pixel filtering such as noise removal Is not always performed in picture coding (or picture decoding), but it can be performed selectively when necessary, so it becomes possible even   for   a   picture   coding   apparatus   (or   a   picture   decoding<br>
15 apparatus) with lower processing capability to adopt an inter pixel filter by performing inter pixel filtering for only a picture which has a significant influence on picture quality, and tbus the effect of improving picture quality significantly at a low bit rate can be obtained.<br>
20	Here,  the controlling  unit   may perform  control so  as to<br>
perform the filtering when a significance level of the picture is high, and not to perform the filtering when the significance level of the picture is low. For example, the controlling unit may judge that the significance level of the picture is high and perform control so as<br>
25 to perform the filtering for the picture when the picture is intra picture coded by the coding unit, and judge that the significance level of the picture is low and perform control so as not to perform the filtering for the picture when the picture is inter picture coded by the  coding   unit.     Or,  the  controlling  unit may judge  that  the<br>
30 significance level of the picture is high and perform control so as to perform the filtering for the picture when the picture is forward predictive coded by the coding unit, and judge that the significance<br>
 <br>
level of the picture is low and perform control so as not to perform the filtering for the picture when the picture is bi-predictive coded by the coding unit. Or, the controlling unit may judge that the significance level of the picture is high and perform control so as to 5 perform the filtering for the picture when the picture is base layer coded by the coding unit, and judge that the significance level of the picture is low and perform control so as not to perform the filtering for the picture when the picture is enhancement layer coded by the coding unit.<br>
10	Thereby, inter pixel filtering is performed for a picture having<br>
a significant influence on other pictures, that is, an intra picture coded picture, a forward predictive coded picture, a base layer picture or the like by priority, so the effect of improving picture quality such as noise removal by an inter pixel filter can be obtained<br>
15 more powerfully, even with the same increase in the processing load.<br>
Also, the controlling unit may monitor whether or not the picture coding apparatus (or the picture decoding apparatus) has enough processing capacity, and perform control so as to perform<br>
20 the filtering for pictures including pictures with lower significance levels if the picture coding apparatus has enough processing capacity, and not to perform the filtering for pictures including pictures with higher significance levels if the picture coding apparatus does not have enough processing capacity.    For example,<br>
25 a priority corresponding to the significance level is associated with the picture, and the controlling unit may monitor an operation rate of a CPU included in the picture coding apparatus to monitor the processing capacity, and performs control so as to perform the filtering for only the pictures with higher priorities If the operation<br>
30 rate is high, and not to perform the filtering for the pictures including the pictures with lower priorities if the operation rate is low.<br>
10<br>
 <br>
Thereby, since ON/OFF of filtering can be controlled so as to<br>
make full use of the processing capability of the picture coding<br>
apparatus (or the picture decoding apparatus), a CPU is used with<br>
high efficiency,  and thus coding  (or decoding) for high  picture<br>
5     quality can be realized even with the same hardware resources.<br>
As described above, according to the present invention, the picture coding and picture decoding at a low bit rate (high compression rate) for high picture quality are realized, and particularly, the significant effect of improving picture quality can be 10 achieved in picture coding processing and picture decoding processing by software under limited hardware resources, and thus it can be said that the practical value of the present invention is extremely high in these days when information communication technology and computers have become widespread.<br>
15<br>
Brief Description of Drawings<br>
Fig, 1 is a block diagram showing the structure of a conventional picture coding apparatus.<br>
Fig. 2 Is a block diagram showing the structure of a 20    conventional picture decoding apparatus.<br>
Fig. 3 is a block diagram showing the structure of a picture coding apparatus according to a first embodiment of the present invention.<br>
Fig. 4 is a block diagram showing the structure of a picture 25 coding apparatus that switches an inter pixel filter for every slice of an input picture.<br>
Fig. 5A Is a diagram showing the stream structure of coded data Bitstream outputted from the picture coding' apparatus of the present invention. Fig. 5B is a diagram showing the stream 30 structure of coded data Bitstream outputted when the picture coding apparatus of the present invention switches an inter pixel filter in the unit of a slice.<br>
11<br>
 <br>
Fig. 5 is a block diagram showing the structure of a picture decoding apparatus that decodes coded data Bitstreaml generated by the picture coding apparatus according to the first embodiment. Fig. 7 is a block diagram showing the structure of a picture 5 decoding apparatus that uses a buflt-in inter pixel filter in place of a specified inter pixel filter if it is not included in the picture decoding apparatus.<br>
Fig. 8 is a block diagram showing the structure of a picture coding apparatus according to a second embodiment of the present 10    invention.<br>
Fig. 9 is a diagram showing the details of operation by a deblock filter that is an example of the inter pixel filter as shown in Fig. 8. A is a diagram showing pixel values in the vicinity of the boundary between blocks before filtering. B is a diagram showing 15 pixel values in the vicinity of the boundary between blocks after filtering.<br>
Fig. 10 is a flowchart showing a flow of filtering processing by an inter pixel filter.<br>
Fig. 11 is a block diagram showing the structure of a picture 20     decoding   apparatus   that  can   select   whether   inter   pixel   filter processing is to be performed or not.<br>
Fig. 12 is a block diagram showing the structure of a picture<br>
decoding apparatus which is equipped with an inter pixel filter that<br>
can further select in an output stage.<br>
25	Fig. 13 is a block diagram showing the structure of a picture<br>
decoding apparatus that can select an inter pixel filter depending on a picture type of each picture.<br>
Fig. 14 is a block diagram showing the functional structure of a picture coding apparatus according to a third embodiment of the 30     present invention.<br>
Fig. 15 is a block diagram showing the detailed functional structure of a priority determining unit as shown in Fig. 14.<br>
12<br>
 <br>
Fig.  16 is a block diagram showing the detailed functional<br>
structure of a filter processing controlling unit as shown in Fig. 14.<br>
Fig.  17  is a diagram showing reference relations between<br>
pictures stored in a picture memory as shown in Fig. 14.<br>
5	Fig. 18 is a flowchart showing switch activating processing<br>
executed by a switch change processing unit as shown in Fig. 16.<br>
Fig. 19 is a block diagram showing the functional structure of<br>
a picture decoding apparatus according to a fourth embodiment of<br>
the present invention.<br>
10	Fig.    20    is    an    explanatory    diagram    in   the    case    of<br>
implementation by a computer system using a flexible disk storing the picture coding method or the picture decoding method of the above-mentioned first embodiment through the fourth embodiment. A shows an example of a physical format of a flexible disk that is a 15 recording medium main body. B shows the front view of the appearance of the flexible disk, the cross-sectional view thereof and the flexible disk, and C shows the structure for recording and reproducing the above program on the flexible disk FD.<br>
Fig. 21 is a block diagram showing the overall configuration of 20     a  content   providing  system   which  realizes  content distribution services.<br>
Fig. 22 is a diagram showing an example of the appearance of a mobile phone.<br>
Fig. 23 is a block diagram showing the structure of the mobile 25     phone.<br>
Fig. 24 is a diagram explaining devices that perform the coding processing or decoding processing as shown in the above-mentioned embodiments and a system using these devices,<br>
30     Best Mode for Carrying Out the Invention<br>
(First Embodiment)<br>
The following explains concrete embodiments of the present<br>
13<br>
 <br>
invention with reference to the figures. Fig. 3 is a block diagram showing the structure of a picture coding apparatus 300 according to the first embodiment of the present invention. In this figure, the same reference numbers are assigned to the same constituent 5 elements and data as those of the conventional picture coding apparatus 100 as shown in Fig. 1 and the explanations thereof are omitted, because they have been already explained. Similarly, in the following figures, the same reference numbers are assigned to the   constituent   elements   and   data   which   have   been   already<br>
10 explained, and the explanations thereof are omitted. The picture coding apparatus 300 is comprised of the difference calculator 101, the picture coding unit 102, a variable length coding unit 305, the picture decoding unit 104, the adder 105, the picture memory 107, the inter picture predicting unit 108, the inter picture prediction<br>
15 estimating unit 109, a switch 301, a switch 302, an inter pixel filter A 303 and an inter pixel filter B 304. The switch 301 and the switch 302 are switches for respectively connecting to either a terminal 1 or a terminal 2 selectively depending on a value of filter type information FilterTypel.    The switch 301 is provided between the<br>
20 output termina! of the adder 105 and the input terminals of the inter pixel filter A 303 and the inter pixel filter B 304. And the switch 302 is provided between the input terminal of the picture memory 107 and the output terminals of the inter pixel filter A 303 and the inter pixel filter B 304.    The inter pixel filter A 303 and the inter pixel<br>
25 filter B 304 are deblock filters for smoothing high frequency noise in the vicinity of the boundary between blocks to remove block distortion, for example, and their smoothing levels are different. Also, their operation processing loads for smoothing are different according  to  the   smoothing  levels.     Note that the  constituent<br>
30 elements shown in this figure such as the switch 301 and the switch 302 may be implemented either as hardware or software. The same applies to other figures.<br>
14<br>
 <br>
The variable length coding unit 305 performs variable length coding, for instance, Huffman coding of the inputted filter type information FilterTypel, coded differential picture data CodedRes and predictive parameter data PredParam respectively, and put 5 them together into one coded data Bitstreaml for outputting the coded data outside the picture coding apparatus 300.<br>
The operation of the picture coding apparatus 300 structured as above, particularly a part of a new structure, will be explained in more detail  by comparing with the conventional  picture coding<br>
10 apparatus 100. First, the filter type information FilterTypel is inputted to the picture coding apparatus 300 from outside. Here, the input from outside means, for example, a user's input using a user interface such as a keyboard from outside a picture coding apparatus or data fixed for an apparatus, and a value which Is<br>
15 determined by the apparatus depending on a bit rate (compression rate) or a picture size. This filter type information FilterTypel is inputted to the switch 301 and the switch 302. The switch 301 and the switch 302 switch connection to either the "terminal 1" or the "terminal 2" depending on the value of this filter type information<br>
20 FilterTypel. For example, when the value of the filter type information FilterTypel is "1", both the switch 301 and the switch 302 connect to the terminal "1". In this case, filtering by the inter pixel filter A 303 is applied to the decoded picture data Recon outputted from the adder 105.    When the value of the filter type<br>
25 information FilterTypel is "2", the switch 301 and the switch 302 switch to the terminai;'2" side, and filtering by the inter pixel filter B 304 is applied to the decoded picture data Recon outputted from the adder 105. The filtered decoded picture data Filteredlmgl which is filtered by the inter pixel filter A 303 or the inter pixel filter<br>
30 B 304 is stored in the picture memory 107, and used as a reference picture for predictive coding of the following pictures. Also, the filter type information FilterTypel specifying an inter pixel filter is<br>
15<br>
 <br>
inputted to the variable length coding unit 305 together with the coded differential picture data CodedRes and the predictive parameter data PredParam of the same picture for performing variable length coding of these data respectively. The variable 5 length coding result of the filter type information FilterTypel is stored in the coded data Bitstreaml by associating with the variable length coding results of these coded differentia! picture data CodedRes and predictive parameter data PredParam, and recorded on  a   recording   medium   or  transmitted   to   a   picture  decoding<br>
10 apparatus. In other words, the type of the inter pixel filter applied to the decoded picture data Recon of each picture is notified to the picture decoding apparatus by the filter type information FilterTypel stored in the coded data Bitstreaml. Therefore, since the picture decoding apparatus that decodes the coded data Bitstreaml can<br>
15 specify the inter pixel filter which is applied to the decoded picture data Recon of each picture in the picture coding apparatus 300, it can use the same filter for the decoded picture of each picture. Note that although the value of the filter type information FilterTypel is "1" or "2" in the above explanation, this is a value<br>
20    defined just for the sake of explanation, and any other values may<br>
be used if a plurality of filters can be discriminated by such values.<br>
As   described   above,   the   picture   coding   apparatus   300,<br>
including a plurality of inter pixel filters with different predictive<br>
performance and processing load as inter pixel filters, can use them<br>
25 by switching them depending on the filter type information FilterTypel inputted from outside. There are following advantages in using the inter pixel filters with different predictive performance and processing load by switching them. First, for explanation, it is assumed that the inter pixel filter A 303 has less processing load<br>
30 than the inter pixel filter B 304, while the inter pixel filter B 304 has higher noise suppression effect than the inter pixel filter A 303. for improving   predictive   coding   efficiency.     As   a   picture  decoding<br>
16<br>
 <br>
apparatus that decodes the coded data outputted from the picture coding apparatus 300 of the present Invention, two types of picture decoding apparatus are assumed: a picture decoding apparatus A including only the inter pixel filter A 303; and a picture decoding 5 apparatus B including both the inter pixel filter A 303 and the inter pixel filter B 304. The former picture decoding apparatus A, which is required of less processing load, is suitable for an apparatus with lower processing capability. The latter picture decoding apparatus B is suitable for an apparatus with higher processing capability.<br>
10 The latter picture decoding apparatus B can also decode the coded data obtained using either the inter pixel filter A 303 or the inter pixel filter B 304, and has upward compatibility with the former picture decoding apparatus A. In such a case, the picture coding apparatus 300 can function as a picture coding apparatus which<br>
15 supports both of these two types of picture decoding apparatuses. In other words, by structuring the picture coding apparatus 300 so as to select the inter pixel filter with appropriate predictive performance and processing load depending on the processing capability of the target picture decoding apparatus,  the  coding<br>
20 method using the same inter pixel filter as applied In the picture coding apparatus 300 can be applied to a wide variety of devices (to decode the coded data Bitstreaml).<br>
Also, the inter pixel filter can be switched depending on the processing capability of the picture coding apparatus 300 not only<br>
25    for   generating   the   coded   data   depending   on   the   processing capability of the picture decoding apparatus but for other uses.    For example, if a picture size and a picture rate to be coded are large, processing load required for entire coding processing becomes large. Therefore, the inter pixel filter B 304 with high processing capability<br>
30 required Is used when the picture size and the picture rate to be coded are fixed values or less, and the inter pixel filter A 303 with lower processing capability required is used when the picture size<br>
17<br>
 <br>
and the picture rate to be coded are fixed values or more, so as to suppress the processing load required for entire coding processing. Or, when picture coding is realized by a time sharing system in which one apparatus executes a plurality of processes by time sharing, 5 there is a possibility that the processing load allocable to picture coding changes dynamically under the influence of other processes. So, when the processing load allocable to picture coding is a fixed value or more, the inter pixel filter B 304 with high processing load is used, while when the processing load allocable to picture coding is<br>
10 a fixed value or less, the inter pixel filter A 303 with less processing load than the inter pixel filter B 304 can be used.<br>
As for timing of switching inter pixel filters, by providing a plurality of inter pixel filters suitable for pictures of specific properties, they may be switched on a  picture-by-picture basis<br>
15 depending on the property of each picture. For example, when edge information is important such as in the case of characters, an inter pixel filter having a good edge preserving is used. They may be switched by automatic judgment utilizing picture processing techniques such as edge detection and character detection, or a user<br>
20 may select explicitly from among an inter pixel filter suitable for nature images, an inter pixel filter suitable for characters and an inter pixel filter suitable for edges. If a plurality of inter pixel filters can be switched in this manner, a filter suitable for picture properties can be selected, and thus predictive efficiency can be<br>
25    further improved.    In other words, it Is also effective to switch filters so as to improve picture quality, not to switch them depending on   processing   load.      Therefore,   in   the   present  embodiment, switching of filters depending on processing load has been explained, but they may be switched so as to improve picture quality.<br>
30	In addition, the unit of switching inter pixel filters is not<br>
limited to a picture-by-picture basis, but inter pixel filters may be switched in the unit of an image area smaller than a picture, such as<br>
18<br>
 <br>
a slice, a macroblock and a block of MPEG, or in the unit of an area including at least one pixel, because picrure properties may vary in the part of the picture.<br>
Fig. 4 is a block diagram showing the structure of a picture 5 coding apparatus 400 that switches inter pixel filters by every slice of an input picture. The picture coding apparatus 400 is a picture coding apparatus that filters a decoded picture by switching inter pixel filters in the unit of a slice of MPEG, and Is comprised of the difference calculator 101, the picture coding unit 102, the picture<br>
10 decoding unit 104, the adder 105, the picture memory 107, the inter picture predicting unit 108, the inter picture prediction estimating unit 109, a switch 403, a switch 404, the inter pixel filter A 303, the inter pixel filter B 304, the variable length coding unit 305, a filter switch position judging unit 401 and a switch 402.   The filter switch<br>
15 position judging unit 401 detects slices of an input picture in picture data Img Inputted from outside, and outputs to the switch 402 filter switch control data SetPType for outputting one pulse, for instance, at every switch of the detected slices. The switch 402 is a switch which is disconnected  between terminals while the filter switch<br>
20 control data SetPType is not outputted, and brings the filter type information FilterTypel Inputted from outside into conduction to the switch 403 and the switch 404 for a fleeting moment while the filter switch control data SetFType is being outputted. The switch 403 and the switch 404 respectively connect their terminals '1" or the<br>
25 terminals ""2" depending on the value of the filter type information FilterTypel which is inputted instantly at every switch of the slices of the input picture data Img, and keeps the connection state. In other words, while the switch 402 is disconnected, the inter pixel filters are not switched.    As a result, a new inter pixel filter is<br>
30 selected according to the filter type information FilterTypel at every switch of the slices of the input picture data Img, and thus the inter pixel filters can be prevented from being switched in the middle of<br>
19<br>
 <br>
the siice.<br>
As explained above, according to the picture coding apparatus of the present invention, it becomes possible to create coded data using an inter pixel filter depending on the processing capability of 5 a picture decoding apparatus that reproduces the coded data outputted from the picture coding apparatus of the present invention. Also, the inter pixel filter can be selected depending on the processing capability of the picture coding apparatus.<br>
Note  that  although  the  picture  coding   apparatus  in  the<br>
10 present embodiment has two inter pixel filters, it may have three or more inter pixel filters. In the same manner as the present embodiment, any one of the three or more inter pixel filters is selected and used, and the filter type Information indicating the type of the used inter pixel filter may be included in the coded data.<br>
15	In addition, filters may be switched so as to improve picture<br>
quality, not be switched depending on processing load.<br>
Note that in the picture coding apparatus 400, the filter switch control data SetFType is a pulse waveform indicating the value "1" at every switch of detected slices and "0" during the period<br>
20 other than the switching moment, but the present invention is not limited to such a case, and it may be a rectangular wave which is inverted at every switch of slices, for example, or any other waveforms. Also, the switch 402 is a switch which is disconnected between terminals while the filter switch control data SetFType is in<br>
25 the same phase, but the present invention is not limited to such a case, and the filter switch position judging unit 401 may output the filter switch control data SetFType indicating the value for disconnecting the switch 402 at the positions other than the filter switch position.    In addition, in the picture coding apparatus 400,<br>
30 the inter pixel filters are switched on a slice-by-slice basis of the picture data Img, but the inter pixel filters may be switched on a picture-by-picture basis, or may be switched in the unit of a block, a<br>
20<br>
 <br>
macroblocl
Fig. 5A is a diagram showing the stream structure of coded data Bitstream outputted by the picture coding apparatus of the present invention. Fig. 5B is a diagram showing the stream 5 structure of coded data Bitstream outputted when the picture coding apparatus of the present invention switches inter pixel filters in the unit of a slice. The feature of the coded data of the present invention is that the coded data Bitstream includes filter type information FilterType specifying one of a plurality of inter pixel<br>
10 filters. Thanks to this stream structure, the picture decoding apparatus of the present invention that decodes the coded data Bitstream can use the same inter pixel filter as that used for coding, by checking the filter type information FilterType included in the coded data Bitstream.<br>
15	In the coded data Bitstream as shown in Fig. 5A, the value of<br>
the filter type information FilterType indicating the inter pixel filter used for filtering each picture is described in (a diagonally shaded area, for instance, of) the header 901 which is attached to the entire coded data Bitstream.   This coded data Bitstream corresponds to<br>
20 the coded data Bitstreaml outputted from the picture coding apparatus 300 as shown in Fig. 3. Also, in the coded data Bitstream as shown in Fig. 5B, the value of the filter type information FilterType indicating the inter pixel filter used for filtering that slice is described in (a diagonally shaded area, for instance, of) the slice<br>
25 header 902 provided to each slice. This coded data Bitstream corresponds to the coded data Bitstreaml outputted from the picture coding apparatus 400 as shown in Fig. 4. As just described, by storing the filter type information FilterType in the header 901 at the head of the coded data Bitstream or the slice header 902 at the<br>
30 head of each slice that is not only the basic unit of recording and transmitting data but also the unit of correcting and modifying errors, the picture decoding apparatus can specify the filtering type<br>
21<br>
 <br>
of  a   slice   before   decoding   the   slice   by   receiving   coded   data Bitstream from the header 901 or the slice.<br>
Note that it has been explained here that an inter pixel filter is switched in the unit of a slice, but it may be switched not only in 5 the unit of a slice but also in the unit of an image area smaller than a slice (the unit may be an area including one or more pixels, such as a macroblock and a block of MPEG). Also, it may be switched picture by picture that is the unit of an Image area larger than a slice. In this case, the value of the filter type information FilterTypel<br>
10 corresponding to each picture may be described not only in (a diagonally shaded area, for instance, of) the header 901 as shown in Fig. 5A but also in a picture header provided for each coded picture data, for example. In addition, when a filtering method is switched in the unit of a macroblock or a block, the value of the filter type<br>
15 information FilterTypel of each macroblock or block may be put together per slice and described in the slice header.<br>
Furthermore, for transmitting the coded data in the form of packet or the like, the header and the data may be transmitted separately,    In this case, the header and the data are not Included<br>
20 in one bit stream as shown in Fig. 5. However, in the case of packet transmission, the header paired with the data is just transmitted in another packet even if the packets are transmitted somewhat out of sequence, and thus the concept is same as the case of the bit stream explained  in  Fig.  5 even if they are not transmitted as one bit<br>
25     stream.<br>
As explained above, by setting the value of the filter type information FilterTypel inputted to the picture coding apparatus of the present invention so as to select an inter pixel filter depending on the processing capability of the picture decoding apparatus, it<br>
30 becomes possible to create coded data depending on the processing capability of the picture decoding apparatus that reproduces the coded data outputted by the picture coding apparatus of the present<br>
22<br>
 <br>
invention. Also, an inter pixel filter can be selected depending on the processing capability of the picture ceding apparatus.<br>
In addition, a filter may be switched so as to improve picture<br>
quality, not be switched depending on processing load.<br>
5	Fig, 6 is a block diagram showing the structure of a picture<br>
decoding apparatus 1000 that decodes the coded data Bitstreaml generated by the picture coding apparatus according to the first embodiment. The picture decoding apparatus 1000 is a picture decoding apparatus that switches an inter pixel filter picture by<br>
10 picture or slice by slice according to the filter type Information filterTypel described in the header of the inputted coded data Bitstreaml and decodes the coded data in the coded data Bitstreaml, and is comprised of the variable length decoding unit 201, the picture decoding  unit 202, the adder 203, the picture<br>
15 memory 205, the inter picture predicting unit 206, a switch 1001, a switch 1002, an inter pixel filter A 1003 and an inter pixel filter B 1004.<br>
The coded data Bitstreaml is inputted to the picture decoding apparatus  1000 from outside.    This coded data  Bitstreaml, for<br>
20 example, is the data coded by the picture coding apparatus 300 or the picture coding apparatus 400 in the first embodiment. The variable length decoding unit 201 performs variable length decoding of the inputted coded data Bitstreaml, separates it into coded differential   picture   data   CodedRes,   predictive   parameter   data<br>
25 PredParam and filter type information FllterTypel, and outputs the coded differentia! picture data CodedRes to the picture decoding unit 202, the predictive parameter data PredParam to the inter picture predicting unit 206, and the filter type Information FilterTypel to the switch 1001 and the switch 1002, respectively.<br>
30 When the value "1" is inputted as the filter type information FilterTypel, the switch 1001 and the switch 1002 change the connection to the terminal "1" side, and apply filtering by the inter<br>
23<br>
 <br>
pixel filter A 1003 to the decoded picture data Recon. When the value "2" is inputted as the filter type information FliterTypel, the switch 1001 and the switch 1002 change the connection to the terminal '2" side, and apply filtering by the inter pixel filter B 1004 5 to the decoded picture data Recon. Regardless of whether an inter pixel filter operation is performed by either inter pixel filter, the filtered decoded picture data Filteredlmgl is stored in the picture memory 205 and outputted outside the picture decoding apparatus 1000, for instance, a display apparatus or the like.<br>
10	As   explained   above,   according   to   the   picture   decoding<br>
apparatus 1000 of the present invention, it becomes possible to decode the coded data Bitstreaml including the filter type information filterTypel specifying the type of the inter pixel filter in the header.<br>
15	Note that although the picture decoding apparatus of the<br>
present embodiment includes two inter pixel filters, it may include three or more inter pixel filters. In this case. In the same manner as the present embodiment, one of three or more inter pixel filters may be selected according to the filter type information in the coded<br>
20    data BItstream and used.<br>
Note that as shown in the first embodiment, when the filter type is switched in the unit of a picture or the unit of an image area smaller than a picture, the inter pixel filter is switched at the time point when the filter type is changed.<br>
25	Fig. 7 is a block diagram showing the structure of a picture<br>
decoding apparatus 1100 that uses a built-in inter pixel filter In place of a specified inter pixel filter If such a filter Is not Integrated. The picture decoding apparatus 1100 is characterized in that it uses any one of the inter pixel filters built in itself instead if the inter pixel<br>
30 filter selected by the filter type information included in the coded data is not built in itself. This picture decoding apparatus 1100 includes the variable length decoding unit 201, the picture decoding<br>
24<br>
 <br>
unit 202, the adder 203, the picture memory 205, the inter picture<br>
predicting unit 206, the switch 1001, the switch 1002, the Inter pixel<br>
filter  A   1003,   the   inter   pixel  filter   B   1004  and   a   filter  type<br>
information converting unit 1101.<br>
5	For   example,   it   is   assumed   that   the   picture   decoding<br>
apparatus 1100 includes only two types of the inter pixel filter A 1003 and the inter pixel filter B 1004 indicated by the value '1" and the value "2" of the filter type information FiiterTypel. Coded data BitstreamS is inputted to the picture decoding apparatus 1100 from<br>
10 outside. The variable length decoding unit 201 performs variable length decoding of the inputted coded data BitstreamS, separates it into coded differential picture data CodedRes, predictive parameter data PredParam and filter type information FilterTypeS, and outputs the coded differential picture data CodedRes to the picture decoding<br>
15 unit 202, the predictive parameter data PredParam to the inter picture predicting unit 206, and the filter type information FilterTypeS to the filter type information converting unit 1101, respectively. When the value of the filter type information FilterTypeS Is the value "3" indicating an inter pixel filter not built in<br>
20 the picture decoding apparatus 1100, the filter type information converting unit 1101 converts the value "3" of the filter type information FilterTypeS into the value "2" indicating the inter pixel filter whose smoothing level Is most approximate to that of the specified inter pixel filter from among the inter pixel filters built in<br>
25 the picture decoding apparatus 1100, for example, and outputs it as filter type information FilterType4.<br>
By performing this conversion processing, decoding processing to reconstruct a picture closely to the original decoded picture is possible although picture quality is degraded to some<br>
30 extent because an inter pixel filter different from that for coding is used in the picture decoding apparatus 1100, so there is enough availability as a simple picture decoding function.    When the value<br>
25<br>
 <br>
\\ i II<br>
'1" is Inputted as the filter type information F!lterType4, both the switch 1001 and the switch 1002 change the connection to the terminal "1" side, and apply the filtering by the inter pixel filter A 1003 to the decoded picture data Recon. When the value "2" is 5 inputted as the filter type information FilterType4, both the switch 1001 and the switch 1002 change the connection to the terminal "2" side, and appiy the filtering by the inter pixel filter B 1004 to the decoded picture data Recon. Filtered decoded picture data Filteredlmg3 that Is the processing result by the inter pixel filter is<br>
10 outputted to a display apparatus or the like outside the picture decoding apparatus 1100.<br>
As explained above, according to the picture decoding apparatus 1100, even if the filter type information FiiterTypeB specifying an inter pixel filter which is not built in the picture<br>
15 decoding apparatus 1100 is included in the input coded data BitstreaniS, it can be decoded using a built-in inter pixel filter instead. Therefore, coded data Bitstream can be decoded without degrading the picture quality substantially.<br>
IMote that when the picture decoding apparatus 1100 has one<br>
20 inter pixel filter (including the case of no inter pixel filter operation), decoding can be performed using that inter pixel filter forcedly.<br>
Note that the picture decoding apparatus of the present embodiment is equipped with two inter pixel filters (the case of no inter pixel filter operation is counted as one filter), but the picture<br>
25 decoding apparatus equipped with three or more inter pixel filters can perform the same processing. In other words,, the processing of storing the decoded picture data Recon in the picture memory 205 as it is without being performed of inter pixel filter operation may be included as one of the processing of the inter pixel filter.<br>
3D	Note that as shown in the first embodiment, if the filter type<br>
is switched in the unit of a picture or the unit of an image area smaller than a picture, an inter pixel filter is switched at the point of<br>
26<br>
 <br>
changing the filter type.<br>
The operation of the inter pixel filters 303, 304, 1003 and 1004 will be explained in more detail using Fig. 9 and Fig. 10. Fig. 9 is a diagram showing the operation details of a deblock filter that 5 is an example of an inter pixel filter. Fig. 9A is a diagram showing pixel values in the vicinity of the boundary between blocks before filtering. Fig. 9B is a diagram showing pixel values in the vicinity of the boundary between blocks after filtering. Fig. 10 is a flowchart showing a flow of filtering processing by an Inter pixel filter.    Fig, 9A<br>
10 shows pixel values of respective pixels 601~608 on one horizontal scanning line. The pixels 601~604 are all pixels in a block 610, but the pixels 605~608 are pixels in a block 611 adjacent to the block 610. The pixel values of the pixels 601~604 are respectively p3, p2, pi and pO, and the pixel values of the pixels 605~608 are<br>
15 respectively qO, ql, q2 and qS. In a picture coding apparatus, processing such as inter picture prediction, picture coding, variable length coding and picture decoding is generally performed in the unit of a block (or macrofalock). Therefore, coding noise is apt to appear in the higher frequencies between pixels, such as the pixel<br>
20 604 and the pixel 605, across the boundary between adjacent blocks (or macroblocks),. such as the block 610 and the block 611. For example, there is a tendency that the difference between the pixel value pO of the pixel 604 and the pixel value qO of the pixel 605 is apt to increase due to the influence of the coding noise.   Therefore, an<br>
25    inter pixel filter is a filter that can be determined using a plurality of<br>
parameters, for example, a filter corresponding to parameters  or<br>
and  0   for determining the filter, and pixel values of a group of<br>
pixels across the block boundary are filtered by this inter pixel filter.<br>
As shown in Fig. ID, an, inter pixel filter first calculates the<br>
30 absolute value of the difference of the pixel values (pO-qO) between the pixel 604 and the pixel 605 across the boundary, and judges whether the calculated absolute value is less than the value of the<br>
27<br>
 <br>
parameter a. or not (S701). As a result of the judgment, if the absolute value of the difference (pO-qO) between the pixel values is the value of the parameter a or more, the inter pixel filter does not perform deblock filter processing for the pixel value represented by 5 the decoded picture data Recon (S704). On the other hand, as a result of the judgment in Step S701, if the absolute value of the difference (pO-qO) between the values of adjacent pixels across the block boundary is less than the value of the parameter a, the inter pixel filter further calculates the absolute value of the difference<br>
10 (pl-pO) between the values of the pixel 604 and the pixel 603, and judges whether the calculated absolute value is less than the value of the parameter /? or not (S702). Here, the pixel 604 and the pixel 603 are adjacent pixels In one block 610. As a result of the judgment, if the absolute value of the difference (pl-pO) between<br>
15 the pixel values is the value of the parameter &amp; or more, the inter pixel filter 503 does not perform deblock filter processing for the pixel value represented by the decoded picture data Recon (S704). Also, as a result of the judgment, if the absolute value of the difference (pl-pO) between the pixel values is less than the value of<br>
20 the parameter j3 , it further calculates the absolute value of the difference (ql-qO) between the pixel 605 and the pixel 606, and judges whether the calculated absolute value is less than the value of the parameter ^ or not (S703). Here, the pixel 60b and the pixel 606 are adjacent pixels in one block 611.   As a result of the<br>
25 judgment, if the absolute value of the difference (ql-qO) of the pixel values is the value of the parameter ^ or more, the, inter pixel filter does not perform deblock filter processing for the pixel value represented by the decoded picture data Recon (S704). On the other hand, if the absolute value of the difference (ql-qO) between<br>
30 the pixel values \s less than the value of the parameter ^ , the Inter pixel filter 503 performs filtering for the decoded picture data Recon to remove coding noise, and ends the processing.    The inter pixel<br>
28<br>
 <br>
filter repeats the above-mentioned processing for every pixel array in the horizontal scanning line direction and vertica! scanning line direction respectively across the block boundaries. In this manner, by performing deblock filter processing when any one of the 5 differences of values of three sets of adjacent pixels is less than a fixed value, block distortion is removed.<br>
Note that in the deblock filter processing in the above Step S704, smoothing filtering (filtering for suppressing high frequency components) is performed for the pixels in the vicinity of the 10 boundary. For example, a new pixel value PO of the pixel 604 can be generated by smoothing, using a low pass filter for suppressing high frequency components for the pixel value pO of the pixel 604, the pixel value qO of the pixel 605, the pixel value pi of the pixel 603 and the pixel value ql of the pixel 606.<br>
15<br>
(Second Embodiment)<br>
Fig. 8 is a block diagram showing the structure of a picture coding apparatus 500 according to the second embodiment. The picture coding apparatus 500 is different from the picture coding<br>
20 apparatus 300 in that as inter pixel filter processing, the former can select whether or not storing the decoded picture data Recon in the picture memory 107 as it is as reference picture data Ref. The picture coding apparatus 500 is comprised of the difference calculator 101, the picture coding unit 102, the picture decoding unit<br>
25 104, the adder 105, the picture memory 107, the Inter picture predicting unit 108, the inter picture prediction estimating unit 109, a switch 501, a switch 502, an inter pixel filter 503, a look up table memory unit 504, and a variable length coding unit 505.<br>
When the value of the filter type information FilterType2 is "0",<br>
30 both the switch 501 and the switch 502 change the connection to the terminal '0" side to store the decoded picture data Recon outputted from the adder 105 as it is in the picture memory 107.   When the<br>
29<br>
 <br>
value of the filter type information FilterTypeZ is "1", both the switch 501 and the switch 502 change the connection to the terminal "1" side to bring the decoded picture data Recon outputted from the adder 105 to conduct to the inter pixel filter 503. The inter pixel 5 filter 503 is a filter used for filtering pixel values and, for example, a deblock filter for suppressing coding noise in the higher frequency components on the block boundary. The filtered decoded picture data Filteredlmg2 which is performed of inter pixel filter operation by the inter pixel filter 503 Is stored in the picture memory 107.<br>
10     The variable length coding unit 505 performs variable length coding of this filter type information FilterType2, the coded differential picture data CodedRes and the predictive parameter data PredParam, puts them together into one coded data Bitstream2 as shown in Fig. 5A, and outputs it outside the picture coding apparatus 500.<br>
15	Note that the picture coding apparatus 500 has one inter pixel<br>
filter, but it may have two or more inter pixel filters. It may select any one of the two or more inter pixel filters or no inter pixel filter operation to use it, and include the filter type information indicating the type of the used inter pixel filter (including no inter pixel filter<br>
20 operation) into the coded data. Also, the picture coding apparatus 500 may omit the look up table memory unit 504, artd instead have the function of the look up table memory unit 504 in the inter pixel filter 503.<br>
As explained above, in the picture coding apparatus 500 of<br>
25     the present invention. It becomes possible to create coded data using an inter pixel filter depending on the processing capability of the picture decoding  apparatus for reproducing the  coded data Bitstream2 outputted from that picture coding apparatus 500.   Also, an inter pixel filter can be selected depending on the processing<br>
30 capability of the picture coding apparatus 500. Also, the filter type may be switched in the unit of a picture or the unit of an image area smaller than a picture.<br>
30<br>
 <br>
Fig. 11 is a blocl
10 decoding unit 201, the picture decoding unit 202, the adder 203, the picture memory 205, the inter picture predicting unit 206, a switch 1201, a switch 1202 and an inter pixel filter 1203.<br>
The coded data Bltstream2 whose header includes the filter type information FilterType2 indicating the inter pixel filter applied<br>
15 to the coding, for example, the coded data in Fig. 9A which is coded by the picture coding apparatus 500 in Fig. 8, is inputted to the picture decoding apparatus 1200. The filter type information FiIterType2 includes the value indicating "no inter pixel filter operation" as a filter type.   The variable length decoding unit 201<br>
20 performs variable length decoding of the inputted coded data Bitstream2, and separates it into coded differential picture data CodedRes, predictive parameter data PredParam and filter type information FilterType2. The separated coded differential picture data CodedRes, predictive parameter data PredParam and filter type<br>
25 information FilterType2 are respectively outputted to the picture decoding unit 202, the inter picture predicting unit 206, and the switch 1201 and the switch 1202.<br>
When the value "0" is inputted as the filter type information FilterTYpe2, the switch 1201 and the switch 1202 both change the<br>
30 connection to the terminal '0" side, and the decoded picture data Recon outputted from the adder 203 is stored as it is in the picture memory 205.    When the value "1" is inputted as the filter type<br>
31<br>
 <br>
information FilterType2, the switch 1201 and the switch 1202 both change the connection to the terminal "1" side to apply the filtering by the inter pixel filter 1203 to the decoded picture data Recon.<br>
Also, if it is judged from the filter type information that an 5 inter pixel filter is not used for a decoded picture which is to be a reference picture, the decoded picture is not filtered by the inter pixel filter for storing that picture in the picture memory as a reference picture, but the inter pixel filter may be used only for outputting it outside a picture decoding apparatus.    Fig.  12 is a<br>
10 block diagram showing the structure of a picture decoding apparatus 1300 including a picture output unit equipped with selectable inter pixel filters. As explained above, the picture decoding apparatus 1300 is a picture decoding apparatus that, when the filter type information filterType2 indicates that the decoded picture outputted<br>
15 from the adder 203 is not filtered by an inter pixel filter, does not perform filtering of the decoded picture stored in the picture memory but performs filtering of the decoded picture outputted outside using an inter pixel filter provided at the output side, and Is comprised of the variable length decoding unit 201, the picture<br>
20 decoding unit 202, the adder 203, the picture memory 205, the inter picture predicting unit 206, the switch 1201, the switch 1202, the inter pixel filter 1203, a switch 1301, a switch 1302 and an inter pixel filter 1303.<br>
When the value of the filter type information FilterType2 is '^1",<br>
25 the switch 1201, the switch 1202, the switch 1301 and the switch 1302 all change the connection to the terminal '1" side. In this case, the switch 1201 and the switch 1202 connect the output of the adder 203, the inter pixel filter 1203 and the picture memory 205, and the switch 1302 interrupts the connection with the output of the<br>
30 switch 1202 and the inter pixel filter 1303 to short-circuit with the switch 1301. Therefore, the inter pixel filter 1203 performs filter operation  for  the  decoded   picture  data   Recon  and  outputs  the<br>
32<br>
 <br>
filtered decoded picture data F)lteredlmg3. The filtered decoded picture data FiiteredlmgS is outputted as an output picture Outlmg to a display apparatus or the iike outside the picture decoding apparatus as it is, that is^ without being filtered again by the inter 5 pixel filter 1303. When the value of the filter type information FilterType2 is "0", the switch 1201, the switch 1202, the switch 1301 and the switch 1302 all change the connection to the terminal "0" side. In this case, the switch 1201 interrupts the connection with the output of the adder 203 and the inter pixel filter 1203 to 10    short-circuit with the switch 1202.    On the other hand, the switch<br>
1302	connects the output of the switch 1202, the inter pixel filter<br>
1303	and the external output terminal of the switch 1301.<br>
Therefore, the decoded picture data Recon outputted from the adder<br>
203 is not performed of the inter pixel filter operation by the inter<br>
15 pixel filter 1203, but stored as it is in the picture memory 205 as a reference picture. The decoded picture data Recon which is taken out of the output side of the switch 1202, that is, the filtered decoded picture data FilteredlmgS which has not filtered actually is performed of the inter pixel filter operation by the inter pixel filter<br>
20     1303,  and outputted as an output picture Outlmg to a  display<br>
apparatus or the like outside the picture decoding apparatus 1300.<br>
Note that the Inter pixel filter 1203 and the inter pixel filter<br>
1303   are  described   here as  different  constituent  elements  for<br>
explanation,    but    one    inter    pixel    filter    may    be    used    for<br>
25 implementation (there is no problem to use one inter pixel filter because two inter pixel filters do not operate at the same time). Also, the inter pixel filter 1203 and the inter pixel filter 1303 may be the existing inter pixel filter 106, or the inter pixel filter 503 including the look up table memory unit 504 as shown in Fig. 8.<br>
30 Furthermore, it may be the inter pixel filter 503 including the look up table.memory unit 504 for holding a plurality of parameter tables 620.    However, in this case, the filter type information FilterType2'<br>
33<br>
 <br>
needs to be inputted to the inter pixel filter 503 also.<br>
As explained above, according to the picture decoding apparatus 1300, even in the case where filtering is not performed for a decoded picture which is to be a reference picture, filtering by an 5 inter pixel filter can be performed for the decoded picture, so a display apparatus for displaying an output picture Outlmg outputted from the picture decoding apparatus 1300 can display moving pictures with higher picture quality. This Is particularly effective for devices with  enough  processing capability when filtering  is not<br>
10     performed for a decoded picture which is to be a reference picture.<br>
Note that, as shown in the first embodiment, when the type of<br>
an   inter   pixel   filter   indicated   by   the   filter   type   information<br>
Fi!terType2 is switched in the unit of a picture or In the unit of an<br>
image area smaller than a picture, the inter pixel filter is switched at<br>
15     the time of changing the filter type.<br>
Fig. 13 is a block diagram showing the structure of a picture decoding apparatus 1400 capable of selecting the inter pixel filter 1203 depending on a picture type of each picture. The picture decoding  apparatus  1400  is a  picture  decoding  apparatus that<br>
20 decodes information on whether a decoded picture is used as a reference picture or not, for example, coded data including a picture type of each picture and the like, and is comprised of the picture decoding unit 202, the adder 203, the picture memory 205, the Inter picture predicting unit 206, the inter pixel filter 1203, a variable<br>
25 length decoding unit 1401, a switch 1402, a switch 1403 and a picture type information converting unit 1404.<br>
The variable length decoding unit. 1401 performs variable length decoding of coded data Bitstream4 inputted from outside, and   separate   it   into   picture   type   information   PType,   coded<br>
30 differential picture data CodedRes and predictive parameter data PredParam. The separated picture type information PType, coded differential picture data CodedRes and predictive parameter data<br>
34<br>
 <br>
PredParam are outputted respectively to the picture type information converting unit 1404, the picture decoding unit 202 and the inter picture predicting unit 206. The picture type information Ptype is the information indicating whether a current picture is used 5 as a reference picture or not. For example, according to international standards, MPEG-1 and 2, information called a picture type is included in coded data of every picture, and a picture called a B-picture is not used as a reference picture. Therefore, this picture type included in the coded data may be used as the picture<br>
10 type information PType of the present embodiment. Even if filtering by means of an inter pixel filter is not performed for a picture which is not used as a reference picture, it does not have so serious influence on decoding of other pictures.<br>
Here, the picture decoding apparatus 1400 does not perform<br>
15 inter pixel filtering if the current picture is not used as a reference picture. For example, when the processing capability of the picture decoding apparatus 1400 is too low to execute decoding in time for reproduction time, the processing load on the picture decoding apparatus 1400 can be reduced by not performing filtering by means<br>
20 of an inter pixel filter for pictures which are not used as reference pictures. It will be explained using the block diagram of Fig. 13. First, if the picture type information Ptype inputted to the picture type information converting unit 1404 indicates a picture other than a B-picture, that is, if it indicates that the current picture is used as<br>
25 a reference picture, both the switch 1402 and the switch 1403 change the connection to the terminal "1. Thereby, the picture decoding apparatus 1400 performs inter pixel filter operation for the decoded picture data Recon using the inter pixel filter 1203, and stores the operation result in the picture memory 205 as filtered<br>
30 decoded picture data FilteredlmgS and outputs it to a display apparatus or the like outside the picture decoding apparatus 1400. On the other hand^ if the picture type information Ptype indicates<br>
35<br>
 <br>
that the current picture is a B-picture, that is, it indicates the current picture is not used as a reference picture,, the switch 1402 and the switch 1403 change the connection to the terminal "0", and the decoded picture data Recon outputted from the adder 105 is 5 outputted directly to outside without using the inter pixe! filter 1203.<br>
As mentioned above, since the picture decoding apparatus 1400 omits filtering by means of the inter pixel filter 1203 for a B-picture which is hardly referred to by other pictures, processing<br>
10    load required for decoding coded data Bitstream can be reduced without giving a great influence on decoding of other pictures.   Also, since the picture decoding apparatus 1400 selects an inter pixel filter depending on a picture type of coded data in this manner, filtering   processing   load  can  be  reduced  even  for  coded   data<br>
15 outputted from a conventional picture coding apparatus, with its header information such as a picture header not including selection information of an inter pixel filter, because filtering processing is omitted for pictures which are not referred to.<br>
Note that it is not necessary to store pictures which are not<br>
20 referred to in the picture memory 205 in Fig. 13, for example, regardless of whether filtering processing is performed for the pictures or not. Therefore, it is necessary to store, in the picture memory 205, only data obtained by performing filtering processing for pictures which are referred to.<br>
25	Note that, in the strict sense, a B-picture does not mean a<br>
picture which is not referred to, but a picture coding method in which a B-plcture is referred to can be conceived. Therefore, if an inter pixel filter is not selected just depending on a picture type, but it is judged whether the picture is actually referred to or not, more<br>
30 appropriate processing can be performed even when a B-picture is referred to. However, even when a B-picture is referred to, an inter pixel filter may be switched just depending on a picture type for<br>
36<br>
 <br>
simplifying the implementation.<br>
Also, whether inter pixel filtering is to be performed or not is<br>
not switched, but two filters, the inter pixel filter 1003 and the inter<br>
pixel filter 1004 may be switched depending on a picture type or<br>
5     whether a picture is referred to or not, as shown in Fig. 6 or Fig. 7.<br>
Furthermore, an example of a picture decoding apparatus<br>
that switches an inter pixel filter depending on a picture type and<br>
whether a picture is referred to or not has been explained, but a<br>
picture coding apparatus can also perform this switching in the same<br>
10     manner.<br>
(Third Embodiment)<br>
Fig. 14 is a block diagram showing the functional structure of a picture coding apparatus 1500 according to the third embodiment<br>
15 of the present invention. The picture coding apparatus 1500 is realized by a computer apparatus equipped with a CPU, a memory, a hard disk (HD) on which a program for picture coding is installed and others, and has, as functions for that, an operation console unit 1505,  a  pre-processing  unit  1510,  a  subtracting  unit 1512,  an<br>
20 orthogonal transformation unit 1513, a quantization unit 1514, a variable length coding unit 1517, a post-processing unit 1520, an inverse quantization unit 1521, an inverse orthogonal transformation unit 1522, an adding unit 1524, a switching unit 1530, an inter pixel filter 1540, a picture memory 1541, a motion<br>
25    estimation unit 1542, a motion compensation unit 1543, a priority<br>
determining unit 1550 and a filter processing controlling unit 1560.<br>
The operation console unit 1505 accepts an operator's entry<br>
operation.    The pre-processing unit 1510 is equipped with a format<br>
converting unit for converting a format of an inputted picture signal<br>
30 into a space resolution designated by the operation on the operation console unit 1505, a picture reordering unit for reordering pictures in accordance with picture types and others, and outputs pictures or<br>
37<br>
 <br>
the like in sequence.<br>
Note that there are the following types of pictures: an I-picture (Intra Picture: intra coded picture) which is created in the intra picture coding mode; a P-picture (Predictive Picture: 5 predictive coded picture) which is created in the inter picture coding mode and refers to only one picture; and a B-picture (Bi Predictive Picture: plural predictive picture) which can also refer to a backward picture, and at the time of motion estimation in the inter picture coding mode, the number of decoded pictures, stored in the<br>
10 picture memory 1541, which can be referred to at the same time by the motion estimation unit 1542, is restricted.<br>
Also, in coding a picture, there are a mode for coding it using three types of pictures (hereinafter also referred to as an 'IPB coding mode") and a mode for coding it using only two types of<br>
15 pictures, an I-picture and a P-picture. As the mode for coding it using only two types of pictures, an I-picture and a P-picture, there are a mode for coding a P-picture which has a possibility of being referred to and a P-picture which has no possibility of being referred to (hereinafter also referred to as a "first IP coding mode") and a<br>
20 mode for coding a P-picture in the base layer in layered coding, a P-picture which has a possibility of being referred to and a P-picture which has no possibility of being referred to in the enhancement layer (hereinafter also referred to as a "second IP coding mode"). In layered coding, pictures are classified into two groups, a base<br>
25 layer and an enhancement layer, and the base layer is a group of pictures which can be reproduced by themselves and the enhancement layer is a group of pictures which require the group of pictures on the base line for coding and decoding. The layered coding is characterized, in that, since the number of bits only for the<br>
30 base layer is small but the number of bits for both the base layer and the enhancement layer is large and the number of pictures is large, two   types   of   uses   can   be   easily   realized   by   recording   and<br>
38<br>
 <br>
transmitting the base line in all cases and recording and transmitting the enhancement layer only when necessary for high picture quality.<br>
In the case of the first IP coding mode, information of 5 "possibility" or "no possibility" is added to a picture and information of "possibility" or "no possibility" is added to a picture type as well. Also, in the case of the second IP coding mode, information of "base", "possibility" or "no possibility" is added to a picture and information of "base", "possibility" or "no possibility" is added to a picture type<br>
10    as well.<br>
The subtracting unit 1512 outputs the picture outputted from the pre-processing unit 1510 as it is in the intra picture coding mode, . and calculates a motion compensation error (residual image) that is a    differential    value    between    the    picture   and    the    motion<br>
15 compensation picture outputted from the motion compensation unit 1543 in the inter picture coding mode.<br>
The orthogonal transformation unit 1513 outputs frequency components in the frequency domain which are resulted by performing   orthogonal   transformation   such   as   discrete   cosine<br>
20 transformation for the picture in the intra picture coding mode and the motion compensation error in the inter picture coding mode, which are outputted from the subtracting unit 1512, respectively. The quantization unit 1514 outputs a quantized value by quantizing the    frequency    components    outputted    from    the    orthogonal<br>
25 transformation unit 1513. The variable length coding unit 1517 outputs a coded signal for which further information compression Is performed using a variable length code (Huffman code) which assigns code length to the quantized value outputted from the quantization unit 1514 depending on its occurrence frequency.    The<br>
30 post-processing unit 1520 is equipped with a buffer for temporarily memorizing the coded signal or the like, a rate controlling unit for controlling a quantization range in the quantization unit 1514, and<br>
39<br>
 <br>
others, and transforms the above-mentioned motion vector, picture<br>
type or the like, and the coded signal outputted ff-om the variable<br>
length coding unit 1517 into a coded signal as a bit stream and<br>
outputs it.<br>
5	The inverse quantization unit 1521 decodes the frequency<br>
components by inverse quantizing the quantized value generated by the quantization unit 1514. The inverse orthogonal transformation unit 1522 decodes the picture in the intra picture coding mode and the   motion   compensation   error   (residual   image)   that   is   the<br>
10 differential value of pixels in the inter picture coding mode, by performing inverse orthogonal transformation of the frequency components decoded by the inverse quantization unit 1521. The adding unit 1524 decodes the picture, by outputting the picture (decoded  picture)  which   is decoded  by the  inverse orthogonal<br>
15 transformation unit 1522 as it is in the intra picture coding mode, and by adding the residual image which is decoded by the inverse orthogonal transformation unit 1522 and the motion compensation picture which is generated by the motion compensation unit 1543 in the inter picture coding mode.<br>
20	The switching unit 1530 is comprised of a pair of switches<br>
1531 and 1532 for switching the switching status synchronously under the switch ON/OFF control of the filter processing controlling unit 1560 for every picture, and incorporates the inter pixel filter 1540 into a loop, or omits it from a loop, that is, makes the inter<br>
25 pixel filter 1540 skip its processing. The Inter pixel filter 1540 performs spatial low pass filter processing for the decoded picture outputted from the adding unit 1524 on a block by block basis when the switches 1531 and 1532 are ON so as to generate the decoded picture  without  block   distortion   or  the   like.      For  example,   it<br>
30 calculates an average value between a pixel and neighboring pixels, and if the difference between the pixel and a neighboring pixel is within   a   predetermined   range,   it   executes   the   processing   of<br>
40<br>
 <br>
replacing every pixel around the block boundary with the calculated average value.<br>
The picture memory 1541 stores a plurality of the decoded pictures outputted from the switching unit 1530. Thereby, it 5 becomes possible to monitor the decoded picture in the same condition as the picture decoding apparatus that decodes the coded signal outputted from the post-processing unit 1520 or use the decoded picture as a reference picture In the inter picture coding mode.    Note that in the first IP coding mode and the second IP<br>
10 coding mode, a decoded P-picture to which the information indicating reference possibility is added is always stored In the picture memory 1541, and a decoded P-picture to which the information indicating no reference possibility is added does not need to be stored In the picture memory 1541.    Therefore, the<br>
15 information of possibility or no possibility means whether the decoded picture is stored in the picture memory 1541 or not.<br>
In the inter picture coding mode, the motion estimation unit 1542 searches for a reference picture whose difference from the picture outputted from the pre-processing unit 1510 is smallest<br>
20 from among the decoded pictures stored in the picture memory 1541, and outputs a motion vector that is the motion amount of a differentia! pixel. Note that when the motion vector is outputted, a block prediction type indicating whether the reference picture is a forward picture, a baclcward picture or the average value between<br>
25 both pictures is outputted. The motion compensation unit 1543 performs the operation indicated by the motion vector and the block prediction type, and generates a motion compensation picture. The priority determining unit 1550 outputs the priority of a picture depending   on   the   picture   type,   and   the   base   layer   or   the<br>
30 enhancement layer. The filter processing controlling unit 1560 controls ON/OFF of the switches 1531 and 1532 depending on the priority outputted from the priority determining unit 1550 or the<br>
41<br>
 <br>
CPU operation rate.<br>
Fig. 15 is a block diagram showing the detailed functional structure of the priority determining unit 1550 as shown in Fig. 14. As shown in this figure, the priority determining unit 1550 outputs 5 the priority of a picture depending on the picture type and the base layer or the enhancement layer, and is comprised of three tables 1551~1553, a selector 1554 and a determination processing unit 1555, as shown in Fig. 15. Note that in the case of a P-picture in the  second  IP  coding  mode,  the  information  indicating 'base",<br>
10 "possibility of being referred to" or "no possibility of being referred to" is added to its picture type.<br>
The table 1551 is a table which is selected when the IPB coding mode is designated by the operation on the operation console unit 1505 and in which the picture types of pictures are associated<br>
15 with the priorities thereof, and the priorities are set to "0" for I-pictures, "1" for P-pictures and "2" for B-pictures. Note that the priorities are set so that they become lower as the number becomes larger.<br>
The table 1552 is a table which is selected when the first IP<br>
20 coding mode is designated by the operation on the operation console unit 1505 and in which the picture types of pictures are associated with the priorities thereof, and the priorities are set to "0" for I pictures, '1" for P-plctures (which have a possibility of being referred to) and "2" for P-pictures (which have no possibility of<br>
26     being referred to).<br>
The table 1553 is a table which is selected when the second IP coding mode (base, reference possibility and no reference possibility) is designated, and the priorities are set to "0" for I-pictures, "1" for P-pictures (base), '2" for P-pictures (which have<br>
30 a possibility of being referred to) and "3" for P-pictures (which have no possibility of being referred to).<br>
The selector 1554 selects any one of the tables 1551~1553<br>
42<br>
 <br>
based on the coding mode (the IPB coding mode or the first IP coding mode) designated by the operation console unit 1505. The determination processing unit 1555 determines the priority depending on the picture type and the base layer or the 5 enhancement layer outputted from the pre-processing unit 1510 with reference to the table selected by the selector 1554, and outputs the determined priority. Specifically, when the IPB coding mode is designated, the selector 1554 selects the table 1551, and the   determination   processing   unit   1555   outputs   the   priority<br>
10 associated with an I-picture, a P-picture or a B-picture every time the picture type is outputted from the pre-processing unit 1510. Also, when the first IP coding mode is designated, the selector 1554 selects the table 1552, and the determination processing unit 1555 outputs the priority based on the picture type and the data added to<br>
15 a P-picture ("possibility" or "no possibility")- Further, when the second IP coding mode is designated, the selector 1554 selects the table 1553, and the determination processing unit 1555 outputs the priority based on the picture type and the data added to a P-picture ("base", 'possibility" or'no possibility).<br>
20	Fig.  16 is a block diagram showing the detailed functional<br>
structure of the filter processing controlling unit 1560 as shown in Fig. 14. As shown in this figure, the filter processing controlling unit 1560 controls ON/OFF of the switches 1531 and 1532 In accordance with the priority outputted from the priority determining<br>
25 unit 1550 and the CPU operation rate, and is comprised of three tables 1561~1563, a selector 1564 and a switch change processing unit 1565, as shown in Fig. 16. The table 1561 is a table which Is selected when the IPB coding mode is designated and indicates combinations   of   the   priorities   and   CPU   operation   rates   for<br>
30 performing filter processing, and it is set to switch ON for the priority 0~2 when the CPU operation rate Is less than 70%, switch ON only for the priorities 0 and 1 when the CPU operation rate is<br>
43<br>
 <br>
70% or more and less than 80%, and switch ON only for the priority<br>
0	when the CPU operation rate is 80% or more.<br>
The table 1562 is a table which is selected when the first IP coding mode is designated and indicates combinations of the 5 priorities and CPU operation rates for performing filter processing, and it is set to switch ON for the priorities 0~2 when the CPU operation rate is less than 70 %, switch ON only for the priorities 0 and 1 when the CPU operation rate is 70% or more and less than 80%, and switch ON only for the priority 0 when the CPU operation 10    rate is 80% or more.<br>
The table 1563 is a table which is selected when the second IP<br>
coding   mode   is   designated   and   indicates  combinations  of  the<br>
priorities and CPU operation rates for performing filter processing,<br>
and it is set to switch ON for the priorities 0~3 when the CPU<br>
15    operation rate is less than 70 %, switch ON only for the priorities 0,<br>
1	and 2 when the CPU operation rate is 70% or more and less than<br>
80%, and switch ON only for the priorities 0 and 1 when the CPU<br>
operation rate is 80% or more.<br>
The selector 1564 selects any one of the tables 1561~1563 20 based on the coding mode (the IPB coding mode, the first IP coding mode or the second IP coding mode) designated by the operation console unit 1505. The switch change processing unit 1565 outputs a signal of switching ON or OFF so as to control the switches 1531 and 1532 of the switching unit 1530 based on the priority outputted 25 from the priority determining unit 1550 and the CPU operation rate acquired by every picture, with reference to the table selected by the selector 1564.<br>
Specifically, when the IPB coding mode is designated, the<br>
selector   1564  selects  the  table   1561,   and  the  switch   change<br>
30     processing unit 1565 outputs a signal of switching ON for all the<br>
I-picture, P-picture and B-picture if the CPU operation rate is less<br>
than 70%.    Also, if the CPU operation rate Is 70% or more and less<br>
44<br>
 <br>
than 80%, the switch change processing unit 1565 outputs a signal<br>
of switching ON only for an I-picture and a P-pscture.    Also, if the<br>
CPU operation rate is 80% or more, the switch change processing<br>
unit 1565 outputs a signal of switching ON only for an I-picture.<br>
5	Also, when the first IP coding mode is designated, the selector<br>
1564 selects the table 1562, and the switch change processing unit 1555 outputs a signal of switching ON for all the I-picture, P-picture (possibility) and P-picture (no possibility) if the CPU operation rate is less than 70%.    Also, if the CPU operation rate is 70% or more<br>
10 and less than 80%, the switch change processing unit 1565 outputs a signal of switching ON only for an I-picture and a P-picture (possibility). Also, if the CPU operation rate is 80% or more, the switch change processing unit 1565 outputs a signal of switching ON only for an I-picture.<br>
15	Further, when the second IP coding mode is designated, the<br>
selector 1564 selects the table 1563, and the switch change processing unit 1565 outputs a signal of switching ON for ali the I-picture, P-picture (base), P-picture (possibility) and P-picture (no possibility).    Also, If the CPU operation rate is 70% or more and (ess<br>
20 than 80%, the switch change processing unit 1565 outputs a signal of switching ON only for an I-picture, a P-picture (base) and a P-picture (possibility). Also, if the CPU operation rate is 80% or more, the switch change processing unit 1565 outputs a signal of switching ON only for an I-picture and a P-picture (base).<br>
25	Next, the operation of the picture coding apparatus  1500<br>
structured as above will be explained.<br>
In the intra picture coding mode for coding a picture as an I-picture, a picture outputted from the pre-processing unit 1510 is compressed and coded into a frequency component by orthogonal<br>
30 transformation by the orthogonal transformation unit 1513, and compressed and coded into a quantized value by quantization by the quantization unit 1514.    This quantized value is compressed and<br>
45<br>
 <br>
coded  into  a  variable  length   by variable  length  coding   by the<br>
variable length coding unit 1517, converted into a coded signal of a<br>
bit stream of an I-picture by the post-processing unit 1520, and<br>
stored in a memory medium such as a hard disk.<br>
5	On the other hand, the quantized value outputted from the<br>
quantization unit 1514 is decoded into a frequency component by inverse quantization by the inverse quantization unit 1521, and decoded into a picture by inverse orthogonal transformation by the inverse orthogonal transformation unit 1522.    When the switches<br>
10 1531 and 1532 are turned ON under the control of the filter processing controlling unit 1560, this decoded picture is stored in the picture memory 1541 after being filter-processed for eliminating block distortion by the inter pixel filter 1540, and when the switches 1531 and 1532 are OFF, it Is stored In the picture memory 1541<br>
15    without being filter-processed.<br>
Also, in the inter picture coding mode for coding a picture as a P-picture and a B-picture, a motion vector is generated by the motion estimation unit 1542, a motion compensation picture (predictive picture) Is generated by the motion compensation unit<br>
20 1543, and a motion compensation error (differential image) is generated by the subtracting unit 1512. Note that the motion estimation unit 1542 searches for a predictive picture whose difference from the picture outputted from the pre-processing unit 1510 is smallest from among the decoded pictures stored in the<br>
25 picture memory 1541 as one or a plurality of forward or backward reference pictures.<br>
Fig. 17 is a diagram showing reference relations between pictures stored in the picture memory 1541. Particularly, Fig. 17A is a diagram showing reference pictures for prediction in the IPB<br>
30 method. Fig. 17B is a diagram showing reference pictures for prediction in the first IP method, and Fig. 17C is a diagram showing reference pictures for prediction in the second IP method.    Note<br>
46<br>
 <br>
that below each picture of each method, the priority (priority level) associated with the picture is indicated.<br>
For predicting a P-ptcture in the case of the IPB method of Fig.<br>
17A, a forward I-picture and  P-picture can be referred to.    For<br>
5     predicting a  B-picture,  a forward  I-picture or P-picture can  be<br>
referred to and one backward and temporally closest I-picture or<br>
P-picture can be referred to.<br>
Note that for predicting a B-picture in H.26L, a B-picture, in addition to an I-plcture and a P-picture, can be referred to as a<br>
10 forward picture. In the mode using this B-picture as a reference picture, information that "there is a possibility" or "there is no possibility" is added to the B-picture, and the information that "there is a possibility" or "there is no possibility" is added to the picture type as well.    And in this mode, the decoded B-picture to<br>
15 which the information that there is a possibility of being referred to is always stored in the picture memory 1541, and the decoded B-picture to which the information that there is no possibility of being referred to does not need to be stored in the picture memory 1541.<br>
20	For predicting a P-picture (reference possibility) in the first IP<br>
method of Fig. 17B, a forward I-picture and P-picture (reference possibility) can be referred to. For predicting a P-picture (no reference possibility), a forward I-picture or P-picture (reference possibility) can be referred to.<br>
25	For predicting a P-picture (base) in the second IP method of<br>
Fig. 17C, a forward I-picture and P-picture (base) can be referred to. For predicting a P-picture (reference possibility), a forward I-picture and P-picture (base) can be referred to. For predicting a P-picture (no   reference   possibility),   a   plurality   of" forward   I-pictures,<br>
30 P-pictures (base) or P-pictures (reference possibility) can be referred to.<br>
Note that, for convenience of explanation, the case where the<br>
47<br>
 <br>
IPB coding mode is designated will be explained.<br>
Under such restriction, the motion estimstlon unit 1542 outputs as a motion vector the motion amount of the differential pixel between the searched reference picture and the picture 5 outputted from the pre-processing unit 1510, and also outputs a block prediction type indicating whether a reference picture is a forward picture, a backward picture or an average value of bi-predictive pictures. Also, the motion compensation unit 1543 performs for the differential pixel the operation indicated by the<br>
10 motion vector and the block prediction type outputted from the motion estimation unit 1542 to generate a motion compensation picture. And the subtracting unit 1512 generates a motion compensation error (differential image) by subtracting the motion compensation picture generated by the motion compensation unit<br>
15     1543 from the picture outputted from the pre-processing unit 1510,<br>
The motion compensation error (differential image) outputted<br>
from the subtracting unit 1512 is compressed and coded into a<br>
frequency    component    by    orthogonal    transformation    by    the<br>
orthogonal transformation unit 1513, and compressed and coded<br>
20     into a quantized value by quantization by the quantization unit 1514. This quantized value is compressed and coded into a variable length by variable length coding by the variable length coding unit 1517, converted into a coded signal in a bit stream of a P-picture or a B-picture  together  with   the   motion  vector  and   others  by   the<br>
25 post-processing unit 1520, and stored in a memory medium such as a hard disk.<br>
On the other hand, the quantized value of a P-picture or a B-picture with a possibility of being referred to which is outputted from   the   quantization   unit   1514   is   decoded   into   a   frequency<br>
30 component by inverse quantization by the inverse quantization unit 1521, and decoded into a motion compensation error (differential image)   by   inverse   orthogonal   transformation   by   the   inverse<br>
48<br>
 <br>
orthogonal transformation unit 1522. Then, the adding unit 1524 adds the motion compensation error (differential :rr:age) and the motion compensation picture, and thus it is decoded into a picture. This decoded picture is stored in the picture memory 1541 after 5 being filter-processed for eliminating block distortion by the inter pixel filter 1540 when the switches 1531 and 1532 are turned ON under the control of the filter processing controlling unit 1550, and when the switches 1531 and 1532 are turned OFF, it is stored in the picture memory 1541 without being filter-processed.<br>
10	Here, ON/OFF control of the switches 1531 and 1532 by the<br>
filter processing controlling unit 1560 will be explained  in  more detail.<br>
Fig. 18 is a flowchart showing switch activating processing executed by the switch change processing unit 1565 in the filter<br>
15     processing controlling unit 1560.<br>
By the way, the determination processing unit 1555 in the priority deternnining unit 1550 determines the priority of each picture outputted from the pre-processing unit 1510 depending on the picture type with reference to the table 1551 selected by the<br>
20 selector 1554, and outputs the determined priority. Specifically, when the IPB coding mode is designated, the selector 1554 selects the table 1551, and the determination processing unit 1555 outputs the priority '0" for an I-picture, the priority "1" for a P-picture and the  priority '2" for a  B-picture every time the  picture type is<br>
25    outputted from the pre-processing unit 1510.<br>
For every coding of a picture, the switch change processing unit 1565 in the filter processing controlling unit 1560 acquires the priority of the picture and the operation rate of the CPU included in this picture coding apparatus 1500 (S21), and determines the entry<br>
30 which is to be referred to in the table (the table 1561 in the example of Fig. 16) (S22).<br>
Specifically, if the CPU operation rate is less than 70%, it<br>
49<br>
 <br>
determines that the entry which is to be referred to is the first line, if the CPU operation rate is 70% or m.ore and less than 80%, it determines that the entry which is to be referred to is the second iine, and if the CPU operation rate is 80% or more, It determines the 5     entry which is to be referred to is the.third line.<br>
After determining the entry which is to be referred to, the switch change processing unit 1565 reads out the right column of the entry (S23), and judges whether the priority set for the picture type of the decoded picture is included in the right column or not<br>
10 (S24). If it is included in the right column (Yes in S24), the switch change processing unit 1565 outputs a signal of switching ON to the switches 1531 and 1532 (S25), Thereby, filter processing is performed for the decoded picture, and the filter-processed decoded picture is stored in the picture memory 1541.<br>
16	On the contrary, if it is not Included in the right column (No in<br>
S24), the switch change processing unit 1565 outputs a signal of switching OFF to the switches 1531 and 1532 (S26). Thereby, filter processing for the decoded picture is skipped, and the decoded picture   is   stored   in   the   picture   memory   1541   without   being<br>
20    filter-processed.<br>
Such control is performed for each picture, and decoded pictures which have been filter-processed and have not been filter-processed are stored in the picture memory 1541 in sequence. Accordingly, in picture coding, inter pixel filter for noise elimination<br>
25 or the like is not always performed but the inter pixel filter is performed selectively when necessary, so if inter pixel filter is performed only for pictures having serious influence on picture quality, for example, even in a picture decoding apparatus with a low processing capability, it becomes possible to maintain the picture<br>
30 quality of the important pictures which are stored in the picture memory, reduce accumulation of block distortion in the decoded pictures which have been stored in the picture memory, improve<br>
50<br>
 <br>
prediction efficiency by the motion compensation unit, and reduce<br>
deterioration of picture quality more than the MPEG technique, and<br>
thus the great effect of improving picture quality can be achieved at<br>
a low bit rate.<br>
5	More specifically, in performing inter pixel filter, priority is<br>
given to a picture having great influence on other pictures, that is, an intra coded picture, a forward predictive coded picture, a base layer picture or the like, so the effect of improving picture quality such as noise elimination can be achieved by an inter pixel filter<br>
10     more effectively even with same increase in processing load.<br>
Also, ON/OFF of filter processing can be controlled so as to make full use of the processing capability of the picture coding apparatus, so the CPU is used with high efficiency, and thus coding for higher picture  quality can  be  realized  even  with  the  same<br>
15     hardware resources.<br>
(Fourth Embodiment)<br>
Next, a picture decoding apparatus according to an embodiment of the present invention will be explained.    Fig. 19 is a<br>
20 block diagram showing the functional structure of a picture decoding apparatus 1600 according to the fourth embodiment of the present invention.<br>
This picture decoding apparatus 1600 is an apparatus for decoding the coded signal coded by the picture coding apparatus<br>
25 1500 as shown in Fig. 14, and it is realized by a computer apparatus equipped with a CPU, a memory, a hard disk (HD) in which a program for picture decoding is installed or the like, and, as functions, includes a pre-processing unit 1610, a variable length decoding unit 1617, an inverse quantization unit 1621, an  inverse orthogonal<br>
30 transformation unit 1622, an adding unit 1624, a switching unit 1530, an inter pixel filter 1640, a post-processing unit 1670, a picture memory 1641, a motion compensation unit 1543, a priority<br>
51<br>
 <br>
determining unit 1650 and a filter processing controlling unit 1660. The pre-processing unit 1610 is equipped with a buffer or the like for storing a coded signal temporarily, and separates it into the picture type, the motion vector and the coded signal of a picture 5 itself included in the coded signal so as to output them. Note that when the coded signal of the picture is the first IP coding mode, the information of 'possibility" or "no possibility" is added to the picture, and the information of "possibility" or'no possibiilty" is also added to the picture type.    Also, when it is the second IP coding mode, the<br>
10 information of "base", "possibility" or "no possibility" is added to the picture, and the information of "base", "possibility" or "no possibility" is added to the picture type as well.<br>
The variable length decoding unit 1617 outputs a fixed length quantized value by decoding (Huffman decoding) the coded signal<br>
15 outputted from the pre-processing unit 1610, The inverse quantization unit 1621 decodes the frequency component by inverse quantizing the quantized value outputted from the variable length decoding unit 1617. The inverse orthogonal transformation unit 1622 decodes the picture in the intra picture coding mode and the<br>
20 motion compensation error (residual image) that is a differential value of pixels in the inter picture coding mode by inverse orthogonal transforming the frequency component decoded by the inverse quantization unit 1621.<br>
The adding unit 1624 outputs the picture decoded by the<br>
25 Inverse orthogonal transformation unit 1622 as it is in the intra picture coding mode, and decodes the picture by adding the motion compensation error (residual image) decoded by the inverse orthogonal transformation unit 1622 and the motion compensation picture generated by the motion compensation unit 1643 in the Inter<br>
30 picture coding mode. The switching unit 1530 is comprised of a pair of switches 1631 and 1632 for switching their switching status synchronously   under   the   switch   ON/OFF   control   of   the   filter<br>
52<br>
 <br>
processing controliing unit 1660 for each picture, and incorporates the inter pixel filter 1640 into a loop, or omits it from 2 'oop, that Is,. makes the inter pixel filter 1640 skip its processing.<br>
The inter pixel filter 1640 performs spatial low pass filter 5 processing for the decoded picture outputted from the adding unit 1624 on a block by block basis when the switches 1631 and 1632 are ON to generate the decoded picture without block distortion or the like. For example, it calculates an average value between a pixel and neighboring pixels, and if the difference between the pixel and<br>
10 the neighboring pixel is within a predetermined range, it executes the processing of replacing every pixel around the block boundary with the calculated average value.<br>
The post-processing unit 1670 is equipped with a format converting unit for converting a format to a predetermined spatial<br>
15 resolution, a picture order restoring unit for restoring the order of the pictures which have been reordered depending on their picture types to the original order thereof, and the like, and outputs the decoded picture to a monitor or the like. The picture memory 1641 stores a plurality of the decoded pictures, with a possibility of being<br>
20 referred to, outputted from the switching unit 1630. The motion compensation unit 1643 performs the operation indicated by the motion vector and the block prediction type outputted from the pre-processing unit 1610 for the decoded pictures stored in the picture memory 1541 to generate motion compensation pictures.<br>
25 The priority determining unit 1650 has the same structure as the priority determining unit 1550 as shown in Fig. 15, and outputs the priority of a picture depending on the picture type outputted from the pre-processing unit 1610 and the base layer or the enhancement layer.    The filter processing controlling unit 1660 has the same<br>
30 structure as the filter processing controlling unit 1560 as shown in Fig. 16, and controls ON/OFF of the switches 1631 and 1632 of the switching unit 1630 depending on the priority outputted from the<br>
53<br>
 <br>
priority determining unit 1650 and the CPU operation rate obtained by monitoring.<br>
Next, the operation of the picture decoding apparatus 1600 structured as above will be explained.    Note that, for convenience 5     of explaining it together with the picture coding apparatus 1500, the case where the IPB coding mode is specified will be explained.<br>
In the Intra picture decoding mode for decoding a coded signal of an I-picture into a picture, the coded signal outputted from the pre-processing unit 1610 is decoded into a quantized value by<br>
10 variable length decoding by the variable length decoding unit 1617, expanded and decoded into a frequency component by inverse quantization by the inverse quantization unit 1621, and decoded into a picture (decoded picture) by inverse orthogonal transformation by the inverse orthogonal transformation unit 1622,<br>
15 When the switches 1631 and 1632 are turned ON under the control of the filter processing controlling unit 1660, this decoded picture is stored in the picture memory 1641 after being filter-processed for eliminating block distortion by the inter pixel filter 1640, and the order   of   the   picture   is   restored   to   the   original   one   in   the<br>
20 post-processing unit 1670, the format thereof is converted, and then outputted to a monitor or the like. On the contrary, when the switches 1631 and 1632 are turned OFF, the decoded picture is stored in the picture memory 1641 without being filter-processed, and the order of the picture is restored to the original one in the<br>
25 post-processing unit 1670, the format thereof is converted, and then outputted to a monitor or the like.<br>
Also, in the inter picture decoding mode for decoding coded signals of a P-picture and a B-picture into pictures, the coded signal outputted from the pre-processing  unit 1610 is decoded  into a<br>
30 quantized value by variable length decoding by the variable length decoding unit 1617, expanded and decoded into a frequency component by inverse orthogonal transformation  by the  inverse<br>
54<br>
 <br>
quantization unit 1621, and decoded into a motion compensation error (differential image) by inverse orthogonal transfcrrriation by the inverse orthogonal transformation unit 1622.<br>
On the other hand, the motion compensation picture 5 (predictive picture) is generated by the motion compensation unit 1643. Note that the motion compensation unit 1643 performs the operation indicated by the motion vector and the block prediction type outputted from the pre-processing unit 1610 for the differential pixel in the reference picture read out from the picture memory<br>
10     1641 to generate a motion compensation picture.<br>
And the adding unit 1624 adds the motion compensation error (differential image) and the motion compensation picture to decode the result into a picture. When the switches 1631 and 1632 are turned ON under the control of the filter processing controlling unit<br>
15 1660, after this decoded picture is filter-processed for eliminating block distortion by the inter pixel filter 1640, and then the order of the picture is restored in the post-processing unit 1670, the format thereof is converted, and the picture is outputted to a monitor or the like, and the decoded picture with a possibility of being referred to is<br>
20 stored in the picture memory 1641. On the other hand,, when the switches 1631 and 1632 are turned OFF, filter processing is not performed, but the order of the picture is restored to the original order in the post-processing unit 1670, the format thereof is converted, and the picture is outputted to a monitor or the like, and<br>
25 the decoded picture with a possibility of being referred to is stored in the picture memory 1641. Here, as is the case of the switches 1531 and 1532 of the picture coding apparatus 1500, the ON/OFF of the switches 1631 and 1632 are controlled by the filter processing controlling unit 1660.<br>
30	More specifically, the switch change processing unit in the<br>
filter processing controlling unit 1660 acquires the priority of a picture and the operation rate of a CPU included  in this picture<br>
55<br>
 <br>
decoding apparatus 1500 for every picture coding, determines the entry which is to be referred to on the table for the IPS cod'ng mode, reads out the right column of the entry, and judges whether the priority set for the picture type of the decoded picture is included in 5 the right column or not. If it is included in the right column, the switch change processing unit in the filter processing controlling unit 1660 outputs a signal of switching ON to the switches 1631 and 1632. Thereby, filter processing Is performed for the decoded picture, and the filter-processed decoded picture is stored in the<br>
10 picture memory 1641. On the other hand, if it is not included in the right column, the switch change processing unit in the filter processing controlling unit 1660 outputs a signal of switching OFF to the switches 1631 and 1632. Therefore, filter processing for the decoded picture is skipped, and the decoded picture is stored in the<br>
16    picture memory 1641 without being filter-processed.<br>
Such  control  is performed for each picture,  and decoded<br>
pictures   which   have   been  filter-processed  and   have   not   been<br>
filter-processed are stored in the picture memory 1641 in sequence.<br>
Accordingly, in picture decoding, inter pixel filter for noise<br>
20 elimination or the like is not always performed but the inter pixel filter is performed selectively when necessary, so if inter pixel filter is performed only for pictures having serious influence on picture quality, for example, even in a picture decoding apparatus with a low processing capability, it becomes possible to maintain the picture<br>
25 quality of the important pictures which are stored in the picture memory, reduce accumulation of block distortion in the decoded pictures which have been stored in the picture memory, improve prediction efficiency by the motion compensation unit, and reduce deterioration of picture quality more than the MPEG technique, and<br>
30 thus the great effect of improving picture quality can be achieved at a low bit rate.<br>
More specifically, in performing inter pixel filter, priority is<br>
56<br>
 <br>
given to a picture having great influence on other pictures, that is, an intra coded picture, a forward predictive coded pfctys, a base layer picture or the like^ so the effect of improving picture quality such as noise elimination can be achieved by an inter pixel filter 5 more effectively even with the same increase in processing load. Also, ON/OFF of filter processing can be controlled so as to make full use of the processing capability of the picture decoding apparatus, so the CPU is used with high efficiency,' and thus decoding for higher picture quality can be realized even with the<br>
10     same hardware resources.<br>
Note that the present invention can be realized not only as such a picture coding apparatus or a picture decoding apparatus, but also as a picture coding method or a picture decoding method for functioning characteristic units included in these apparatuses as<br>
15 steps, or as a program for having a computer execute those steps. And It is needless to say that the program can be distributed via a recording medium such as a CD-ROM or a transmission medium such as the Internet.<br>
20    (Fifth Embodiment)<br>
In addition, if a program for realizing the structure of the picture coding method or the picture decoding method as shown in each of the above-mentioned embodiments is recorded on a storage medium such as a flexible disk, it becomes possible to perform the 25 processing as shown in each of the above embodiments easily in an independent computer system.<br>
Fig.   20   is   an   illustration   showing   the   case   where   the processing is performed in a computer system using a flexible disk which stores the picture coding method or the picture decoding 30     method in the above-mentioned first and second embodiments.<br>
Fig. 20B shows the front view and the cross-sectional view of the appearance of a flexible disk, and the flexible disk, and Fig. 20A<br>
57<br>
 <br>
shows an example of a physical format of a flexible disk as a recording medium itself. A flexible disk FD is contained in a case F, a plurality of tracks Tr are formed concentrically on the surface of the disk in the radius direction from the periphery, and each track is<br>
5 divided into 16 sectors Se in the angular direction. Therefore, as for the flexible disk storing the above-mentioned program, the picture coding method as the program is recorded in an area allocated for it on the flexible disk FD.<br>
Fig. 20C shows the structure for recording and reproducing<br>
10 the program on and from the flexible disk FD. For recording the program on the flexible disk FD, the computer system Cs writes the picture coding method or the picture decoding method as the program on the flexible disk FD via a flexible disk drive. For constructing  the  above  picture coding   method  in  the  computer<br>
15 system by the program recorded on the flexible disk, the program is read out from the flexible disk via the flexible disk drive and transferred to the computer system.<br>
Note that the above explanation is made on the assumption that a recording medium is a flexible disk, but the same processing<br>
20 can also be performed using an optical disk. In addition, the recording medium is not limited to these, but any other mediums such as an IC card and a ROM cassette can be used in the same manner if a program can be recorded on them.<br>
Fig. 21~Fig. 24 are illustrations of the devices for performing<br>
25 the coding or decoding processing as shown in the above-mentioned embodiments, and the system using them.<br>
Fig. 21 is a block diagram showing the overall configuration of a content providing system exlOO for realizing content distribution service.   The area for providing communication service is divided<br>
30 into cells of desired size, and base stations exl07~exll0 which are fixed wireless stations are placed in respective cells. This content providing system exlOO is connected to a computer exlll, a PDA<br>
 <br>
(Personal Digital Assistant) exll2/ a camera exll3, and a mobile phone exll4 via the Internet exlOl, an Internet service provider exl02, and a telephone network exl04, for example. However, the content providing system exlOO is not limited to the combination as 5 shown in Fig. 21, and may be connected to a combination of any of them. Also, it may be connected directly to the telephone network exl04, not through the base stations exl07~exll0 which are the fixed wireless stations.<br>
The camera exll3 is a device such as a digital video camera<br>
10 capable of shooting moving pictures. The mobile phone may be any of a mobile phone of a PDC (Personal Digital Communications) system, a CDMA (Code Division Multiple Access) system, a W-CDMA (Wideband-Code Division Multiple Access) system or a GSM (Global System   for   Mobile   Communications)   system,   a   PHS   (Personal<br>
15     Handyphone System) and the like.<br>
Also, a streaming server exl03 is connected to the camera exllB via the base station exl09 and the telephone network exl04, which enables live distribution or the like using the camera exllS based on the coded data transmitted from the user.    Either the<br>
20 camera exllS or the server for transmitting the data may code the data shot by the camera. Also, the moving picture data shot by a camera exll6 may be transmitted to the streaming server exl 03 via the computer exlll. The camera exll6 is a device such as a digital camera capable of shooting still and moving pictures.    In this<br>
25 case, either the camera exll6 or the computer exlll may code the moving picture data. An LSI exll7 included in the computer exlll or the camera exll6 performs coding processing. Note that software for coding and decoding pictures may be integrated into any type of a storage medium (such as a CD-ROM, a flexible disk and<br>
30 3 hard disk) that is a recording medium which can be read by the computer exlll or the like. Furthermore, the camera-equipped mobile phone exll5 may transmit the moving picture data.    This<br>
59<br>
 <br>
moving picture data is the data coded by the LSI included in the mobile phone exllS.<br>
Fig. 22 is a diagram showing an example of the mobile phone exllS. The mobile phone exll5 has an antenna ex201 for sending 5 and receiving radio waves between the base station exllO, a camera unit ex203 such as a CCD camera capable of shooting video and still pictures^ a display unit ex202 such as a liquid crystal display for displaying the data obtained by decoding video shot by the camera unit ex203, video received by the antenna ex201, or the tike, a main<br>
10 body ex204 including a set of operation keys, a voice output unit ex208 such as a speaker for outputting voices, a voice input unit ex205 such as a microphone for inputting voices, a storage medium ex207 for storing coded or decoded data such as data of moving or still pictures shot by the camera and data of moving or still pictures<br>
15 of received e-mails, and a slot unit ex206 for attaching the storage medium ex207 into the mobile phone exll5. The storage medium ex207 Includes a flash memory element, a kind of EEPROM (Electrically Erasable and Programmable Read Only Memory) that is an electrically erasable and rewritable nonvolatile memory, in a<br>
20    plastic case such as an SD card.<br>
In this content providing system exlOO, contents (such as a music live video) shot by users using the camera exllB, the camera 6x116 or the like are coded in the same manner as the above embodiments and transmitted to the streaming server exl03, while<br>
25 the streaming server exl03 makes stream distribution of the content data to the clients at their request. The clients include the computer exlH, the PDA exll2, the camera exll3, the mobile phone exll4 and so on capable of decoding the above-mentioned coded data.   The content providing system exlOO is a system in<br>
30 which, the clients can thus receive and reproduce the coded data, and further can receive, decode and reproduce the data in real time so as to realize personal broadcasting.<br>
60<br>
 <br>
Furtiier, the mobile phone exll5 will be explained with reference to Fig. 23. In the mobile phone exil5, a rriSin control unit ex311 for overall controlling each unit of the display unit ex202 and the main body ex204 is connected to a power supply circuit unit 5 ex310, an operation input control unit ex304, a picture coding unit ex312, a camera Interface unit ex303, an LCD (Liquid Crystal Display) control unit ex302, a picture decoding unit ex309, a multiplex/demultiplex unit ex308, a record/reproduce unit ex307, a modem circuit unit ex306 and a voice processing unit ex305 to each<br>
10 other via a synchronous bus ex313. When a call-end key or a power key is turned ON by a user's operation, the power supply circuit unit ex310 supplies respective units with power from a battery pack so as to activate the camera-equipped digital mobile phone 6x115 for a ready state.    In the mobile phone exll5, under<br>
15 the control of the main control unit ex311 including a CPU, ROM and RAM, the voice processing unit ex305 converts the voice signals received by the voice input unit ex205 in conversation mode into digital voice data, the modem circuit unit ex306 performs spread spectrum processing of the digital voice data, and the send/receive<br>
20 circuit unit ex301 performs digital-to-analog conversion and frequency transformation of the data, so as to transmit it via the antenna ex201. Also, in the mobile phone exll5, the data received by the antenna ex201 in conversation mode is amplified and performed   of   frequency   transformation   and   analog-to-digital<br>
25 conversion, the modem circuit unit ex306 performs inverse spread spectrum processing of the data, and the voice processing unit ex305 converts it into analog voice data, so as to output the result via the voice output unit ex208,. Furthermore, when transmitting an e-mail in data communication mode, the text data of the e-mail<br>
30 inputted by operating the operation keys on the main body ex204 is sent out to the main control unit ex311 via the operation input control  unit ex304.    In the  main  control  unit ex311, after the<br>
61<br>
 <br>
modem circuit unit ex306 performs spread spectrum processing of the text data and the send/receive circuit unit ex301 performs digital-to-analog conversion and frequency transformation of it, the result is transmitted to the base station exUO via the antenna 5     ex201.<br>
When picture data is transmitted in data communication mode, the picture data shot by the camera unit ex203 is provided to the picture coding unit ex312 via the camera interface unit ex303. When the picture data is not transmitted, the picture data shot by<br>
10 the camera unit ex203 can also be displayed directly on the display unit 202 via the camera interface unit ex303 and the LCD control unit ex302.<br>
The picture coding unit ex312 compress and codes the picture data provided from the camera unit ex203 by the coding method as<br>
15 shown in the above-mentioned embodiments so as to transform it into coded picture data, and sends it out to the multiplex/demultiplex unit ex308. At this time, \.he mobile phone exll5 sends out the voices received by the voice input unit ex205 during    picture    pickup    by    the    camera    unit    ex203    to    the<br>
20 multiplex/demultiplex unit ex308 as digital voice data via the voice processing unit ex305.<br>
The multiplex/demultiplex unit ex308 multiplexes the coded picture data provided from the picture coding unit ex312 and the voice data  provided from the voice processing unit ex305 by a<br>
25 predetermined method, the modem circuit unit ex306 performs spread spectrum processing of the resulting multiplexed data, and the send/receive circuit unit ex301 performs digital-to-analog conversion and frequency transformation of the result for transmitting via the antenna ex201.<br>
30	As for receiving data of a moving picture file which is linked to<br>
a Website or the like in data communication mode, the modem circuit unit ex306 performs inverse spread spectrum processing of<br>
62<br>
 <br>
the data received from the base station exllO via the antenna ex201, and sends out the resulting multiplexed data to the multiplex/demultiplex unit ex308.<br>
In order to decode the multiplexed data received via the 5 antenna ex201, the multiplex/demultiplex unit ex308 demultiplexes the multiplexed data into coded picture data and voice data, and provides the coded picture data to the picture decoding unit ex309 and the voice data to the voice processing unit ex305 respectively via the synchronous bus ex313.<br>
10	Next, the picture decoding  unit ex309 decodes the coded<br>
picture data by the decoding method paired with the coding method as shown in the above-mentioned embodiments, so as to generate reproduced moving picture data, and provides this data to the display unit ex202 via the LCD control unit ex302, and thus moving<br>
15 picture data included in a moving picture file linked to a Website, for instance, is displayed. At the same time, the voice processing unit ex305 converts the voice data Into analog voice data, and provides this data to the voice output unit ex208, and thus voice data included in a moving picture file linked to a Website, for instance, is<br>
20    reproduced.<br>
The present invention is not limited to the above-mentioned system- Ground-based or satellite digital broadcasting has been in the news lately, and at least either the picture coding method or the picture decoding method in the above-mentioned embodiments can<br>
25 be incorporated into such a digital broadcasting system as shown in Fig. 24. More specifically, a coded bit stream of video information is transmitted from a broadcast station ex409 to or communicated with a broadcast satellite ex410 via radio waves. Upon receipt of it, the broadcast satellite ex4i0 transmits radio waves for broadcasting,<br>
30 a home antenna ex406 with a satellite broadcast reception function receives the radio waves, and an apparatus such as a television (receiver) ex401 or a set top box (STB) ex407 decodes the coded bit<br>
63<br>
 <br>
stream for reproduction. The picture decoding apparatus as shown in the above-mentioned embodiments can be impien-iented in the reproducing apparatus ex403 for reading a coded bit stream recorded on a storage medium ex402 that is a recording medium 5 such as a CD and DVD and decoding it. In this case, the reproduced video signals are displayed on a monitor ex404. It is also conceived to implement the picture decoding apparatus in the set top box ex407 connected to a cable ex405 for a cable television or the antenna ex406 for satellite and/or ground-based broadcasting so as<br>
10 to reproduce them on a monitor ex408 of the television ex401. The picture decoding apparatus may be incorporated into the television, not in the set top box. Or, a car ex412 having an antenna ex411 can receive signals from the satellite ex410, the base station exl07 or the like for reproducing moving pictures on a display apparatus<br>
15     such as a car navigation device ex413 or the like in the car ex412.<br>
Furthermore, the picture coding apparatus as shown in the<br>
above-mentioned    embodiments   can   code   picture   signals   for<br>
recording on a recording medium.    As a concrete example, there is<br>
a recorder ex420 such as a DVD recorder for recording picture<br>
20 signals on a DVD disk ex421 and a disk recorder for recording them on a hard disk. They can also be recorded on an SD card ex422. If the recorder ex420 includes the picture decoding apparatus as shown in the above-mentioned embodiments, the picture signals recorded on the DVD disk ex421  or the SD card ex422 can be<br>
25     reproduced for display on the monitor ex408.<br>
Note that although the structure of the car navigation device 6x413 is same as that of the mobile phone exll5 as shown in Fig. 23, for example, the structure without the camera  unit ex203, the camera interface unit ex303 and the picture coding unit ex312, out<br>
30 of the units as shown in Fig. 23, is conceivable. The same applies to the computer exlll, the television (receiver) ex401 and others.<br>
In addition, three types of implementations can be conceived<br>
64<br>
 <br>
for a terminal such as the above-mentioned mobile phone exll4; a sending/receiving terminal equipped with both an encoder and a decoder, a sending terminal equipped with an encoder only, and a receiving terminal equipped with a decoder only.<br>
As described above, it becomes possible to realize any type of apparatus or system as shown in the present embodiment by implementing the coding method and decoding method as shown in the present specification.<br>
 <br>
10<br>
15<br>
 <br>
Industrial Applicability<br>
The picture coding apparatus according to the present invention is useful as a picture coding apparatus which is included in a personal computer, a PDA and a mobile phone with a communication function.<br>
Also, the picture decoding apparatus according to the present invention is useful as a picture decoding apparatus which is included in a personal computer, a PDA and a mobile phone with a communication function.<br>
 <br>
<br>
 <br>
20<br>
 <br>
65<br>
<br>
<br>
WE CLAIM:<br>
1.	A method for decoding coded data, said method comprising:<br>
decoding coded data (Bitstream4) to obtain a decoded picture (Recon) with or without using a predictive picture (Pred), wherein the predictive picture (Pred) is generated by referring to a reference picture (Ref); characterized by<br>
filtering the decoded picture (Recon), dependent upon information (FilterTypeS) indicating whether the decoding of the coded data (Bitstream4) was performed with using the predictive picture (Pred) or without using the predictive picture (Pred); and<br>
storing the decoded picture (FilteredlmgS), which is filtered, for use as a reference picture (Ref) to decode a following coded data (Bitstream4).<br>
2.	The decoding method according to claim 1,<br>
wherein the information (FilterTypeS) indicating whether the decoding of the coded data was performed with or without using the predictive picture (Pred) comprises at least one of a slice coding type indicating whether the coding with or without the predictive picture (Pred) is performed per slice, and a picture coding type indicating whether the coding with or without the predictive picture (Pred) is performed per picture.<br>
3.	The decoding method according to claim 1,<br>
wherein the information (FilterTypeS) indicating whether the decoding of the coded data was performed with or without using the predictive picture (Pred) comprises at least one of a macroblock coding type indicating whether the coding with or without the predictive picture (Pred) is performed per macroblock, and a block coding type indicating whether the coding with or without the predictive picture (Pred) is performed per block.<br>
66<br>
 <br>
4.	The decoding method according to claim 1,<br>
wherein the decoding of the coded data with using the predictive picture (Pred) includes at least one of predictive decoding and bi-predictive decoding, and<br>
wherein the information indicating whether the decoding of the coded data was performed with or without using the predictive picture (Pred) comprises information indicating at least one of the following: the decoding was performed without using the predictive picture, the predictive decoding was performed with using the predictive picture (Pred), and the bi-predictive decoding was performed with using the predictive picture (Prod).<br>
5.	The decoding method according to claim 1,<br>
wherein the information indicating whether the decoding of the coded data was performed with or without using the predictive picture is exfracted from a slice header (902), and<br>
wherein the decoded picture (Recon) is fiUered per slice, dependent upon the extracted information (FilterTypeS).<br>
6.	The decoding method according to claim 1,<br>
wherein the information indicating whether the decoding of the coded data was performed with or without using the predictive picture (Pred) is extracted from a picture header, and<br>
wherein the decoded picture (Recon) is filtered per picture, dependent upon the extracted information (FilterTypeS).<br>
67<br>
 <br>
7.       The decoding method according to Claim 1,<br>
wherein a smoothing level of the filtering performed when the decoded picture is obtained by decoding the coded data without using the predictive picture (Pred) is higher than a smoothing level of the filtering performed when the decoded picture (Recon) is obtained by decoding the coded data with using the predictive picture (Pred).<br>
 <br>
</td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=rj53v1xsk/deyn3XbJ+W/Q==&amp;amp;loc=egcICQiyoj82NGgGrC5ChA==" target="_blank" style="word-wrap:break-word;">http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=rj53v1xsk/deyn3XbJ+W/Q==&amp;amp;loc=egcICQiyoj82NGgGrC5ChA==</a></p>
		<br>
		<div class="pull-left">
			<a href="279827-system-and-process-for-high-density-low-energy-plasma-enhanced-vapor-phase-epitaxy.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="279829-reerigerator.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>279828</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>5295/CHENP/2009</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>05/2017</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>03-Feb-2017</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>31-Jan-2017</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>08-Sep-2009</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>PANASONIC INTELLECTUAL PROPERTY CORPORATION OF AMERICA</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>20000 MARINER AVENUE, SUITE 200, TORRANCE, CALIFORNIA 90503.</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>HAGAI, MAKOTO</td>
											<td>22-402, OEDA MINAMIMACHI, 8-CHOME, MORIGUCHI-SHI, OSAKA 570-0051</td>
										</tr>
										<tr>
											<td>2</td>
											<td>KADONO, SHINYA</td>
											<td>ROOM 204, 7-25, KOUSHIENGUCHI 1-CHOME, NISHINOMIYA-SHI, HYOGO 663-8113</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>G06T9/00</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/JP02/09244</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2002-09-11</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>2001-276280</td>
									<td>2001-09-12</td>
								    <td>Japan</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/279828-method-for-decoding-coded-data by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 04 Apr 2024 23:00:45 GMT -->
</html>
