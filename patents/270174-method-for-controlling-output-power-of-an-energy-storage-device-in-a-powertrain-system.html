<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/270174-method-for-controlling-output-power-of-an-energy-storage-device-in-a-powertrain-system by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 05:19:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 270174:METHOD FOR CONTROLLING OUTPUT POWER OF AN ENERGY STORAGE DEVICE IN A POWERTRAIN SYSTEM</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">METHOD FOR CONTROLLING OUTPUT POWER OF AN ENERGY STORAGE DEVICE IN A POWERTRAIN SYSTEM</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>A method for controlling a powertrain system includes monitoring a state-of-charge of the energy storage device and determining a first set of electric power limits and a second set of electric power limits based on the state-of-charge of the energy storage device. The method further includes providing a power range for opportunity charging and discharging of the energy storage device based on the first set of electric power limits. The method further includes providing a power range for controlling output power of the energy storage device based on the second set of electric power limits.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>METHOD FOR CONTROLLING OUTPUT POWER OF AN ENERGY<br>
STORAGE DEVICE IN A POWERTRAIN SYSTEM<br>
CROSS REFERENCE TO RELATED APPLICATION<br>
[0001] This application claims the benefit of U.S. Provisional Application<br>
No. 60/985,252 filed on 11/04/2007 which is hereby incorporated herein by<br>
reference.<br>
TECHNICAL FIELD<br>
[0002] This disclosure is related to managing electric power within<br>
owertrain systems.<br>
BACKGROUND<br>
[0003] The statements in this section merely provide background<br>
information related to the present disclosure and may not constitute prior art.<br>
[0004] Known powertrain architectures include torque-generative devices,<br>
including internal combustion engines and electric machines, which transmit<br>
torque through a transmission device to an output member. One exemplary<br>
powertrain includes a two-mode, compound-split, electro-mechanical<br>
transmission which utilizes an input member for receiving motive torque from<br>
a prime mover power source, preferably an internal combustion engine, and an<br>
output member. The output member can be operatively connected to a<br>
driveline for a motor vehicle for transmitting tractive torque thereto. Electric<br>
machines, operative as motors or generators, generate a torque input to the<br>
transmission, independently of a torque input from the internal combustion<br><br>
engine. The electric machines may transform vehicle kinetic energy,<br>
transmitted through the vehicle driveline, to electrical energy that is storable in<br>
an electrical energy storage device. A control system monitors various inputs<br>
from the vehicle and the operator and provides operational control of the<br>
powertrain, including controlling transmission operating state and gear<br>
shifting, controlling the torque-generative devices, and regulating the electrical<br>
power interchange among the electrical energy storage device and the electric<br>
machines to manage outputs of the transmission, including torque and<br>
rotational speed.<br>
SUMMARY<br>
[0005] A powertrain system includes an engine, a torque generating<br>
machine, a transmission and an energy storage device connected to the torque<br>
generating machine wherein the transmission is operative to transfer power<br>
between an output member and the engine and the torque generating machine.<br>
A method for controlling the powertrain system includes monitoring an<br>
operator torque request and a state-of-charge of the energy storage device. A<br>
first set of electric power limits and a second set of electric power limits are<br>
determined based on the state-of-charge of the energy storage device. A<br>
power range for opportunity charging and discharging of the energy storage<br>
device is provided based on the first set of electric power limits. A power<br>
range for controlling output power of the energy storage device based on the<br>
second set of electric power limits is determined.<br><br>
BRIEF DESCRIPTION OF THE DRAWINGS<br>
[0006] One or more embodiments will now be described, by way of<br>
example, with reference to the accompanying drawings, in which:<br>
[0007] Fig. 1 is a schematic diagram of an exemplary powertrain, in<br>
accordance with the present disclosure;<br>
[0008] Fig. 2 is a schematic diagram of an exemplary architecture for a<br>
control system and powertrain, in accordance with the present disclosure;<br>
[0009] Figs. 3 and 4 are schematic flow diagrams of a control system<br>
architecture for controlling and managing torque in a powertrain system, in<br>
accordance with the present disclosure;<br>
[0010] Fig. 5 is a graphical representation depicting operating ranges of an<br>
energy storage device, in accordance with an exemplary embodiment of the<br>
present disclosure; and<br>
[0011] Figs 6-9 are graphical representations depicting torque levels within a<br>
powertrain system and output powers of an energy storage device in<br>
accordance with exemplary embodiments of the present disclosure.<br>
DETAILED DESCRIPTION<br>
[0012] Referring now to the drawings, wherein the showings are for the<br>
purpose of illustrating certain exemplary embodiments only and not for the<br>
purpose of limiting the same, Figs. 1 and 2 depict an exemplary hybrid<br>
powertrain. The exemplary hybrid powertrain in accordance with the present<br>
disclosure is depicted in Fig. 1, comprising a two-mode, compound-split,<br>
electro-mechanical hybrid transmission 10 operatively connected to an engine<br>
14 and torque machines comprising first and second electric machines ('MG-<br><br>
A') 56 and ('MG-B') 72 in this embodiment. The engine 14 and first and<br>
second electric machines 56 and 72 each generate power which can be<br>
transferred to the transmission 10. The power generated by the engine 14 and<br>
the first and second electric machines 56 and 72 and transferred to the<br>
transmission 10 is described in terms of input and motor torques, referred to<br>
herein as T1, TA, and TB respectively, and speed, referred to herein as N1, NA,<br>
and NB, respectively.<br>
[0013] The exemplary engine 14 comprises a multi-cylinder internal<br>
combustion engine selectively operative in several states to transfer torque to<br>
the transmission 10 via an input shaft 12, and can be either a spark-ignition or<br>
a compression-ignition engine. The engine 14 includes a crankshaft (not<br>
shown) operatively coupled to the input shaft 12 of the transmission 10. A<br>
rotational speed sensor 11 monitors rotational speed of the input shaft 12.<br>
Power output from the engine 14, comprising rotational speed and engine<br>
torque, can differ from the input speed N1 and the input torque T1 to the<br>
transmission 10 due to placement of torque-consuming components on the<br>
input shaft 12 between the engine 14 and the transmission 10, e.g., a hydraulic<br>
pump (not shown) and/or a torque management device (not shown).<br>
[0014] The exemplary transmission 10 comprises three planetary-gear sets<br>
24, 26 and 28, and four selectively engageable torque-transferring devices, i.e.,<br>
clutches C1 70, C2 62, C3 73, and C4 75. As used herein, clutches refer to<br>
any type of friction torque transfer device including single or compound plate<br>
clutches or packs, band clutches, and brakes, for example. A hydraulic control<br>
circuit 42, preferably controlled by a transmission control module (hereafter<br>
'TCM') 17, is operative to control clutch states. Clutches C2 62 and C4 75<br><br>
preferably comprise hydraulically-applied rotating friction clutches. Clutches<br>
C1 70 and C3 73 preferably comprise hydraulically-controlled stationary<br>
devices that can be selectively grounded to a transmission case 68. Each of<br>
the clutches C1 70, C2 62, C3 73, and C4 75 is preferably hydraulically<br>
applied, selectively receiving pressurized hydraulic fluid via the hydraulic<br>
control circuit 42.<br>
[0015] The first and second electric machines 56 and 72 preferably comprise<br>
three-phase AC machines, each including a stator (not shown) and a rotor (not<br>
shown), and respective resolvers 80 and 82. The motor stator for each<br>
machine is grounded to an outer portion of the transmission case 68, and<br>
includes a stator core with coiled electrical windings extending therefrom.<br>
The rotor for the first electric machine 56 is supported on a hub plate gear that<br>
is operatively attached to shaft 60 via the second planetary gear set 26. The<br>
rotor for the second electric machine 72 is fixedly attached to a sleeve shaft<br>
hub 66.<br>
[0016] Each of the resolvers 80 and 82 preferably comprises a variable<br>
reluctance device including a resolver stator (not shown) and a resolver rotor<br>
(not shown). The resolvers 80 and 82 are appropriately positioned and<br>
assembled on respective ones of the first and second electric machines 56 and<br>
72. Stators of respective ones of the resolvers 80 and 82 are operatively<br>
connected to one of the stators for the first and second electric machines 56<br>
and 72. The resolver rotors are operatively connected to the rotor for the<br>
corresponding first and second electric machines 56 and 72. Each of the<br>
resolvers 80 and 82 is signally and operatively connected to a transmission<br>
power inverter control module (hereafter 'TPIM') 19, and each senses and<br><br>
monitors rotational position of the resolver rotor relative to the resolver stator,<br>
thus monitoring rotational position of respective ones of first and second<br>
electric machines 56 and 72. Additionally, the signals output from the<br>
resolvers 80 and 82 are interpreted to provide the rotational speeds for first<br>
and second electric machines 56 and 72, i.e., NA and NB, respectively.<br>
[0017] The transmission 10 includes an output member 64, e.g. a shaft,<br>
which is operably connected to a driveline 90 for a vehicle (not shown), to<br>
provide output power to the driveline 90 that is transferred to vehicle wheels<br>
93, one of which is shown in Fig. 1. The output power at the output member<br>
64 is characterized in terms of an output rotational speed No and an output<br>
torque To. A transmission output speed sensor 84 monitors rotational speed<br>
and rotational direction of the output member 64. Each of the vehicle wheels<br>
93 is preferably equipped with a sensor 94 adapted to monitor wheel speed,<br>
VSS-WHL, the output of which is monitored by a control module of a distributed<br>
control module system described with respect to Fig. 2, to determine vehicle<br>
speed, and absolute and relative wheel speeds for braking control, traction<br>
control, and vehicle acceleration management.<br>
[0018] The input torque from the engine 14 and the motor torques from the<br>
first and second electric machines 56 and 72 (T1, TA, and TB respectively) are<br>
generated as a result of energy conversion from fuel or electrical potential<br>
stored in an electrical energy storage device (hereafter 'ESD') 74. The ESD<br>
74 is high voltage DC-coupled to the TPIM 19 via DC transfer conductors 27.<br>
The transfer conductors 27 include a contactor switch 38. When the contactor<br>
switch 38 is closed, under normal operation, electric current can flow between<br>
the ESD 74 and the TPIM 19. When the contactor switch 38 is opened electric<br><br>
current flow between the ESD 74 and the TPIM 19 is interrupted. The TPIM<br>
19 transmits electrical power to and from the first electric machine 56 by<br>
transfer conductors 29, and the TPIM 19 similarly transmits electrical power<br>
to and from the second electric machine 72 by transfer conductors 31 to meet<br>
the torque commands for the first and second electric machines 56 and 72 in<br>
response to the motor torques TA and TB. Electrical current is transmitted to<br>
and from the ESD 74 in accordance with whether the ESD 74 is being charged<br>
or discharged.<br>
[0019] The TPIM 19 includes the pair of power inverters (not shown) and<br>
respective motor control modules (not shown) configured to receive the torque<br>
commands and control inverter states therefrom for providing motor drive or<br>
regeneration functionality to meet the commanded motor torques TA and TB.<br>
The power inverters comprise known complementary three-phase power<br>
electronics devices, and each includes a plurality of insulated gate bipolar<br>
transistors (not shown) for converting DC power from the ESD 74 to AC<br>
power for powering respective ones of the first and second electric machines<br>
56 and 72, by switching at high frequencies. The insulated gate bipolar<br>
transistors form a switch mode power supply configured to receive control<br>
commands. There is typically one pair of insulated gate bipolar transistors for<br>
each phase of each of the three-phase electric machines. States of the<br>
insulated gate bipolar transistors are controlled to provide motor drive<br>
mechanical power generation or electric power regeneration functionality.<br>
The three-phase inverters receive or supply DC electric power via DC transfer<br>
conductors 27 and transform it to or from three-phase AC power, which is<br>
conducted to or from the first and second electric machines 56 and 72 for<br><br>
operation as motors or generators via transfer conductors 29 and 31<br>
respectively.<br>
[0020] Fig. 2 is a schematic block diagram of the distributed control module<br>
system. The elements described hereinafter comprise a subset of an overall<br>
vehicle control architecture, and provide coordinated system control of the<br>
exemplary hybrid powertrain described in Fig. 1. The distributed control<br>
module system synthesizes pertinent information and inputs, and executes<br>
algorithms to control various actuators to meet control objectives, including<br>
objectives related to fuel economy, emissions, performance, drivability, and<br>
protection of hardware, including batteries of ESD 74 and the first and second<br>
electric machines 56 and 72. The distributed control module system includes<br>
an engine control module (hereafter 'ECM') 23, the TCM 17, a battery pack<br>
control module (hereafter 'BPCM') 21, and the TPIM 19. A hybrid control<br>
module (hereafter 'HCP') 5 provides supervisory control and coordination of<br>
the ECM 23, the TCM 17, the BPCM 21, and the TPIM 19. A user interface<br>
('UI') 13 is operatively connected to a plurality of devices through which a<br>
vehicle operator controls or directs operation of the electro-mechanical hybrid<br>
powertrain. The devices include an accelerator pedal 113 ('AP'), an operator<br>
brake pedal 112 ('BP'), a transmission gear selector 114 ('PRNDL'), and a<br>
vehicle speed cruise control (not shown). The transmission gear selector 114<br>
may have a discrete number of operator-selectable positions, including the<br>
rotational direction of the output member 64 to enable one of a forward and a<br>
reverse direction.<br>
[0021] The aforementioned control modules communicate with other control<br>
modules, sensors, and actuators via a local area network (hereafter 'LAN') bus<br><br>
6. The LAN bus 6 allows for structured communication of states of operating<br>
parameters and actuator command signals between the various control<br>
modules. The specific communication protocol utilized is application-specific.<br>
The LAN bus 6 and appropriate protocols provide for robust messaging and<br>
multi-control module interfacing between the aforementioned control<br>
modules, and other control modules providing functionality including e.g.,<br>
antilock braking, traction control, and vehicle stability. Multiple<br>
communications buses may be used to improve communications speed and<br>
provide some level of signal redundancy and integrity. Communication<br>
between individual control modules can also be effected using a direct link,<br>
e.g., a serial peripheral interface ('SPI') bus (not shown).<br>
[0022] The HCP 5 provides supervisory control of the hybrid powertrain,<br>
serving to coordinate operation of the ECM 23, TCM 17, TPIM 19, and<br>
BPCM 21. Based upon various input signals from the user interface 13 and<br>
the hybrid powertrain, including the ESD 74, the HCP 5 determines an<br>
operator torque request, an output torque command, an engine input torque<br>
command, clutch torque(s) for the applied torque-transfer clutches C1 70, C2<br>
62, C3 73, C4 75 of the transmission 10, and the motor torques TA and TB for<br>
the first and second electric machines 56 and 72. The TCM 17 is operatively<br>
connected to the hydraulic control circuit 42 and provides various functions<br>
including monitoring various pressure sensing devices (not shown) and<br>
generating and communicating control signals to various solenoids (not<br>
shown) thereby controlling pressure switches and control valves contained<br>
within the hydraulic control circuit 42.<br><br>
[0023] The ECM 23 is operatively connected to the engine 14, and functions<br>
to acquire data from sensors and control actuators of the engine 14 over a<br>
plurality of discrete lines, shown for simplicity as an aggregate bi-directional<br>
interface cable 35. The ECM 23 receives the engine input torque command<br>
from the HCP 5. The ECM 23 determines the actual engine input torque, T1,<br>
provided to the transmission 10 at that point in time based upon monitored<br>
engine speed and load, which is communicated to the HCP 5. The ECM 23<br>
monitors input from the rotational speed sensor 11 to determine the engine<br>
input speed to the input shaft 12, which translates to the transmission input<br>
speed, N1. The ECM 23 monitors inputs from sensors (not shown) to<br>
determine states of other engine operating parameters including, e.g., a<br>
manifold pressure, engine coolant temperature, ambient air temperature, and<br>
ambient pressure. The engine load can be determined, for example, from the<br>
manifold pressure, or alternatively, from monitoring operator input to the<br>
accelerator pedal 113. The ECM 23 generates and communicates command<br>
signals to control engine actuators, including, e.g., fuel injectors, ignition<br>
modules, and throttle control modules, none of which are shown.<br>
[0024] The TCM 17 is operatively connected to the transmission 10 and<br>
monitors inputs from sensors (not shown) to determine states of transmission<br>
operating parameters. The TCM 17 generates and communicates command<br>
signals to control the transmission 10, including controlling the hydraulic<br>
control circuit 42. Inputs from the TCM 17 to the HCP 5 include estimated<br>
clutch torques for each of the clutches, i.e., C1 70, C2 62, C3 73, and C4 75,<br>
and rotational output speed, No, of the output member 64. Other actuators and<br>
sensors may be used to provide additional information from the TCM 17 to the<br><br>
HCP 5 for control purposes. The TCM 17 monitors inputs from pressure<br>
switches (not shown) and selectively actuates pressure control solenoids (not<br>
shown) and shift solenoids (not shown) of the hydraulic control circuit 42 to<br>
selectively actuate the various clutches C1 70, C2 62, C3 73, and C4 75 to<br>
achieve various transmission operating range states, as described hereinbelow.<br>
[0025] The BPCM 21 is signally connected to sensors (not shown) to<br>
monitor the ESD 74, including states of electrical current and voltage<br>
parameters, to provide information indicative of parametric states of the<br>
batteries of the ESD 74 to the HCP 5. The parametric states of the batteries<br>
preferably include battery state-of-charge, battery voltage, battery temperature,<br>
and available battery power, referred to as a range PBAT_MIN to PBAT_MAX-<br>
[0026] A brake control module (hereafter 'BrCM') 22 is operatively<br>
connected to friction brakes (not shown) on each of the vehicle wheels 93.<br>
The BrCM 22 monitors the operator input to the brake pedal 112 and<br>
generates control signals to control the friction brakes and sends a control<br>
signal to the HCP 5 to operate the first and second electric machines 56 and 72<br>
based thereon.<br>
[0027] Each of the control modules ECM 23, TCM 17, TPIM 19, BPCM 21,<br>
and BrCM 22 is preferably a general-purpose digital computer comprising a<br>
microprocessor or central processing unit, storage mediums comprising read<br>
only memory ('ROM'), random access memory ('RAM'), electrically<br>
programmable read only memory ('EPROM'), a high speed clock, analog to<br>
digital ('A/D') and digital to analog ('D/A') circuitry, and input/output<br>
circuitry and devices ('I/O') and appropriate signal conditioning and buffer<br>
circuitry. Each of the control modules has a set of control algorithms,<br><br>
comprising resident program instructions and calibrations stored in one of the<br>
storage mediums and executed to provide the respective functions of each<br>
computer. Information transfer between the control modules is preferably<br>
accomplished using the LAN bus 6 and SPI buses. The control algorithms are<br>
executed during preset loop cycles such that each algorithm is executed at<br>
least once each loop cycle. Algorithms stored in the non-volatile memory<br>
devices are executed by one of the central processing units to monitor inputs<br>
from the sensing devices and execute control and diagnostic routines to<br>
control operation of the actuators, using preset calibrations. Loop cycles are<br>
executed at regular intervals, for example each 3.125, 6.25, 12.5, 25 and 100<br>
milliseconds during ongoing operation of the hybrid powertrain.<br>
Alternatively, algorithms may be executed in response to the occurrence of an<br>
event.<br>
[0028] The exemplary hybrid powertrain selectively operates in one of<br>
several operating range states that can be described in terms of an engine state<br>
comprising one of an engine-on state ('ON') and an engine-off state ('OFF'),<br>
and a transmission state comprising a plurality of fixed gears and continuously<br>
variable operating modes, described with reference to Table 1, below.<br><br><br><br>
[0029] Each of the transmission operating range states is described in the<br>
table and indicates which of the specific clutches C1 70, C2 62, C3 73, and C4<br>
75 are applied for each of the operating range states. A first continuously<br>
variable mode, i.e., EVT Mode 1, or Ml, is selected by applying clutch C1 70<br>
only in order to "ground" the outer gear member of the third planetary gear set<br>
28. The engine state can be one of ON ('M1_Eng_On') or OFF<br>
('M1_Eng_Off'). A second continuously variable mode, i.e., EVT Mode 2, or<br>
M2, is selected by applying clutch C2 62 only to connect the shaft 60 to the<br>
carrier of the third planetary gear set 28. The engine state can be one of ON<br>
('M2_Eng_On') or OFF ('M2_Eng_Off'). For purposes of this description,<br>
when the engine state is OFF, the engine input speed is equal to zero<br>
revolutions per minute ('RPM'), i.e., the engine crankshaft is not rotating. A<br>
fixed gear operation provides a fixed ratio operation of input-to-output speed<br>
of the transmission 10, i.e., N1/NO. A first fixed gear operation ('G1') is<br>
selected by applying clutches C1 70 and C4 75. A second fixed gear operation<br><br><br>
('G2') is selected by applying clutches C1 70 and C2 62. A third fixed gear<br>
operation ('G3') is selected by applying clutches C2 62 and C4 75. A fourth<br>
fixed gear operation ('G4') is selected by applying clutches C2 62 and C3 73.<br>
The fixed ratio operation of input-to-output speed increases with increased<br>
fixed gear operation due to decreased gear ratios in the planetary gears 24, 26,<br>
and 28. The rotational speeds of the first and second electric machines 56 and<br>
72, NA and NB respectively, are dependent on internal rotation of the<br>
mechanism as defined by the clutching and are proportional to the input speed<br>
measured at the input shaft 12.<br>
[0030] In response to operator input via the accelerator pedal 113 and brake<br>
pedal 112 as captured by the user interface 13, the HCP 5 and one or more of<br>
the other control modules determine torque commands to control the torque<br>
generative devices comprising the engine 14 and first and second electric<br>
machines 56 and 72 to meet the operator torque request at the output member<br>
64 and transferred to the driveline 90. Based upon input signals from the user<br>
interface 13 and the hybrid powertrain including the ESD 74, the HCP 5<br>
determines the operator torque request, a commanded output torque from the<br>
transmission 10 to the driveline 90, an input torque from the engine 14, clutch<br>
torques for the torque-transfer clutches C1 70, C2 62, C3 73, C4 75 of the<br>
transmission 10; and the motor torques for the first and second electric<br>
machines 56 and 72, respectively, as is described hereinbelow.<br>
[0031] Final vehicle acceleration can be affected by other factors including,<br>
e.g., road load, road grade, and vehicle mass. The operating range state is<br>
determined for the transmission 10 based upon a variety of operating<br>
characteristics of the hybrid powertrain. This includes the operator torque<br><br>
request communicated through the accelerator pedal 113 and brake pedal 112<br>
to the user interface 13 as previously described. The operating range state<br>
may be predicated on a hybrid powertrain torque demand caused by a<br>
command to operate the first and second electric machines 56 and 72 in an<br>
electrical energy generating mode or in a torque generating mode. The<br>
operating range state can be determined by an optimization algorithm or<br>
routine which determines optimum system efficiency based upon operator<br>
demand for power, battery state-of-charge, and energy efficiencies of the<br>
engine 14 and the first and second electric machines 56 and 72. The control<br>
system manages torque inputs from the engine 14 and the first and second<br>
electric machines 56 and 72 based upon an outcome of the executed<br>
optimization routine, and system efficiencies are optimized thereby, to manage<br>
fuel economy and battery charging. Furthermore, operation can be determined<br>
based upon a fault in a component or system. The HCP 5 monitors the torque-<br>
generative devices, and determines the power output from the transmission 10<br>
required in response to the desired output torque at output member 64 to meet<br>
the operator torque request. As should be apparent from the description<br>
above, the ESD 74 and the first and second electric machines 56 and 72 are<br>
electrically-operatively coupled for power flow therebetween. Furthermore,<br>
the engine 14, the first and second electric machines 56 and 72, and the<br>
electro-mechanical transmission 10 are mechanically-operatively coupled to<br>
transfer power therebetween to generate a power flow to the output member<br>
64.<br>
[0032] Figs. 3 and 4 show a control system architecture for controlling and<br>
managing torque and power flow in a powertrain system having multiple<br><br>
torque generative devices, described hereinbelow with reference to the hybrid<br>
powertrain system shown in Figs. 1 and 2, and residing in the aforementioned<br>
control modules in the form of executable algorithms and calibrations. The<br>
control system architecture can be applied to any powertrain system having<br>
multiple torque generative devices, including, e.g., a hybrid powertrain system<br>
having a single electric machine, a hybrid powertrain system having multiple<br>
electric machines, and non-hybrid powertrain systems.<br>
[0033] The control system architecture of Figs. 3 and 4 depicts a flow of<br>
pertinent signals through the control modules. In operation, the operator<br>
inputs to the accelerator pedal 113 and the brake pedal 112 are monitored to<br>
determine the operator torque request ('Toreq'). Operation of the engine 14<br>
and the transmission 10 are monitored to determine the input speed ('Ni')and<br>
the output speed ('No'). A strategic optimization control scheme ('Strategic<br>
Control') 310 determines a preferred input speed ('Ni_Des') and a preferred<br>
engine state and transmission operating range state ('Hybrid Range State Des')<br>
based upon the output speed and the operator torque request, and optimized<br>
based upon other operating parameters of the hybrid powertrain, including<br>
battery power limits and response limits of the engine 14, the transmission 10,<br>
and the first and second electric machines 56 and 72. The strategic<br>
optimization control scheme 310 is preferably executed by the HCP 5 during<br>
each 100 ms loop cycle and each 25 ms loop cycle.<br>
[0034] The outputs of the strategic optimization control scheme 310 are used<br>
in a shift execution and engine start/stop control scheme ('Shift Execution and<br>
Engine Start/Stop') 320 to command changes in the transmission operation<br>
('Transmission Commands') including changing the operating range state.<br><br>
This includes commanding execution of a change in the operating range state<br>
if the preferred operating range state is different from the present operating<br>
range state by commanding changes in application of one or more of the<br>
clutches C1 70, C2 62, C3 73, and C4 75 and other transmission commands.<br>
The present operating range state ('Hybrid Range State Actual') and an input<br>
speed profile ('Ni_Prof) can be determined. The input speed profile is an<br>
estimate of an upcoming input speed and preferably comprises a scalar<br>
parametric value that is a targeted input speed for the forthcoming loop cycle.<br>
The engine operating commands and torque request are based upon the input<br>
speed profile during a transition in the operating range state of the<br>
transmission.<br>
[0035] A tactical control scheme ('Tactical Control and Operation') 330 is<br>
repeatedly executed during one of the control loop cycles to determine engine<br>
commands ('Engine Commands') for operating the engine, including a<br>
preferred input torque from the engine 14 to the transmission 10 based upon<br>
the output speed, the input speed, and the operator torque request and the<br>
present operating range state for the transmission. The engine commands also<br>
include engine states including one of an all-cylinder operating state and a<br>
cylinder deactivation operating state wherein a portion of the engine cylinders<br>
are deactivated and unfueled, and engine states including one of a fueled state<br>
and a fuel cutoff state.<br>
[0036] A clutch torque ('Tcl') for each clutch is estimated in the TCM 17,<br>
including the presently applied clutches and the non-applied clutches, and a<br>
present engine input torque ('Ti') reacting with the input member 12 is<br>
determined in the ECM 23. A output and motor torque determination scheme<br><br>
('Output and Motor Torque Determination') 340 is executed to determine the<br>
preferred output torque from the powertrain ('To_cmd'), which includes motor<br>
torque commands ('TA', 'TB') for controlling the first and second electric<br>
machines 56 and 72 in this embodiment. The preferred output torque is based<br>
upon the estimated clutch torque(s) for each of the clutches, the present input<br>
torque from the engine 14, the present operating range state, the input speed,<br>
the operator torque request, and the input speed profile. The first and second<br>
electric machines 56 and 72 are controlled through the TPIM 19 to meet the<br>
preferred motor torque commands based upon the preferred output torque.<br>
The output and motor torque determination scheme 340 includes algorithmic<br>
code which is regularly executed during the 6.25 ms and 12.5 ms loop cycles<br>
to determine the preferred motor torque commands.<br>
[0037] Fig. 4 details the system for controlling and managing the output<br>
torque in the hybrid powertrain system, described with reference to the hybrid<br>
powertrain system of Figs. 1 and 2 and the control system architecture of Fig.<br>
3. The hybrid powertrain is controlled to transfer the output torque to the<br>
output member 64 and thence to the driveline 90 to generate tractive torque at<br>
wheel(s) 93 to forwardly propel the vehicle in response to the operator input to<br>
the accelerator pedal 113 when the operator selected position of the<br>
transmission gear selector 114 commands operation of the vehicle in the<br>
forward direction. Preferably, forwardly propelling the vehicle results in<br>
vehicle forward acceleration so long as the output torque is sufficient to<br>
overcome external loads on the vehicle, e.g., due to road grade, aerodynamic<br>
loads, and other loads.<br><br>
[0038] The BrCM 22 commands the friction brakes on the wheels 93 to<br>
apply braking force and generates a command for the transmission 10 to create<br>
a negative output torque which reacts with the driveline 90 in response to a net<br>
operator input to the brake pedal 112 and the accelerator pedal 113.<br>
Preferably the applied braking force and the negative output torque can<br>
decelerate and stop the vehicle so long as they are sufficient to overcome<br>
vehicle kinetic power at wheel(s) 93. The negative output torque reacts with<br>
the driveline 90, thus transferring torque to the electro-mechanical<br>
transmission 10 and the engine 14. The negative output torque reacted<br>
through the electro-mechanical transmission 10 can be transferred to the first<br>
and second electric machines 56 and 72 to generate electric power for storage<br>
in the ESD 74.<br>
[0039] The operator inputs to the accelerator pedal 113 and the brake pedal<br>
112 comprise individually determinable operator torque request inputs<br>
including an immediate accelerator output torque request ('Output Torque<br>
Request Accel Immed'), a predicted accelerator output torque request ('Output<br>
Torque Request Accel Prdtd'), an immediate brake output torque request<br>
('Output Torque Request Brake Immed'), a predicted brake output torque<br>
request ('Output Torque Request Brake Prdtd') and an axle torque response<br>
type ('Axle Torque Response Type'). As used herein, the term 'accelerator'<br>
refers to an operator request for forward propulsion preferably resulting in<br>
increasing vehicle speed over the present vehicle speed, when the operator<br>
selected position of the transmission gear selector 114 commands operation of<br>
the vehicle in the forward direction. The terms 'deceleration' and 'brake'<br>
refer to an operator request preferably resulting in decreasing vehicle speed<br><br>
from the present vehicle speed. The immediate accelerator output torque<br>
request, the predicted accelerator output torque request, the immediate brake<br>
output torque request, the predicted brake output torque request, and the axle<br>
torque response type are individual inputs to the control system shown in Fig.<br>
4.<br>
[0040] The immediate accelerator output torque request is determined based<br>
upon a presently occurring operator input to the accelerator pedal 113, and<br>
comprises a request to generate an immediate output torque at the output<br>
member 64 preferably to accelerate the vehicle. The immediate accelerator<br>
output torque request is unshaped, but can be shaped by events that affect<br>
vehicle operation outside the powertrain control. Such events include vehicle<br>
level interruptions in the powertrain control for antilock braking, traction<br>
control and vehicle stability control, which can be used to unshape or rate-<br>
limit the immediate accelerator output torque request.<br>
[0041] The predicted accelerator output torque request is determined based<br>
upon the operator input to the accelerator pedal 113 and comprises an<br>
optimum or preferred output torque at the output member 64. The predicted<br>
accelerator output torque request is preferably equal to the immediate<br>
accelerator output torque request during normal operating conditions, e.g.,<br>
when any one of antilock braking, traction control, or vehicle stability is not<br>
being commanded. When any one of antilock braking, traction control or<br>
vehicle stability is being commanded the predicted accelerator output torque<br>
request remains the preferred output torque with the immediate accelerator<br>
output torque request being decreased in response to output torque commands<br>
related to the antilock braking, traction control, or vehicle stability control.<br><br>
[0042] Blended brake torque includes a combination of the friction braking<br>
torque generated at the wheels 93 and the output torque generated at the output<br>
member 64 which reacts with the driveline 90 to decelerate the vehicle in<br>
response to the operator input to the brake pedal 112.<br>
[0043] The immediate brake output torque request is determined based upon<br>
a presently occurring operator input to the brake pedal 112, and comprises a<br>
request to generate an immediate output torque at the output member 64 to<br>
effect a reactive torque with the driveline 90 which preferably decelerates the<br>
vehicle. The immediate brake output torque request is determined based upon<br>
the operator input to the brake pedal 112 and the control signal to control the<br>
friction brakes to generate friction braking torque.<br>
[0044] The predicted brake output torque request comprises an optimum or<br>
preferred brake output torque at the output member 64 in response to an<br>
operator input to the brake pedal 112 subject to a maximum brake output<br>
torque generated at the output member 64 allowable regardless of the operator<br>
input to the brake pedal 112. In one embodiment the maximum brake output<br>
torque generated at the output member 64 is limited to -0.2g. The predicted<br>
brake output torque request can be phased out to zero when vehicle speed<br>
approaches zero regardless of the operator input to the brake pedal 112. As<br>
desired by a user, there can be operating conditions under which the predicted<br>
brake output torque request is set to zero, e.g., when the operator setting to the<br>
transmission gear selector 114 is set to a reverse gear, and when a transfer case<br>
(not shown) is set to a four-wheel drive low range. The operating conditions<br>
whereat the predicted brake output torque request is set to zero are those in<br>
which blended braking is not preferred due to vehicle operating factors.<br><br>
[0045] The axle torque response type comprises an input state for shaping<br>
and rate-limiting the output torque response through the first and second<br>
electric machines 56 and 72. The input state for the axle torque response type<br>
can be an active state, preferably comprising one of a pleasability limited state<br>
a maximum range state, and an inactive state. When the commanded axle<br>
torque response type is the active state, the output torque command is the<br>
immediate output torque. Preferably the torque response for this response type<br>
is as fast as possible.<br>
[0046] The predicted accelerator output torque request and the predicted<br>
brake output torque request are input to the strategic optimization control<br>
scheme ('Strategic Control') 310. The strategic optimization control scheme<br>
310 determines a desired operating range state for the transmission 10<br>
('Hybrid Range State Des') and a desired input speed from the engine 14 to<br>
the transmission 10 ('Ni Des'), which comprise inputs to the shift execution<br>
and engine operating state control scheme ('Shift Execution and Engine<br>
Start/Stop') 320.<br>
[0047] A change in the input torque from the engine 14 which reacts with the<br>
input member from the transmission 10 can be effected by changing mass of<br>
intake air to the engine 14 by controlling position of an engine throttle<br>
utilizing an electronic throttle control system (not shown), including opening<br>
the engine throttle to increase engine torque and closing the engine throttle to<br>
decrease engine torque. Changes in the input torque from the engine 14 can<br>
be effected by adjusting ignition timing, including retarding spark timing from<br>
a mean-best-torque spark timing to decrease engine torque. The engine state<br>
can be changed between the engine-off state and the engine-on state to effect a<br><br>
change in the input torque. The engine state can be changed between the all-<br>
cylinder operating state and the cylinder deactivation operating state, wherein<br>
a portion of the engine cylinders are unfueled. The engine state can be<br>
changed by selectively operating the engine 14 in one of the fueled state and<br>
the fuel cutoff state wherein the engine is rotating and unfueled. Executing a<br>
shift in the transmission 10 from a first operating range state to a second<br>
operating range state can be commanded and achieved by selectively applying<br>
and deactivating the clutches C1 70, C2 62, C3 73, and C4 75.<br>
[0048] The immediate accelerator output torque request, the predicted<br>
accelerator output torque request, the immediate brake output torque request,<br>
the predicted brake output torque request, and the axle torque response type<br>
are inputs to the tactical control and operation scheme 330 to determine the<br>
engine command comprising the preferred input torque to the engine 14.<br>
[0049] The tactical control and operation scheme 330 can be divided into<br>
two parts. This includes determining a desired engine torque, and therefore a<br>
power split between the engine 14 and the first and second electric machines<br>
56 and 72, and controlling the engine states and operation of the engine 14 to<br>
meet the desired engine torque. The engine states include the all-cylinder state<br>
and the cylinder deactivation state, and a fueled state and a deceleration fuel<br>
cutoff state for the present operating range state and the present engine speed,<br>
and the engine-off state and the engine-on state. The tactical control and<br>
operation scheme 330 monitors the predicted accelerator output torque request<br>
and the predicted brake output torque request to determine the predicted input<br>
torque request. The immediate accelerator output torque request and the<br>
immediate brake output torque request are used to control the engine<br><br>
speed/load operating point to respond to operator inputs to the accelerator<br>
pedal 113 and the brake pedal 112, e.g., to determine the engine command<br>
comprising the preferred input torque to the engine 14. Preferably, a rapid<br>
change in the preferred input torque to the engine 14 occurs only when the<br>
first and second electric machines 56 and 72 cannot meet the operator torque<br>
request.<br>
[0050] The immediate accelerator output torque request, the immediate<br>
brake output torque request, and the axle torque response type are input to the<br>
motor torque control scheme ('Output and Motor Torque Determination') 340.<br>
The motor torque control scheme 340 executes to determine the motor torque<br>
commands during each iteration of one of the loop cycles, preferably the 6.25<br>
ms loop cycle.<br>
[0051] The present input torque ('Ti') from the engine 14 and the estimated<br>
applied clutch torque(s) ('Tcl') are input to the motor torque control scheme<br>
340. The axle torque response type signal determines the torque response<br>
characteristics of the output torque command delivered to the output member<br>
64 and hence to the driveline 90.<br>
[0052] The motor torque control scheme 340 controls motor torque<br>
commands of the first and second electric machines 56 and 72 to transfer a net<br>
commanded output torque to the output member 64 of the transmission 10 that<br>
meets the operator torque request.<br>
[0053] The control system architecture controls power flow among power<br>
actuators within a hybrid powertrain. The hybrid powertrain utilizes two or<br>
more power actuators to provide output power to an output member.<br>
Controlling power flow among the power actuators includes controlling the<br><br>
input speed N1 from the engine 14, the input torque T1 from the engine, and the<br>
motor torques TA, TB of the first and second electric machines 56, 72.<br>
Although in the exemplary embodiment described herein above, the hybrid<br>
powertrain utilizes the control system architecture to control power flow<br>
among power actuators including the engine 14, the ESD 74 and the first and<br>
second electric machines 56 and 72, in alternate embodiments the control<br>
system architecture can control power flow among other types of power<br>
actuators. Exemplary power actuators that can be utilized include fuel cells,<br>
ultra-capacitors and hydraulic actuators.<br>
[0054] The control system architecture manages electric power within the<br>
exemplary powertrain system utilizing electric power limits. The control<br>
system architecture utilizes a method for managing electric power within the<br>
powertrain system that includes establishing predicted electric power limits,<br>
long-term electric power limits, short-term electric power limits, and voltage-<br>
based electric power limits. The method further includes determining a<br>
preferred input speed from the engine 14, a preferred input torque from the<br>
engine 14, a preferred engine state, and a preferred operating range state of the<br>
transmission 10 utilizing the predicted electric power limits. The method<br>
further includes determining input torque constraints for constraining input<br>
torque from the engine 14 and output torque constraints for constraining<br>
output torque To to the output member 64 based upon the long-term electric<br>
power limits and the short-term electric power limits. By constraining the<br>
output torque To, a total motor torque TM, consisting of first and second motor<br>
torques TA and TB of the first and second electric machines, respectively, is<br>
also constrained based on the set of output torque constraints and the input<br><br>
torque T1 from the engine 14. In an alternate embodiment, a set of total motor<br>
torque constraints can be determined based upon the long-term electric power<br>
limits and short-term electric power limits, in addition to, or instead of the set<br>
of output torque constraints. The method further includes determining output<br>
torque constraints based upon the voltage-based electric power limits.<br>
[0055] The predicted electric power limits comprise preferred battery output<br>
levels associated with preferred ESD 74 performance levels, that is, the<br>
predicted electric power limits prescribe the desired operating envelope of the<br>
ESD 74. The predicted electric power limits comprise a range of battery<br>
output power levels from a minimum predicted electric power limit<br>
('PBAT_MIN_PRDTD') to a maximum predicted electric power limit<br>
('PBAT_MAX_PRDTD'). The predicted electric power limits typically comprise a<br>
more constrained range of battery output power levels than the long-term<br>
electric power limits and the short-term electric power limits.<br>
[0056] The long-term electric power limits comprise battery output power<br>
levels associated with operation of the ESD 74 while maintaining long-term<br>
durability of the ESD 74. Operation of the ESD 74 outside the long-term<br>
electric power limits for extended periods of time may reduce the operational<br>
life of the ESD 74. In one embodiment, the ESD 74 is maintained within the<br>
long-term electric power limits during steady-state operation, that is, operation<br>
not associated with transient operation. Exemplary transient operations<br>
includes tip-in and tip-out of the accelerator pedal 113, wherein transient<br>
acceleration operation is requested. Maintaining the ESD 74 within the long-<br>
term electric power limits, allows the ESD 74 to provide functionality such as<br>
delivering a highest power level that does not degrade operational life of the<br><br>
ESD 74. The long-term electric power limits comprise a range of battery<br>
output power levels from a minimum long-term electric power limit<br>
('PBAT_MIN_LT') to a maximum long-term electric power limit ('PBAT_MAX_LT')-<br>
The long-term electric power limits typically comprise a more constrained<br>
range of battery output power levels than the short-term electric power limits.<br>
[0057] The short-term electric power limits comprise ESD 74 output power<br>
levels associated with battery operation that does not significantly affect short-<br>
term battery durability. Operation of the ESD 74 outside the short-term<br>
electric power limits may reduce the operational life of the ESD 74. Operating<br>
the ESD 74 within the short-term electric power limits, but outside the long-<br>
term electric power limits for short periods of time, may minimally reduce the<br>
operational life of the ESD 74, however, does not result in large amounts of<br>
degraded operational performance to the ESD 74. In one embodiment, the<br>
ESD 74 is maintained within the short-term electric power limits during<br>
transient operation. The short-term electric power limits comprise a range of<br>
battery output power levels from a minimum short-term electric power limit<br>
('PBAT_MIN_ST') to a maximum short-term electric power limit ('PBAT_MAX_ST').<br>
[0058] The voltage-based electric power limits comprise a range of battery<br>
output power level from a minimum voltage-based electric power limit<br>
('PBAT_MAX_VB') to a maximum voltage-based electric power limit<br>
('PBAT_MAX_VB') based on desired operating voltages of the ESD 74. The<br>
minimum voltage-based electric power limit PBAT_MIN_VB is a minimum<br>
amount of battery output power that the ESD 74 outputs before reaching a<br>
maximum voltage VLID. The maximum voltage-based electric power limit<br>
PBAT_MAX_VB is an estimated amount battery output power that the ESD 74 can<br><br>
output before reaching a minimum voltage VFLOOR. The minimum voltage<br>
VFLOOR IS a minimum permissible voltage for operating the battery without<br>
significantly effecting short-term battery durability. Outputting power from<br>
the ESD 74 when the voltage levels of the ESD 74 are below the minimum<br>
VFLOOR can cause degraded operational life of the ESD 74.<br>
[0059] The strategic optimization control scheme 310 utilizes the predicted<br>
electric power limits in an optimization function to determine the preferred<br>
input speed and transmission operating range state based on the predicted<br>
electric power limits and on the operator torque request. The tactical control<br>
scheme 330 utilizes the predicted electric power limits in an optimization<br>
function to determine the preferred input torque and preferred engine state<br>
from the engine 14 based upon the operator torque request and the predicted<br>
electric power limits. The optimization functions of the optimization control<br>
scheme 310 and the tactical control scheme 330 determine preferred operating<br>
points (that is, preferred input speed, preferred input torque, preferred engine<br>
state and transmission operating range state) by determining operating points<br>
associated with lowest costs. The predicted electric power limits are utilized<br>
in the cost functions of the strategic optimization control scheme 310 and the<br>
tactical control scheme 330 to determine costs for operating the engine at<br>
selected operating point. The optimization functions further rely on system<br>
models and estimates of the operating characteristics of components of the<br>
powertrain system to determine costs.<br>
[0060] The tactical control scheme 330 determines a set of tactical control<br>
electric power constraints based on the short-term electric power limits and the<br>
long-term electric power limits. In particular, the tactical control scheme 330<br><br>
sets the tactical control electric power constraints to the long-term electric<br>
power limits, when the battery output power PBAT of the ESD 74 is within a<br>
preferred tactical control battery output power operating range, wherein the<br>
preferred tactical control battery output power operating range is defined<br>
based upon the short-term electric power limits. When the battery output<br>
power PBAT is outside the preferred tactical control battery output power<br>
operating range, the tactical control scheme 330 utilizes feedback control<br>
based on the battery output power PBAT and the short-term electric power<br>
limits to modify the tactical control electric power constraints to control<br>
battery output power PBAT within the preferred tactical control battery output<br>
power operating range.<br>
[0061] The set of tactical control electric power constraints are utilized to<br>
determine a set of input torque constraints for the tactical control scheme 330.<br>
When the preferred input torque as determined by the optimization function is<br>
within the set of input torque constraints, the tactical control scheme 330<br>
requests the preferred input torque from the engine 14, and the engine 14<br>
adjusts the position of the engine throttle to control the input torque T1 to the<br>
preferred input torque. When the preferred input torque is outside the set of<br>
input torque constraints, the tactical control scheme requests the violated<br>
constraint for input torque from the engine 14, and the engine 14 adjusts<br>
combustion timing to control input torque within the input torque constraints.<br>
[0062] The output and motor torque determination scheme 340 determines a<br>
set of output and motor torque determination electric power constraints based<br>
on the short-term electric power limits and the long-term electric power limits.<br>
In particular, the output and motor torque determination scheme 340 sets the<br><br>
output and motor torque determination electric power constraints to the long-<br>
term electric power limits, when the battery output power PBAT of the ESD 74<br>
is within a preferred output and motor torque determination battery output<br>
power operating range, wherein the preferred output and motor torque<br>
determination battery output power operating range is defined based upon the<br>
short-term electric power limits. When the battery output power PBAT is<br>
outside the preferred output and motor torque determination battery output<br>
power operating range, the output and motor torque determination scheme 340<br>
utilizes feedback control based on the battery output power PBAT and the short-<br>
term electric power limits to modify the output and motor torque<br>
determination electric power constraints to control battery output power PBAT<br>
within the preferred output and motor torque determination battery output<br>
power operating range.<br>
[0063] The set of output and motor torque determination electric power<br>
constraints are utilized to determine a set of output torque constraints for the<br>
output and motor torque determination scheme 340. When a preferred output<br>
torque of the output and motor torque determination scheme is within the set<br>
of output torque constraints, the output and motor torque determination<br>
scheme 340 requests the requests motor torques from the first and second<br>
electric machines 56 and 72 to meet the preferred output torque. When the<br>
preferred output torque of the output and motor torque determination scheme<br>
340 is not within the set of output torque constraints, the output and motor<br>
torque determination scheme 340 requests torque from the first and second<br>
electric machines 56 and 72 to meet the violated constraint for motor torque.<br><br>
[0064] The control system monitors a duration of time that the battery output<br>
power PBAT exceeds the long-term electric power limits. If the battery output<br>
power exceeds the long-term electric power limit for longer than a<br>
predetermined time period, the control system sets the long-term electric<br>
power limits to the short-term electric power limits.<br>
[0065] Battery output power PBAT is controlled below the maximum voltage-<br>
based electric power limit and above the minimum voltage-based electric<br>
power limit. The output and motor torque determination scheme 340 utilizes<br>
the maximum and minimum voltage-based electric power limit to determine<br>
maximum motor torques of the first and second electric machines 56 and 72.<br>
The output and motor torque determination scheme 340 and the shift<br>
execution and engine start/stop control scheme 320 utilizes the maximum<br>
motor torques to determine an engine start profile for starting the engine such<br>
that the maximum motor torques will not be exceeded during engine starting.<br>
For example, if the maximum voltage-based electric power limit is above a<br>
threshold power level, an aggressive starting profile having higher battery<br>
output power PBAT is utilized. If the maximum voltage-based electric power<br>
limit is below the threshold power level, a starting profile having lower battery<br>
output power PBAT is utilized. Further, if during starting the battery output<br>
power PBAT exceeds the maximum voltage-based electric power limit, the start<br>
profile is altered to maintain the battery output power PBAT under the<br>
maximum voltage-based electric power limits. The maximum voltage-based<br>
electric power limit can be further utilized in the output and motor torque<br>
determination scheme 340 to allow the powertrain system to take advantage of<br>
increased battery power available during engine starting conditions.<br><br>
[0066] Fig. 5 details signal flow in the tactical control scheme ('Tactical<br>
Control and Operation') 330 for controlling operation of the engine 14,<br>
described with reference to the hybrid powertrain system of Figs. 1 and 2 and<br>
the control system architecture of Figs. 3 and 4. The tactical control scheme<br>
330 includes a tactical optimization control path 350 and a system constraints<br>
control path 360 which are preferably executed concurrently. The outputs of<br>
the tactical optimization control path 350 are input to an engine state control<br>
scheme 370. The outputs of the engine state control scheme 370 and the<br>
system constraints control path 360 are input to an engine response type<br>
determination scheme ('Engine Response Type Determination') 380 for<br>
controlling the engine state, the immediate engine torque request, the predicted<br>
engine torque request, and the engine response type.<br>
[0067] The input from the engine 14 can be described in terms of an engine<br>
operating point including engine speed and engine torque which can be<br>
converted into the input speed and input torque which react with the input<br>
member from the transmission 10. When the engine 14 comprises a spark-<br>
ignition engine, a change in the engine operating point can be effected by<br>
changing mass of intake air to the engine 14, by controlling position of an<br>
engine throttle (not shown) utilizing an electronic throttle control system (not<br>
shown), including opening the engine throttle to increase engine torque and<br>
closing the engine throttle to decrease engine torque. Changes in the engine<br>
operating point can be effected by adjusting ignition timing, including<br>
retarding spark timing from a mean-best-torque spark timing to decrease<br>
engine torque. When the engine 14 comprises a compression-ignition engine,<br>
the engine operating point is controlled by controlling the mass of injected fuel<br><br>
and adjusted by retarding injection timing from a mean-best-torque injection<br>
timing to decrease the engine torque. The engine operating point can also be<br>
changed to effect a change in the input torque by controlling the engine state<br>
between the all-cylinder state and the cylinder deactivation state, and, by<br>
controlling the engine state between the engine-fueled state and the fuel cutoff<br>
state wherein the engine is rotating and unfueled.<br>
[0068] The tactical optimization control path 350 acts on substantially<br>
steady-state inputs to select a preferred engine state and to determine a<br>
preferred input torque from the engine 14 to the transmission 10. The tactical<br>
optimization control path 350 includes an optimization scheme ('Tactical<br>
Optimization') 354 to determine preferred input torques for operating the<br>
engine 14 in the all-cylinder state ('Input Torque Full'), in the cylinder<br>
deactivation state ('Input Torque Deac'), the all-cylinder state with fuel cutoff<br>
('Input Torque Full FCO'), in the cylinder deactivation state with fuel cutoff<br>
('Input Torque Deac FCO'), and a preferred engine state ('Preferred Engine<br>
State'). Inputs to the optimization scheme 354 include a lead operating range<br>
state of the transmission 10 ('Lead Hybrid Range State') a lead predicted input<br>
acceleration profile ('Lead Input Acceleration Profile Predicted') and a<br>
predicted range of clutch reactive torques ('Predicted Clutch Reactive Torque<br>
Min/Max') across each applied clutch in the lead operating range state, which<br>
are preferably generated in the shift execution and engine start/stop control<br>
scheme 320. Further inputs include predicted electric power limits ('Predicted<br>
Battery Power Limits'), a predicted accelerator output torque request ('Output<br>
Torque Request Accel Prdtd') and a predicted brake output torque request<br>
('Output Torque Request Brake Prdtd'). The predicted output torque request<br><br>
for acceleration is shaped through a predicted output torque shaping filter 352<br>
while considering the axle torque response type to yield a predicted<br>
accelerator output torque ('To Accel Prdtd') and combined with the predicted<br>
output torque request for braking to determine the net predicted output torque<br>
(To Net Prdtd'), which are inputs to the optimization scheme 354. The lead<br>
operating range state of the transmission 10 comprises a time-shifted lead of<br>
the operating range state of the transmission 10 to accommodate a response<br>
time lag between a commanded change in the operating range state and the<br>
actual operating range state. Thus the lead operating range state of the<br>
transmission 10 is the commanded operating range state. The lead predicted<br>
input acceleration profile comprises a time-shifted lead of the predicted input<br>
acceleration profile of the input member 12 to accommodate a response time<br>
lag between a commanded change in the predicted input acceleration profile<br>
and a measured change in the predicted input acceleration profile. Thus the<br>
lead predicted input acceleration profile is the predicted input acceleration<br>
profile of the input member 12 occurring after the time shift. The parameters<br>
designated as 'lead' are used to accommodate concurrent transfer of torque<br>
through the powertrain converging at the common output member 64 using<br>
devices having varying response times. Specifically, the engine 14 can have a<br>
response time of an order of magnitude of 300 - 600 ms, and each of the<br>
torque transfer clutches C1 70, C2 62, C3 73, and C4 75 can have response<br>
times of an order of magnitude of 150-300 ms, and the first and second<br>
electric machines 56 and 72 can have response time of an order of magnitude<br>
of 10 ms.<br><br>
[0069] The optimization scheme 354 determines costs for operating the<br>
engine 14 in the engine states, which comprise operating the engine fueled and<br>
in the all-cylinder state ('PCOST FULL FUEL'), operating the engine unfueled and<br>
in the all-cylinder state ('PCOST FULL FCO'), operating the engine fueled and in<br>
cylinder deactivation state ('PCOST DEAC FUEL'), and operating the engine<br>
unfueled and in the cylinder deactivation state ('PCOST DEAC FCO')0. The<br>
aforementioned costs for operating the engine 14 are input to a stabilization<br>
analysis scheme ('Stabilization and Arbitration') 356 along with the actual<br>
engine state ('Actual Engine State') and allowable or permissible engine<br>
state(s) ('Engine State Allowed') to select one of the engine states as the<br>
preferred engine state ('Preferred Engine State').<br>
[0070] The preferred input torques for operating the engine 14 in the all-<br>
cylinder state and in the cylinder deactivation state with and without fuel<br>
cutoff are input to an engine torque conversion calculator 355 and converted to<br>
preferred engine torques in the all-cylinder state and in the cylinder<br>
deactivation state ('Engine Torque Full' and 'Engine Torque Deac') and with<br>
fuel cutoff in the all-cylinder state and in the cylinder deactivation state<br>
('Engine Torque Full FCO' and 'Engine Torque Deac FCO') respectively, by<br>
taking into account torque-consuming components, e.g., a hydraulic pump,<br>
between the engine 14 and the transmission 10. The preferred engine torques<br>
and the preferred engine state comprise inputs to the engine state control<br>
scheme 370.<br>
[0071] The costs for operating the engine 14 include operating costs which<br>
are determined based upon factors that include vehicle driveability, fuel<br>
economy, emissions, and battery usage. Costs are assigned and associated<br><br>
with fuel and electrical power consumption and are associated with specific<br>
operating conditions of the hybrid powertrain. Lower operating costs can be<br>
associated with lower fuel consumption at high conversion efficiencies, lower<br>
battery power usage and lower emissions and take into account the present<br>
operating state of the engine 14.<br>
[0072] The preferred engine state and the preferred engine torques in the all-<br>
cylinder state and in the cylinder deactivation state are input to the engine state<br>
control scheme 370, which includes an engine state machine ('Engine State<br>
Machine') 372. The engine state machine 372 determines a target engine<br>
torque ('Target Engine Torque') and an engine state ('Target Engine State')<br>
based upon the preferred engine torques and the preferred engine state. The<br>
target engine torque and the engine state are input to a transition filter 374<br>
which filters the target engine torque to provide a filtered target engine torque<br>
('Filtered Target Engine Torque') and which enables transitions between<br>
engine states. The engine state machine 372 outputs a command that<br>
indicates selection of one of the cylinder deactivation state and the all-cylinder<br>
state ('DEAC Selected') and indicates selection of one of the engine-fueled<br>
state and the deceleration fuel cutoff state ('FCO Selected').<br>
[0073] The selection of one of the cylinder deactivation state and the all-<br>
cylinder state and the selection of one of the engine-fueled state and the<br>
deceleration fuel cutoff state, the filtered target engine torque, and the<br>
minimum and maximum engine torques are input to the engine response type<br>
determination scheme 380.<br>
[0074] The system constraints control path 360 determines the constraints on<br>
the input torque, comprising minimum and maximum input torques ('Input<br><br>
Torque Hybrid Minimum' and 'Input Torque Hybrid Maximum') that can be<br>
reacted by the transmission 10. The minimum and maximum input torques are<br>
determined based upon constraints to the transmission 10, the first and second<br>
electric machines 56 and 72, and the ESD 74, which affect the capacity of the<br>
transmission 10 and the electric machines 56 and 72.<br>
[0075] Inputs to the system constraints control path 360 include the<br>
immediate output torque request as measured by the accelerator pedal 113<br>
combined with the torque intervention control ('Output Torque Request Accel<br>
Immed') and the immediate output torque request as measured by the brake<br>
pedal 112 combined with the torque intervention control ('Output Torque<br>
Request Brake Immed'). The immediate output torque request is shaped<br>
through an immediate output torque shaping filter 362 while considering the<br>
axle torque response type to yield an immediate accelerator output torque ('To<br>
Accel Immed') and is combined with the immediate output torque request for<br>
braking to determine the net immediate output torque ('To Net Immed'). The<br>
net immediate output torque and the immediate accelerator output torque are<br>
inputs to a constraints scheme ('Output and Input Torque Constraints') 364.<br>
Other inputs to the constraints scheme 364 include the lead operating range<br>
state of the transmission 10, an immediate lead input acceleration profile<br>
('Lead Input Acceleration Profile Immed'), a lead immediate clutch reactive<br>
torque range ('Lead Immediate Clutch Reactive Torque Min/Max') for each<br>
applied clutch in the lead operating range state, and the tactical control electric<br>
power constraints ('Tactical Control Electric Power Constraints') comprising<br>
the range from the minimum tactical control electric power constraint<br>
PBAT_MIN_TC to the maximum tactical control electric power constraint<br><br>
PBAT_MAX_TC. The tactical control electric power constraints are outputted<br>
from a battery power function ('Battery Power Control') 366. A targeted lead<br>
input acceleration profile comprises a time-shifted lead of the immediate input<br>
acceleration profile of the input member 12 to accommodate a response time<br>
lag between a commanded change in the immediate input acceleration profile<br>
and a measured change in the immediate input acceleration profile. The lead<br>
immediate clutch reactive torque range comprises a time-shifted lead of the<br>
immediate clutch reactive torque range of the clutches to accommodate a<br>
response time lag between a commanded change in the immediate clutch<br>
torque range and a measured change in the immediate clutch reactive torque<br>
range. The constraints scheme 364 determines an output torque range for the<br>
transmission 10, and then determines the minimum and maximum input<br>
torques that can be reacted by the transmission 10 based upon the<br>
aforementioned inputs.<br>
[0076] Further, the constraints scheme 364 inputs an immediate engine<br>
torque request and outputs an immediate electric power PBATT_IMMED that is an<br>
estimated battery output power of the ESD 74 when the engine 14 is operating<br>
at the immediate engine torque and when the electric machines 56, 72 are<br>
operating at preferred motor torques based upon the operator torque request<br>
and the other inputs of the constraints scheme 364.<br>
[0077] The minimum and maximum input torques are input to the engine<br>
torque conversion calculator 355 and converted to minimum and maximum<br>
engine torques ('Engine Torque Hybrid Minimum' and 'Engine Torque<br>
Hybrid Maximum' respectively), by taking into account torque-consuming<br><br>
components, e.g., a hydraulic pump, parasitic and other loads introduced<br>
between the engine 14 and the transmission 10.<br>
[0078] The filtered target engine torque, the output of the engine state<br>
machine 372 and the minimum and maximum engine torques are input to the<br>
engine response type determination scheme 380. The engine response type<br>
determination scheme 380 limits the filtered target engine torque to the<br>
minimum and maximum hybrid engine torques and outputs the engine<br>
commands to the ECM 23 for controlling the engine torques to an immediate<br>
engine torque request ('Engine Torque Request Immed') and a predicted<br>
engine torque request ('Engine Torque Request Prdtd'). Other commands<br>
control the engine state to one of the engine fueled state and the fuel cutoff<br>
state ('FCO Request') and to one of the cylinder deactivation state and the all-<br>
cylinder state ('DEAC Request'). Another output comprises an engine<br>
response type ('Engine Response Type'). When the filtered target engine<br>
torque is within the range between the minimum and maximum engine<br>
torques, the engine response type is inactive. When the filtered target engine<br>
torque drops below the maximum constraint of the engine torque ('Engine<br>
Torque Hybrid Maximum') the engine response type is active, indicating a<br>
need for an immediate change in the engine torque, e.g., through engine spark<br>
control to change the engine torque to fall within the constraints of the<br>
minimum and maximum engine torques.<br>
[0079] Figs. 6-9 show a method for controlling the input torque T1 based on<br>
a state-of-charge range. Fig. 6 shows a graph 500 depicting output power of<br>
the ESD 74 ('POWER') on the y-axis and state-of-charge of the ESD 74<br>
('SOC') on the x-axis. The control system determines whether to operate the<br><br>
powertrain to charge the ESD 74 ('CHARGE') thereby operating the ESD 74<br>
at negative output power levels, whether to operate the powertrain to discharge<br>
the ESD 74 ('DISCHARGE') thereby operating the ESD 74 at positive output<br>
power levels, or whether to operate the ESD 74 at zero output power ('0')<br>
thereby neither charging nor discharging the ESD 74 based upon the long-term<br>
electric power limits and the predicted electric power limits. The long-term<br>
electric power limits and the predicted electric power limits are determined<br>
based upon the state-of-charge of the ESD 74. Therefore, the state-of-charge<br>
of the ESD 74 defines operating ranges based upon functionality of the ESD<br>
74 including a no discharge range 'NO DISCHARGE RANGE,' a forced<br>
discharge range 'FORCED DISCHARGE RANGE,' an opportunity charge<br>
and discharge range 'OPPORTUNITY CHARGE AND DISCHARGE<br>
RANGE,' a free charge range 'FREE CHARGE RANGE,' and a no charge<br>
range 'NO CHARGE RANGE.'<br>
[0080] The predicted electric power limits define a range of power utilized in<br>
optimization functions. The optimization functions can determine preferred<br>
powertrain system operating points based on power costs of operating the<br>
powertrain system. The preferred powertrain system operating points can<br>
include, for example, the preferred engine operating point or the preferred<br>
operating range state of the transmission 10. Providing predicted electric<br>
power limits that define a more constrained ESD 74 output power operating<br>
range than the long-term electric power limits, determining the preferred<br>
powertrain operating point utilizing the predicted electric power limits, and the<br>
output torque command of the transmission 10 utilizing the long-term electric<br><br>
power limits provides the forced discharge range and the free charge range, as<br>
described below.<br>
[0081] The no discharge range comprises the state-of-charge range in which<br>
the maximum long-term electric power limit value is less than or equal to zero.<br>
When the state-of-charge of the ESD 74 is within the no discharge range, the<br>
ESD 74 is controlled to output either negative or zero output power values,<br>
and therefore, the ESD 74 is controlled to restrict discharging.<br>
[0082] The forced discharge range comprises the state-of-charge range in<br>
which the maximum long-term electric power limit value is greater than zero,<br>
and the maximum predicted electric power limit is less than or equal to zero.<br>
When the state-of-charge of the ESD 74 is within the forced discharge range,<br>
optimization functions of the strategic control scheme 310 and the tactical<br>
control scheme 330 restrict discharging when determining the preferred<br>
powertrain system operating point. However, the output and motor torque<br>
determination scheme 340 may command discharging of the ESD 74 to meet<br>
the operator torque request. For example, the ESD 74 may be controlled to<br>
discharge to meet a changing operator output torque request exceeding the<br>
capability of the engine during a wide-open pedal maneuver. Thus, the output<br>
and motor torque determination scheme 340 can command discharging of the<br>
ESD 74 to positively affect the output torque To to meet the operator torque<br>
request. Since the preferred powertrain operating point is determined while<br>
excluding ESD 74 discharging considerations, the preferred input torque from<br>
the engine 14 is not determined based upon conserving fuel by supplementing<br>
the input torque T1 with motor torques TA and TB from the first and second<br>
electric machines 56 and 72 to meet the operator torque request To_REQ.<br><br>
[0083] The opportunity charge and discharge range comprises the state-of-<br>
charge range in which the maximum predicted electric power limit is greater<br>
than or equal to zero and the minimum predicted electric power limit is less<br>
than or equal to zero. When the ESD 74 state-of-charge is in the opportunity<br>
charge and discharge range, the optimization functions consider both charging<br>
and discharging of the ESD 74 when determining the preferred powertrain<br>
system operating point based on power costs.<br>
[0084] The free charge range comprises the state-of-charge range in which<br>
the minimum long-term electric power limit value is less than or equal to zero,<br>
and the minimum predicted electric power limit is greater than or equal to<br>
zero. When the state-of-charge of the ESD 74 is within the free charge range,<br>
optimization functions of the strategic control scheme 310 and the tactical<br>
control scheme 330 restrict charging when determining the preferred<br>
powertrain system operating point. However, the output and motor torque<br>
control scheme 340 may command charging of the ESD 74 to meet the<br>
operator torque request. For example, the ESD 74 may be controlled to charge<br>
when the optimization function determines that the engine 14 will consume<br>
less fuel when operating at higher engine torques (for example, when<br>
operating at wide open throttle) than when operating at lower engine torques.<br>
Since the preferred powertrain system operating point is determined based on<br>
excluding ESD 74 charging considerations, the preferred engine torque is not<br>
determined based upon consuming additional fuel to charge the ESD 74 when<br>
the optimization function determines that consuming additional fuel is more<br>
energy efficient. However, the ESD 74 can be controlled to capture energy<br>
that would otherwise be dissipated, for example through blended braking.<br><br>
Therefore, the ESD 74 will charge when charging is "free", that is, when no<br>
additional fuel is consumed by charging.<br>
[0085] The no charge range comprises the state-of-charge range in which the<br>
minimum long-term electric power limit value is greater than or equal to zero.<br>
When the state-of-charge of the ESD 74 is within the no charge range, the<br>
ESD 74 is controlled to output either positive or zero output power values, and<br>
therefore, the ESD 74 is controlled to restrict charging.<br>
[0086] Fig. 7A shows a graph 600 depicting torque levels ('Torque') of the<br>
powertrain system on the x-axis and output power levels of the ESD 74<br>
('PBAT') on the y-axis when the ESD 74 is operating in the forced discharge<br>
range, i.e., when the ESD 74 is at a nominally low state-of-charge, and when<br>
the powertrain system is accelerating ('Forced Discharge Range and<br>
Accelerating'). The graph 600 includes a search range 601 from a minimum<br>
engine run input torque ('T1 MIN RUN') to a maximum input torque ('T1 MAX')-<br>
The optimization functions determines a preferred input torque either at the<br>
engine off input torque T1 MIN OFF or an input torque within the search range<br>
601.<br>
[0087] As the input torque T1 from the engine 14 increases, an amount of<br>
fuel consumed by the engine 14 increases as represented by the fuel<br>
continuum ('Fuel Continuum'). The optimization functions search input<br>
torques and calculate corresponding motor torques TA, TB from the first and<br>
second electric machines 56 and 72 based on the operator torque request<br>
TO_REQ, wherein the maximum and minimum corresponding motor torques are<br>
bound by the maximum predicted electric power limit ('PBAT_MAX_PRDTD') and<br>
the minimum predicted electric power limit ('PBAT_MIN_PRDTD'), which allow<br><br>
charging but restrict discharging of the ESD 74. The optimization functions<br>
determine penalty costs for input torques within the search range 601 that do<br>
not meet the operator torque request in combination with the motor torques TA<br>
and TB ('TO_REQ not Met'). The optimization functions further determines<br>
penalty costs for the minimum engine off input torque T1 MIN OFF that does not<br>
meet the operator torque request ('TO_REQ not Met').<br>
[0088] Fig. 7B shows a graph 650 depicting torque levels ('Torque') on the<br>
x-axis and output power levels of the ESD 74 ('PBAT') on the y-axis when the<br>
ESD 74 is operating in the forced discharge range, i.e., when the ESD 74 is at<br>
a nominally low state-of-charge, and when the powertrain system is coasting<br>
('Forced Discharge Range and Coasting'). The graph 650 includes a search<br>
range 651 between the minimum engine run input torque ('T1 MIN RUN') and the<br>
maximum input torque ('T1MAX'). The optimization functions determine a<br>
preferred input torque either at the engine off input torque ('T1 MIN OFF') or at<br>
an input torque within the search range 651.<br>
[0089] As the input torque T1 from the engine 14 increases, the amount of<br>
fuel consumed by the engine 14 increases as represented by the fuel<br>
continuum ('Fuel Continuum'). The optimization functions search input<br>
torques T1 and calculate corresponding motor torques TA, TB input from the<br>
first and second electric machines 56 and 72 based on the operator torque<br>
request To_REQ, wherein the minimum corresponding motor torques are bound<br>
by the maximum predicted electric power limit ('PBAT_MAX_PRDTD') and the<br>
minimum predicted electric power limit ('PBAT_MIN_PRDTD'), which provides a<br>
power range that allows charging but disallows discharging of the ESD 74<br>
('OPPORTUNITY CHARGING'). The optimization functions determine<br><br>
penalty costs for input torques within the search range 601 that, in<br>
combination with permissible motor torques TA and TB exceed the operator<br>
torque request ('To_REQ Exceeded').<br>
[0090] Fig. 8A shows a graph 700 depicting torque levels ('Torque') of the<br>
powertrain system on the x-axis and output powers ('PBAT') on the y-axis<br>
when the ESD 74 is operating in the opportunity charge and discharge range,<br>
i.e., when the ESD 74 is at a nominal state-of-charge, and when the powertrain<br>
system is accelerating ('Opportunity Charge and Discharge Range and<br>
Accelerating'). The graph 700 includes a search range 701 from a minimum<br>
engine run input torque ('T1 MIN RUN') to a maximum input torque ('T1 MAX')-<br>
The optimization functions determine a preferred input torque either at the<br>
engine off input torque T1 MIN OFF or at an input torque within the search range<br>
701.<br>
[0091] As the input torque T1 from the engine 14 increases an amount of fuel<br>
consumed by the engine increases as represented by the fuel continuum ('Fuel<br>
Continuum'). The optimization functions search input torques and calculate<br>
corresponding motor torques TA, TB from the first and second electric<br>
machines 56 and 72 based on the operator torque request To_REQ, wherein the<br>
minimum corresponding motor torques are bound by the maximum predicted<br>
electric power limit ('PBAT_MAX_PRDTD') and the minimum predicted electric<br>
power limit ('PBAT_MIN_PRDTD'), which allow both charging ('Opportunity<br>
Charging') and discharging ('Opportunity Discharging') of the ESD 74. The<br>
optimization functions determine penalty costs for input torques within the<br>
search range 701 that, in combination with the permissible motor torques TA<br>
and TB do not meet the operator torque request ('To_REQ not Met'). The<br><br>
optimization functions further determine penalty costs for the minimum<br>
engine off input torque that, in combination with the permissible motor<br>
torques TA and TB, does not meet the operator torque request ('TO_REQ not<br>
Met').<br>
[0092] Fig. 8B shows a graph 750 depicting torque levels ('Torque') on the<br>
x-axis and output power levels of the ESD 74 ('PBAT') on the y-axis when the<br>
ESD 74 is operating in the opportunity charge and discharge range and when<br>
the powertrain system is coasting ('Opportunity Charge and Discharge Range<br>
and Coasting'). The graph 750 includes a search range 751 from a minimum<br>
engine run input torque ('T1 MIN RUN') to a maximum input torque ('T1 MAX')-<br>
The optimization functions determine a preferred input torque either at the<br>
engine off input torque T1 MIN OFF or a search point within the search range 751.<br>
[0093] As the input torque T1 from the engine 14 increases, an amount of<br>
fuel consumed by the engine increases as represented by the fuel continuum<br>
('Fuel Continuum'). The optimization functions search input torques and<br>
calculate corresponding motor torques TA, TB from the first and second<br>
electric machines 56 and 72 based on the operator torque request TO_REQ,<br>
wherein the minimum and maximum corresponding motor torques are bound<br>
by the maximum predicted electric power limit ('PBAT_MAX_PRDTD') and the<br>
minimum predicted electric power limit ('PBAT_MIN_PRDTD'), which allows<br>
discharging of the ESD 74 ('OPPORTUNITY DISCHARGING'). The<br>
optimization functions determine penalty costs for input torques within the<br>
search range 601 that, in combination with permissible motor torques TA and<br>
TB exceed the operator torque request ('TO_REQ Exceeded).<br><br>
[0094] Fig. 9A shows a graph 800 depicting torque levels ('Torque') on the<br>
x-axis and output power levels of the ESD 74 ('PBAT') on the y-axis when the<br>
ESD 74 is operating in the free charge range, corresponding to the ESD 74 at a<br>
nominally high state-of-charge, and when the powertrain system is<br>
accelerating (Tree Charge Range and Accelerating'). The graph 800 depicts a<br>
search range 801 from a minimum engine run input torque (T1 MIN RUN') to a<br>
maximum input torque ('T1 MAX'). The optimization functions determines a<br>
preferred input torque either at the engine off input torque T1 MIN OFF or at an<br>
input torque search point within the search range 801.<br>
[0095] As the input torque T1 from the engine 14 increases an amount of fuel<br>
consumed by the engine increases as represented by the fuel continuum ('Fuel<br>
Continuum'). The optimization functions search input torques and calculate<br>
corresponding motor torques TA, TB from the first and second electric<br>
machines 56 and 72 based on the operator torque request To_REQ, wherein the<br>
minimum corresponding motor torques are bound by the maximum predicted<br>
electric power limit ('PBAT_MAX_PRDTD') and the minimum predicted electric<br>
power limit ('PBAT_MIN_PRDTD'), which allow discharging but not charging of<br>
the ESD 74 ('OPPORTUNITY DISCHARGING'). The optimization<br>
functions determine penalty costs for input torques within the search range<br>
701 that, in combination with the permissible motor torques TA and TB, do not<br>
meet the operator torque request ('TOREQ not Met') and exceed the operator<br>
torque request ('To REQ Exceed'). The optimization functions further<br>
determines penalty costs for the minimum engine off input torque, that in<br>
combination with the permissible motor torques TA and TB, does not meet the<br>
operator torque request ('To_REQ not Met').<br><br>
[0096] Fig. 9B shows a graph 850 depicting torque levels ('Torque') on the<br>
x-axis and output power levels of the ESD 74 ('PBAT') on the y-axis when the<br>
ESD 74 is operating in the free charge range, i.e., when the ESD 74 is at a<br>
nominally high state-of-charge, and when the powertrain system is coasting<br>
('Free Charge Range and Coasting'). The graph 850 depicts a search range<br>
851 from a minimum engine run input torque ('T1 MIN RUN') to a maximum<br>
input torque (T1 MAX'). The optimization functions determines a preferred<br>
input torque either at the engine off input torque T1 MIN OFF or a search point<br>
within the search range 851<br>
[0097] As the input torque T1 from the engine 14 increases an amount of<br>
fuel consumed by the engine increases as represented by the fuel continuum<br>
('Fuel Continuum'). The optimization functions search input torques and<br>
calculates corresponding motor torques TA, TB from the first and second<br>
electric machines 56 and 72 based on the operator torque request To_REQ,<br>
wherein the minimum corresponding motor torques are bound by the<br>
maximum predicted electric power limit ('PBAT_MAX_PRDTD') and the minimum<br>
predicted electric power limit ('PBAT_MIN_PRDTD'), which allow discharging but<br>
not charging of the ESD 74. The optimization functions determine penalty<br>
costs for input torques within the search range 601 that, in combination with<br>
permissible motor torques TA and TB, exceed the operator torque request<br>
('To_REQ Not Met'). The optimization functions further determines penalty<br>
costs for the minimum engine off input torque that in combination with<br>
permissible motor torques TA and TB, exceeds the operator torque request<br>
('To_REQMet').<br><br>
[0098] The disclosure has described certain preferred embodiments and<br>
modifications thereto. Further modifications and alterations may occur to<br>
others upon reading and understanding the specification. Therefore, it is<br>
intended that the disclosure not be limited to the particular embodiment(s)<br>
disclosed as the best mode contemplated for carrying out this disclosure, but<br>
that the disclosure will include all embodiments falling within the scope of the<br>
appended claims.<br><br>
CLAIMS<br>
1.	Method for controlling a powertrain system comprising an engine, a<br>
torque machine, a transmission device and an energy storage device, the<br>
transmission device operative to transfer power between the engine, the<br>
torque machine and an output member to generate an output torque, the<br>
method comprising:<br>
monitoring an operator torque request;<br>
monitoring a state-of-charge of the energy storage device;<br>
determining a first set of electric power limits and a second set of electric<br>
power limits based on the state-of-charge of the energy storage<br>
device;<br>
providing a power range for opportunity charging and discharging of the<br>
energy storage device based on the first set of electric power limits;<br>
and<br>
providing a power range for controlling output power of the energy<br>
storage device based on the second set of electric power limits.<br>
2.	The method of claim 1, further comprising permitting free charging of<br>
the energy storage device and restricting opportunity charging of the<br>
energy storage device utilizing the first set of electric power limits and<br>
the second set of power limits when the state-of-charge is in a free<br>
charge range.<br><br>
3.	The method of claim 1, further comprising permitting forced discharging<br>
of the energy storage device and restricting opportunity discharging of<br>
the energy storage device utilizing the first set of electric power limits<br>
and the second set of electric power limits when the state-of-charge is in<br>
a forced discharge range.<br>
4.	The method of claim 1, further comprising restricting free charging of<br>
the energy storage device and opportunity charging of the energy storage<br>
device utilizing the first set of electric power limits and the second set of<br>
electric power limits when the state-of-charge is in a no charge range.<br>
5.	The method of claim 1, further comprising restricting forced discharging<br>
of the energy storage device and opportunity discharging of the energy<br>
storage device utilizing the first set of electric power limits and the<br>
second set of electric power limits when the state-of-charge is in a no<br>
discharge range.<br>
6.	The method of claim 1, further comprising permitting opportunity<br>
charging and opportunity discharging of the energy storage device<br>
utilizing the first set of electric power limits and the second set of<br>
electric power limits when the state-of-charge of the energy storage<br>
device is in an opportunity charge and discharge range.<br><br>
7.	The method of claim 1, further comprising operating the engine in a<br>
cylinder deactivation state when opportunity discharging the energy<br>
storage device.<br>
8.	The method of claim 1, further comprising determining opportunity<br>
charging and discharging of the energy storage device by determining a<br>
preferred engine operating point based on the operator torque request.<br>
9.	The method of claim 8, wherein the preferred engine operating point<br>
comprises an engine power.<br>
10.	The method of claim 8, wherein the preferred engine operating point<br>
comprises an engine power and an engine speed.<br>
11.	The method of claim 8, further comprising:<br>
providing a range of engine operating points;<br>
determining costs associated with engine operating points within the<br>
range of engine operating points; and<br>
selecting the preferred engine operating point as the engine operating<br>
point having the lowest cost.<br>
12.	The method of claim 11 further comprising determining costs based<br>
upon power loss costs within the powertrain.<br><br>
13.	The method of claim 12, wherein power loss costs comprise fuel<br>
consumption costs.<br>
14.	The method of claim 1, wherein operating within the second set of<br>
electric power limits does not degrade long-term battery durability.<br>
15.	The method of claim 14, wherein the first set of electric power limits are<br>
more constrained than the second set of electric power limits.<br>
16.	Method for controlling a powertrain system comprising an engine, a<br>
torque machine, a transmission device and an energy storage device, the<br>
transmission device operative to transfer power between the engine, the<br>
torque machine and an output member to generate an output torque, the<br>
method comprising:<br>
monitoring a state-of-charge of the energy storage device;<br>
determining a set of predicted electric power limits and a set of long-<br>
term electric power limits based upon the state-of-charge of the<br>
energy storage device; and<br>
permitting free charging of the energy storage device and restricting<br>
opportunity charging of the energy storage device based on the<br>
predicted electric power limits and the long-term electric power<br>
limits when the state-of-charge is in a free charge range.<br><br>
17.	The method of claim 16, further comprising determining a preferred<br>
engine operating point based upon discharging the energy storage device<br>
when the state-of-charge is in the free charge range.<br>
18.	The method of claim 17, further comprising controlling output power of<br>
the energy storage device to charge the energy storage device when the<br>
preferred operating point based upon discharging the energy storage<br>
device is determined and when the state-of-charge is in the free charge<br>
range.<br>
19.	Method for managing electric power in a powertrain system comprising<br>
an energy storage device, an engine, a second torque generating device<br>
and a transmission device operative to transfer power among an output<br>
member, the engine and the second torque generating device, the second<br>
torque generating device electrically coupled to an energy storage<br>
device, the method comprising:<br>
monitoring a state-of-charge of the energy storage device;<br>
determining a set of predicted electric power limits and a set of long-<br>
term electric power limits based upon the state-of-charge of the<br>
energy storage device; and<br>
permitting forced discharging of the energy storage device and<br>
restricting opportunity discharging of the energy storage device<br>
utilizing the predicted electric power limits and the long-term electric<br>
power limits when the state-of-charge is in a forced discharge range.<br><br>
20. The method of claim 19, further comprising:<br>
determining a preferred engine operating point based upon charging the<br>
energy storage device when the state-of-charge is in the forced<br>
discharge range; and<br>
controlling output power of the energy storage device to discharge the<br>
energy storage device when the preferred operating point based upon<br>
charging the energy storage device is determined and when the state-<br>
of-charge is in the forced discharge range.<br><br>
A method for controlling a powertrain system includes monitoring a<br>
state-of-charge of the energy storage device and determining a first set of<br>
electric power limits and a second set of electric power limits based on the<br>
state-of-charge of the energy storage device. The method further includes<br>
providing a power range for opportunity charging and discharging of the<br>
energy storage device based on the first set of electric power limits. The<br>
method further includes providing a power range for controlling output power<br>
of the energy storage device based on the second set of electric power limits.</td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=gXM0/H6f7OKSYT25RaN54A==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==" target="_blank" style="word-wrap:break-word;">http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=gXM0/H6f7OKSYT25RaN54A==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==</a></p>
		<br>
		<div class="pull-left">
			<a href="270173-rules-driven-pan-id-metadata-routing-system-and-network.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="270175-answer-modes-in-push-to-talk-mobile-communication-services.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>270174</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>1885/KOL/2008</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>49/2015</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>04-Dec-2015</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>30-Nov-2015</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>03-Nov-2008</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>GM GLOBAL TECHNOLOGY OPERATIONS, INC.</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>300 RENAISSANCE CENTER, DETROIT, MICHIGAN</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>WILLIAM R. CAWTHRONE</td>
											<td>595 RIVER OAKS DRIVE, MILFORD, MICHIGAN 48381</td>
										</tr>
										<tr>
											<td>2</td>
											<td>ANTHONY H. HEAP</td>
											<td>2969 LESLIE PARK CIRCLE, ANN ARBOR, MICHIGAN 48105</td>
										</tr>
										<tr>
											<td>3</td>
											<td>WILFRIED BRUNSSEN</td>
											<td>3670 FIELDCREST LN. YPSILANTI, MI 48197</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>B60K6/04</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>N/A</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td></td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>60/985252</td>
									<td>2007-11-04</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/270174-method-for-controlling-output-power-of-an-energy-storage-device-in-a-powertrain-system by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 05:19:48 GMT -->
</html>
