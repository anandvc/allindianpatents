<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/228532-a-method-and-an-apparatus-in-a-multiple-processor-data-processing-system-to-synchronize-counters-incremented-by-local-clocks-for-a-plurality-of-nodes by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 09:07:48 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 228532:A METHOD AND AN APPARATUS IN A MULTIPLE PROCESSOR DATA PROCESSING SYSTEM TO SYNCHRONIZE COUNTERS INCREMENTED BY LOCAL CLOCKS FOR A PLURALITY OF NODES</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">A METHOD AND AN APPARATUS IN A MULTIPLE PROCESSOR DATA PROCESSING SYSTEM TO SYNCHRONIZE COUNTERS INCREMENTED BY LOCAL CLOCKS FOR A PLURALITY OF NODES</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>The invention relates to a method and an apparatus in a multiple processor data processing system to synchronize counters incremented by local clocks for a plurality of nodes. Transactions in a multiprocessor computer system must be coordinated precisely for correct operation. The relative phase of a &quot;master&quot; time of day register is monitored with one or more &quot;slave&quot; time of day registers. A frequency synthesizer capable of high resolution and rapid frequency adjustments can be connected to system clock. When a shift in phase between the master and slave time of day values is detected, the frequency synthesizer output can be changed by a small amount to bring the two signals back into phase.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>The invention relates to a method and an apparatus in a multiple processor data processing system to synchronize counters incremented by local clocks for a plurality of nodes.<br>
BACKGROUND OF THE INVENTION<br>
1.	Technical Field<br>
The present invention relates generally to an improved method for system synchronization and in particular to an apparatus and a method for adjusting the time of day clocks in a heterogeneous computer system. Still more particularly, the present invention provides an apparatus and a method for high resolution frequency adjustment for node synchronization that can be used in a non-uniform memory access (NUMA) computer system.<br>
2.	Description of the Related Art<br>
A phase locked loop (PLL) is a very interesting integrated circuit that blends<br>
analog and digital techniques. Although the basic design of a PLL has been<br>
known for decades, the circuit only became a	<br><br>
practical building block in integrated cxrcux<br>
where the cost has become affordable and the design has<br>
become more reliable.<br>
The PLL contains a phase detector, an amplifier, a voltage controlled oscillator (VCO), and a feedback Loop that allows the output frequency to be a replication of the input signal with noise removed or a multiple of the frequency of the input signal.  PLLs have been used for demodulation of FM signals, for tone decoding, for frequency generation, for generation of "clean" signals, and for pulse synchronization, to name but a few of the applications.  Because the output frequency is a multiple of the input frequency, it is difficult to make fine frequency adjustments using such a frequency synthesizer.<br>
A non-uniform memory access (NUMA) computer system is a multiple processor architecture where there is a single memory address space but where memory is separated into "close" banks of memory and "distant" banks of memory.  Access is "non-uniform" because the access times for the close banks of memory directly associated with the node that contains the CPU are much faster than the access times for distant memory banks at other nodes in the system.  A distinct advantage of a NUMA architecture is that it scales well, in the sense that adding more nodes and processors to the system does not create bottlenecks that degrade performance in the same way as other parallel architectures.<br>
One problem with NUMA architectures is to keep the nodes synchronized.  Transactions are often labeled with time stamps that are generated by the time of day at each node in the system.  Since these nodes have independent clocks, even though they are initialized at precisely the same time, they will eventually drift<br><br>
apart and require re-synchronization. It is important to have precise time stamps with as little "cycle slippage" as possible between the nodes.<br>
Therefore, it would be advantageous to have a<br>
method for high resolution frequency adjustment for node synchronization that can be used in a non-uniform memory access (NUMA.) computer system.<br><br>
SUMMARY OF THE INVENTION<br>
An apparatus and a method is presented for node synchronization that can be used in a heterogeneous computer system where nodes in the system do not share a common system clock.  A non-uniform memory access (NUMA) computer system is one such system where this method and apparatus can be applied.<br>
Transactions in a multiprocessor computer system must be coordinated precisely for correct operation. Time stamps are attached to transaction requests and when data is changed in the system, the relative values of time stamps are critically important.  These time stamps are based on a "time of day" value, which may simply be a register incremented by a system clock. Since each node has its own system clock, the frequency of these clocks may drift which results in variation in the time stamp values.  If the values drift too far apart, data updates in the multiprocessor computer system may be lost.<br>
This invention monitors the relative phase of a "master" time of day register with one or more "slave" time of day registers.  A frequency synthesizer capable of high resolution and rapid frequency adjustments can be connected to system clock.  When a shift in phase between the master and slave time of day values is detected, the frequency synthesizer output can be changed by a small amount to bring the two signals back into phase.<br><br>
The invention provides a method in a multiple processor data processing system to synchronize counters incremented by local clocks for a plurality of nodes, the method comprising: designating a master node from the plurality of nodes, wherein remaining nodes are designated as slave nodes; determining a phase difference between a phase associated with a counter incremented by a clock signal of a slave node to a phase associated with a counter incremented by a local clock signal of the master node; detecting a change in direction of the phase difference between the phase associated with the slave node and the phase associated with the master node; and adjusting the clock frequency of the slave node to cause the phase difference between the phase associated with the slave node and the phase associated with the master node to switch direction.<br>
The invention also provides an apparatus in a multiple processor data processing system to synchronize counters incremented by local clocks for a plurality of nodes, the apparatus comprising: a frequency synthesizer connected to a system clock at each node from the plurality of nodes, wherein the frequency synthesizer makes small incremental adjustments in output frequency; and a comparator, wherein the comparator determines a change in direction of a phase difference between the phase associated with a slave node and the phase associated with a master node.<br><br>
BRIEF DESCRIPTION OF THE DRAWINGS<br>
The novel features believed characteristic of the invention are set forth in the appended claims.  The invention itself, however, as well as a preferred mode of use, further objectives and advantages thereof, will best be understood by reference to the following detailed description of an illustrative embodiment when read in conjunction with the accompanying drawings, wherein:<br>
Figure 1 is a pictorial representation of a multiprocessor system with a non-uniform memory access (NUMA) architecture in which the present invention may be implemented;<br>
Figure 2 illustrates multiple nodes in a NUMA. architecture in which the present invention may be implemented;<br>
Figure 3 shows a conventional frequency synthesizer as it exists in the prior art;<br>
Figure 4 shows a plot of instantaneous frequency error versus instantaneous phase error for a conventional frequency synthesizer;<br>
Figure 5 shows a frequency synthesizer as it exists in a preferred embodiment of this invention;<br>
Figure 6 shows a three stage frequency adjuster in accordance with a preferred embodiment of this invention;<br>
Figure 7 shows the detailed circuitry of a dynamic frequency divider as it exists in a preferred embodiment of this invention; and<br>
Figure 8 is a plot for phase and frequency adjustments as a function of time in accordance with a preferred embodiment of this invention.<br><br>
DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENT<br>
With reference now to the figures, and in particular with reference to Figure 1, a pictorial representation of a multiprocessor system with a non-uniform memory access (NUMA) architecture.  This simplified diagram shows a system with three nodes: 100, 120, and 140. Node 100 contains four CPUs, 102, 104, 106, and 108, local memory 110, input/output channels 112, and communications channels, 114.  Node 120 contains four CPUs, 122, 124, 126, and 128, local memory 130, input/output channels 132, and communications channels, 134.   Node 140 contains four CPUs, 142, 144, 146, and 148, local memory 150, input/output channels 152, and communications channels, 154.<br>
External disk drive 156 is connect to input/output channel 152.  The nodes are interconnected using high speed channels 116 and 136.  This system contains a single address space composed of memory banks 110, 130, and 150. .Access of a CPU to its local memory bank, such as CPU 102 accessing memory 110, will be very fast since it does not need to use the node interconnections 116 or 136.  Access by a CPU to a distant memory bank, such as CPU 102 accessing memory 130, will be slower since data must be transferred on communications channel 116.<br>
Those of ordinary skill in the art will appreciate that the hardware depicted in Figure 1 may vary.  For example, the nodes may be arranged in a hypercube network where the number of nodes is a power of two (2n) and each node is connected to exactly n<br><br>
other nodes.  For example/ each node in a hypercube with 16 nodes would be connected to four other nodes. The depicted example in Figure 1 is less complex than this and is not meant to imply architectural limitations with respect to the present invention.<br>
Figure 1 is intended as an example and not as an architectural limitation for the processes of the present invention.  The type of processor in a NUMA. system may be homogeneous, but the present invention is also applicable to a heterogeneous system where processors or computers of different types are all part of multiprocessor computing environment.  It is assumed these separate processors do not share a common clock so there relative frequencies can shift, as illustrated in Figure 2 given next.<br>
Figure 2 illustrates multiple nodes in a NUMA. architecture, such as the architecture shown in Figure 1. The n nodes are labeled Node 0, Node 1, Node 2, and so forth through Node n-2, and Node n-1.  Each node has an independent frequency source denoted f0 through fn_lB These frequency sources are used to generate the timestamp stored in the time of day (TOD) register. Since these nodes have independent clocks, even when the timestamps are initialized at precisely the same time, they will eventually drift apart and require re-synchronization.<br>
Even if the nodes are architecturally similar, one of the nodes needs to be designated the master, in this diagram Node 0, and the other nodes are "slaves", in the sense that their time of day is re-synchronized to the "master" time of day.  It is important to have precise frequency generation with as little "cycle slippage" as possible between the nodes.  What is required is a frequency generation system with the possibility of making fine adjustments to the system<br><br>
clock frequency on a dynamic basis so that the time of day register value can be changed.<br>
Figure 3 shows a conventional frequency synthesizer as it exists in the prior art.  The input to the phase locked loop is reference frequency 302. Frequency divider 304 divides the reference frequency by K2, which is an integer value in the range of 1, 2, ..., N2. The output of frequency divider 304 is fed into phase detector 306.  The other input to the phase detector will be discussed below. The output of phase detector 306 is fed into charge pump 308. The charge pump creates a current for the period of time during which the phase error exists, which is integrated by capacitor CI 310 to create a voltage Vc which is fed into voltage controlled oscillator (VCO) 312.  VCO output is the frequency output from the circuit and equals (Ki/K2) fref-  This signal is fed into frequency divider 316 that divides fout by K1; which is an integer value in the range of 1, 2, . .., Ni.  The output of frequency divider 316 equals fref/K2 at steady-state and this is the second input to phase detector 306.  This completes the feedback loop. Since both inputs to phase detector 306 equal fref/K2/ any shift in one of these frequencies will be detected by phase detector 306 and feed through charge pump 308 to voltage controlled oscillator 312.  This results in fout being adjusted to bring it back into sync to a value (Ki/Ki) fref.<br>
The values of Ki and K2 must be fixed to avoid cycle-slipping due to PLL pullout frequency.  The value of fout is equal to (Ki/K2) fref-  By setting Kx and K2 to different integer values, the output frequency is synthesized based on the input frequency. However, these values cannot be changed dynamically, as explained below.<br><br>
Figure 4 shows a plot of instantaneous frequency error versus instantaneous phase error.  A pure frequency error, introduced from the steady-state condition at the origin will cause cycle slippage if it exceeds the pullout frequency of approximately 2.5 MHz. In Figure 4 it can be seen that frequency deviations less than the pullout frequency will naturally go back towards the origin, however, frequency deviations greater than the pullout frequency will result in large instantaneous frequency errors and cycle slipping when the divider settings K2 and/or K2, as shown Figure 3, are changed.  Therefore, when using a conventional phase locked loop, the values of Kx and K2 are fixed which makes fine adjustments of the output frequency impractical.<br>
Figure 5 shows a frequency synthesizer as it exists in an embodiment of this invention.  As in Figure 3 the input is still fref and the output is (K1/K2) fref. The major difference is that the divide by K2 frequency divider is moved from the input of the circuit to the output of the circuit.  As is detailed in the explanation below, this allows the value of K2 to be varied which results in the ability to make fine adjustments to the output frequency.  Such adjustments are not possible using the circuit in Figure 3 due to the problem of cycle slipping.<br>
The input to the phase locked loop is reference frequency 502, which is fed into phase detector 504. The other input to the phase detector will be discussed below. The output of phase detector 504 is fed into charge pump 506. The charge pump creates a current for the period of time during which the phase error exists, which is integrated by capacitor CI 310 to create a voltage Vc which is fed into voltaae controlled<br><br>
oscillator (VCO) 512.  VCO output equals K1  fref.  This signal is fed into frequency divider 516 that divides it by K1, which is an integer value in the range of 1, 2, ..., Nx.  The output of frequency divider 516 equals fref and this is the second input to phase detector 504. This completes the feedback loop. Since both inputs to phase detector 506 equal fref any shift in one of these frequencies will be detected by phase detector 504 and fed through charge pump 508 to voltage controlled oscillator 512.<br>
Circuit output fout 514 is generated by feeding the output of VCO 510 into frequency divider 512 which divides its input by K2 to produce the value (K1/K2) fref.  This is the same output value as the circuit in Figure 3, but there is one major difference.  The value of K2 can be varied without causing cycle slipping.<br>
Of particular interest is the case where Kx is approximately equal to K2 so that the ratio Ki/K2 is equal to 1 plus or minus a small delta factor. Substituting these values in the equation for the<br>
output frequency results in fout = (1 ± A) fref.  So by varying .the value of K2, which can be changed without cycle slipping, the output frequency can be adjusted up or down by small amounts relative to the input frequency.<br>
The circuit in Figure 5 can be cascaded to produce even finer frequency adjustments.  A three stage frequency adjuster is shown in Figure 6.  The front end of stage 1 is a conventional frequency synthesizer, similar to that shown in Figure 3.  In particular, frequency divider 602 divides the input frequency, fref, by L. This is fed to the forward path of phase lock loop 604, which contains a phase detector, such as 306,<br><br>
a charge pump, such as 308, a capacitor, such as 310, and a voltage controlled oscillator, such as 312.  In Figure 6 these components are lumped together and referred to as a phase lock loop.<br>
To close the loop, the output of phase lock loop 604 is fed through frequency divider 606 where the division is by Kx.  This output is fed back as the second input to the phase detector that is part of phase lock loop 604. The frequency output from this conventional frequency synthesizer is Kx fref/L, where both Ki and L are fixed.<br>
To allow for dynamic frequency adjustment, the output of phase lock loop 604 is the input to frequency divider 608 that divides its input frequency by K2. The value for K2 can be varied dynamically, in a manner similar to the dynamic adjustments to frequency divider 512 in Figure 5.  The detailed circuitry of this dynamic frequency divider are disclosed in Figure 7. The output from stage 1 of the three stage frequency adjuster is (Ki fref)/(K2 L) where Ki and L are fixed and K2 is variable. We label this output as f2.<br>
Stage 2 of the three stage frequency adjuster contains the forward path of phase locked loop 610, the feedback circuit with frequency divider 612 that divides by K3/ and the frequency divider 614 at the output that divides by K4.  The frequency output of ' stage 2 equals (K3 / K4) f2; this frequency is referred to as f3.  The value of K3 is fixed but the value of K4 is variable.<br>
Stage 3 of the three stage frequency adjuster has the same structure as stage 2.  It contains the forward path of phase locked loop 618, feedback loop with frequency divider 620 that divides by M, and frequency divider 622 on the output that divides by N.  The<br><br>
frequency output, fout, of this final stage equals (M / N) f3.  The values of M and N are both fixed.<br>
Substituting the various formulas for each stage of the circuit, it can be seen that fout = (K1/K2) (K3/K4) (M/N) (fref /L) where K2 and K4 are variable.  It is instructive to substitute typical frequency values to see how the output frequency can be tuned with high refinement. Let fref be 150 MHz.  The values of the various dividers will be chosen so that the output frequency will also be 150 MHz, but by varying the values of K2 and K4, fine adjustments can be obtained. L, Kx, and K3 are set to 100.  M and N are set to 200 and 2, respectively.  In case 1, K2 is set to 119 and K4 is set to 84. The resultant output frequency is 150.06 MHz; this is a change of +60,000 Hz for 150 MHz or +400 parts per million (PPM).  In case 2, K2 is set to 122 and K4 is set to 82.  The resultant output frequency is 149.94 MHz; this is a change of -60,000 Hz for 150 MHz or -400 PPM.<br>
By carrying through the calculations stage-by-stage, it is found the frequency shifts at stage 2 are less than 2.5% and at stage 3 are less than 0.08%.  As one of ordinary skill in the art will appreciate, greater refinement of frequency adjustment can be obtained when more stages are cascaded.  The frequency divider at the output of each stage, except for the last stage, can be made variable.<br>
Frequency dividers in the prior art are hardwired ■ to.a particular divisor value.  Therefore, a new "circuit had to be devised that could divide by any integer value and that could change the divisor value very quickly.<br>
With reference now to Figure 7, a circuit diagram<br>
is given for a dynamic frequency divider.  REG_A 704 holds the divisor, call it K.  REG_B 712 holds the<br><br>
current counter value.  REGJDUT 716 is a one-bit register that holds the output state.  All three registers are clocked synchronously by the input frequency.  MUX (multiplexer) 702 has two inputs, NEW_K and CURRENT__K, and one of these is selected based on the value of CHANGE_K.  When CHANGE_K is activated, the output of the MUX is the input NEW_K.  If CHANGE_K is not activated, then the output of the MUX is input CURRENT_K.<br>
Comparator A&gt;B COMP 706 is on whenever the current<br>
r<br>
counter value is less than the current divisor value. Whenever the comparator 706 is on, the incrementer INC 710 increases the counter- value by 1 and saves the new value in REG__B 712.  The output state based on the setting of REG__OUT 716 remains the same. When the counter value exceeds the divisor value, then the output of comparator 706 is off, which causes the incrementer to be set back to 1 and the value of REGjDUT 716 to be toggled resulting in the output frequency changing state.<br>
Examination of particular frequency values helps understand operation of this circuit.  Suppose the output of the multiplexer is a divisor value of 120 and the value in REG_B 712 has just been reset, so REG_B 712 counts from the value 1 up to the divisor value. When this counter equals the divisor value, it triggers the output of A&gt;B COMP 706 to change state.  This has two effects: it resets the value in REG_B to 1 and it toggles the output frequency from REG_OUT 716.  For every 120 pulses on the input, there is one pulse on the output.  So the circuit functions like a "divide by 120" circuit.<br>
Suppose that the value of NEW_K is 110 and the CHANGE_K command is received; this transfers the value<br><br>
of 110 to the "A INPUT" of the multiplexer.  There are two possible case's: the counter value in REG_B is less than 110 or the counter value is between 110 and 120. If the case the counter is less than 110, REGJB 712 continues to count but now will be reset when 110 is reached.  If the value in REG_B is already greater than 110, then the output of comparator A&gt;B COMP is switched which results in toggle of the output frequency and a reset of the counter.<br>
As one of ordinary skill in the art will appreciate, the case where NEW_K is larger than CURRENT_K is even easier.  The current counter value is less than NEW_K, so once the multiplexer switches the input to the comparator, the counter will continue to count up until the new divisor value is reached.<br>
With reference now to Figure 8, a plot is given for phase and frequency adjustments as a function of<br>
time.  The phase of the slave frequency §s  appears as<br>
sawtooth 802 at the top of the figure while the phase<br>
of the master frequency $m  appears as horizontal line 804. The term "phase" here is not to be interpreted in an analog sense, rather it is applied to the digital contents of the two time of day registers.  There registers are incremented by their respective system clocks, so as these clock frequencies slowly drift apart, the register values represent the accumulation of the phase slippage between the two clocks.  The phase of the slave frequency is initially declining and will eventually cross the phase of the master frequency.  Once this crossing is detected, the clock frequency of the slave will be adjusted.<br>
The master frequency fra appears as horizontal line 806 at the bottom of the figure.  Slave frequency 808 is shown as a dashed line at the bottom of the figure;<br><br>
it is shown initially 200 PPM greater than the master frequency 806. Vertical dashed lines 810, 812, 814, 816, 818, 820, 822, and 824 indicate the times that the phases of the master and slave signals are compared and, when required, corrections are applied.<br>
At times 810, 812, 814, and 816 the phase of the slave 802 is greater than the phase of the master 804. During these same intervals, the frequency of the slave 808 is 200 PPM greater than the frequency of the master 806.  At synchronization time 818, the phase of the slave 802 is less than the phase of the master 804. When this is detected, the variable dividers in the multistage frequency synthesizer associated with the slave are adjusted to produce a frequency of the slave 808 200 PPM less than the frequency of the master 806. This causes the phase of. the slave 802 to rise quickly until at time 820 it is again greater than the master. This causes the frequency of the slave 808 to switch between being 200 PPM less than the master 806 to being 2 00 PPM greater than the master.  During time intervals 822 and 824 the phase of the slave ,802 is still greater than the phase of the master 804, so the frequency of the slave 808 remains at 200 PPM greater than the frequency of the master 806.<br>
As one of ordinary skill in the art will appreciate, once the phase of the slave 802 becomes less than the phase of the master 804, the frequency of the slave 808 will drop to 200 PPM less than the frequency of the master 806 to bring the system back into balance.  This continual detection of phase differences and resulting frequency adjustments will keep the time of day registers synchronized during the operation of the computer system. If these adjustments<br><br>
were not made, over a longer period of time the register discrepancies would become so large as to cause system malfunctions as a result of timestamp problems.  However, since these synchronization times occur every thousand clock cycles or so in a typical embodiment, the time of day values never shift enough to cause any serious problems.  Solutions to this problem in the prior art involved expensive hardware, such as using an eternal atomic clock, to provide synchronization.  Using this invention, two or more time of day registers at different nodes in a multiple processor system can be synchronized with a minimum of additional hardware.<br>
The description of the present invention has been presented for purposes of illustration and description but is not intended to be exhaustive or limited to the invention in the form disclosed.  Many modifications and variations will be apparent to those of ordinary skill in the art.  The embodiment was chosen and described in order to best explain the principles of the invention and the practical application, and to enable others of ordinary skill in the art to understand the invention for various embodiments with various modifications as are suited to the particular use contemplated.<br><br><br><br><br><br>
WE CLAIM :<br>
1.	A method in a multiple processor data processing<br>
system to synchronize counters incremented by local<br>
clocks for a plurality of nodes, the method comprising:<br>
designating a master node from the plurality of nodes, wherein remaining nodes are designated as slave nodes;<br>
determining a phase difference between a phase associated with a counter incremented by a clock signal of a slave node to a phase associated with a counter incremented by a local clock signal of the master node;<br>
detecting a change in direction of the phase difference between the phase associated with the slave node and the phase associated with the master node; and<br>
adjusting the* clock frequency of the slave node to cause the phase difference between the phase associated with the slave node and the phase associated with the master node to switch direction.<br>
2.	The method of claim 1, wherein any node from the plurality of nodes may be designated the master node.<br>
3.	The method of claim 1, wherein the phases are compared at a specified time interval.<br><br>
4.	The method of claim 3, wherein a shorter specified time interval for comparison results in a smaller deviation in phase difference.<br>
5.	The method of claim 4, wherein the phase difference is measured by a difference in counter value at the master node and the counter value at the slave node.<br><br>
6.	An apparatus in a multiple processor data processing<br>
system to synchronize counters incremented by local<br>
clocks for a plurality of nodes, the apparatus<br>
comprising:<br>
a frequency synthesizer connected to a system clock at each node from the plurality of nodes, wherein the frequency synthesizer makes small incremental adjustments in output frequency; and<br>
a comparator, wherein the comparator determines a change in direction of a phase difference between the phase associated with a slave node and the phase associated with a master node.<br>
7.	The apparatus of claim 6, wherein the frequency synthesizer at each node contains variable frequency dividers that are used to adjust the frequency output by adjusting constants of division in the frequency dividers -<br>
8.	The apparatus of claim 6, wherein any node from the plurality of nodes may be designated the master node.<br>
9.	The apparatus of claim 6, wherein the phases of the counters are compared at a'specified time interval.<br>
10.	The apparatus of claim 9, wherein a shorter specified time interval for comparison results in a smaller deviation in phase difference.<br>
11.	The apparatus of claim 10, wherein the phase difference is measure by a difference in the counter value at the master node and the counter value at the slave node.<br><br>
12. The apparatus of 11, wherein a change in direction of the phase difference between the phase associated with the counter at the slave node and the phase associated with the counter at the master node causes the frequency synthesizer output of the slave node to shift so that the phase difference changes direction.<br><br>
13.	A method in a multiple processor data processing system to<br>
synchronize counters incremented by local clocks for a plurality of nodes,<br>
substantially as herein described with reference to figures 5 to 8 of the<br>
accompanying drawings.<br>
14.	An apparatus in a multiple processor data processing system to<br>
synchronize counters incremented by local clocks for a plurality of nodes,<br>
substantially as herein above described with reference to figures 5 to 8 of<br>
the accompanying drawings.<br>
■■'	" - /■'<br><br></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDYwOC1tYXMtMjAwMSBhYnN0cmFjdC1kdXBsaWNhdGUucGRm" target="_blank" style="word-wrap:break-word;">0608-mas-2001 abstract-duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDYwOC1tYXMtMjAwMSBjbGFpbXMtZHVwbGljYXRlLnBkZg==" target="_blank" style="word-wrap:break-word;">0608-mas-2001 claims-duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDYwOC1tYXMtMjAwMSBkZXNjcmlwdGlvbiAoY29tcGxldGUpLWR1cGxpY2F0ZS5wZGY=" target="_blank" style="word-wrap:break-word;">0608-mas-2001 description (complete)-duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDYwOC1tYXMtMjAwMSBkcmF3aW5ncy1kdXBsaWNhdGUucGRm" target="_blank" style="word-wrap:break-word;">0608-mas-2001 drawings-duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjA4LW1hcy0yMDAxLWFic3RyYWN0LnBkZg==" target="_blank" style="word-wrap:break-word;">608-mas-2001-abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjA4LW1hcy0yMDAxLWFzc2lnbmVtZW50LnBkZg==" target="_blank" style="word-wrap:break-word;">608-mas-2001-assignement.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjA4LW1hcy0yMDAxLWNsYWltcy5wZGY=" target="_blank" style="word-wrap:break-word;">608-mas-2001-claims.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjA4LW1hcy0yMDAxLWNvcnJlc3BvbmRuZWNlLW90aGVycy5wZGY=" target="_blank" style="word-wrap:break-word;">608-mas-2001-correspondnece-others.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjA4LW1hcy0yMDAxLWNvcnJlc3BvbmRuZWNlLXBvLnBkZg==" target="_blank" style="word-wrap:break-word;">608-mas-2001-correspondnece-po.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjA4LW1hcy0yMDAxLWRlc2NyaXB0aW9uKGNvbXBsZXRlKS5wZGY=" target="_blank" style="word-wrap:break-word;">608-mas-2001-description(complete).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjA4LW1hcy0yMDAxLWRyYXdpbmdzLnBkZg==" target="_blank" style="word-wrap:break-word;">608-mas-2001-drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjA4LW1hcy0yMDAxLWZvcm0gMS5wZGY=" target="_blank" style="word-wrap:break-word;">608-mas-2001-form 1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjA4LW1hcy0yMDAxLWZvcm0gMTkucGRm" target="_blank" style="word-wrap:break-word;">608-mas-2001-form 19.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjA4LW1hcy0yMDAxLWZvcm0gMjYucGRm" target="_blank" style="word-wrap:break-word;">608-mas-2001-form 26.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjA4LW1hcy0yMDAxLWZvcm0gMy5wZGY=" target="_blank" style="word-wrap:break-word;">608-mas-2001-form 3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjA4LW1hcy0yMDAxLWZvcm0gNS5wZGY=" target="_blank" style="word-wrap:break-word;">608-mas-2001-form 5.pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="228531-a-method-for-distance-education-via-a-computer-network.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="228533-dual-cavity-multi-purpose-photo-polymer-exposure-unit.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>228532</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>608/MAS/2001</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>10/2009</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>06-Mar-2009</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>05-Feb-2009</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>26-Jul-2001</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>INTERNATIONAL BUSINESS MACHINES CORPORATION</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>ARMONK, NEW YORK 10504,</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>DAVID WILLIAM BOERSTLER</td>
											<td>16 WOODED WAY ROUND ROCK, TX 78664,</td>
										</tr>
										<tr>
											<td>2</td>
											<td>MARK EDWARD DEAN</td>
											<td>3610 RANCH CREEK DRIVE, AUSTIN, TX 78720,</td>
										</tr>
										<tr>
											<td>3</td>
											<td>CAI NGO</td>
											<td>3609 RUBY RED DRIVE, AUSTIN, TX 78728,</td>
										</tr>
										<tr>
											<td>4</td>
											<td>ANDREW CHRISTIAN ZIMMERMAN</td>
											<td>2801 WELLS BRANCH PKWY, #812 AUSTIN, TX 78728,</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>H04L12/00</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>N/A</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td></td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>09/631,712</td>
									<td>2000-08-03</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/228532-a-method-and-an-apparatus-in-a-multiple-processor-data-processing-system-to-synchronize-counters-incremented-by-local-clocks-for-a-plurality-of-nodes by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 09:07:49 GMT -->
</html>
