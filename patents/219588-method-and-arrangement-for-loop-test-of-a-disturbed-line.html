<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/219588-method-and-arrangement-for-loop-test-of-a-disturbed-line by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 11:41:10 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 219588:METHOD AND ARRANGEMENT FOR LOOP TEST OF A DISTURBED LINE</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">METHOD AND ARRANGEMENT FOR LOOP TEST OF A DISTURBED LINE</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>The invention refers to single-ended test of a loop (2, 3). A test device (TD1) is connected to a remote device (3) via a line (2). The remote device is powered on and transmits intermittently handshake signals (HS1), which can disturb the loop test. A receiving and calculating unit (RE1) detects the handshake signals (HS1) and orders a sending unit (SD1) to send a halting signal (NAK-EF) to the remote device. The latter is halted for predetermined silent period of time, during which the test or a part of it is performed. If required the halting of the handshake signals is repeated. The test device sends a broadband loop test signal (S1) and receives a reflected signal (S2) during the silent period. A frequency dependent echo transfer function is generated from the signals (S1, S2) and is used for generating desired properties of the line (2) such as its length (L).</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>FORM 2<br>
THE PATENTS ACT, 1970<br>
(39 of 1970)<br>
&amp;<br>
THE PATENTS RULES, 2003<br>
COMPLETE SPECIFICATION<br>
(See section 10, rule 13)<br>
"METHOD AND ARRANGEMENT FOR LOOP TEST OF A DISTURBED LINE"<br>
GRANTED<br>
TELEFONAKTIEBOLAGET   LM   ERICSSON   (PUBL),   of   S-164   83   Stockholm, SWEDEN.<br>
The following specification particularly describes the invention and the manner in which it is to be performed.<br>
10-5-2007<br><br>
ORIGINAL<br><br>
TECHNICAL FIELD OF THE INVENTION<br>
The present invention relates to a method and an arrangement in the area of single-ended test of a signal line being subjected to disturbances from a remote end device,<br>
DESCRIPTION OF RELATED ART<br>
In today"s telecommunication it is essential from an economical point of view to use existing copper wires for broadband transmission. These copper wires, often called twisted-pair copper loops or copper access lines, have among themselves very different properties from a broadband point of view. Telecom operators therefore have a great interest in testing the properties of the lines to be able to fully utilize their transmission capacity. The abovementioned is discussed in an article by Walter Goralski: "xDSL Loop Qualification and Testing", IEEE Communications Magazine, May 1999, pages 79-83. The article also discusses testing possibilities and test equipment.<br>
The transmission properties of copper lines are more closely discussed in an article by Jose E. Schutt-Aine: "High-Frequency Characterization of Twisted-Pair Cables", IEEE Transactions on Communications,Vol. 49, No. 4, April 2001. Propagation parameters of high bit rate digital subscriber twisted-pair cables are extracted by a wave propagation method model. The frequency dependence in the properties of the transmission line and the influence of the skin effect on these are studied.<br>
Testing the transmission properties of a line can be performed by sending a test signal from one end of the line and measure it at the other end, so called double end test. That method is labour intensive and expensive. A more frequently used method is to send a test signal from one end<br><br>
of the line and measure on the reflected pulse, so called Single-Ended Loop Testing, SELT. In an article by Stefano Galli and David L Waring: "Loop Makeup Identification Via Single Ended Testing: Beyond Mere Loop Qualification", IEEE Journal on Selected Areas in Communications, Vol. 20, No. 5, June 2002, is discussed the influence of different types of line discontinuities and generated echoes in connection with single-ended testing. A mathematical method for handling the echoes is presented and also an experimental validation of the method.<br>
It is an obvious choice from a technical point of view to use a laboratory-type measurement device for performing a SELT. Using such a device is however expensive. Irrespective of that, the measurement can be influenced by disturbances which arises when a Customer Premises Equipment (CPE), that is connected to the remote end of the line, is trying to perform a handshake procedure. The handshake procedure makes it difficult to analyse the measured echo-frequency response and the normal noise on the line.<br>
In single-ended testing it is advantageous to, instead of the laboratory device, use a transceiver as a part of a mesurement device for the loop under test.. The broadband communication transceiver is however no perfect voltage generator but introduces distortion in the measurement. How to remove this distortion is discussed in a standardization paper by Thierry Pollet :"How is G.selt to specify Sn (calibrated measurements)?", ITU Telecommuni-cation Standardization Sector, Temporary Document OJ-091; Osaka, Japan 21-25 October, 2002. A calibration method is presented, based on a one port scattering parameter Sn, that includes transceiver parameters which are generated during a calibration. Also in a standardization paper by Thierry Pollet : "Minimal information to be passed between measurement and interpretation unit", ITU Telecommunication Standardization Sector, Temporary Document OC-049; Ottawa,<br><br>
Canada 5-9 August, 2002, the one port scattering parameter S11 is discussed. Also when using the trasceiver for the SELT the remote CPE can disturbe the measurement by trying to perform a handshake procedure.<br>
SUMMARY OF THE INVENTION<br>
The present invention is concerned with the abovementioned problem how to avoid the influence of a handshake procedure on a single-ended loop test of a copper access line connected to a CPE. As long as the line stays inactivated the powered on CPE will try to perform a handshake procedure transmitting intermittent handshake signals. Due to these handshake signals it is difficult to analyse a measured echo-frequency response when the connected CPE modem is powered on.<br>
Another problem arises when a transceiver is utilized in the single-ended test of the line. The problem is how to also compensate for the influence on the SELT measurement of the transceiver itself.<br>
Still a problem is how to generate and store transceiver values for the compensation.<br>
The problem is solved in the following manner. In the handshake procedure the CPE transmits intermittent narrowband signals, handshake tones, of predetermined frequencies. The handshake tones are detected by the device performing the SELT measurement and the handshake tones are halted for a time interval. During this interval the SELT measurement is performed, if necessary after repeated halts of the handshake tones.<br>
When using the transceiver for the SELT measurement, the problems in connection with that are solved by calibrating a test transceiver, which is a typical broadband communication transceiver, and generate transceiver model values. These<br><br>
values are stored and are used in the transceiver for communication purposes, which is connected to the loop to be tested. A test signal, as reflected by the loop, is measured at the communication transceiver, giving a loop test result. The influence on this result by the communication transceiver itself is compensated for with the aid of the stored transceiver model values.<br>
A purpose with the present invention is to improve the SELT measurement of the access line, when the CPE sends its intermittent handshake signals.<br>
Another purpose with the present invention is to compensate for the influence of a transceiver on the SELT testing of the line.<br>
Still a purpose is to generate and store transceiver values for the compensation.<br>
An advantage with the present invention is that the SELT measurement of the access line can be performed when the CPE sends its intermittent handshake lines.<br>
Another advantage with the invention is that the influence of the transceiver on the SELT measurement of a copper access line can be compensated for.<br>
A further advantage is that transceiver values for the compensation can be generated and stored and can be applied for all standard broadband transceivers, based on the same hardware as the tested one. Hence a costly procedure of calibrating an actual transceiver will be eliminated.<br>
Still an advantage is that the generated transceiver values have an easily understandable meaning.<br>
Still another advantage is that the test transceiver can be any one of the transceivers used for communication purposes.<br><br>
The invention will now be more closely described with the aid of embodiments and with refernce to the enclosed drawings.<br>
BRIEF DESCRIPTION OF THE DRAWINGS<br>
Figure 1 shows a simple block schematic over a test device and a transmission line/<br>
Figure 2 shows a frequency diagram with handshake tones;<br>
Figure 3 shows a time diagram with periodic handshake sequences;<br>
Figure 4 shows a flow chart for SELT measurement;<br>
Figure 5 shows a simple block schematic over a transceiver and the line;<br>
Figure 6 shows a somewhat more detailed block schematic over a part of the transceiver and the line;<br>
Figure 7 shows a block schematic over the transceiver connected to an impedance of known value;<br>
Figure 8 shows a flow chart for generating of transceiver characteristic values; and<br>
Figure 9 shows a flow chart for generating of an impedance value for the line.<br>
DETAILED DESCRIPTION OF EMBODIMENTS<br>
Figure 1 shows a simple block schematic over a test device TD1 at a central office, connected to a remote device 3 at a customer"s premises via a digital subscriber line 2 (DSL). The line is seen from the end of the test device, and this end is called the near end of the line while the other end at the device 3 is denoted as the remote end. The line 2 is a conventional copper line of a length L, which has certain<br><br>
properties, such as signal attenuation in different frequency ranges. The test device has a sending device SD1, a receiving device RE1 and a synchronizing device SHI. The latter is connected to the sending device SD1, which in turn is connected to the line 2 and to the receiving device RE1.<br>
As mentioned above it is essential for a network operator to be able to utilize the already existing copper line 2 for the broadband transmission. The operator therefore must know the line properties, such as the length L, signal attenuation and transmission capacity. These properties can normally be determined after a measurement, which is advantageously performed from the near end of the line as a so called Single-Ended Loop Test, SELT. The parameters are related to a line input impedance Zin(f) which can be evaluated using transmitted and reflected test signals.<br>
The test device TD1 transmits such a test signal, a broadband loop test signal SI, which is reflected by the remote device 3 and is measured by the test device as a reflected signal S2. With the aid of a quotient S2/S1 parameters of the line 2 can be determined, as will be described in detail below. The measurement of the reflected signal S2 can however be disturbed by the remote device 3, which tries to perform a handshake procedure. To avoid this disturbance, first the presence of a handshake signal must be detected.<br>
During the handshake procedure the remote device 3 intermittently sends a narrowband handshake signal HS1, which can interfere with the signal S2 and render the line measurement more difficult. The interfering handshake signal can however be detected. The loop test signal SI, used in the present embodiment, has a frequency in the range of 0-1104 kHz or higher. It is based on a measurement signal that has a number of orthogonal frequency points<br><br>
coinciding with the so called Discrete Multi Tone signal. This signal is used for modulation purposes in the ADSL standard ITU-T G.992.1 The test device, that measures the reflected signal S2 in this frequency range 0-1104 kHz, therefore can be used for the detection of the handshake signal. A noise signal in the range of 0-276 kHz or higher is also to be measured by the test device and also this measurement can be used for detecting the handshake signal HS1. The handshake tones in standardized DSL transmission due to the ITU-T standard G.994.1 uses narrowband signals modulated with plain DPSK scheme. Due to its limited bandwidth it is fairly simple to distinguish the individual frequency position of these handshake signals. In for example ADSL there are three sets of mandatory upstream handshake tones, based on a frequency f0 = 4.3125 kHz:<br>
ADSL Annex A : N=[9, 17, 25]<br>
ADSL Annex B : N=[37, 45, 53]<br>
ADSL Annex C : N=[7, 9]<br>
The handshake tones have the frequency F = N x f0 . One or more of the above tones may be transmitted during handshake for one specific annex setting.<br>
The above handshake signals can be observed as narrowband disturbance in a noise measurement, delivering a mean value noise floor over frequency. In figure 2 is shown handshake tone disturbance in such a noise measurement. The figure is a diagram with the frequency / in kHz on the abscissa and the signal level A in dBm/Hz on the ordinate. In a frequency range from about 200 kHz and higher the noise NS1 has a rather constant level. In the range 0-200 kHz the handshake signal HS1 can be observed. The figure shows that the particular remote device 3 connected has four tones active during the handshake. By identifying these frequency tones in the spectra it appears that it is an ADSL Annex A<br><br>
set, fulfilling the mandatory set of handshake tones, and with an optional additional tone from Annex B.<br>
Further, handshake tones are transmitted following a standardized time scheme. The signals are not continuous but sent with periodic intervals leaving the line silent in between. For example the standard ITU-T G994.1 states:<br>
"If a NAK-EF message is received in any state, the receiving station shall return immediately to the initial G. 994.1 state (R-SILENTO for an HSTU-R, C-SILENTI for an HSTU-C) and remain silent for a minimum period of 0.5 s. It may then initiate another G.994.1 session. "<br>
This means that if an operator wants to perform a SELT measurement of the line 2 from the test device TD1, the handshake procedure from the remote device 3 can be halted. The handshake signals HS1, e.g. as described in figure 2, are indicated by the receiving device RE1. The synchronizing device SHI orders the sending device SD1 to send the NAK-EF message, which halts the handshake tones HS1 for a time interval of at least 0.5 seconds. During this interval the loop test signal SI is sent from the sending device on order from the synchronizing device SHI and the reflected signal S2 is received in the receiving device RF1. To get full information about the line 2 it may be necessary to resend the loop test signal SI and repeat the SELT measurement procedure. The complete measurement will then follow figure 3, which is a diagram with the time T on the abscissa, showing SELT measurement synchronized with handshake signals. The figure shows the handshake signals HS1 followed by the NAK-EF message and interleaving time intervals Til, used for the SELT measurement. It should be noted that it is only the SELT measurement that is to be performed in the time intervals Til. The calculations concerning the line properties based on the SELT measurement can go on continuously.<br><br>
As an alternative to the standard ITU-T G.994.1 there is an ADSL standard ANSI T1E1.413 using a different method for handshake.<br>
The SELT measurement method described above will be summarized in connection with a flow chart in figure 4. In a step 401 the customer premises equipment CPE, the remote end device 3, is connected to the remote end of the line 2. The test device is connected to the near end of the line in a step 402 and in a step 403 the handshake signals HS1 are transmitted from the CPE. In a step 404 the handshake signals HS1 are indicated in the receiving device RE1. The handshake signals are halted for the time interval Til of predetermined duration in a step 405. In a next step 406 the SELT measurement is performed and in a step 407 it is investigated whether the SELT measurement is ready. In an alternative NOl the method step 404 is repeated with an indication of the handshake signals. Then the method steps 405, 406 and 407 are repeated until the alternative YES1 after the step 407 is the actual one and the procedure ends in a step 408.<br>
Below will be described in an embodiment how the single-ended loop test, the SELT, is performed.<br>
In figure 5 is shown a transceiver 1 connected to the remote device 3 via the line 2. The transceiver is suitable for communication purposes and is described such that the SELT measurement can be explained. The transceiver 1 includes a digital part 41, a codec 42 and an analog part 43, the so called Analog Front End AFE. The digital part includes in turn a digital signal generator 13 and a computational device 11 interconnected with a memory device 12. The transceiver 1 also has an input 63 and an output 64. The generator, which is connected to the computational device 11, sends a broadband input loop test signal vin to the remote device 3 via the codec 42, the analog part 4 3<br><br>
and the line 2. A reflected broadband loop test signal vout is received in the computational device from the line 2 via the analog part and the codec.<br>
The broadband loop test signal Vj.n, sent for such measuring purposes, is reflected back over the line 2 and is noted as the loop test signal vout. As will be described below, the signals vin and vout are used in the determining of the properties of the line 2.<br>
What the operator in fact needs to know is the input impedance Zin(f)  of the line 2 including the remote device 3,<br>
measured from a transceiver interface 5 and being independent of the transceiver 1 itself. A first step in getting the required line properties is to generate an echo transfer function HtchB(f)    for the actual line 2. This is<br>
calculated by performing a frequency translation of the<br>
broadband signals vin and vout, resulting in signals Vin (J)<br>
and<br>
V0ut (/)   in the frequency domain. The transfer function is<br>
generated by the relationship<br>
#«*,(/)= Vout(./)/Vin(/&gt;	(1)<br>
in which the frequency is denoted by /.<br>
Naturally, the function Htcho{f) includes properties of the transceiver 1. Below it will be described by an example how the required line properties of the line 2 can be obtained with the aid of the frequency dependent echo transfer function HfCho(f) . First, the transceiver analog part 43 will<br>
be described somewhat more in detail in connection with figure 6. This is to throw light upon the difficulties in characterizing the transceiver 1 in a simple manner.<br>
Figure 6 is a simplified block diagram over the analog transceiver part 43 and the line 2 of figure 5, yet somewhat more detailed than in that figure. The analog part 4 3<br><br>
includes an amplifier block 6, a hybrid block 7, a sense resistor RS and a line transformer 8. The amplifier block 6 has a driver 61 with its input connected to the digital generator 13 via the codec 42, not shown. I also has a receiver 62 receiving signals from the line 2 and having its output connected to the transceiver digital part 41, not shown. The driver output is connected to the sense resistor RS, the terminals of which are connected to the hybrid block 7. The latter has four resistors Rl, R2, R3 and R4 and is connected to inputs of the receiver 62. The line transformer 8 has a primary winding LI and two secondary windings L2 and L3 interconnected by a capacitor CI. The primary winding LI is connected to the sense resistor RS and the secondary windings L2 and L3 are connected to the line 2. The frequency dependent line input impedance at the interface 5<br>
is denoted Z^if) and the input impedance at the primary side of the transformer is denoted ZL.. The termination of the far-end of the line 2, the remote device 3, is represented by an impedance ZA.<br>
The signal vin, now in analog form from the codec 42, is amplified in the driver block 61. The output impedance of the driver is synthezised by the feedback loop from the sense resistor RS. The line transformer 8 has a voltage step-up from the driver to the loop. The capacitor CI has a DC-blocking function. The transformer and the capacitor act as a high pass filter between the driver 61/receiver 62 and the loop 2, 3 with a cut-off frequency around 30 kHz. No galvanic access to the loop is possible in this case.<br>
In the present description a frequency-domain model of the echo transfer function Htcho(f)    is used to calculate the<br>
frequency dependent input impedance Zln{f) of the loop 2 and 3, as seen by the transceiver 1 at the interface 5. The input impedance can then be used for calculating several loop qualification parameters. This frequency-domain model<br><br>
of the echo transfer function HKha(f) includes three parameters ZM(f), Z^{f) and HJf) which relate to the transceiver 1. The parameters, transceiver model values, fully describe the transceiver from this point of view.<br>
The parameters Zh0(f),      ZM(/)  and H^f)     are  originally<br>
deduced analytically from the circuits of the transceiver. Some minor simplifications have been made in the analysis, but the model has proved to be very accurate. In the enclosed Appendix 1, "Simulation of the echo transfer function for DAFE708" it is shown how the model of the echo transfer function Htcha(f)   is derived.<br>
The values of the parameters are normally not calculated directly from the component values of the transceiver, but are generated from measurements in a calibration process, as will be described below.<br>
In the earlier mentioned standardization paper "How is G.selt to specify Sn (calibrated measurements)?" the scattering parameter Sn is expressed with three parameters CI, C2 and C3 for the transceiver. These parameters should not be confused with the transceiver model values Zh0(f),<br>
^hyb(f) and H„(f) of the present description. The parameters CI, C2 and C3 are dimensionless quantities and are not given any concrete meaning, although they are successfully used to model the transceiver. The transceiver model values of the present description are recognized in the analysis and can be interpreted directly:<br>
The value H„(f) is the frequency dependent echo transfer function for the transceiver 1 with open connection to the line 2, i.e. when the line impedance is of unlimited magnitude.<br><br>
The value Z^(/) is the transceiver impedance as measured at<br>
the connections to the line 2, i.e. the transceiver impedance at the interface 5 as seen from the line side.<br>
The value ZM(f)   can be expressed as Zh0(f)   = H0(f)-    Z^if),<br>
in which the value H0(f ) is the frequency dependent echo transfer function for the transceiver 1 with the connections to the line 2 shortcut and the value Z^A(/) is defined above.<br>
It is to observe that the transceiver model values are not measured directly, but are generated in a process as will be described below.<br>
The echo transfer function Hcchg(f) of equation (1) can be expressed as:<br><br>
in which<br>
Zln(f)   is the earlier mentioned input impedance of the line 2 as a function of the frequency / ; and<br>
Z(,0(/) r  Zh&gt;fc(/) and Hv(f)    are complex vectors and are the transceiver model values mentioned above.<br>
After a calibration measurement of a certain transceiver version its vectors can be determined. These vectors, the transceiver model values, are then pre-stored in for example the software of the transceivers of the measured version, e.g. in the memory 12 of the transceiver 1. The model values are then used for the loop test of the line 2 with its initially unknown properties.<br>
In connection with figure 7 will be mentioned how the calibration measurement is performed. The figure shows a<br><br>
test transceiver 31, to which test impedances 9 of different predetermined values are connected at the interface 5 for the line 2. A measurement device 32 with a memory 33 is connected to the input 63 and the otput 64 of the test transceiver. The measurement device 32 sends a control signal VC1 to the test transceiver 31 and initiates it to generate a broadband transceiver test signal vtin , one for each value of the test impedance 9. A reflected output transceiver test signal vt0ut is received in the test tranceiver, which sends a corresponding control signal VC2 to the measurement device. A complete measurement requires the measurement of three selected impedance values. The echo transfer function Hrcho(f) is then generated in accordance with the relationship (1) .<br>
Using three impedance values for the calibration is sufficient to generate the transceiver values. To get more precise values, more than the three impedances can be used. This gives rise to an overdetermined equation system. An example on a set of standard values of the test impedance 9 for the calibration is an open circuit, a shortcut circuit and an impedance value corresponding to an expected value for the loop, e.g. 100 ohms. It should be noted that a value for a purely resistive component is normally valid only up to a limited frequency, e.g. 1 MHz. For higher frequencies it is recommended to measure the. impedance value of the "resistive" component.<br>
The generating of the three complex vectors ZM(f),    Zhyb(f)<br>
and //„(/) for the measured transceiver 31 is performed in the following manner. The model of the echo transfer function in the relationship (2) can be expressed as:<br><br><br>
or equivalently j4x = ft, where<br>
The general solution to the system Ax = b   is<br><br><br>
By using the values of the transfer function Htcho(f), measured as described above with different types of the input terminations 9, the vector x can be solved. The thus generated calibration values of the vector x are stored for example in the memory 33 of the measurement device 32 or in the memory 12 of the transceivers of the measured version. Note that A, x and b normally are complex valued and frequency dependent.<br>
After a measurement of the echo transfer function Hnho(f)   for<br>
the actual unknown line 2, its input impedance as seen by the transceiver 1 at the interface 5 can be generated as:<br><br>
To summarize, a certain hardware for transceivers like the transceiver 1 is first calibrated. This is performed for the test transceiver 31 with the aid of the impedances 9 and the transceiver test signals vtin and vtout- The vector x is calculated and the values of the vector x are stored and can be used for any transceiver with the same hardware. The echo<br><br>
transfer function Hecho(f) is then measured by the transceiver 1 for the line 2 having unknown properties with the aid of the loop test signals vin and vout. The frequency dependent input impedance Z,„(f) of the line 2, as seen from the transceiver interface 5, is then generated.<br>
In the embodiment described above, both the transceiver test signals vtinjVtcut and the loop test signals vin,vout have been broadband signals. It is possible to use signals of any desired frequency width both for the calibration and the measurement of the line. The calibration and the loop test will of course be valid only for the selected frequency range. It has been mentioned that the transceiver model values are stored in the memory 12 of the transceiver 1. An obvious alternative is to store the values in the memory 33 or in a memory in some central computer and transmit them to the transceiver 1 when they are required for the generating of e.g. the input impedance ZM(f)    of the line 2. Also, in<br>
the description has been mentioned the test transceiver 31 and the transceiver 1 for communication purposes. The test transceiver 31 can be any of a set of transceivers which are based on one and the same hardware. The test transceiver can in an obvious way be used for the communication purposes.<br>
The above generating of transceiver model values and the generating of the impedance value for the line 2 will be shortly described in connection with flowcharts in figures 8 and 9.<br>
In figure 8 is shown the generating and storing of the transceiver model values. The method begins in a step 601 with the selection of the transceiver 31 for test purposes. In a step 602 an impedance 9 with a predetermined value is selected and in a step 603 the impedance is connected to the line connection of the test transceiver 31. In a step 604 the  transceiver  test  signal  vtin  is  sent  through  the<br><br>
transceiver 31 to the line 2. To get transceiver model values that can be used for a wide range of applications the test signal is a broadband signal. The signal is reflected by the remote device 3 and after passage of the transceiver 31 it is received as the transceiver test signal vtout in a step 605. In a step 606 the echo transfer function Heeho(f) is generated in the computational device 32 for the actual impedance 9, after first having transformed the signals vtin and vtout into the frequency domain. In a step 607 it is investigated whether measurements for a sufficient number of the impedances 9 have been made, so that the transceiver model values ZM{f),   Z^if)  and //«,(/) can be generated. In an<br>
alternative NOl a further impedance 9 is selected in the step 602. For an alternative YES1 the transceiver model<br>
values Zh0(f), Z^if)   and #„(/) are generated in a step 608.<br>
In a step 609 the vector x, i.e. the transceiver model values, are stored in the memory 33. Next, the transceiver 1 for communication purposes is selected in a step 610. In a<br>
step 611 the transceiver model values Zh0(f), Z^if)    and<br>
#»(/) ar® transmitted to the selected transceiver 1 and are stored in the memory 12.<br>
Figure 9 shows the generating of the frequency dependent line input impedance Zin(f) at the transceiver interface 5 to the line 2. In a step 701 the transceiver 1 for communication purposes is connected to the line 2 with the remote device 3. The loop test signal vin is sent in a step 702. The loop test signal vout as reflected by the line 2 is received by the transceiver and is measured in a step 703. In a step 704 the frequency dependent echo transfer function HlchB(f) is generated in the computational device 11. The frequency dependent impedance value Z,„(/) for the line 2 is generated in the device 11 with the aid of the stored transceiver model values and the echo transfer function,<br><br>
Appendix 1<br>
SIMULATION OF THE ECHO TRANSFER FUNCTION FOR DAFE708 Abstract<br>
Purpose<br>
Contents<br>
1	Introduction	20<br>
2	Simulation model for symbolic analysis	20<br><br>
2.1	Subscriber cable	20<br>
2.2	Line transformer	21<br>
2.3	Out-of-Band filter	24<br>
2.4	Line driver/receiver	28<br><br>
3	Echo transfer function and Loop impedance	34<br>
4	Echo impulse response	38<br>
5	Annex A - Verification of simulation model	42<br>
6	References	49<br><br>
INTRODUCTION<br>
The DAFE 708 unit contains the Broadcom BladeRunner chipset (DSP and CODEC) and 10 analogue line interfaces. The line interfaces are designed around the Infineon line driver /receiver PBM 39714. For testing the single-end loop test (SELT) algorithms and investigating manufacturing test features it might be helpful to have a simulation model of the analogue front end. With this it is easy to examine the impact of changing the external load or loop connected to the line interface as well as the internal components on the PCB.<br><br>
In the following such a model based on symbolic expressions is developed for the analogue part of the DAFE 708. The main purpose is to derive expressions, which can be used for evaluation of the echo transfer function<br>
"•echo-<br><br>
LINE TRANSFORMER<br>
SUBSCRIBER LOOP<br>
The circuit in consideration is shown in Figure 1. The analogue part is separated in three blocks - the PBM 39714 driver/receiver/echo canceller, the out-of-band noise suppression filter and the line transformer. The CODEC output is assumed to be a constant voltage source ein. Two series capacitors are inserted between the CODEC output and the line driver. The echo transfer function is defined as Hecho ~ vout/ein where v^ is the received output voltage at the CODEC input. The CODEC input has a differential load impedance of 24 kQ. The shown capacitors C4, C5 and C6 are inserted to perform some low pass and high pass filtering of the receiver output.<br>
Below each block is analysed and symbolic expressions are formulated. Finally these expressions can be combined to generate the echo transfer function. Before Hecho can be evaluated the input impedance Zfti of the subscriber loop must be calculated. This requires knowledge to the primary constants of the cable, the loop length and the far-end termination.<br>
SIMULATION MODEL FOR SYMBOLIC ANALYSIS<br>
SUBSCRIBER CABLE<br>
The input impedance of the subscriber loop is calculated by using the expressions in Annex A of Ref. [1] for the primary constants for ETSI loops. When the primary constants are found the secondary constants are given by<br><br>
RCT/SE2004/0OOS66<br><br><br>
LINE TRANSFORMER<br><br>
With a given taT-end termination ZT the input impedance Z|N can be calculated by using the expression<br><br>
Figure 2: Line transformer for DAFE 708<br>
The line transformer together with the series capacitor C1 is shown in Figure 2. All four windings L1, L2, L3 and L4 are placed on the same magnetic core and are closely coupled together. It is assumed that the number of turns for L1 and L2 are equal and the same for L3 and L4.<br>
When considering only differential, balanced port signals the schematics of the transformer can be simplified in order to make the derivation of the characteristics easier.<br><br><br>
Figure 3: Simplified model for line transformer<br>
The four winding symmetrical transformer is divided into two single transformers as shown in Figure 3. Each transformer is replaced by an equivalent circuit, which consists of an ideal transformer and the two inductors L1 (L2) and Lis (L2s). The ideal transformer has a turns ratio N equal to the original transformer. The ideal transformer imposes constraints on the terminal voltages and currents of the transformer as indicated in Figure 3.<br>
The inductor L1 (L2) represents the main inductance on the line side and the inductance is actually half the open circuit inductance measured at the line side. Lis (L2s) represents the leakage inductance and is half the short circuit inductance measured at the line side (both with C1 shorted).<br>
In order to find the chain matrix of the line transformer the port voltages and currents shown in Figure 3 are considered. The equations of the circuit are<br><br>
If we assume that the two single transformers are identical (L1 - L2) we have i4 = i3 and v4 = v3. This together with equation 3 to 6 can be used to eliminate v3, v4, h, u from equations 1 and 2.<br>
This expression is introduced in the first equation together with the substitutions. After rearrangement the result is<br>
The second equation gives after the substitutions<br><br><br><br>
The chain matrix is defined as<br><br>
Comparing with the last two expressions we have the chain parameters of the line transformer<br><br>
where we have introduced Lm = L, + L2 and U = Lis + L2s as the total main inductance and the total leakage inductance respectively measured at the line side (with C, shorted).<br>
The actual component values for release R1.1 are:<br>
U, = 2.1 mH, L, = 2 uH, d = 33 nF, N = 2.0.<br>
The magnitude of the four chain parameters with these values is presented in Figure 4.<br><br><br>
	 AT<br>
	 BT<br>
	 CT<br>
	 DT<br>
Figure 4: Chain parameters A, B, C and D of line transformer<br>
OUT-OF-BAND FILTER<br>
In order to suppress noise and harmonics of distortion above the ADSL band it has been necessary to introduce an Out-of-Band filter between the line driver and the line transformer. The OOB-filter has the following configuration shown in Figure 5.<br><br>
Figure 5: Filter for out-of-band noise<br>
The impedance of the series branches is Z\ = Z2 - sLFi assuming that LFi = LF2. The impedance of the shunt branch is<br><br><br>
With i2 = 0 and a voltage V1 applied we have<br><br>
If the expressions for the impedances are substituted into the equation the result is<br><br>
With v2 - 0 and a voltage v1 applied we have i2 = V1/LF1S or<br><br>
With i2 = 0 and a current i1 applied we have v2 = Z3it or i,= v2/Z3<br><br>
With v2 = 0 and a current u applied we have i2 = h or i, = i2. The chain matrix is defined as<br><br>
The actual component values for release R1.1 are:<br>
Comparing the expressions derived above we have the chain parameters of the OOB-filter:<br><br><br>
The magnitude of the four chain parameters with these values is presented in Figure 6.<br><br><br>
		AF<br>
		BF<br>
		CF<br>
		DF<br>
Figure 6: Chain parameters A, B, C and D of OOB-filter<br>
If the input impedance of the subscriber loop Z|N is known the driver load impedance ZL of the AFE shown in Figure 1 can be found from<br><br>
The four coefficients are obtained by multiplication of the chain matrix of the OOB-filter with the chain matrix of the line transformer<br><br>
If the subscriber loop is replaced by a resistor of 100 Q the load impedance ZL turns out as illustrated in Figure 7.<br><br><br>
Hz<br>
Figure 7: Driver load impedance ZL with the line interface terminated into 100 Q<br>
In the ideal case ZL should be given by 100 Q/N2 = 25 Q, which is seen only to be the case between 100 kHz and 1 MHz approximately. The peaking at low frequencies is caused by the line transformer and the series capacitor at the line side. The series resonance circuit of the OOB-filter is responsible for the minimum at 2 MHz.<br><br><br>
Figure 8: Schematics of the AFE with the PBM 39714 line driver/receiver<br>
The Analogue Front-End (AFE) consists apart from the line transformer and OOB-filter of the PBM 39714 line driver/receiver and a few external components. PBM 39714 is a differential mode line driver and receiver including an echo canceller bridge. A suitable model of the device is shown in Figure 8. The input terminals are TVP and TVN with the input resistors RA6 and RB6. The amplified transmit signal appears between the driver output terminals DR1 and DR2. A sense impedance network Zs consisting of RSA, CSA and RSHA (RSB, CSB and RSHB) is placed in series with the driver output. The voltages at the terminals of the sense impedance network are converted into currents through the two 3 kQ resistors at the terminals SA1 and SB1 (SA2 and SB2). The currents are subtracted by the two current controlled current sources FA1 and FA2 (FB1 and FB2). The difference current represents the voltage across the sense impedance network or the driver output current multiplied by Zs. This current is fed back to control the driver output voltage. The result is that the driver output impedance is equal to<br><br>
Zs multiplied by a real scale factor K. A second feedback path through the controlled source FA3 (FB3) is used to set the transmit gain of the driver output stage.<br>
The echo canceller consists of the resistor bridge RA7, RA8, RB7 and RB8. If the load impedance ZL is matched to the sense impedance K*ZS the echo signal between output terminals RP and RN will ideally be zero with the selected resistor ratio of the bridge.<br>
The receive path is purely passive. The received signal across the line transformer is sensed through the bridge resistors RA8 and RB8 where it appears between the terminals RP and RN. The echo canceller however also affects the received signal. The parallel capacitor CR and the two series capacitors CRP and CRN constitute an output filter together with the receiver output impedance and the CODEC input impedance.<br>
In order to derive a symbolic expression for the echo transfer function the simplified, unbalanced model of the line driver/receiver in Figure 9 is used. A detailed analysis of the circuit is presented in Ref. [2].<br><br>
Figure 9: Simplified, unbalanced model for deriving the echo transfer function of the line driver/receiver<br>
where VoU(/v"olJt is the transfer function of the output filter.<br>
The echo transfer function Hecho(0 is given by Hecho = v0Ut/ejn. This can also be written as<br><br><br>
The following equations apply to the circuit in Figure 9 (see also section 2.3 of Ref. [2])<br><br><br><br>
By substitution it is possible to derive<br><br><br>
and<br><br>
It is now possible to eliminate v2 and to find v3 expressed by the equation<br><br><br>
The last two expressions are now substituted into the equation for v"out to give<br><br>
If we assume that R5 = Re and R7 = Rg it can be rearranged to<br><br>
It is seen that v"ou( = 0 if Re/Re = 1 + Zs/Zu (echo cancellation). The  <br><br>
The coefficients may now be identified by comparing the last two expressions. Then we have<br><br><br>
If we write the echo transfer function Hecho as<br>
To find the echo transfer function we need to derive the transfer function for the output filter Hout - Wv"out. By considering the filter circuit in Figure 9 it is possible to calculate the transfer function to<br><br>
we see that the multiplier is G = G-i*H0Ut while the other coefficients remain unaltered.<br>
For calculations with the expression for Hecho we need the frequency dependent quantities Z,, Zs and p.<br>
The sense impedance Zs is given by<br>
Zi is given by<br><br><br>
The open loop gain u is determined by the DC gain u0 and the corner frequency given by the resistor Rp and the capacitor Cp<br><br>
With these modifications taken in consideration the coefficients of H^o now finally can be identified as follows:<br><br><br><br>
If the load impedance ZL1 is known the echo transfer function can be calculated from<br><br>
Note that ZL1 in this expression shall only be half the impedance ZL calculated in section 2.3I This is because the expression for Hecho is based on the unbalanced version of the AFE circuit.<br>
For the case where the subscriber loop is replaced by a resistor of 100 fi the corresponding echo transfer function is shown in below.<br><br><br>
Figure 10: Echo transfer function with the line interface terminated into 100 fi<br>
The procedure for calculating the echo transfer function can now be stated as follows:<br>
1.	Find the primary cable parameters for the selected type of cable (R,L,G,C), the cable length (d) and the far-end termination impedance (ZT). Calculate the input impedance of the loop 2|N.<br>
2.	Calculate the driver load impedance ZL by using the combined chain matrix for the line transformer and OOB-filter sections and the loop impedance ZiN.<br>
3.	With the load impedance ZL1 = ZL/2 the echo transfer function can now be calculated by using the expression for Hecho for the line driver/receiver PBM 39714.<br><br>
ECHO TRANSFER FUNCTION AND LOOP IMPEDANCE<br>
The echo transfer function was found in the preceding section 2.4 as<br><br>
and the load impedance ZL is related to the input impedance Z,N of the subscriber loop as shown in section 2.3<br><br>
If we write Hecho as<br>
we have the identification<br><br>
If this is substituted into the expression for Hecho we have after some rearrangements<br><br><br>
If ZIN -&gt; 00 =&gt; Hecho-&gt; Hoo = Y1/Y2, which is the echo transfer function if the subscriber loop is replaced by an open circuit.<br>
If Z|N - 0 =&gt; Hecho ~ H0 = M1/M2, which is the echo transfer function if the subscriber loop is replaced by a short circuit.<br>
By division with Y2, Hecho can also be written as<br><br><br>
where Zhyb = M2/Y2 and Zho = M1/Y2.<br><br>
Hecho with open line terminals<br><br>
Hecho with shorted line terminals<br>
Using the actual components values the four highlighted functions can be calculated. The results are shown below.<br><br><br><br>
The last expression for Hecho may also be written as<br><br>
If the echo transfer function Hech0 is measured with a set of appropriate terminations 2iN it is possible to solve for the unknown coefficients Zhyb, Zho and Hoo considering the expression as a set of equations. This is described in<br><br>
details in Ref. [3]. The coefficient H00, may be determined directly from one single measurement with ZiN -&gt; oo. With two different resistive terminations it should be possible to find the remaining coefficients Zhyb and Zh0 These parameters completely characterize the analogue front-end inclusive the line transformer since Hecho always must be a bilinear function in ZIN<br>
With the actual subscriber loop connected to the ADSL modem it is now possible to derive the input impedance of the loop ZiN. This is done by inverting the expression for Hecho<br><br>
j      ^      *fo ~ "echo^-hyb<br>
This approach is further described in Ref. [3].<br><br><br>
The procedure can be described as follows:<br>
1.	Measure the echo transfer function with open line terminals and save the result as Hoo.<br>
2.	Measure the echo transfer function with at least two resistive terminations (more measurements may improve the accuracy).<br>
3.	Solve for the parameters Zhyb and Zho and save the results. This concludes the calibration procedure.<br>
4.	Measure the echo response with the actual loop connected to the ADSL modem and calculate the input impedance ZiN.<br>
5.	The input impedance ZiN may next be used to identify the subscriber loop.<br>
ECHO IMPULSE RESPONSE<br>
The measured echo transfer function can be used for deriving the corresponding echo impulse response. Usually the echo transfer function is only measured at a finite number of discrete frequencies. If Hechois assumed to be band-limited above the Nyquist frequency it may be considered as a period of the echo transfer function of a time-discrete system. Hecho is sampled at 2N frequency points to give Hecho(kF) where F is the distance between the samples. If Hecho(kF) is expanded around f = 0 with complex conjugate symmetry an IFFT performed on it will generate the corresponding time-discrete echo impulse response hecho(kT).<br>
For a typical subscriber loop hecho has a pulse-like waveform with a large peak at the time t close to zero. This pulse is followed by a damped oscillation mainly caused by the line transformer section. Somewhere on this curve another small pulse-like waveform is visible. This represents the reflection of the initial pulse waveform from the far end of the loop.<br>
By measuring the distance in time between the occurrence of the first pulse and the second one the delay time forth and back in the actual subscriber loop can be found. If the velocity of propagation of the cable is known the physical cable length d can be calculated.<br>
The ratio between the energy in the first and second pulse could be used to estimate the cable loss since the ratio should be exp(-2ad) approximately. This part is most conveniently accomplished with a band pass filtered version of the echo response in order to evaluate the cable loss at a certain frequency. See Ref. [4] for further details.<br>
The presence of the analogue echo canceller in the AFE however tends to make this approach questionable as described below.<br>
What is needed in the determination of the cable length and cable loss is the incident and reflected pulse waveform in time at the input at subscriber loop. The available information is however the echo impulse response measured at<br><br>
the receiver output terminals. It is therefore necessary to "transform" the measured impulse response from the receiver output to the line terminals or what is the same to the line transformer input. This is illustrated in Figure 11 and Figure 12 below.<br><br><br>
which can be rearranged to<br>
From Ref. [2], 2.3 or the equations in section 2.4 we have the transfer function from the AFE output voltage v3" to the CODEC input voltage vout" with eiine = 0 and ein 10<br><br><br>
With ein = 0 we have<br>
The CODEC input voltage vout with eiene = 0 and ein = 0 can be written as (see also Ref. [2], section 2.4)<br><br><br>
Using this v2 can be eliminated and the transfer function now becomes<br><br><br>
Both functions Hiric and Hrt shall be multiplied with the output filter transfer function Hout- Since we only are interested in the ratio between the functions this can be omitted.<br>
It can be noted that while Hrti is independent of the load impedance ZL1, the transfer function of the incident signal Hine is dependent on ZL1 or the impedance of the subscriber loop. Both functions are frequency dependent.<br><br>
The estimated cable loss is calculated as<br><br>
If we consider the envelopes of the band pass filtered pulses, which occur in hech0(t) the assumption is that the envelopes at the line transformer can be found as<br>
The last term is the logarithm to the scale factor [ Hrf/Hinc ]   Using the actual component values the scale factor can be calculated for the cases where the subscriber loop is a 0.4 mm and a 0.5 mm PE cable. The result is shown below. The graphs show that the scale factor is frequency dependent, but also dependent on the characteristic impedance of the subscriber loop. It is therefore not possible to find one single scale factor covering all cases.<br>
The analysis demonstrates that the echo canceller decreases the energy of the incident wave relatively to the reflected wave - this is actually the idea with an echo canceller. The advantage is that the dynamic range for retrieving weak echoes is improved when the near-end echo is suppressed. The disadvantage is that the energy of the incident wave cannot be found directly from the measured echo response.<br><br><br>
------ ETS104PE<br>
------ ETSI05PE<br>
Figure 13: Scale factors for incident envelope<br>
Ref. [4] demonstrates how the estimate of the cable loss becomes erroneous if the correction term from the scale factor is not taken into consideration.<br>
Again to illustrate the importance of the scaling factor the simulation model is used to estimate the cable loss at 300 kHz for a 0.4 mm PE cable at different lengths. The procedure described in Ref. [4] is applied here. In Figure 14 the envelope loss is the loss based on the ratio between the envelopes of the incident and reflected wave. From Figure 13 the scale factor at 300 kHz for the 0.4 mm PE cable is approximately 12.5 or 10.9 dB. If the scale factor term of this magnitude is added to the envelope loss the cable loss appears. Finally the nominal cable loss of the cable is shown for comparison also in Figure 14.<br><br>
driver/receiver are disconnected at the CODEC side. The transmit signal e,n is applied to the capacitors through a 50/100 O balancing transformer. The series capacitors at the receive side are terminated to ground via two 12 kQ resistors to simulate the input impedance of the CODEC. The output voltage Vout is measured with a high-impedance differential probe amplifier. A cable simulator is connected to the line interface to simulate different loops.<br>
The following equipment have been used during the measurements:<br>
EDA R1.1 IPDSLAM       BFB40102/A1 P1B, 008037AC4EE9        with<br>
DAFE708-ROA119 708<br>
Network Analyzer 4395A	Agilent	FAA21372<br>
S-parameter accessory kit	Agilent	FAA21741<br>
Differential Probe Amplifier	Hewlett-Packard	FAA<br>
Cable Simulator DLS400E	Spirent	FAA<br>
The echo transfer function is measured with the network analyzer. The input impedance of the simulated loop is measured with the S-parameter accessory kit attached to the network analyzer.<br>
First the input impedance ZIN of the cable simulator is compared with the same impedance calculated from the transmission line formulae. The result for a 0.5 mm PE cable (ETSI loop #2) with a length of 500 m open ended is shown in Figure 16 below. There seems to be a reasonable agreement between the measured and calculated results almost up 1 MHz (phase angle only up to 500 kHz). Similar results are observed for other loop lengths.<br>
In Figure 17, which follows, the driver load impedance ZL is simulated by using the expressions for the combined chain matrix of the line transformer and OOB-filter. Two cases are compared 1) ZL calculated from the transmission line version of ZiN and 2) ZL calculated from the measured input impedance ZIN. Again the two sets of results are fairly closed to each other.<br><br><br>
	 Transmission line formulae, simulated<br>
	 PLS400E measured<br><br>
	 Transmission line formulae, simulated<br>
	 DLS400E measured<br>
Figure 16: Input impedance ZiN for ETSI loop #2, d = 500 m, ZT = oo<br><br><br>
	  Simulated with transmission line ZIN<br>
	  Simulated with DLS400E ZIN<br><br>
	  Simulated with transmission line ZIN<br>
	 Simulated with DLS400E ZIN<br>
Figure 17: Driver load impedance ZLor DAFE 708 with ETSI loop #2, d = 500 m, ZT = oo<br><br><br><br>
Figure 14: Estimated cable loss at 300 kHz for a 04PE loop (Echo canceller enabled)<br>
It is possible in the simulation model to disable the echo canceller. If this is done the following results occur for the estimated cable loss. This clearly illustrates the effect of the echo canceller on the envelopes.<br><br>
Figure 15: Estimated cable loss at 300 kHz for a 04PE loop (Echo canceller disabled)<br>
ANNEX A - VERIFICATION OF SIMULATION MODEL<br>
In order to verify the simulation model measurements on a DAFE 708 unit has been carried out. The series capacitors between the CODEC and the line<br>
Now the echo transfer function Hecho is simulated by using the expression derived in section 2.4. The two results for the driver load impedance ZL mentioned above are used in the calculation of Hecho. The simulated versions of Hecho are compared with the echo transfer function measured with the network analyzer. The result can be found in Figure 18. The three graphs are close to each other up to 1 MHz. This is probably becomes more evident in Figure 19 where Hecho is plotted in a linear scale.<br>
Hecho for DAFE708 with 500m 05PE o.c.<br><br>
Hecho simulated<br>
Hecho simulated with DSL400E ZIN<br>
Hecho measured with Network Analyzer<br>
Figure 18: Echo transfer function for DAFE 708 with ETSI loop #2, d - 500 m, 2T = oo<br><br><br>
Hecho simulated<br>
	 Hecho simulated with DLS400E ZIN<br>
------- Hecho measured with network analyzer<br>
Figure 19: Hecho as in Figure 18, but in linear scale<br>
The results seems to indicate that the simulation model provides an echo transfer function, which is reasonably close to what can be measured on the DAFE 708 unit. However if the loop length is increased the agreement between measured and simulated versions of Hecho becomes less satisfactory as it appears from Figure 19 and Figure 20. The actual reason for this discrepancy is not fully clarified. One explanation could be that when the loop length increases the load impedance ZL approaches the scaled sense impedance K*Z$ leading to an increasing echo loss. With a high echo loss Hecho becomes very sensitive even to small changes in the parameter values of the line driver/receiver. The simulation model for PBM 39714 is only a macromodel, which probably not fully characterizes the device.<br><br><br>
------  Hecho simulated<br>
------- Hecho simulated with DLS400E ZIN<br>
------  Hecho measured with network analyzer<br>
Figure 20: Echo transfer function for DAFE 708 with ETSI loop #2, d = 500 m, ZT = 00<br><br>
	  Hecho simulated<br>
	 Hecho simulated with DLS400E ZIN<br>
	  Hecho measured with network analyzer<br><br>
Figure 21: Echo transfer function for DAFE 708 with ETSI loop #2, d = 3000 m, ZT = 00<br><br><br><br>
REFERENCES<br>
[1] ETSI TS 101 388        Transmission and Multiplexing (TM); Access<br>
transmission systems on metallic access cables; Asymmetric Digital Subscriber Line (ADSL) -European specifio reqirement, 2002-05.<br><br><br><br>
[2] ANA2812B<br><br>
Analogue Front End for ADSL with PBM 39714.<br><br>
[3] 4/0363-FCP105 581    Derived equations during Loop Test and<br>
Qualification workshop 2002-03-21.<br><br>
[4] ANA3255A<br><br>
SELT using the Echo Impulse Response.<br><br><br><br>
We claim:<br>
1.	A method in single-ended loop test, SELT, of a signal<br>
line (2), the method  comprising<br>
-	Connecting  (401) a communication equipment  (3)  to a<br>
remote end of the signal line;<br>
-	Connecting (402) a test device (TD1) to a near end of<br>
the signal line;<br>
-	performing a SELT measurement,<br>
wherein the communication equipment (3) is transmitting (403) intermittent handshake signals (HS1) on the signal line (2),<br>
.the method being characterized by:-<br>
-	detecting (404) the handshake signals (HS1) in the test<br>
device (TDl)<br>
-	halting (4 05) the handshake signals for at least one<br>
time interval (TIl) of predetermined duration;<br>
-performing (406) the SELT measurement in said at least<br>
one time interval (TIl).<br>
2.	A method in single-ended loop test of a signal line (2) according to claim 1, wherein the handshake signals (HS1) are halted repeatedly.<br>
3.	A method in single-ended loop test of a signal line (2) according to claim 1 or 2, wherein the test device is a transceiver (1) for communication purposes.<br>
4. A method in single-ended loop test of a signal line as claimed in any of claims 1 and 3, wherein the step of performing the SELT measurement (406) comprises calibrating the transceiver (1) for communication purposes, said calibration comprising:<br><br><br>
-	selecting (601) a transceiver (31) having the same type of hardware as said transceiver for communication purposes and comprising the transceiver for communication purposes;<br>
-	connecting (603) at least three impedances (9) of each a predetermined value to a line connection (5) of the selected tranceiver (31);<br>
generating (606) for the selected transceiver • (31) frequency dependent echo transfer functions (Hecho(f)) utilizing said at least three impedances (9) and test signals (vtin , vtout); and<br>
generating (608) transceiver model values (Zho(f), Zhyb(f),Har(f)) with the aid of said echo transfer<br>
functions (Hecho{f)) and the corresponding impedance values (9), said model values comprising an echo transfer function (Hoo(f)) for the test transceiver (31) with open line connection (5), a transceiver impedance value (Zhyb(f)) as seen from the line (2) side and a product (Zho(f)) of said transceiver impedance value (Zhyt(f))   and an echo transfer<br>
function (E0(f))    for the transceiver (31) with shortcut line connection (5).<br>
5,	A method in single-ended loop test of a signal line	(2)<br>
according to claim 4 comprising storing (609)	the<br>
transceiver model values (Zho(f) ,Zhyb(f), Hoo(f))	for<br>
performing the calibration process.<br>
6.	A method in single-ended loop test of a signal line (2)<br>
according to claim 4 or 5 comprising storing (611) the<br>
transceiver model values (Zho(f), Zhyb(f), Hoo(f))     in said transceiver (l, 12) for communication purposes.<br><br>
An arrangement in single-ended loop test, SELT, of a signal line (2), the arrangement comprising<br>
-	a test device (TD1) having connections (5) for a near<br>
end of the signal line;<br>
-	a receiving device (REl)  in the test device, being<br>
arranged to detect intermittent handshake signals (HS1) received on the signal line (2) from a communication equipment (3) at a remote end of the signal line;<br>
-	a sending device (SHI, SD1) in the test device being<br>
arranged to transmit a halting message (NAK-EF) to the signal  line  (2),  the halting message halting the handshake signals from the communication equipment (3) for at lea.sf; one time interval (Til) of predetermined duration;<br>
-	the sending device (SD1) being arranged to transmit a<br>
loop test signal (SI) to the signal line (2) and the receiving device (RBI) being arranged to receive a reflected signal (S2) from the signal line (2) , the test device being arranged to perform the SELT measurement in said at least one time interval (TIl).<br>
An arrangement in single-ended loop test, SELT, of a signal line (2) according to claim 7, wherein the sending device (SHI, SD1) in the test device is arranged to transmit a halting message (NAK-EF) repeatedly to the signal line (2).<br>
An arrangement in single-ended loop test, SELT, of a signal line (2) according to claim 7 or 8, wherein the test device (TD1) is a transceiver (1, 31) suitable for communication purposes.<br><br>
10. An arrangement in single-ended loop test, SELT, of a signal line (2) according to claim 9, the arrangement in a calibration mode comprising<br>
-	a measurement device (32) for generating, in a calibration<br>
process, calibration values for the transceiver with the<br>
aid of at least three impedances (9) and test signals<br>
(vtin  ,  vtout) ,  the  impedances  (9)  having  each  a<br>
predetermined value and being connected  to the line connection (5) of the tranceiver (1, 31);<br>
-	the measurement device (32) being arranged to generate a frequency dependent echo transfer function (Htchp(f)) for the test transceiver; and<br>
-	the measurement device (32) being arranged to generate transceiver model values (Zho(f) ,Zhyb(f), H0(/)) with the aid<br>
of said echo transfer function (Hecho(f)) and the corresponding impedance values (9), said model values comprising an echo transfer function (Ho(f)) for the transceiver (l, 31) with open line connection (5), a transceiver impedance value (Zhyb(f)) as seen from the line (2) side and a product of said transceiver impedance value {Zhyb(f))   and an echo transfer function (B0(f))   for<br>
the transceiver  (1, 31) with shortcut line connection (5) .<br>
11. An arrangement in single-ended loop test, SELT, of a signal line (2) according to claim 10, the arrangement comprising a memory (12, 33) for storing the transceiver<br>
model values ( Zho(f) , Zhyb(f), Ho(f)) .</td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE3Mi1tdW1ucC0yMDA1LWFic3RyYWN0KDEwLTUtMjAwNykuZG9j" target="_blank" style="word-wrap:break-word;">1172-mumnp-2005-abstract(10-5-2007).doc</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE3Mi1tdW1ucC0yMDA1LWFic3RyYWN0KDEwLTUtMjAwNykucGRm" target="_blank" style="word-wrap:break-word;">1172-mumnp-2005-abstract(10-5-2007).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE3Mi1tdW1ucC0yMDA1LWNhbmNlbGxlZCBwYWdlcygxMC01LTIwMDcpLnBkZg==" target="_blank" style="word-wrap:break-word;">1172-mumnp-2005-cancelled pages(10-5-2007).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE3Mi1tdW1ucC0yMDA1LWNsYWltcyhncmFudGVkKS0oMTAtNS0yMDA3KS5kb2M=" target="_blank" style="word-wrap:break-word;">1172-mumnp-2005-claims(granted)-(10-5-2007).doc</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE3Mi1tdW1ucC0yMDA1LWNsYWltcyhncmFudGVkKS0oMTAtNS0yMDA3KS5wZGY=" target="_blank" style="word-wrap:break-word;">1172-mumnp-2005-claims(granted)-(10-5-2007).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE3Mi1tdW1ucC0yMDA1LWNvcnJlc3BvbmRlbmNlKDE4LTItMjAwOCkucGRm" target="_blank" style="word-wrap:break-word;">1172-mumnp-2005-correspondence(18-2-2008).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE3Mi1tdW1ucC0yMDA1LWNvcnJlc3BvbmRlbmNlKGlwbyktKDE1LTQtMjAwOCkucGRm" target="_blank" style="word-wrap:break-word;">1172-mumnp-2005-correspondence(ipo)-(15-4-2008).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE3Mi1tdW1ucC0yMDA1LWRyYXdpbmcoMTAtNS0yMDA3KS5wZGY=" target="_blank" style="word-wrap:break-word;">1172-mumnp-2005-drawing(10-5-2007).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE3Mi1tdW1ucC0yMDA1LWZvcm0gMSgxMC01LTIwMDcpLnBkZg==" target="_blank" style="word-wrap:break-word;">1172-mumnp-2005-form 1(10-5-2007).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE3Mi1tdW1ucC0yMDA1LWZvcm0gMSgyMC0wMi0yMDA2KS5wZGY=" target="_blank" style="word-wrap:break-word;">1172-mumnp-2005-form 1(20-02-2006).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE3Mi1tdW1ucC0yMDA1LWZvcm0gMTMoMjAtMi0yMDA2KS5wZGY=" target="_blank" style="word-wrap:break-word;">1172-mumnp-2005-form 13(20-2-2006).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE3Mi1tdW1ucC0yMDA1LWZvcm0gMTMoMjQtMTAtMjAwNSkucGRm" target="_blank" style="word-wrap:break-word;">1172-mumnp-2005-form 13(24-10-2005).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE3Mi1tdW1ucC0yMDA1LWZvcm0gMTgoMTItNC0yMDA2KS5wZGY=" target="_blank" style="word-wrap:break-word;">1172-mumnp-2005-form 18(12-4-2006).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE3Mi1tdW1ucC0yMDA1LWZvcm0gMihncmFudGVkKS0oMTAtNS0yMDA3KS5kb2M=" target="_blank" style="word-wrap:break-word;">1172-mumnp-2005-form 2(granted)-(10-5-2007).doc</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE3Mi1tdW1ucC0yMDA1LWZvcm0gMihncmFudGVkKS0oMTAtNS0yMDA3KS5wZGY=" target="_blank" style="word-wrap:break-word;">1172-mumnp-2005-form 2(granted)-(10-5-2007).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE3Mi1tdW1ucC0yMDA1LWZvcm0gMjYoMTAtNS0yMDA3KS5wZGY=" target="_blank" style="word-wrap:break-word;">1172-mumnp-2005-form 26(10-5-2007).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE3Mi1tdW1ucC0yMDA1LWZvcm0gMygxMC01LTIwMDcpLnBkZg==" target="_blank" style="word-wrap:break-word;">1172-mumnp-2005-form 3(10-5-2007).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE3Mi1tdW1ucC0yMDA1LWZvcm0gMygxOC0yLTIwMDgpLnBkZg==" target="_blank" style="word-wrap:break-word;">1172-mumnp-2005-form 3(18-2-2008).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE3Mi1tdW1ucC0yMDA1LWZvcm0gMygyMC0yLTIwMDYpLnBkZg==" target="_blank" style="word-wrap:break-word;">1172-mumnp-2005-form 3(20-2-2006).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE3Mi1tdW1ucC0yMDA1LWZvcm0gMygyNC0xMC0yMDA1KS5wZGY=" target="_blank" style="word-wrap:break-word;">1172-mumnp-2005-form 3(24-10-2005).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE3Mi1tdW1ucC0yMDA1LWZvcm0gNSgyNC0xMC0yMDA1KS5wZGY=" target="_blank" style="word-wrap:break-word;">1172-mumnp-2005-form 5(24-10-2005).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE3Mi1tdW1ucC0yMDA1LWZvcm0tcGN0LWlzYS0yMTAoMjQtMTAtMjAwNSkucGRm" target="_blank" style="word-wrap:break-word;">1172-mumnp-2005-form-pct-isa-210(24-10-2005).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=YWJzdHJhY3QxLmpwZw==" target="_blank" style="word-wrap:break-word;">abstract1.jpg</a></p>
		<br>
		<div class="pull-left">
			<a href="219587-an-automated-system-for-separating-and-processing-blood-and-blood-components.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="219589-a-take-out-mechanism-for-gripping-a-bottle.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>219588</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>1172/MUMNP/2005</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>33/2008</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>15-Aug-2008</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>09-May-2008</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>24-Oct-2005</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>TELEFONAKTIEBOLAGET LM ERICSSON (PUBL)</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td></td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>ROSENBERG JONAS</td>
											<td></td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>H04M3/30</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/SE2004/000566</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2004-04-08</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>60/469,658</td>
									<td>2003-05-12</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/219588-method-and-arrangement-for-loop-test-of-a-disturbed-line by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 11:41:11 GMT -->
</html>
