<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/217461-method-and-apparatus-for-defining-meter-data-calculatins-in-an-electronic-electricity-meter by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 11:46:44 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 217461:METHOD AND APPARATUS FOR DEFINING METER DATA CALCULATINS IN AN ELECTRONIC ELECTRICITY METER.</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">METHOD AND APPARATUS FOR DEFINING METER DATA CALCULATINS IN AN ELECTRONIC ELECTRICITY METER.</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>TITLE: METHOD AND APPARATUS FOR DEFININGMETER DATA CALCULATINS IN AN ELECTRONIC ELECTRICITY METER. The present invention, in one embodiment, is a method for defining meter data calculation in an electronic meter (100). The method includes steps of storing a set of predefined data calculation instructions in a non-volatile memory (120) of the meter; storing a first set of vectors in a memory (118) of the meter, the vectors pointing to data calculations of the set of predefined data calculation instructions; metering plurality of electrical quantities of power source; and controlling calculations performed on the metered electrical quantities in accordance with the data calculation instructions pointed to by the first stored set of vectors. (FIG. - 1)</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>METHODS AND APPARATUS FOR DEFINING<br>
METER DATA CALCULATIONS IN AN<br>
ELECTRONIC ELECTRICITY METER<br>
CROSS REFERENCE TO RELATED APPLICATIONS<br>
This application claims the benefit of U.S. Provisional Application No.<br>
60/141,776, filed June 30, 1999, entitled "Methods and apparatus for defining meter<br>
data calculations in an electronic electricity meter," and which is hereby incorporated<br>
by reference in its entirety.<br>
BACKGROUND OF THE INVENTION<br>
This invention relates generally to methods and apparatus for<br>
electricity metering, and more particularly, to methods and apparatus for defining data<br>
calculations in a microcomputer based electricity meter.<br>
Electronic electricity meters for metering multi-phase services<br>
typically include a digital signal processor (DSP) and a microcomputer. Certain<br>
functions and operations are separately performed in the DSP and microcomputer. By<br>
dividing the functionality between the DSP and microcomputer, communications of<br>
data and commands must be provided between the DSP and microcomputer. Such an<br>
architecture is complex.<br>
In addition, such meters typically are programmed to perform certain<br>
functions. Although the meters are upgradeable, the types of upgrades that can be<br>
performed are limited to the tables and functions prestored in the meter. In addition,<br>
and in the past, increased functionality typically was a trade-off to cost. That is,<br>
adding functionality to the meter typically resulted in adding significant costs to the<br>
meter.<br>
It would therefore be desirable to provide methods and apparatus to<br>
define meter data calculations providing increased functionality and flexibility,<br>
preferably at relatively low cost.<br>
BRIEF SUMMARY OF THE INVENTION<br>
There is therefore provided, in one embodiment of the present<br>
invention, a method for defining meter data calculations in an electronic electricity<br>
meter. The method includes steps of: storing a set of predefined data calculation<br>
instructions in a non-volatile memory of the meter; storing a first set of vectors in a<br>
memory of the meter, the vectors pointing to data calculations of the set of predefined<br>
data calculation instructions; metering a plurality of electrical quantities of a power<br>
source; and controlling calculations performed on the metered electrical quantities in<br>
accordance with the data calculation instructions pointed to by the first stored set of<br>
vectors.<br>
This embodiment and others described provide high functionality and<br>
flexibility in defining meter data calculations, and do so at low cost.<br>
BRIEF DESCRIPTION OF THE DRAWINGS<br>
Figure 1 is a block diagram of an electricity meter.<br>
Figure 2 is a data flow diagram for the electricity meter shown in<br>
Figure 1.<br>
Figure 3 is a functional block diagram of the meter shown in Figure 1.<br>
Figure 4 is a table illustrating the I/O board addressing mode.<br>
Figure 5 is a mode diagram for a simple I/O board.<br>
Figure 6 is a mode diagram for a complex I/O board.<br>
DETAILED DESCRIPTION OF THE INVENTION<br>
Figure 1 is a block diagram of an electricity meter 100. Meter 100 is<br>
coupled to a three phase, alternating current (AC) power source 102. Particularly,<br>
current sensors 104 and voltage sensors 106 are coupled to power source 102 and<br>
generate measures of current and voltage, respectively. Current and voltage sensors<br>
104 and 106 are well known in the art. In addition, a power supply 108 and a revenue<br>
guard option board 110 also are coupled to power source 102.<br>
Current and voltage measurements output by sensors 104 and 106 are<br>
supplied to an analog-to-digital (A/D) converter 112. Converter 112, in the<br>
exemplary embodiment, is an 8 channel delta-sigma type converter. Converter 112 is<br>
coupled to a microcomputer 114. In the illustrated embodiment, microcomputer 114<br>
is a 32 bit microcomputer with 2Mbit ROM, 64 Kbit RAM. A 32 kHz crystal 116<br>
provides a timekeeping signal for microcomputer 114. Microcomputer 114 is coupled<br>
to a flash memory 118 and a electronically erasable programmable (i.e.,<br>
reprogrammable) read only memory 120.<br>
Meter 100 also includes an optical port 122 coupled to, and controlled<br>
by, microcomputer 114. Optical port 122, as is well known in the art, is used for<br>
communicating data and commands to and from an external reader to microcomputer<br>
114. Communications via port 122 are performed in accordance with ANSI C12.18<br>
(optical port) and ANSI C12.19 (standard tables). A liquid crystal display 124 also is<br>
coupled to microcomputer 114 via an LCD controller 126. In addition,, an option<br>
connector 128, coupled to microcomputer 114, is provided to enable coupling option<br>
boards 130 (e.g., a telephone modem board 132 or an RS-232 line 134, or a simple<br>
input/output (I/O) board 136 or a complex I/O board 138) to microcomputer 114.<br>
Option connector 128 also includes a sample output 140. When configured to operate<br>
in a time-of-use mode, a battery 142 is coupled to power source 102 to serve as a<br>
back-up to maintain date and time in the event of a power outage.<br>
Figure 2 is a data flow diagram 200 for the electricity meter 100. As<br>
illustrated by Figure 2, quantities such as watt hours per phase (WhA, WhB, WhC) as<br>
well as other quantities are determined by microcomputer 114. These quantities are<br>
sometimes referred to herein as internal quantities 202. Microcomputer 114 then uses<br>
the pre-defined or user-selected functions F(n) to calculate a set of quantities (referred<br>
to as calculated quantities 228). Microcomputer 114 then uses the measurement<br>
profile 204 to select up to 20 quantities to store as user-selected quantities. In<br>
addition, external inputs 206 can be specified to be accumulated by measurement<br>
profile 204. In the embodiment shown in Figure 2, up to four external inputs (El, E2,<br>
E3, E4) are collected. These may also be scaled by programmed multipliers and<br>
divisors.<br>
User-selected quantities 230 specified by measurement profile 204 can<br>
be used to perform totalization. For example, a value from a register location in user-<br>
selected quantities 230 (e.g., register 7) can be added to a value stored in a register<br>
location (e.g., register 17) to provide a totalized value, and the totalized value is stored<br>
in a register location (e.g., register 17). In the embodiment illustrated in Figure 2, up<br>
to 8 totalizations can be performed.<br>
Also in the embodiment shown in Figure 2, five demand values<br>
(locations 0-4) 210 can be calculated from the quantities in user-selected quantities<br>
230. The values to use tor the demand calculations are specified by the demand<br>
select. Each demand value may have up to two coincident demands 212, 214 per<br>
demand 210. The coincident demands are specified by the coincident select. A<br>
coincident demand value may be another one of the selected demands, or the quotient<br>
of two selected demands. An average power factor 222 is stored in numerator and<br>
denominator form. Time-of-use summaries (A-D) 216 for the selected demands are<br>
also available in a time-of-use meter. Up to 20 quantities can be recorded in load<br>
profile data 218. The quantities to be recorded are specified by the load profile select.<br>
Up to five summations 226 can be calculated. The quantities to be calculated are<br>
specified by the summations select. Time of use summaries (A-D) 216 for the<br>
selected summations are also available in a time-of-use meter. Data accumulations<br>
224, summations 226, demands 210 coincident demands 212, 214, and time-of-use<br>
summaries 216 may be selected for display 210 on the meter"s LCD.<br>
Meter 100 can be programmed by an operator, e.g., a utility, so that<br>
meter 100 determines desired quantities, regardless of whether that quantity is a<br>
common, IEEE-defined value such as apparent volt-ampere-hours, or a quantity used<br>
only by a particular utility. Generally, a momentary interval is defined as 60 cycles<br>
(for 60 Hz installations) or 50 cycles (for 50 Hz installations) of the fundamental<br>
voltage frequency. Known meters calculate a pre-defined set of quantities from the<br>
basic quantities every momentary interval. These quantities include total watt-hours<br>
(fundamental plus harmonics), apparent volt-ampere-hours, and arithmetic apparent<br>
volt-ampere hours. These quantities are summed by the minute. One-minute<br>
accumulations of data are stored in a structure called the minute first-in, first-out<br>
(FIFO) register. An example of the structure of a minute FIFO is illustrated below.<br>
Data is retrieved from the minute FIFO and added to other<br>
accumulators, from which summations (e.g. total kilowatt-hours), demand<br>
calculations (e.g. maximum kilowatt demand), and load profile recording operations<br>
are performed.<br>
Typically there is very little flexibility provided by electricity meters in<br>
how the momentary interval basic quantities are processed to generate the revenue<br>
quantities that are of interest to utilities. A user may, for example, select from several<br>
pre-defined quantities that are computed every momentary interval, and the user may<br>
select the length of the demand interval or subinterval and the length of the load<br>
profile interval.<br>
In contrast, meter 100 enables a user to define methods of data<br>
calculations at all points in the data processing sequence, e.g, at the end of a<br>
momentary interval, at the end of a minute, at the end of a demand (sub)interval, and<br>
at the end of a load profile interval.<br>
In another embodiment, code is downloaded into an external flash<br>
memory, and then a measurement profile is programmed to use the calculation<br>
specified by the code. Vectors are used to update and perform a list of tasks in ROM,<br>
or are replaced by versions in flash memory for other function blocks.<br>
Figure 3 is a functional block diagram 300 of meter 100. The f( )<br>
blocks in Figure3 illustrate the points during data processing at which user-defined<br>
functions can be applied to data. For example, if a user wants to compute apparent<br>
volt-ampere-hours (defined as the vector sum of watt-hours, var-hours, and distortion<br>
volt-ampere hours), the user defines a function that would be executed at the end of<br>
each momentary interval. This quantity could then be accumulated for summations,<br>
demands, or load profile data. Accumulations of apparent volt-ampere-hours could<br>
also be used to compute some other quantity at a different point (e.g. a demand<br>
interval accumulation of apparent volt-ampere-hours could be used to compute an<br>
average power factor for that demand interval). Examples of some of the<br>
mathematical operators that would be available are set forth in the table below. These<br>
functions are programmed into the meter non-volatile memory.<br>
Meter 100 can also accumulate data provided by external devices such<br>
as other electricity meters, gas meters, and water meters. Typically this is done<br>
through hardware that provides pulses to the electricity meter, which counts the pulses<br>
(each pulse represents some pre-defined value, e.g. 1 watt-hour). Meter 100 allows<br>
mathematical operations to be defined that operate on accumulations of these pulses.<br>
For example, a utility might have an installation where three electricity meters are<br>
required. By having two of the meters provide pulse data to the third meter<br>
representing watt-hour usage, and defining in the third meter a calculation to add the<br>
pulse data from the other two meters to its own watt-hour data, the utility can read the<br>
total watt-hour usage of the installation from one meter<br>
Because a user can specify mathematical operations to be performed<br>
on data at a number of steps in the processing of metering data, meter 100 provides<br>
that a wide variety of quantities can be determined. Meter 100 also prevents the meter<br>
manufacturer from having to anticipate at the product development stage what<br>
quantities a utility might require. Since there are constraints that a user must be aware<br>
of when programming a meter to compute a given quantity, it is likely that the meter<br>
manufacturer would implement for the utility the program that defines the<br>
calculations. The utility would then install the program into its programming<br>
software package, which would ultimately download the program into meter 100.<br>
-8-<br>
-13-<br>
Flash Memory<br>
In one embodiment, a nonvolatile, alterable flash memory 118 is<br>
utilized to store configuration, diagnostic, metering and other data. Flash memory<br>
118 provides the advantage that a tremendous amount of data can be stored, which<br>
eliminates a need for a daughter board to add additional memory. Also, a data<br>
manager maps requests for data to the physical location of the data. By utilizing the<br>
data manager, data can move from one storage medium to another without affecting<br>
the metering application.<br>
Flash memory 118 is typically organized into multiple large sectors (64<br>
KB) which can be erased in their entirety. When flash memory is erased, all bits in a<br>
sector are set to 1. When data is written, 1 bits are changed to 0 bits. Once a bit has<br>
been changed to a 0, it cannot be changed back to a 1 without erasing the entire<br>
sector.<br>
For practical purposes, a given location in flash memory can be written<br>
to once after it has been erased. To update even a single byte in a record, a new copy<br>
of the entire record is written to an unused location. There are many known methods<br>
for tracking used, unused and obsolete memory in each sector including file allocation<br>
tables (FAT) and linked lists. When a sector becomes full, it is necessary to transfer<br>
all "active" records to an unused sector and then erase the "dirty" sector.<br>
Data within meter 100 is organized into logical blocks (e.g. Current<br>
Season rate A data, Previous Reset data, Previous Season Data) that are treated as<br>
atomic data units (ADU) by the data manager. Each ADU is managed separately.<br>
The data manager is responsible for maintaining a pointer to the physical location of<br>
the current copy of each ADU. For the metering application to update an ADU stored<br>
in flash memory 118, a new copy of the ADU is written to an unused portion of flash<br>
memory 118. Since the physical location of the ADU has changed, the pointer to the<br>
current ADU is updated. Keeping a pointer to the current ADU eliminates the need to<br>
traverse a linked list through flash memory 118 to find the current ADU at the end of<br>
the chain.<br>
The list of pointers to current ADUs maintained by the data manager<br>
may be kept in RAM or non-volatile memory. The list, however, is saved in non-<br>
volatile at power failure. If stored in flash memory 118, each change to a single ADU<br>
requires rewriting the entire list of pointers. Another approach is to maintain the list<br>
of pointers in EEPROM 120. With EEPROM 120, only the pointers to affected<br>
ADUs must be updated.<br>
ADUs can be combined into logical groupings that are stored in a<br>
common set of flash sectors. These logical groupings can be based on, for example,<br>
the frequency with which the ADUs are updated and, the size of the ADUs. Each<br>
logical grouping of ADUs has at least two sectors dedicated to data storage. One or<br>
more sectors are "active", and the remaining sector is erased and available when the<br>
last "active" sector fills up. Possible groupings of ADU"s include power fail data and<br>
communications snap shots, configuration and revenue data, self-reads and event logs,<br>
and load profile data.<br>
The data manager also performs a garbage collection task that monitors<br>
each group of sectors. When the active sector(s) in a group is full, the garbage<br>
collection task initiates the copying of all active ADUs in the oldest sector to a new<br>
sector. The copying is done atomicly, one ADU at a time. When an ADU is copied<br>
to the new sector, the pointer to the current ADU is updated to match its physical<br>
location in the new sector.<br>
Meter 100 can service a power failure in the middle of garbage<br>
collection and pick up where it left off without losing any data, and minimizes the<br>
amount of time the power fail interrupt is disabled to permit the meter sufficient time<br>
to close down in an orderly fashion.<br>
Determining when a sector is full can be done in one of many ways. A<br>
"high water" mark can be set for a sector. When the sector crosses that high water<br>
mark, garbage collection is initiated. The high water mark could be determined by the<br>
size of the largest ADU for a group. Alternatively, the data manager could wait to<br>
consider a sector full until it is unable to satisfy a request to allocate storage. If too<br>
much space is wasted at the end of the sector, the erase time will increase.<br>
If a second set of pointers are used for data that affects the<br>
configuration of meter 100, this second set of pointers can be used to allow the<br>
"commitment" and "roll-back" of configuration information. At the beginning of a<br>
session to change the configuration, the pointers to the current configuration<br>
information are copied. When the configuration information is updated, the updated<br>
copy is written to flash and the "copy" pointer is updated. After all configuration<br>
information has been written, a command to indicate that the configuration is<br>
complete is issued. At that point, the current pointers are updated with copies of the<br>
updated pointers. If the configuration process is interrupted before it completes,<br>
meter 100 maintains the current configuration. The old configuration information is<br>
still available in flash since the original pointers and data were not changed.<br>
Nonvolatile, alterable flash memory and vectors also can be utilized to<br>
Update the firmware of microcomputer 114 while meter 100 is in service. As<br>
explained above, meter 100 uses vectors to functions and/or tasks to provide a level of<br>
indirection that can be used to upgrade or patch the code. Meter 100 includes two<br>
forms of program memory, specifically, on-chip masked ROM or flash and off-chip<br>
flash 118. The on-chip masked ROM typically has a speed advantage over off-chip<br>
memory. Time critical functions are stored in the on-chip masked ROM. Other, non-<br>
time critical features are stored in either on-chip masked ROM or off-chip flash 118.<br>
For the initial release of the firmware, the on-chip masked ROM could be filled with<br>
as much firmware as is practical.<br>
The off-chip flash 118 can be used to store vectors to functions, tasks<br>
and/or tables of tasks to be executed and non-time critical functions and tasks. The<br>
vectors in the table point to functions or tasks stored in on-chip masked ROM or off-<br>
chip flash 118. At power up, these vectors and tables are read into memory. Rather<br>
than call a function and/or task directly, the firmware uses the vectors to call functions<br>
and/or tasks.<br>
The firmware can be upgraded in multiple ways. For example, a<br>
function or task stored in off-chip flash can be directly over written, replacing the old<br>
code with new code, or a new function or task can be written to off-chip flash and the<br>
corresponding vector updated to point to the new function or task.<br>
A built-in "bootloader" allows new code to be downloaded into the<br>
off-chip flash. Meter 100 ceases metering when the bootloader is initiated. The<br>
bootloader accepts blocks of new code and writes them to the off-chip flash 118.<br>
When the download is complete, meter 100 "reboots" and begins executing with the<br>
new code.<br>
Commercially available off-chip flash memories permit programming<br>
without any special voltages. In addition, such off-chip flash memories combine two<br>
"banks" of memory that act like separate chips. One bank of the chip can be used for<br>
code storage. The other bank can be used for data storage. Each bank operates<br>
independent of the other. One can be programmed while the other is being read. One<br>
such chip can be used to store off-chip code and data.<br>
In other embodiments, a large electrically erasable programmable (i.e.,<br>
reprogrammable) read only memory (EEPROM) is used for part of the nonvolatile,<br>
alterable memory. In this embodiment, some of the data that is described above as<br>
being stored in flash memory is stored, instead, in the EEPROM. However, the load<br>
profile is still stored in flash memory 118.<br>
It should be recognized that in still other embodiments, other types of<br>
nonvolatile, alterable memory can be substituted for EEPROM and flash memory<br>
118. The memory or memories used should retain their contents during periods when<br>
power is not applied, and it should be possible to update their contents as needed,<br>
although not necessarily in the manner required by a flash memory. One skilled in the<br>
art would be able to select appropriate memories and make the necessary circuit<br>
modifications to use the selected memory or memories.<br>
I/O Board Addressing<br>
As described above with reference to Figure 1, meter 100 includes an<br>
option connector 128 which connects to both simple and complex input/output board<br>
(I/O) boards 136 and 138. Flash memory 118 enables functional expansion of meter<br>
100, and such expansion is further facilitated by enabling use of multiple types of I/O<br>
boards 130. To facilitate such board interchangeability, microcomputer 114 is<br>
programmed to determine the type of I/O board 130 which is being utilized. Figure 4<br>
illustrates the status of microcomputer pins utilized in connection with<br>
communication with I/O board 130. The pin positions relate to the identified signals.<br>
Microcomputer 114 is operable in a normal mode, and ID mode, and address mode, a<br>
read mode, and a write mode with respect to such I/O board 130.<br>
As explained above, multiple types of boards can be provided, and<br>
each board type has an identifier. In one specific embodiment, a 3-bit address<br>
specifies the board type. For example, an input/output board is specified as a type<br>
001. A logic 0 on all response lines means no option board of the specified type is<br>
present. A simple I/O board 136 has an identifier of 01. A complex I/O board 138<br>
has an identifier of 10.<br>
Figure 5 is an exemplary mode diagram for signals of a simple I/O<br>
board 136. The signal supplied to I/O board 136 controls the mode of operation of the<br>
board, e.g., ID mode, address mode, read mode, and write mode. "X" means "don"t<br>
care", and "N/A" means "not available". In the write mode, for KYZ outputs, a logic<br>
1 closes the K-Z contact and opens the K-Y contact. For a 2-wire output, a logic 1<br>
closes the output contact.<br>
Figure 6 illustrates an exemplary mode diagram for signals at a<br>
complex I/O board 138. Again, the signal supplied to I/O board 138 controls the<br>
mode of operation of the board, e.g., ID mode, address mode, read mode (nib 0), read<br>
mode (nib 1), write mode (nib 0), and write mode (nib 1). In the read mode, logic 1<br>
indicates the corresponding input is activated. For 2-wire inputs, only the Z inputs are<br>
used. In the write mode, for KYZ outputs, a logic 1 closes the K-Z contact and opens<br>
the K-Y contact. For 2-wire outputs, a logic 1 closes the output contact.<br>
Fast Optocom<br>
As shown in Figure 1, meter 100 includes an optical port 122 for<br>
communications with external hand held units and other devices. To enable such<br>
communications, both the external unit and optical port 122 include phototransistors.<br>
Meter 100 can store significant volume of data (e.g., 2 months of load profile data for<br>
20 channels), and it is desirable to quickly transmit such data to a hand held unit<br>
during a communication session. A phototransistor, however, requires that the<br>
voltage across the transistor must change in order to switch from a first state to a<br>
second state.<br>
To facilitate faster communications, op-amps are connected to the<br>
phototransistors. Each op-amp is configured as a current to voltage converter. The<br>
op-amp therefore maintains a constant voltage across the phototransistor. As a result,<br>
the output can change between a first state and a second state with minimal impact on<br>
phototransistor voltage.<br><br>
Waveform Capture<br>
Microcomputer 114 is programmed to capture waveform data (gain<br>
and phase corrected samples) upon the occurrence of a predetermined event. An<br>
event may, for example, be that the voltage in one of the phases falls below a<br>
predetermined percentage of a reference voltage, the voltage in one of the phases rises<br>
above a predetermined percentage of a reference voltage, or a power fail transient is<br>
detected. Waveform capture is activated by setting a waveform capture flag, and if<br>
the flag is set, a waveform counter is set to a predetermined count, e.g., 70. Upon the<br>
occurrence of the event, and if the waveform capture flag is set and if the counter has<br>
a value greater than 0, then voltage samples and current samples for each phase are<br>
stored in RAM. These samples are stored after DAP 112 interrupts the main process<br>
running in microcomputer 114 and the DSP interrupt service routine is invoked. The<br>
counter is decremented, and if the counter still has a value greater than 0, then the<br>
voltage samples and current samples for each phase at that time are stored. These<br>
samples are also stored after the DAP 112 interrupts the main process and the DSP<br>
interrupt routine is serviced. Operations continue in this manner so that upon the<br>
occurrence of an event, the desired waveform data is collected.<br>
In one embodiment, microcomputer 114 can be programmed to collect<br>
more or less than 70 samples per waveform from a set of six waveforms (three current<br>
waveforms and three voltage waveforms). For example, the amount of data collected<br>
can be programmed based on the type of triggering event.<br>
Revenue Guard Plus<br>
Microcomputer 114 is programmable to determine energy<br>
consumption and other metering quantities for many different form types. In addition,<br>
and if one phase voltage is lost during metering operations and the other two phase<br>
voltages are still available, microcomputer 114 automatically converts from a three<br>
voltage source metering operation to a two voltage source metering operation. For<br>
example, and if metering is being performed with three input voltage sources Va, Vb,<br>
and Vc, and if one of the phase voltages, e.g., Va, is lost, microcomputer 114<br>
automatically changes to metering to the appropriate form type, i.e., generating<br>
metering quantities using Vb and Vc.<br>
More specifically, an in an exemplary embodiment, microcomputer<br>
114 is operable to perform metering in accordance with multiple form types. A case<br>
number is assigned to each form type depending, for example, upon the number of<br>
elements and the number of wires. For example, form type 6 corresponds to a WYE<br>
configuration when all voltages Va, Vb, and Vc are present. Form types 7, 2, and 8<br>
correspond to metering operations performed when Va, Vb, and Vc, respectively, are<br>
absent. If microcomputer 114 is operating in accordance with type 6 and voltage Va is<br>
lost (Va = -[Vb + Vc]), then microcomputer automatically converts to metering in<br>
accordance with form type 7. Similarly, if voltages Vb or Vc are lost, then<br>
microcomputer 114 automatically converts to metering in accordance with form type<br>
2 or form type 8, respectively. Therefore, rather than discontinuing metering and<br>
possibly losing metering data, meter 100 automatically converts to another form type<br>
in the event that one of the phase voltages is lost. In one embodiment, meter 100<br>
converts to a 2 1/2 element meter. After a programmable interval, voltage is checked<br>
again and an appropriate type (6, 2, 7 or 8) is then invoked.<br>
In one embodiment, determining whether voltage Va is lost comprises<br>
checking three consecutive times at a 15 second interval after switching back to DSP<br>
form type 6. Also, in one embodiment, Va, is considered "lost" when it drops to one-<br>
half of the normal voltage. In yet another embodiment, at least one of the number of<br>
consecutive checks made before Va is deemed lost, the interval between the checks,<br>
and the voltage at which Va is deemed lost is programmable.<br>
Long Communication Session<br>
When an external reader attempts to obtain data from meter 100, and<br>
since a large volume of data can be stored in the meter memory, it is desired to<br>
provide the reader with a snap shot of data at a particular point in time, rather than<br>
accessing the different metering data at different points in time during one<br>
communication session. If different data is accessed at different points in time, then it<br>
is possible that the metering data will not be consistent, especially if the<br>
communication session is long, e.g., 1 hour. For example, a load 142 continues to<br>
consume energy during a read operation, and if the communication session requires<br>
more than a few minutes to complete, the metering data collected at the beginning of<br>
the session will not necessarily correspond to the metering data collected at the end of<br>
the session.<br>
Accordingly, in one embodiment, upon receipt of a request for a<br>
communication session, e.g., reading a revenue table or a communication requiring a<br>
billing read command, microcomputer 114 generates a static copy of selected<br>
revenue-related data. For example, the current load profile data is written to<br>
EEPROM 120, or a static copy is made in RAM. This snapshot of data is then read<br>
out by the reader/host via port 122.<br>
In one embodiment, microcomputer 114 generates the static copy of<br>
selected revenue-related data in response to a PSEM command.<br>
By storing the snapshot of data and providing such snapshot of data to<br>
the external device, the read data all corresponds to a particular point in time and is<br>
consistent, i.e., the data read at minute 1 of the session is obtained under the same<br>
circumstance as the data read at minute 60 of the session.<br>
Rollback<br>
In the event that meter 100 is to be updated or reprogrammed during<br>
operation, the following procedure is performed to ensure that the update, or new<br>
program, is executed as quickly as possible upon initiation of the change.<br>
Specifically, EEPROM 120 includes storage locations for active and inactive<br>
metering programs, i.e., an active program segment and an inactive program segment.<br>
The program currently being utilized by meter 100 is stored in the active program<br>
segment of EEPROM 120. The active program controls include, for example,<br>
display scroll parameters, time-of-use data, a calendar, season change, and holidays.<br>
Billing data is generated in accordance with the active program.<br>
In the event that an update to the active program is required, or in the<br>
event that an entirely new program is to be utilized, then a host writes the<br>
updated/new program to the inactive segment in EEPROM 120. Upon initiation of<br>
writing the updated/new program to EEPROM 120, meter microcomputer 114 also<br>
interrupts the then active program and the metering data is stored in the meter<br>
memory. Upon successful completion of the program update, or loading the new<br>
program, microcomputer 114 designates the inactive segment containing the new<br>
program as the active segment, and causes metering operations to then proceed. The<br>
metering data stored in the meter memory during the update is processed by the new<br>
program.<br>
By interrupting metering program operations during the update, and<br>
storing the metering data collected during the update and processing such data with<br>
the new program once the new program is loaded, the new program is utilized in<br>
metering operations as soon as possible. Such operation sometimes is referred to as<br>
"rollback" because meter 100 "rolls back" to a previous configuration if a change to a<br>
current configuration is interrupted before it is completed. In this manner, meter 100<br>
is not left in an inconsistent state, and can continue operating with a previously<br>
programmed set of parameters. (Previously, meters would lose their programs<br>
entirely if programming were interrupted.)<br>
If the new program is not successfully written into the inactive<br>
segment, then microcomputer 114 does not change the designation of the active<br>
segment and metering continues with the program stored in the active segment.<br>
Specifically, the metering data collected during the attempted update is processed<br>
using the program in the active segment and metering operations continue.<br>
Diagnostics<br>
The following diagnostic operations are performed by meter<br>
microcomputer 114. Of course, additional diagnostic operations could be performed<br>
by microcomputer 114, and fewer than all the diagnostic operations described below<br>
could be implemented. Set forth below are exemplary diagnostic operations and a<br>
description of the manner in which to perform such operations. In one exemplary<br>
embodiment, diagnostics 1-5 and 8 are checked once every 5 seconds. Also in this<br>
embodiment, diagnostics 6 and 7 are checked once every second. A programmable<br>
number of consecutive failures are permitted for diagnostics 1-5 and 8, and another,<br>
different, programmable number of consecutive failures are permitted for diagnostics<br>
6 and 7 before a diagnostic error results.<br>
Diagnostic #1 (Polarity, Cross Phase, Rev. Energy Flow)<br>
This diagnostic verifies that all meter elements are sensing the correct<br>
voltage and current for the electrical service. In an exemplary embodiment, this<br>
diagnostic is accomplished by comparing each voltage and current phase angle with<br>
expected values. In one specific embodiment, voltage phase angles must be within<br>
ten degrees of the expected value and current phase angles must be within 120<br>
degrees of the expected value to prevent a diagnostic 1 error.<br>
Diagnostic #2 (Phase Voltage Alert)<br>
This diagnostic verifies that the voltage at each phase is maintained at<br>
an acceptable level with respect to the other phases. In an exemplary embodiment,<br>
and for diagnostic 2 tests, the A phase voltage is combined with the user programmed<br>
percentage tolerance to determine the acceptable range for the B and C phases<br>
voltages as appropriate for the ANSI form and service type. For a 4 wire delta<br>
service, Vc is scaled before being compared to Va. In one embodiment, this<br>
diagnostic is not performed if Va is bad.<br>
Diagnostic #3 (Inactive Phase Current)<br>
This diagnostic verifies that the current of each phase is maintained at<br>
an acceptable level. A diagnostic 3 error condition is triggered if the current of one or<br>
more phases, as appropriate for the ANSI form and service type, falls below a user<br>
programmed low current value and at least one phase current remains above this<br>
value.<br>
Diagnostic #4 (Phase Angle Alert)<br>
This diagnostic verifies that the current phase angles fall within a user<br>
a specified range centered on expected values. In an exemplary embodiment,<br>
diagnostic #4 is enabled only if diagnostic #1 is enabled and is checked only if<br>
diagnostic #1 passes. The user programmed current phase angle tolerance value for<br>
diagnostic #4 has a range of zero to ninety degrees in increments of 1/10 degree.<br>
Diagnostic #5 (Distortion Alert)<br>
This diagnostic verifies that the user-selected form of distortion<br>
measured on each individual element and, in the case of distortion power factor,<br>
across all elements, is not excessive. This diagnostic is selectable to monitor one of<br>
the following distortion measures.<br>
Distortion Power Factor (DPF), per element and summed<br>
Total Demand Distortion (TDD), per element only<br>
Total Harmonic Current Distortion (ITHD), per element only<br>
Total Harmonic Voltage Distortion (VTHD), per element only, if a<br>
valid element.<br>
A diagnostic 5 error condition is triggered if any of the distortion calculations exceed<br>
a user-specified threshold.<br>
Four counters are associated with diagnostic 5 (one counter for each<br>
element, and for DPF only, and one counter for the total of all elements). In an<br>
exemplary embodiment, diagnostic 5 is checked only when the one second kW<br>
demand exceeds a user programmed threshold which is the same demand threshold<br>
used for the power factor threshold output. The user programmed distortion tolerance<br>
value for diagnostic 5 has a range of 0 to 100% in increments of 1%.<br>
Diagnostic 6 (Undervoltage, Phase A)<br>
This diagnostic verifies that the phase A voltage is maintained above<br>
an acceptable level. In an exemplary embodiment, the user programs an undervoltage<br>
percentage tolerance for diagnostic 6 that has a range of 0 to 100% in increments of<br>
1 %. A diagnostic 6 error condition is triggered if the voltage at phase A falls below<br>
the reference voltage (Vref) minus the undervoltage percentage tolerance (T).<br>
Fail Condition: Va 
consecutive checks.<br>
The threshold used for diagnostic 6 is also used for the potential<br>
annunciators.<br>
Diagnostic #7 (Overvoltage, Phase A)<br>
This diagnostic verifies that the phase A voltage is maintained below<br>
an acceptable level. In an exemplary embodiment, the user programs an overvoltage<br>
percentage tolerance for diagnostic 7 that has a range of 0 to 100% in increments of<br>
1%. A diagnostic 7 error condition is triggered if the voltage at phase A rises above<br>
the reference voltage (Vref) plus the overvoltage percentage tolerance (T).<br>
Fail Condition: Va &gt; Vref(100% + T%)<br>
Diagnostic #8 (High Imputed Neutral Current)<br>
This diagnostic verifies that the imputed neutral current is maintained<br>
below an acceptable level. In an exemplary embodiment, a diagnostic 8 error<br>
condition is triggered if the imputed neutral current exceeds a user-programmed<br>
threshold. Form 45 and 56 as 4WD and 4WY applications are not valid services for<br>
determining the imputed neutral values. In these cases, the imputed neutral is zeroed<br>
after the service type has been determined.<br>
Meter 100 includes an event log stored in meter memory for capturing<br>
information about events. The event log is used, for example, to store the occurrence<br>
of events, such as a diagnostic condition sensed as a result of performing one of the<br>
tests described above.<br>
In addition, and using complex I/O board 138, an output can be<br>
generated by microcomputer 114 to such board 138 to enable remote determination of<br>
a diagnostic failure. Such capability is sometimes referred to as a Diagnostic Error<br>
Alert. When configured for a diagnostic error alert, the following designation may be<br>
used to correlate a diagnostic error condition to an output.<br>
15<br>
For example, an output of 01010101 provides a diagnostic error alert for diagnostic<br>
tests 1,3,5, and 7.<br>
When one of the selected diagnostics is set, the output is set. When all<br>
selected diagnostics are cleared, the output is cleared. Diagnostic operations are not<br>
performed when meter 100 is determining the electrical service.<br>
Programmable Durations<br>
In one specific embodiment, the diagnostic tests described above,<br>
except diagnostics 6 and 7 (undervoltage and overvoltage), are performed every 5<br>
seconds using one second worth of data. Diagnostics 6 and 7 are performed every<br>
second. If a diagnostic fails each check performed during a programmed duration<br>
which begins with the first failed check, the diagnostic error is set and the diagnostic<br>
counter is incremented.<br>
In an exemplary embodiment, two programmable diagnostic fail<br>
durations are provided. One programmable fail duration is for diagnostics 6 and 7,<br>
and one programmable fail duration for the other diagnostics. The fail duration for<br>
diagnostics 6 and 7 is programmable from 3 seconds to 30 minutes in 3 second<br>
increments. The fail duration for the remaining diagnostics is programmable from 15<br>
seconds to 30 minutes in 15 second increments.<br>
In the exemplary embodiment, two consecutive error free checks are<br>
required to clear a diagnostic error condition. The range for all diagnostic counters is<br>
0 to 255. When a diagnostic counter reaches 255, it must be reset by a user.<br>
Diagnostic errors and counters may be reset via communications procedures.<br>
Totalizations<br>
As explained above, meter 100 includes a measurement profile 204<br>
that accepts external inputs. The external inputs can, for example, be pulse inputs<br>
from other meters associated with a load, e.g., a manufacturing plant. The external<br>
inputs can be collected, scaled (e.g., every minute), and then totaled (i.e., summed<br>
together) to provide a quantity of total energy consumed from one plant. The<br>
totalized value can then be stored in one location. In addition, internal quantities can<br>
be totalized (e.g., user-selected quantities can be totalized).<br>
Data Accumulators<br>
In one embodiment, microcomputer 114 includes a 64KB on-board<br>
RAM, microcomputer 114 is programmed to accumulate values in its RAM, and these<br>
accumulated values are then subsequently displayed on display 124. By programming<br>
microcomputer 114 to store and accumulate data in this manner, meter 100 can<br>
accumulate metering data for display to an operator. Moreover, a utility company can<br>
monitor many quantities without having data by time of use rate, demand reset,<br>
seasonal change, etc.<br>
Load Profile<br>
Electricity meters typically store integrated quantities as load profile<br>
data. In addition to adding quantities, meter 100 can be programmed to store the<br>
maximum and minimum or most recent quantities, i.e., meter 100 can track non-<br>
integrated quantities. A user, therefore, can select up to 20 quantities for recording.<br>
Accordingly, microcomputer 114 is programmed to compare the maximum and<br>
minimum values at every interval with the stored quantities, and if a new maximum or<br>
minimum is detected, the new maximum or minimum is stored in the appropriate<br>
recorder channel.<br>
Demand<br>
As with load profile data, microcomputer 114 is programmed to<br>
compare the demand value at every interval with a stored maximum demand in, for<br>
example, the on-board RAM. If the current demand is greater than the stored<br>
maximum demand, then the current demand is copied over the stored maximum<br>
demand and stored. In addition, for non-integrated quantities, momentary by<br>
momentary interval comparisons can also be performed.<br>
Coincident Power Factors<br>
Meter 100 is configurable to determine multiple types of demands,<br>
such as kW, kVAr, kVA, and distortion KVA. For each demand, there are other, e.g.,<br>
two, coincident values. Accordingly, meter microcomputer 114 determines, on each<br>
interval, demand values and compares the calculated demand values to the stored<br>
maximum values. If one of the then calculated values is greater than the<br>
corresponding demand stored value, i.e., the current value is the maximum, then the<br>
value of the other demands is of interest. Specifically. power factor is the quotent of<br>
two of the demands, and two coincident power factors can be determined and stored.<br>
For example, if there are five demand types, an operator can specify that upon the<br>
occurrence of a maximum demand, two coincident power factor values are stored,<br>
e.g., Demand 1 / Demand 2 and Demand 3 / Demand 4.<br>
Multiple Distortion Measurements<br>
Meter microcomputer 114 also is configured to calculate distortion<br>
power factor for each element (e.g., distortion Vah / apparent Vah). Microcomputer<br>
114 also calculates a sum of the element distortion power factors, and Vthd, Ithd, and<br>
Tdd, all per element. The equations used to calculate these values are well known. In<br>
meter 100, the multiple distortion measurements are available for display, and the<br>
calculations are performed every momentary interval.<br>
Bidirectional Measures<br>
Microcomputer 114 is further configured to determine, for every<br>
momentary interval, the quadrant in which user-selected quantities and other metering<br>
quantities such as watthours are being measured. As is well known in the art, the<br>
quadrants are defined by real (Wh) and imaginary (VAR). Meter 100 therefore tracks<br>
the quadrant in which energy is being received/delivered. Such measurements are<br>
specified by the user in measurement profile 204.<br>
Transformer Loss Compensation<br>
Microcomputer 114 is configured to compensate for energy losses that<br>
occur within distribution transformers and lines. Such compensation is enabled if a<br>
user selects this option. Transformer loss compensation (TLC) is applied to<br>
momentary interval per element Wh, Varh, and Vah data. The transformer model for<br>
loss compensation is based on the following relationships with metered voltage and<br>
current as variables.<br>
No-load (core) (iron) loss watts are proportional to V2<br>
Load (copper) loss watts are proportional to I2<br>
No-load (core) (iron) loss vars are proportional to V4<br>
Load (copper) loss vars are proportional to I2<br>
Line losses are considered as part of the transformer copper losses.<br>
Every momentary interval, the signed losses for each element (x = a, b, c) are<br>
determined using the TLC constants and the measured momentary interval V2h and<br>
I2h for each element:<br>
LWhFex = iron loss watt hours = Vx2h * G<br>
LWhCUx = copper loss watt hours = Ix2h * R<br>
LVarhFEx = iron loss var hours = (Vx2h/h) * Vx2h * B/V2<br>
LVarhCUx = copper loss var hours = Ix2h * X<br>
Compensated watt hours and var hours are then determined for each element by<br>
adding the signed losses to the measured momentary interval watthours and var hours.<br>
Compensated Wxh = measured Wxh + LWhFEx + LWhCUx<br>
Compensated Varhx = measured Varh + LVarhFEx + LVarCUx<br>
Momentary VAh calculations are made using the compensated watthours and var<br>
hours. The distortion component of the Vah value is not compensated for transformer<br>
losses.<br>
Pending Actions<br>
When operating in a time-of-use mode, a user may desire to implement<br>
a new real-time pricing schedule. In one embodiment, microcomputer 114 also<br>
checks every 15 minutes for a real-time pricing command.<br>
More specifically, microcomputer 114 includes a real-time pricing<br>
mode for executing a specified real-time pricing (RTP) rate for as long as real-time<br>
pricing is active. Microcomputer 114 enters the RTP mode by, for example, a<br>
dedicated input from a modem board or an I/O board 130, or by a pending or<br>
immediate action. The inputs for RTP include setting an RTP procedure flag which<br>
indicates whether to enter or exit RTP. A RTP activation delay (time in minutes)<br>
delays entering RTP after the input has been activated. In one specific embodiment,<br>
the delay is programmable from 0 to 255 minutes.<br>
During power-up, the saved RTP procedure flag and time remaining<br>
until RTP activation are retrieved from EEPROM 120 by microcomputer 114. After<br>
microcomputer 114 completes its initialization tasks, the following task are<br>
performed.<br>
If the power outage crossed one or more quarter-hour boundaries,<br>
microcomputer 114 determines whether a pending RTP action was<br>
scheduled for one of the crossed quarter-hour boundaries.<br>
If an RTP action was scheduled, microcomputer 114 determines what<br>
the pending RTP action was, and if the action was to enter RTP,<br>
microcomputer 114 enters RTP and sets the RTP procedure flag. The<br>
RTP activation delay does not delay entering the RTP rate via the<br>
pending action.<br>
If the RTP pending action was to exit RTP, the RTP procedure flag is<br>
cleared.<br>
If the RTP pending action was to exit RTP or no pending RTP action<br>
was scheduled to start during the outage, microcomputer 114 checks<br>
the status of the RTP input and the status of the RTP procedure flag. If<br>
RTP has been activated, or the enter RTP command had been sent<br>
prior to the power failure, microcomputer 114 checks the RTP<br>
activation delay timer. If the timer is zero, microcomputer 114 enters<br>
the RTP rate. Otherwise, microcomputer 114 enters the RTP rate after<br>
the timer expires.<br>
During normal operation, microcomputer 114 checks the status of the<br>
RTP input. When microcomputer 114 detects that the RTP input has changed state<br>
from inactive to active, microcomputer 114 checks the programmed activation delay<br>
time. If the delay time is zero, microcomputer 114 enters the RTP rate. Otherwise,<br>
microcomputer 114 sets the activation delay timer and enters the RTP rate when the<br>
timer has expired.<br>
During RTP mode operations, microcomputer 114 continues to<br>
calculate data accumulations, and average power factor and demands are calculated as<br>
when in the TOU metering mode. When the RTP signal is de-activated,<br>
microcomputer 114 checks the status of the RTP procedure flag. If the RTP<br>
procedure flag is not set, microcomputer 114 exits the RTP mode. Otherwise,<br>
microcomputer 114 remains in the RTP mode until the exit RTP immediate procedure<br>
is received or a pending exit RTP action is executed.<br>
When microcomputer 114 exits RTP, microcomputer 114 returns to the<br>
TOU rate in effect for the time and date when the RTP ends. Microcomputer 114<br>
processes any unprocessed summations and demand data. For block and rolling<br>
demand, the demand intervals end.<br>
In one embodiment, meter 100 is also able to automatically install a<br>
new TOU schedule when a pending date/time is reached. This feature allows a new<br>
calendar and/or tier structure with setpoints. Generally, microprocessor 114 checks,<br>
at midnight of every day, for a pending TOU schedule. If, for example, a TOU<br>
schedule is pending for September 1 at midnight, the pending TOU schedule is loaded<br>
and becomes active.<br>
Voltage Sags and Swells<br>
The term voltage sag refers to a situation in which a phase voltage falls<br>
below a predetermined level, and the term voltage swell refers to a situation in which<br>
a phase voltage rises above a predetermined level. Voltage sags and swells generally<br>
are power quality concerns, and typically are associated with brown outs and similar<br>
events. In meter 100, and if a voltage sag or swell is detected, an event is logged in<br>
the event log, and the voltages and currents per event (e.g., maximum and minimum<br>
voltage and current per phase) are stored.<br>
Thresholds are selected to compare the current voltage values against.<br>
Specifically, a sag threshold and a swell threshold are determined. For 120 to 480 V<br>
services, an exemplary threshold is:<br>
where SF is a scale factor equal to 3125 x 10-6. For 57 to 120 V services, an<br>
exemplary threshold is given by the above equation, where SF= 500 x 10-6.<br>
Mean voltages can be determined in accordance with the following:<br>
Given the number of units in a cycle and the sample count, the mean measurement in<br>
volts is:<br>
The V2 cycle accumulations are accumulated every sample.<br>
Remote Upgrade<br>
Converting meter operation refers to enabling a user to selectively<br>
operate the meter in different metering modes, such as selectively operating a meter<br>
either a time of use (TOU) or demand metering mode. Specifically, and as described<br>
below in more detail, a user can convert meter operation from a demand only mode to<br>
a time of use mode, for example. In one form, the meter has three different modes.<br>
These modes are the demand only mode, the demand with load profile mode<br>
(sometimes referred to in the art as the demand with timekeeping mode), and the TOU<br>
mode.<br>
In general, and in accordance with one aspect of the present invention,<br>
a soft switch is associated with optional features, and the soft switch enables remote<br>
upgrade and downgrade of the meter. The routines associated with the optional<br>
features are stored in meter memory, and when the soft switch for a particular feature<br>
is enabled, the routine for the enabled feature is executed, and tables become visible.<br>
Similarly, when the soft switch for a particular feature is not enabled, the routine for<br>
the not-enabled feature is not executed and tables are no longer visible.<br>
Examples of optional features enabled and disabled by soft switches<br>
are listed below.<br>
TOU<br>
Expanded Measures<br>
Basic Recording / Self-read<br>
Event Log<br>
Alternate Communications<br>
DSP Sample Output<br>
Pulse Initiator Output<br>
Channel Recording/Self-reads<br>
Totalization<br>
transformer Loss Compensation<br>
Transformer Accuracy Adjustment<br>
Revenue Guard Plus<br>
Voltage Event Monitor<br>
Bi-Directional Measurements<br>
Waveform Capture<br>
To downgrade meter function, e.g., remotely using a remote computer<br>
communicating with the meter via a communications option board, the meter memory<br>
is read to determine which soft switches are installed. An operator then selects a soft<br>
switch to be removed, and the appropriate file associated with the switch is disabled.<br>
If a significant change will result in removal of a switch, e.g., removing a TOU switch<br>
in a TOU meter, a warning message is displayed to the operator requesting<br>
confirmation that the selected switch should be removed.<br>
To upgrade a meter, an operator selects a soft switch to be installed.<br>
The soft switch is then enabled in the meter and the particular tables and routines<br>
associated with the function for that switch are utilized during meter operations.<br>
Additional details regarding upgrade/downgrade are set forth in U.S.<br>
Patent Application Serial No. 08/565,464, filed November 30, 1995, now U.S. Patent<br>
No. 5,742,512, issued April 21, 1998, and entitled ELECTRONIC ELECTRICITY<br>
METERS, which is assigned to the present assignee and hereby incorporated herein,<br>
in its entirety, by reference. In this application, at least some operations described as<br>
being performed in the DSP would be performed in the microcomputer of the present<br>
meter.<br>
Meter Form Types<br>
Meter 100 includes instruction sets identifying processing steps to be<br>
executed to determine line voltages and line currents for respective meter form types.<br>
Such instruction sets are stored, for example, in microcomputer memory.<br>
Microcomputer 114 is configured to receive a control command via optical port 122,<br>
and microcomputer 114 then processes the data received from ADC 112 in<br>
accordance with the selected instruction set.<br>
The underlying process steps to make calculations such as reactive<br>
power and active power are dependent upon the meter form and the electrical circuit<br>
in which the meter is connected. For example, the meter form types includes meter<br>
ANSI form 9 and meter ANSI form 16 type forms, the number of elements may be 3,<br>
2, 2 1/2, or 1, and there are a number of circuit configurations in which the meter can<br>
be connected. The meter form, elements, and circuit configurations affect the inputs<br>
received by microcomputer 114 and the meter operation. Additional details regarding<br>
such operations are set forth in U.S. Patent Application Serial No. 08/857,322, filed<br>
May 16, 1997, and entitled AN ELECTRONIC ELECTRICITY METER<br>
CONFIGURABLE TO OPERATE IN A PLURALITY OF METER FORMS AND<br>
RATINGS, which is assigned to the present assignee and hereby incorporated herein,<br>
in its entirety, by reference. In this application, at least some operations described as<br>
being performed in the DSP would be performed in the microcomputer of the present<br>
meter.<br>
It will thus be seen that the methods and apparatus described herein<br>
flexibly define calculations performed in a low cost, high functionality electric meter.<br>
Moreover, the functionality of the meter can readily be changed by being<br>
reprogrammed by a utility company so that the meter calculates and/or accumulates<br>
utility-specific metering quantities.<br>
While the invention has been described in terms of various specific<br>
embodiments, those skilled in the art will recognize that the invention can be<br>
practiced with modification within the spirit and scope of the claims.<br>
WE CLAIM:<br>
1.   A method for defining meter data calculations in an elec-<br>
tronic electric meter (100), said method comprising:<br>
storing a set of predefined data calculation instruction in<br>
a non-volatile memory (120) of the meter (100);<br>
storing a first set of vectors in a memory (118) of the<br>
meter (100), the vectors pointing to data calculations of the set<br>
of predefined data calculation instructions;<br>
metering a plurality of electrical quantities of a power<br>
source; and controlling calculations performed on the metered<br>
electrical quantities in accordance with the data calculation<br>
instructions pointed to by the first stored set of vectors and<br>
characterized by:<br>
changing the data calculation instructions during execution<br>
of the data calculation instructions by the meter; and<br>
calculating at least one of a momentary interval quantity, a<br>
one-minute meter defined sum, a one-minute user defined sum, a<br>
FIFO sum, a demand interval sum and a load profile interval sum.<br>
2.   A method as claimed in Claim 1 wherein storing a first set<br>
of vectors in a memory of the meter comprises the step of storing<br>
the first set of vectors in a non-volatile, reprogrammable memory<br>
of the meter.<br>
3.   A method as claimed in Claim 2 comprising the steps of<br>
reprogramming the non-volatile memory with a second set of vec-<br>
tors, and controlling calculations performed on metered electri-<br>
cal quantities in accordance with the data calculation instruc-<br>
tions pointed to by the second stored set of vectors.<br>
4.   A method as claimed in Claim 3 comprising the step       of<br>
downloading code into a reprogrammable, non volatile memory     of<br>
the meter to control the meter to computer and store a set     of<br>
measurement profile values.<br>
5.        A method as claimed in Claim 4 comprising the step of<br>
inputting and storing at least one value from an external source<br>
as a measurement profile value.<br>
6.        A method as claimed in Claim 4 wherein downloading code<br>
into a reprogrammable, non-volatile memory of the meter to<br>
control the meter to compute a set of measurement profile values<br>
comprises the step of downloading a set of instructions defining<br>
user—defined functions to be used to compute the set of<br>
measurement profile values.<br>
7.   A method as claimed in Claim 4 comprising the step of<br>
totalizing a set of values using the set of measurement profile<br>
values.<br>
8.   A method as claimed in Claim 4 comprising the step of<br>
generating a set of demand values using the set of measurement<br>
profile values.<br>
9.   A method as claimed in Claim 4 comprising the step of<br>
generating a set of coincident demands using the set of measure-<br>
ment profile values.<br>
10. A method as claimed in Claim 4 comprising the step of<br>
generating a set of power factors using the set of measurement<br>
profile values.<br>
11.  A method as claimed in Claim 4 comprising the step of<br>
generating a set of time-of—use summaaaries from the set of<br>
measurement profile values.<br>
12.  A method as claimed in Claim 4 wherein the controlled<br>
calculations include calculations performed at a plurality of<br>
different periodic intervals.<br>
13.    A method as claimed in Claim 12 wherein the plurality of<br>
different periodic intervals include intervals selected from<br>
the set consisting of momentary interval, end of minute<br>
interval, end of demand interval, end of demand subinterval, and<br>
end of profile interval.<br>
14.  An electronic electric meter (100) configured to!<br>
store a set of predefined data calculation instructions in a<br>
non—volatile memory (120) of said meter (100);<br>
store a first set of vectors in a memory (118) of said meter<br>
(100), said vectors pointing to data calculations of said set of<br>
predefined data calculation instructions;<br>
said meter (100) having a microcomputer (114) configured to<br>
control calculations performed on the metered electrical quanti-<br>
ties in accordance with said data calculation instructions<br>
pointed to by said first stored set of vectors characterized in<br>
that<br>
the meter (100) receives a change in the data calculation<br>
instructions during execution of the data calculation<br>
instructions; and<br>
the meter (100) calculates at least one of a momentary<br>
interval quantity, a one-minute meter defined sum, a one-minute<br>
user defined sum, a FIFO sum, a demand interval sum, and a load<br>
profile interval sum.<br>
15.  A meter as claimed in Claim 14 wherein said first set of<br>
vectors is stored in a non-volatile, reprogrammable memory of<br>
said meter.<br>
16.  A meter as claimed in Claim 15 configured to reprogram said<br>
non-volatile memory with a second set of vectors, and to control<br>
said calculations performed on metered electrical quantities in<br>
accordance with said data calculation instructions pointed to by<br>
said second stored set of vectors.<br>
17.       A meter as claimed in Claim 16 configured to store<br>
downloaded code into a reprogrammable, non-volatile memory of<br>
said meter to control said microcomputer to compute and to store<br>
a set of measurement profile values.<br>
18.     A meter as claimed in Claim 17 configured to input and<br>
store at least one value from an external source as a measurement<br>
profile value.<br>
19. A meter as claimed in Claim 17 wherein said meter being<br>
configured to store downloaded code into a reprogrammable, non-<br>
volatile memory of said meter to control said microprocessor to<br>
compute a set of measurement profile values comprises said meter<br>
being configured to store a set of instructions defining user-<br>
defined functions to be used to compute said set of measurement<br>
profile values.<br>
20 A meter as claimed in Claim 17 configured to totalize<br>
a set of values using said set of measurement profile values.<br>
21.       A meter as claimed in Claim 17 configured to generate<br>
a set of demand values using said set of measurement profile<br>
values.<br>
22.     A meter as claimed in Claim 17 configured to generate a<br>
set of coincident demands using said set of measurement profile<br>
values.<br>
23.     A meter as claimed in Claim 17 configured to generate a<br>
set of power factors using said set of measurement profile<br>
values.<br>
24.    A meter as claimed in Claim 17 configured to generate a<br>
set of time-of-use summaries from the set of measurement profile<br>
values.<br>
25.    A meter as claimed in Claim 17 wherein said controlled<br>
calculations comprise calculations performed at a plurality of<br>
diffedrent periodic intervals.<br>
26.    A meter as claimed in Claim 25 wherein said plurality of<br>
different periodic intervals comprise intervals selected from the<br>
set consisting of momentary interval, end of minute interval,<br>
end of demand interval, end of demand subinterval, and end of<br>
profile interval.<br>
The present invention, in one embodiment, is a method for defin-<br>
ing meter data calculation in an electronic meter (100). The<br>
method includes steps of storing a set of predefined data calcu-<br>
lation instructions in a non-volatile memory (120) of the meter;<br>
storing a first set of vectors in a memory (118) of the meter,<br>
the vectors pointing to data calculations of the set of prede-<br>
fined data calculation instructions; metering a plurality of<br>
electrical quantities of power source; and controlling<br>
calculations performed on the metered electrical quantities in<br>
accordance with the data calculation instructions pointed to by<br>
the first stored set of vectors.</td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDAxNTAta29sLWdyYW50ZWQtYWJzdHJhY3QucGRm" target="_blank" style="word-wrap:break-word;">in-pct-2001-00150-kol-granted-abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDAxNTAta29sLWdyYW50ZWQtYXNzaWdubWVudC5wZGY=" target="_blank" style="word-wrap:break-word;">in-pct-2001-00150-kol-granted-assignment.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDAxNTAta29sLWdyYW50ZWQtY2xhaW1zLnBkZg==" target="_blank" style="word-wrap:break-word;">in-pct-2001-00150-kol-granted-claims.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDAxNTAta29sLWdyYW50ZWQtY29ycmVzcG9uZGVuY2UucGRm" target="_blank" style="word-wrap:break-word;">in-pct-2001-00150-kol-granted-correspondence.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDAxNTAta29sLWdyYW50ZWQtZGVzY3JpcHRpb24gKGNvbXBsZXRlKS5wZGY=" target="_blank" style="word-wrap:break-word;">in-pct-2001-00150-kol-granted-description (complete).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDAxNTAta29sLWdyYW50ZWQtZHJhd2luZ3MucGRm" target="_blank" style="word-wrap:break-word;">in-pct-2001-00150-kol-granted-drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDAxNTAta29sLWdyYW50ZWQtZm9ybSAxLnBkZg==" target="_blank" style="word-wrap:break-word;">in-pct-2001-00150-kol-granted-form 1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDAxNTAta29sLWdyYW50ZWQtZm9ybSAxOC5wZGY=" target="_blank" style="word-wrap:break-word;">in-pct-2001-00150-kol-granted-form 18.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDAxNTAta29sLWdyYW50ZWQtZm9ybSAyLnBkZg==" target="_blank" style="word-wrap:break-word;">in-pct-2001-00150-kol-granted-form 2.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDAxNTAta29sLWdyYW50ZWQtZm9ybSAzLnBkZg==" target="_blank" style="word-wrap:break-word;">in-pct-2001-00150-kol-granted-form 3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDAxNTAta29sLWdyYW50ZWQtZm9ybSA1LnBkZg==" target="_blank" style="word-wrap:break-word;">in-pct-2001-00150-kol-granted-form 5.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDAxNTAta29sLWdyYW50ZWQtZ3BhLnBkZg==" target="_blank" style="word-wrap:break-word;">in-pct-2001-00150-kol-granted-gpa.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDAxNTAta29sLWdyYW50ZWQtbGV0dGVyIHBhdGVudC5wZGY=" target="_blank" style="word-wrap:break-word;">in-pct-2001-00150-kol-granted-letter patent.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDAxNTAta29sLWdyYW50ZWQtcmVwbHkgdG8gZXhhbWluYXRpb24gcmVwb3J0LnBkZg==" target="_blank" style="word-wrap:break-word;">in-pct-2001-00150-kol-granted-reply to examination report.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDAxNTAta29sLWdyYW50ZWQtc3BlY2lmaWNhdGlvbi5wZGY=" target="_blank" style="word-wrap:break-word;">in-pct-2001-00150-kol-granted-specification.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDAxNTAta29sLWdyYW50ZWQtdHJhbnNsYXRlZCBjb3B5IG9mIHByaW9yaXR5IGRvY3VtZW50LnBkZg==" target="_blank" style="word-wrap:break-word;">in-pct-2001-00150-kol-granted-translated copy of priority document.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=SU4tUENULTIwMDEtMTUwLUtPTC0oMDEtMDMtMjAxMiktQ09SUkVTUE9OREVOQ0UucGRm" target="_blank" style="word-wrap:break-word;">IN-PCT-2001-150-KOL-(01-03-2012)-CORRESPONDENCE.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=SU4tUENULTIwMDEtMTUwLUtPTC0oMDEtMDMtMjAxMiktRk9STS0yNy5wZGY=" target="_blank" style="word-wrap:break-word;">IN-PCT-2001-150-KOL-(01-03-2012)-FORM-27.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=SU4tUENULTIwMDEtMTUwLUtPTC0oMDEtMDMtMjAxMiktUEEtQ0VSVElGSUVEIENPUElFUy5wZGY=" target="_blank" style="word-wrap:break-word;">IN-PCT-2001-150-KOL-(01-03-2012)-PA-CERTIFIED COPIES.pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="217460-crystallographically-stable-amorphous-cephalosporin-compositions-and-process-for-producing-the-same.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="217462-heterobifunctional-poly-ethylene-glycol-derivatives-and-methods-for-their-preparation.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>217461</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>IN/PCT/2001/150/KOL</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>13/2008</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>28-Mar-2008</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>26-Mar-2008</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>06-Feb-2001</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>GENERAL ELECTRIC COMPANY.</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>ONE RIVER ROAD, SCHENECTADY, NEW YORK 12345, UNITED STATES OF AMERICA.</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>LAVOIE GREGORY P</td>
											<td>73 BROB FARM VILLAGE ROCHESTER, NEW HAMPSHIRE 03839 USA.</td>
										</tr>
										<tr>
											<td>2</td>
											<td>LEE JR. ROBERT E.</td>
											<td>44 LEDGEVIEW DRIVE ROCHESTER, NEW HAMPSHIRE 03839, USA.</td>
										</tr>
										<tr>
											<td>3</td>
											<td>ELMORE DAVID D</td>
											<td>78 STACKPOLE ROAD, SOMERSWORTH, NEW HAMPSHIRE 03878, USA.</td>
										</tr>
										<tr>
											<td>4</td>
											<td>OUELLETTE MAURICE J</td>
											<td>790 OAKWOODS ROAD, NORTH BERWICK, MAINE 03906, USA.</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>G01R 21/00</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/US00/18030</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2000-06-29</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>60/141,776</td>
									<td>1999-06-30</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/217461-method-and-apparatus-for-defining-meter-data-calculatins-in-an-electronic-electricity-meter by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 11:46:45 GMT -->
</html>
