<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/225405-engine-controller by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 04 Apr 2024 23:34:20 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 225405:ENGINE CONTROLLER</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">ENGINE CONTROLLER</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>An unstable idling state immediately after engine start is stabilized. The difference between a target idling engine speed corresponding to the cooling water temperature and an actual engine speed is integrated. The ignition timing is changed toward advance or retard while using a value which is obtained by multiplying the integration value of the engine speed difference with a gain, as an ignition timing changing amount. Immediately after engine start, the gain is set to a relatively large initial gain so as to rapidly increase the engine speed. When the engine speed approaches the target engine speed, the gain is set to a smaller usual gain, and, in a change to the same advancing or retarding side, a change to an ignition timing in the same side is suppressed with using a smaller advancing or retarding gain. In a throttle-off state, an ignition timing corresponding to the cooling water temperature is set so as to rapidly reduce the engine speed.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>DESCRIPTION ENGINE CONTROLLER<br>
Technical Field<br>
The present invention relates to an engine controller which controls an engine, and more particularly to an apparatus suitable for controlling an engine having a fuel injection apparatus which injects fuel.<br>
Background Art<br>
Recently, as a fuel injection apparatus which is called an injector is more widely used, the fuel injection timing, the amount of injected fuel, i.e., the air-fuel ratio, and the like can be more easily controlled, so that a higher output power, smaller fuel consumption, exhaust gas purification, and the like can be enhanced. With respect to the fuel injection timing, particularly, the state of an intake valve in a strict sense, or the phase state of a camshaft in a usual sense is detected, and fuel is usually injected in accordance with the detected state. However, a so-called cam sensor for detecting the phase state of a camshaft is expensive. In a two-wheeled vehicle, particularly, a cam sensor cannot be often employed because of a problem in that the size of a<br>
cylinder head is increased. For example, JP-A-10-227252 proposes an engine controller in which the phase state of a crankshaft and the intake pressure are detected, and the stroke state of a cylinder is detected from them. When this conventional technique is used, the stroke state can be detected without detecting the phase of a camshaft, and hence the fuel injection timing and the like can be controlled in accordance with the stroke state.<br>
When an engine is electronic-controlled as described above, it is possible to control also the ignition timing. The ignition timing affects the torque of an engine. When the ignition timing is set to be slightly advanced from the compression top dead center, the highest torque is generated. When the ignition timing is changed from it toward advance or retard, the torque is reduced. Actually, however, a specific ignition timing controlling technique for, in, for example, a state immediately after start of rotation of an engine, adequately controlling the unstable engine speed in an idling state is not proposed.<br>
The invention is developed in order to solve the problems discussed above, and has an objective of providing an engine controller which can adequately control the engine speed in an idling state immediately after engine start or the like.<br>
Disclosure of Invention<br>
In order to solve the problems, the engine controller in a preferred embodiment of the invention is characterized in that the<br>
apparatus comprises: crankshaft phase detecting means for detecting a phase of a crankshaft; intake pressure detecting means for detecting an intake pressure of an intake passage of an engine; stroke detecting means for detecting a stroke of the engine on the basis of the phase of the crankshaft detected by the crankshaft phase detecting means, and the intake pressure detected by the intake pressure detecting means; and engine controlling means for controlling an operation state of the engine on the basis of the stroke of the engine detected by the stroke detecting means, and the engine controlling means comprises: engine speed detecting means for detecting a speed of the engine; idling detecting means for detecting an idling state of the engine; target engine speed setting means for, when the idling state of the engine is detected by the idling detecting means, setting a target engine speed; and idling ignition timing setting means for, when the idling state of the engine is detected by the idling detecting means, setting an ignition timing in accordance with a difference between the target engine speed set by the target engine speed setting means and the engine speed detected by the engine speed detecting means.<br>
The engine controller in another embodiment of the invention is<br>
characterized in that, in the invention of claim 1, when<br>
the ignition timing is changed to one of an advancing side<br>
and a retarding side, the idling ignition timing setting<br>
means avoids continuation of a change of the ignition<br>
timing to a same side.<br>
The engine controllerin a third embodiment of the invention is<br>
characterized in that, in the invention of claim 1 or 2, the idling ignition timing setting means sets the ignition timing by multiplying an integration value of the difference between the target engine speed set by the target engine speed setting means and the engine speed detected by the engine speed detecting means, with a<br>
predetermined.gain.<br>
The engine controller in a fourth embodiment of the invention is<br>
characterized in that, in the invention of claim 3, when<br>
the ignition timing is changed to one of the advancing side and the retarding side, the idling ignition timing setting means sets the ignition timing change setting gain for the same side to a smaller value, the ignition timing change setting gain being to be multiplied with the integration value of the difference between the target engine speed set by the target engine speed setting means and the engine speed detected by the engine speed detecting means.<br>
The engine controller in a fifth embodiment the invention is<br>
characterized in that, in the invention of claim 3 or 4, immediately after start of rotation of the engine, the idling ignition timing setting means sets the gain to a larger value, the gain being to be multiplied with the integration value of the difference between the target engine speed set by the target engine speed setting means and the engine speed detected by the engine speed<br>
detecting means.<br>
in a sixth embodiment The engine controller in a sixth embodiment of the invention is<br>
characterized in that, in the invention of any one of<br>
claims 1 to 5, the apparatus further comprises engine<br>
temperature detecting means for detecting a temperature of the engine, and the idling ignition timing setting means sets the ignition timing at a state change of the engine from a state other than the idling state to the idling state, on the basis of the engine temperature detected by<br>
the engine temperature detecting means.<br>
in a seventh embodiment The engine controllerin a seventh embodiment the invention is<br>
characterized in that, in the invention of any one of<br>
claims 1 to 6, the apparatus further comprises engine temperature detecting means for detecting a temperature of the engine, and the idling ignition timing setting means sets upper and lower limits of the ignition timing on the basis of the engine temperature detected by the engine<br>
temperature detecting means, and restricts the ignition<br>
timing by the upper and lower limits.<br>
The engine controller in an eighth embodiment of the invention is<br>
characterized in that, in the invention of claim 7, the idling ignition timing setting means sets the upper and lower limits of the ignition timing so that a width between the upper and lower limits is narrower as the engine temperature detected by the engine temperature<br>
detecting means is higher.<br>
The engine controller in a ninth embodiment of the invention is<br>
characterized in that, in the invention of any one of claims 1 to 8,, the apparatus further comprises atmospheric pressure detecting means for detecting an atmospheric pressure, and the idling detecting means sets a predetermined value of the intake pressure for detecting the idling state, on the basis of the atmospheric pressure detected by the atmospheric pressure detecting means, and, when the intake pressure detected by the intake pressure detecting means is equal to or lower than the predetermined value for detecting the idling state when the phase of the crankshaft detected by the crankshaft phase detecting means has a predetermined value, detects<br>
the idling state of the engine.<br>
The engine controllerin a tenth embodiment of the invention is<br>
characterized in that, the in the ninth embodiinetnt of the invention<br>
idling detecting means sets the predetermined value of the intake pressure for detecting the idling state to be larger as the atmospheric pressure detected by the<br>
atmospheric pressure detecting means is higher.<br>
The engine controller in an eleventh embodiment of the invention is<br>
the ninth or tenth embodiment of the invention characterized in that, <br>
the atmospheric pressure detecting means detects the atmospheric pressure on the basis of the intake pressure<br>
detected by the intake pressure detecting means.<br>
The engine controllerin a twelfth embodiment of the invention is<br>
characterized in that, any one of<br>
the first to eleventh embodiment of the invention<br>
 the apparatus further comprises a<br>
centrifugal clutch between the engine and a transmission, and, when the engine speed detected by the engine speed detecting means is equal to or lower than an engagement speed of the centrifugal clutch, the idling detecting means detects the idling state of the engine.<br>
brief Description of Accompanying Drawings<br>
Fig. 1 is a diagram showing the configuration of an engine for a motorcycle and a control apparatus for the engine.<br>
Fig. 2 is a diagram illustrating the principle of transmission of a crank pulse in the engine of Fig. 1.<br>
Fig. 3 is a block diagram showing an embodiment of<br>
the engine controller of the invention.<br>
Fig. 4 is a diagram illustrating detection of a stroke state from the phase of a crankshaft and the intake pressure.<br>
Fig. 5 is a flowchart showing a computing process which is performed in a stroke detection permitting section of Fig. 3.<br>
Fig. 6 is a map for calculating a cylinder air mass stored in a cylinder air mass calculating section.<br>
Fig. 7 is a map for calculating a target air-fuel ratio stored in a target air-fuel ratio calculating section.<br>
Fig. . 8 is a view illustrating the operation of a transient correcting section.<br>
Fig. 9 is a flowchart showing a computing process which is performed in a fuel injection amount calculating section of Fig. 3.<br>
Fig. 10 is a flowchart showing a computing process which is performed in an ignition timing calculating section of Fig. 3.<br>
Fig. 11 is a view illustrating an ignition timing which is set in Fig. 10.<br>
Fig. 12 is a view illustrating the operation of the computing process of Fig. 3 in engine start.<br>
Fig. 13 is a view illustrating the operation of the<br>
computing process of Fig. 3 in engine start.<br>
Fig. 14 is a flowchart showing a minor program which is performed in the computing process of Fig. 9.<br>
Fig. 15 is a flowchart showing a minor program which is performed in the computing process of Fig. 9.<br>
Fig. 16 is a flowchart showing a minor program which is performed in the computing process of Fig. 9.<br>
Fig. 17 is a control map which is used in computing processes of Figs. 14 to 16.<br>
Fig. 18 is a control map which is used in the computing processes of Figs. 15 and 16.<br>
Fig. 19 is a view illustrating an ignition timing immediately after engine start.<br>
Fig. 20 is a view illustrating an ignition timing in transition from a throttle-on state to a throttle-off state.<br>
Fig. 21 is a flowchart showing a minor program which is performed in the computing process of Fig. 14.<br>
Fig. 22 is a control map which is used in a computing processes of Fig. 21.<br>
Fig. 23 is a view illustrating the ignition timing, the intake pressure, and the engine speed in the case where a throttle is slowly opened.<br>
Fig. 24 is a view illustrating the ignition timing, the intake pressure, and the engine speed in the case<br>
where the throttle is slowly opened.<br>
Best Mode for Carrying Out the Invention<br>
Hereinafter, embodiments of the invention will be described.<br>
Fig. 1 is a diagram showing the configuration of, for example, an engine for a motorcycle and an example of a control apparatus for the engine. The engine 1 is a single-cylinder four-cycle engine of a relatively small displacement, and comprises a cylinder body 2, a crankshaft 3, a piston 4, a combustion chamber 5, an intake pipe (intake passage) 6, an intake valve 7, an exhaust pipe 8, an exhaust valve 9, a spark plug 10, and an ignition coil 11. A throttle valve 12 which is opened or closed in accordance with the degree of an accelerator operation is disposed in the intake pipe 6, and an injector 13 serving as a fuel injection apparatus is disposed in the intake pipe 6 downstream from the throttle valve 12. The injector 13 is connected to a filter 18 which is disposed in a fuel tank 19, a fuel pump 17, and a pressure control valve 16. A centrifugal clutch is interposed between the engine 1 and a transmission.<br>
The operation state of the engine 1 is controlled by an engine control unit 15. As control inputs of the engine control unit 15, i.e., means for detecting the<br><br>
operation state of the engine 1, the following sensors are disposed: a crank angle sensor 20 which detects the rotation angle or the phase of the crankshaft 3; a cooling water temperature sensor 21 which detects the temperature of the cylinder body 2 or the cooling water temperature, i.e., the temperature of the engine body; an exhaust air-fuel ratio sensor 22 which detects the air-fuel ratio in the exhaust pipe 8; an intake pressure sensor 24 which detects the intake pressure in the intake pipe 6; and an intake temperature sensor 25 which detects the temperature in the intake pipe 6, i.e., the intake temperature. The engine control unit 15 receives detection signals of these sensors, and outputs a control signal to the fuel pump 17, the pressure control valve 16, the injector 13, and the ignition coil 11.<br>
The principle of a crank angle signal which is output from the crank angle sensor 20 will be described. In the embodiment, as shown in Fig. 2a, a plurality of teeth 23 are protruded at substantially equal intervals from the outer circumference of the crankshaft 3, and the crank angle sensor 20 such as a magnetic sensor detects the approach of each tooth, applies an appropriate electric process, and then transmits pulse signals. The pitch of the teeth 23 in the circumferential direction is set to 30° in terms of the phase (rotation angle) of the<br><br>
crankshaft 3, and the width of each of the teeth 23 in the<br>
circumferential direction is set to 10° in terms of the phase (rotation angle) of the crankshaft 3. In one place only, however, the pitch is not set as described above, but set twice the pitch of the other teeth 23. In the place, as indicated by the two-dot chain line in Fig. 2a, no tooth is formed in a portion where a tooth should originally exist, or special setting is applied. This portion corresponds to an unequal interval. Hereinafter, this portion is often referred to as toothless portion.<br>
When the crankshaft 3 is rotated at a constant speed, therefore, the pulse signal train of the teeth 23 appears as shown in Fig. 2b. Fig. 2a shows the state at the compression top dead center (also the state at the exhaust top dead center is identical in form) . As shown in the figure, the pulse signals are numbered in the sequence that the pulse signal immediately before the compression top dead center is indicated by "0", the next pulse by "1", and the next next pulse by "2", and the last number is set to "4". The portion subsequent to the tooth 23 corresponding to the pulse signal of "4" is the toothless portion. Therefore, it is assumed that a tooth exists in the portion, and an extra count for one tooth is performed so that the pulse signal for the next tooth 23 is numbered "6". When this numbering process is repeated, the<br><br>
toothless portion approaches the portion subsequent to the pulse signal of "16", and therefore an extra count for one tooth is performed in the same manner as described above so that the pulse signal for the next tooth 23 is numbered "18". When the crankshaft 3 makes two rotations, all the cycles of the four strokes are completed. When the numbering process . has proceeded to "23", therefore, the pulse signal for the subsequent tooth 23 is again numbered "0". In principle,' the portion immediately after the pulse signal of the "0"-numbered tooth 23 ought to correspond to the compression top dead center. In this way, the detected pulse signal train, or each single pulse signal is defined as a crank pulse; When stroke detection is performed on the basis of the crank pulse as described later, a crank timing can be detected. Alternatively, the teeth 23 may be disposed on the outer periphery of a<br>
member which is rotated in synchronization with the crankshaft 3. The alternative is strictly identical with the configuration described above.<br>
By contrast, the engine control unit 15 is configured by a microcomputer which is not shown, etc. Fig. 3 is a block diagram showing an embodiment of an engine control computing process which is performed by the microcomputer in the engine control unit 15. The computing process comprises: an engine speed calculating section 2 6 which<br><br>
calculates the engine speed from the crank angle signal; a crank timing detecting section 27 which detects crank timing information, i.e., the stroke state from the crank angle signal and the intake pressure signal; a stroke detection permitting section 29 which reads the engine speed calculated by the engine speed calculating section<br>
26, which outputs stroke detection permission information to the crank timing detecting section 27, and which fetches and outputs stroke detection information produced by the crank timing detecting section 27; a cylinder air mass calculating section 28 which reads the crank timing information detected by the crank timing detecting section<br>
27, and which calculates a cylinder air mass (intake air mass) from the intake temperature signal, the cooling water temperature (engine temperature) signal, the intake pressure signal, and the engine speed calculated by the engine speed calculating section 26; a target air-fuel ratio calculating section 33 which calculates a target air-fuel ratio from the engine speed calculated by the engine speed calculating section 26, and the intake pressure signal; a fuel injection amount calculating<br>
section 34 which calculates a fuel injection amount and a fuel injection timing from the target air-fuel ratio calculated by the target air-fuel ratio calculating section 33, the intake pressure signal, the cylinder air<br><br>
mass calculated by the cylinder air mass calculating section 28, the stroke detection information output from the stroke detection permitting section 29, and the cooling water temperature signal; an injection pulse outputting section 30 which reads the crank, timing information detected by the crank timing detecting section 27., and which outputs toward the injector 13 an injection pulse corresponding to the fuel injection amount and the fuel injection timing calculated by the fuel injection amount calculating section 34; an ignition timing calculating section 31 which calculates an ignition timing from the engine speed calculated by the engine speed calculating section 26, the target air-fuel ratio set by the target air-fuel ratio calculating section 33, and the stroke detection information output from the stroke detection permitting section 29; and an ignition pulse outputting section 32 which reads the crank timing information detected by the crank timing detecting section 27, and which outputs toward the ignition coil 11 an ignition pulse corresponding to the ignition timing set by the ignition timing calculating section 31.<br>
From a time change rate of the crank angle signal, the engine speed calculating section 26 calculates the rotation speed of the crankshaft serving as an output shaft of the engine, as the engine speed. Specifically,<br><br>
an instantaneous value of the engine speed which is obtained by dividing the phase between the adjacent teeth 23 by a time required for detecting the corresponding crank pulse, and an average value of the engine speed consisting of the moving average value are calculated.<br>
The crank timing detecting section 21 is configured in a similar manner as the stroke jtidging apparatus disclosed in JP-A-10-227252 described above. As shown in Fig. 4, for example, the stroke state of each cylinder is detected, and the detected state is output as the crank timing information. In a four-cycle engine, namely, a crankshaft and a camshaft continue to be rotated at a predetermined phase difference. When the crank pulse is read as shown in Fig. 4, for example, crank pulse "9" or "21" which is a fourth pulse counted from the above-mentioned toothless portion is in either of the exhaust stroke or the compression stroke. In the exhaust stroke, as well known, the exhaust valve is opened, the intake valve is closed, and hence the intake pressure is high. In an early stage of the compression stroke, the intake valve remains to be opened and hence the intake pressure is low, or, even when the intake valve is closed, the intake pressure is lowered in the preceding intake stroke. Therefore, crank pulse "21" which is at a timing of a low intake pressure indicates that the cylinder is in the<br><br>
compression stroke, and a timing immediately after crank pulse "0" is obtained corresponds to the compression top dead center. When one of the stroke states is detected in this way, the stroke is interpolated with the rotation speed of the crankshaft, so that the present stroke state can be detected more finely.<br>
The stroke detection permitting section 29 outputs stroke detection permission information for the crank timing detecting section 27 in accordance with a computing process shown in Fig. 5. As described above, detection of a stroke from the crank pulse requires at least two rotations of the crankshaft. During this period, the crank pulse including the toothless portion must be stabilized. In a single-cylinder engine of a relatively small displacement as in the embodiment, however, the rotation state of the engine is not stabilized in a starting process or so-called cranking. Therefore, the rotation state of the engine is. judged by the, computing process of Fig. 5, and stroke detection is permitted.<br>
The computing process of Fig. 5 is executed with using, for example, an input of the crank pulse as a trigger. Although a step for communication is not particularly disposed in the flowchart, information which is obtained as a result of the computing process is updated and stored at any time into a storage apparatus,<br><br>
and information and programs which are necessary for the computing process are read out at any time from the storage apparatus.<br>
In the computing process, the average value of the engine speed calculated by the engine speed calculating section 26 is first read in step S11.<br>
Then, the control proceeds to step S12 to judge whether or not the average value of the engine speed which is read in step Sll is equal to or larger than a preset stroke detection permitting predetermined speed that is equal to or larger than a rotation speed corresponding to the initial explosion. If the average value of the engine speed is equal to or larger than the stroke detection permitting predetermined speed, the control proceeds to step S13. If not, the control proceeds to step S14.<br>
In step S13, information indicative of permitting of stroke detection is output, and the control then returns to a main program.<br>
In step S14, information indicative of disabling of stroke detection is output, and the control then returns to the main program.<br>
According to the computing process, stroke detection is permitted after the average value of the engine speed becomes equal to or larger than the stroke detection permitting predetermined rotation speed that is equal to<br><br>
or larger than at least the speed corresponding to the initial explosion. Therefore, the crank pulse is stabilized, and correct stroke detection can be performed.<br>
As shown in Fig. 6, the cylinder air mass calculating section 28 has a three-dimensional map for calculating the cylinder air mass from the intake pressure signal and the engine speed calculated by the engine speed calculating section 26. For example, the three-dimensional map of the cylinder air mass requires only measurement of the cylinder air mass when the intake pressure is changed while rotating the engine at a predetermined speed, and such measurement can be conducted by a relatively simple experiment. Therefore, the map can be easily produced. When there is a sophisticated engine simulator, the map may be produced with using the simulator. Since the cylinder air mass is changed depending on the temperature of the engine, the mass may be corrected with using the cooling water temperature (engine temperature) signal.<br>
As shown in Fig. 7, the target air-fuel ratio calculating section 33 has a three-dimensional map for calculating the target air-fuel ratio from the intake pressure- signal and the engine speed calculated by the engine speed calculating section 26. The three-dimensional map can be theoretically set to some extent. The air-fuel ratio usually correlates with the torque. As<br><br>
the air-fuel ratio is smaller or the fuel is larger and<br>
the air is smaller, the torque is larger, and the<br>
efficiency, is lower. By contrast, as the air-fuel ratio is larger or the fuel is smaller and the air is larger, the torque is smaller, and the efficiency is higher. A state of a small air-fuel ratio is called rich, and that of a large air-fuel ratio is called lean. The leanest state is at an air-fuel ratio which is called a so-called ideal air-fuel ratio or a stoichiometric ratio, and at which gasoline completely burns, i.e., an air-fuel ratio of 14.7.<br>
The engine speed is one of indices indicating the operation state of the engine. Usually, in the high engine speed side, the air-fuel ratio is set to be large, and, in the low engine speed side, the ratio is set to be small. This is conducted in order to,, enhance the responsiveness of the torque in the low engine speed side, and to enhance the responsiveness of the rotataioon estate in the high engine speed side. The intake pressure is one of indices indicating the engine load state such as the throttle opening. Usually, in a state where the; engine load is large, or the throttle opening is large and the<br>
intake pressure is high the air-fuel ratio is set to be<br>
small, and, in a state where the engine, load is small, or the throttle opening is small and the intake pressure is<br><br>
low, the air-fuel ratio is set to he...-large. This is conducted in order to place emphasis on the torque in a state where the engine load is large, and to place emphasis on the efficiency in a state where the engine load is small.<br>
As described above, the target air-fuel ratio is a numerical value from which physical meanings can be easily grasped. In accordance with the required output characteristics of the engine, therefore, the target air-fuel ratio can be set to some extent. It is a matter of course that tuning can be conducted in accordance with the output characteristics of an actual vehicle.<br>
The target air-fuel ratio calculating section 33 has a transient correcting section 29 which detects transient of the operation state of the engine, specifically, the acceleration state or the deceleration state, from the intake pressure signal, and which corrects the target air-fuel ratio in accordance with the detected transient. As shown in Fig. 8, for example, the intake pressure can be deemed as a resulting phenomenon of a throttle operation. Therefore, it will be see that, when the intake pressure is raised, the throttle is opened and acceleration is requested, or the acceleration state is set. When the acceleration state is detected, for example, the target air-fuel ratio is temporarily set to the rich side in<br><br>
accordance with the detected state, and then returned to the original target air-fuel ratio. The return to the target air-fuel ratio may be realized by a known method such as that in which the weighting coefficient of a weighted average value of the air-fuel ratio which is_set to the rich side in transient, and the original target air-fuel ratio is gradually changed. By contrast, when the deceleration state is detected, the target air-fuel ratio may be set to be leaner than the original target air-fuel ratio so as to place emphasis on the efficiency.<br>
The fuel injection amount calculating section 34 calculates the fuel injection amount and the fuel injection timing in engine start and usual operation, in accordance with a computing process shown in Fig. 9. The computing process of Fig. 9 is executed with using, for example, an input of the crank pulse as a trigger. Although a step for communication is not particularly disposed in the flowchart, information which is obtained as a result of the computing process is updated and stored at any time into the storage apparatus, and information and programs which are necessary for the computing process are read out at any time from the storage apparatus.<br>
In the computing process, the stroke detection information output from the stroke detection permitting section 29 is first read in step S21.<br><br>
Then, the control proceeds to step S22 to judge whether the stroke detection by the crank timing detecting section 27 is uncompleted or not. If the stroke detection is uncompleted, the control proceeds to step S23. If not, the control proceeds to step S24.<br>
In step S23, it is judged whether a fuel injection number counter n is "0" or not. If the fuel injection number counter n is "0", the control proceeds to step S25. If not, the control proceeds to step S26.<br>
In step S25, it is judged whether the next fuel injection is third or subsequent fuel injection counted from the beginning of engine start or not. If the next fuel injection is third or subsequent fuel injection, the control proceeds to step S27. If not, the control proceeds to step S28,<br>
In step S27, the intake pressure at a preset predetermined crank angle during two rotations of the crankshaft, in the embodiment, at crank pulse "6" or "8" in Figs. 2 and 4 is read from, for example, an intake pressure storage section which is not shown, and the difference between the intake pressures is calculated. Then, the control proceeds to step S29.<br>
In step S29, it is judged whether or not the intake pressure difference calculated in step S28 is equal to or larger than a predetermined value by which the stroke can<br><br>
be identified to some extent. If the intake pressure difference is equal to or larger than the predetermined value, the control proceeds to step S30. If not, the control proceeds to step S28.<br>
In step S30, the total fuel injection amount is calculated on the basis of the smaller one of- the intake pressures at the predetermined crank angle during two rotations of the crankshaft which are read in step S27. Then, the control proceeds to step S31.<br>
By contrast, in step S28, the cooling water temperature, i.e., the engine temperature is read, and the total fuel injection amount corresponding to the cooling water temperature is calculated, so that, for example, the total fuel injection amount is made larger as the cooling water temperature is lower. Thereafter, the control proceeds to step S31. The total fuel injection amount which is calculated in step S28 or step S30 means a fuel injection amount that is originally requested to be injected once in each cycle, or two rotations of the crankshaft, and before the intake stroke. When the stroke is already detected and the fuel injection amount corresponding to the cooling water temperature is injected once before the intake stroke, therefore, the engine adequately rotates in accordance with the cooling water temperature, i.e., the engine temperature.<br><br>
In step S31, a half of the total fuel injection amount which is set in step S30 is set as a present fuel injection amount, and a predetermined crank angle in each rotation, i.e., one rotation of the crankshaft, or, in the embodiment, the timing of the falling edge of crank pulse "10" or "22" in Figs. 2 and 4 is set as the fuel injection timing. Then, the control proceeds to step S32.<br>
In step S32, the fuel injection number counter is set to "1" and the control then returns to the main program.<br>
On the other hand, in step S24, it is judged whether the previous fuel injection is immediately before the intake stroke or not. If the previous fuel injection is immediately before the intake stroke, the control proceeds to step S33. If not, the control proceeds to step S26.<br>
In step S2 6, the previous fuel injection amount is set as the present fuel injection amount, and, in the same manner as step S31, a predetermined crank angle in each rotation, i.e., one rotation of the crankshaft is set as the fuel injection timing. The control then proceeds to step S34.<br>
In step S34, the fuel injection number counter is set to "0" and the control then returns to the main program.<br>
In step S33, the fuel injection amount and the fuel injection timing in usual operation corresponding to the target air-fuel ratio, the cylinder air mass, and the<br><br>
intake pressure are set, and the control then proceeds to step S35. Specifically, for example, the cylinder air mass calculated by the cylinder air mass calculating section 28 is divided by the target air-fuel ratio calculated by the target air-fuel ratio calculating section 33, whereby the necessary cylinder fuel mass can be obtained. When the obtained mass is multiplied with, for example, the flow characteristic of the injector 13, it is possible to obtain a fuel injection time. From the time, the fuel injection amount and the fuel injection timing can be calculated.<br>
In step S34, the fuel injection number counter is set to "0" and the control then returns to the main program.<br>
In the computing process, when the stroke detection by the crank timing detecting section 27 is uncompleted, a half of the total fuel injection amount which is to be injected once in each cycle before the intake stroke to permit the engine to adequately rotate is once injected in each rotation of the crankshaft at the predetermined crank angle. As a result, as described later, there is the possibility that, in engine start, only a half of necessary fuel is sucked in an initial intake stroke after start of cranking. When the ignition is performed at or in the vicinity of the compression top dead center, however, explosion which may be weak can be surely<br><br>
attained, and the engine can be started. Of course, when necessary fuel is sucked in an initial intake stroke after start of cranking, or when an amount corresponding to two injections of fuel which is injected once for each rotation of the crankshaft can be sucked, a sufficient explosive power can be obtained, and the engine can be surely started.<br>
Even in the case where the stroke is detected, when the previous fuel injection is not immediately before the intake stroke or, for example, before the exhaust stroke, only a half of the necessary fuel injection amount is injected. Therefore, the fuel injection amount same as the previous one is again injected, whereby necessary fuel is sucked in the next intake stroke so that the engine can be operated while.obtaining a sufficient explosive power.<br>
In the case where the stroke detection is uncompleted, the intake pressure at the preset predetermined crank angle during two rotations of the crankshaft, specificaly, at crank pulse "6" or "8" in Figs. 2 and 4, i.e., the intake pressure in the intake stroke or the expansion stroke is read, and the difference between the intake pressures is calculated. As described above, when the throttle valve is not suddenly opened by a large, degree there is a corresponding pressure difference between the intake pressures of the intake stroke and the expansion<br><br>
stroke. When the calculated intake pressure difference is equal to or larger than the predetermined value at which the stroke can be detected, therefore, the smaller one of the intake pressures is deemed as the intake pressure of the intake stroke, and the total fuel injection amount is set in accordance with the intake pressure which corresponds to the throttle opening to some extent, whereby rotation increase of the engine corresponding to the throttle opening can be attained.<br>
By contrast, when the intake pressure difference at the predetermined crank angle during two rotations of the crankshaft is smaller than the predetermined value, or when fuel is injected immediately after the beginning of engine start, the total fuel injection amount corresponding to the cooling water temperature, i.e., the engine temperature is set, whereby rotation of the engine can be surely started at least against friction.<br>
In accordance with the computing process shown in Fig. 10, the ignition timing calculating section 31 calculates and sets the ignition timing in engine start and usual operation (including a timing immediately after engine start). The computing process of Fig. 10 is executed with using an input of the crank pulse as a trigger. Although a step for communication is not particularly disposed in the flowchart, information which is obtained as a result<br><br>
of the computing process is updated and stored at any time into the storage apparatus, and information and programs which are necessary for the computing process are read out from the storage apparatus.<br>
In the computing process, the stroke detection information output from the stroke detection permitting section 29 is first read in step S41.<br>
Then, the control proceeds to step S42 to judge whether the stroke detection by the crank timing detecting section 27 is uncompleted or not. If the stroke detection is uncompleted, the control proceeds to step S47. If not, the control proceeds to step S44.<br>
In step S47, this timing is deemed as that which, in engine start or the like, is before an explosive power due to initial explosion after start of cranking is obtained, and at which the engine speed is low and unstable. The ignition timing in an early stage of starting in each rotation of the crankshaft is set to the top dead center (in either of compression and exhaust), i.e., the timing of the falling edge of crank pulse "0" or "12" in Fig. 2 or 4 ± the crankshaft rotation angle of 10°, and the control then returns to the main program. In the above,<br>
"± the crankshaft rotation angle of 10°" means consideration of the electrical or mechanical responsiveness. Actually, the ignition is performed at<br><br>
the same time with the falling edge of crank pulse "0" or "12" in Fig. 2 or 4.<br>
In step S44, it is judged whether the average value<br>
of the engine speed is equal to or larger than a predetermined value or not. If the average value of the engine speed is equal to or larger than the predetermined value, the control proceeds to step S48. If not, the control proceeds to step S46.<br>
In step S46, this timing is deemed as that which, in engine start or the like, is after an explosive power due to initial explosion is obtained, and at which the engine speed is high to some extent (but the engine speed is not stabilized) . The ignition timing in a late stage of starting in each rotation of the crankshaft is set to a<br>
timing which is advanced by 10° from the. compression top dead center, i.e., the timing of the rising edge of crank<br>
pulse "0" in Fig. 3 or 11 + the crankshaft rotation angle of 10°, and the control then returns to the main program. In the above, "± the crankshaft rotation angle of 10°" means consideration of the electrical or mechanical responsiveness. Actually, the ignition is performed at the same time with the rising edge of crank pulse "0" or "12" in Fig. 2 or 4.<br>
In step S48, usual ignition timing setting is performed once for each stroke cycle in accordance with<br><br>
computing processes of Figs. 14 to 16 described later, and the control then returns to the main program.<br>
In the computing process, at start of cranking before the initial explosion in which the stroke detection is uncompleted, or in an early stage of starting, in addition to the fuel injection in each rotation of the crankshaft, setting the vicinity of the top dead center in each rotation of the crankshaft as an ignition timing is performed in order to surely start rotation of the engine, thereby preventing the engine from reversely rotating. Also after the stroke is detected, until when the engine speed becomes equal to or larger than a predetermined<br>
value, the vicinity of a timing which is advanced by 10° from the compression top dead center at which a relatively high torque is generated is set as the ignition timing, in a late stage of starting, whereby the engine speed is stabilized to a relatively higher level.<br>
As described above, in the embodiment, the cylinder air mass is calculated from the intake pressure and the engine operation state in accordance with the three-dimensional map of the cylinder air mass which is previously stored, The target air-fuel ratio is calculated from the intake pressure and the engine operation state in accordance with the map of the target air-fuel ratio which is previously stored, and the cylinder air mass is divided<br><br>
by the target air-fuel ratio, whereby the fuel injection amount can be calculated. Therefore, the control can be facilitated and made correct, the map of the cylinder air mass can be easily measured, and the map of the target air-fuel ratio can be easily set. Therefore, the map<br>
'production is facilitated. Furthermore, a throttle sensor for detecting the engine load, such as a throttle opening sensor or a throttle position sensor is not required.<br>
Moreover, transient such as the acceleration state or<br>
the deceleration state is detected from the intake pressure, and the target air-fuel ratio is corrected. Therefore, the output characteristics of the engine in acceleration or deceleration can be changed from those which are set simply in accordance with the map of the target air-fuel ratio, to those which are required by the driver or close to the sense of the driver.<br>
Since the engine speed is detected from the phase of the crankshaft, the engine speed can be easily detected. When the stroke state is detected from the phase of the crankshaft in place of a cam sensor, for example, it is possible to eliminate a cam sensor which is expensive and massive.<br>
In the embodiment in which a cam sensor is not used as described above, the phase of the crankshaft and the stroke detection play important roles. In the embodiment<br>
in which the stroke detection is based only on the crank pulse and the intake pressure, however, the stroke cannot be detected until the crankshaft makes two rotations. The engine is stopped in any stroke. Namely, it is impossible to know the stroke in which cranking is started. In the embodiment, during a period from start of cranking to detection of the stroke, therefore, fuel injection is performed with using the crank pulse at a predetermined crank angle for each rotation of the crankshaft, and the ignition is performed in the vicinity of the compression top dead center for each rotation of the crankshaft. After the stroke is detected, fuel injection at which the target air-fuel ratio corresponding to the throttle opening can be attained is performed once in one cycle, and, until the engine speed reaches a predetermined value or larger, the ignition is performed with using the crank pulse in the vicinity of a timing at which a higher torque can be easily produced, and which is advanced by 10° from the compression top dead center.<br>
Fig. 12 shows changes with time in the engine (crankshaft) speed, the fuel injection pulse, and the ignition pulse in the case where initial explosion is obtained as a result of the above-described controls of the fuel injection and the ignition timing, but the initial explosion exhibits a relatively small explosion<br><br>
power. As described above, until the initial explosion is obtained and the average value of the engine speed, becomes equal to or larger than the stroke detection permitting predetermined speed, the ignition pulse is output for each rotation of the crankshaft at the falling edge of crank pulse "0" or "12" (at this timing, this numbering may be incorrect) in Fig. 3, and the fuel injection pulse is output for each rotation of the crankshaft at the falling edge of crank pulse "10" or "22" (at this timing, this numbering may be incorrect) in Fig. 4. The ignition process is set so that the ignition is performed at the end of the ignition pulse, i.e., the falling edge, and the fuel injection process is set so that fuel injection is ended at the end of the fuel injection pulse, i.e., the falling edge.<br>
As described above, the first and second fuel injections are performed in accordance with the total fuel injection amount which is set on the basis of the cooling water temperature, i.e., the engine temperature. During this process, an intake pressure Po of crank pulse "18" corresponding to the intake stroke, and an intake pressure P1 of crank pulse "6" corresponding to the expansion stroke are obtained, and the intake pressure difference between them is equal to or larger than the predetermined value by which the stroke can be detected. Therefore, the<br><br>
third and fourth fuel injections are performed in accordance with the total fuel injection amount which is set on the basis of the lower one of the intake pressures, i.e., the intake pressure Po of crank pulse "18" corresponding to the intake stroke.<br>
As a result of the controls of fuel injection and ignition, weak explosion is obtained. Therefore, the average value of the engine speed is gently increased. At the timing when the average value becomes equal to or larger than the stroke detection permitting predetermined speed, the stroke detection is permitted. Consequently, the stroke detection is performed by comparison with the previous intake pressure at the same crank angle as described above. In this case, as a result of the stroke detection, the previous fuel injection is immediately before the intake stroke. Thereafter, consequently, fuel which can attain the target air-fuel ratio is injected only once in each cycle. By contrast, after the detection, also the ignition timing is performed only once in each cycle, but the cooling water temperature is not yet reached the predetermined temperature and the idling rotation speed is not stabilized. With respect, to the ignition timing, therefore, the ignition pulse is output<br>
so as to coincide with a timing which is advanced by 10° from the compression top dead center, i.e., the rising<br><br>
edge of crank pulse "0" in Fig. 3. As a result, thereafter, the engine speed is rapidly increased.<br>
Fig. 13 shows changes with time in the engine (crankshaft) speed, the fuel injection pulse, and the ignition pulse in the case where large explosion power is obtained in the initial explosion as a result of similar controls of the fuel injection and the ignition timing in a cranking process. When the initial explosion is strong, the average value of the engine speed is rapidly increased, and, in a short time period, becomes equal to or larger than the stroke detection permitting predetermined speed, thereby permitting the stroke detection. In this case, as a result of the stroke detection, the previous fuel injection is not immediately before the intake stroke, or specifically is in the expansion stroke. Therefore, the same fuel injection amount is again injected at the crank angle same as the previous one, so that an ideal fuel amount is sucked in the subsequent intake stroke, whereby engine start can be stabilized.<br>
As described above, in the embodiment, until the stroke is detected, fuel injection is performed at a predetermined crank angle in each rotation of the crankshaft, and, similarly in each rotation of the crankshaft, ignition is performed in the vicinity of the compression top dead center, whereby, although it may be<br><br>
weak, sure initial explosion can be obtained and the engine can be prevented from reversely rotating. When, before initial explosion is obtained, ignition is performed at a timing which is advanced from the compression top dead center, there is the possibility that the engine reversely rotates. After the detection is detected, fuel injection and ignition are performed once in one cycle. This ignition is performed in the vicinity of a timing which is advanced by 10° from the compression top dead center, so that the engine" speed can be rapidly increased.<br>
When, before detection of the stroke, fuel injection and ignition are performed once in one cycle, i.e., once in two rotations of the crankshaft, sure initial explosion cannot be obtained in the case where the fuel injection is. performed after an intake process or the ignition is not performed at the compression top dead center. Namely, there occur a case where the engine is smoothly started, and another case where the engine is not started. In a two-wheeled vehicle in which the useful range of the engine speed is high, when, after the stroke is detected, fuel injection is performed once in one rotation of the crankshaft, fuel must continue to be injected, with the result that the dynamic range of the injector is restricted. When, also after the stroke is detected,<br><br>
ignition continues to be performed once in one rotation of the crankshaft, energy is wasted.<br>
Next, a minor program which is performed in step S4 8 of the computing process of Fig. 9 will be described with reference to the flowcharts of Figs. 14 to 16. In the computing process, when an ignition switch is turned on, an idling control flag Fidle is reset to "0".<br>
In the computing process, first, a computing process of Fig. 21 which will be described later is conducted in step S51 to judge whether the engine is in the idling state or not. If the engine is in the idling state, the control proceeds to step S52. If not, the control proceeds to step ,S53. As described above, in the embodiment which is not provided with a throttle opening sensor, the idling state must be detected with using a detection value other than the throttle opening. In the embodiment, the centrifugal clutch is interposed between the engine and the transmission. As well known, when the engine speed is low, a centrifugal clutch is disengaged, and, when the engine speed is high, a centrifugal clutch is engaged. The engagement engine speed of the centrifugal clutch is previously set. When the average value of the engine speed calculated by the engine speed calculating section 26 is equal to or smaller than the engagement engine speed of the centrifugal clutch and the<br><br>
intake pressure of the intake pressure signal is lower than a predetermined value, therefore, the idling state is detected. According to the configuration, the idling state can be correctly detected without using a throttle opening sensor.<br>
In step S53, the target ignition timing is calculated from a usual-running ignition timing map, and the control then proceeds to step S54. In a usual igniting process, generally, the highest torque is attained at a timing which is slightly advanced from the top dead center. In accordance with the driver's intention to accelerate which is to be reflected to the intake pressure, therefore, the ignition timing is adjusted with being centered at the highest-torque ignition timing.<br>
In step S54, in accordance with a control map of Fig. 17 which will be described later, the idling ignition timing is set on the basis of the cooling water temperature, and the control then returns to the main program.<br>
By contrast, in step S52, since the present state is the idling state, the target engine speed for allowing the engine to continue to rotate against friction is set on the basis of, for example, the cooling water temperature signal corresponding to the engine temperature. Thereafter, the control proceeds to step S55.<br><br>
Specifically, the friction of the engine approximately depends on the viscosity of lubricating oil. As a low temperature at which lubricating oil has a high viscosity is further enhanced, the target engine speed is set to be higher, and, as the temperature is higher, the target engine speed is set to be lower.<br>
In step S55, it is judged whether the idling control flag FIDLe is "0" or not. If the idling control flag FIDLE is "0", the control proceeds to step S56. If not, the control proceeds to step S57.<br>
In step S56, it is judged whether the present engine speed is equal to or lower than the target engine speed calculated in step S52 or not. If the present engine speed is equal to or lower than the target engine speed, the control proceeds to step S58. If not, the control proceeds to step S59.<br>
In step S58, the idling control flag FIDLE is set to<br>
"1", and the control then proceeds to step S60.<br>
In step S60, a gain K which is used for changing and setting the ignition timing is set to an initial gain KiNT which is relatively large, and the control then proceeds to step S61.<br>
In step S61, the target ignition timing based on the cooling water temperature, i.e., the engine temperature is set from the idling ignition timing map shown in, for<br>
40<br>
example, Fig. 17, and the control then proceeds to step S62 (Fig. 15).<br>
By contrast, in step S57, it is judged whether the idling control flag FiDLE is "1" or not. If the idling control flag FIDLE is "1", the control proceeds to step S63. If not, the control proceeds to step S64.<br>
In step S63, it is judged whether the present engine speed is equal to or lower than a value which is obtained<br>
by subtracting a predetermined value a from, the target engine speed or not. In step S57, the idling control flag Fidle is "1", and hence the present engine speed is ought to be lower than the target engine speed. In the above, therefore, it is judged whether or not the present engine speed that is lower than the target engine speed is within<br>
a range of the predetermined value a with respect to the target engine speed. If the present engine speed is equal to or lower than the value which is obtained by<br>
subtracting the predetermined value a from the target engine speed, the control proceeds to step S62. If not, the control proceeds to step S65.<br>
In step S64, it is judged whether the idling control flag Fidle is "2" or not. If the idling control flag Fidle is "2", the control proceeds to step S66. If not, the control proceeds to step S62.<br>
In step S66, it is judged whether the present engine<br><br>
speed is equal to or lower than a value which is obtained<br>
by adding the predetermined value a to the target engine speed or not. In step S64, the idling control flag FiDLE is "2", and hence the present engine speed is ought to be higher than the target engine speed. In the above, therefore, it is judged whether or not the present engine speed that is higher than the target engine speed is<br>
within the range of the predetermined value a with respect to the target engine speed. If the present engine speed is equal to or lower than the value which is obtained by<br>
adding the predetermined value a to the target engine speed, the control proceeds to step S65. If not, the control proceeds to step S62.<br>
In step S65, the idling control flag Fidle is set to "3", and the control then proceeds to step S67.<br>
In step S67, the gain K which is used for changing and setting the ignition timing is set to a usual gain KStd which is smaller than the initial gain KiNT, and the control then proceeds to step S62.<br>
In step S62, the integration value of the difference between the present engine speed and the target engine speed, i.e., the engine speed difference is calculated. Specifically, the present engine speed difference is added to the integration value of the engine speed difference which is stored in the storage apparatus.<br><br>
Then, the control proceeds to step S68 to judge whether the idling control flag FIDLE is equal to or smaller than "2" or not. If the idling control flag FIDLE is equal to or smaller than "2", the control proceeds to step S69. If not, the control proceeds to step S70.<br>
In step S69, it is judged whether or not the absolute value of the product of the gain K and the integration value of the engine speed difference is equal to or larger than 1 deg. corresponding to one degree of the ignition timing which is set to be advanced or retarded. If the absolute value of the product of the gain K and the integration value of the engine speed difference is equal to or larger than 1 deg., the control proceeds to step S71, If not, the control proceeds to step S72a.<br>
In step S71, a value which is obtained by adding the integration value of the gain K and the integration value of the engine speed difference to the present target ignition timing is set as a new target ignition timing, and the control then proceeds to step S73.<br>
In step S70, it is judged whether the idling control flag FiDLE is "3" or not. If the idling control flag FiDLE is "3", the control proceeds to step S74. If not, the control proceeds to step S75 (Fig. 16).<br>
In step S74, it is judged whether or not the product of the gain K and the integration value of the engine<br>
43<br>
speed difference is equal to or larger than +1 deg. corresponding to one degree of the ignition timing which is set to be advanced. If the product of the gain K and the integration value of the engine speed difference is equal to or larger than +1 deg., the control proceeds to step S76. If not, the control proceeds to step S77.<br>
In step S77, it is judged whether or not the product of the gain K and the integration value of the engine speed difference is equal to or smaller than -1 deg. corresponding to one degree of the ignition timing which is set to be retarded. If the product of the gain K and the integration value of the engine speed difference is equal to or smaller than -1 deg., the control proceeds to step S78. If not, the control proceeds to step S72a.<br>
In step S78, the idling control flag Fidle is set to "5", and the control then proceeds to step S79.<br>
By contrast, in step S76, the idling control flag Fidle is set to "4", and the control then proceeds to step S79.<br>
In step S79, a value which is obtained by adding the integration value of the gain K and the integration value of the engine speed difference to the present target ignition timing is set as a new target ignition timing, and the control then proceeds to step S73.<br>
In step S73, the integration value of the engine<br>
44<br>
speed difference is reset or set to "0", and the control then proceeds to step S72a.<br>
In step S72a, in accordance with a control map of Fig. 18, upper and lower limits of the target ignition timing corresponding to the cooling water temperature, i.e., the engine temperature are set, and the control then proceeds to step S72b. In the upper and lower limits of the target ignition timing, the upper limit means a limiting value toward advance (a positive value with respect to the compression top dead center), and the lower limit means a limiting value toward retard (a negative value with respect to the compression top dead center) . In the control map of Fig. 18, as the cooling water temperature, i.e., the engine temperature is higher, the upper limit is set to be smaller, and the lower limit is set to be larger, or the width between the limits is made narrower. In an example case where an ideal idling ignition timing is at<br>
5° before the compression top dead center, as the cooling water temperature, i.e., the engine temperature is higher, the upper limit of the target ignition timing is set to be closer to 5° before the compression top dead center, and the lower limit of the target ignition timing is set to be closer to the compression top dead center. This is conducted because the operation state of the engine is more stable as the engine temperature is higher, it is not<br>
45<br>
necessary to set the ignition timing to be excessively advanced, and there is no need for such setting.<br>
In step S72b, the target ignition timing which is set in step S71 or S79 is restricted by the upper and lower limits of the target ignition timing which are set in step S72a, to set a new target ignition timing. Thereafter, the control proceeds to step S72c.<br>
In step S72c, the target ignition timing which is set in step S72b is output, and the control then returns to the main program.<br>
In step S75, it is judged whether the idling control flag FIDLE is "4" or not. If the idling control flag Fidle is "4", the control proceeds to step S80. If not, the<br>
control proceeds to step S81.<br>
In step S80, it is judged whether or not the product of an advancing gain KADv which is relatively small and the integration value of the engine speed difference is equal to or larger than +1 deg. corresponding to one degree of the ignition timing which is set to be advanced. If the product of the advancing gain KAdv and the integration value of the engine speed difference is equal to or larger than +1 deg., the control proceeds to step S82. If not, the control proceeds to step S83.<br>
In step S83, it is judged whether or not the product of the usual gain KStd and the integration value of the<br>
46<br>
engine speed difference is equal to or smaller than -1 deg. corresponding to one degree of the ignition timing which is set to be retarded. If the product of the usual gain Kstd and the integration value of the engine speed difference is equal to or smaller than -1 deg., the control proceeds to step S84. If not, the control proceeds to step S85a.<br>
In step S84, the idling control flag FiDLe is set to "5.", and the control then proceeds to step S86.<br>
In step S8 6, a value which is obtained by adding the integration value of the usual gain KSTd and . the integration value of the engine speed difference to the present target ignition timing is set as a new target ignition timing, and the control then proceeds to step S87.<br>
In step S82, a value which is obtained by adding the integration value of the advancing gain KAdv and the integration value of the engine speed difference to the present target ignition timing is set as a new target ignition timing, and the control then proceeds to step S87.<br>
By contrast, in step S81, it is judged whether or not the product of a retarding gain KDly which is relatively small and the integration value of the engine speed<br>
difference is equal to or smaller than -1 deg.<br>
corresponding to one degree of the ignition timing which is set to be retarded. If the product of the retarding<br><br>
gain KDLY and the integration value of the engine speed difference is equal to or smaller than -1 deg., the control proceeds to step S88. If not, the control proceeds to step S89.<br>
In step S89, it is judged whether or not the product of the usual gain KSTD and the integration value of the engine speed difference is equal to or larger than +1 deg. corresponding to one degree of the ignition timing which is . set to be advanced. If the product of the usual gain KStd and the . integration value of the engine speed difference is equal to or larger than +1 deg., the control proceeds to step S90. If not, the control proceeds to step S85a.<br>
In step S90, the idling control flag FiDLE is set to "4", and the control then proceeds to step S91.<br>
In step S91, a value which is obtained by adding the integration value of the usual gain KStd and the integration value of the engine speed difference to the present target ignition timing is set as a new target ignition timing, and the control then proceeds to step S87.<br>
In step S88, a value which is obtained by adding the integration value of the retarding gain KDly and the integration value of the engine speed difference to the present target ignition timing is set as a new target ignition timing, and the control then proceeds to step S87.<br><br>
In step S87, the integration value of the engine speed difference is reset or set to "0", and the control then proceeds to step S85a.<br>
In step S85a, in the same manner as step S72a, in accordance with the control map of Fig. 18, upper and lower limits of the target ignition timing corresponding to the cooling water temperature, i.e., the engine temperature are set, and the control then proceeds to step S85b.<br>
In step S85b, the target ignition timing which is set in step S82, S86, S88, or S91 is restricted by the upper and lower limits of the target ignition timing which is set in step S85a, to set a new target ignition timing. Thereafter, the control proceeds to step S85c.<br>
In step S85c, the target ignition timing is output, and the control then returns to the main program.<br>
Next, the idling ignition timing map of Fig. 17 will be described. As described above, when the cooling water temperature, i.e., the engine temperature is low, lubricating oil has a high viscosity. In the idling state, therefore, the engine therefore must continue to rotate against the friction due to the viscosity, and the ignition timing is set to be further advanced so as to attain the higher torque. This results also in that, when the cooling water temperature, i.e., the engine<br><br>
temperature is high, the ignition timing is set to be less advanced, and hence sudden increase of the speed of an engine which is warmed up is prevented from occurring. In an engine of a completely cool state, when the ignition timing is set to be excessively advanced, however, so-called kick-back in which the engine tries to reversely rotate and is then stopped occurs. Therefore, the ignition timing is set to a small value toward advance .<br>
 According to the computing processes of Figs. 14 to 16, after the engine is started and the engine speed becomes equal to or larger than the predetermined value,<br>
therefore, the gain K is set to the initial gain Kint which is relatively large, and the target ignition timing corresponding to the cooling water temperature, i.e., the engine temperature at this time is set. As a result, until the present engine speed is lower than the target engine speed and enters the range of the predetermined value a with respect to the target engine speed, the target ignition timing is changed to be advanced by a value which is obtained by<br>
value of the speed difference between the target engine speed and the present engine speed with the gain K that is set to the initial gain KINT which is relatively large, whereby the engine speed is rapidly increased. By contrast, when the present engine speed is larger than the<br><br>
target engine speed and is not within the range of the predetermined value a with respect to the target engine<br>
speed, the target ignition timing is changed, to be<br>
retarded by a value which is obtained by similarly multiplying the integration value of the engine speed difference with the gain K that is set to the initial gain Kint which is relatively large, whereby the engine speed is rapidly reduced.<br>
When the present engine speed is changed from this<br>
state to enter the range of the predetermined value a with respect to the target engine speed, the gain K is set to the usual gain KSTD which is smaller than the initial gain<br>
Kint, and the ignition timing is changed to be advanced or retarded by the product of the gain K set to the usual gain KSTD and the integration value of the engine speed difference. When the integration value of the engine speed difference which is obtained by subtracting the present engine speed from the target engine speed is positive, the ignition timing is changed to be advanced, and the engine speed is increased. When the integration value of the engine speed difference is negative, the ignition timing is changed to be retarded, and the engine speed is reduced.<br>
After the ignition timing is changed to be advanced or retarded in this way, in the next computing process,<br><br>
the changing amount of the target ignition timing in the changed side is set with using the advancing gain KADv or the retarding gain KDLY which is relatively small. Namely, for example, in the case where the ignition timing is changed to be advanced in the previous setting, in the next and subsequent settings in which the ignition timing is changed to be advanced, the changing amount of the target ignition timing is set with using the, advancing gain KAdv which is relatively small, and hence the ignition timing is hardly changed in the substantially same side. Conversely, in the case where the ignition timing is changed to be advanced in the previous setting, in the next and subsequent settings in which the ignition timing is changed to be retarded, the changing amount of the target ignition timing is set with using the usual gain Kstd, and hence the ignition timing is easily changed in the opposite side. This is similarly performed also in the case where the ignition timing is previously changed to be retarded.<br>
Fig. 19 shows changes with time in the ignition timing, the target engine speed, and the engine speed immediately after start of the engine which is controlled by the computing processes of Figs. 14 to 16. Immediately after engine start, the ignition timing is rapidly changed to be advanced by the initial gain KINt, whereby the engine<br><br><br>
speed is rapidly increased. When the engine speed approaches the target engine speed, the gain is switched to the usual gain KSTd, so that overshoot of the engine speed with respect to the target engine speed is suppressed.<br>
When the engine is started, the engine is warmed and the cooling water temperature is raised, with the result that the target engine speed is gradually reduced. In accordance with the reduction of the target engine speed, also the ignition timing is gradually changed to be retarded, or more strictly to a small value toward advance.<br>
As shown in the portion A in the figure, for example, the ignition timing is not changed even when the target engine speed and the engine speed do not coincide with each other.<br>
This is caused by the above-mentioned effect of suppressing the change of the ignition timing in the same side. Namely, in the portion A," continuous changes of the ignition timing toward retard are suppressed by the retarding gain KDLY which is relatively small, whereby the control can be prevented from hunting. By cont2:ast, as shown in the portion B in the figure in a change of the ignition timing to the opposite side, the engine speed is caused to follow the target engine speed while ensuring the responsiveness, by the usual gain KStd,<br>
On the other hand, Fig. 20 shows changes with time in<br><br>
the ignition timing, the target engine speed, the engine speed, and the idling ignition timing set value which is set in accordance with the cooling water temperature, i.e., the engine temperature in the case where, when the engine is warmed up and the idling is stabilized, the throttle is largely opened at time toi and the throttle is totally<br>
closed or the state is returned to the idling; sta.te. at<br>
time to2 At the same time when the throttle is turned on, the ignition timing is once changed to the retarding side, and then largely changed toward advance, to obtain a sharp increase in torque, whereby the engine speed is rapidly increased. During this period,I the idling ignition timing set value is set to a value which is smaller than that which is set before the throttle-on operation. After the throttle is turned off at time tO2, the ignition timing coincides with the idling ignition timing set value, and is thereafter gradually changed toward advance. In the engine which is warmed up, the ignition timing which is optimum for making the idling engine speed coincident with the target engine speed is ought to be an ignition timing in the portion C in the figure. As compared with this, the idling ignition timing set value according to the cooling water temperature is set to be smaller, in order to rapidly reduce the engine speed in response to a throttle-off operation. If the ignition timing at<br><br>
throttle-off is set to a value in the vicinity of the portion C, the torque is excessively generated and the engine speed is hardly reduced. In this way, the idling ignition timing set value according to the cooling water temperature is set to be small, so that the engine speed at throttle-off can be rapidly reduced.<br>
Next, a computing process of Fig. 21 which is performed in step S51 of the computing process of Fig. 14 will be described. In the computing process, first, it is judged in step S101 whether the engine speed calculated by the engine speed calculating section 26 is equal to or lower than the engagement speed of the centrifugal clutch or not. If the engine speed is equal to or lower than the centrifugal clutch engagement speed, the control proceeds to step S102. If not, the control proceeds to step S103.<br>
In step S102, the atmospheric pressure is detected from the atmospheric pressure signal, and the control then proceeds to step S104. It is known that, when the engine speed is low or the engine load is small, for example, the intake pressure immediately before the intake valve is opened, such as shown in Fig. 4 is substantially equal to the atmospheric pressure. Therefore, the atmospheric pressure is detected with using the intake pressure immediately before the intake valve is opened. According to the configuration, an atmospheric pressure sensor is<br><br>
not required, and the number of parts is correspondingly reduced, so that the cost can be lowered.<br>
In step S104, for example, the intake pressure at crank pulse "18" shown in Fig. 4 is read as the intake pressure at the predetermined crank angle, and the control then proceeds to step S105.<br>
In step S105, on the basis of the atmospheric pressure detected in step S102, an intake pressure idling predetermined value corresponding to the atmospheric pressure is set in accordance with a control map of Fig. 22a, and the control then proceeds to step S106. As the atmospheric pressure is higher, the whole intake pressure is higher. Therefore, the control map of Fig. 22a is configured so that, as the atmospheric pressure is higher, the intake pressure idling predetermined value is set to a larger value. The intake pressure idling predetermined value may not be set so as to be continuously changed as shown in Fig. 22a. Alternatively, as shown in the table of Fig. 22b, the value may be set in a somewhat stepwise manner. In the alternative also, as the atmospheric pressure is higher, the intake pressure idling predetermined value is set to a larger value.<br>
In step S106, it is judged whether or not the intake pressure at the predetermined crank angle which is read in step S104 is equal to or lower than the intake pressure<br><br>
idling predetermined value which is set in step S105. If the intake pressure is equal to or lower than the intake pressure idling predetermined value, the control proceeds to step S107. If not, the control proceeds to step S103.<br>
In step S107, it is judged that the engine is in the idling state, and the control then proceeds to step S52 of the computing process of Fig. 14.<br>
In step S103, it is judged that the engine is not in the idling state, and the control then proceeds to step_ S52 of the computing process of Fig. 14.<br>
In the computing process, when the engine speed is equal to or lower than the centrifugal clutch engagement speed and the intake pressure at the predetermined crank angle is equal to or lower than the idling predetermined value, it is judged that the engine is in the idling state. The intake pressure idling predetermined value is set in accordance with the atmospheric pressure. As described above, the intake pressure is varied in accordance with the atmospheric pressure. When the intake pressure idling predetermined value is not set in accordance with the atmospheric pressure, therefore, the idling state cannot be correctly detected. [when the intake pressure idling predetermined value is not set in accordance with the atmospheric pressure and is set to be slightly larger while producing a margin, for example, the intake pressure<br><br>
does not exceed the idling predetermined value although the engine speed is increased, and hence the transfer to an adequate acceleration control is delayed. Conversely, when the intake pressure idling predetermined value is set to be slightly smaller, detection of the idling state is excessively severe so that the control in the idling state and that in the non-idling state hunt. When the intake pressure idling predetermined value is set in accordance with the atmospheric pressure, therefore, the idling state can be correctly detected, and transfer to the control in the non-idling state can be adequately performed.<br>
Fig. 23 shows changes with time in the ignition timing IGT, the engine speed N, and the intake pressure P in the case where the throttle opening TH is increased, very slowly from time tO1 with starting from the totally closed state of the throttle under the condition that, after the engine is sufficiently warmed up, the upper and lower limits IGTH, IGTL of the ignition timing are adequately set in accordance with the cooling water temperature, i.e., the engine temperature, and the intake pressure idling predetermined value Po is adequately set in accordance with the atmospheric pressure. In this simulation, as the throttle opening TH is increased very slowly, the phenomenon ought originally to be observed in which the intake pressure P is raised and the engine speed<br><br>
N is correspondingly increased, but, since it is judged to remain in the idling state as a result of the computing process of Fig. 21, the computing processes of Figs. 14 to 16 gradually change the ignition timing IGT to the retarding side so as to maintain the target engine speed in the idling state-, with the result that both the engine speed N and the intake pressure P "are almost unchanged. As described above, however, the upper and lower limits IGTH, IGTl of the ignition timing are adequately set ' in accordance with the cooling water temperature, i.e., the engine temperature. Therefore, the lower limit IGTL of the ignition timing is set to a negative value having a relatively small absolute value, and the ignition timing IGT is restricted at time to2 by the lower limit IGTL of the ignition timing. After time to2, the intake pressure P is raised, and the engine speed N is correspondingly increased. Before the engine speed N becomes equal to higher than the centrifugal clutch engagement speed No or<br>
at time tO3, it is judged that the engine is not. in the<br>
idling state. Consequently, transfer to the acceleration control is performed, and the ignition timing IGT is changed toward advance, so that the engine speed N is largely increased.<br>
By contrast, Fig. 24 shows a simulation in which the upper and lower limits IGTH, IGTL of the ignition timing<br><br>
are not set in accordance with the cooling water temperature, i.e., the engine temperature, and the intake pressure idling predetermined value Po is not set in accordance with the atmospheric pressure. In this simulation, the upper limit IGTH of the ignition timing is set to a largish) value, the lower limit IGTL of the ignition timing is set to a /smallish value, the intake pressure idling predetermined value Po is set to a largish value, and the throttle opening TH is increased very slowly from time t11. As a result, in order to maintain the target engine speed in the idling state, the ignition timing IGT is changed more and more to the retarding side, and reaches the lower limit IGTL of the ignition timing to be restricted thereto, at time ti2 at which a considerably long time period has elapsed from the start of the process of opening the throttle, with the result that the intake pressure P is raised and the engine speed N is increased. However, since the intake pressure idling predetermined value Po is large, the engine speed N becomes equal to higher than the centrifugal clutch engagement speed No at time t13 at which the intake pressure P has not yet reached the idling predetermined value Po. The transfer to the acceleration control is permitted only after a considerably long time period has elapsed from time t11 or the start of the process of opening the throttle. A<br>
situation similar to the above occurs also in the case where, for example, the closing degree of the throttle valve is adjusted by an idle screw. Even when the idle screw is adjusted, the idling engine speed is hardly increased.<br>
Although an engine of the intake pipe injection type is described in detail in the embodiment, the engine controller of the invention can be similarly applied also to an engine of the cylinder injection type, or a so-called direction-injection engine.<br>
Although a single-cylinder engine is described in detail in the embodiment, the engine controller of the invention can be similarly applied also to an engine having two or more cylinders, or a so-called multi-cylinder engine.<br>
The engine control unit can be realized by various kinds of computing circuits in place of a microcomputer.<br>
Industrial Applicability<br>
As described above, according to the engine<br>
controller 'of claim 1 of the invention, when an idling<br>
state of an engine is detected, the ignition timing is set<br>
in accordance with the difference between the target<br>
engine speed and the detected engine speed. By a degree<br>
corresponding to the difference between the target engine<br><br>
speed which is set on the basis of the engine temperature such as the cooling water, and the detected engine speed, for example, the ignition timing can be changed toward advance to increase the engine speed, or changed to the retarding side to reduce the engine speed. According to the configuration, an unstable engine speed in an idling state such as a state immediately after start of rotation of an engine can be controlled to a rotation state which is adequate at this time.<br>
According to the engine controller of claim 2/ of the invention, when the ignition timing is changed to one of an advancing side and a retarding side, continuation of a change of the ignition timing to the same side is avoided. Therefore, the engine speed in the idling state can be prevented from being excessively increased, or from being<br>
excessively reduced. <br>
According to the engine controller of claims of the<br>
invention, the ignition timing is set by multiplying an integration value of the difference between the target engine speed and the detected engine speed, with a predetermined gain. When the difference between the target engine speed and the detected engine speed is not converged, the ignition timing is changed, whereby the engine speed in the idling state can be prevented from being excessively increased, or from being excessively<br><br>
reduced. Furthermore, when the gain which is to be multiplied with the integration value of the engine speed difference is adequately set, the engine speed in the idling state immediately after start of rotation of the engine can be rapidly increased, and the engine speed in the idling state can be surely prevented from being<br>
excessively increased, or from being excessively reduced.<br>
According to the engine controller of claim 4 of the<br>
invention, when the ignition timing is changed to one of the advancing side and the retarding side, the ignition timing change setting gain for the same side is set to a smaller value, the ignition timing change setting gain being to be multiplied with the integration value of the difference between the target engine speed and the detected engine speed. Therefore, the engine speed in the idling state can be surely prevented from being excessively increased, or from being excessively reduced.<br>
According to the engine controller of claim '5_of the<br>
invention, immediately after start of rotation of the engine, the gain which is to be multiplied with the integration value of the difference between the target engine speed and the detected engine speed is set to a larger value. Therefore, the engine speed after start of rotation of the engine can be rapidly increased. <br>
According to the engine controller of claim.,6 of the<br><br>
invention, the ignition timing at a state change of the engine from a state other than the idling state to the idling state is set on the basis of the detected engine temperature. Therefore, the engine speed can be adequately reduced in an idling state transition period from a throttle-on state to a throttle-off state.<br>
According to the engine controller of claim 7 of the invention, upper and lower limits of the ignition timing are set on the basis of the engine temperature, and the ignition timing is restricted by the upper and lower limits. Therefore, the sense of incongruity that the engine speed is not changed in spite of a change of the throttle opening can be reduced.<br>
According to the engine controller of claim 8 of the invention, the upper and lower limits of the ignition timing are set so that the width between the upper and lower limits is narrower as the engine temperature is higher. Therefore, at a time when the engine temperature is high and the warming-up operation is ended, the responsiveness of the engine speed change with respect to a change of the throttle opening can be improved.<br>
According to the engine controller of claim of the invention, a predetermined value of the intake pressure for detecting the idling state is set on the basis of a detected atmospheric pressure, and, when the intake<br>
pressure is equal to or lower than the predetermined value for detecting the idling state when the phase of the crankshaft has a predetermined value, the idling state of the engine is detected. Therefore, the idling state of the engine can be surely detected, and the control can be surely performed in the engine operation state other than the idling state.<br>
According to the engine controller of claim 10 of the invention, as the detected atmospheric pressure is higher, the predetermined value of the intake pressure for detecting the idling state is set to be larger. Therefore, the idling state of the engine can be surely detected in accordance with a change of the atmospheric pressure, and the control when the atmospheric pressure is changed can be surely performed in the engine operation state other than the idling state.<br>
According to the engine controller of claim ll of the invention, the atmospheric pressure is detected on the basis of the detected intake pressure. Therefore, an atmospheric pressure sensor is not required, and the number of parts is correspondingly reduced, so that the cost can be lowered.<br>
According to the engine controller of claim 12 of the invention, when the detected engine speed detected is equal to or lower than an engagement speed of the<br>
centrifugal clutch, the idling state of the engine is detected. Therefore, the idling state of the engine can be surely detected.<br>
66<br>
WE CLAIM:<br>
1. An engine controller comprising:<br>
crankshaft phase detecting means for detecting a phase of a crankshaft;<br>
intake pressure detecting means for detecting an intake pressure of an intake passage of an engine;<br>
stroke detecting means for detecting a stroke of said<br>
engine on the basis of the phase of said crankshaft<br>
detected by said crankshaft phase detecting means, and the<br>
intake pressure detected by said intake pressure detecting<br>
means; and<br>
engine controlling means for controlling an operation state of said engine on the basis of the stroke of said engine detected by said stroke detecting means, wherein said engine controlling means comprising: engine speed detecting means for detecting a speed of said engine;<br>
idling detecting means for detecting an idling state of said engine;<br>
target engine speed setting means for, when the idling state of said engine is detected by said idling detecting means, setting a target engine speed; and<br>
idling ignition timing setting means for, when the idling state of said engine is detected by said idling<br>
detecting means, setting an ignition timingg in accordance with a difference between the target engine speed set by said target engine speed setting means and the engine speed detected by said engine speed detecting means;<br>
characterind h that<br>
when the ignition tiring is changed to one of an advanchg side and a retarding side, said idling ignition timing setting means avoids continuation of a change of said ignition timing to a same side.<br>
2.The enghe controller as claimed in claim l,whereh said idling ignition timing setthg means sets the ignition timingg by multiplying an integration value of the difference between the target enghe speed set by said target enghe speed setthg means and the enghe speed detected by said enghe speed detecting means, with a predetermined gah.<br>
3.The enghe controller as claimed h claim 2, wherein when the ignition trnhg is changed to one of the advanchg side and the retarding side said idlhg ignition timing setthg means sets the ignition timing change setthg gah for the same side to a smaller value...........<br><br>
the ignition timing change setting gain being to be multiplied with the integration value of the difference between the target engine speed set by said target engine speed setting means and the engine speed detected by said engine speed detecting means.<br>
54. The engine controller ,as claimed in calim 2 or 3<br>
wherein<br>
immediately after start of rotation of said engine, said idling ignition timing setting means sets the gain to a larger value, the gain being to be multiplied with the integration value of the difference between the target engine speed set by said target engine speed setting means and the engine speed detected by said engine speed detecting means.<br>
65. The engine controller as claime in any one of claims<br>
1 to/-5-, wherein<br>
said apparatus further comprises engine temperature detecting means for detecting a temperature of said engine, and<br>
said idling ignition timing setting means sets the ignition timing at a state change of said engine from a state other than the idling state to the idling state, on the basis of the engine temperature detected by said<br>
engine temperature detecting means.<br>
76. The engine controller as claime in any one of claims<br>
1 to 6 wherein<br>
said apparatus further comprises engine temperature detecting means for detecting a temperature of said engine, and<br>
said idling ignition timing setting means sets upper and lower limits of the ignition timing on the basis of the engine temperature detected by said engine temperature detecting means, and restricts the ignition timing by the upper and lower limits.<br>
87. The engine controller as claimed in claim wherein<br>
said idling ignition timing setting means sets the upper and lower limits of the ignition timing so that a width between the upper and lower limits is narrower as the engine temperature detected by said engine temperature detecting means is higher.<br>
98. The engine controller as claimed in any one of claims 1 to 8 wherein<br>
said apparatus further.-Comprises atmospheric pressure detecting means for detecting an atmospheric pressure, and<br>
said idling detecting means sets a predetermined<br>
value of the intake pressure for detecting the idling state, on the basis of the atmospheric pressure detected by said atmospheric pressure detecting means, and, when the intake pressure detected by said intake pressure detecting means is equal to or lower than the predetermined value for detecting the idling state when the phase of said crankshaft detected by said crankshaft phase detecting means has a predetermined value, detects<br>
the idling state of said engine.<br>
109. The engine controller/as calimed in wherein<br>
said idling detecting means sets the predetermined value of the intake pressure for detecting the idling state to be larger as the atmospheric pressure detected by said atmospheric pressure detecting means is higher.<br>
10.The engine controller <br>
wherein<br>
said atmospheric pressure detecting means detects the atmospheric pressure on the basis of the intake pressure detected by said intake pressure detecting means.<br>
11.The engine controller as claimed in any one of claims<br>
10<br>
10, wherein <br>
said apparatus further comprises a centrifugal clutch<br>
between said engine and a transmission, and<br>
when the engine speed detected by said engine speed detecting means is equal to lower than an engagement speed of said centrifugal clutch, said idling detecting means detects the idling state of said engine. <br>
An unstable idling state immediately after engine start is stabilized.<br>
The difference between a target idling engine speed corresponding to the cooling water temperature and an actual engine speed is integrated.  The ignition timing is changed toward advance or retard while using a value which is obtained by multiplying the integration value of the engine speed difference with a gain, as an ignition timing changing amount.  Immediately after engine start, the gain is set to a relatively large initial gain so as to rapidly increase  the  engine  speed.    When  the  engine  speed approaches the target engine speed, the gain is set to a smaller usual gain, and, in a change to the same advancing or retarding side, a change to an ignition timing in the same side is suppressed with using a smaller advancing or retarding gain.   In a throttle-off state,  an ignition timing corresponding to the cooling water temperature is set so as to rapidly reduce the engine speed.</td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
		<br>
		<div class="pull-left">
			<a href="225404-a-continous-process-for-making-transparent-food-grade-polyester-containing-transparent-waste-polyester.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="225406-quinoline-oxy-phenoxy-propionil-acid.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>225405</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>00691/KOLNP/2004</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>46/2008</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>14-Nov-2008</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>12-Nov-2008</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>25-May-2004</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>YAMAHA HATSUDOKI KABUSHIKI KAISHA</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>2500 SHINGAI, IWATA-SHI, SHIZUOKA 438-8501</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>SAWADA YUICHIRO</td>
											<td>C/O. YAMAHA HATSUDOKI KABUSHIKI KAISHA, 2500 SHINGAI, IWATA-SHI, SHIZUOKA 438-8501</td>
										</tr>
										<tr>
											<td>2</td>
											<td>HASEGAWA HITOSHI</td>
											<td>-DO-</td>
										</tr>
										<tr>
											<td>3</td>
											<td>TAKAHASHI MICHIYASU</td>
											<td>-DO-</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>F 02 P 5/15</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/JP02/12603</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2002-12-02</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>2002-212902</td>
									<td>2001-11-30</td>
								    <td>Japan</td>
								</tr>
								<tr>
									<td>2</td>
									<td>2001-367543</td>
									<td>2001-11-30</td>
								    <td>Japan</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/225405-engine-controller by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 04 Apr 2024 23:34:21 GMT -->
</html>
