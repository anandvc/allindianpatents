<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/198271-a-method-of-routing-packets-in-a-packet-network by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 06:41:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 198271:A METHOD OF ROUTING PACKETS IN A PACKET NETWORK</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">A METHOD OF ROUTING PACKETS IN A PACKET NETWORK</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>General Packet Radio Service GPRS is a new service designed for digital mobile systems. Because of bottlenecks, such as an air interface (Um), queues may be formed in routers (SGSN, GGSN, 13, BTS, BSC). Long transmissions of data may slow the operation of interactive applications so that it is no longer sensible to use the applications. In the routers (SGSN, GGSN, 13, BTS, BSC) of the invention, separate queues are formed for each service, quality of service, connection, subscriber and/or application/application class. The quality of service can be indicated by providing each packet with an identity indicating the quality, or a change in the quality can be signalled as separate messages. In a preferred embodiment of the invention, the amount of data sent from a queue at one go is controlled primarily on the basis of the quality of service of the subscriber. When packets are sent from a queue, it is monitored whether only a small number of packets remains in the queue, and if so, these packets are sent as well.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>The invention relates to a method of routing packets in a packet network, in general it relates to queue management during routing of data packets.<br>
Fig. 1 shows the parts of a mobile system that are essential to the invention. Mobile Stations MS communicate with Base Transceiver Stations BTSn over ari air interface Um. The base transceiver stations are controlled by Base Station Controllers BSC associated with Mobile Switching Centres MSC. A subsystem controlled by a base station controller BSC, including the base transceiver stations BTS controlled by the system, is called a Base Station Subsystem BSS. The interface between the exchange MSC and the base station subsystem BSS is called an A-interface. The part of the A-interface in the mobile system that is on the side of the exchange MSC is called a Network Subsystem NSS. The interface between the base station controller BSC and the base transceiver station BTS, in turn, is called an Abis-interface. The mobile switching centre MSC connects incoming and outgoing calls. It has, similar functions as an exchange of a Public Switched Telephone Network PSTN. In addition to these, it also performs functions that are typical of mobile communication only, such as subscriber location management, in co-operation with the subscriber registers of the network, which are not shown separately in fig. 1.<br>
A standard radio connection used in digital mobile systems is a circuit-switched connection, which means that resources allocated to a subscriber are reserved for the connection concerned for the entire duration of the call. A General Packet Radio Service GPRS is a new service designed for digital mobile systems, such as the GSM system. The packet radio service is described in ETSI specifications TC-TR-GSM 02.60 and 03.60. The packet radio service makes it possible to offer the user<br><br>
of a mobile station MS a packet-form radio comiection effectively utilizing radio resources. On a packet-switched connection, radio resources are reserved only when speech or data is to be sent. The speech or data is collected in packets of a certain length. When a packet like this has been transmitted over the air interface Um, and the transmitting party does not immediately have a new packet to send, the radio resource can be released to other subscribers.<br>
The system of fig. 1 comprises a separate Serving GPRS Support Node or SGSN, which controls the operation of the packet data service on the network side. The control comprises, for example, logging of the mobile station<br><br>
on and off the system, location updating of the mobile station, and routing of the data packets to the correct destination. In the present application, "data" is interpreted widely to mean any information transmitted in a digital mobile system, for example speech encoded in digital form, data transmission between computers, or telefax data. An SGSN node can be in connection with a base transceiver station BTS, a base station controller BSC or a mobile switching centre MSC, or it may be separate from them. The interface between an SGSN node and a base station controller BSC is called a Gb-interface.<br>
Information, such as control signalling and speech or other data is transmitted in the packet network by GPRS frames. Each frame F comprises a header 1 and a data part 2. In order that the system would know which mobile station has sent the frame, the header 1 comprises an identity identifying the mobile station, for example a Temporary Logical Link Identity TLLI. When a mobile station registers in the GPRS network, the network gives the mobile station a TLLI identity for use during the GPRS connection. After the GPRS connection, the same TLLI identity can be reassigned to some other mobile station.<br>
In the header 1, it is also sometimes possible to use a Network Layer Service access point Identity NLSI as well as the TLLI identity to indicate the application protocol used by the mobile station.<br>
In a packet radio network it is possible to imagine a situation in which a subscriber using a personal computer PC communicates with another computer 14 through a packet network 10, data network 11, router 13 and a local area network LAN. A long data transmission or several short consecutive data transmissions are in progress between the computers PC and 14, for example in accordance with Internet FTP protocol. Simultaneously, the user of the computer PC or some other subscriber initiates an interactive session, for example in accordance with the Internet Telnet protocol. If the packet of each Interactive session had to wait at the nodes along the connection for the termination of the long data transmission, then the response times would grow so long in the interactive session that it would no longer be sensible to use the service.<br>
The basic idea in many known queue management mechanisms is that short tasks in a queue can be prioritized over long tasks. When the short tasks are transferred to the beginning of the queue, the average waiting time is shortened. As an illustrative example for this can be given a queue that<br><br>
comprises 10 tasks with a duration of 1 unit and 1 task witfi a duration of 10 units. Tfie average value of the waiting times (before the task is started) is 13.2 units if the long task is performed first. If the long task is performed last, the average waiting time is only 5 units.<br>
The problem with the application of the queue management system in the packet radio system is that in the packet radio system no mechanisms are defined by which a short task can be distinguished from a long task. It is not possible to conclude from an incoming packet how many packets of the same application will be arriving after the packet concerned.<br>
In addition, the packet radio network sets certain requirements that do not occur in all queuing systems. One such requirement is that the packets of one and the same user belonging to one and the same application must be sent on the FIFO (First <br> First Out) principle. Later arriving packets must usually not be prioritized over earlier packets of the same application and the same user. Another requirement is that the operation of not a single application of even one user must be interrupted for so long that the application sets down the connection.<br>
The object of the invention is thus to provide a method and an equipment implementing the method so that the above problems associated with queuing in the packet radio network can be solved. The objects of the invention are achieved by a method that is characterized by what is stated in claim 1. The preferred embodiments of the invention are claimed in the dependent claims.<br>
The basis of the invention is that<br>
-	at least two queues are formed at a node of a packet network,<br>
-	a packet arriving at the node is conducted to a queue on the basis of at least one subscriber-specific criterion and/or service-quality-specific criterion, and<br>
-	a predefined number of packets is sent from the queues to the destination at one go.<br>
Further, different queues can be given different priorities on the basis of the subscriber, terminal equipment, application, quality of service, and the amount of data contained in the queue. All the while it is obsen/ed that the service of any queue is not interrupted for so long that the application would set down the connection.<br><br>
In the present application, "queue" means any arrangement by which the same effect is achieved as by physical placement of packets in different queues. With regard to the use of memory, It may be more economical to keep only pointers relating to the packets in different queues. A queue can be implemented, for example, as a chained list in which each element of the list contains a pointer pointing to the next and/or previous element.<br>
Since the packets of interactive sessions can be prioritized over the packets belonging to long data transmissions, the response times of the interactive connections are shortened and the service is sensible to use even when other applications are operating on the background.<br>
An arriving packet can be conducted to a queue assigned to it on the basis of a subscriber-specific and/or quality-of-service-specific criterion. The subscriber-specific criteria include, for example:<br>
-	A subscriber/terminal equipment to which the packet concerned Is addressed. The subscriber can also be identified on the basis of a TLLI identity or network address, such as an IP address, of the connection. Formation of a separate queue for each user ensures that a newly registered user can start using the services relatively quickly.<br>
-	A transport layer process (e.g. TCP) that can be identified on the basis of the identity of a TCP session. The procedure makes it possible to support applications that open several TCP connections simultaneously, e.g. one connection for each picture of a WWW page.<br>
The quaiity-of-service-specific cnteria include, for example:<br>
-	The Quality of Service QoS of a receiving subscriber. The GPRS specifications define four different qualities of service. On the basis of the quality of service, it is possible to ensure that the packets of the critical applications can be transmitted within the maximum time defined by the specifications.<br>
-	The application or application class that can be identified on the basis of the port of a TCP protocol. By separating from one another different applications, such as FTP, Telnet and WWW, one can ensure that interactive applications need not wait for any long data transmissions to be terminated first.<br>
The applications can be separated one by one, or the applications can be divided into different application classes that differ from one another<br><br>
with respect to the service quality requirements, e.g. with respect to the greatest delay allowed. From the queues with the highest quality of service, packets can be sent immediately. The subscribers can also be divided into diiferent quality classes. Prioritization can be effected so that separate queues are formed for the data on the basis of each criterion. From each queue, a certain amount of data is sent on the FIFO principle. Data is then sent from the next queue, and so on. The amount of data transmitted at one go can be set such that each queue with one and the same quality of service is given an equal amount of transmission time in each transmission turn. Alternatively, the same number of packets can be sent from each such queue, whereby the subscribers are offered service of the same quality even though the connection of one subscriber may be poorer than that of another.<br>
The amount of data transmitted at one go can also be regulated on the basis of the data located in the queue so that more packets are sent from queues with many packets than from shorter queues. It is also possible to monitor the service that has been given to each queue earlier, for example by maintaining a moving average of time for the time the packets are in the queue. The average of time is to be maintained constant for each queue with the same quality of service by serving better a queue that has been offered service of a quality below the average. At the same time, it is monitored that the operation of not a single user and/or a single application is interrupted for so long that the application would set down the connection.<br>
If the division is made entirely on the basis of the subscriber or the terminal equipment, the data packet of each new connection is assigned a queue of its own, and so it is not placed at the back of a single long queue like in the case of one common queue. In this kind of division made entirely on the basis of a subscriber-specific or connection-specific identity (e.g. TLLI identity), however, problems arise if one and the same subscriber starts simultaneously more than one application requiring different service. For example, the subscriber may be transmitting a large amount of data by the FTP protocol and let the transmission continue as background processing when he starts an interactive session, such as a TELNET session. Because of the FTP session, the queue of the subscriber concerned may already contain large quantities of data, and so the response times in the interactive session may become unduly long.<br><br>
In a preferred embodiment of the invention, the problem is solved by improving the division so that a separate queue is formed for each application type and/or each TCP process. This improves the operability of the appHcations requiring short response times as compared with the simple embodiment described above. If, for example, TELNET can be identified as a unique application or application class on the basis of the TCP protocol and a unique queue is assigned to it, the data packets of the TELNET application can be prioritized over packets of the same user located in the queue of the FTP session.<br>
Prioritization can be further improved by controlling the amount of data sent from each queue at one go. If the division into queues is based on the subscriber identity, the amount of data sent at one go can be defined on the basis of the subscriber"s quality of service. The quality of service is negotiated as the subscriber registers to use the GPRS network or possibly also during the session. If the subscriber"s quality of service has a high priority, a larger amount of data is sent from a queue Hke this at one go than from a queue with a low priority. The subscriber with a higher quality of service is thus offered better service, and the operability of his applicatioi^ is improved. Further, the queues with the highest priority car. be processed immediately, whereas those with other priorities are processed in turns. If the division is based on the application or TCP process and it is detected that a certain queue contains a relatively small amount of data, all the remaming data can be transmitted at one go, whereby the application or the TCP process need not wait for a small amount of data so as to be able to termmate the task. Here the transmission of the last few packets of a queue hardly slows the other queues at all, and yet it clearly improves the operation of the application or TCP process concerned, since any extra delay is eliminated.<br><br>
Accordingly, the present invention provides a method of routing packets in a packet network, comprising the steps of:<br>
-	forming at least two queues at a node of the packet network and conducting a<br>
packet arriving at the node to a queue on the basis of at least one of the following<br>
criteria:<br>
-	a subscriber-specific criterion; or<br>
-	service/quality-of-service-specific criterion;<br>
-	transmitting a predefined number of packets fi^m the queura at one go; and<br>
sending all packets in a queue if said transmitting a predefined number of packets<br>
fi"om each queue at one go would leave a number of packets in tiie queue, the number<br>
being smaller than a predefined tiiieshold value.<br>
In the following the invention will be described in greater detail by means of preferred embodiments and with reference to flie attached drawing, in which<br>
fig. 1 shows the parts of a mobile system that are essential to the invention, and<br>
fig. 2 illustrates packet management by meai^ of queues.<br>
As shown in figures 1 and 2, a support node SGSN 15 in a packet network fimctions as a router and buffers data in a queue, forwarding it through a base station system BSC-BTS to a mobile station MS and a<br><br>
computer PC connected to it. Since an air interface Urn forms a clear bottleneck, a queue is formed at the SGSN node 15. If all the data buffered in the SGSN node 15 is kept in a single FIFO queue, especially interactive applications, such as Telnet and WWW, which transmit often but small amounts of data at a time, will suffer. Correspondingly, queues may form at a Gateway GPRS Support Node GGSN, since the GGSN is a gateway between a GPRS network and some other type of network, such as Internet.<br>
The subscriber can be identified on the basis of an TLLI identity sent in a header 1 of a frame F. The TLLI identity identifies each connection between the mobile station and the SGSN node. The application can be Identified unambiguously on the basis of a port number of a TCP protocol. Since TCP processes are also separate entireties, they too can be distinguished from each other. Each GPRS subscriber can be identified when the parameters of the subscriber are checked from a GPRS register or some other such database.<br>
In a preferred embodiment of the invention, queues Qi are formed in a router on the basis of a subscriber-specific identity and application class. When a new subscriber registers in a system, his data is assigned a queue of its own. When the subscriber then starts several applications at the same time, a separate queue is provided for each simultaneous application. The advantage of the arrangement is that an application performing a long data transmission can function on the background without interfering unduly with any interactive application started after it. Even here, the amount of data transmitted at one go can depend on the subscriber"s quality of service, the quality of service of the application and/or the amount of data in the queue.<br>
A packet radio can be used in critical tasks. For example, the International Union of Railways lUR requires that at the highest priority, a 128-byte message is transmitted in less than 0.5 seconds. To achieve this rate, special measures must be taken. When the quality of service QoS is negotiated - i.e. as a mobile station registers as a user of the services offered by the GPRS network, or possibly even later during the session - the new quality of service is signalled to the routers of the GPRS packet network. When the SGSN node 15 receives a packet to an address of the Public Switched Packet Data Network PSPDN that has a high-priority quality of service, the SGSN node conducts the packet to a high-priority queue.<br><br>
The quality of service can be signalled to the routers on the packet network e.g. by providing each packet with a code indicating the quality of service. Since in the GPRS specifications four alternative qualities of service are defined, it is possible to identify them by two bits. Alternatively, the new quality of service can be signalled by a separate message indicating a change in the quality of service, the message being sent to a router located somewhere along the connection. The router will store the changed quality of service in its memory.<br>
When each packet is provided with a code indicating the quality of service, each node along the connection can make the decisions concerning priority independently. The priority can be easily changed by a 2-blt identity without a separate message indicating a change in the quality of service. The priority of individual packets can be changed easily without first sending, for example, a message raising the priority and then, after the packet, a message lowering the priority.<br>
When the quality of service changes and a separate message indicating the change is sent, it is not necessary to add a code indicating the quality of service to each separate packet. Another advantage achieved is simplification of billing, since a change in the quality of service, which is the billing criterion, is signalled by a separate message.<br>
Packets destined to a mobile station do usually not have a mechanism for changing the quality of service during the session, so the quality of service is usually defined as the subscriber registers to use a GPRS connection.<br>
Parameter Ki in Fig. 2 illustrates the amount of data sent from each queue at one go. As compared with prior art routing using a single queue, the service is improved if a plural number of queues Qi is used and parameter Ki is constant. The service can be further improved by adjusting parameter Ki, for example, on the basis of the quality of service such that more data is sent from the high-priority queues at one go than from the low-priority queues. Queue Q2 illustrates a situation where a small amount of data remains in the queue in addition to amount Ki. Transmission of entire queue Q2 here clearly Improves the operation of the application concerned without that the other subscribers and/or applications would suffer too much. A suitable threshold value for such exceeding of Ki is, for example, 30 to 50%. Correspondingly, Q4 illustrates a<br><br>
queue comprising little data. Transmission of short queues before long ones shortens the average waiting time.<br>
When packets are routed from a source to a destination, the nodes in between can use different queuing methods. For example, criteria optimized for an SGSN node may be different from those optimized for a GGSN node. In the present application, a packet network can be interpreted in the wide sense so that it comprises the base transceiver stations BTS and base station controllers BSC of a mobile system, in which the queuing mechanism provided by the invention can also be Implemented.<br>
The buffering and queue formation disclosed in the invention are described by way of an example in connection with a GPRS network node. Similar queues and buffers can naturally also be implemented at a base transceiver station BTS and/or a base station controller BSC of a mobile telephone network. It will be obvious to a person skilled in the art that as the technology develops, the basic idea of the invention can be implemented in many different ways. The invention and its embodiments are thus not limited to the above examples but can vary within the scope of the claims.<br><br><br><br><br>
The invention relates to a method of routing packets in a packet network, in general it relates to queue management during routing of data packets.<br>
Fig. 1 shows the parts of a mobile system that are essential to the invention. Mobile Stations MS communicate with Base Transceiver Stations BTSn over ari air interface Um. The base transceiver stations are controlled by Base Station Controllers BSC associated with Mobile Switching Centres MSC. A subsystem controlled by a base station controller BSC, including the base transceiver stations BTS controlled by the system, is called a Base Station Subsystem BSS. The interface between the exchange MSC and the base station subsystem BSS is called an A-interface. The part of the A-interface in the mobile system that is on the side of the exchange MSC is called a Network Subsystem NSS. The interface between the base station controller BSC and the base transceiver station BTS, in turn, is called an Abis-interface. The mobile switching centre MSC connects incoming and outgoing calls. It has, similar functions as an exchange of a Public Switched Telephone Network PSTN. In addition to these, it also performs functions that are typical of mobile communication only, such as subscriber location management, in co-operation with the subscriber registers of the network, which are not shown separately in fig. 1.<br>
A standard radio connection used in digital mobile systems is a circuit-switched connection, which means that resources allocated to a subscriber are reserved for the connection concerned for the entire duration of the call. A General Packet Radio Service GPRS is a new service designed for digital mobile systems, such as the GSM system. The packet radio service is described in ETSI specifications TC-TR-GSM 02.60 and 03.60. The packet radio service makes it possible to offer the user<br><br>
of a mobile station MS a packet-form radio comiection effectively utilizing radio resources. On a packet-switched connection, radio resources are reserved only when speech or data is to be sent. The speech or data is collected in packets of a certain length. When a packet like this has been transmitted over the air interface Um, and the transmitting party does not immediately have a new packet to send, the radio resource can be released to other subscribers.<br>
The system of fig. 1 comprises a separate Serving GPRS Support Node or SGSN, which controls the operation of the packet data service on the network side. The control comprises, for example, logging of the mobile station<br><br>
on and off the system, location updating of the mobile station, and routing of the data packets to the correct destination. In the present application, "data" is interpreted widely to mean any information transmitted in a digital mobile system, for example speech encoded in digital form, data transmission between computers, or telefax data. An SGSN node can be in connection with a base transceiver station BTS, a base station controller BSC or a mobile switching centre MSC, or it may be separate from them. The interface between an SGSN node and a base station controller BSC is called a Gb-interface.<br>
Information, such as control signalling and speech or other data is transmitted in the packet network by GPRS frames. Each frame F comprises a header 1 and a data part 2. In order that the system would know which mobile station has sent the frame, the header 1 comprises an identity identifying the mobile station, for example a Temporary Logical Link Identity TLLI. When a mobile station registers in the GPRS network, the network gives the mobile station a TLLI identity for use during the GPRS connection. After the GPRS connection, the same TLLI identity can be reassigned to some other mobile station.<br>
In the header 1, it is also sometimes possible to use a Network Layer Service access point Identity NLSI as well as the TLLI identity to indicate the application protocol used by the mobile station.<br>
In a packet radio network it is possible to imagine a situation in which a subscriber using a personal computer PC communicates with another computer 14 through a packet network 10, data network 11, router 13 and a local area network LAN. A long data transmission or several short consecutive data transmissions are in progress between the computers PC and 14, for example in accordance with Internet FTP protocol. Simultaneously, the user of the computer PC or some other subscriber initiates an interactive session, for example in accordance with the Internet Telnet protocol. If the packet of each Interactive session had to wait at the nodes along the connection for the termination of the long data transmission, then the response times would grow so long in the interactive session that it would no longer be sensible to use the service.<br>
The basic idea in many known queue management mechanisms is that short tasks in a queue can be prioritized over long tasks. When the short tasks are transferred to the beginning of the queue, the average waiting time is shortened. As an illustrative example for this can be given a queue that<br><br>
comprises 10 tasks with a duration of 1 unit and 1 task witfi a duration of 10 units. Tfie average value of the waiting times (before the task is started) is 13.2 units if the long task is performed first. If the long task is performed last, the average waiting time is only 5 units.<br>
The problem with the application of the queue management system in the packet radio system is that in the packet radio system no mechanisms are defined by which a short task can be distinguished from a long task. It is not possible to conclude from an incoming packet how many packets of the same application will be arriving after the packet concerned.<br>
In addition, the packet radio network sets certain requirements that do not occur in all queuing systems. One such requirement is that the packets of one and the same user belonging to one and the same application must be sent on the FIFO (First <br> First Out) principle. Later arriving packets must usually not be prioritized over earlier packets of the same application and the same user. Another requirement is that the operation of not a single application of even one user must be interrupted for so long that the application sets down the connection.<br>
The object of the invention is thus to provide a method and an equipment implementing the method so that the above problems associated with queuing in the packet radio network can be solved. The objects of the invention are achieved by a method that is characterized by what is stated in claim 1. The preferred embodiments of the invention are claimed in the dependent claims.<br>
The basis of the invention is that<br>
-	at least two queues are formed at a node of a packet network,<br>
-	a packet arriving at the node is conducted to a queue on the basis of at least one subscriber-specific criterion and/or service-quality-specific criterion, and<br>
-	a predefined number of packets is sent from the queues to the destination at one go.<br>
Further, different queues can be given different priorities on the basis of the subscriber, terminal equipment, application, quality of service, and the amount of data contained in the queue. All the while it is obsen/ed that the service of any queue is not interrupted for so long that the application would set down the connection.<br><br>
In the present application, "queue" means any arrangement by which the same effect is achieved as by physical placement of packets in different queues. With regard to the use of memory, It may be more economical to keep only pointers relating to the packets in different queues. A queue can be implemented, for example, as a chained list in which each element of the list contains a pointer pointing to the next and/or previous element.<br>
Since the packets of interactive sessions can be prioritized over the packets belonging to long data transmissions, the response times of the interactive connections are shortened and the service is sensible to use even when other applications are operating on the background.<br>
An arriving packet can be conducted to a queue assigned to it on the basis of a subscriber-specific and/or quality-of-service-specific criterion. The subscriber-specific criteria include, for example:<br>
-	A subscriber/terminal equipment to which the packet concerned Is addressed. The subscriber can also be identified on the basis of a TLLI identity or network address, such as an IP address, of the connection. Formation of a separate queue for each user ensures that a newly registered user can start using the services relatively quickly.<br>
-	A transport layer process (e.g. TCP) that can be identified on the basis of the identity of a TCP session. The procedure makes it possible to support applications that open several TCP connections simultaneously, e.g. one connection for each picture of a WWW page.<br>
The quaiity-of-service-specific cnteria include, for example:<br>
-	The Quality of Service QoS of a receiving subscriber. The GPRS specifications define four different qualities of service. On the basis of the quality of service, it is possible to ensure that the packets of the critical applications can be transmitted within the maximum time defined by the specifications.<br>
-	The application or application class that can be identified on the basis of the port of a TCP protocol. By separating from one another different applications, such as FTP, Telnet and WWW, one can ensure that interactive applications need not wait for any long data transmissions to be terminated first.<br>
The applications can be separated one by one, or the applications can be divided into different application classes that differ from one another<br><br>
with respect to the service quality requirements, e.g. with respect to the greatest delay allowed. From the queues with the highest quality of service, packets can be sent immediately. The subscribers can also be divided into diiferent quality classes. Prioritization can be effected so that separate queues are formed for the data on the basis of each criterion. From each queue, a certain amount of data is sent on the FIFO principle. Data is then sent from the next queue, and so on. The amount of data transmitted at one go can be set such that each queue with one and the same quality of service is given an equal amount of transmission time in each transmission turn. Alternatively, the same number of packets can be sent from each such queue, whereby the subscribers are offered service of the same quality even though the connection of one subscriber may be poorer than that of another.<br>
The amount of data transmitted at one go can also be regulated on the basis of the data located in the queue so that more packets are sent from queues with many packets than from shorter queues. It is also possible to monitor the service that has been given to each queue earlier, for example by maintaining a moving average of time for the time the packets are in the queue. The average of time is to be maintained constant for each queue with the same quality of service by serving better a queue that has been offered service of a quality below the average. At the same time, it is monitored that the operation of not a single user and/or a single application is interrupted for so long that the application would set down the connection.<br>
If the division is made entirely on the basis of the subscriber or the terminal equipment, the data packet of each new connection is assigned a queue of its own, and so it is not placed at the back of a single long queue like in the case of one common queue. In this kind of division made entirely on the basis of a subscriber-specific or connection-specific identity (e.g. TLLI identity), however, problems arise if one and the same subscriber starts simultaneously more than one application requiring different service. For example, the subscriber may be transmitting a large amount of data by the FTP protocol and let the transmission continue as background processing when he starts an interactive session, such as a TELNET session. Because of the FTP session, the queue of the subscriber concerned may already contain large quantities of data, and so the response times in the interactive session may become unduly long.<br><br>
In a preferred embodiment of the invention, the problem is solved by improving the division so that a separate queue is formed for each application type and/or each TCP process. This improves the operability of the appHcations requiring short response times as compared with the simple embodiment described above. If, for example, TELNET can be identified as a unique application or application class on the basis of the TCP protocol and a unique queue is assigned to it, the data packets of the TELNET application can be prioritized over packets of the same user located in the queue of the FTP session.<br>
Prioritization can be further improved by controlling the amount of data sent from each queue at one go. If the division into queues is based on the subscriber identity, the amount of data sent at one go can be defined on the basis of the subscriber"s quality of service. The quality of service is negotiated as the subscriber registers to use the GPRS network or possibly also during the session. If the subscriber"s quality of service has a high priority, a larger amount of data is sent from a queue Hke this at one go than from a queue with a low priority. The subscriber with a higher quality of service is thus offered better service, and the operability of his applicatioi^ is improved. Further, the queues with the highest priority car. be processed immediately, whereas those with other priorities are processed in turns. If the division is based on the application or TCP process and it is detected that a certain queue contains a relatively small amount of data, all the remaming data can be transmitted at one go, whereby the application or the TCP process need not wait for a small amount of data so as to be able to termmate the task. Here the transmission of the last few packets of a queue hardly slows the other queues at all, and yet it clearly improves the operation of the application or TCP process concerned, since any extra delay is eliminated.<br><br>
Accordingly, the present invention provides a method of routing packets in a packet network, comprising the steps of:<br>
-	forming at least two queues at a node of the packet network and conducting a<br>
packet arriving at the node to a queue on the basis of at least one of the following<br>
criteria:<br>
-	a subscriber-specific criterion; or<br>
-	service/quality-of-service-specific criterion;<br>
-	transmitting a predefined number of packets fi^m the queura at one go; and<br>
sending all packets in a queue if said transmitting a predefined number of packets<br>
fi"om each queue at one go would leave a number of packets in tiie queue, the number<br>
being smaller than a predefined tiiieshold value.<br>
In the following the invention will be described in greater detail by means of preferred embodiments and with reference to flie attached drawing, in which<br>
fig. 1 shows the parts of a mobile system that are essential to the invention, and<br>
fig. 2 illustrates packet management by meai^ of queues.<br>
As shown in figures 1 and 2, a support node SGSN 15 in a packet network fimctions as a router and buffers data in a queue, forwarding it through a base station system BSC-BTS to a mobile station MS and a<br><br>
computer PC connected to it. Since an air interface Urn forms a clear bottleneck, a queue is formed at the SGSN node 15. If all the data buffered in the SGSN node 15 is kept in a single FIFO queue, especially interactive applications, such as Telnet and WWW, which transmit often but small amounts of data at a time, will suffer. Correspondingly, queues may form at a Gateway GPRS Support Node GGSN, since the GGSN is a gateway between a GPRS network and some other type of network, such as Internet.<br>
The subscriber can be identified on the basis of an TLLI identity sent in a header 1 of a frame F. The TLLI identity identifies each connection between the mobile station and the SGSN node. The application can be Identified unambiguously on the basis of a port number of a TCP protocol. Since TCP processes are also separate entireties, they too can be distinguished from each other. Each GPRS subscriber can be identified when the parameters of the subscriber are checked from a GPRS register or some other such database.<br>
In a preferred embodiment of the invention, queues Qi are formed in a router on the basis of a subscriber-specific identity and application class. When a new subscriber registers in a system, his data is assigned a queue of its own. When the subscriber then starts several applications at the same time, a separate queue is provided for each simultaneous application. The advantage of the arrangement is that an application performing a long data transmission can function on the background without interfering unduly with any interactive application started after it. Even here, the amount of data transmitted at one go can depend on the subscriber"s quality of service, the quality of service of the application and/or the amount of data in the queue.<br>
A packet radio can be used in critical tasks. For example, the International Union of Railways lUR requires that at the highest priority, a 128-byte message is transmitted in less than 0.5 seconds. To achieve this rate, special measures must be taken. When the quality of service QoS is negotiated - i.e. as a mobile station registers as a user of the services offered by the GPRS network, or possibly even later during the session - the new quality of service is signalled to the routers of the GPRS packet network. When the SGSN node 15 receives a packet to an address of the Public Switched Packet Data Network PSPDN that has a high-priority quality of service, the SGSN node conducts the packet to a high-priority queue.<br><br>
The quality of service can be signalled to the routers on the packet network e.g. by providing each packet with a code indicating the quality of service. Since in the GPRS specifications four alternative qualities of service are defined, it is possible to identify them by two bits. Alternatively, the new quality of service can be signalled by a separate message indicating a change in the quality of service, the message being sent to a router located somewhere along the connection. The router will store the changed quality of service in its memory.<br>
When each packet is provided with a code indicating the quality of service, each node along the connection can make the decisions concerning priority independently. The priority can be easily changed by a 2-blt identity without a separate message indicating a change in the quality of service. The priority of individual packets can be changed easily without first sending, for example, a message raising the priority and then, after the packet, a message lowering the priority.<br>
When the quality of service changes and a separate message indicating the change is sent, it is not necessary to add a code indicating the quality of service to each separate packet. Another advantage achieved is simplification of billing, since a change in the quality of service, which is the billing criterion, is signalled by a separate message.<br>
Packets destined to a mobile station do usually not have a mechanism for changing the quality of service during the session, so the quality of service is usually defined as the subscriber registers to use a GPRS connection.<br>
Parameter Ki in Fig. 2 illustrates the amount of data sent from each queue at one go. As compared with prior art routing using a single queue, the service is improved if a plural number of queues Qi is used and parameter Ki is constant. The service can be further improved by adjusting parameter Ki, for example, on the basis of the quality of service such that more data is sent from the high-priority queues at one go than from the low-priority queues. Queue Q2 illustrates a situation where a small amount of data remains in the queue in addition to amount Ki. Transmission of entire queue Q2 here clearly Improves the operation of the application concerned without that the other subscribers and/or applications would suffer too much. A suitable threshold value for such exceeding of Ki is, for example, 30 to 50%. Correspondingly, Q4 illustrates a<br><br>
queue comprising little data. Transmission of short queues before long ones shortens the average waiting time.<br>
When packets are routed from a source to a destination, the nodes in between can use different queuing methods. For example, criteria optimized for an SGSN node may be different from those optimized for a GGSN node. In the present application, a packet network can be interpreted in the wide sense so that it comprises the base transceiver stations BTS and base station controllers BSC of a mobile system, in which the queuing mechanism provided by the invention can also be Implemented.<br>
The buffering and queue formation disclosed in the invention are described by way of an example in connection with a GPRS network node. Similar queues and buffers can naturally also be implemented at a base transceiver station BTS and/or a base station controller BSC of a mobile telephone network. It will be obvious to a person skilled in the art that as the technology develops, the basic idea of the invention can be implemented in many different ways. The invention and its embodiments are thus not limited to the above examples but can vary within the scope of the claims.</td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDUyNy1tYXMtOTcgYWJzdHJhY3QtZHVwbGljYXRlLnBkZg==" target="_blank" style="word-wrap:break-word;">0527-mas-97 abstract-duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDUyNy1tYXMtOTcgYWJzdHJhY3QuanBn" target="_blank" style="word-wrap:break-word;">0527-mas-97 abstract.jpg</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDUyNy1tYXMtOTcgYWJzdHJhY3QucGRm" target="_blank" style="word-wrap:break-word;">0527-mas-97 abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDUyNy1tYXMtOTcgY2xhaW1zLWR1cGxpY2F0ZS5wZGY=" target="_blank" style="word-wrap:break-word;">0527-mas-97 claims-duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDUyNy1tYXMtOTcgY2xhaW1zLnBkZg==" target="_blank" style="word-wrap:break-word;">0527-mas-97 claims.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDUyNy1tYXMtOTcgY29ycmVzcG9uZGVuY2Utb3RoZXJzLnBkZg==" target="_blank" style="word-wrap:break-word;">0527-mas-97 correspondence-others.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDUyNy1tYXMtOTcgY29ycmVzcG9uZGVuY2UtcG8ucGRm" target="_blank" style="word-wrap:break-word;">0527-mas-97 correspondence-po.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDUyNy1tYXMtOTcgZGVzY3JpcHRpb24gKGNvbXBsZXRlKS1kdXBsaWNhdGUucGRm" target="_blank" style="word-wrap:break-word;">0527-mas-97 description (complete)-duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDUyNy1tYXMtOTcgZGVzY3JpcHRpb24gKGNvbXBsZXRlKS5wZGY=" target="_blank" style="word-wrap:break-word;">0527-mas-97 description (complete).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDUyNy1tYXMtOTcgZHJhd2luZ3MtZHVwbGljYXRlLnBkZg==" target="_blank" style="word-wrap:break-word;">0527-mas-97 drawings-duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDUyNy1tYXMtOTcgZHJhd2luZ3MucGRm" target="_blank" style="word-wrap:break-word;">0527-mas-97 drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDUyNy1tYXMtOTcgZm9ybS0yLnBkZg==" target="_blank" style="word-wrap:break-word;">0527-mas-97 form-2.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDUyNy1tYXMtOTcgZm9ybS0yNi5wZGY=" target="_blank" style="word-wrap:break-word;">0527-mas-97 form-26.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDUyNy1tYXMtOTcgZm9ybS00LnBkZg==" target="_blank" style="word-wrap:break-word;">0527-mas-97 form-4.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDUyNy1tYXMtOTcgb3RoZXJzLnBkZg==" target="_blank" style="word-wrap:break-word;">0527-mas-97 others.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDUyNy1tYXMtOTcgcGV0aXRpb24ucGRm" target="_blank" style="word-wrap:break-word;">0527-mas-97 petition.pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="198270-accessories-and-attachments-for-angle-grinder.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="198272-a-process-for-the-preparation-of-heterocylic-antidibetic-compounds.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>198271</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>527/MAS/1997</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>20/2006</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>19-May-2006</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>16-Jan-2006</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>13-Mar-1997</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>M/S. NOKIA TELECOMMUNICATIONS OY</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>UPSEERINKATU, FIN 02600 ESPOO,</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>HANNU KARI</td>
											<td>KULLERVONKUJA 9 B 9 FIN 02880 VEIKKOLA,</td>
										</tr>
										<tr>
											<td>2</td>
											<td>SAMI HUUSKO</td>
											<td>MAININKITIE 4 C 26 FIN 02320 ESPOO</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>H04L 12/56</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>N/A</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td></td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>961363</td>
									<td>1996-03-25</td>
								    <td>Finland</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/198271-a-method-of-routing-packets-in-a-packet-network by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 06:41:29 GMT -->
</html>
