<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/268542-dual-transform-coding-of-audio-signals by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 07:35:46 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 268542:DUAL-TRANSFORM CODING OF AUDIO SIGNALS</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">DUAL-TRANSFORM CODING OF AUDIO SIGNALS</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>Methods, devices, and systems for coding and decoding audio are disclosed. At least two transforms are applied on an audio signal, each with different transform periods for better resolutions at both low and high frequencies. The transform coefficients are selected and combined such that the data rate remains similar as a single transform. The transform coefficients may be coded with a fast lattice vector quantizer. The quantizer has a high rate quantizer and a low rate quantizer. The high rate quantizer includes a scheme to truncate the lattice. The low rate quantizer includes a table based searching method. The low rate quantizer may also include a table based indexing scheme. The high rate quantizer may further include Huffman coding for the quantization indices of transform coefficients to improve the quantizing/coding efficiency.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>DUAL-TRANSFORM CODING OF AUDIO SIGNALS<br>
CROSS-REFERENCE TO RELATED APPLICATIONS<br>
[001] The present invention is related to co-pending and commonly owned U.S. Application Serial No. 11/580,682 (Attorney Docket No. 199-0524US) entitled "Fast Lattice Vector Quantization" filed on even date herewith. The contents of said application are hereby incorporated by reference.<br>
BACKGROUND OF THE INVENTION<br>
1.	Field of the Invention<br>
[002] The present invention relates generally to encoding and decoding audio signals, and more particularly, to encoding and decoding audio signals with an audio bandwidth up to approximately 22 kHz using at least two transforms.<br>
2.	Description of the Related Art<br>
[003] Audio signal processing is utilized in many systems that create sound signals or reproduce sound from such signals. With the advancement of digital signal processors (DSPs), many signal processing functions are performed digitally. To do so, audio signals are created from acoustic waves, converted to digital data, processed for desired effects, converted back to analog signals, and reproduced as acoustic waves.<br>
[004] The analog audio signals are typically created from acoustic waves (sound) by microphones. The amplitude of the analog audio signal is sampled at a certain frequency, and the amplitude is converted to a number that represents the amplitude. The typical sampling frequency is approximately 8 kHz (i.e., sampling 8,000 times per second), 16 kHz to 196 kHz, or something in between. Depending on the quality of the digitized sound, each sample of the sound may be digitized using 8 bits to 128 bits or something in between. To preserve high quality sound, it may take a lot of bits. For example, at a very high end, to represent one second of sound at a 196 kHz sampling rate and 128 bits per sample, it may take 128 bits x 192 kHz = 24 Mbit = 3 MB. For a typical song of 3 minutes (180 seconds), it takes 540 MB. At the low end, in a typical telephone<br>
Page 1Aof 52<br><br>
conversation, the sound is sampled at 8 kHz and digitized at 8 bits per sample, it still takes 8 kHz x 8 bit = 64 kbit/second = 8 kB/second. To make the digitized sound data easier to use, store and transport, they are typically encoded to reduce their sizes without reducing the sound quality. When they are about to be reproduced, they are decoded to restore the original digitized data.<br>
[005] There are various ways that have been suggested to encode or decode audio signals to reduce their size in the digital format. A processor or a processing module that encodes and decodes a signal is generally referred to as a codec. Some are lossless, i.e., the decoded signal is exactly the same as the original. Some are lossy, i.e., the decoded signal is slightly different from the original signal. A lossy codec can usually achieve more compression than a lossless codec. A lossy codec may take advantage of some features of human hearing to discard some sounds that are not readily perceptible by humans. For most humans, only sound within an audio spectrum between approximately 20 Hz to approximately 20 kHz is perceptible. Sound with frequency outside this range is not perceived by most humans. Thus, when reproducing sound for human listeners, producing sound outside the range does not improve the perceived sound quality. In most audio systems for human listeners, sounds outside the range are not reproduced. In a typical public telephone system, only frequencies within approximately 300 Hz to approximately 3000 Hz are communicated between the two telephone sets. This reduces data transmission.<br>
[006] One popular method for encoding/decoding music is the method used in an MP3 codec. A typical music CD can store about 40 minutes of music. When the same music is encoded with an MP3 encoder at comparable acoustic quality, such a CD may store 10-16 times more music.<br>
[007] ITU-T (International Telecommunication Union Telecommunication Standardization Sector) Recommendation G.722 (1988), entitled "7kHz audio-coding within 64 kbit/s," which is hereby incorporated by reference, describes a method of 7 kHz audio-coding within 64 kbit/s. ISDN lines have the capacity to transmit data at 64 kbit/s. This method essentially increases the bandwidth of audio through a telephone network using an ISDN line from 3 kHz to 7 kHz. The perceived audio quality is improved. Although this<br>
Page 2 of 52<br><br>
method makes high quality audio available through the existing telephone network, it typically requires ISDN service from a telephone company, which is more expensive than a regular narrow band telephone service.<br>
[008] A more recent method that is recommended for use in telecommunications is the ITU-T Recommendation G.722.1 (1999), entitled "Coding at 24 and 32 kbit/s for hands-free operation in systems with low frame loss," which is hereby incorporated herein by reference. This Recommendation describes a digital wideband coder algorithm that provides an audio bandwidth of 50 Hz to 7 kHz, operating at a bit rate of 24 kbit/s or 32 kbit/s, much lower than the G.722. At this data rate, a telephone having a regular modem using the regular analog phone line can transmit wideband audio signals. Thus, most existing telephone networks can support wideband conversation, as long as the telephone sets at the two ends can perform the encoding/decoding as described in G.722.1.<br>
BRIEF SUMMARY OF THE INVENTION<br>
[009] It is desirable to have full spectrum sound through a telephone, such that a telephone conversation is almost the same as face-to-face conversation in terms of sound quality. It is desirable to have a method that can improve the sound quality, or reduce the data load, or both.<br>
[0010] The present invention discloses systems, methods, and devices that improve the efficiency of an audio codec, i.e., improve sound quality and reduce data load in a transmission channel or a storage medium. One embodiment of the present invention applies at least two MLTs (Modulated Lapped Transforms) to the input audio signals. One low frequency MLT uses a frame of approximately 20 ms and one high frequency MLT uses four frames of approximately 5 ms each. The low frequency MLT may be similar to the one described in the G.722.1, while the high frequency MLT provides higher resolution at high frequencies. The dual transform yields better reproduction of transients for higher frequencies as compared to a single transform.<br>
[0011] The MLT coefficients may be grouped into sub-frames and then groups with different lengths. Each amplitude envelope of a sub-frame may be quantized by a logarithmic scalar quantizer and the MLT coefficients may be quantized with a multidimensional<br>
Page 3 of 52<br><br>
lattice vector. A fast lattice vector quantizer according to various embodiments of the present disclosure improves the quantization efficiency and accuracy over a scalar quantizer without the usual problems associated with lattice vector quantization. Various embodiments of the present disclosure further improve quantization and coding by using two different quantization schemes, one for higher rate quantization and one for lower rate quantization.<br>
[0012] Various embodiments of the present disclosure further improve the quantization encoding by dynamically determining whether Huffman coding is to be utilized for coding the amplitude envelopes and coefficient indices. For each of the four groups, Huffman coding may be utilized only when it can reduce the overall the bits required for coding all of the coefficient indices within the group. Otherwise, Huffman coding may not be used in order to reduce unnecessary computation cost.<br>
[0013] In accordance with various embodiments of the present disclosure, a method of encoding an audio signal is provided. The method includes transforming a frame of time domain samples of the audio signal to frequency domain, forming a long frame of transform coefficients. The method further includes transforming n portions of the frame of time domain samples of the audio signal to frequency domain, forming n short frames of transform coefficients. The frame of time domain samples has a first length (L), and each portion of the frame of time domain samples has a second length (S), wherein L = n x S, and n is an integer. The method further includes grouping a set of transform coefficients of the long frame of transform coefficients and a set of transform coefficients of the n short frames of transform coefficients to form a combined set of transform coefficients. The method further includes quantizing the combined set of transform coefficients, forming quantization indices for the quantized combined set of transform coefficients. The method further includes coding the quantization indices of the quantized combined set of transform coefficients.<br>
[0014] In accordance with various embodiments of the present disclosure, a method of decoding an encoded bit stream is provided. The method includes decoding a portion of the encoded bit stream to form quantization indices for a plurality of groups of transform coefficients. The method further includes de-quantizing the quantization indices for the<br>
Page 4 of 52<br><br>
plurality of groups of transform coefficients. The method further includes separating the transform coefficients into a set of long frame coefficients and n sets of short frame coefficients. The method further includes converting the set of long frame coefficients from frequency domain to time domain, forming a long time domain signal. The method further includes converting the n sets of short frame coefficients from frequency domain to time domain, forming a series of n short time domain signals. The long time domain signal has a first length (L), and each short time domain signal has a second length (S), wherein L = n xS and n is an integer. The method further includes combining the long time domain signal and the series of n short time domain signals to form the audio signal.<br>
[0015] A computer-readable medium having embodied thereon a program is also provided, the program being executable by a machine to perform any of the methods described herein.<br>
[0016] In accordance with various embodiments of the present disclosure, a 22 kHz codec is provided, including an encoder and a decoder. The encoder includes a first transform module operable to transform a frame of time domain samples of an audio signal to frequency domain, forming a long frame of transform coefficients, and a second transform module operable to transform n portions of the frame of time domain samples of the audio signal to frequency domain, forming n short frames of transform coefficients. The frame of time domain samples has a first length (L), and each portion of the frame of time domain samples has a second length (S), wherein L = n xS and n is an integer. The encoder further includes a combiner module operable to combine a set of transform coefficients of the long frame of transform coefficients and a set of transform coefficients of the n short frames of transform coefficients, forming a combined set of transform coefficients. The encoder further includes a quantizer module operable to quantize the combined set of transform coefficients, forming quantization indices for the quantized combined set of transform coefficients. The encoder further includes a coding module operable to code the quantization indices of the quantized combined set of transform coefficients.<br>
[0017] The decoder includes a decoding module operable to decode a portion of an encoded bit stream, forming quantization indices for a plurality of groups of transform coefficients. The decoder further includes a de-quantization module operable to de-quantize the<br>
Page 5 of 52<br><br>
quantization indices for the plurality of groups of transform coefficients. The decoder further includes a separator module operable to separate the transform coefficients into a set of long frame coefficients and n sets of short frame coefficients. The decoder further includes a first inverse transform module operable to convert the set of long frame coefficients from frequency domain to time domain, forming a long time domain signal. The decoder further includes a second inverse transform module operable to convert the n sets of short frame coefficients from frequency domain to time domain, forming a series of n short time domain signals. The decoder further includes a summing module for combining the long time domain signal and the series of n short time domain signals.<br>
[0018] In accordance with various embodiments of the present disclosure, a conferencing endpoint is provided. The endpoint includes a 22 kHz codec as described above. The endpoint further includes an audio I/O interface, at least one microphone, and at least one speaker. In some embodiments, the endpoint may also include a video I/O interface, at least one camera, and at least one display device.<br>
BRIEF DESCRIPTION OF THE SEVERAL VIEWS OF THE DRAWINGS<br>
[0019] A better understanding of the invention can be had when the following detailed description of the preferred embodiments is considered in conjunction with the following drawings, in which:<br>
[0020] Fig. 1 depicts an exemplary dual transform scheme according to an embodiment of the present disclosure.<br>
[0021] Fig. 2A depicts an exemplary coefficient grouping scheme according to an embodiment of the present disclosure.<br>
[0022] Fig. 2B depicts an exemplary coefficient grouping scheme according to another embodiment of the present disclosure.<br>
[0023] Fig. 3A depicts an exemplary encoded bit stream according to an embodiment of the present disclosure.<br>
Page 6 of 52<br><br>
[0024] Fig. 3B depicts an exemplary structure of flag bits according to an embodiment of the present disclosure.<br>
[0025] Fig. 3C depicts an exemplary structure of transform coefficients according to an embodiment of the present disclosure.<br>
[0026] Fig. 3D depicts an exemplary structure of transform coefficients according to another embodiment of the present disclosure.<br>
[0027] Fig. 4 depicts an exemplary process flow diagram of an encoding process according to an embodiment of the present disclosure.<br>
[0028] Fig. 5 depicts an exemplary process flow diagram of a decoding process according to an embodiment of the present disclosure.<br>
[0029] Fig. 6 depicts an exemplary block diagram of an encoder according to an embodiment of the present disclosure.<br>
[0030] Fig. 7 depicts an exemplary block diagram of a decoder according to an embodiment of the present disclosure.<br>
[0031] Fig. 8 depicts an exemplary block diagram of a conferencing system according to an embodiment of the present disclosure.<br>
DETAILED DESCRIPTION OF THE INVENTION<br>
[0032] Various embodiments of the present disclosure expand and improve the performance of audio signal processing by using an innovative encoder and decoder. The encoding process broadly includes a transform process, a quantization process, and an encoding process. Various embodiments of the present disclosure provide improvements in all three processes.<br>
[0033] In most prior art audio signal processing, the audio signal frame has a fixed length. The shorter the frame length, the shorter the delay. The shorter frame length also provides better time resolution and better performance for high frequencies. But a short frame provides poor frequency resolution. In contrast, the longer the frame length, the longer<br>
Page 7 of 52<br><br>
the delay. But a longer frame provides better frequency resolution and better performance at lower frequencies to resolve pitch harmonics. In a compromise, the frame length is typically in the range of 20ms, which is the adopted frame length in the G.722.1 recommendation. But a compromise is a compromise. A single fixed audio frame length for the whole audio spectrum is not adequate.<br>
[0034] hi accordance with various embodiments of the present disclosure, at least two different lengths of audio sample frames are used. One has a longer frame length and is designed for better representation of the low frequency spectrum; another has a shorter frame length, is used for the high frequency signals, and provides better resolution at high frequency. The combination of two signal frames improves the sound quality. It can expand the spectrum response to the full human audio spectrum, e.g., approximately 20 Hz to approximately 22 kHz.<br>
[0035] Rather than using predetermined bit allocation within a few categories, according to one embodiment of the present disclosure, the bit allocation may be adaptive and dynamic. Dynamic bit allocation may be employed during the quantization of transform coefficients. Thus the available bits are put to best uses.<br>
[0036] With at least two transforms, the transform coefficients to be quantized and encoded are more than with a single transform. In one embodiment of the present disclosure, instead of using a simple scalar quantization method, a fast lattice vector quantization method may be used. Vector quantization is generally much more efficient than the simpler scalar quantization method. In particular, lattice vector quantization (LVQ) has advantages over conventional well-known LBG (Linde, Buzo, and Gray) vector quantization in that it is a relatively simple quantization process and can achieve savings of required memory because of the regular structure of an LVQ codebook. However, lattice vector quantization has not been widely used in real-time speech and audio-coding due to several limitations, including the difficulties of how to truncate a lattice for a given rate to create an LVQ codebook which matches the probability density function (PDF) of the input source, how to quickly translate the codevectors (lattice points) of the LVQ codebook to their indices, and how to quantize the source vectors which lie outside the truncated lattice ("outliers").<br>
Page 8 of 52<br><br>
[0037] A fast LVQ (FLVQ) according to an embodiment of the present disclosure avoids the above mentioned limitations. The FLVQ includes a higher rate quantizer (HRQ) and a lower rate quantizer (LRQ). In quantizing the transform coefficients, the quantizer scales the coefficients instead of the lattice codebook in order to use a fast searching algorithm and then rescales the reconstructed coefficients at the decoder. This method of scaling coefficients can also solve the "outlier" problem by bringing the outliers (large coefficients) back within the truncated lattice which is used as the LVQ codebook. A PDF of the input sources, e.g., human voices or audible music is developed from a large collection of various audio sources. Once the limitations of LVQ are removed, the use of FLVQ in the embodiment of the present disclosure improves the quantization efficiency over the prior art scalar quantization.<br>
[0038] In another embodiment of the present disclosure, the quantization and encoding efficiency may be further improved by dynamic Huffman coding. It is well known that Huffman coding, as one of the entropy coding methods, is most useful when the source is unevenly distributed. The transform coefficients are typically unevenly distributed; hence, using Huffman coding can improve the coding efficiency. In this embodiment of the present disclosure, the Huffman coding may be employed to encode both the amplitude envelopes and quantization indices of the transform coefficients when the Huffman coding reduces the bit requirement. In determining whether the Huffman coding is used or not, the total number of bits using Huffman coding and the number of available bits used for quantization of norms or transform coefficients are compared. The Huffman coding may be used only if there is some saving. This way, the best coding method is used.<br>
Dual transform<br>
[0039] In one embodiment, two frame sizes are used, referred to as a long frame and a short frame. For simplicity, the present disclosure refers to dual transforms, although it should be understood that more than two frame sizes may be used.<br>
[0040] Referring now to Fig. 1, an audio signal 102 is sampled and digitized. In this particular example, the audio signal is sampled at 48 kHz. Other sampling frequencies, however, may be used. In this example, a long frame L 104 has a frame length of approximately 20<br>
Page 9 of 52<br><br>
ms. For each long frame L 104, there are multiple short frames SI 106, S2 107, S3 108, and S4 109. In this example, each short frame 106, 107, 108, and 109 has a frame length of approximately 5 ms; thus, each long frame 104 has approximately 960 samples (48 kHz x 0.02 s = 960), while each short frame (106, 107, 108, 109) has approximately 240 samples (48 kHz x 0.005 s = 240). While there are four short frames 106, 107, 108, and 109 presented in this example, there can be a lesser or greater number of short frames; for example, the number of short frames may be 2, 3, 4, 5, etc.<br>
[0041] These frames 104, 106, 107, 108, and 109 are transformed from the time domain to the frequency domain. For example, they may be transformed using the MLT (Modulated Lapped Transform) as described in ITU-T Recommendation G.722.1. For simplicity, the present disclosure refers to MLT transforms, although other types of transforms may be used, such as FFT (Fast Fourier Transform) and DCT (Discrete Cosine Transform), etc.<br>
[0042] The transform yields MLT coefficient sets 212, 222, 224, 226, and 228 as shown in Fig. 2A. Each short frame MLT coefficient set 222, 224, 226, and 228 has approximately 240 coefficients, and each coefficient is approximately 100 Hz apart from its neighbor. As to the long frame 212, there are approximately 960 MLT coefficients, or one coefficient every 25 Hz. These coefficients may be combined to form a single set of 1920 MLT coefficients. This set of coefficients can capture both the low frequency characters of the sound and the high frequency characters. Due to the coding bandwidth of 22 kHz, the MLT transform coefficients representing frequencies above approximately 22 kHz may be ignored.<br>
[0043] The long transform is well-suited for capturing lower frequencies. The short transform is well-suited for capturing higher frequencies. So not all coefficients carry the same value for reproducing the transformed sound signal. In one embodiment, some of the coefficients may be ignored. Each short frame MLT coefficient set has approximately 240 coefficients. Each coefficient is approximately 100 Hz apart from its neighbor. In one embodiment, the coefficients less than approximately 6800 Hz and above approximately 22,000 Hz may be ignored. Therefore, 152 coefficients may be retained for each short frame, and the total number of coefficients for four short frames is 608. As to the long frame, since the long frame is used for representing lower frequency signals,<br>
Page 10 of 52<br><br>
coefficients for frequencies below approximately 7 kHz may be retained, and coefficients from the long transform above approximately 7 kHz may be discarded, in one embodiment. Thus, lower frequencies may have 280 coefficients. Thus, in one embodiment, the total coefficients may be 888 (608 + 280) for the audio spectrum up to approximately 22 kHz.<br>
[0044] The coefficients may be grouped together into sub-frames and groups before quantization and coding. A "sub-frame" in this embodiment may be similar to the "region" in the G.722.1 method. A sub-frame is used as a unit to compute the amplitude envelope, assign variable bit allocation, and conduct further quantization and encoding. A group comprises many sub-frames having the same length within a range of the spectrum. The sub-frames within a group may have similar properties, and may be quantized or encoded in a similar way. But for sub-frames in different groups, the methods of quantizing or encoding can be different. Unlike the regions in the prior art method, the sub-frames can have different sizes, as can the groups, such that the different sub-frames and groups can represent the spectrum more closely and the bit requirements during the quantization and encoding can be reduced.<br>
[0045] In the current example, the entire audio spectrum from 0 Hz to 22 kHz may be divided into four groups. The first group covers the frequencies from approximately 0 Hz to approximately 4 kHz. The first group has 10 sub-frames, and each sub-frame has 16 MLT coefficients. The total coefficients in the first group are 160 coefficients, all of which come from the long frame transform. The second group covers the spectrum from approximately 4 kHz to approximately 7 kHz. This second group has 5 sub-frames, each having 24 coefficients for a total of 120 coefficients. These coefficients come from the long frame transform. The third group covers the spectrum from approximately 7 kHz (or in some embodiments, approximately 6.8 kHz) to approximately 14 kHz. The long frame transform and the short frame transform may overlap at their boundaries to make the transition smoother. The third group has 9 sub-frames, each having 32 coefficients, for a total of 288 coefficients. These coefficients come from the four short frame transforms. The fourth group covers the spectrum from approximately 14 kHz to approximately 22 kHz. This group has 10 sub-frames, each having 32 coefficients for a total of 320<br>
Page 11 of 52<br><br>
coefficients. Overall, there are 888 coefficients to be quantized and encoded in this example.<br>
[0046] An Overlap Add (OLA) may be performed between the long-MLT and short-MLT coefficients using a triangular window on the frequency region of 250 Hz around the boundary frequency. For the long MLT the 10 coefficients starting at 6775 Hz are multiplied by a down-sloping ramp. For the short MLT the 2 coefficients starting at 6800 Hz are multiplied by an up-sloping ramp.<br>
[0047] In grouping the coefficients into sub-frames and groups according to the above scheme, those coefficients may be arranged according to the frequencies, from low frequencies to high frequencies. For example, coefficients for the same frequency may be grouped together: a coefficient from L is followed by the one from S1, S2, S3, and S4, then the next higher frequency from L again and repeat. Other arrangements or sequences are possible and acceptable. For example, coefficients from the same transform may be grouped together, i.e., all coefficients from L transform may be first, followed by coefficients from the S1 transform, S2, S3, and S4 transforms.<br>
[0048] It is found that the arrangement or sequence here may affect the quantization or encoding later on. In one embodiment, the following arrangement appears to generally provide a good result for the quantization and encoding scheme described later on. The coefficients from the long frame transform are arranged according to the frequency from low to high into the first group and second group. The coefficients from the four short transforms are not arranged generally according to their frequency, but not strictly according to the frequency sequence. First, 8 coefficients from the first short frame transform are selected and arranged according to the frequency sequence. Then the 8 coefficients of the same frequency from the second short frame transform are selected. Similarly, the 8 coefficients of the same frequency from the third short frame transform are selected. Then those from the fourth short frame transform are selected. After that, we go back to the first short frame transform S1 to select the next 8 coefficients and repeat the process until all coefficients from the short frame transforms are selected.<br>
Page 12 of 52<br><br>
[0049] Using the above dual-transform and grouping, there are 4 groups and 34 sub-frames, each sub-frame having 16, 24, or 32 coefficients. Unlike the single transform in a prior art method that can only transform either the low frequency or the high frequency, or neither with fair resolution, various embodiments of the present disclosure can provide good resolution at both lower frequency and higher frequency of the audio spectrum. The computation load is only slightly more than a single short frame transform (e.g., 5 ms frame length, 48 kHz sampling rate) to expand the spectrum range to full audio spectrum at 22 kHz. These coefficients represent the full audio spectrum. These coefficients may be quantized and encoded using a variety of quantization or encoding methods, for example using the method described in G.722.1. If the G.722.1 method is used, the amplitude envelope of each sub-frame is first calculated, scalar quantized, and Huffman coded. The amplitude envelopes are also used to allocate bits for encoding the coefficient indices within each sub-frame according to the categories that the sub-frame is assigned. Then the coefficient indices are quantized according to their categories.<br>
[0050] The above-described scheme is useful for speech and general music. In accordance with another embodiment, a percussion-type signal may be present in the audio signal. A percussion-type signal may be detected based on such features as an average gradient ramp of long MLT coefficients over the frequency region of up to approximately 10 kHz; location of the maximum long MLT coefficient; and zero-crossing rate (ZCR) of long MLT coefficients. Examples of a percussion-type signal include without limitation sounds produced by castanets and triangles, etc. If such a percussion-type signal is detected, the boundary frequency for the longer frame transform coefficients may be adjusted to approximately 800 Hz (rather than approximately 7 kHz), as depicted in Fig. 2B. This adjustment advantageously reduces pre-echo phenomena. Accordingly, in this embodiment, the long frame transform coefficients 232 may include frequencies in the range of approximately 0 Hz to approximately 800 Hz, and the short frame transform coefficients 242, 244, 246, and 248 may include frequencies in the range of approximately 600 Hz to approximately 22 kHz. The overlap of frequencies aids in providing a smooth transition.<br>
Page 13 of 52<br><br>
[0051] An OLA may be performed between the long-MLT and short-MLT coefficients using a triangular window on the frequency region of 250 Hz around the boundary frequency. For the long MLT the 10 coefficients starting at 575 Hz are multiplied by a down-sloping ramp. For the short MLT the 2 coefficients starting at 600 Hz are multiplied by an up-sloping ramp.<br>
[0052] The lower 400 long-MLT coefficients centered at 25 Hz intervals are divided into 20 groups, each having 20 coefficients. The spectrum energy, Ex, in each group is computed as follows:<br><br>
where x is the long-MLT coefficients, i is the group number, and THREQ is the threshold in quiet which may be experimentally chosen as THREQ = 7000.<br>
[0053] The natural logarithm of the group energy ratio between the current frame and the previous frame, REi, is computed as follows:<br><br>
where n is the frame number.<br>
Page 14 of 52<br>
[0054] The average gradient ramp of the rising edge, Rampup, is computed as follows:<br><br><br>
[0055] The average gradient ramp of the falling edge, Rampdown, is computed as follows:<br><br>
[0056] A percussion-type signal is detected if the following conditions are met: (1) Rampup&gt;THRERAMP, where THRERAMP is the predefined threshold of ramp and equals 1.5; (2) The first long-MLT coefficient, x0, is the maximum of long-MLT coefficients; and (3) The zero-crossing rate, ZCR, is less than the predefined threshold, THREZCR=0.1.<br>
[0057] If a percussion-type signal is detected, the boundary frequency is adjusted to approximately 800 Hz for the current frame and the next 2 frames. If a condition Rampdown&gt;1 is true in the next frames n+1 or n+2, the encoder will work with the adjusted boundary frequency for 8 frames. Otherwise, the encoder will turn back to a boundary frequency of 7 kHz in the frame n+3.<br>
[0058] In the percussion-type signal mode when the boundary frequency is approximately 800 Hz, the dual-MLT coefficients are divided into 38 sub-frames with different lengths. There are 32 long-MLT coefficients representing frequencies below 800Hz which are split into two sub-frames of 16 coefficients. The short-MLT coefficients are divided into various groups: the first group having 12 sub-frames of 16 coefficients and representing frequencies of 600 Hz to 5.4 kHz, the second group having 12 sub-frames of 24 coefficients and representing frequencies of 5.4 kHz to 12.6 kHz, and the third group having 12 sub-frames of 32 coefficients and representing frequencies of 12.6 kHz to 22.2 kHz. Each sub-frame comprises the coefficients of the same short-MLT.<br>
Amplitude envelopes<br>
[0059] The amplitude envelopes of sub-frames are quantized and analyzed to determine whether Huffman coding should be used. A fixed bit allocation may be assigned to each amplitude envelope as a default and a benchmark. If using Huffman coding can save<br>
Page 15 of 52<br><br>
some bits comparing to the fixed bits, then it may be used. A Huffman flag for amplitude envelope is set, so the decoder knows whether to apply Huffman coding. The number of bits saved is stored in the bits available for the remaining encoding. Otherwise, Huffman coding is not used, the flag is cleared and the default fixed bit is used.<br>
[0060] For example, in one embodiment, each envelope is allocated 5 bits. The total default bits used for envelopes are 34 x 5 = 170 bits. Assuming the transmission rate is 64 kbit/s, then the amount of bits for each frame is 64 kbit/s x 20 ms = 1280 bits. Six flag bits are reserved in this example. Thus, the available bits for encoding coefficients indices are 1280-6-170= 1104 bits.<br>
[0061] For each sub-frame, the amplitude envelope, also called norm, is defined as the RMS (Root-Mean-Square) value of the MLT coefficients in the sub-frame, and is computed as follows:<br><br>
where r is the index of the sub-frame, M(r) is the size of the sub-frame, which can be 16, 24 or 32, and mlt(r,n) is the «th MLT coefficient of the rth sub-frame. In the current example,<br>
when 1 
Page 16 of 52<br>
[0062] The rms(r) values are calculated and scalar quantized with a logarithmic quantizer. Table 1 below shows the codebook of the logarithmic quantizer.<br><br><br><br>
The amplitude envelope of the first sub-frame, rms(l), is quantized with 5 bits and its quantization index is directly transmitted to the decoder. Thus, only the first 32 codewords are used to quantize rms(l). The remaining 33 amplitude envelopes are quantized with all 40 codewords and the obtained indices are differentially coded as follows.<br><br>
where i=0, 1, 2, ... The differential indices are constrained into the range of [-15, 16]. The negative differential indices are first adjusted and then the positive differential indices are adjusted. Finally, Huffman coding is applied to the adjusted differential indices. The total bits used for Huffman coding are then compared with the number of bits used for the straight coding (i.e., without Huffman coding). The Huffman code may be transmitted on the channel if the total bits are less than without Huffman coding. Otherwise, the differential code of the quantization indices will be transmitted to the decoder. Therefore, the bits encoded may always be the least. If the Huffman code is used, then the Huffman flag is set, and the saved bit is returned to the available bits. For example, if the total bits for Huffman coding are 160 bits, then 170 - 160 = 10 bits are saved. The available bits become 10+1104 =1114 bits.<br>
Adaptive bit-allocation scheme<br>
[0063] An adaptive bit-allocation scheme based on the energies of the groups of transform coefficients may be used to allocate the available bits in a frame among the sub-frames. In one embodiment, an improved bit-allocation scheme may be used. Unlike the scheme used in G.722.1, the adaptive bit allocation for coefficient indices is not fixed by<br>
Page 17 of 52<br><br>
categories, but by the allocation process at the same time as the amplitude envelopes are quantized. The bit allocation may be as follows:<br>
[0064] Let Remainder denote the total number of available bits and r(n) denote the number of bits allocated to the nth sub-frame. In the above example, Remainder =1114 with Huffman coding applied to amplitude envelopes:<br>
[0065] Step 0. Initialize the bit allocation to zero, i.e.,: r(n)=0, where n = l,2, 3,... N, where N is the total number of sub-frames. In the above example, N is 34.<br>
[0066] Step 1. Find the index n of the sub-frame which has the maximum RMS among sub-frames.<br>
[0067] Step 2. Allocate M(n) bit to the nth sub-frame, i.e., r(n) = r(n) + M(n). (Here M(n) is the number of coefficients in the nth sub-frame).<br>
[0068] Step 3. Divide rms(n) by 2 and Remainder = Remainder - M(n). [0069] Step 4. If Remainder &gt; 16, repeat Steps 1 to 3. Otherwise stop.<br>
[0070] After this bit allocation, all bits are allocated to sub-frames, except a small remainder bits. Some sub-frames may not have any bits allocated to them because the RMS values of those sub-frames are too small, i.e., there is no appreciable contribution from that part of the spectrum to the audio signal. That part of the spectrum may be ignored.<br>
Fast Lattice Vector Quantization<br>
[0071] Although prior art quantization and encoding methods may be used to implement the embodiments described above to expand the processed audio signal to full audio spectrum, they may be not bring the full potential to a wide audience. Using prior art methods, the bit rate requirement can be high, which makes it more difficult to transmit the processed full spectrum audio signals. A new Fast Lattice Vector Quantization (FLVQ) scheme according to one embodiment of the present disclosure can be used, which improves coding efficiency and reduces the bit requirement. The FLVQ may be used for quantization and encoding of any audio signals.<br>
Page 18 of 52<br><br>
[0072] The MLT coefficients are divided into sub-frames of 16, 24, and 32 coefficients, respectively. The RMS, or norm, of each sub-frame, i.e., the root-mean-square value of the coefficients in the sub-frame, is calculated and the coefficients are normalized by the quantized norm. The normalized coefficients in each sub-frame are quantized in 8-dimensional vectors by the Fast LVQ. The Fast Lattice Vector Quantizer comprises a higher rate quantizer (HRQ) and a lower rate quantizer (LRQ). The higher rate quantizer is designed to quantize the coefficients at the rates greater than 1 bit/coefficient, and the lower rate quantizer is used for the quantization with 1 bit/coefficient.<br>
[0073] Lattice vector quantizers are optimal only for uniformly distributed sources. Geometrically, a lattice is a regular arrangement of points in iV-dimensional Euclidean space. In this case, the source (i.e., the MLT coefficients) is non-uniform and therefore an entropy coding - Huffman Coding - is applied to the indices of the higher rate quantization to improve the performance of HRQ.<br>
Higher rate quantization<br>
[0074] The higher rate quantizer may be based on the Voronoi code for the lattice D8 and designed to quantize the normalized MLT coefficients at the rates of 2 to 6 bits/coefficient. The codebook of this sub-quantizer may be constructed from a finite region of the lattice D8 and is not stored in memory. The codevectors can be generated by a simple algebraic method.<br>
[0075] The lattice D$ is defined as follows:<br><br>
where Z8 is the lattice which consists of all points with integer coordinates. It can be seen that D$ is an integer lattice and consists of the points y = (y1, y2, y3, y4, y5, y6, y7, y8) having integer coordinates with an even sum. For example, a vector y = (-1, -1, 0, 2, 1, -3, 2, 4) has an even sum of 4 and therefore y is a lattice point of D8.<br>
[0076] Conway and Sloane have developed fast quantization algorithms for some well-known lattices, which could be applied to D8. However, their algorithms assume an infinite<br>
Page 19 of 52<br><br>
lattice which can not be used as the codebook in the real-time audio coding. In other words, for a given rate their algorithms can not be used to quantize the input vectors lying outside the truncated lattice region.<br>
[0077] In one embodiment, the normalized MLT coefficients are quantized with the rates of 2, 3, 4, and 5 bits/coefficient, respectively. In another embodiment such as when a percussion-type signal is detected, the maximum quantization rate may be 6 bits/coefficient. To minimize the distortion for a given rate, the lattice D8 may be truncated and scaled. Actually, the coefficients are scaled instead of the lattice codebook in order to use the fast searching algorithm described by Conway et al, and then rescale the reconstructed coefficients at the decoder. In addition, a fast method for quantizing "outliers" may be developed.<br>
[0078] For a given rate R bits/dimension (1 
[0079] 1) Apply a small offset a = 2'6 to each component of the vector x to avoid any lattice point on the boundary of the truncated Voronoi region, i.e.,: Xi = x-a, where a = (2~6, 2"6,<br>
2-6, 2-6, 2-6, 2-6, 2-6, 2-6,<br>
[0080] 2) Scale the vector xi by the scaling factor a: X2 = axi. For a given rate R, the optimal scaling factor is selected experimentally and shown in Table 2 below.<br>
TABLE 2 Scaling factors used for the higher rate quantizer<br>
R	<br>
2 3	2/3<br><br>
	4/3<br>
4	8/3<br>
5	16/3<br>
6	<br>
[0081] 3) Find the nearest lattice point v of Ds to the scaled vector X2. This can be done by using the searching algorithm described in Conway and Sloane.<br>
Page 20 of 52<br><br>
[0082] 4) Suppose v is a codevector in the Voronoi region truncated with the given rate R and compute the index vector k = (ki, k2, h, k4, k5, k6, k7, k8) of v, where 0 
 <br>
[0083] 5) Compute the codevector y from the index vector k using the algorithm described by Conway et al. and then compare y with v. If y and v are exactly same, k is the index of the best codevector to x2 and stop here. Otherwise, the input vector x2 is an outlier and may be quantized by the following steps.<br>
[0084] 6) Scale down the vector x2 by 2: x2 = x212.<br>
Page 21 of 52<br><br>
[0085] 7) Find the nearest lattice point u of A to x2 and then compute the index vector j of u.<br>
[0086] 8) Find the codevector j? from the index vector j and then compare^ with u. Ify is different from u, repeat Steps 6) to 8). Otherwise, compute w = x21 16. Due to the normalization of MLT coefficients, a few iterations may be performed to find a codevector to the outlier in the truncated lattice.<br>
[0087] 9) Compute x2 = x2 + w.<br>
[0088] 10) Find the nearest lattice point u of Dg to x2 and then compute the index vector j of u.<br>
[0089] 11) Find the codevector y from the index vector j and then compare y with u. Ify and u are exactly same, k=j and repeat Steps 9) to 11). Otherwise, k is the index of the best codevector to x2 and stop.<br>
[0090] The decoding procedure of the higher rate quantizer may be carried out as follows: [0091] 1) Find the codevector y from the index vector k according to the given rate R. [0092] 2) Rescale the codevector y by the scaling factor a given in Table 2 above: yi = y I a.<br>
[0093] 3) Add the same offset a used in Step 1) of the quantization process to the rescaled codevectoryr: y2=yi + a, and then stop.<br>
Lower rate quantization<br>
[0094] A lower rate quantizer based on the so-called rotated Gosset lattice REs may be provided to quantize the normalized MLT coefficients with the rate of 1 bit/coefficient.<br>
[0095] The lattice REs consists of the points falling on concentric spheres of radius 2V2r centered at the origin, where r = 0, 1,2,3, .... The set of points on a sphere constitutes a spherical code and can be used as a quantization codebook.<br>
[0096] hi the lower rate quantizer, the codebook consists of all 240 points of REs lying on the sphere of r = 1 and 16 additional points which do not belong to the lattice REs. The<br>
Page 22 of 52<br><br>
additional points are obtained by permutations of components of two vectors: (-2, 0, 0, 0, 0, 0, 0, 0) and (2, 0, 0, 0, 0, 0, 0, 0) and used to quantize the input vectors close to the origin. To develop the fast indexing algorithm, the codevectors of the codebook are arranged in a particular order and shown in Table 3 below.<br>
[0097] For each 8-dimensional coefficient vector x = (xi, X2, xj, x4, x5, x«, x7, xg), quantization may be performed as follows:<br>
[0098] 1) Apply an offset a = 2'6 to each component of the vector x: xi = x-a, where a - (2"6, 2'6,<br>
2-6, 2-6, 2-6, 2-6, 2-6, 2-6,<br>
[0099] 2) Scale the vector xi by the scaling factor a: X2 = <xxi. the optimal scaling factor is experimentally chosen as a.="1.25.&lt;br/">
[00100)3) Obtain the new vector xj by reordering the components of X2 in descending order.<br>
[00101]4) Find in Table 4 the best-matched vector / to JCJ in terms of the mean-squared error (MSE). The vectors given in Table 4 below are called as the leaders of the codevectors and any codevector in the codebook can be generated by permutation of its leader.<br>
[00102]5) Obtain the best codevector y by reordering the components of / in the original order.<br>
[00103J6) Find the flag vector of/ in Table 5 below and then obtain the vector z by reordering the components of the flag vector in the original order. The flag vectors are defined as follows: if the leader consists of -2, 2, and 0, -2 and 2 are indicated by 1 and 0 is indicated by 0; if the leader consists of-1 and 1,-1 is indicated by 1 and 1 is indicated by 0.<br>
[00104] 7) Find the index offset K related to the leader / in Table 6 below.<br>
[00105] 8) If the leader / is (2, 0, 0, 0, 0, 0, 0, -2) and the codevector y has the component 2 with index lower than that of the component -2, the offset K is adjusted as: K = K+28.<br>
[00106]9) Compute the vector dot product i = zpT, where/&gt; = (1, 2, 4, 8, 16, 32, 64, 128). [00107] 10)Find the index increment/ related to the codevector y in Table 7 from i.<br>
Page 23 of 52<br><br>
[00108] 1 l)Compute the index k of the codevector y: k = K +j, and then stop.<br>
[00109]The following steps may be taken in the decoding procedure of the lower rate quantizer:<br>
[00110] 1) Find the codevector y in Table 3 from the received index k.<br>
[00111]2) Rescale the codevector y by the scaling factor a=1.5: yj=y I a.<br>
[00112]3) Add the same offset a used in Step 1) of the encoding procedure to the rescaled codevectoryr. y2=yi+ a, and then stop.<br>
Page 24 of 52<br><br><br>
Page 25 of 52<br><br><br>
Page 26 of 52<br><br><br>
Huffman coding of quantization indices<br>
[00113]The MLT coefficients are not uniformly distributed. It has been observed that the 8-dimensional coefficient vectors have a high concentration of probability around the origin. Therefore, the codebooks of lattice vector quantizers are not optimal for non-uniform sources.<br>
Page 27 of 52<br><br>
[00114] To improve the performance of the higher rate quantizer presented above, a Huffman coder may be used to code the indices of quantization. Due to the low-rate (
[00115]For a given rate R bits/dimension (1 
[00116] By using Huffman coding, the quantization indices are coded with a variable number of bits. For the given rate R, the more frequent indices require bits less than R and the less frequent indices may need bits more than R. Therefore, the code length is verified after Huffman coding and three flag bits are used in a frame to indicate whether Huffman coding is applied to each of the first three groups of sub-frames. The flag bits are transmitted as the side information to the decoder. For a group of sub-frames, the quantization indices are Hoffman coded only if the number of bits required by using Huffman coding is not greater than the total number of bits available to this group. In this case, the Huffman-coding flag is set to one.<br>
[00117]For a percussion-type signal, however, Huffman coding is no longer applied to quantization indices. The quantization indices are directly transmitted to the decoder.<br>
[00118] At the decoder, the Huffman-coding flags are checked. If the Huffman-coding flag of a group of sub-frames is set, the coded data for this group is Huffman decoded to obtain the quantization indices. Otherwise, the coded data is directly used as the quantization indices.<br>
TABLE 8<br>
Huffman codes for the quantization indices of HRQ with the rate of 2 bits/dimension<br>
Inde	Huffman code	Code value	Number of bits<br>
0	0	0	•j<br>
Page 28 of 52<br><br>
1<br>
110	6	3<br>
2	 111	7	3<br>
3	10	2	2<br>
TABLE 9<br>
Huffman codes for the quantization indices of HRQ with the rate of 3 bits/dimension<br>
Inde<br>
X	Huffman code	Code value	Number of bits<br>
0	00	0	2<br>
1	01	1	2<br>
2	1001	9	4<br>
3	10000	16	5<br>
4	10001	17	5<br>
5	1010	10	 4<br>
6	1011	11	4<br>
7	11	3	2<br>
TABLE 10<br>
Huffman codes for the quantization indices of HRQ with the rate of 4 bits/dimension<br>
Inde<br>
X	Huffman code	Code value	Number of bits<br>
0	00	0	2<br>
1	110	6	3<br>
2	0110	6	4<br>
3	0111	7	4<br>
A	10100	20	5<br>
	10101	21	5<br>
6	10110	22	5<br>
	101110	46	6<br>
8	101111	47	6<br>
	10000	16	5<br>
10	10001	17	5<br>
11	10010	18	5<br>
	10011	19	5<br>
13	0100	4	4<br>
14	0101	5	4<br>
15	111	7	3<br>
TABLE 11<br>
Huffman codes for the quantization indices of HRQ with the rate of 5 bits/dimension<br>
Inde ' Huffman code<br>
X	Code value	Number of bits<br>
Page 29 of 52<br><br><br>
Bit stream generated by the encoder<br>
[00119]Fig. 3A illustrates an example of an encoded bit stream according to an embodiment of the present disclosure. In one embodiment, the total number of bits in a frame is 640, 960, and 1280 bits, corresponding to the bit rates of 32 kbps, 48 kbps, and 64 kbps, respectively. The bit stream transmitted on the channel may be comprised of 3 parts: flags bits, norm code bits, and code bits for MLT coefficients. The flag bits may be transmitted first, the norm code bits next, and the code bits for MLT coefficients last.<br>
Page 30 of 52<br><br>
[00120]The flag section 302 contains a number of flag bits used for various purposes. In this example, the flag bits may comprise a mode flag that is used to indicate the mode for the current frame and transmitted to the decoder. For example, the mode flag may be used to indicate a percussion-type signal mode. As another example, the mode flag may be used to indicate speech and general music. The flags may also comprise a flag used to indicate how many sub-frames to be coded at 32 kbps and transmitted as side information to the decoder. The next part has a fixed length. In this example, it has four bits. The four bits are used to indicate whether Huffman coding is used for norms, group 1 coefficients indices, group 2 coefficients indices, and group 3 coefficients indices. Group 4 typically does not use Huffman coding because typically, group 4 coefficients have very few bits and Huffman coding typically does not reduce bit requirement.<br>
[00121]The bit stream may further comprise the norm code bits 304 of all the sub-frames. If Huffman coding is not used, then the length is fixed. In the example, the fixed length is 170 bits (34 norms x 5 bits per norm). If Huffman coding is used, then the length is determined by Huffman coding.<br>
[00122]The bit stream may further comprise the encoded coefficient indices for groups 1-4 306. The amount of bits allocated to each group or each coefficient can vary. They are determined by the bit allocation according to the norm of each sub-frame. The indices for groups 1-3 may also depend on whether Huffman coding is used or not. The indices for group 4 typically do not use Huffman coding. But the amount of bits allocated to group 4 may still vary because the number of bits for the other parts may vary. When other groups use fewer bits due to Huffman coding, those saved bits may be used for group 4.<br>
[00123]Fig. 3B depicts an exemplary structure for the flag bits 302 in accordance with one embodiment of the disclosure. In this example, the flag bits 302 may comprise a Flag M 308 to indicate the mode for the current frame and transmitted to the decoder. In a percussion-type signal mode, only the mode flag 308 may be transmitted, and the other flags need not be transmitted. In the speech and general music mode, all of the flags may be transmitted. The flag bits 302 may further comprise a Flag L 310 to indicate how many sub-frames are to be coded at a low bit-rate, e.g., 32 kbps. The flag bits 302 may further comprise a Flag N 312 to indicate whether the norms are Huffman coded. The<br>
Page 31 of 52<br><br>
flag bits 302 may further comprise Flags Gl through G3 to indicate whether each group of MLT coefficients (in this example, Group 1 through Group 3) are Huffman coded.<br>
[00124]Fig. 3C depicts an exemplary structure for the combined set of transform coefficients which are quantized (and possibly Huffman coded) with the coefficient code bits 306 in accordance with one embodiment of the disclosure. In this example, the boundary frequency is approximately 7 kHz. The long frame transform coefficients 320 represent frequencies up to approximately 7 kHz. The short frame transform coefficients 322 represent frequencies from approximately 6.8 kHz to approximately 22 kHz. The long frame transform and the short frame transform may overlap at their boundaries to makes the transition smoother.<br>
[00125]Fig. 3D depicts another exemplary structure for the combined set of transform coefficients which are quantized (and possibly Huffman coded) with the coefficient code bits 306 in accordance with another embodiment of the disclosure. In this example, the boundary frequency is approximately 800 Hz. The long frame transform coefficients 324 represent frequencies up to approximately 800 Hz. The short frame transform coefficients 326 represent frequencies from approximately 600 Hz to approximately 22 kHz. The long frame transform and the short frame transform may overlap at their boundaries to makes the transition smoother.<br>
Encoder processes<br>
[00126]Reference is now made to Fig. 4 which depicts an exemplary process flow diagram for an overall encoding process in accordance with one embodiment of the present disclosure. The encoding process begins at step 400. In step 410, two MLT transforms may be applied to the audio signal so that the audio samples in time are converted to frames of transform coefficients. The longer frame transform coefficients are used for signals of lower frequencies (e.g., approximately 20 Hz to approximately 7 kHz) and the shorter frame transform coefficients are used for signals of higher frequencies (e.g., approximately 6.8 kHz to approximately 22 kHz).<br>
[00127]The MLT coefficients may be grouped into 4 groups with 34 sub-frames. In step 420, the norm for each sub-frame is calculated and quantized with a fixed number of bits. Each<br>
Page 32 of 52<br><br>
sub-frame is then normalized by its quantized norm and the normalized transform coefficients are obtained. Huffman coding may be tried for all quantized norms. If the number of bits used is less than the total number of bits allocated for norm quantization, then Huffman coding may be used. The Huffman flag (Flag N) is set, and the extra bits are stored in a bits remainder. If the number of bits used is not less, then Huffman coding is not used, and the Huffman flag is cleared. The remainder is the total number of bits, minus the 6 flag bits, and the bits used by norms.<br>
[00128]In step 430, an adaptive bit allocation scheme may be used to allocate the available bits in a frame among the sub-frames. First, all bits of each sub-frames are set to zero (there are a total of 34 sub-frames), and the bits remainder is set to the total bits available. Next, the largest norm of a sub-frame is found, and 1 bit is allocated for each coefficient in the sub-frame, at a total of M; then let its norm = norm/2, Remainder = Remainder - M. For a sub-frame having 16 coefficients, then M=16, and for a sub-frame having 24 or 32 coefficients, then M is 24 or 32, respectively. If the remainder is less than 16, then stop allocation; else, repeat the last step. When bit allocation is done, the remainder is less than 16. Some sub-frames are allocated several bits per coefficient; others may have zero bits.<br>
[00129]In decision 440, if the bit(s) per coefficient is greater than 1, then the quantization may be done by Lattice Ds, higher rate quantization in step 450; otherwise, quantization may be done by lower rate quantization using Lattice RE$ in step 460. The bits allocated to each of the groups are now known.<br>
[00130]In step 470, Huffman coding may be optionally tried for the quantized coefficients for each sub-frame. The total of the bits needed for each group of the first three groups is added. If the Huffman coded bits are less than the allocated bits, then Huffman coding may be used for that group, and the Huffman code flag for that group is set; and the saved bits are allocated to the remainder bits. If the Huffman coded bits are not less than the fixed allocated bits, then Huffman coding is not used, and Huffman code flag is cleared.<br>
Page 33 of 52<br><br>
[00131]The remainder bits are allocated to the next group according to the bit allocation scheme above. All bits are allocated and the process ends at 480. The bit stream is formed and can be transmitted.<br>
[00132]Various modifications may be made to the exemplary encoder process described in connection with Fig. 4. In accordance with some embodiments of the present disclosure, fast lattice vector quantization, including a higher rate quantization and a lower rate quantization, may be optional; for example, the dual transforms may be used in conjunction with any type of quantization technique, such as scalar quantization, lattice vector quantization, etc. In accordance with other embodiments of the present disclosure, there may be more than two transforms. In addition, and as explained above, any type of transform, such as MLT, FFT, DCT, etc., may be used.<br>
Decoder processes<br>
[00133]The decoder processes the encoded bit stream essentially in the reverse order of the encoder. The total bits are known and agreed upon. At the decoder, the data integrity and encoding protocol may be checked to ensure that the appropriated decoder is used for the bit stream. Once the decoder verifies that the bit stream is encoded with the encoder according the example above, then it decodes the bit stream, as depicted in Fig. 5 and described as follows:<br>
[00134]Process flow begins at step 500 with receiving the encoded bit stream as input to the decoder. In step 510, the flag bits are checked. For example, whether the norms or the coefficient indices of the first three groups are Huffman coded is determined.<br>
[00135]If the norm Huffman code flag is set, then the quantization indices for norms are Huffman decoded in step 520. After all norms are decoded, the total bits used by the norms are then known. The number of bits used to code coefficient indices, which is the remaining bits, is also known.<br>
[00136]If the Huffman code flag is not set, then the fixed rate is used in step 530. The number of bits used by the norms is known. The total number of bits for the coefficient indices is known.<br>
Page 34 of 52<br><br>
[00137]The quantized norms are obtained by de-quantizing the quantization indices in step 530. From the quantized norms, adaptive bit allocation 540, which is the same operation of Box 430 in Fig. 4, may be performed to determine which sub-frame has how many bits. If the Huffman flag is set for a group, the received data is Huffman code and has to be decoded for each sub-frame within this group. If the Huffman flag is not set, the received data is the quantization indices of coefficients.<br>
[00138]From the quantized norms and quantization indices, the MLT coefficients can be reconstructed in step 560. For sub-frames that are not assigned any bit, their MLT coefficients can be filled with zeros or generated with random numbers. The low frequency coefficients of the one long transform and the high frequency coefficients of four short transforms can be recovered. The high frequencies in the long transform may be filled with zeros; similarly, the low frequencies of the four short transforms may be filled with zeros. Along the boundary of high frequency and low frequency, some form of smooth transition may be used. For example, a simplest smooth function is a gradual slope over a few coefficients near the boundary.<br>
[00139]Once all the coefficients of the long transform and the four short transforms are reconstructed, they can be inverse transformed into digital audio samples. In step 570, inverse transformation of the long transform and four short transforms from frequency domain to time domain is performed. For example, dual EVILTs may be applied to the reconstructed MLT coefficients. Now there are two digital audio signals, each covering the same 20 ms time frame.<br>
[00140]In step 580, the two time domain signals are combined to form a single audio signal. The signal can be converted to an analog signal and reproduced as sound.<br>
[00141]The methods of various embodiments of the present disclosure may be carried out by hardware, software, firmware, or a combination of any of the foregoing. For example, the methods may be carried out by an encoder or decoder or other processor in an audio system such as a teleconferencing system or a video conferencing system. In addition, the methods of various embodiments of the present disclosure may be applied to streaming audio, for example, via the Internet. Fig. 6 depicts an encoder in accordance with various<br>
Page 35 of 52<br><br>
embodiments of the present disclosure. Fig. 7 depicts a decoder in accordance with various embodiments of the present disclosure. The encoder and decoder may be separate in some embodiments or they may be combined into a codec in other embodiments.<br>
[00142]In the encoder of Fig. 6, an input audio signal which has digitally sampled may be fed into at least two transform modules 610 and 620 so that the audio samples in time can be converted to frames of transform coefficients. For ease of reference, transform modules 610 and 620 are referred to as MLT modules, although other types of transform modules may be used.<br>
[00143]In one embodiment, every 20 ms, the most recent 1920 audio samples may be fed into transform module 610, and every 5 ms, the most recent 480 audio samples may be fed into transform module 620. The longer frame transform module 610 may yield a set of approximately 960 coefficients, and the shorter frame transform module 620 may yield four sets of approximately 240 coefficients each. The longer frame transform coefficients may be used for signals of lower frequencies, and the shorter frame transform coefficients may be used for signals of higher frequencies. For example, in one embodiment, the longer frame transform coefficients represent frequencies between approximately 20 Hz to approximately 7 kHz, and the shorter frame transform coefficients represent frequencies between approximately 6.8 kHz to approximately 22 kHz.<br>
[00144]In another embodiment, a module 630 may optionally be provided to indicate presence of a percussion-type signal. If a percussion-type signal is detected, a mode flag indicating a percussion-type mode may be sent to a multiplexer 695 for transmission. If a percussion-type signal is detected, the boundary frequency may be adjusted to approximately 800 Hz. In such a case, the dual-transform coefficients are the combination of the long-transform coefficients representing frequencies of up to 800 Hz and the short-transform coefficients representing frequencies above 600 Hz. In other embodiments, the boundary frequency may be 7 kHz or anywhere between approximately 800 Hz and approximately 7 kHz.<br>
[00145]The longer frame transform coefficients and the shorter frame transform coefficients are combined by combiner module 640. The combined coefficients are applied to a norm quantization module 650 that calculates and quantizes the norm for each sub-frame. A<br>
Page 36 of 52<br><br>
coding module 670 is applied to the quantization indices for the norms. The coding module may optionally perform Huffman coding. The resulting norm code bits are fed to multiplexer 695. A Huffman code flag may also be fed to multiplexer 695 to indicate whether the norms are Huffman coded.<br>
[00146]The quantized norms from norm quantization module 650 and the combined MLT coefficients from combiner module 640 are fed to a normalization module 660 which normalizes the MLT coefficients. The quantized norms may also be fed to an adaptive bit allocation module 675 which allocates the available bits in a frame among the sub-frames. With the bit allocation completed, the normalized MLT coefficients may then be quantized sub-frame by sub-frame by lattice vector quantization module 680. If the bit(s) per coefficient is greater than 1, then the quantization may be done by a higher rate quantizer; otherwise, quantization may be done by a lower rate quantizer. If a percussion-type signal is detected, the maximum quantization rate may be set to 6 bits per coefficient. If a percussion-type signal is not detected, the maximum quantization rate may be set to 5 bits per coefficient.<br>
[00147]A Huffman coding module 685 may be optionally applied to the quantization indices for the MLT coefficients. For a percussion-type signal, however, Huffman coding module 685 is not applied to the quantization indices for the MLT coefficients. The resulting Huffman code bits are fed from Huffman coding module 685 to a comparison and data selection module 690. The comparison and data selection module 690 compares the quantization indices output from quantization module 680 to the Huffman code output from Huffman coding module 685. For each group of the first three groups of sub-frames, if the Huffman coded bits are less than the allocated bits, then the Huffman coded bits may be selected for that group, and the Huffman code flag for that group is set; and the saved bits are allocated to the remainder bits. If the Huffman coded bits are not less than the fixed allocated bits, then the quantization indices are selected for that group, and the Huffman code flag is cleared for that group. The selected MLT code bits are fed to multiplexer 695 along with any Huffman code flags. A bit stream is formed and can be transmitted.<br>
Page 37 of 52<br><br>
[00148]The decoder of Fig. 7 is operable to reconstruct the audio signal from the encoded bit stream. The encoded bit stream is provided to a demultiplexer 710 which demultiplexes the data into norm code bits, MLT code bits, and various flags, such as a mode flag, a flag used for the number of sub-frames coded at 32 kbit/s, a Huffman code flag for the norms, and a Huffman code flag for each group of MLT coefficients. For ease of reference, the designations MLT code bits and MLT coefficients are used in this example, although other types of transform modules may have been used.<br>
[00149]The norm code bits are fed into a decoding module 720 which decodes the quantization indices for the sub-frame norms. Huffman decoding may be applied if the Huffman code flag (Flag N) indicates Huffman coding was used to encode the norms. A de-quantization module 725 then de-quantizes the sub-frame norms. An adaptive bit allocation module 730 may be used to allocate the available bits in a frame among the sub-frames.<br>
[00150]The MLT code bits are fed from the demultiplexer 710 into a decoding module 735 which decodes the quantization indices for the MLT coefficients. Huffman decoding may be applied if any of the Huffman code flags indicates that Huffman coding was used to encode any groups of the MLT coefficients. If no Huffman code flags indicate that Huffman coding was used to encode any groups of the MLT coefficients, the quantization indices pass through to a de-quantization module 740. Thus, the decoded MLT code bits or the quantization indices for the MLT coefficients are fed into de-quantization module 740 which de-quantizes the MLT coefficients.<br>
[00151]From the quantized norms and quantization indices, the MLT coefficients can be reconstructed by reconstruction module 745. The MLT coefficients are separated by a separator module 750 into a long frame of MLT coefficients and four sets of short frame MLT coefficients. A long frame inverse transform module 760 is applied to the set of long frame MLT coefficients, and a short frame inverse transform module 770 is applied to the four sets of short frame MLT coefficients. The inverse transform modules 760 and 770 may comprise inverse modulated lapped transform (IMLT) modules. The resulting time domain signals are summed, resulting in an output audio signal which can be converted from digital to analog and reproduced as sound.<br>
Page 38 of 52<br><br>
[00152] Various embodiments of the present disclosure may find useful application in fields such as audio conferencing, video conferencing, and streaming media, including streaming music or speech. Reference is now made to Fig. 8 which depicts a block diagram of an exemplary conferencing system in accordance with one embodiment of the present disclosure. The system includes a local endpoint 810 operable to communicate with one or more remote endpoints 840 via a network 850. The communications may include the exchange of audio, video, and data. It will be appreciated by those of skill in the art that the video capability is optional, and the endpoint 810 may be a device for audio conferencing without video conferencing capability. For example, the endpoint 810 may comprise a speakerphone or other audio conferencing device. Likewise, each remote endpoint 840 may comprise an audio conferencing device or a video conferencing device.<br>
[00153]The local endpoint 810 comprises an audio codec 812 and an audio I/O interface 814. The audio codec 812 may comprise an encoder such as the encoder of Fig. 6. The audio codec may further comprise a decoder such as the decoder of Fig. 7. The audio I/O interface 814 may performs analog-to-digital and digital-to-analog conversion as well as other signal processing tasks in connection with processing audio information received from one or more microphones 816 or sent to one or more speakers 818. The one or more microphones 816 may comprise gated microphones with intelligent microphone mixing and dynamic noise reduction functions. In some embodiments, the one or more microphones 816 may be integral with the endpoint 810, or they may be separate from the endpoint 810, or a combination. Likewise, the one or more speakers 818 may be integral with the endpoint 810, or separate from the endpoint 810, or a combination. If they are separate from the endpoint 810, the microphones 816 and the speakers 818 may send and receive information via a wired connection or a wireless connection.<br>
[00154]The local endpoint 810 can acquire audio information (typically representative of speech and sounds of the local conferencing participant(s)) generated by the one or more microphones 816. The local endpoint 810 digitizes and processes the acquired audio information. The audio is encoded and transmitted to the one or more remote endpoints 840 via network interface 820.<br>
Page 39 of 52<br><br>
[00155]The endpoint 810 can receive audio information (typically representative of the speech and sounds of the remote conference participants)) from the remote conference endpoint (s) 840. The received audio information is received by the network interface 820. The received audio information is decoded, processed, converted to analog, and reproduced as audio via the one or more speakers 818.<br>
[00156]In some embodiments, the endpoint 810 may optionally include video capability. In such embodiments, the endpoint 810 may comprise a video codec 822, a video I/O interface 824, one or more video cameras 826, and one or more display devices 828. The one or more cameras 826 may be integral with the endpoint 810, or separate from the endpoint 810, or a combination. Likewise, the one or more display devices 828 may be integral with the endpoint 810, or separate from the endpoint 810, or a combination.<br>
[00157]In the video-capable embodiments, the endpoint 810 can acquire video information (typically representative of the images of the local conferencing participant(s)) generated by one or more cameras 826. The endpoint 810 processes the acquired video information, and transmits the processed information to the one or more remote endpoints 840 via the network interface 820. The video input/output interface converts and processes video information received from one or more cameras 826 and sent to one or more video monitors 828. The video codec 824 encodes and decodes video information.<br>
[00158]The endpoint 810 can also receive video information (typically representative of the images of the remote conference participant(s)) from the remote endpoint(s) 840. The received video information is processed by the endpoint 810 and the processed video information is directed to the one or more display devices 828. The endpoint 810 may also receive input from or direct output to other peripheral devices, such as a videocassette player/recorder, document camera or LCD projector, etc.<br>
[00159]The various components of endpoint 810 may be interconnected for communication by at least one bus 830. The components of endpoint 810 may also comprise a central processing unit (CPU) 832. The CPU 832 interprets and executes program instructions which may be loaded from a memory 834. The memory 834, which may variously<br>
Page 40 of 52<br><br>
include volatile RAM, non-volatile ROM, and/or storage devices such as magnetic disk drives or CD-ROMS, stores executable programs, data files, and other information.<br>
[00160]Additional components and features may be present in endpoint 810. For example, endpoint 810 may comprise a module for echo cancellation or reduction to allow for full-duplex operation.<br>
[00161]The one or more remote endpoints 840 may comprise similar components as described above with respect to local endpoint 810. The network 850 may comprise a PSTN (Public Switched Telephone Network), or an IP-based network.<br>
[00162]While illustrative embodiments of the invention have been illustrated and described, it will be appreciated that various changes can be made therein without departing from the spirit and scope of the invention. The invention has been explained with reference to exemplary embodiments. It will be evident to those skilled in the art that various modifications may be made thereto without departing from the broader spirit and scope of the invention. Further, although the invention has been described in the context of its implementation in particular environments and for particular applications, those skilled in the art will recognize that the present invention's usefulness is not limited thereto and that the invention can be beneficially utilized in any number of environments and implementations. The foregoing description and drawings are, accordingly, to be regarded in an illustrative rather than a restrictive sense.<br>
Page 41 of 52<br><br>
CLAIMS<br>
What is claimed is:<br>
1. A method of encoding an audio signal, the method comprising:<br>
transforming a frame of time domain samples of the audio signal to frequency domain,<br>
forming a long frame of transform coefficients; transforming n portions of the frame of time domain samples of the audio signal to<br>
frequency domain, forming n short frames of transform coefficients;<br>
wherein the frame of time domain samples has a first length (L);<br>
wherein each portion of the frame of time domain samples has a second length (S);<br>
wherein L = n x S; and<br>
wherein n is an integer; grouping a set of transform coefficients of the long frame of transform coefficients and a<br>
set of transform coefficients of the n short frames of transform coefficients to<br>
form a combined set of transform coefficients; quantizing the combined set of transform coefficients to form a set of quantization indices<br>
of the quantized combined set of transform coefficients; and coding the quantization indices of the quantized combined set of transform coefficients.<br>
2.	The method of claim 1, wherein the acts of transforming comprise applying a Modulated<br>
Lapped Transform (MLT).<br>
3.	The method of claim 1, wherein the act of sampling is at approximately 48 kHz.<br>
4.	The method of claim 1, wherein the combined set of transform coefficients comprises<br>
transform coefficients of the long frame at a first frequency bandwidth and transform<br>
coefficients of the n short frames at a second frequency bandwidth.<br>
5.	The method of claim 4, wherein the first frequency bandwidth and the second frequency<br>
bandwidth overlap.<br>
6.	The method of claim 4, wherein the first frequency bandwidth has an upper limit in the<br>
range of approximately 800 Hz to approximately 7 kHz.<br>
Page 42 of 52<br><br>
7.	The method of claim 4,<br>
wherein the first frequency bandwidth comprises audio frequencies up to approximately 7<br>
kHz; and wherein the second frequency bandwidth comprises audio frequencies in the range of<br>
approximately 6.8 kHz to approximately 22 kHz.<br>
8.	The method of claim 1, further comprising:<br>
detecting whether the audio signal comprises a percussion-type signal.<br>
9.	The method of claim 8, wherein the act of detecting comprises:<br>
determining whether an average gradient ramp of the long transform coefficients over a<br>
frequency bandwidth of up to approximately 10 kHz exceeds a predefined ramp<br>
threshold; determining whether a first transform coefficient of the long frame of transform<br>
coefficients is a maximum of the long frame of transform coefficients; and determining whether a zero-crossing rate of the transform coefficients of the long frame<br>
of transform coefficients is less than a predefined rate threshold.<br>
10.	The method of claim 8,<br>
wherein the combined set of coefficients comprises transform coefficients of the long<br>
frame at a first frequency bandwidth and transform coefficients of the n short<br>
frames at a second frequency bandwidth; wherein, if the percussion-type signal is detected, the first frequency bandwidth<br>
comprises audio frequencies up to approximately 800 Hz; and wherein, if the percussion-type signal is detected, the second frequency bandwidth<br>
comprises audio frequencies in the range of approximately 600 Hz to<br>
approximately 22 kHz.<br>
11.	The method of claim 1, wherein the act of coding comprises Huffman coding.<br>
12.	The method of claim 1, further comprising:<br>
grouping the combined set of coefficients into a plurality of groups, wherein each group contains a plurality of sub-frames, and wherein each sub-frame contains a certain number of coefficients;<br>
Page 43 of 52<br><br>
determining a norm for each of the sub-frames based on the sub-frame's rms;<br>
quantizing the rms for each sub-frame;<br>
normalizing the coefficients of each sub-frame by dividing each coefficient within the<br>
sub-frame by the quantized rms of the sub-frame; quantizing the coefficients of each sub-frame; maintaining a Huffman coding flag for each group of sub-frames; maintaining a fixed number of bits for coding each group; calculating a number of bits necessary for using Huffman coding for each group; setting the Huffman flag and using Huffman coding if the number of bits necessary for<br>
using Huffman coding is less than the fixed number of bits for that group; and clearing the Huffman flag and using fixed number of bit coding if the number of bits<br>
necessary for using Huffman coding is not less than the fixed number of bits for<br>
the sub-group.<br>
13.	The method of claim 1, further comprising:<br>
grouping the combined set of coefficients into a plurality of groups, wherein each group<br>
contains a plurality of sub-frames, and wherein each sub-frame contains a certain<br>
number of coefficients;<br>
determining a norm for each of the sub-frames based on the sub-frame's rms; quantizing the rms for each sub-frame to form a quantization index for each norm; and Huffman coding the quantization index for each norm if a total number of bits used for<br>
Huffman coding is less than a total number of bits allocated for norm<br>
quantization.<br>
14.	The method of claim 1, further comprising:<br>
grouping the combined set of coefficients into a plurality of groups, wherein each group contains a plurality of sub-frames, and wherein each sub-frame contains a certain number of coefficients;<br>
determining a norm for each of the sub-frames based on the sub-frame's rms;<br>
quantizing the rms for each sub-frame; and<br>
dynamically allocating available bits to each sub-frame based on the quantized rms of the sub-frame.<br>
Page 44 of 52<br><br>
15.	A computer-readable medium having embodied thereon a program, the program being<br>
executable by a machine to perform the method in claim 1.<br>
16.	A method of decoding an encoded bit stream representative of an audio signal, the<br>
method comprising:<br>
decoding a portion of the encoded bit stream to form quantization indices for a plurality<br>
of groups of transform coefficients; de-quantizing the quantization indices for the plurality of groups of transform<br>
coefficients; separating the transform coefficients into a set of long frame coefficients and n sets of<br>
short frame coefficients; converting the set of long frame coefficients from frequency domain to time domain to<br>
form a long time domain signal; converting the n sets of short frame coefficients from frequency domain to time domain<br>
to form a series of n short time domain signals;<br>
wherein the long time domain signal has a first length (L);<br>
wherein each short time domain signal has a second length (S);<br>
whereinL = nxS; and<br>
wherein n is an integer; and combining the long time domain signal and the series of n short time domain signals to<br>
form the audio signal.<br>
17.	The method of claim 16,<br>
wherein the long frame coefficients are within a first frequency bandwidth; and wherein the short frame coefficients are within a second frequency bandwidth.<br>
18.	The method of claim 17, wherein the first frequency bandwidth has an upper limit in the<br>
range of approximately 800 Hz to approximately 7 kHz.<br>
19.	The method of claim 17,<br>
wherein the first frequency bandwidth comprises audio frequencies up to approximately 7 kHz; and<br>
Page 45 of 52<br><br>
wherein the second frequency bandwidth comprises audio frequencies in the range of approximately 6.8 kHz to approximately 22 kHz.<br>
20.	The method of claim 17,<br>
wherein the first frequency bandwidth comprises audio frequencies up to approximately<br>
800 Hz; and wherein the second frequency bandwidth comprises audio frequencies in the range of<br>
approximately 600 Hz to approximately 22 kHz.<br>
21.	The method of claim 16, further comprising:<br>
decoding a second portion of the encoded bit stream to form a quantization index for a<br>
norm of each sub-frame; and de-quantizing the quantization index for each sub-frame.<br>
22.	The method of claim 21, further comprising:<br>
dynamically allocating available bits to each sub-frame according to the quantized norm of the sub-frame;<br>
23.	The method of claim 21, further comprising:<br>
determining a number of bits to allocate to the norms, if the encoded bit stream contains<br>
an indicator that Huffman coding was used to code the norms; and Huffman decoding the norms.<br>
24.	The method of claim 16, further comprising:<br>
determining a number of bits to allocate to a particular group of sub-frames, if the encoded bit stream contains an indicator that Huffman coding was used to code the particular group of sub-frames; and<br>
Huffman decoding the particular group of sub-frames of coefficients.<br>
25.	A computer-readable medium having embodied thereon a program, the program being<br>
executable by a machine to perform the method in claim 16.<br>
26.	A 22 kHz audio codec, comprising:<br>
an encoder, comprising:<br>
Page 46 of 52<br><br>
a first transform module operable to transform a frame of time domain samples of<br>
an audio signal to frequency domain, forming a long frame of transform<br>
coefficients; a second transform module operable to transform n portions of the frame of time<br>
domain samples of the audio signal to frequency domain, forming n short<br>
frames of transform coefficients;<br>
wherein the frame of time domain samples has a first length (L);<br>
wherein each portion of the frame of time domain samples has a second length (S);<br>
wherein L = nxS; and<br>
wherein n is an integer; a combiner module operable to combine a set of transform coefficients of the long<br>
frame of transform coefficients and a set of transform coefficients of the n<br>
short frames of transform coefficients, forming a combined set of<br>
transform coefficients; a quantizer module operable to quantize the combined set of transform<br>
coefficients to form a set of quantization indices of the quantized<br>
combined set of transform coefficients; and a coding module operable to code the quantization indices of the quantized<br>
combined set of transform coefficients; and a decoder, comprising:<br>
a decoding module operable to decode a portion of an encoded bit stream, forming<br>
quantization indices for a plurality of groups of transform coefficients; a de-quantization module operable to de-quantize the quantization indices for the<br>
plurality of groups of transform coefficients; a separator module operable to separate the transform coefficients into a set of<br>
long frame coefficients and n-sets of short frame coefficients; a first inverse transform module operable to convert the set of long frame<br>
coefficients from frequency domain to time domain, forming a long time<br>
domain signal;<br>
Page 47 of 52<br><br>
a second inverse transform module operable to convert the n sets of short frame coefficients from frequency domain to time domain, forming a series of n short time domain signals; and<br>
a summing module for combining the long time domain signal and the series of n short time domain signals.<br>
27.	The codec of claim 26, wherein the combined set of transform coefficients comprises<br>
transform coefficients of the long frame at a first frequency bandwidth and transform<br>
coefficients of the n short frames at a second frequency bandwidth.<br>
28.	The codec of claim 27, wherein the first frequency bandwidth has an upper limit in the<br>
range of approximately 800 Hz to approximately 7 kHz.<br>
29.	The codec of claim 27,<br>
wherein the first frequency bandwidth comprises audio frequencies up to approximately 7<br>
kHz; and wherein the second frequency bandwidth comprises audio frequencies in the range of<br>
approximately 6.8 kHz to approximately 22 kHz.<br>
30.	The codec of claim 27,<br>
wherein the first frequency bandwidth comprises audio frequencies up to approximately<br>
800 Hz; and wherein the second frequency bandwidth comprises audio frequencies in the range of<br>
approximately 600 Hz to approximately 22 kHz.<br>
31.	The codec of claim 26 further comprising:<br>
a module operable to detect whether the audio signal comprises a percussion-type signal, based on one or more characteristics of the long frame of transform coefficients.<br>
32.	The codec of claim 26,<br>
wherein the first transform module comprises a first Modulated Lapped Transform<br>
(MLT) module; and wherein the second transform module comprises a second MLT module.<br>
Page 48 of 52<br><br>
33.	The codec of claim 26, wherein the encoder further comprises:<br>
a norm quantizer module operable to quantize an amplitude envelope of each sub-frame;<br>
a norm coding module operable to code the quantization indices of the amplitude envelopes of the sub-frames; and<br>
an adaptive bit allocation module operable to allocate available bits to sub-frames of transform coefficients.<br>
34.	The codec of claim 26, wherein the decoder further comprises:<br>
a norm decoding module operable to decode a second portion of the encoded bit<br>
stream, forming a quantization index for each amplitude envelope of each<br>
of the sub-frames; a de-quantization module operable to de-quantize the quantization indices for the<br>
amplitude envelopes of the sub-frames; and an adaptive bit allocation module operable to allocate available bits to sub-frames<br>
of transform coefficients.<br>
35.	An endpoint comprising:<br>
an audio input/output interface;<br>
a microphone communicably coupled to the audio input/output interface; a speaker communicably coupled to the audio input/output interface; and a 22 kHz audio codec communicably coupled to the audio input/output interface; wherein the 22 kHz audio codec comprises: an encoder, comprising:<br>
a first transform module operable to transform a frame of time domain samples of an audio signal to frequency domain, forming a long frame of transform coefficients;<br>
a second transform module operable to transform n portions of the frame of time domain samples of the audio signal to frequency domain, forming n short frames of transform coefficients; wherein the frame of time domain samples has a first length (L);<br>
Page 49 of 52<br><br>
wherein each portion of the frame of time domain samples has a second length (S);<br>
wherein L = n x S; and<br>
wherein n is an integer; a combiner module operable to combine a set of transform coefficients of<br>
the long frame of transform coefficients and a set of transform<br>
coefficients of the n short frames of transform coefficients, forming<br>
a combined set of transform coefficients; a quantizer module operable to quantize the combined set of transform<br>
coefficients to form a set of quantization indices of the quantized<br>
combined set of transform coefficients; and a coding module operable to code the quantization indices of the quantized<br>
combined set of transform coefficients; and a decoder, comprising:<br>
a decoding module operable to decode a portion of an encoded bit stream,<br>
forming quantization indices for a plurality of groups of transform<br>
coefficients; a de-quantization module operable to de-quantize the quantization indices<br>
for the plurality of groups of transform coefficients; a separator module operable to separate the transform coefficients into a<br>
set of long frame coefficients and n sets of short frame coefficients; a first inverse transform module operable to convert the set of long frame<br>
coefficients from frequency domain to time domain, forming a<br>
long time domain signal; a second inverse transform module operable to convert the n sets of short<br>
frame coefficients from frequency domain to time domain, forming<br>
a series of n short time domain signals; and a summing module for combining the long time domain signal and the<br>
series of n short time domain signals.<br>
36. The endpoint of claim 35 further comprising:<br>
a bus communicably coupled to the audio input/output interface;<br>
Page 50 of 52<br><br>
a video input/output interface communicably coupled to the bus;<br>
a camera communicably coupled to the video input/output interface; and<br>
a display device communicably coupled to the video input/output interface.<br>
37. The endpoint of claim 35, wherein the encoder further comprises:<br>
a norm quantizer module operable to quantize an amplitude envelope of each sub-frame;<br>
a norm coding module operable to code the quantization indices of the amplitude envelopes of the sub-frames; and<br>
an adaptive bit allocation module operable to allocate available bits to sub-frames of transform coefficients.<br>
37. The endpoint of claim 35, wherein the decoder further comprises:<br>
a norm decoding module operable to decode a second portion of the encoded bit stream, forming a quantization index for each amplitude envelope of each of the sub-frames;<br>
a de-quantization module operable to de-quantize the quantization indices for the amplitude envelopes of the sub-frames; and<br><br>
an adaptive bit allocation module operable to allocate available bits to sub-<br>
frames of transform coefficients.	A<br>
Dated this 4th day of October 2007<br>
Page 51 of 52<br><br>
Methods, devices, and systems for coding and decoding audio are disclosed. At least two transforms are applied on an audio signal, each with different transform periods for better resolutions at both low and high frequencies. The transform coefficients are selected and combined such that the data rate remains similar as a single transform. The transform coefficients may be coded with a fast lattice vector quantizer. The quantizer has a high rate quantizer and a low rate quantizer. The high rate quantizer includes a scheme to truncate the lattice. The low rate quantizer includes a table based searching method. The low rate quantizer may also include a table based indexing scheme. The high rate quantizer may further include Huffman coding for the quantization indices of transform coefficients to improve the quantizing/coding efficiency.</xxi.></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=qorB0YrxCLceNl0J2W3OMg==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==" target="_blank" style="word-wrap:break-word;">http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=qorB0YrxCLceNl0J2W3OMg==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==</a></p>
		<br>
		<div class="pull-left">
			<a href="268541-an-intraluminal-prosthetic-device-with-stent-having-twist-cancellation-geometry.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="268543-full-point-width-cutting-blades.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>268542</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>1369/KOL/2007</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>36/2015</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>04-Sep-2015</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>02-Sep-2015</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>04-Oct-2007</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>POLYCOM INC</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>4750 WILLOW ROAD, PLEASANTON CALIFORNIA</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>CHU PETER</td>
											<td>7 HADLEY ROAD,, LEXINGTON, MASSACHUSETTS 02420</td>
										</tr>
										<tr>
											<td>2</td>
											<td>XIE MINJIE</td>
											<td>21 WILLIAM STREET,, NEWTON, MASSACHUSETTS 02465</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>G10L19/00</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>N/A</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td></td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>11/550629</td>
									<td>2006-10-18</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/268542-dual-transform-coding-of-audio-signals by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 07:35:47 GMT -->
</html>
