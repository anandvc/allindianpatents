<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/278308-method-for-controlling-a-power-actuators-in-a-hybrid-powertrain-system by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 04 Apr 2024 22:34:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 278308:METHOD FOR CONTROLLING A POWER ACTUATORS IN A HYBRID POWERTRAIN SYSTEM</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">METHOD FOR CONTROLLING A POWER ACTUATORS IN A HYBRID POWERTRAIN SYSTEM</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>A method for controlling a powertrain system includes controlling a first power actuator based upon a set of power constraints for the first power actuator. The method further includes controlling a second power actuator based upon the set of power constraints for the second power actuator.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>METHOD FOR CONTROLLING POWER ACTUATORS IN A HYBRID POWERTRAIN SYSTEM<br>
CROSS REFERENCE TO RELATED APPLICATION<br>
[0001] This application claims the benefit of U.S. Provisional Application<br>
No. 60/985,250 filed on 11/04/2007 which is hereby incorporated herein by<br>
reference.<br>
TECHNICAL FIELD<br>
[0002] This disclosure is related to managing electric power within<br>
powertrain systems.<br>
BACKGROUND<br>
[0003] The statements in this section merely provide background<br>
information related to the present disclosure and may not constitute prior art.<br>
[0004] Known powertrain architectures include torque-generative devices,<br>
including internal combustion engines and electric machines, which transmit<br>
torque through a transmission device to an output member. One exemplary<br>
powertrain includes a two-mode, compound-split, electro-mechanical<br>
transmission which utilizes an input member for receiving motive torque from<br>
a prime mover power source, preferably an internal combustion engine, and an<br>
output member. The output member can be operatively connected to a<br>
driveline for a motor vehicle for transmitting tractive torque thereto. Electric<br>
machines, operative as motors or generators, generate a torque input to the<br>
 <br>
transmission, independently of a torque input from the internal combustion<br>
engine. The electric machines may transform vehicle kinetic energy,<br>
transmitted through the vehicle driveline, to electrical energy that is storable in<br>
an electrical energy storage device. A control system monitors various inputs<br>
from the vehicle and the operator and provides operational control of the<br>
powertrain, including controlling transmission operating state and gear<br>
shifting, controlling the torque-generative devices, and regulating the electrical<br>
power interchange among the electrical energy storage device and the electric<br>
machines to manage outputs of the transmission, including torque and<br>
rotational speed.<br>
SUMMARY<br>
[0005] A powertrain system includes a plurality of power actuators, a<br>
transmission device and an energy storage device. The transmission device is<br>
operative to transfer power between the power actuators and an output<br>
member to generate an output torque. A method for controlling the powertrain<br>
system includes determining an operator request for power from the output<br>
member, determining a first set of electric power constraints for the energy<br>
storage device, and determining a set of power constraints for a first power<br>
actuator based upon the first set of electric power constraints for the energy<br>
storage device. A second set of electric power constraints for the energy<br>
storage device is determined and a set of power constraints for a second power<br>
actuator is determined based upon the second set of electric power constraints<br>
for the energy storage device. The first power actuator is controlled based<br>
upon the set of power constraints for the first power actuator, and the second<br>
 <br>
power actuator is controlled based upon the set of power constraints for the<br>
second power actuator.<br>
BRIEF DESCRIPTION OF THE DRAWINGS<br>
[0006] One or more embodiments will now be described, by way of<br>
example, with reference to the accompanying drawings, in which:<br>
[0007] Fig. 1 is a schematic diagram of an exemplary powertrain, in<br>
accordance with the present disclosure;<br>
[0008] Fig. 2 is a schematic diagram of an exemplary architecture for a<br>
control system and powertrain, in accordance with the present disclosure;<br>
[0009] Figs. 3 and 4 are schematic flow diagrams of a control system<br>
architecture for controlling and managing torque in a powertrain system, in<br>
accordance with the present disclosure; and<br>
[0010] Figs. 5 - 8 are flow diagrams of exemplary control schemes, in<br>
accordance with the present disclosure.<br>
DETAILED DESCRIPTION<br>
[0011] Referring now to the drawings, wherein the showings are for the<br>
purpose of illustrating certain exemplary embodiments only and not for the<br>
purpose of limiting the same, Figs. 1 and 2 depict an exemplary electro-<br>
mechanical hybrid powertrain. The exemplary electro-mechanical hybrid<br>
powertrain in accordance with the present disclosure is depicted in Fig. 1,<br>
comprising a two-mode, compound-split, electro-mechanical hybrid<br>
transmission 10 operatively connected to an engine 14 and first and second<br>
electric machines ('MG-A') 56 and ('MG-B') 72. The engine 14 and first and<br>
 <br>
second electric machines 56 and 72 each generate power which can be<br>
transferred to the transmission 10. The power generated by the engine 14 and<br>
the first and second electric machines 56 and 72 and transferred to the<br>
transmission 10 is described in terms of input and motor torques, referred to<br>
herein as TI, TA, and TB respectively, and speed, referred to herein as NI, NA,<br>
and NB, respectively.<br>
[0012] The exemplary engine 14 comprises a multi-cylinder internal<br>
combustion engine selectively operative in several states to transfer torque to<br>
the transmission 10 via an input shaft 12, and can be either a spark-ignition or<br>
a compression-ignition engine. The engine 14 includes a crankshaft (not<br>
shown) operatively coupled to the input shaft 12 of the transmission 10. A<br>
rotational speed sensor 11 monitors rotational speed of the input shaft 12.<br>
Power output from the engine 14, comprising rotational speed and engine<br>
torque, can differ from the input speed NI and the input torque TI to the<br>
transmission 10 due to placement of torque-consuming components on the<br>
input shaft 12 between the engine 14 and the transmission 10, e.g., a hydraulic<br>
pump (not shown) and/or a torque management device (not shown).<br>
[0013] The exemplary transmission 10 comprises three planetary-gear sets<br>
24, 26 and 28, and four selectively engageable torque-transferring devices, i.e.,<br>
clutches C1 70, C2 62, C3 73, and C4 75. As used herein, clutches refer to<br>
any type of friction torque transfer device including single or compound plate<br>
clutches or packs, band clutches, and brakes, for example. A hydraulic control<br>
circuit 42, preferably controlled by a transmission control module (hereafter<br>
'TCM') 17, is operative to control clutch states. Clutches C2 62 and C4 75<br>
preferably comprise hydraulically-applied rotating friction clutches. Clutches<br>
 <br>
C1 70 and C3 73 preferably comprise hydraulically-controlled stationary<br>
devices that can be selectively grounded to a transmission case 68. Each of<br>
the clutches C1 70, C2 62, C3 73, and C4 75 is preferably hydraulically<br>
applied, selectively receiving pressurized hydraulic fluid via the hydraulic<br>
control circuit 42.<br>
[0014] The first and second electric machines 56 and 72 preferably comprise<br>
three-phase AC machines, each including a stator (not shown) and a rotor (not<br>
shown), and respective resolvers 80 and 82. The motor stator for each<br>
machine is grounded to an outer portion of the transmission case 68, and<br>
includes a stator core with coiled electrical windings extending therefrom.<br>
The rotor for the first electric machine 56 is supported on a hub plate gear that<br>
is operatively attached to shaft 60 via the second planetary gear set 26. The<br>
rotor for the second electric machine 72 is fixedly attached to a sleeve shaft<br>
hub 66.<br>
[0015] Each of the resolvers 80 and 82 preferably comprises a variable<br>
reluctance device including a resolver stator (not shown) and a resolver rotor<br>
(not shown). The resolvers 80 and 82 are appropriately positioned and<br>
assembled on respective ones of the first and second electric machines 56 and<br>
72. Stators of respective ones of the resolvers 80 and 82 are operatively<br>
connected to one of the stators for the first and second electric machines 56<br>
and 72. The resolver rotors are operatively connected to the rotor for the<br>
corresponding first and second electric machines 56 and 72. Each of the<br>
resolvers 80 and 82 is signally and operatively connected to a transmission<br>
power inverter control module (hereafter 'TPIM') 19, and each senses and<br>
monitors rotational position of the resolver rotor relative to the resolver stator,<br>
 <br>
thus monitoring rotational position of respective ones of first and second<br>
electric machines 56 and 72. Additionally, the signals output from the<br>
resolvers 80 and 82 are interpreted to provide the rotational speeds for first<br>
and second electric machines 56 and 72, i.e., NAand NB, respectively.<br>
[0016] The transmission 10 includes an output member 64, e.g. a shaft,<br>
which is operably connected to a driveline 90 for a vehicle (not shown), to<br>
provide output power to the driveline 90 that is transferred to vehicle wheels<br>
93, one of which is shown in Fig. 1. The output power at the output member<br>
64 is characterized in terms of an output rotational speed NO and an output<br>
torque TO. A transmission output speed sensor 84 monitors rotational speed<br>
and rotational direction of the output member 64. Each of the vehicle wheels<br>
93 is preferably equipped with a sensor 94 adapted to monitor wheel speed,<br>
the output of which is monitored by a control module of a distributed control<br>
module system described with respect to Fig. 2, to determine vehicle speed,<br>
and absolute and relative wheel speeds for braking control, traction control,<br>
and vehicle acceleration management.<br>
[0017] The input torque from the engine 14 and the motor torques from the<br>
first and second electric machines 56 and 72 (TI, TA, and TB respectively) are<br>
generated as a result of energy conversion from fuel or electrical potential<br>
stored in an electrical energy storage device (hereafter 'ESD') 74. The ESD<br>
74 is high voltage DC-coupled to the TPIM 19 via DC transfer conductors 27.<br>
The transfer conductors 27 include a contactor switch 38. When the contactor<br>
switch 38 is closed, under normal operation, electric current can flow between<br>
the ESD 74 and the TPIM 19. When the contactor switch 38 is opened electric<br>
current flow between the ESD 74 and the TPIM 19 is interrupted. The TPIM<br>
 <br>
19 transmits electrical power to and from the first electric machine 56 by<br>
transfer conductors 29, and the TPIM 19 similarly transmits electrical power<br>
to and from the second electric machine 72 by transfer conductors 31 to meet<br>
the torque commands for the first and second electric machines 56 and 72 in<br>
response to the motor torques TA and TB. Electrical current is transmitted to<br>
and from the ESD 74 in accordance with whether the ESD 74 is being charged<br>
or discharged.<br>
[0018] The TPIM 19 includes the pair of power inverters (not shown) and<br>
respective motor control modules (not shown) configured to receive the torque<br>
commands and control inverter states therefrom for providing motor drive or<br>
regeneration functionality to meet the commanded motor torques TAand TB.<br>
The power inverters comprise known complementary three-phase power<br>
electronics devices, and each includes a plurality of insulated gate bipolar<br>
transistors (not shown) for converting DC power from the ESD 74 to AC<br>
power for powering respective ones of the first and second electric machines<br>
56 and 72, by switching at high frequencies. The insulated gate bipolar<br>
transistors form a switch mode power supply configured to receive control<br>
commands. There is typically one pair of insulated gate bipolar transistors for<br>
each phase of each of the three-phase electric machines. States of the<br>
insulated gate bipolar transistors are controlled to provide motor drive<br>
mechanical power generation or electric power regeneration functionality.<br>
The three-phase inverters receive or supply DC electric power via DC transfer<br>
conductors 27 and transform it to or from three-phase AC power, which is<br>
conducted to or from the first and second electric machines 56 and 72 for<br>
 <br>
operation as motors or generators via transfer conductors 29 and 31<br>
respectively.<br>
[0019] Fig. 2 is a schematic block diagram of the distributed control module<br>
system. The elements described hereinafter comprise a subset of an overall<br>
vehicle control architecture, and provide coordinated system control of the<br>
exemplary hybrid powertrain described in Fig. 1. The distributed control<br>
module system synthesizes pertinent information and inputs, and executes<br>
algorithms to control various actuators to meet control objectives, including<br>
objectives related to fuel economy, emissions, performance, drivability, and<br>
protection of hardware, including batteries of ESD 74 and the first and second<br>
electric machines 56 and 72. The distributed control module system includes<br>
an engine control module (hereafter 'ECM') 23, the TCM 17, a battery pack<br>
control module (hereafter 'BPCM') 21, and the TPIM 19. A hybrid control<br>
module (hereafter 'HCP') 5 provides supervisory control and coordination of<br>
the ECM 23, the TCM 17, the BPCM 21, and the TPIM 19. A user interface<br>
('UI') 13 is operatively connected to a plurality of devices through which a<br>
vehicle operator controls or directs operation of the electro-mechanical hybrid<br>
powertrain. The devices include an accelerator pedal 113 ('AP'), an operator<br>
brake pedal 112 ('BP'), a transmission gear selector 114 ('PRNDL'), and a<br>
vehicle speed cruise control (not shown). The transmission gear selector 114<br>
may have a discrete number of operator-selectable positions, including the<br>
rotational direction of the output member 64 to enable one of a forward and a<br>
reverse direction.<br>
[0020] The aforementioned control modules communicate with other control<br>
modules, sensors, and actuators via a local area network (hereafter 'LAN') bus<br>
 <br>
6. The LAN bus 6 allows for structured communication of states of operating<br>
parameters and actuator command signals between the various control<br>
modules. The specific communication protocol utilized is application-specific.<br>
The LAN bus 6 and appropriate protocols provide for robust messaging and<br>
multi-control module interfacing between the aforementioned control<br>
modules, and other control modules providing functionality including e.g.,<br>
antilock braking, traction control, and vehicle stability. Multiple<br>
communications buses may be used to improve communications speed and<br>
provide some level of signal redundancy and integrity. Communication<br>
between individual control modules can also be effected using a direct link,<br>
e.g., a serial peripheral interface ('SPI') bus (not shown).<br>
[0021] The HCP 5 provides supervisory control of the hybrid powertrain,<br>
serving to coordinate operation of the ECM 23, TCM 17, TPIM 19, and<br>
BPCM 21. Based upon various input signals from the user interface 13 and<br>
the hybrid powertrain, including the ESD 74, the HCP 5 determines an<br>
operator torque request, an output torque command, an engine input torque<br>
command, clutch torque(s) for the applied torque-transfer clutches C1 70, C2<br>
62, C3 73, C4 75 of the transmission 10, and the motor torques TA and TB for<br>
the first and second electric machines 56 and 72. The TCM 17 is operatively<br>
connected to the hydraulic control circuit 42 and provides various functions<br>
including monitoring various pressure sensing devices (not shown) and<br>
generating and communicating control signals to various solenoids (not<br>
shown) thereby controlling pressure switches and control valves contained<br>
within the hydraulic control circuit 42.<br>
 <br>
[0022] The ECM 23 is operatively connected to the engine 14, and functions<br>
to acquire data from sensors and control actuators of the engine 14 over a<br>
plurality of discrete lines, shown for simplicity as an aggregate bi-directional<br>
interface cable 35. The ECM 23 receives the engine input torque command<br>
from the HCP 5. The ECM 23 determines the actual engine input torque, TI,<br>
provided to the transmission 10 at that point in time based upon monitored<br>
engine speed and load, which is communicated to the HCP 5. The ECM 23<br>
monitors input from the rotational speed sensor 11 to determine the engine<br>
input speed to the input shaft 12, which translates to the transmission input<br>
speed, NI. The ECM 23 monitors inputs from sensors (not shown) to<br>
determine states of other engine operating parameters including, e.g., a<br>
manifold pressure, engine coolant temperature, ambient air temperature, and<br>
ambient pressure. The engine load can be determined, for example, from the<br>
manifold pressure, or alternatively, from monitoring operator input to the<br>
accelerator pedal 113. The ECM 23 generates and communicates command<br>
signals to control engine actuators, including, e.g., fuel injectors, ignition<br>
modules, and throttle control modules, none of which are shown.<br>
[0023] The TCM 17 is operatively connected to the transmission 10 and<br>
monitors inputs from sensors (not shown) to determine states of transmission<br>
operating parameters. The TCM 17 generates and communicates command<br>
signals to control the transmission 10, including controlling the hydraulic<br>
circuit 42. Inputs from the TCM 17 to the HCP 5 include estimated clutch<br>
torques for each of the clutches, i.e., C1 70, C2 62, C3 73, and C4 75, and<br>
rotational output speed, NO, of the output member 64. Other actuators and<br>
sensors may be used to provide additional information from the TCM 17 to the<br>
 <br>
HCP 5 for control purposes. The TCM 17 monitors inputs from pressure<br>
switches (not shown) and selectively actuates pressure control solenoids (not<br>
shown) and shift solenoids (not shown) of the hydraulic circuit 42 to<br>
selectively actuate the various clutches C1 70, C2 62, C3 73, and C4 75 to<br>
achieve various transmission operating range states, as described hereinbelow.<br>
[0024] The BPCM 21 is signally connected to sensors (not shown) to<br>
monitor the ESD 74, including states of electrical current and voltage<br>
parameters, to provide information indicative of parametric states of the<br>
batteries of the ESD 74 to the HCP 5. The parametric states of the batteries<br>
preferably include battery state-of-charge, battery voltage, battery temperature,<br>
and available battery power, referred to as a range PBAT_MIN to PBAT_MAX.<br>
[0025] A brake control module (hereafter 'BrCM') 22 is operatively<br>
connected to friction brakes (not shown) on each of the vehicle wheels 93.<br>
The BrCM 22 monitors the operator input to the brake pedal 112 and<br>
generates control signals to control the friction brakes and sends a control<br>
signal to the HCP 5 to operate the first and second electric machines 56 and 72<br>
based thereon.<br>
[0026] Each of the control modules ECM 23, TCM 17, TPIM 19, BPCM 21,<br>
and BrCM 22 is preferably a general-purpose digital computer comprising a<br>
microprocessor or central processing unit, storage mediums comprising read<br>
only memory ('ROM'), random access memory ('RAM'), electrically<br>
programmable read only memory ('EPROM'), a high speed clock, analog to<br>
digital ('A/D') and digital to analog ('D/A') circuitry, and input/output<br>
circuitry and devices ('I/O') and appropriate signal conditioning and buffer<br>
circuitry. Each of the control modules has a set of control algorithms,<br>
 <br>
comprising resident program instructions and calibrations stored in one of the<br>
storage mediums and executed to provide the respective functions of each<br>
computer. Information transfer between the control modules is preferably<br>
accomplished using the LAN bus 6 and serial peripheral interface buses. The<br>
control algorithms are executed during preset loop cycles such that each<br>
algorithm is executed at least once each loop cycle. Algorithms stored in the<br>
non-volatile memory devices are executed by one of the central processing<br>
units to monitor inputs from the sensing devices and execute control and<br>
diagnostic routines to control operation of the actuators, using preset<br>
calibrations. Loop cycles are executed at regular intervals, for example each<br>
3.125, 6.25, 12.5, 25 and 100 milliseconds during ongoing operation of the<br>
hybrid powertrain. Alternatively, algorithms may be executed in response to<br>
the occurrence of an event.<br>
[0027] The exemplary hybrid powertrain selectively operates in one of<br>
several operating range states that can be described in terms of an engine state<br>
comprising one of an engine-on state ('ON') and an engine-off state ('OFF'),<br>
and a transmission state comprising a plurality of fixed gears and continuously<br>
variable operating modes, described with reference to Table 1, below.<br>
 <br>
 <br>
[0028] Each of the transmission operating range states is described in the<br>
table and indicates which of the specific clutches C1 70, C2 62, C3 73, and C4<br>
75 are applied for each of the operating range states. A first continuously<br>
variable mode, i.e., EVT Mode 1, or M1, is selected by applying clutch C1 70<br>
only in order to "ground" the outer gear member of the third planetary gear set<br>
28. The engine state can be one of ON ('M1_Eng_On') or OFF<br>
('M1_Eng_Off). A second continuously variable mode, i.e., EVT Mode 2, or<br>
M2, is selected by applying clutch C2 62 only to connect the shaft 60 to the<br>
carrier of the third planetary gear set 28. The engine state can be one of ON<br>
('M2_Eng_On') or OFF ('M2_Eng_Off). For purposes of this description,<br>
when the engine state is OFF, the engine input speed is equal to zero<br>
revolutions per minute ('RPM'), i.e., the engine crankshaft is not rotating. A<br>
fixed gear operation provides a fixed ratio operation of input-to-output speed<br>
of the transmission 10, i.e., NI/NO. A first fixed gear operation ('G1') is<br>
selected by applying clutches C1 70 and C4 75. A second fixed gear operation<br>
 <br>
('G2') is selected by applying clutches C1 70 and C2 62. A third fixed gear<br>
operation ('G3') is selected by applying clutches C2 62 and C4 75. A fourth<br>
fixed gear operation ('G4') is selected by applying clutches C2 62 and C3 73.<br>
The fixed ratio operation of input-to-output speed increases with increased<br>
fixed gear operation due to decreased gear ratios in the planetary gears 24, 26,<br>
and 28. The rotational speeds of the first and second electric machines 56 and<br>
72, NAand NB respectively, are dependent on internal rotation of the<br>
mechanism as defined by the clutching and are proportional to the input speed<br>
measured at the input shaft 12.<br>
[0029] In response to operator input via the accelerator pedal 113 and brake<br>
pedal 112 as captured by the user interface 13, the HCP 5 and one or more of<br>
the other control modules determine torque commands to control the torque<br>
generative devices comprising the engine 14 and first and second electric<br>
machines 56 and 72 to meet the operator torque request at the output member<br>
64 and transferred to the driveline 90. Based upon input signals from the user<br>
interface 13 and the hybrid powertrain including the ESD 74, the HCP 5<br>
determines the operator torque request, a commanded output torque from the<br>
transmission 10 to the driveline 90, an input torque from the engine 14, clutch<br>
torques for the torque-transfer clutches C1 70, C2 62, C3 73, C4 75 of the<br>
transmission 10; and the motor torques for the first and second electric<br>
machines 56 and 72, respectively, as is described hereinbelow.<br>
[0030] Final vehicle acceleration can be affected by other factors including,<br>
e.g., road load, road grade, and vehicle mass. The operating range state is<br>
determined for the transmission 10 based upon a variety of operating<br>
characteristics of the hybrid powertrain. This includes the operator torque<br>
 <br>
request communicated through the accelerator pedal 113 and brake pedal 112<br>
to the user interface 13 as previously described. The operating range state<br>
may be predicated on a hybrid powertrain torque demand caused by a<br>
command to operate the first and second electric machines 56 and 72 in an<br>
electrical energy generating mode or in a torque generating mode. The<br>
operating range state can be determined by an optimization algorithm or<br>
routine which determines optimum system efficiency based upon operator<br>
demand for power, battery state of charge, and energy efficiencies of the<br>
engine 14 and the first and second electric machines 56 and 72. The control<br>
system manages torque inputs from the engine 14 and the first and second<br>
electric machines 56 and 72 based upon an outcome of the executed<br>
optimization routine, and system efficiencies are optimized thereby, to manage<br>
fuel economy and battery charging. Furthermore, operation can be determined<br>
based upon a fault in a component or system. The HCP 5 monitors the torque-<br>
generative devices, and determines the power output from the transmission 10<br>
required in response to the desired output torque at output member 64 to meet<br>
the operator torque request. As should be apparent from the description<br>
above, the ESD 74 and the first and second electric machines 56 and 72 are<br>
electrically-operatively coupled for power flow therebetween. Furthermore,<br>
the engine 14, the first and second electric machines 56 and 72, and the<br>
electro-mechanical transmission 10 are mechanically-operatively coupled to<br>
transfer power therebetween to generate a power flow to the output member<br>
64.<br>
[0031] Figs. 3 and 4 show a control system architecture for controlling and<br>
managing torque and power flow in a powertrain system having multiple<br>
 <br>
torque generative devices, described hereinbelow with reference to the hybrid<br>
powertrain system shown in Figs. 1 and 2, and residing in the aforementioned<br>
control modules in the form of executable algorithms and calibrations. The<br>
control system architecture can be applied to any powertrain system having<br>
multiple torque generative devices, including, e.g., a hybrid powertrain system<br>
having a single electric machine, a hybrid powertrain system having multiple<br>
electric machines, and non-hybrid powertrain systems.<br>
[0032] The control system architecture of Figs. 3 and 4 depicts a flow of<br>
pertinent signals through the control modules. In operation, the operator<br>
inputs to the accelerator pedal 113 and the brake pedal 112 are monitored to<br>
determine the operator torque request ('Toreq'). Operation of the engine 14<br>
and the transmission 10 are monitored to determine the input speed ('Ni') and<br>
the output speed ('No'). A strategic optimization control scheme ('Strategic<br>
Control') 310 determines a preferred input speed ('Ni_Des') and transmission<br>
operating range state ('Hybrid Range State Des') based upon the output speed<br>
and the operator torque request, and optimized based upon other operating<br>
parameters of the hybrid powertrain, including battery power limits and<br>
response limits of the engine 14, the transmission 10, and the first and second<br>
electric machines 56 and 72. The strategic optimization control scheme 310 is<br>
preferably executed by the HCP 5 during each 100 ms loop cycle and each 25<br>
ms loop cycle.<br>
[0033] The outputs of the strategic optimization control scheme 310 are used<br>
in a shift execution and engine start/stop control scheme ('Shift Execution and<br>
Engine Start/Stop') 320 to command changes in the transmission operation<br>
('Transmission Commands') including changing the operating range state.<br>
 <br>
This includes commanding execution of a change in the operating range state<br>
if the preferred operating range state is different from the present operating<br>
range state by commanding changes in application of one or more of the<br>
clutches C1 70, C2 62, C3 73, and C4 75 and other transmission commands.<br>
The present operating range state ('Hybrid Range State Actual') and an input<br>
speed profile ('Ni_Prof') can be determined. The input speed profile is an<br>
estimate of an upcoming input speed and preferably comprises a scalar<br>
parametric value that is a targeted input speed for the forthcoming loop cycle.<br>
The engine operating commands and torque request are based upon the input<br>
speed profile during a transition in the operating range state of the<br>
transmission.<br>
[0034] A tactical control scheme ('Tactical Control and Operation') 330 is<br>
repeatedly executed during one of the control loop cycles to determine engine<br>
commands ('Engine Commands') for operating the engine, including a<br>
preferred input torque from the engine 14 to the transmission 10 based upon<br>
the output speed, the input speed, and the operator torque request and the<br>
present operating range state for the transmission. The engine commands also<br>
include engine states including one of an all-cylinder operating state and a<br>
cylinder deactivation operating state wherein a portion of the engine cylinders<br>
are deactivated and unfueled, and engine states including one of a fueled state<br>
and a fuel cutoff state.<br>
[0035] A clutch torque ('Tcl') for each clutch is estimated in the TCM 17,<br>
including the presently applied clutches and the non-applied clutches, and a<br>
present engine input torque ('Ti') reacting with the input member 12 is<br>
determined in the ECM 23. An output and motor torque determination<br>
 <br>
scheme ('Output and Motor Torque Determination') 340 is executed to<br>
determine the preferred output torque from the powertrain ('Tocmd'), which<br>
includes motor torque commands ('TA', 'TB') for controlling the first and<br>
second electric machines 56 and 72 in this embodiment. The preferred output<br>
torque is based upon the estimated clutch torque(s) for each of the clutches,<br>
the present input torque from the engine 14, the present operating range state,<br>
the input speed, the operator torque request, and the input speed profile. The<br>
first and second electric machines 56 and 72 are controlled through the TPIM<br>
19 to meet the preferred motor torque commands based upon the preferred<br>
output torque. The output and motor torque determination scheme 340<br>
includes algorithmic code which is regularly executed during the 6.25 ms and<br>
12.5 ms loop cycles to determine the preferred motor torque commands.<br>
[0036] Fig. 4 details the system for controlling and managing the output<br>
torque in the hybrid powertrain system, described with reference to the hybrid<br>
powertrain system of Figs. 1 and 2 and the control system architecture of Fig.<br>
3. The hybrid powertrain is controlled to transfer the output torque to the<br>
output member 64 and thence to the driveline 90 to generate tractive torque at<br>
wheel(s) 93 to forwardly propel the vehicle in response to the operator input to<br>
the accelerator pedal 113 when the operator selected position of the<br>
transmission gear selector 114 commands operation of the vehicle in the<br>
forward direction. Preferably, forwardly propelling the vehicle results in<br>
vehicle forward acceleration so long as the output torque is sufficient to<br>
overcome external loads on the vehicle, e.g., due to road grade, aerodynamic<br>
loads, and other loads.<br>
 <br>
[0037] In operation, operator inputs to the accelerator pedal 113 and to the<br>
brake pedal 112 are monitored to determine the operator torque request.<br>
Present speeds of the output member 64 and the input member 12, i.e., No and<br>
Ni, are determined. A present operating range state of the transmission 14 and<br>
present engine states are determined. Maximum and minimum electric power<br>
limits of the ESD 74 are determined.<br>
[0038] Blended brake torque includes a combination of the friction braking<br>
torque generated at the wheels 93 and the output torque generated at the output<br>
member 64 which reacts with the driveline 90 to decelerate the vehicle in<br>
response to the operator input to the brake pedal 112.<br>
[0039] The BrCM 22 commands the friction brakes on the wheels 93 to<br>
apply braking force and generates a command for the transmission 10 to create<br>
a change in output torque which reacts with the driveline 90 in response to a<br>
net operator input to the brake pedal 112 and the accelerator pedal 113.<br>
Preferably the applied braking force and the negative output torque can<br>
decelerate and stop the vehicle so long as they are sufficient to overcome<br>
vehicle kinetic power at wheel(s) 93. The negative output torque reacts with<br>
the driveline 90, thus transferring torque to the electro-mechanical<br>
transmission 10 and the engine 14. The negative output torque reacted<br>
through the electro-mechanical transmission 10 can be transferred to the first<br>
and second electric machines 56 and 72 to generate electric power for storage<br>
in the ESD 74.<br>
[0040] The operator inputs to the accelerator pedal 113 and the brake pedal<br>
112 together with torque intervention controls comprise individually<br>
determinable operator torque request inputs including an immediate<br>
 <br>
accelerator output torque request ('Output Torque Request Accel Immed'), a<br>
predicted accelerator output torque request ('Output Torque Request Accel<br>
Prdtd'), an immediate brake output torque request ('Output Torque Request<br>
Brake Immed'), a predicted brake output torque request ('Output Torque<br>
Request Brake Prdtd') and an axle torque response type ('Axle Torque<br>
Response Type'). As used herein, the term 'accelerator' refers to an operator<br>
request for forward propulsion preferably resulting in increasing vehicle speed<br>
over the present vehicle speed, when the operator selected position of the<br>
transmission gear selector 114 commands operation of the vehicle in the<br>
forward direction, and a similar reverse propulsion response when the vehicle<br>
operation is commanded in the reverse direction. The terms 'deceleration' and<br>
'brake' refer to an operator request preferably resulting in decreasing vehicle<br>
speed from the present vehicle speed. The immediate accelerator output<br>
torque request, the predicted accelerator output torque request, the immediate<br>
brake output torque request, the predicted brake output torque request, and the<br>
axle torque response type are individual inputs to the control system shown in<br>
Fig. 4.<br>
[0041] The immediate accelerator output torque request comprises an<br>
immediate torque request determined based upon the operator input to the<br>
accelerator pedal 113 and torque intervention controls. The control system<br>
controls the output torque from the hybrid powertrain system in response to<br>
the immediate accelerator output torque request to cause positive acceleration<br>
of the vehicle. The immediate brake output torque request comprises an<br>
immediate braking request determined based upon the operator input to the<br>
brake pedal 112 and torque intervention controls. The control system controls<br>
 <br>
the output torque from the hybrid powertrain system in response to the<br>
immediate brake output torque request to cause deceleration of the vehicle.<br>
Vehicle deceleration effected by control of the output torque from the hybrid<br>
powertrain system is combined with vehicle deceleration effected by a vehicle<br>
braking system (not shown) to decelerate the vehicle to achieve the operator<br>
braking request.<br>
[0042] The immediate accelerator output torque request is determined based<br>
upon a presently occurring operator input to the accelerator pedal 113, and<br>
comprises a request to generate an immediate output torque at the output<br>
member 64 preferably to accelerate the vehicle. The immediate accelerator<br>
output torque request may be modified by torque intervention controls based<br>
on events that affect vehicle operation outside the powertrain control. Such<br>
events include vehicle level interruptions in the powertrain control for antilock<br>
braking, traction control and vehicle stability control, which can be used to<br>
modify the immediate accelerator output torque request.<br>
[0043] The predicted accelerator output torque request is determined based<br>
upon the operator input to the accelerator pedal 113 and comprises an<br>
optimum or preferred output torque at the output member 64. The predicted<br>
accelerator output torque request is preferably equal to the immediate<br>
accelerator output torque request during normal operating conditions, e.g.,<br>
when torque intervention controls are not being commanded. When torque<br>
intervention , e.g., any one of antilock braking, traction control or vehicle<br>
stability, is being commanded, the predicted accelerator output torque request<br>
can remain the preferred output torque with the immediate accelerator output<br>
 <br>
torque request being decreased in response to output torque commands related<br>
to the torque intervention.<br>
[0044] The immediate brake output torque request and the predicted brake<br>
output torque request are both blended brake torque requests. Blended brake<br>
torque includes a combination of the friction braking torque generated at the<br>
wheels 93 and the output torque generated at the output member 64 which<br>
reacts with the driveline 90 to decelerate the vehicle in response to the<br>
operator input to the brake pedal 112.<br>
[0045] The immediate brake output torque request is determined based upon<br>
a presently occurring operator input to the brake pedal 112, and comprises a<br>
request to generate an immediate output torque at the output member 64 to<br>
effect a reactive torque with the driveline 90 which preferably decelerates the<br>
vehicle. The immediate brake output torque request is determined based upon<br>
the operator input to the brake pedal 112, and the control signal to control the<br>
friction brakes to generate friction braking torque.<br>
[0046] The predicted brake output torque request comprises an optimum or<br>
preferred brake output torque at the output member 64 in response to an<br>
operator input to the brake pedal 112 subject to a maximum brake output<br>
torque generated at the output member 64 allowable regardless of the operator<br>
input to the brake pedal 112. In one embodiment the maximum brake output<br>
torque generated at the output member 64 is limited to -0.2g. The predicted<br>
brake output torque request can be phased out to zero when vehicle speed<br>
approaches zero regardless of the operator input to the brake pedal 112. As<br>
desired, there can be operating conditions under which the predicted brake<br>
output torque request is set to zero, e.g., when the operator setting to the<br>
 <br>
transmission gear selector 114 is set to a reverse gear, and when a transfer case<br>
(not shown) is set to a four-wheel drive low range. The operating conditions<br>
whereat the predicted brake output torque request is set to zero are those in<br>
which blended braking is not preferred due to vehicle operating factors.<br>
[0047] The axle torque response type comprises an input state for shaping<br>
and rate-limiting the output torque response through the first and second<br>
electric machines 56 and 72. The input state for the axle torque response type<br>
can be an active state or an inactive state. When the commanded axle torque<br>
response type is an active state, the output torque command is the immediate<br>
output torque. Preferably the torque response for this response type is as fast<br>
as possible.<br>
[0048] The predicted accelerator output torque request and the predicted<br>
brake output torque request are input to the strategic optimization control<br>
scheme ('Strategic Control') 310. The strategic optimization control scheme<br>
310 determines a desired operating range state for the transmission 10<br>
('Hybrid Range State Des') and a desired input speed from the engine 14 to<br>
the transmission 10 ('Ni Des'), which comprise inputs to the shift execution<br>
and engine operating state control scheme ('Shift Execution and Engine<br>
Start/Stop') 320.<br>
[0049] A change in the input torque from the engine 14 which reacts with the<br>
input member from the transmission 10 can be effected by changing the mass<br>
of intake air to the engine 14 by controlling position of an engine throttle<br>
utilizing an electronic throttle control system (not shown), including opening<br>
the engine throttle to increase engine torque and closing the engine throttle to<br>
decrease engine torque. Changes in the input torque from the engine 14 can<br>
 <br>
be effected by adjusting ignition timing, including retarding spark timing from<br>
a mean-best-torque spark timing to decrease engine torque. The engine state<br>
can be changed between the engine-off state and the engine-on state to effect a<br>
change in the input torque. The engine state can be changed between the all-<br>
cylinder operating state and the cylinder deactivation operating state, wherein<br>
a portion of the engine cylinders are unfueled. The engine state can be<br>
changed by selectively operating the engine 14 in one of the fueled state and<br>
the fuel cutoff state wherein the engine is rotating and unfueled. Executing a<br>
shift in the transmission 10 from a first operating range state to a second<br>
operating range state can be commanded and achieved by selectively applying<br>
and deactivating the clutches C1 70, C2 62, C3 73, and C4 75.<br>
[0050] The immediate accelerator output torque request, the predicted<br>
accelerator output torque request, the immediate brake output torque request,<br>
the predicted brake output torque request, and the axle torque response type<br>
are inputs to the tactical control and operation scheme 330 to determine the<br>
engine command comprising the preferred input torque to the engine 14.<br>
[0051] The tactical control and operation scheme 330 can be divided into<br>
two parts. This includes determining a desired engine torque, and therefore a<br>
power split between the engine 14 and the first and second electric machines<br>
56 and 72, and controlling the engine states and operation of the engine 14 to<br>
meet the desired engine torque. The engine states include the all-cylinder state<br>
and the cylinder deactivation state, and a fueled state and a deceleration fuel<br>
cutoff state for the present operating range state and the present engine speed.<br>
The tactical control and operation scheme 330 monitors the predicted<br>
accelerator output torque request and the predicted brake output torque request<br>
 <br>
to determine the predicted input torque request. The immediate accelerator<br>
output torque request and the immediate brake output torque request are used<br>
to control the engine speed/load operating point to respond to operator inputs<br>
to the accelerator pedal 113 and the brake pedal 112, e.g., to determine the<br>
engine command comprising the preferred input torque to the engine 14.<br>
Preferably, a rapid change in the preferred input torque to the engine 14 occurs<br>
only when the first and second electric machines 56 and 72 cannot meet the<br>
operator torque request.<br>
[0052] The immediate accelerator output torque request, the immediate<br>
brake output torque request, and the axle torque response type are input to the<br>
motor torque control scheme ('Output and Motor Torque Determination') 340.<br>
The motor torque control scheme 340 executes to determine the motor torque<br>
commands during each iteration of one of the loop cycles, preferably the 6.25<br>
ms loop cycle.<br>
[0053] The present input torque ('Ti') from the engine 14 and the estimated<br>
clutch torque(s) ('Tcl') are input to the motor torque control scheme 340. The<br>
axle torque response type signal determines the torque response characteristics<br>
of the output torque command delivered to the output member 64 and hence to<br>
the driveline 90.<br>
[0054] The motor torque control scheme 340 controls motor torque<br>
commands of the first and second electric machines 56 and 72 to transfer a net<br>
commanded output torque to the output member 64 of the transmission 10 that<br>
meets the operator torque request. The control system architecture controls<br>
power flow among power actuators within a hybrid powertrain. The hybrid<br>
powertrain utilizes two or more power actuators to provide output power to an<br>
 <br>
output member. Controlling power flow among the power actuators includes<br>
controlling the input speed NI from the engine 14, the input torque TI from the<br>
engine, and the motor torques TA, TB of the first and second electric machines<br>
56, 72. Although in the exemplary embodiment described herein above, the<br>
hybrid powertrain utilizes the control system architecture to control power<br>
flow among power actuators including the engine 14, the ESD 74 and the first<br>
and second electric machines 56 and 72, in alternate embodiments the control<br>
system architecture can control power flow among other types of power<br>
actuators. Exemplary power actuators that can be utilized include fuel cells,<br>
ultra-capacitors and hydraulic actuators.<br>
[0055] The control system architecture manages electric power within the<br>
exemplary powertrain system utilizing electric power limits. The control<br>
system architecture utilizes a method for managing electric power within the<br>
powertrain system that includes establishing predicted electric power limits,<br>
long-term electric power limits, short-term electric power limits, and voltage-<br>
based electric power limits. The method further includes determining a<br>
preferred input speed from the engine 14, a preferred input torque from the<br>
engine 14, a preferred engine state, and a preferred operating range state of the<br>
transmission 10 utilizing the predicted electric power limits. The method<br>
further includes determining input torque constraints for constraining input<br>
torque from the engine 14 and output torque constraints for constraining<br>
output torque To to the output member 64 based upon the long-term electric<br>
power limits and the short-term electric power limits. By constraining the<br>
output torque To, a total motor torque TM, consisting of first and second motor<br>
torques TA and TB of the first and second electric machines 56 and 72,<br>
 <br>
respectively, is also constrained based on the set of output torque constraints<br>
and the input torque TI from the engine 14. In an alternate embodiment, a set<br>
of total motor torque constraints can be determined based upon the long-term<br>
electric power limits and short-term electric power limits, in addition to, or<br>
instead of the set of output torque constraints. The method further includes<br>
determining output torque constraints based upon the voltage-based electric<br>
power limits.<br>
[0056] The predicted electric power limits comprise preferred battery output<br>
levels associated with preferred ESD 74 performance levels, that is, the<br>
predicted electric power limits prescribe the desired operating envelope of the<br>
ESD 74. The predicted electric power limits comprise a range of battery<br>
output power levels from a minimum predicted electric power limit<br>
('PBAT_MIN_PRDTD') to a maximum predicted electric power limit<br>
('PBAT_MAX_PRDTD')- The predicted electric power limits can comprise a more<br>
constrained range of battery output power levels than the long-term electric<br>
power limits and the short-term electric power limits.<br>
[0057] The long-term electric power limits comprise battery output power<br>
levels associated with operation of the ESD 74 while maintaining long-term<br>
durability of the ESD 74. Operation of the ESD 74 outside the long-term<br>
electric power limits for extended periods of time may reduce the operational<br>
life of the ESD 74. In one embodiment, the ESD 74 is maintained within the<br>
long-term electric power limits during steady-state operation, that is, operation<br>
not associated with transient operation. Exemplary transient operations<br>
include tip-in and tip-out of the accelerator pedal 113, wherein transient<br>
acceleration operation is requested. Maintaining the ESD 74 within the long-<br>
 <br>
term electric power limits, allows the ESD 74 to provide functionality such as<br>
delivering a highest power level that does not degrade operational life of the<br>
ESD 74. The long-term electric power limits comprise a range of battery<br>
output power levels from a minimum long-term electric power limit<br>
('PBAT_MIN_LT') to a maximum long-term electric power limit ('PBAT_MAX_LT').<br>
The long-term electric power limits can comprise a more constrained range of<br>
battery output power levels than the short-term electric power limits.<br>
[0058] The short-term electric power limits comprise ESD 74 output power<br>
levels associated with battery operation that does not significantly affect short-<br>
term battery durability. Operation of the ESD 74 outside the short-term<br>
electric power limits may reduce the operational life of the ESD 74. Operating<br>
the ESD 74 within the short-term electric power limits, but outside the long-<br>
term electric power limits for short periods of time, may minimally reduce the<br>
operational life of the ESD 74, however, does not result in large amounts of<br>
degraded operational performance to the ESD 74. In one embodiment, the<br>
ESD 74 is maintained within the short-term electric power limits during<br>
transient operation. The short-term electric power limits comprise a range of<br>
battery output power levels from a minimum short-term electric power limit<br>
('PBAT_MIN_ST') to a maximum short-term electric power limit ('PBAT_MAX_ST').<br>
[0059] The voltage-based electric power limits comprise a range of battery<br>
output power level from a minimum voltage-based electric power limit<br>
('PBAT_MIN_VB') to a maximum voltage-based electric power limit<br>
('PBAT_MAX_VB') based on desired operating voltages of the ESD 74. The<br>
minimum voltage-based electric power limit PBAT_MIN_VB is a minimum<br>
amount of battery output power that the ESD 74 outputs before reaching a<br>
 <br>
maximum voltage VLID. The maximum voltage-based electric power limit<br>
PBAT_MAX_VB is an estimated amount of battery output power that the ESD 74<br>
can output before reaching a minimum voltage VFLOOR. The minimum voltage<br>
VFLOOR is a minimum permissible voltage for operating the battery without<br>
significantly effecting short-term battery durability. Outputting power from<br>
the ESD 74 when the voltage levels of the ESD 74 are below the minimum<br>
VFLOOR can cause degraded operational life of the ESD 74.<br>
[0060] Fig. 5 details signal flow in the tactical control scheme ('Tactical<br>
Control and Operation') 330 for controlling operation of the engine 14,<br>
described with reference to the hybrid powertrain system of Figs. 1 and 2 and<br>
the control system architecture of Figs. 3 and 4. The tactical control scheme<br>
330 includes a tactical optimization control path 350 and a system constraints<br>
control path 360 which are preferably executed concurrently. The outputs of<br>
the tactical optimization control path 350 are input to an engine state control<br>
scheme 370. The outputs of the engine state control scheme 370 and the<br>
system constraints control path 360 are input to an engine response type<br>
determination scheme ('Engine Response Type Determination') 380 for<br>
controlling the engine state, the immediate engine torque request, the predicted<br>
engine torque request, and the engine response type.<br>
[0061] The input from the engine 14 can be described in terms of an engine<br>
operating point including engine speed and engine torque which can be<br>
converted into the input speed and input torque which react with the input<br>
member from the transmission 10. When the engine 14 comprises a spark-<br>
ignition engine, a change in the engine operating point can be effected by<br>
changing the mass of intake air to the engine 14, by controlling position of an<br>
 <br>
engine throttle (not shown) utilizing an electronic throttle control system (not<br>
shown), including opening the engine throttle to increase engine torque and<br>
closing the engine throttle to decrease engine torque. Changes in the engine<br>
operating point can be effected by adjusting ignition timing, including<br>
retarding spark timing from a mean-best-torque spark timing to decrease<br>
engine torque. When the engine 14 comprises a compression-ignition engine,<br>
the engine operating point is controlled by controlling the mass of injected fuel<br>
and adjusted by retarding injection timing from a mean-best-torque injection<br>
timing to decrease the engine torque. The engine operating point can also be<br>
changed to effect a change in the input torque by controlling the engine state<br>
between the all-cylinder state and the cylinder deactivation state, and, by<br>
controlling the engine state between the engine-fueled state and the fuel cutoff<br>
state wherein the engine is rotating and unfueled.<br>
[0062] The tactical optimization control path 350 acts on substantially<br>
steady-state inputs to select a preferred engine state and to determine a<br>
preferred input torque from the engine 14 to the transmission 10. The tactical<br>
optimization control path 350 includes an optimization scheme ('Tactical<br>
Optimization') 354 to determine preferred input torques for operating the<br>
engine 14 in the all-cylinder state ('Input Torque Full'), in the cylinder<br>
deactivation state ('Input Torque Deac'), the all-cylinder state with fuel cutoff<br>
('Input Torque Full FCO'), in the cylinder deactivation state with fuel cutoff<br>
('Input Torque Deac FCO'), and a preferred engine state ('Preferred Engine<br>
State'). Inputs to the optimization scheme 354 include a lead operating range<br>
state of the transmission 10 ('Lead Hybrid Range State'), a lead predicted<br>
input acceleration profile ('Lead Input Acceleration Profile Predicted'), and a<br>
 <br>
predicted range of clutch reactive torques ('Predicted Clutch Reactive Torque<br>
Min/Max') across each applied clutch in the lead operating range state, which<br>
are preferably generated in the shift execution and engine start/stop control<br>
scheme 320. Further inputs include predicted electric power limits ('Predicted<br>
Battery Power Limits'), a predicted accelerator output torque request ('Output<br>
Torque Request Accel Prdtd') and a predicted brake output torque request<br>
('Output Torque Request Brake Prdtd'). The predicted output torque request<br>
for acceleration is shaped through a predicted output torque shaping filter 352<br>
while considering the axle torque response type to yield a predicted<br>
accelerator output torque ('To Accel Prdtd') and combined with the predicted<br>
output torque request for braking to determine the net predicted output torque<br>
('To Net Prdtd'), which are inputs to the optimization scheme 354. The lead<br>
operating range state of the transmission 10 comprises a time-shifted lead of<br>
the operating range state of the transmission 10 to accommodate a response<br>
time lag between a commanded change in the operating range state and the<br>
actual operating range state. Thus the lead operating range state of the<br>
transmission 10 is the commanded operating range state. The lead predicted<br>
input acceleration profile comprises a time-shifted lead of the predicted input<br>
acceleration profile of the input member 12 to accommodate a response time<br>
lag between a commanded change in the predicted input acceleration profile<br>
and a measured change in the predicted input acceleration profile. Thus the<br>
lead predicted input acceleration profile is the predicted input acceleration<br>
profile of the input member 12 occurring after the time shift. The parameters<br>
designated as 'lead' are used to accommodate concurrent transfer of torque<br>
through the powertrain converging at the common output member 64 using<br>
 <br>
devices having varying response times. Specifically, the engine 14 can have a<br>
response time of an order of magnitude of 300 - 600 ms, and each of the<br>
torque transfer clutches C1 70, C2 62, C3 73, and C4 75 can have response<br>
times of an order of magnitude of 150-300 ms, and the first and second<br>
electric machines 56 and 72 can have response time of an order of magnitude<br>
of 10 ms.<br>
[0063] The tactical optimization scheme 354 determines costs for operating<br>
the engine 14 in the engine states, which comprise operating the engine fueled<br>
and in the all-cylinder state ('PCOST FULL FUEL'), operating the engine unfueled<br>
and in the all-cylinder state ('PCOST FULL FCO'), operating the engine fueled and<br>
in cylinder deactivation state ('PCOST DEAC FUEL'), and operating the engine<br>
unfueled and in the cylinder deactivation state ('PCOST DEAC FCO'). The<br>
aforementioned costs for operating the engine 14 are input to a stabilization<br>
analysis scheme ('Stabilization and Arbitration') 356 along with the actual<br>
engine state ('Actual Engine State') and allowable or permissible engine<br>
state(s) ('Engine State Allowed') to select one of the engine states as the<br>
preferred engine state ('Preferred Engine State').<br>
[0064] The preferred input torques for operating the engine 14 in the all-<br>
cylinder state and in the cylinder deactivation state with and without fuel<br>
cutoff are input to an engine torque conversion calculator 355 and converted to<br>
preferred engine torques in the all-cylinder state and in the cylinder<br>
deactivation state ('Engine Torque Full' and 'Engine Torque Deac') and with<br>
fuel cutoff in the all-cylinder state and in the cylinder deactivation state<br>
('Engine Torque Full FCO' and 'Engine Torque Deac FCO') respectively, by<br>
taking into account torque-consuming components, e.g., a hydraulic pump,<br>
 <br>
between the engine 14 and the transmission 10. The preferred engine torques<br>
and the preferred engine state comprise inputs to the engine state control<br>
scheme 370.<br>
[0065] The costs for operating the engine 14 include operating costs which<br>
are determined based upon factors that include vehicle driveability, fuel<br>
economy, emissions, and battery usage. Costs are assigned and associated<br>
with fuel and electrical power consumption and are associated with specific<br>
operating conditions of the hybrid powertrain. Lower operating costs can be<br>
associated with lower fuel consumption at high conversion efficiencies, lower<br>
battery power usage and lower emissions and take into account the present<br>
operating state of the engine 14.<br>
[0066] The preferred engine state and the preferred engine torques in the all-<br>
cylinder state and in the cylinder deactivation state are input to the engine state<br>
control scheme 370, which includes an engine state machine ('Engine State<br>
Machine') 372. The engine state machine 372 determines a target engine<br>
torque ('Target Engine Torque') and a target engine state ('Target Engine<br>
State') based upon the preferred engine torques and the preferred engine state.<br>
The target engine torque and the target engine state are input to a transition<br>
filter 374 which filters the target engine torque to provide a filtered target<br>
engine torque ('Filtered Target Engine Torque') and which enables transitions<br>
between engine states. The engine state machine 372 outputs a command that<br>
indicates selection of one of the cylinder deactivation state and the all-cylinder<br>
state ('DEAC Selected') and indicates selection of one of the engine-fueled<br>
state and the deceleration fuel cutoff state ('FCO Selected').<br>
 <br>
[0067] The selection of one of the cylinder deactivation state and the all-<br>
cylinder state and the selection of one of the engine-fueled state and the<br>
deceleration fuel cutoff state, the filtered target engine torque, and the<br>
minimum and maximum engine torques are input to the engine response type<br>
determination scheme 380.<br>
[0068] The system constraints control path 360 determines the constraints on<br>
the input torque, comprising minimum and maximum input torques ('Input<br>
Torque Hybrid Minimum' and 'Input Torque Hybrid Maximum') that can be<br>
reacted by the transmission 10. The minimum and maximum input torques are<br>
determined based upon constraints to the transmission 10, the first and second<br>
electric machines 56 and 72, and the ESD 74, which affect the capacity of the<br>
transmission 10 and the electric machines 56 and 72.<br>
[0069] Inputs to the system constraints control path 360 include the<br>
immediate output torque request as measured by the accelerator pedal 113<br>
combined with the torque intervention control ('Output Torque Request Accel<br>
Immed') and the immediate output torque request as measured by the brake<br>
pedal 112 combined with the torque intervention control ('Output Torque<br>
Request Brake Immed'). The immediate output torque request is shaped<br>
through an immediate output torque shaping filter 362 while considering the<br>
axle torque response type to yield an immediate accelerator output torque ('To<br>
Accel Immed') and is combined with the immediate output torque request for<br>
braking to determine the net immediate output torque ('To Net Immed'). The<br>
net immediate output torque and the immediate accelerator output torque are<br>
inputs to a constraints scheme ('Output and Input Torque Constraints') 364.<br>
Other inputs to the constraints scheme 364 include the lead operating range<br>
 <br>
state of the transmission 10, an immediate lead input acceleration profile<br>
('Lead Input Acceleration Profile Immed'), a lead immediate clutch reactive<br>
torque range ('Lead Immediate Clutch Reactive Torque Min/Max') for each<br>
applied clutch in the lead operating range state, and the tactical control electric<br>
power constraints ('Tactical Control Electric Power Constraints') comprising<br>
the range from the minimum tactical control electric power constraint<br>
PBAT_MIN_TC to the maximum tactical control electric power constraint<br>
PBAT_MAX_TC, which are shown in Fig. 6. The tactical control electric power<br>
constraints are outputted from a battery power function ('Battery Power<br>
Control') 366. A targeted lead input acceleration profile comprises a time-<br>
shifted lead of the immediate input acceleration profile of the input member 12<br>
to accommodate a response time lag between a commanded change in the<br>
immediate input acceleration profile and a measured change in the immediate<br>
input acceleration profile. The lead immediate clutch reactive torque range<br>
comprises a time-shifted lead of the immediate clutch reactive torque range of<br>
the clutches to accommodate a response time lag between a commanded<br>
change in the immediate clutch torque range and a measured change in the<br>
immediate clutch reactive torque range. The constraints scheme 364<br>
determines an output torque range for the transmission 10, and then<br>
determines the minimum and maximum input torques that can be reacted by<br>
the transmission 10 based upon the aforementioned inputs.<br>
[0070] Further, the constraints scheme 364 inputs an immediate engine<br>
torque request ('Engine Torque Request Immed') and outputs an immediate<br>
electric power PBAT_IMMED that is an estimated battery output power of the<br>
ESD 74 when the engine 14 is operating at the immediate engine torque and<br>
 <br>
when the first and second electric machines 56, 72 are operating at preferred<br>
motor torques based upon the operator torque request and the other inputs of<br>
the constraints scheme 364.<br>
[0071] The minimum and maximum input torques are input to the engine<br>
torque conversion calculator 355 and converted to minimum and maximum<br>
engine torques ('Engine Torque Hybrid Minimum' and 'Engine Torque<br>
Hybrid Maximum' respectively), by taking into account torque-consuming<br>
components, e.g., a hydraulic pump, parasitic and other loads introduced<br>
between the engine 14 and the transmission 10.<br>
[0072] The filtered target engine torque, the output of the engine state<br>
machine 372 and the minimum and maximum engine torques are input to the<br>
engine response type determination scheme 380. The engine response type<br>
determination scheme 380 limits the filtered target engine torque to the<br>
minimum and maximum hybrid engine torques and outputs the engine<br>
commands to the ECM 23 for controlling the engine torques to an immediate<br>
engine torque request ('Engine Torque Request Immed') and a predicted<br>
engine torque request ('Engine Torque Request Prdtd'). Other commands<br>
control the engine state to one of the engine fueled state and the fuel cutoff<br>
state ('FCO Request') and to one of the cylinder deactivation state and the all-<br>
cylinder state ('DEAC Request'). Another output comprises an engine<br>
response type ('Engine Response Type'). When the filtered target engine<br>
torque is within the range between the minimum and maximum engine<br>
torques, the engine response type is inactive. When the filtered target engine<br>
torque drops below the maximum constraint of the engine torque ('Engine<br>
Torque Hybrid Maximum') the engine response type is active, indicating a<br>
 <br>
need for an immediate change in the engine torque, e.g., through engine spark<br>
control to change the engine torque to fall within the constraints of the<br>
minimum and maximum engine torques.<br>
[0073] Fig. 6 shows the battery power control function ('Battery Power<br>
Control') 366 of the tactical control scheme 330. The battery power control<br>
function 366 determines the set of tactical control electric power constraints<br>
including the minimum tactical control electric power constraint ('P BAT_<br>
MIN_TC') and the maximum tactical control electric power constraint ('PBAT_<br>
MAX_TC'). The battery power control function 366 includes a charge function<br>
('Over Discharge and Over Charge Function') 392 and a voltage function<br>
('Over Voltage and Under Voltage Function') 394.<br>
[0074] The inputs to the charge function 392 include the actual output power<br>
('PBAT') of the ESD 74, the minimum short-term electric power limit<br>
('PBAT_MIN_ST'), the maximum short-term electric power limit ('P BAT_MAX_ST'),<br>
the minimum long-term electric power limit ('PBAT_MIN_LT'), the maximum<br>
long-term electric power limit ('PBAT_MAX_LT'), and the immediate electric<br>
power ('PBAT_IMMED'). The charge function 392 determines and outputs a<br>
minimum charge function electric power limit ('PBAT_MIN_CF') and a maximum<br>
charge function electric power limit ('PBAT_MAX_CF').<br>
[0075] The charge function 392 determines a set of preferred electric power<br>
limits comprising an upper preferred electric power limit (not shown) and a<br>
lower preferred electric power limit (not shown) based on the short-term<br>
electric power limits. When the actual battery output power PBAT of the ESD<br>
74 is between the upper preferred electric power limit and the lower preferred<br>
electric power limit, the charge function outputs the minimum charge function<br>
 <br>
electric power constraint power limit and the maximum charge function as the<br>
minimum long-term electric power limit and the maximum long-term electric<br>
power limit, respectively.<br>
[0076] When the actual battery output power PBAT of the ESD 74 is not<br>
between the upper preferred electric power limit and the lower preferred<br>
electric power limit, the charge function 392 determines the minimum charge<br>
function electric power constraint and the maximum charge function electric<br>
power constraint based on a change rate value, the minimum long-term<br>
electric power limit, the maximum long-term electric power limit, and the<br>
immediate output power of the ESD 74 as determined by the constraints<br>
scheme 364. The charge function 392 determines the change rate value<br>
feedback control when the actual battery output power PBAT of the ESD 74<br>
transgresses one of the upper preferred electric power limit and the lower<br>
preferred electric power limit. The change rate value is determined based on<br>
the error between actual battery output power PBAT of the ESD 74 and the<br>
transgressed one of the upper preferred electric power limit and the lower<br>
preferred electric power limit.<br>
[0077] As charge function 392 adjusts one of the maximum charge function<br>
electric power constraint and the minimum charge function electric power<br>
constraint based on the actual battery output power PBAT of the ESD 74, the<br>
charge function 392 also adjusts the other charge function electric power<br>
constraint by the same amount, therefore, the difference between the<br>
maximum and minimum charge function electric power constraints remain<br>
unchanged.<br>
 <br>
[0078] The minimum and maximum charge function electric power<br>
constraints are intermediate electric power constraint values in that they are<br>
utilized to determine the final electric power constraint values, that is, the<br>
minimum tactical control electric power constraint ('PBAT_MIN_TC') and the<br>
maximum tactical control electric power constraint ('PBAT_MAX_TC').<br>
[0079] The inputs to the voltage function 394 include an actual battery<br>
voltage ('VBAT') of the ESD 74 which can comprise one of a voltage<br>
monitored by the BPCM 21 and a voltage monitored by the TPIM 19, a<br>
minimum base voltage limit ('VBAT_MIN_BASE') and a maximum base voltage<br>
limit ('VBAT_MAX_BASE') which can be based on the maximum and minimum<br>
operating voltages of one of the high voltage components, for example, a<br>
minimum and maximum inverter voltage of the TPIM 19, minimum and<br>
maximum auxiliary power module voltage of the TPIM 19, and minimum and<br>
maximum ESD 74 voltage, the charge function maximum electric power<br>
constraint ('PBAT_MAX_CF'), the charge function minimum electric power<br>
constraint ('PBAT_MIN_CF'), and the immediate electric power ('PBAT_IMMED').<br>
The minimum and maximum base voltage limits define an operating range for<br>
the voltage of the ESD 74 and can be determined based on parameters of the<br>
powertrain system including a temperature of a high voltage bus component,<br>
for example, a temperature of the ESD 74.<br>
[0080] The voltage function 394 determines a set of preferred voltage limits<br>
comprising an upper preferred voltage limit (not shown) and a lower preferred<br>
voltage limit (not shown) based on the maximum base voltage limit and the<br>
minimum base voltage limit, respectively.<br>
 <br>
[0081] When the actual battery voltage VBAT of the ESD 74 is between the<br>
upper preferred voltage limit and the lower preferred voltage power limit, the<br>
voltage function 394 determines the minimum tactical control electric power<br>
constraint and the maximum tactical control electric power constraint to be the<br>
minimum charge function electric power constraint and the maximum charge<br>
function power constraint, respectively.<br>
[0082] When the actual battery voltage VBAT of the ESD 74 is not between<br>
the upper preferred voltage limit and the lower preferred voltage limit, the<br>
voltage function 394 determines the minimum tactical control power<br>
constraint and the maximum tactical control power constraint based on the<br>
actual battery voltage, the immediate battery power, and the set of preferred<br>
voltage limits.<br>
[0083] The voltage function 394 determines a change rate value feedback<br>
control when the actual battery voltage VBAT of the ESD 74 transgresses one<br>
of the upper preferred voltage limit and the lower preferred voltage limit. The<br>
change rate value is determined based on the error between the actual battery<br>
voltage VBAT of the ESD 74 and the transgressed one of the upper preferred<br>
voltage limit and the lower preferred voltage limit.<br>
[0084] Unlike the charge function 392, the voltage function 394 can adjust<br>
only one of the tactical control power constraints without adjusting the other<br>
one of the tactical control power constraints. Therefore, the range of the input<br>
torque constraints can be effectively reduced, which leads to a reduced range<br>
for engine torque requests as determined by the response type determination<br>
function 380, and as a result the operating ranges of the motor torques TA, TB<br>
of the first and second electric machines 56 and 72 becomes more constrained.<br>
 <br>
(0085] Unlike the charge function 392, which provides a relatively slow<br>
correction of the maximum and minimum charge function electric power<br>
constraints in order to compensate for errors in the determination of<br>
PBAT_IMMED, the voltage function 394 provides a relatively fast correction of<br>
the maximum and minimum tactical control electric power constraints to<br>
rapidly respond to modify the voltage of the ESD 74.<br>
[0086] Fig. 7 details signal flow for the output and motor torque<br>
determination scheme 340 for controlling and managing the output torque<br>
through the first and second electric machines 56 and 72, described with<br>
reference to the hybrid powertrain system of Figs. 1 and 2 and the control<br>
system architecture of Figs. 3 and constraints including maximum and<br>
minimum available battery power limits ('Pbat Min/Max'). The output and<br>
motor torque determination scheme 340 controls the motor torque commands<br>
of the first and second electric machines 56 and 72 to transfer a net output<br>
torque to the output member 64 of the transmission 10 that reacts with the<br>
driveline 90 and meets the operator torque request, subject to constraints and<br>
shaping. The output and motor torque determination scheme 340 preferably<br>
includes algorithmic code and predetermined calibration code which is<br>
regularly executed during the 6.25 ms and 12.5 ms loop cycles to determine<br>
preferred motor torque commands ('TA\ 'TB') for controlling the first and<br>
second electric machines 56 and 72 in this embodiment.<br>
[0087] The output and motor torque determination scheme 340 determines<br>
and uses a plurality of inputs to determine constraints on the output torque,<br>
from which it determines the output torque command ('Tocmd'). Motor<br>
torque commands ('TA', 'TB') for the first and second electric machines 56<br>
 <br>
and 72 can be determined based upon the output torque command. The inputs<br>
to the output and motor torque determination scheme 340 include operator<br>
inputs, powertrain system inputs and constraints, and autonomic control<br>
inputs.<br>
[0088] The operator inputs include the immediate accelerator output torque<br>
request ('Output Torque Request Accel Immed') and the immediate brake<br>
output torque request ('Output Torque Request Brake Immed').<br>
[0089] The autonomic control inputs include torque offsets to effect active<br>
damping of the driveline 90 (412), to effect engine pulse cancellation (408),<br>
and to effect a closed loop correction based upon the input and output speeds<br>
(410). The torque offsets for the first and second electric machines 56 and 72<br>
to effect active damping of the driveline 90 can be determined ('Ta AD', 'Tb<br>
AD'), e.g., to manage and effect driveline lash adjustment, and are output<br>
from an active damping algorithm ('AD') (412). The torque offsets to effect<br>
engine pulse cancellation ('Ta PC, 'Tb PC) are determined during starting<br>
and stopping of the engine during transitions between the engine-on state<br>
('ON') and the engine-off state ('OFF') to cancel engine torque disturbances,<br>
and are output from a pulse cancellation algorithm ('PC) (408). The torque<br>
offsets for the first and second electric machines 56 and 72 to effect closed-<br>
loop correction torque are determined by monitoring input speed to the<br>
transmission 10 and clutch slip speeds of clutches C1 70, C2 62, C3 73, and<br>
C4 75. When operating in one of the mode operating range states, the closed-<br>
loop correction torque offsets for the first and second electric machines 56 and<br>
72 ('Ta CL', 'Tb CL') can be determined based upon a difference between the<br>
input speed from sensor 11 ('Ni') and the input speed profile ('Ni_Prof).<br>
 <br>
When operating in Neutral, the closed-loop correction is based upon the<br>
difference between the input speed from sensor 11 ('Ni') and the input speed<br>
profile ('Ni_Prof), and a difference between a clutch slip speed and a targeted<br>
clutch slip speed, e.g., a clutch slip speed profile for a targeted clutch C1 70.<br>
The closed-loop correction torque offsets are output from a closed loop control<br>
algorithm ('CL') (410). Clutch torque(s) ('Tcl') comprising clutch reactive<br>
torque range(s) for the applied torque transfer clutch(es), and unprocessed<br>
clutch slip speeds and clutch slip accelerations of the non-applied clutches can<br>
be determined for the specific operating range state for any of the presently<br>
applied and non-locked clutches. The closed-loop motor torque offsets and<br>
the motor torque offsets to effect active damping of the driveline 90 are input<br>
to a low pass filter to determine motor torque corrections for the first and<br>
second electric machines 56 and 72 ('TA LPF' and TB LPF) (405).<br>
[0090] The powertrain system inputs include a maximum motor torque<br>
control electric power constraint ('PBAT_MAX_MT') and a minimum motor<br>
torque control electric power constraint ('PBAT_MIN_MT') from a battery power<br>
function ('Battery Power Control') (466), the operating range state ('Hybrid<br>
Range State'), and a plurality of system inputs and constraints ('System Inputs<br>
and Constraints'). The system inputs can include scalar parameters specific to<br>
the powertrain system and the operating range state, and can be related to<br>
speed and acceleration of the input member 12, output member 64, and the<br>
clutches. Other system inputs are related to system inertias, damping, and<br>
electric/mechanical power conversion efficiencies in this embodiment. The<br>
constraints include maximum and minimum motor torque outputs from the<br>
torque machines, i.e., first and second electric machines 56 and 72 ('Ta<br>
 <br>
Min/Max', 'Tb Min/Max'), and maximum and minimum clutch reactive<br>
torques for the applied clutches. Other system inputs include the input torque,<br>
clutch slip speeds and other relevant states.<br>
[0091] Inputs including an input acceleration profile ('NidotProf) and a<br>
clutch slip acceleration profile ('Clutch Slip Accel Prof) are input to a pre-<br>
optimization algorithm (415), along with the system inputs, the operating<br>
range state, and the motor torque corrections for the first and second electric<br>
machines 56 and 72 ('Ta LPF' and Tb LPF'). The input acceleration profile is<br>
an estimate of an upcoming input acceleration that preferably comprises a<br>
targeted input acceleration for the forthcoming loop cycle. The clutch slip<br>
acceleration profile is an estimate of upcoming clutch acceleration for one or<br>
more of the non-applied clutches, and preferably comprises a targeted clutch<br>
slip acceleration for the forthcoming loop cycle. Optimization inputs ('Opt<br>
Inputs'), which can include values for motor torques, clutch torques and<br>
output torques can be calculated for the present operating range state and used<br>
in an optimization algorithm to determine the maximum and minimum raw<br>
output torque constraints (440) and to determine the preferred split of open-<br>
loop torque commands between the first and second electric machines 56 and<br>
72 (440'). The optimization inputs, the maximum and minimum battery<br>
power limits, the system inputs and the present operating range state are<br>
analyzed to determine a preferred or optimum output torque ('To Opt') and<br>
minimum and maximum raw output torque constraints ('To Min Raw', 'To<br>
Max Raw') (440), which can be shaped and filtered (420). The preferred<br>
output torque ('To Opt') comprises an output torque that minimizes battery<br>
power subject to the operator torque request. The immediate accelerator<br>
 <br>
output torque request and the immediate brake output torque request are each<br>
shaped and filtered and subjected to the minimum and maximum output torque<br>
constraints ('To Min Filt', 'To Max Filt') to determine minimum and<br>
maximum filtered output torque request constraints ('To Min Req Filtd', 'To<br>
Max Req Filtd'). A constrained accelerator output torque request ('To Req<br>
Accel Cnstrnd') and a constrained brake output torque request ('To Req Brake<br>
Cnstrnd') can be determined based upon the minimum and maximum filtered<br>
output torque request constraints (425).<br>
[0092] Furthermore, a regenerative braking capacity ('Opt Regen Capacity')<br>
of the transmission 10 comprises a capacity of the transmission 10 to react<br>
driveline torque, and can be determined based upon constraints including<br>
maximum and minimum motor torque outputs from the torque machines and<br>
maximum and minimum reactive torques for the applied clutches, taking into<br>
account the battery power limits. The regenerative braking capacity<br>
establishes a maximum value for the immediate brake output torque request.<br>
The regenerative braking capacity is determined based upon a difference<br>
between the constrained accelerator output torque request and the preferred<br>
output torque. The constrained accelerator output torque request is shaped and<br>
filtered and combined with the constrained brake output torque request to<br>
determine a net output torque command. The net output torque command is<br>
compared to the minimum and maximum request filtered output torques to<br>
determine the output torque command ('Tocmd') (430). When the net output<br>
torque command is between the maximum and minimum request filtered<br>
output torques, the output torque command is set to the net output torque<br>
command. When the net output torque command exceeds the maximum<br>
 <br>
request filtered output torque, the output torque command is set to the<br>
maximum request filtered output torque. When the net output torque<br>
command is less than the minimum request filtered output torque, the output<br>
torque command is set to the minimum request filtered output torque<br>
command.<br>
[0093] Powertrain operation is monitored and combined with the output<br>
torque command to determine a preferred split of open-loop torque commands<br>
between the first and second electric machines 56 and 72 that meets reactive<br>
clutch torque capacities ('TaOpt' and 'TbOpt'), and provide feedback related<br>
to the preferred battery power ('Pbat Opt') (440'). The motor torque<br>
corrections for the first and second electric machines 56 and 72 ('Ta LPF' and<br>
Tb LPF') are subtracted to determine open loop motor torque commands ('Ta<br>
OL'and 'TbOL')(460).<br>
[0094] The open loop motor torque commands are combined with the<br>
autonomic control inputs including the torque offsets to effect active damping<br>
of the driveline 90 (412), to effect engine pulse cancellation (408), and to<br>
effect a closed loop correction based upon the input and clutch slip speeds<br>
(410), to determine the motor torques TA and TB for controlling the first and<br>
second electric machines 56 and 72 (470). The aforementioned steps of<br>
constraining, shaping and filtering the output torque request to determine the<br>
output torque command which is converted into the torque commands for the<br>
first and second electric machines 56 and 72 is preferably a feed-forward<br>
operation which acts upon the inputs and uses algorithmic code to calculate<br>
the torque commands.<br>
 <br>
[0095] The optimization algorithm (440,440') comprises an algorithm<br>
executed to determine powertrain system control parameters that are<br>
responsive to the operator torque request that minimizes battery power<br>
consumption. The optimization algorithm 440 includes monitoring present<br>
operating conditions of the electro-mechanical hybrid powertrain, e.g., the<br>
powertrain system described hereinabove, based upon the system inputs and<br>
constraints, the present operating range state, and the available battery power<br>
limits. For a candidate input torque, the optimization algorithm 440 calculates<br>
powertrain system outputs that are responsive to the system inputs comprising<br>
the aforementioned output torque commands and are within the maximum and<br>
minimum motor torque outputs from the first and second electric machines 56<br>
and 72, and within the available battery power, and within the range of clutch<br>
reactive torques from the applied clutches for the present operating range state<br>
of the transmission 10, and take into account the system inertias, damping,<br>
clutch slippages, and electric/mechanical power conversion efficiencies.<br>
Preferably, the powertrain system outputs include the preferred output torque<br>
('To Opt'), achievable torque outputs from the first and second electric<br>
machines 56 and 72 ('Ta Opt', 'Tb Opt') and the preferred battery power<br>
('Pbat Opt') associated with the achievable torque outputs.<br>
[0096] The system operation as configured leads to determining output<br>
torque constraints based upon present operation and constraints of the<br>
powertrain system. The operator torque request is determined based upon<br>
operator inputs to the brake pedal and to the accelerator pedal. The operator<br>
torque request can be constrained, shaped and filtered to determine the output<br>
torque command, including determining a preferred regenerative braking<br>
 <br>
capacity. An output torque command can be determined that is constrained<br>
based upon the constraints and the operator torque request. The output torque<br>
command is implemented by commanding operation of the torque machines.<br>
The system operation effects powertrain operation that is responsive to the<br>
operator torque request and within system constraints. The system operation<br>
results in an output torque shaped with reference to operator drivability<br>
demands, including smooth operation during regenerative braking operation.<br>
(0097] Fig. 8 shows the battery power function 466 of the output and motor<br>
torque determination scheme 340. The battery power function 466 determines<br>
the set of motor torque electric power constraints including a maximum motor<br>
torque control electric power constraint ('PBAT_MAX_MT') and a minimum<br>
motor torque control electric power constraint ('PBAT_MIN_MT'). The battery<br>
power control scheme 466 includes a charge function ('Over Discharge and<br>
Over Charge Function') 492 and a voltage function ('Over Voltage and Under<br>
Voltage Function') 494. The inputs to the charge function 492 include the<br>
battery output power ('PBAT'), the minimum short-term electric power limit<br>
('PBAT_MIN_ST'), the maximum short-term electric power limit ('PBAT_MAX_ST'),<br>
the minimum long-term electric power limit ('PBAT_MIN_LT'), the maximum<br>
long-term electric power limit ('PBAT_MAX_LT'), and the preferred battery<br>
power ('PBAT_Opt'). The charge function 492 determines and outputs a<br>
minimum charge function electric power limit ('PBAT_MIN_CF') and a maximum<br>
charge function electric power limit ('PBAT_MAX_CF') utilizing a substantially<br>
similar method to that described above for the charge function 392, wherein<br>
the preferred battery power PBAT_Opt is utilized in place of the immediate<br>
battery power PBAT_IMMED. The inputs to the voltage function 494 include a<br>
 <br>
battery voltage ('VBAT') of the ESD 74 monitored by the BPCM 21, a<br>
minimum base voltage limit ('VBAT_MIN_BASE'), a maximum base voltage limit<br>
('VBAT_MAX_BASE'), the charge function maximum electric power constraint<br>
('PBAT_MAX_CF'), the charge function minimum electric power constraint<br>
('PBAT_MIN_CF'), and the preferred battery power ('PBAT_Opt). The voltage<br>
function 494 determines and outputs the minimum motor torque control<br>
electric power constraint and the maximum motor torque control electric<br>
power constraint, utilizing a substantially similar method to that utilized by the<br>
charge function 394 for determining the minimum and maximum tactical<br>
control electric power constraints, respectively, wherein the preferred battery<br>
power PBAT_Opt is utilized in place of the immediate battery power PBAT_IMMED.<br>
[0098] The disclosure has described certain preferred embodiments and<br>
modifications thereto. Further modifications and alterations may occur to<br>
others upon reading and understanding the specification. Therefore, it is<br>
intended that the disclosure not be limited to the particular embodiment(s)<br>
disclosed as the best mode contemplated for carrying out this disclosure, but<br>
that the disclosure will include all embodiments falling within the scope of the<br>
appended claims.<br>
 <br>
CLAIMS<br>
1. A method for controlling a powertrain system comprising a plurality of<br>
power actuators, a transmission device and an energy storage device, the<br>
transmission device operative to transfer power between the power<br>
actuators and an output member to generate an output torque, the method<br>
comprising:<br>
determining an operator request for power from the output member;<br>
determining a first set of electric power constraints for the energy storage<br>
device;<br>
determining a set of power constraints for a first power actuator based<br>
upon the first set of electric power constraints for the energy storage<br>
device;<br>
determining a second set of electric power constraints for the energy<br>
storage device;<br>
determining a set of power constraints for a second power actuator based<br>
upon the second set of electric power constraints for the energy<br>
storage device;<br>
controlling the first power actuator based upon the set of power<br>
constraints for the first power actuator; and<br>
controlling the second power actuator based upon the set of power<br>
constraints for the second power actuator.<br>
 <br>
2.	The method of claim 1, further comprising:<br>
determining a preferred power level for operating the first power<br>
actuator based upon the operator request for power;<br>
determining a first battery output power value based upon the preferred<br>
power level for operating the first power actuator and the operator<br>
request for power; and<br>
determining the first set of electric power constraints for the energy<br>
storage device based upon the first battery output power value.<br>
3.	The method of claim 2, further comprising:<br>
determining a preferred power level for operating the second power<br>
actuator based upon the operator request for power;<br>
determining a second battery output power value based upon the<br>
preferred power level for operating the second power actuator and<br>
the operator request for power; and<br>
determining the second set of electric power constraints for the energy<br>
storage device based upon the second battery output power value.<br>
4.	The method of claim 3, further comprising:<br>
monitoring output power of the energy storage device; and<br>
determining the set of power constraints for the first power actuator<br>
based upon the first and second sets of electric power constraints for<br>
the energy storage device and the output power of the energy storage<br>
device.<br>
 <br>
5.	The method of claim 1, further comprising:<br>
monitoring a voltage of the energy storage device;<br>
providing a set of voltage limits for the energy storage device; and<br>
determining the set of power constraints for the first power actuator<br>
based upon the set of voltage limits for the energy storage device and<br>
the voltage of the energy storage device.<br>
6.	The method of claim 5, wherein determining the set of power constraints<br>
for the first power actuator comprises:<br>
determining a first set of electric power limits for the energy storage<br>
device;<br>
determining a second set of electric power limits for the energy storage<br>
device;<br>
determining a set of intermediate power constraints for the energy<br>
storage device based upon the battery power, the first set of electric<br>
power limits and the second set of electric power limits; and<br>
determining the set of power constraints for the first power actuator<br>
based upon the set of intermediate power constraints, the first and<br>
second sets of electric power constraints, the voltage of the energy<br>
storage device, and the set of voltage limits.<br>
7.	The method of claim 1, wherein determining the set of power constraints<br>
for the first power actuator and the set of power constraints for the<br>
second power actuator comprises determining a set of torque constraints<br>
 <br>
for the first power actuator and a set of torque constraints for the second<br>
power actuator.<br>
8.	The method of claim 1, wherein determining the set of power constraints<br>
for the first power actuator comprises determining a set of input torque<br>
constraints for constraining input torque from an engine.<br>
9.	The method of claim 8, further comprising:<br>
determining an engine torque request;<br>
determining a first battery output power value for the energy storage<br>
device based upon the engine torque request; and<br>
determining the set of input torque constraints based upon the first<br>
battery output power value,<br>
10.	The method of claim 9, further comprising controlling engine torque<br>
based upon the set of input torque constraints.<br>
11.	The method of claim 1, wherein determining the set of power constraints<br>
for the first power actuator comprises determining a set of output torque<br>
constraints for constraining the output torque of the output member and<br>
constraining a motor torque of an electric machine based upon the set of<br>
output torque constraints.<br>
12.	The method of claim 11, further comprising:<br>
determining a preferred output torque for the output member;<br>
 <br>
determining a motor torque request for the electric machine based upon<br>
the preferred output torque;<br>
calculating a first battery output power value for the energy storage<br>
device based upon the preferred output torque; and<br>
determining the set of output torque constraints for constraining the<br>
output torque based upon the first battery output power value.<br>
13.	The method of claim 12, further comprising controlling the motor torque<br>
of the electric machine based upon the set of output torque constraints.<br>
14.	Method for controlling a powertrain system comprising an engine, an<br>
electric machine, a transmission device and an energy storage device, the<br>
transmission device operative to transfer power between the engine, the<br>
electric machine, and an output member to generate an output torque, the<br>
method comprising:<br>
monitoring an operator torque request;<br>
monitoring output power of the energy storage device;<br>
determining a first set of electric power constraints for the energy storage<br>
device;<br>
determining a set of torque constraints for the engine based upon the first<br>
set of electric power constraints for the energy storage device;<br>
determining a second set of electric power constraints for the energy<br>
storage device; and<br>
 <br>
determining a set of torque constraints for the electric machine based<br>
upon the second set of electric power constraints for the energy<br>
storage device.<br>
15.	The method of claim 14, further comprising:<br>
determining a preferred input torque from the engine to the transmission<br>
device based upon the operator torque request;<br>
determining a first battery output power value for the energy storage<br>
device based upon the preferred input torque and the operator torque<br>
request; and<br>
determining the first set of electric power constraints for the energy<br>
storage device based upon the first battery output power value.<br>
16.	The method of claim 15, further comprising:<br>
determining a preferred motor torque for operating the electric machine<br>
based upon the operator torque request;<br>
determining a second battery output power value for the energy storage<br>
device based upon the preferred motor torque and the operator torque<br>
request; and<br>
determining the second set of electric power constraints for the energy<br>
storage device based upon the second battery output power value.<br>
17.	The method of claim 16, further comprising:<br>
determining an engine torque request;<br>
 <br>
determining the first battery output power value for the energy storage<br>
device based upon the engine torque request; and<br>
determining the set of torque constraints for the engine based upon the<br>
first battery output power value.<br>
18.	The method of claim 14, further comprising controlling engine torque<br>
based upon the set of torque constraints for the engine.<br>
19.	The method of claim 14, further comprising<br>
determining a preferred output torque for the output member;<br>
determining a motor torque request for the electric machine based upon<br>
the preferred output torque;<br>
calculating a first battery output power value for the energy storage<br>
device based upon the preferred output torque; and<br>
determining a set of output torque constraints for constraining the output<br>
torque based the first battery output power value.<br>
20.	The method of claim 19, further comprising controlling the motor torque<br>
of the electric machine based upon the set of output torque constraints.<br>
21.	A method for controlling a powertrain system comprising a plurality of<br>
power actuators, a transmission device and an energy storage device, the<br>
transmission device operative to transfer power between the power<br>
actuators and an output member to generate an output torque, the method<br>
comprising:<br>
 <br>
monitoring output power of the energy storage device;<br>
determining a first set of power constraints for the energy storage device;<br>
determining a set of torque constraints for the first power actuator based<br>
upon the first set of power constraints for the energy storage device;<br>
determining a second set of power constraints for the energy storage<br>
device; and<br>
determining a set of torque constraints for the second power actuator<br>
based upon the second set of power constraints for the energy storage<br>
device.<br>
 <br>
A method for controlling a powertrain system includes controlling a<br>
first power actuator based upon a set of power constraints for the first power<br>
actuator. The method further includes controlling a second power actuator<br>
based upon the set of power constraints for the second power actuator.</td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=XPcO+fLclhWjlnXaGU2tgQ==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==" target="_blank" style="word-wrap:break-word;">http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=XPcO+fLclhWjlnXaGU2tgQ==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==</a></p>
		<br>
		<div class="pull-left">
			<a href="278307-compositions-comprising-combustion-improvers-and-methods-of-use-thereof.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="278309-floor-spacer-for-vehicle.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>278308</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>1902/KOL/2008</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>53/2016</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>23-Dec-2016</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>20-Dec-2016</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>03-Nov-2008</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>CHRYSLER LLC,</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>800 CHRYSLER DRIVE, AUBURN HILLS, MICHIGAN , USA 48326-2757,</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>WILLIAM R. CAWTHRONE</td>
											<td>595 RIVER OAKS DRIVE, MILFORD, MICHIGAN 48381</td>
										</tr>
										<tr>
											<td>2</td>
											<td>ANTHONY H. HEAP</td>
											<td>2969 LESLIE PARK CIRCLE ANN ARBOR, MICHIGAN 48105</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>B60K6/04; F16H3/00</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>N/A</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td></td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>60/985,250</td>
									<td>2007-11-04</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/278308-method-for-controlling-a-power-actuators-in-a-hybrid-powertrain-system by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 04 Apr 2024 22:34:44 GMT -->
</html>
