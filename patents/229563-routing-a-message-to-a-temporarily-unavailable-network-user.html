<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/229563-routing-a-message-to-a-temporarily-unavailable-network-user by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 10:16:00 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 229563:ROUTING A MESSAGE TO A TEMPORARILY UNAVAILABLE NETWORK USER</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">ROUTING A MESSAGE TO A TEMPORARILY UNAVAILABLE NETWORK USER</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>The present invention relates to a method, system and network device for routing a message to a temporarily unavailable network user, wherein a subscription to a registration state of the network user is initiated if the network user is indicated as being not available. Then, a notification is generated, when the registration state of the network user is changed to indicate a state when the network user is available again or when the network user is registered again, and the message is routed to the netwrk user in response of the notification. Thereby, network elements or servers generating messages can be informed about the connection state of the network user.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td> <br><br>
Method, System and Network Device for Routing a Message to a Temporarily<br>
Unavailable Network User<br>
FIELD OF THE INVENTION<br>
The present invention relates to a method, system and network device for routing a message, e.g. a Multimedia Messaging Service (MMS) notification, to a temporarily unavailable network user, e.g. a subscriber in an Internet Protocol Multimedia Subsystem (IMS).<br>
BACKGROUND OF THE INVENTION<br>
In order to achieve access independence and to maintain a smooth interoperation with wired terminals across the internet, the IMS as specified e.g. in the 3GPP specification TS 23.228 has been developed to be conformant to IETF (Internet Engineering Task Force) "Internet Standards". The IP multimedia core network (IM CN) subsystem enables network operators of mobile or cellular networks to offer their subscribers multimedia services based on and built upon Internet applications, services and protocols. The intention is to develop such services by mobile network operators and other 3rd party suppliers including those in the Internet space using the mechanisms provided by the Internet and the IM CN subsystem. The IMS thus enables conversions of, and access to, voice, video, messaging, data and web-based technologies for wireless users, and combines the growth of the Internet with the growth in mobile communications.<br>
Fig. 1 shows an architecture of an IMS network according to the above 3GPP (3rd Generation Partnership Project) specification. The architecture is based on the principle that the service control for home subscribed services for a roaming subscriber is in the home network HN, e.g. a Serving Call State Control Function (S-CSCF) is located in the home network HN. In Fig. 1, a current or old S-CSCFo 10 and a future or new S-CSCFn 12 are shown, between which a terminal device or user equipment (UE) 40 can be transferred e.g. due to changed required capabilities resulting from a change in the subscriber profile or network coverage of the UE40.<br>
In general, an S-CSCF performs the session control service for the served UEs. It maintains a session state as needed by the network operator for support of the services which may be provided by an application server (AS) 60 which may be<br><br>
located as well in the home network HN or a visited network VN. Within an operator's network, different S-CSCFs may have different functionalities. The functions performed by the S-CSCF during a respective session are e.g. registration, session flow management, charging and resource utilization management. When a subscriber roams to the visited network VN, the visited network VN supports a Proxy-CSCF (P-CSCF) 30 which enables the session control to be passed to the respective S-CSCF located at the home network HN and providing the service control. Furthermore, an Interrogating-CSCF (l-CSCF) 50 is provided in the home network HN as a contact point within the operator's network for all connections destined to a subscriber of that network operator, or a roaming subscriber currently located within that network operator's service area. There may be multiple I-CSCFs within an operator's network. The functions performed by the l-CSCF 50 include assigning an S-CSCF to a user performing a registration procedure, routing a request received from another network towards the S-CSCF, maintaining the address of an S-CSCF from a subscriber database, e.g. a Home Subscriber Server (HSS) 20 as shown in Fig. 1, and/or forwarding requests or responses to the S-CSCF determined based on the address of change from the HSS 20.<br>
The P-CSCF 30 is the first contact point within the IMS. Its address is discovered by the UE 40 following a PDP (Packet Data Protocol) context activation. The P-CSCF 30 behaves like a proxy, i.e. -it accepts requests and services them internally or forwards them on, possibly after translation. The P-CSCF 30 may also behave as a User Agent, i.e. in abnormal conditions it may terminate and independently generate transactions. The functions performed by the P-CSCF 30 are forwarding register requests received from the UE 40 to an l-CSCF, e.g. the l-CSCF 50, determined using the home domain name as provided by the UE 40, and forwarding requests or responses to the UE 40.<br>
Further details regarding the functions of the different CSCF elements shown in Fig. 1 can be gathered from the above mentioned 3GPP-specification.<br>
The IETF has been specifying a Session Initiation Protocol (SIP) event package for registrations, as defined in "draft-ietf-sipping-reg-evenf. Through its REGISTER method, SIP allows a user agent, which is an interface (e.g. browser) between the user and the network application, to create, modify, and delete registrations. Registrations can also be altered by administrators in order to enforce policy. As a result, these registrations represent a piece of state in the network that can change dynamically. There are many cases where a user agent would like to<br><br>
be notified of changes in this state. The event package defines a mechanism by which those user agents can request and obtain such notifications.<br>
The SIP REGISTER method provides a way for a user agent to manipulate registrations. Contacts can be added or removed, and the current set of contacts can be queried. Registrations can also change as a result of administrator policy. For example, if a user is suspected of fraud, his registration can be deleted so that they cannot receive any requests. Registrations also expire after some time if not refreshed. Thus, registrations represent a dynamic piece of state maintained by the network. The SIP Events Framework defines a generic framework for subscription to, and notification of, events related to SIP systems. The framework defines the methods SUBSCRIBE and NOTIFY, and introduces the notion of a package. A package is a concrete application of the event framework to a particular class of events, e.g. registration states.<br>
The SUBSCRIBE message for the registration package may contain a body for filtering the subscription. It may be sent with or without the body. The default registration policy is that notifications are triggered from a SUBSCRIBE message and are generated every time there is a change in the state of any of the registered contacts for the resource being subscribed to. Those notifications only contain information on the contacts whose state has changed. The notifications are forwarded using the NOTIFY message comprises in its body a registration information document which describes some or all of the contacts associated with a particular address-of-record.<br>
In the 3GPP IMS Release 5 specifications TS 24.229, 24.228 and 23.218, the SIP registration state event package is used to inform about the user's registration state to the subscribers of the event package. 3GPP IMS Release 6 will introduce new services to the system, such as Presence, Messages, Conferencing and MMS. There are services like MMS which could utilize the capabilities of the IMS network. The IMS network is able to provide accurate information on the user's registration state using the SIP registration state event package and it also allows carrying the MMS notification using e.g. the SIP MESSAGE request.<br>
According to the IMS Release 5 specifications, the IMS subscriber is either registered or deregistered. However, although being registered, the IMS subscriber may not be reachable e.g. due to battery loss, temporary radio coverage loss at the current location of the subscriber, which is quite normal in big cities or areas<br><br>
where the radio coverage is for some reasons spotty. Consequently, external services utilizing the IMS network cannot be notified if a service user in not reachable.<br>
SUMMARY OF THE INVENTION<br>
It is therefore an object of the present invention to provide a method, system and network device, by means of which an application server utilizing the IMS network for forwarding a message can be made aware if a service user is not available.<br>
This object is achieved by a mettod of routing a message to a temporarily unavailable network user, said method comprising the steps of:<br>
-	subscribing to a state event package of said network user;<br>
-	generating a notification when said state event package of said network user is changed to indicate a state when said network user is available again or when said network user is registered again; and<br>
-	routing said message to said network user in response to the receipt of said notification.<br>
Furthermore, the above object is achieved by a network device for serving a network user in a data network, said network device being configured to store a state event package indicating that said network user is unregistered or registered but not available, and to generate a notification to a subscriber of said state event package if said state event package indicates that said network user is available.<br>
Additionally, the above object is achieved by a network server for generating messages to be routed to network users, said server being configured to subscribe to a state of a norvavailable network user and to route a message to said non-available network user in response to the receipt of a state notification indicating that said non-available network user is available.<br>
Finally, the above object is achieved by a system for routing a message to a temporarily unavailable network user, said system comprising the network server and the network device as defined above.<br>
Accordingly, an external application server can be subscribed to the registration state of a network user and can thus be notified if the network user is registered. Additionally, the network user may not be available even though registered.<br><br>
Thereby, external services utilizing the IMS network can be notified if about availability as experienced by the IMS network.<br>
In the present invention, the term "available" is to be understood in a sense to cover all scenarios when the subscriber cannot be reached, i.e. also such situations where the network user intentionally does not want to be disturbed e.g. due to a meeting.<br>
The subscribing step may be performed in response to the receipt of a message indicating that the network user is not available or not registered.<br>
Furthermore, a notification may comprise an information indicating that the network user is reachable again even though the registrations state is unaffected. In particular, this information may be an event or flag information. It may be set to the state indicating that the network user is available, after a terminal device of the network user performs an outgoing session setup or an incoming session setup attempt is successful. The re-registration may be determined based on a notification about a re-assignment of the network user. Then, the subscription may be refreshed in response to the notified re-registration.<br>
Further advantageous modifications or developments are defined in the dependent claims.<br>
BRIEF DESCRIPTION OF THE DRAWINGS<br>
In the following, the present invention will be described in greater detail based on preferred embodiments with reference to the accompanying drawings, in which:<br>
Fig. 1 shows a schematic block diagram of a network architecture in which the preferred embodiments of the present invention can be implemented;<br>
Fig. 2 shows a message signaling and processing diagram indicating delivery of a notification to an IMS subscriber according to the first preferred embodiment;<br>
Fig. 3 shows a message signaling and processing diagram indicating delivery of a notification to an IMS subscriber according to the second preferred embodiment; and<br><br>
Fig. 4 shows a message signaling an processing diagram indicating a subscription to a registration state event package according to the third preferred embodiment.<br>
DESCRIPTION OF THE PREFERRED EMBODIMENTS<br>
The preferred embodiments will now be described on the basis of a delivery of an MMS notification in an IMS network architecture as shown in Fig. 1.<br>
The IMS architecture shown in Fig. 1 refers to a set of core network entities using the services provided by the packet-switched domain to offer multimedia services. The HSS 20 is the master database for a given user and includes the functions of conventional home location registers (HLRs) as well as new functionalities specified to IP networks, such as the IMS. The HSS 20 is the entity containing the subscription-related information to support the network entities actually handling calls and/or sessions.<br>
Fig. 2 shows a schematic signaling diagram according to the first preferred embodiment where the AS 60 delivers its MMS notification to the IMS subscriber of the UE 40 using a registered/unregistered information of the registration state event package to get notified when the subscriber is registered again and thus available.<br>
According to the first preferred embodiment, a SIP-based solution for MMS notifications utilizing existing capabilities of the IMS network is proposed.<br>
When the AS 60, which may be an MMS server, intends to deliver the MMS notification to the IMS user or subscriber, it generates a SIP MESSAGE request and includes the direct or indirect notification as the payload of the request (step 1). If the IMS subscriber is not registered at this point, the MESSAGE request is not delivered to the UE 40 but is rather rejected by a default S-CSCF, e.g. the S-CSCFo 10, using a SIP error response, e.g. SIP 480 Temporary Unavailable. Here, the AS 60 corresponds to a SIP AS in the IMS network architecture and acts as a SIP User Agent. It is assumed that the AS 60 is capable to originate its own request and proxy it towards the user by e.g. querying for the user's S-CSCF on the Sh interface or sending the request to the l-CSCF 50. As the user is currently not registered, it is also assumed that the registration state information can also be provided when the user is unregistered. Hence, registration state provision equals to a service which pertains also to the unregistered state. If the user has services<br><br>
related to the unregistered state, i.e. the HSS 20 stores a user profile for the unregistered state, then a default S-CSCF will be allocated to handle the request. As the user is not registered, there is no path stored by the S-CSCFo 10 towards the UE 40, so that the S-CSCFo 10 will reject the incoming SIP MESSAGE request by responding with a 4xx SIP failure response.<br>
More details concerning path creation can be obtained from the 3GPP specification TS 24.229.<br>
According to Fig. 2, the l-CSCF 50 initiates a query to the HSS 20 (step 2) in response to the receipt of the SIP MESSAGE request from the AS 60, to obtain a routing information. Then it forwards the MESSAGE request in step 3 to the default S-CSCFo 10 which responds to the AS 60 in steps 4a and 4b with a SIP 480 Temporary Unavailable response. As the MESSAGE request is rejected, the AS 60 subscribes to the user's registration state by forwarding a SUBSCRIBE request for the registration state event in the same way as the previously sent MESSAGE request, e.g. by proxying the request to the l-CSCF 50 (step 5), which can query the HSS 20 in step 6 for the user's S-CSCF. Based on the fact, whether the previously allocated S-CSCFo 10 was de-allocated or not, there might be a need to allocate a new default S-CSCF to handle the SUBSCRIBE request.<br>
When the S-CSCFo 10 receives the SUBSCRIBE request in step 7, it needs to authenticate and authorize it, as required by the IETF specification RFC 3265. The successful subscription is acknowledged with a SIP 200 OK rsponse in steps 8a and 8b. In 3GPP IMS, the authentication is solved with the help of the JETF specification RFC 3325, wherein the AS 60 inserts its trustable identity to the SIP request. Based on this, the S-CSCFo 10 can decide whether the AS 60 is an authorized subscriber for the particular user's registration state, and if yes, it can install the subscription. According to the 3GPP specification N1-030285, all application servers of the HN are authorized to subscribe for the registration event package. Therefore, the AS 60 is authorized if it belongs to HN.<br>
However, when the user or IMS subscriber registers (again) in step 9, a NOTIFY request sent in steps 10a and 10b by the S-CSCFo 10 will inform the AS 60 about the changes in the user's registration state. The AS 60 acknowledges the receipt by a SIP 200 OK response in steps 11a and 11b. Thus, the AS 60 can re-initiate its MESSAGE request and route it via the S-CSCFo 10 to the UE 40 in steps 12<br><br>
and 14 (HSS query by l-CSCF 50 in step 13), to finally forward and deliver the MMS notification to the IMS subscriber of the UE 40 in step 15.<br>
Fig. 3 shows a schematic signaling diagram according to the second preferred embodiment where the AS 60 delivers its MMS notification to the IMS subscriber of the UE 40 using a refreshing subscription based on a subscription migration to the newly allocated S-CSCFn 12.<br>
In Fig. 3, steps 1 to 9 correspond to the first preferred embodiment as shown in Fig. 2, such that a description thereof can be omitted here for reasons of simplicity.<br>
However, when the user or IMS subscriber registers (again) in step 9, it is possible that the new S-CSCFn 12 will be assigned for it, since the assigned S-CSCF needs to have correct capabilities related to the registered state. In this case, the old S-CSCFo 10 will be informed about the re-assignment (step 10) via the Cx interface as described in the 3GPP specification TS 23.228. At this point, before the S-CSCFo 10 would drop the user's profile, it migrates the subscription to the newly assigned S-CSCFn 12 by issuing a SIP NOTIFY request in steps 11a and 11b including the subscription-state header containing a value "terminated". The AS 60 responds with a SIP 200 OK acknowledgement in steps 12a and 12b.<br>
According to the IETF specification RFC 3265, when performing subscription migration, the AS 60 initiates a re-subscription in step 13. After HSS query by the I-CSCF 50 in step 14, the SUBSCRIBE request in forwarded to the S-CSCFn 12 in step 15. The S-CSCFn 12 responds with a SIP 200 OK acknowledgement in steps 16a and 16b. Thus, with the help of migration, the subscription refreshing SUBSCRIBE request will terminate at the newly allocated S-CSCFn 12, which will perform the authentication and authorization steps as described above and will install the subscription.<br>
As the user or IMS subscriber is now registered, a NOTIFY request sent in steps 17a and 17b by the new S-CSCFn 12 will inform the AS 60 about the changes in the user's registration state. Thus, after acknowledgement (not shown), the AS 60 can re-initiate its MESSAGE request and route it via the S-CSCFn 12 (HSS query in step 19) to the UE 40 in steps 18 and 20, to finally forward and deliver the MMS notification to the IMS subscriber of the UE 40 in step 21.<br><br>
At this point, the AS 60 might decide to terminate the subscription to the user's registration state or it might keep the subscription. Assuming the latter case, the subscription will be terminated when the user deregisters itself or the network decides to perform a network initiated deregistration procedure. This is because the S-CSCFn 12 is de-allocated at this point and another S-CSCF might be allocated to handle the unregistered state. This procedure is described in the 3GPP specification N1-030296 and TS 24.229.<br>
Thus, in case of the subscription of the AS 60 gets terminated, i.e. it receives a NOTIFY request including a subscription-state header containing the value "terminated", it needs to refresh its subscription according S-CSCFn 12 if it still wants to receive further notifications on the user's registration state.<br>
According to the third preferred embodiment, a network user or IMS subscriber can be identified as being registered but still not reachable. To achieve this, the S-CSCFs are adapted to maintain in the registered state event package or in a new state event package a further information indicating whether the subscriber is reachable or not. As an example, the subscriber can be unreachable if there is a battery loss or temporary radio coverage loss at the subscriber's current location. The S-CSCF can identify this situation if the terminating traffic is not successfully delivered to the subscriber. Thus, a new event for the state when the subscriber is registered but not reachable, e.g. "not reachable" or "out of coverage" is introduced. Hence, when the subscriber is registered, the state can be either "reachable" or "unreachable".<br>
In particular, the state "reachable" may be set if the terminating traffic to the subscriber succeeds or an incoming session setup attempt is successful, or the terminal device or UE 40 makes a normal outgoing session set-up, or there is a normal re-registration of the UE 40. However, when the state is set to "unreachable" it still does not prevent the terminating traffic. But when a message sent from the AS 60, e.g. a MMS server or the like, fails, the AS 60 can subscribe to the S-CSCF in order to find out when the subscriber becomes reachable again. To achieve this, the AS 60 is subscribed for the registration event package or the other new event package of the subscriber.<br>
Thus, a finer granularity for the registration event package is provided, such that the AS 60 being subscribed to this event package can get a more accurate information about the availability of the subscriber.<br><br>
Fig. 4 shows a signaling diagram indicating a subscription of the AS 60 to the state event package of the IMS subscriber of the UE 40. In step 1, an MMS notification is routed in a SIP MESSAGE request, as defined in the IETF specification RFC 3428, to the I-CSCF 50 which initiates a query.to the HSS 20 in step 2 to obtain a routing information to the current S-CSCFo 10 serving the UE 40. Having received the routing information, the l-CSCF 50 forwards the SIP MESSAGE request in step 3 to the S-CSCFo 10. Then, it may be determined that the UE 40 is not reachable at present. The terminating S-CSCFo 10 could decide at this point that immediate messages are not forwarded to the terminating user. The decision could be based on some application logic or based on e.g. the caller preferences and/or the callee capabilities. The required information can be gained at the P-CSCF 30 which may indicate the non-reachable state in an error cause of a response message, e.g. the SIP 480 Temporarily Unavailable message. According to the IETF specification RFC 3261, a reason phrase in the response message can be used to convey the event state information. The corresponding Status Line looks as follows:<br>
Status Line = SIP-Version SP Status-Code SP Reason-Phrase CRLF<br>
The determination of the unreachable state of the UE 40 may be based on an expired timeout at the P-CSCF 30 waiting for a response to the MESSAGE request directed to the UE 40.The P-CSCF 30 therefore assumes that the UE 40 is not reachable, and generates the response message indicating the unreachable state.<br>
Accordingly, a message SIP 480 Temporary Unavailable indicating that the subscriber has not been found or is not available is issued in steps 4a and 4b via the l-CSCF 50 to the AS 60.<br>
In response to this negative reply, the AS 60 forwards a SIP SUBSCRIBE request via the l-CSCF 50 and after HSS query (not shown) to the S-CSCFo 10 in steps 5a and 5b. The S-CSCFo 10 acknowledges the subscription by a SIP 200 OK acknowledgement routed via the l-CSCF 50 to the AS 60 in steps 6a and 6b. As soon as a successful transaction of the UE40 is determined by the S-CSCFo 10, such as a mobile originated transaction or a mobile terminated transaction or a re-registration of the UE 40, the S-CSCFo 10 issues a SIP NOTIFY request comprising a state "registered" and an event "reachable" via the l-CSCF 50 to the AS 60 in steps 7a and 7b. The NOTIFY request is acknowledged by the AS 60 in steps 8a and 8b by a corresponding SIP 200 OK response.<br><br>
Accordingly, the AS 60 is informed that the UE 40 is reachable again and can now forward the SIP MESSAGE request comprising the MMS notification via the 1-CSCF 50 in step 9 (including HSS query by the l-CSCF 50 in step 10), and the S~ CSCFo 10 and the P-CSCF 30 to the UE 40 in steps 11a to 11c. In response thereto, the UE 40 forwards a SIP 200 OK acknowledgement to the AS 60 in steps 12a to 12d.<br>
As a result, the AS 60 can be informed about the connection state of the UE 40 and can thus be enabled to successfully toward the MMS notification to the UE 40.<br>
It is noted that the present invention is not restricted to the preferred embodiments described above. The present invention may be implemented in any data network, where a subscription to a registration state of a subscriber can be implemented to thereby inform a subscriber of a reachable or non-reachable state or a re-registration of a concerned network user. The embodiments may thus vary within the scope of the attached claims.<br><br><br><br><br>
New Claims<br>
1.	A method of routing a message to a temporarily unavailable network user<br>
(40),<br>
said method comprising the step of:<br>
routing said message to said network user (40) when said network user (40) is available again, characterized by the further steps of:<br>
subscribing to a state event package of said network user (40), and generating a notification when the state of said network user (40) is changed to indicate a state when said network user (40) is available again or when said network user (40) is registered again,<br>
wherein said subscribing step is performed in response to the receipt of a response indicating that said network user is not reachable or not registered, and<br>
wherein said routing step is performed in response to the receipt of said notification.<br>
2.	A method according to claim 1, wherein said state event package is a regis<br>
tration state event package.<br><br>
A method according to claim 1 or 2, wherein said state when said network user is available again is a state where said network user is reachable again.<br>
A method according to any one of the preceding claims, wherein said notification comprises an information indicating that said network user is either reachable or out of coverage.<br>
A method according to claim 4, wherein said information is an event or flag information.<br>
A method according to claims 4 or 5, wherein after an initial registration of said network user, said information is set to the state indicating that said network user is available.<br>
A method according to any one of claims 4 to 6, wherein said information is set to the state indicating that the network user is out of coverage, if terminal traffic to said network user has failed.<br>
A method according to claim 7, wherein said out of coverage state is determined based on an error cause of a response message.<br>
A method according to any one of claims 4 to 8, wherein said information is set to the state indicating that the network user is reachable, if a terminal device (40) of said network user performs an outgoing session set-up or a re-registration.<br>
A method according to any one of the preceding claims, wherein said re-registration is determined based on a notification about a re-assignment of said network user.<br>
A method according to claim 10, further comprising the step of refreshing the subscription in response to said notified re-registration.<br><br>
A method according to any one of the preceding claims, wherein said message is an MMS notification.<br>
A network device for serving a network user (40) and a network server (60) in a data network and for routing a message from said network server (60) to a temporarily unavailable network user (40),<br>
said network device (10, 12) being arranged to route said message to said network user (40) when said network user is available again, characterized in that said network device (10,12) is further arranged<br>
to generate a response for said network server (60) indicating that said network user (40) is not reachable or not registered, to subscribe said network server (60) to a state event package of said network user (40) upon receipt of a subscribe request sent from said network server upon receipt of said response indicating that said network user (40) is not reachable or not registered by said network server,<br>
to generate a notification when the state of said network user is changed to indicate a state when said network user is available again or when said network user is registered again, and to route said message to said network user (40) in response to the receipt of said message sent from said network server in response to the receipt of said notification.<br>
A device according to claim 13, wherein said notification comprises an information indicating that said network user is either reachable or out of coverage.<br>
A device according to claim 14, wherein said network device is arranged to set said information to the state indicating that said network user is available, after an initial registration of said network user or if a terminal device (40) of said network user performs an outgoing session set-up or an incoming session setup attempt is successful.<br><br>
A device according to claim 14 or 15, wherein said network device is arranged to set said information to the state indicating that said network user is out of coverage, if terminal traffic to said network user has failed.<br>
A device according to any one of claims 13 to 16, wherein said network devices comprises a call state control function (10,12) of an IMS network.<br>
A network server for generating messages to be routed to network users<br>
(40) and for routing a message to a temporarily unavailable network user<br>
(40) when said network user (40) is available again<br>
characterized in that<br>
said network user (60) being arranged<br>
to subscribe to a'state event package of said unavailable network user (40) in response to the receipt of a response generated by a network device (10, 12) indicating that said network user (40) is not reachable or not registered, and<br>
to route said message to said network user (40) in response to the receipt of a notification generated by said network device (10, 12) when the state of said network user (40) is changed to indicate a state when said network user (40) is available again or when said network user (40) is registered again.<br>
A server according to claim 18, wherein said network server (60) is arranged to perform said subscribing in response to the receipt of a message indicating that said network user is not reachable or not registered.<br>
A server according to claim 18 or 19, wherein said network server (60) is arranged to subscribe for a registration event package of said network user.<br>
A server according to any one of claims 18 to 20, wherein said server (60) is arranged to refresh said subscription in response to a notified re-registration of said network user.<br><br>
22.	A server according to any one of claims 18 to 21, wherein said network<br>
server (60) is an MMS server.<br>
23.	A system for routing a message to a non-available network user, said sys<br>
tem comprising a network server according to any one of claims 18 to 22,<br>
and a network device according to any one of claims 13 to 17.<br><br></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjY2Ni1jaGVucC0yMDA1IGFic3RyYWN0IGR1cGxpY2F0ZS5wZGY=" target="_blank" style="word-wrap:break-word;">2666-chenp-2005 abstract duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjY2Ni1jaGVucC0yMDA1IGNsYWltcyBkdXBsaWNhdGUucGRm" target="_blank" style="word-wrap:break-word;">2666-chenp-2005 claims duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjY2Ni1jaGVucC0yMDA1IGRlc2NyaXB0aW9uKGNvbXBsZXRlKSBkdXBsaWNhdGUucGRm" target="_blank" style="word-wrap:break-word;">2666-chenp-2005 description(complete) duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjY2Ni1jaGVucC0yMDA1IGRyYXdpbmdzIGR1cGxpY2F0ZS5wZGY=" target="_blank" style="word-wrap:break-word;">2666-chenp-2005 drawings duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjY2Ni1jaGVucC0yMDA1LWFic3RyYWN0LnBkZg==" target="_blank" style="word-wrap:break-word;">2666-chenp-2005-abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjY2Ni1jaGVucC0yMDA1LWNsYWltcy5wZGY=" target="_blank" style="word-wrap:break-word;">2666-chenp-2005-claims.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjY2Ni1jaGVucC0yMDA1LWNvcnJlc3BvbmRuZWNlLW90aGVycy5wZGY=" target="_blank" style="word-wrap:break-word;">2666-chenp-2005-correspondnece-others.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjY2Ni1jaGVucC0yMDA1LWNvcnJlc3BvbmRuZWNlLXBvLnBkZg==" target="_blank" style="word-wrap:break-word;">2666-chenp-2005-correspondnece-po.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjY2Ni1jaGVucC0yMDA1LWRlc2NyaXB0aW9uKGNvbXBsZXRlKS5wZGY=" target="_blank" style="word-wrap:break-word;">2666-chenp-2005-description(complete).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjY2Ni1jaGVucC0yMDA1LWRyYXdpbmdzLnBkZg==" target="_blank" style="word-wrap:break-word;">2666-chenp-2005-drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjY2Ni1jaGVucC0yMDA1LWZvcm0gMS5wZGY=" target="_blank" style="word-wrap:break-word;">2666-chenp-2005-form 1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjY2Ni1jaGVucC0yMDA1LWZvcm0gMTgucGRm" target="_blank" style="word-wrap:break-word;">2666-chenp-2005-form 18.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjY2Ni1jaGVucC0yMDA1LWZvcm0gMy5wZGY=" target="_blank" style="word-wrap:break-word;">2666-chenp-2005-form 3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjY2Ni1jaGVucC0yMDA1LWZvcm0gNS5wZGY=" target="_blank" style="word-wrap:break-word;">2666-chenp-2005-form 5.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjY2Ni1jaGVucC0yMDA1LXBjdC5wZGY=" target="_blank" style="word-wrap:break-word;">2666-chenp-2005-pct.pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="229562-methods-for-producing-phenylalanine-derivatives-having-a-quinazolinedione-skeleton-and-intermediates-for-production-thereof.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="229564-method-for-recording-data-on-a-record-carrier.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>229563</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>2666/CHENP/2005</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>13/2009</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>27-Mar-2009</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>18-Feb-2009</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>17-Oct-2005</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>NOKIA CORPORATION</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>KEILALAHDENTIE 4, FIN-02150 ESPOO,</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>HUOTARI, SEPPO</td>
											<td>ALBERGAN ESPLANADI 4 B 31, FIN-02600 ESPOO,</td>
										</tr>
										<tr>
											<td>2</td>
											<td>TUOHINO, MARKKU</td>
											<td>KOIVUSYRJA 25F, FIN-02130 ESPOO,</td>
										</tr>
										<tr>
											<td>3</td>
											<td>KISS, KRISZTIAN</td>
											<td>12278 SCRIPPS SUMMIT DR., SAN DIEGO, CALIFORNIA,</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>H04L 12/58</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/IB04/00523</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2004-03-01</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>10/462,824</td>
									<td>2003-06-17</td>
								    <td>U.S.A.</td>
								</tr>
								<tr>
									<td>2</td>
									<td>60/454,632</td>
									<td>2003-03-17</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/229563-routing-a-message-to-a-temporarily-unavailable-network-user by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 10:16:01 GMT -->
</html>
