<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/218249-apparatus-for-encoding by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 12:38:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 218249:&quot;APPARATUS FOR ENCODING&quot;</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">&quot;APPARATUS FOR ENCODING&quot;</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>A signal encoding method and apparatus for encoding input digital signals by so-called high efficiency encoding, and a recording medium having the encoded signals. An attack portion and a release portion of audio signals are detected and a gain control function is selected at least for waveform elements (waveform signals) of a signal portion ahead of the attack portion and waveform elements of the release portion from among plural gain control functions responsive to characteristics of the waveform signals. At least the waveform elements (waveform signals) ahead of the attack portion and the waveform elements of the release portion are gain controlled. The resulting gain-controlled audio signals are transformed into plural spectral components which are encoded along with the control information for gain control. With the present encoding method and apparatus, the encoding efficiency may be improved, while pre—echo and post-echo may be effectively prohibited and the sound quality may be prohibited from being deteriorated even for the high compression ratio</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>The present invention relates to a method and apparatus for encoding a signal waveform. Most specifically, the invention relates to a signal encoding method and apparatus for encoding input digital signals by so-called efficiency encoding and a recording medium having the encoded signals recorded thereon. The invention also relates to a method for transmitting the encoded signals, and a signal decoding apparatus for decoding the encoded signals.<br>
Description   of   the   Related   Art<br>
There  exist  a variety  of  high efficiency encoding   techniques<br>
of     encoding     audio     or      speech     signals.	Examples      of     these<br>
techniques include transform coding in which a frame of digital signals representing the audio signal on the time axis is converted by an orthogonal transform into a block of spectral coefficients representing the audio signal on the frequency axis, and a sub-band coding in which the frequency band of the audio signal is divided by a filter bank into a plurality of sub-bands without forming the signal into frames along the time axis prior to coding. There is also known a combination of sub-band coding and transform coding, in which digital signals representing the audio signal are divided into a plurality of frequency ranges by sub-band coding, and transform coding is applied to each of the<br>
frequency ranges.<br>
Among the filters for dividing a frequency spectrum into a plurality of equal-width frequency ranges, there is the quadrature mirror filter (QMF) as discussed in R.E. Crochiere, Digital Coding of Speech in Sub-bands, 55 Bell Syst. Tech J. No . 8 (1976). With such QMF filter, the frequency spectrum of the signal is divided into two equal-width bands. With the QMF, aliasing is not produced when the frequency bands resulting from the division are subsequently combined together.<br>
In "Polyphase Quadrature Filters- A New Subband Coding Technique", Joseph H. Rothweiler ICASSP 83, Boston, there is shown a technique of dividing the frequency spectrum of the signal into equal-width frequency bands. With the present polyphase QMF, the frequency spectrum of the signals can be divided at a time into plural equal-width frequency bands.<br>
There is also known a technique of orthogonal transform including dividing the digital input audio signal into frames of a predetermined time duration, and processing the resulting frames using a discrete Fourier transform (DFT) , discrete cosine transform (DCT) and modified DCT (MDCT) for converting the signal from the time axis to the frequency axis. Discussions on MDCT<br>
-*n*-~<br>
may be found in J.P. Princen and A.B. Bradley, Subband Transform Coding Using Filter Bank Based on Time Domain Aliasing Cancellation", ICASSP 1987.<br>
By quantizing the signals divided on the band basis by the<br>
filter or orthogonal transform, it becomes possible to control :he band subjected to quantization noise and psychoacoustically<br>
more efficient coding may be performed by utilizing the so-called<br>
masking effects. If the signal components are normalized from<br>
band to band with the maximum value of the absolute values of the/ signal components, it becomes possible to achieve more efficient coding.;<br>
For quantizing signals split into plural frequency bands, it is known to divide the frequency spectrum into plural frequency bands taking into account the psychoacoustic characteristics of the human hearing mechanism. That is, spectral coefficients representing an audio signal on the frequency axis may be divided into a plurality of, for example, 25, critical frequency bands. The width of the critical bands increase with increasing frequency.<br>
For encoding signals of the respective frequency bands, a pre-set number of bits are allocated from one frequency band to another, or encoding by adaptive bit allocation is performed from one frequency band to another. For example, when applying adaptive bit allocation to the spectral coefficient data<br>
resulting from MDCT, the spectral coefficient data generated by<br>
the MDCT within each of the critical bands is quantized using an adaptively allocated number of bits.<br>
There are presently known the following two bit allocation techniques. For example, in IEEE Transactions of Acoustics,<br>
Speech and Signal Processing, vol.ASSP-25, No . 4 , August 1977, bit allocation is carried out on the basis of the amplitude of the signal in each critical band. This technique produces a flat quantization noise spectrum and minimizes the noise energy, but the noise level perceived by the listener is not optimum because<br>
/<br>
the technique does not effectively exploit the psychoacoust ic masking effect.<br>
In the bit allocation technique described in M.A. Krassner, The Critical Band Encoder- Digital Encoding of the Perceptual Requirements of the Auditory System, ICASSP 1980, the psychoacoust ic masking mechanism is used to determine a fixed bit allocation that produces the necessary signal-to-noise ratio for each critical band. However, if the signal-to-noise ratio of such a system is measured using a strongly tonal signal, for example, a 1 Khz sine wave, non-optimum results are obtained because of the fixed allocation of bits among the critical bands.<br>
For overcoming these inconveniences, a high efficiency encoding apparatus has been proposed in which the total number of bits available for bit allocation is divided between a fixed bit allocation pattern pre-set for each small block and a block-based signal magnitude dependent bit allocation. The division<br>
-4r*_<br>
ratio is set in dependence upon a signal which is relevant to the input signal, such that, the smoother the signal spectrum, the higher becomes the division ratio for the fixed bit allocation pattern, that is the smaller becomes the division ratio for<br>
block-based signal magnitude dependent bit allocation.<br>
With this technique, if the energy is concentrated in a particular spectral component, as in the case of a sine wave input, a larger number of bits are allocated to the block containing the spectral component, for significantly improving<br>
/<br>
the signal-to-noise characteristics in their entirety. Since the human auditory system is highly sensitive to a signal having acute spectral components, such technique may be employed for improving the signal-to-noise ratio for improving not only measured values but also the quality of the sound perceived by the 1i stener.<br>
In addition to the above techniques, a variety of other techniques have been proposed, and the model simulating the human auditory system has been refined, such that, if the encoding device is improved in its ability, encoding may be made with higher efficiency in light of the human auditory system.<br>
If DFT or DCT is utilized as the method for transforming the waveform signal (sample data) such as the time-domain digital audio signals, into a spectral signal, transform is executed using a time block made up of M sample data, and orthogonal<br>
transform such as DFT or DCT is carried out on the block basis.<br>
Such block-based orthogonal transform produces M independent real-number data (DFT coefficient data or DCT coefficient data). The M real-number data, thus produced, are subsequently quantized and encoded to give encoded data.<br>
For decoding the encoded data to regenerate playback ""•oustic signals, the encoded data are decoded and dequantized to give real-number data, which then is inverse orthogonal-transformed by IDFT or IDCT. The resulting blocks made up of<br>
waveform element signals are linked together for regenerating<br>
/ acoustic signals.<br>
The playback acoustic signals, thus generated, suffer from psychoacoust ical ly undesirable linking distortion caused by block linking. For reducing the inter-block linking distortion, Ml sample data of both neighboring blocks are overlapped at the time of orthogonal transform by DFT or DCT.<br>
However, if Mi sample data each are overlapped on both neighboring blocks for carrying out orthogonal transform, M sample data are produced for (M-M1) sample data on an average, so that the number of real-number data obtained on orthogonal transform is larger than the number of the original sample data employed for orthogonal transform. Since the real-number data are subsequently quantized and encoded, such increase in the number of the real-number data obtained on orthogonal transform beyond the number of the original sample data is not desirable<br>
in view of the coding efficiency.<br>
If MDCT is employed for orthogonal transform of acoustic data consisting of sample data such as digital audio signals, orthogonal transform is carried out using 2M sample data by overlapping M sample data on both neighboring blocks, for<br>
reducing the inter-block linking distortion for producing independent M real-number data (MDCT coefficient data). In this manner, M real-number data are obtained for M sample data on an average with MDCT so that higher efficiency encoding may be realized than with DFT or DCT .<br>
For decoding the encoded data obtained on quantizing and encoding the real-number data by MDCT for generating playback acoustic signals, the encoded data is decoded and dequantized to give real-number data which is then inverse orthogonal-transformed by IMDCT on the basis of blocks corresponding to the overlapped blocks at the time of encoding to produce in-block waveform elements. These in-block waveform elements are added together with interference for reconstructing acoustic signals.<br>
In general, if the length of a block for orthogonal transform (size of the block along time axis) for orthogonal transform is increased, frequency resolution is improved. If the acoustic signals, such as digital audio signals, are orthogonal-transformed using such long blocks, the signal energy is concentrated in specified spectral components. On the other hand, if orthogonal transform is performed for blocks in which sufficiently long overlap is accorded in both neighboring blocks,<br>
-.~i~-<br>
inter-block distortion of acoustic signals may be reduced satisfactorily. If orthogonal transform is performed by MDCT on blocks in which the number of sample data equal to one-half the number of sample data of a block are overlapped between the<br>
neighboring blocks, and if the number of the real-number data obtained on orthogonal transform is not increased as compared to the number of the original acoustic signals, a higher encoding efficiency may be achieved than in the case of orthogonal<br>
transform employing DFT and DCT.<br>
/ Meanwhile, if the acoustic signals are blocked and resolved<br>
on the block basis into spectral components (real-number data obtained on orthogonal transform in the previous example) and the resulting spectral components are quantized and encoded, the quantization noise is produced in the acoustic signals subsequently produced at the time of block-based synthesis.<br>
If the original acoustic signals contain signal components with abruptly changing signal levels, that is portions with abruptly changing levels (transient portions) in the waveform elements, and such acoustic signals are encoded and subsequently decoded, the quantization noise corresponding to the transient portions is spread to portions of the original acoustic signal other than the transient portions.<br>
It is assumed that, as audio signals to be encoded, a waveform signal SW1 is employed, in which a quasi-stationary signal FL exhibiting only slight transition and low levels is<br>
jn*~<br>
followed by an attack portion AT with abruptly increasing sound level, as a transient portion, followed in turn by a succession of high level signals, as shown in Fig.lA. If such waveform signal SW1 is blocked in a unit time width, signal components in<br>
«ach block is orthogonally transformed, and the resulting spectral signal components are quantized and encoded so as to be then inverse orthogonally transformed, decoded and dequantized, there is produced a waveform signal SW1 in which a larger quantization noise QN1 ascribable to the attack portion AT is superimposed over the entire block, as shown in Fig.1C. The result is that the larger quantization noise QN1, higher in level than the quasi-stationary signal FL, temporally previous to the attack portion AT, is produced due to the attack portion AT in the quasi—stationary signal FL, as shown in Fig.4C. The quantization noise QN1, appearing in the quasi-stationary signal portion, temporally previous to the attack portion AT, cannot be masked by concurrent masking by the attack portion AT and hence proves hindrance to the hearing sense. Such quantization noise QN1, appearing ahead of the attack portion AT where the sound level rises abruptly, is generally termed pre-echo. For orthogonal transform of signal components in each block, the block is multiplied prior to orthogonal transform by a transform windowing function TW having a characteristic curve of being smoothly sloped at both skirt portions for prohibiting the<br>
spectral distribution from being spread over a wide range.<br>
In particular, if waveform signals are orthogonally transformed using a long block length for improving the frequency resolution as described previously, time resolution is lowered, thus generating pre-echo continuing for a prolonged time.<br>
If the block length for orthogonal transform is reduced, the time period of generation of the quantization noise is reduced. Thus, if the block length for orthogonal transform is reduced in the vicinity of the attack portion, the time period of generation of pre-echo may be reduced, thus diminishing the hindrance to the hearing sense caused by pre-echo.<br>
Referring to prevention of pre-echo by reducing the block length in the vicinity of the attack portion, the block for orthogonal transform may be reduced in length in the vicinity of the transient portion, such as the attack portion AT with abruptly increased sound level, in the waveform signal SW having the quasi-stationary signal FL in addition to the attack portion AT as shown in Fig.2A, and orthogonal transform may be applied to signal components within the short block. In this manner, the time period of generation of pre-echo may be reduced sufficiently within the short block. If the time period of generation of pre-echo in a block can be reduced sufficiently, it becomes possible to reduce the hindrance to the hearing sense by the so-called backward masking effect by the attack portion AT. If orthogonal transform is applied to the signal components in the short block, the transform windowing function TWS as shown in Fig.2B is<br>
applied before proceeding to orthogonal transform.<br>
On the other hand, if the block length for orthogonal transform is reduced for the quasi-stationary signal FL and for signal portions downstream of the attack portion AT, frequency<br>
resolution is lowered thus lowering the encoding efficiency for these signal portions. Thus it is preferred to increase the block length for orthogonal transform for these signal portions since the energy is then concentrated in particular spectral components thus raising the encoding efficiency.<br>
/<br>
Thus, in effect, the block length for orthogonal transform is selectively switched for orthogonal transform depending upon the properties of various portions of the waveform signals SW. If the block length is selectively switched in this manner, the transform windowing function is similarly switched depending upon the selected block length. For example, the transform windowing function TW is selectively switched so that a long transform windowing function TWL is applied for a block consisting of the quasi-stationary signal SL excluding the neighborhood of the attack portion AT, and a short transform windowing function TWS is applied to a short block in the neighborhood of the attack portion AT, as shown in Fig.2B.<br>
However, if desired to implement the method of selectively switching the block length for orthogonal transform depending upon the characteristics of the various portions of the waveform signals in an actual configuration, it becomes necessary to<br>
-jiWS.—-<br>
provide orthogonal transform means capable of dealing with orthogonal transform with blocks of different lengths in an encoding apparatus, while it also becomes necessary to provide inverse orthogonal transform means capable of dealing with<br>
inverse orthogonal transform with blocks of different lengths in a decoding apparatus.<br>
In addition, if desired to change the block length for orthogonal transform, the number of spectral components resulting<br>
from orthogonal transform is proportional to the block length,<br>
/ such that, if these spectral components are grouped together in<br>
terms of critical bands as units for encoding, the number of spectral components contained in the critical bands differs with block lengths, thus complicating the subsequent encoding and decoding operations.<br>
In short, the method of varying the block length for orthogonal transform has a drawback that both the encoding apparatus and the decoding apparatus become complex in structure.<br>
For effectively prohibiting the generation of pre-echo in the application of the above-mentioned orthogonal transform such as DFT or DCT for resolution into frequency components, as the block length for orthogonal transform is maintained at a constant value capable of assuring sufficient frequency resolution, there is disclosed such a technique as disclosed in, for example, JP Patent Kokai Publication 61-201526 or 63-7023^5 corresponding to<br>
European Patent Publication Nos.0193143 and 0251028\ which are<br>
In these EP publications, there is disclosed a method in which an input signal waveform is sliced at an interval of a block made up of plural data samples, a windowing function is<br>
applied to each block, an attack portion is detected, waveform signals of small amplitudes directly previous to the attack portion, that is quasi-stationary signals, are amplified and orthogonal transform, such as DFT or DCT, is applied to the amplified waveform signals to produce spectral components which are encoded.<br>
For decoding, decoded spectral components are inverse orthogonal transformed by inverse DFT (IDFT) or inverse DCT (IDCT) and correction is made for amplification performed on the signals directly ahead of the attack portion at the time of encoding. This prohibits occurrence of the pre-echo. Since the block length for orthogonal transform may be perpetually maintained constant in this manner, the encoding apparatus and the decoding apparatus may be simplified in structure.<br>
Referring to Fig.3, the operating principle of encoding and decoding employing the windowing technique disclosed in the above publications is explained.<br>
For encoding, the waveform signal SW shown in Fig.SA is sliced in blocks each of a pre-set length and sample data is overlapped at either ends with both neighboring blocks. The waveform signals SW in the respective blocks are multiplied with<br>
transform windowing functions TWa to TWc (Figs.SB) for prohibiting diffusion of the spectral distribution. It is then checked if there is any attack portion AT in each block where the input waveform signal SW is abruptly increased in amplitude. In<br>
the example of Fig.3, since the attack portion AT exists in the block associated with the transform windowing function TWb, the signal components in this block are multiplied with a gain control function GCb as shown at b in Fig.SC for amplification.<br>
The gain control function GCb is such a function which multiplies<br>
/ the signal of small amplitude directly ahead of  the attack<br>
portion AT in the block, that is the quasi-stationary signal FL, by R, while multiplying the signal of the remaining portion with unity. In the example of Fig.3, since there is no attack portion AT in the blocks associated with the transform windowing functions TWa and TWc, the signal components in these blocks are multiplied with unity by gain control functions GCa and GCc, respectively, for not performing signal amplification. The respective blocks are orthogonally transformed by DFT or DCT to produce spectral component signals which are encoded.<br>
For decoding, decoded spectral components are inverse orthogonally transformed by IDFT or IDCT and corrected for gain control (amplification of small-amplitude signals) performed during encoding on the signals directly ahead of the attack port ion.<br>
With the above-described conventional technique, it becomes<br>
possible to prevent the pre-echo from occurring, with the block length for orthogonal transform remaining unchanged, by the gain control operation performed during encoding on the small amplitude signals directly ahead of the attack portion and by the<br>
corresponding gain control correction performed during decoding.<br>
With the above-described method for preventing generation of pre-echo by gain control and gain control correction, the gain control amount for the attack portion is fixed, that is, a gain control function of multiplying the signal directly ahead of the attack portion with a fixed factor R on detection of the attack portion and a gain control function of multiplying the signal with unity on detection of no attack portion, are employed, in other words, two gain control functions of fixed values are alternatively employed in dependence upon detection of presence or absence of the attack portion. Thus it is difficult to prohibit the sound quality from being deteriorated especially in case of a higher compression ratio.<br>
Next, it is assumed that, as an audio signal to be encoded, a waveform signal SW2 shown in Fig.4A is employed, in which a quasi-stationary signal FL with little transition and with a low signal level is followed by the attack portion AT with an abruptly rising sound level as the transient portion followed in turn by a release portion RE with abruptly decreased sound level. Such waveform signal SW2 is blocked with a unit block time width and signal components in the block are orthogonally transformed<br>
to produce spectral components which are quantized and encoded. If the resulting signals are inverse orthogonally transformed, decoded and dequantized, the resulting waveform signals SW2 is overlaid with the large quantization noise over the entire block<br>
due to the attack portion AT. Thus, the large quantization noise<br>
due to the attack portion AT appears in the quasi-stationary<br>
signal SL temporally previous to the attack portion AT and in the<br>
release portion RE temporally posterior to the attack portion AT,<br>
as shown in Fig.4C.	This quantization noise<br>
is larger in level than the quasi-stationary signal FL or the Batter portion of the release portion RE. Such quantization noise QN2F appearing in the signal portion temporally previous to the attack portion AT, that is pre-echo, and the quantization noise QN2B, appearing in the signal portion temporally posterior to the attack portion AT, cannot be masked by concurrent masking by the attack portion AT, thus proving hindrance to the hearing sense. The quantization noise QN2B appearing after the attack portion AT is generally termed post-echo. The transform windowing function TW similar to that shown in Fig. IB is also shown in Fig.4B.<br>
It is possible with the technique disclosed in the prior-art system to prevent the pre-echo from occurring, while it is not possible to prevent post-echo from occurring. SUMMARY OF THE INVENTION<br>
It is therefore an object of the present invention to provide a signal encoding method and apparatus wherein pre-echo and post-echo may be effectively prohibited with good encoding efficiency without complicating the construction of the apparatus and wherein the encoding without deterioration in the sound<br>
quality may be assured even with the high compression ratio.<br>
It is another object to provide a corresponding sjignal decoding method and apparatus, an information recording medium having the encoded signals recorded thereon, and an information transmitting method \f or transmitting the encoded signals.<br>
In one aspect, the present invention provides a method -, for encoding a waveform signal including detecting an attack portion of the waveform signal with an abruptly increased signal level, detecting a release portion of the waveform signal with an abruptly decreased signal level, adaptively selecting the gain control amount at least for waveform elements ahead of the attack portion and waveform elements of the release portion, responsive to characteristics of the waveform signals, from among a plurality of gain control amounts, gain-controlling at least the waveform elements ahead of the attack portion and the waveform elements of the release portion, using the selected gain control amount, transforming the waveform signals into a plurality of frequency components, and encoding the control information for gain control and the frequency components.<br>
In another aspect, the present invention provided an apparatus for decoding encoded signals for restoring waveform<br>
signals wherein the encoded signals at least comprise an encoded version of a plurality of frequency components transformed from waveform elements and an encoded version of the control correction information for gain control correction for waveform<br>
elements ahead of an attack portion with an abruptly rising signal level and for waveform elements of a release portion with an abruptly decaying signal level. The decoding apparatus includes decoding means for decoding the encoded signals in order to take out the plural frequency components and the control<br>
/<br>
correction information, transform means for transforming the frequency components into waveform signals made up of plural waveform elements, means for performing gain control correction at least of the waveform elements ahead of the attack portion and the waveform elements of the release portion using the gain control correction amounts selected from among the plural gain control correction amounts on the basis of the control correction information, and means for restoring waveform signals from the waveform elements.<br>
According to the present invention, the attack portion and the release portion are detected from the waveform signals, and the waveform elements of a signal portion ahead of the attack portion and waveform signals of the release portion are gain controlled with gain control amounts adaptively selected responsive to characteristics of the waveform signals. During decoding, the waveform elements gain-controlled during encoding<br>
are corrected for gain control performed during encoding. Thus the noise energy generated in the signal portion ahead of the attack portion and that generated in the release portion may be lowered to an imperceptible level.<br>
Accordingly, the present invention provides an apparatus for encoding a digital audio waveform signal the apparatus comprising:<br>
windowing means which slices said input digital audio waveform signal into blocks as waveform element each of preset length of which blocks are overlapped with the neighboring blocks and multiplies with a transform windowing function.<br>
attack/release portion detection means which detects an attack portion of the waveform element from said windowing means with an abruptly increased signal level and a release portion of the waveform signal with an abruptly decreased signal level, and adaptively selects a gain control amount for said waveform element responsive to characteristics of the waveform signal, from among a plurality of gain control amounts, and outputs an attack/release portion detection flag, a position information for said detected attack or release portion, an information on said selected gain control amount, and said waveform element from said windowing means;<br>
gain control means which performs a gain control operation of amplifying said waveform elements ahead of the attack portion and waveform elements of the release portion, using the selected gain control amount from said attack/release portion detection means;<br>
transforming means which transforms said waveform element from said gain control means into a plurality of frequency components;<br>
normalization and quantization means which normalizes and quantizes said plurality of frequency components from said transforming means; and<br>
encoding means which encodes information including said attack/release portion detection flag, said position information for said detected attack or release portion, and said information on the selected gain control amount from said attack/release portion detection means, and said frequency components from said normalization and quantization means.<br>
BREIF DESCRIPTION OF THE ACCOMPANYING DRAWINGS     -<br>
Figs.lA, IB and 1C are flowcharts for illustrating the principle of generation of pre-echo by transform coding.<br>
Figs.ZA and 2B illustrate the conventional windowing technique for preventing the generation of pre-echo.<br>
Figs.SA, 3B and 3C illustrate the conventional gain controlling technique for preventing the generation of pre-echo.<br>
Figs.4A, 4B and 4C are flowcharts for illustrating the principle of generation of post-echo by transform coding.<br>
Fig.5 is a schematic block circuit diagram showing an arrangement of an encoding apparatus according to a preferred embodiment of the present invention.<br>
Fig.6 is a schematic block circuit diagram showing an arrangement of a decoding apparatus according to a preferred embodiment of the present invention.<br>
Figs.7A, 7B, 1C, 7D and 7E illustrate the gain control operation for the attack portion during windowing in the preferred embodiment of the invention.<br>
Figs.SA, 8B, 8C, 8D and 8E illustrate the gain control operation for the attack and release portions during windowing in the preferred embodiment of the invention.<br>
Fig.9 is a block circuit diagram showing a detailed structure of essential portions of the encoding apparatus shown in F i g.1.<br>
Fig.10  is  a block  circuit  diagram showing  a  detailed<br><br>
structure of essential portions of the decoding apparatus shown in Fig.2.<br>
Fig.11 is a flowchart schematically showing a typical sequence of the processing operations for generating gain control<br>
functions for the attack and release portions during encoding<br>
according to the present invention.<br>
Fig.12 is a flowchart schematically showing a typical sequence of the processing operations for generating gain control functions for the attack portion during encoding according to the present invention.<br>
Fig.13 is a flowchart schematically showing a typical sequence of the processing operations for generating gain control functions for the release portion during encoding according to the present invention.<br>
Fig.14 is a flowchart schematically showing a typical sequence of the processing operations for synthesizing an ultimate gain control function from a gain control function for the attack portion and a gain control function for the release portion during encoding according to the present invention.<br>
Figs.l5A, 15B, 15C and 15D illustrate the manner of synthesizing an ultimate gain control function from a gain<br>
^n«~<br>
control function for the attack portion and a gain control function for the release portion during encoding according to the present invention.<br>
Fig.16 shows  a recording or transmission  format for a<br>
codestring signal obtained by the encoding according to the present invention.<br>
Fig.17 is a flowchart schematically showing a typical sequence of the processing operations for generating a gain control correction function for the release portion during<br>
/<br>
encoding according to the present invention. DESCRIPTION OF THE PREFERRED EMBODIMENT<br>
Referring to the drawings, preferred embodiments of the present invention will be explained in detail.<br>
Fig.5 illustrates a basic arrangement of an encoding apparatus for implementing the signal encoding method according to the present invention. The encoding apparatus shown in Fig.5 includes a frequency component resolving circuit 2 for dividing waveform signals into plural bands for resolution into plural frequency components, and normalization circuits 3 to 6 for normalizing frequency components of the respective bands. The encoding apparatus also includes a quantization circuit 8 for quantizing the normalized frequency components and a quantization step information generating circuit 7 for generating the quantization step information for quantization. In addition, the encoding apparatus includes a multiplexor 12 for generating a<br>
..i*t_<br>
codestring signal from the quantized frequency components, normalization coefficient information for normalization and the quantization step information. In Fig.5, there are also shown an ECC encoder 14, a modulation circuit 15 and a recording head<br>
16 as a configuration for recording the codestring signal generated by the encoding apparatus on an optical disc 17 as an example of the information recording medium.<br>
In Fig.3, to an input terminal 1 is fed a digital audio signal as an acoustic signal consisting of sample data (waveform elements). This digital audio signal is resolved into frequency components by a frequency resolving circuit 2. The method of resolving the digital audio signal into frequency components by the frequency component resolving circuit 2 may be enumerated by orthogonal transform, such as DFT, DCT and MDCT. With the frequency spectrum splitting by a filter, such as QMF, the digital audio signal in the time domain may be split into plural frequency components by the filter. With the orthogonal transform, time-domain digital audio signals are blocked every plural sample data and the block-based sample data are orthogonally transformed to produce frequency components (spectral components or real-number data) which then are grouped on the band basis.<br>
With the frequency component resolution circuit 2, splitting into frequency components is performed by a method consisting in frequency spectrum splitting by a filter, such as QMF, followed by orthogonal transform. The frequency component resolution circuit 2 splits the frequency spectrum of the digital audio signal supplied thereto into bands by a filter such as QMF and the frequency components of the resulting frequency bands are<br>
blocked. The blocked frequency components are orthogonally transformed using MDCT from block to block and the resulting frequency components are grouped on the band basis. The band widths of the frequency bands by the filter or the frequency components after orthogonal transform are grouped on the band<br>
/<br>
basis to, for example, a uniform bandwidth, or to a non-uniform bandwidth, in agreement with, for example, the critical bandwidth. Although the frequency components produced by the frequency component resolution circuit 2 are divided in the embodiment of Fig.3 into four bands, the number may be decreased or increased, if so desired.<br>
The frequency components of the four bands, obtained by the frequency component resolution circuit 2, are sent to normalization circuits 3 to 6 provided in association with the respective bands. The normalization circuits 3 to 6 normalize the frequency components supplied thereto at an interval of a pre-set time unit. If orthogonal transform is performed in the frequency component resolution circuit 2, the unit time is of the same length as the block for orthogonal transform. The normalization circuits 3 to 6 output normalized data of the<br>
normalized frequency components and normalization coefficient<br>
data specifying the normalization coefficients used for normalization. The normalized signals from the normalization circuits 3 to 6 are provided to associated quantization circuits 8 to 11, respectively. The normalization coefficient data from<br>
t:ie normalization circuits 3 to 6 are sent to a multiplexor 12.<br>
The quantization circuits 8 to 11 quantize the normalized daca supplied from the normalization circuits 3 to 6 based upon the quantization precision (step) information supplied from a quantization precision decision circuit 7.<br>
/<br>
The frequency components of the four bands from the frequency component resolution circuit 2 are also sent to the quantization precision decision circuit 7 where the quantization precision decision information sent to the quantization circuits 8 to 11 is calculated based upon the frequency components of the respective bands. The quantization precision decision information may also be calculated based upon the normalization coefficient data employed for normalization by the normalization circuits 3 to 6. The quantization precision decision information is preferably calculated by the quantization precision decision circuit 7 based upon the psychoacoustic phenomenon, such as masking effect. Since the acoustic model used in the decoder may be optionally set because the quantization precision decision information calculated by the quantization precision decision circuit 7 is also sent to the decoder, it is possible to set a mccel simulating a human hearing sense may be set in desired manner.<br>
The quantized data obtained on quantizing the normalized data by the Quantization circuits 8 to 11, the normalized data from the normalization circuits 3 to 6 and the quantization<br>
precision decision information from the quantization precision decision circuit 7 are supplied to the multiplexor 12. The multiplexor 12 generates a codestring from the quantized data, normalization coefficient data and the quantization step information. The codestring from the multiplexor 12 is outputted<br>
/<br>
at an output terminal 13. The codestring signal outputted .by the output terminal 13 is recorded on an information recording medium or transmitted via an information transmitting medium.<br>
For recording the codestring signal on, for example, an optical disc 7, as typical of the information recording medium, the codestring signal outputted by the output terminal 13 is sent to an ECC encoder 14 where an error correction code is appended to the supplied codestring signal. An output of the ECC encoder 14 is provided to a modulation circuit 15 where it is modulated by eight-to-fourteen modulation. An output of the modulation circuit 15 is provided to a recording head 16 which then records the signal on the optical disc 17.<br>
The information recording medium may be enumerated by a recording medium, such as a play-only optical disc or a magnetic disc, a tape-shaped recording medium, such as a magnetic tape,<br>
a semiconductor memory, or an 1C card, in addition to the optical<br>
disc capable of recording and reproduction, such as the magneto-optical disc or the phase-change type optical disc. The transmission medium may be enumerated by an electrical cable or electrical wave.<br>
Fig.6 shows a basic arrangement of a decoder (decoding apparatus) for decoding the codestring signal generated by the encoder shown in Fig.5 and recorded on the information recording medium or transmitted on the transmission medium for restoring<br>
the digital audio signal.  The decoding apparatus shown in Fig. 6<br>
/ includes a demultiplexer 22 for taking out the quantized signal,<br>
quantization step information and the normalization coefficient information from the codestring signal, and signal component constructing circuits 23 to 26 for constructing signal components of respective bands from the quantized signal, quantization step information and the normalization coefficient information. The decoding apparatus also includes a waveform signal synthesis circuit 27 for synthesizing the signal components of the respective bands. In Fig.6, there are also shown a playback head 56, a demodulation circuit 55 and an ECC decoder 54 as a configuration for reproducing a codestring signal recorded on the optical disc 17 as the information recording medium.<br>
In Fig.6, the codestring signal, reproduced from the information recording medium or transmitted via the transmitting medium, is supplied to an input terminal 21 of the decoder shown in Fig.6. The decoder is configured for carrying out the signal<br>
.&gt; fjOt-u-i.<br>
decoding method according to the present invention.<br>
The signal reproduced by a reproducing head 56 from the optical disc 17 as the information recording medium is sent to a demodulation circuit 55. The demodulation circuit 55<br><br>
jdemodulates the e ight-to-f ourt een modulated signal reproduced by the reproducing head 56 from the optical disc 17. An output signal of the demodulation circuit 55 is sent to the ECC decoder 54 for error correction. The error-corrected signal is the above-mentioned codestring signal and is sent via the input<br>
/<br>
terminal 21 to the demultiplexer 22. The codestring signal is made up of the quantized data, normalization coefficient data and the quantization step decision information.<br>
The demultiplexer 22 separate the supplied codestring into the quantized data, normalization coefficient data and the quantization step decision information of the four bands explained in connection with Fig. 5. The separated quantized data, normalization coefficient data and the quantization precision decision information are sent to the signal component constructing circuits 23 to 26.<br>
The signal component constructing circuits 23 to 26 dequantize the quantized data using the quantization precision decision information while denormal iz ing the dequantized data using the normalization coefficient data. The signal component constructing circuits 23 to 26 restore sample data by a reconstructing operation corresponding to the resolution into<br>
frequency components carried out by the encoder shown in Fig. 5. The sample data from the signal component constructing circuits 23 to 26 are sent to a signal synthesis circuit 27.<br>
The signal synthesis circuit 27 synthesizes the four bands,<br>
so that the synthesized digital audio signal is outputted at the signal synthesis circuit 27. The digital audio signal is outputted at an output terminal 28 and amplified by sound radiating means, such as a speaker, headphone or an earphone, or outputted via a audio line output terminal.<br>
In the above-described encoding apparatus, gain control and gain control correction operations are utilized for effectively prohibiting pre-echo or post-echo as the block length for orthogonal transform, such as DFT or DCT, applied for resolution into frequency components, is maintained at a constant length capable of assuring sufficient frequency resolution. In addition, the sound quality deterioration needs to be prohibited even for a high compression ratio without using one of two fixed values of the gain control functions in a one-out-of-two fashion responsive to the detection of the presence or absence of the attack portion as in the prior-art example previously explained. This is achieved by the following method according to the present invention.<br>
First, the problem met in the method for preventing pre-echo when employing the gain control function of a fixed value explained in the prior-art example, and then the method for preventing the pre-echo from occurring in the embodiment of the present embodiment configured for coping with such problem, are explained. The method for effectively preventing post-echo from occurring in the embodiment of the present invention will also<br>
be explained.<br>
If, in the above-described method for preventing the pre-echo from occurring in the above-explained prior-art example, the gain control amount in ampl i f y ing . the small-amplitude signals directly ahead of the attack portion is of a fixed value, the<br>
/<br>
following problems arise.<br>
If, for example, the waveform signal in a block is a waveform signal SW3 shown in Fig.7A or a waveform signal SW4 shown in Fig.TB, the two blocks contain attack portions AT. These waveform signals SW3 and SW4 differ in the manner of changes (transition) in signal amplitudes. That is, in the waveform signal SW3 , a waveform signal FT3 having a level higher than a pre-set level is present directly ahead of the attack portion AT. In such case, the pre-echo generated ahead of the attack portion AT after encoding and subsequent decoding is masked to a certain extent by the inherent waveform signal FT3 , if not so significantly as at back of the attack portion AT. Conversely, in the waveform signal SW4 , a waveform signal FT4 directly ahead of the attack portion AT is low in signal level so that the pre-echo produced after encoding and decoding is<br>
hardly masked by the waveform signal FT4 .<br>
It is assumed that, as in the above-described prior-art example, the gain control functions of two fixed values are selected in a one— out— o f— two fashion depending upon detection of the presence or absence of the attack portion, gain control is<br>
...performed for small-amplitude signals directly ahead of the attack portion AT using a gain control function with a fixed multiplication factor of R and gain control correction is similarly performed for decoding using a fixed gain control correction function. If the gain control function (gain control amount) is set to an optimum value for the waveform signal SW3 shown in Fig.TA, as the fixed factor for multiplication R, the pre-echo of the waveform signal SW4 shown in Fig.7B is heard. Conversely, if the above limit value and the gain control function (gain control amount) are set. to optimum values for the waveform signal SW4 shown in Fig.7B, the pre-echo of the waveform signal SW3 is gain-controlled to more than a required extent, tnus producing energy dispersion in the frequency domain and lowering the encoding efficiency.<br>
With the encoding method according to the first embodiment of the present invention, this problem is coped with by adaptively changing the gain control amount (gain control function) depending upon the degree of amplitude changes in the signal directly ahead of the attack portion of the waveform s i gnal.<br>
Specifically, with the encoding method according to the first embodiment, signal components of the waveform signal SW3 directly ahead of the attack portion SW3 are gain controlled using a gain control function GC3 with a smaller value of the gain control amount (R3), while signal components of the waveform<br>
^signal SW4 directly ahead of the attack portion AT are gain controlled using a. gain control function GC4 with a larger value of the gain control amount (R4). The method for detecting the attack portion AT in a block and the method for selecting the gain control function for the portion directly ahead of the detected attack portion AT will be explained subsequently.<br>
If encoding is performed with gain control as described in the first embodiment of the encoding method, using the gain control function GC3 or GC4, gain control correction corresponding to the gain control amount employed for encoding is performed during decoding.<br>
Figs.TD and 7E respectively show the quantization noises QN3 and QN4 generated in the waveform signals SW3 and SW4 after encoding and decoding the waveform signal SW3 (Fig.TA) and the waveform signal SW4 (Fig.7B) by adaptively changing the gain control amount for the signal portion directly ahead of the attack portion in dependence upon the degree of amplitude changes produced during encoding in the attack portion and waveform signal portion directly ahead of the attack portion.<br>
As for the quantization noise QN3 produced on encoding and decoding the waveform signal SW3, the noise suppression for the waveform signal portion directly ahead of the attack portion AT is smaller, as shown in.Fig.7D, because the gain control function GC3 in the portion directly ahead of the attack portion AT during encoding is of a smaller value (R3), and the gain control<br>
correction for decoding is of a correspondingly smaller correction value. The energy of the quantization noise QN3 for the entire block is of a smaller value. On the other hand, since the waveform signal FT3 ahead of the attack portion AT of the waveform signal SW3 is inherently of a level higher than a pre-<br>
.'<br>
set. level, the quantization noise of the portion ahead of the attack portion is masked by the waveform signal FT3.<br>
If the waveform signal SW4 is encoded and decoded, the energy of the quantization noise QN4 throughout the entire block is higher. However, since the gain control function GC4 for encoding in the waveform signal portion directly ahead of the attack portion AT is of a larger value (R4) and the gain control correction for decoding is of a correspondingly larger value, the quantization noise for the portion directly ahead of the attack portion AT is suppressed sufficiently, as shown in Fig.TE.<br>
With the first embodiment of the encoding method, described above, if the quantization noise cannot be masked by the waveform signal FT4 directly previous to the attack portion AT as in the case of the waveform signal SW4, gain control and gain control correction is perfromed in preference to suppression of the overall quantization noise energy for<br>
which proves serious hindrance to the hearing sense.<br>
The gain control and gain control correction as described with reference to Fig.7 was proposed by the present Assignee in the International Patent Application W095/21489. The method<br>
disclosed in the patent application resides in selecting the gain control correction amount in the abruptly increasing portion of the waveform signal from plural values set on the basis of the contents of the gain control correction information found from<br>
waveform amplitudes<br>
In the above-described example of Fig.7, the attack portion AT is present next to the quasi-stationary waveform signal FT as a. waveform signal and a signal of a larger level is present next to the attack portion AT. In the present embodiment, the waveform signal is such a signal in which a quasi-stationary signal is followed by an attack portion followed in turn by a release portion with an abruptly decreasing signal level. This waveform signal is gain controlled and gain control corrected ahead and at back of the attack portion for prohibiting not only the pre-echo ahead of the attack portion but also the post-echo at back of the release portion following the release portion.<br>
In the following explanation, waveform signals SW5 and SW6, having the attack portions AT next to quasi-stationary signals FL5 and FL6 and release portions RE5 and RE6 with abruptly decreased signal level next to the attack portions AT, are taken as an example. In the wave formesignal SW5 , shown in Fig.SA, the quasi-stationary waveform signal FT5 ahead of the attack portion and the release portion RES at back of the attack portion are of larger levels, whereas, in the waveform signal SW6, shown in Fig.SB, the quasi-stationary waveform signal FT6 ahead of the<br>
attack portion and the release portion RE6 at back of the attack portion are of extremely small signal levels.<br>
Thus the waveform signals SW5 and SW6, shown in Figs.SA and 8B, both containing quasi-stationary waveform signals FT5 and<br>
FT6, attack portions AT and the release portions RES and REG in<br>
/ the blocks thereof, differ from each other as to the manner of<br>
signal amplitude changes, as in the example of Fig.7 described previously. If the gain control amounts ahead and at back of the attack portions of the waveform signals SW5 and SW6 are fixed, not only the pre-echo but also the post-echo cannot be prohibited satisfactorily for the same reason as explained previously in connection with Fig.7. Thus, with the encoding method according to the second embodiment of the present invention, the gain control amount is adaptively changed ahead and at back of the attack portion in dependence upon the degree of signal amplitude changes ahead and at back of the attack portions of the waveform signals.<br>
Specifically, with the encoding method of the instant embodiment, signal components directly ahead of the attack portion AT of the waveform signal SW5 , that is the waveform signal FT5, is gain-controlled with a gain control amount of a<br>
^nOL^<br>
smaller value (Ra5), whereas signal components RES at back of the attack portion AT is gain-controlled with a gain control amount (Rr5) of a smaller value less than unity, as shown in Fig.SC. On the other hand, signal components directly ahead of the attack<br>
portion AT of the waveform signal SW6, that is the waveform signal FT6, is gain-controlled with a gain control amount of a larger value (Ra6), whereas signal components RE6 at back of the attack portion AT is gain-controlled with a gain control amount i, Rr6) of a larger value less than unity. The method for detecting<br>
/<br>
the attack portion AT in a block and the method for selecting the gain control function for the portion directly ahead of the detected attack portion AT will be explained subsequently.<br>
If encoding is performed with gain control as described in the second embodiment of the encoding method, using the gain control function GC5 or GC6, gain control correction corresponding to the gain control amount employed for encoding is performed during decoding.<br>
Figs.SD and 8E respectively show the quantization noises QN5 and QN6 generated in the waveform signals SW5 and SW6 after encoding and decoding the waveform signal SW5 (Fig.SD) and the waveform signal SW6 (Fig.SE) by adaptively changing the gain control amount for the signal portions directly ahead and at back of the attack portion in dependence upon the degree of amplitude changes produced during encoding in the waveform signal portion<br>
directly ahead and at back of the attack portion, respectively.<br>
As for the quantization noise QN5, generated on encoding and decoding the waveform signal SW5, since the gain control function GC5 in the quasi—stationary signal FT5 ahead of the attack portion AT and in the signal of the release portion RES at back<br>
cf the attack portion AT during encoding is of smaller gain control amounts of Ra5 and Rr5, and the gain control correction amount for the gain control correction for decoding is of a correspondingly smaller value, noise suppression in the signal portions of the quasi-stationary waveform signal FT5 and the<br>
/<br>
release portion RES ahead and at back of the attack portion is relatively low. The energy of the quantization noise QN5 for the entire block is of a smaller value.<br>
On the other hand, since the waveform signal FT5 ahead of the attack portion AT of the waveform signal SW5 and the signal of the release portion RES at back of the attack portion are inherently of a level higher than a certain value, the quantization noise in the signal portions FT5 and RE5 is masked by these signal portions. On the other hand, if the waveform signal SW6 is encoded and decoded, the energy of the quantization noise QN6 for the entire block becomes larger. However, since the gain control function GC6 in the signal portions of the quasi-stationary waveform signal FT6 and the release portion RES ahead and at back of the attack portion AT during encoding of larger gain control amounts of Ra6 and Rr6, and the gain control<br>
correction amount for the gain control correction for decoding<br>
is of a correspondingly larger value, the quantization noise in the quasi-stationary signal FT6 and the release portion RE6 is suppressed satisfactorily, as shown in Fig.SE.<br>
The pre-echo and post-echo prove serious hinderance to the<br>
human hearing sense in the second embodiment of the encoding method of the present invention, as explained in connection with Figs.SA to 8E. Thus, if the quantization noise cannot be masked by the signals of the waveform signals FT6 or the signals of the release portion RE6, as in the case of the waveform signal SW6,<br>
/<br>
the gain control and gain control correction operations are performed for suppressing pre-echo and the post-echo in preference to suppression of the overall quantization noise energy.<br>
Although the same types and numbers of the gain control amounts adaptively selected and applied to signals directly ahead of the attack portion and signal of the release portion may be employed, different types and numbers may be employed since the release portion is masked by concurrent masking by the attack portion more readily than the portion directly ahead of the attack portion.<br>
Figs.9 and 10 illustrate the above-described gain control and gain control' correction as applied to the above-described encoding apparatus and the decoding apparatus.<br>
The arrangement of Fig.9 is made up of a windowing circuit 32, an attack/release portion^jietection circuit 33, a gain control circuit 34, a forward orthogonal transform circuit 35, a normalization quantization circuit 36 and an encoding circuit 37. If the arrangement of Fig.9 is compared to that of Fig.2, the windowing circuit 32 up to the forward orthogonal transform<br><br>
circuit 35 are comprised in the frequency component resolving circuit 2, the normalization quantization circuit 36 of Fig.9 corresponds to the normalization circuits 3 to 6, quantization step decision circuit 7 and to the quantization circuits 8 to 11<br>
and  the  encoding  circuit  37  of  Fig.9  corresponds  to  the<br>
i<br>
multiplexor 12 and the ECC encoder 14 of Fig.5. The arrangement of Fig.10 is made up of a decoding circuit 42, a denormalization dequantization circuit 43, an inverse orthogonal transform circuit 44, a gain control correction circuit 45 and a proximate block synthesis circuit 46. If the arrangement of Fig.10 is compared to that of Fig.6, the decoding circuit 42 of Fig.10 corresponds to the ECC decoder 34 and the demultiplexer 22 of Fig.6, the denormalization dequantization circuit 43 up to the gain control correction circuit 45 of Fig.10 correspond to the signal component constructing circuits 23 to 26 of Fig.6 and the proximate block synthesis circuit 46 of Fig.10 is comprised within the waveform signal synthesis circuit 27 of Fig.6.<br>
Referring to Fig.9, the waveform signal, such as the digital audio signal, is supplied to a terminal 31 and thence routed to the windowing circuit 32. The windowing circuit 32 slices the digital audio signal supplied thereto into blocks each of a pre-<br>
»j4 n*JU»i-<br>
set length. These blocks are overlapped with the neighboring blocks and respectively multiplied with a transform windowing function.<br>
The next attack/release portion detection circuit 33 detects<br>
—whether or not there is an attack portion or a release portion in. a block multiplied with a transform window function in the windowing circuit 32, and generates, on the block basis, a flag specifying the presence or absence of the attack portion and a flag specifying the presence or absence of the release portion ', attack/release portion detection flag). On detection of the attack portion, the at tack/re 1 ease portion detection circuit 33 generates, as the position information, the information specifying from which position in the block the attack portion begins and the information specifying from which position in the block the release portion begins, on detection of the attack portion and the release portion, respectively. If only the attack portion is detected, as explained in the encoding method of the first embodiment, the attack/release portion detection circuit 33 calculates again control function associated with the detected attack portion.<br>
If the attack portion and the next following release portion are detected, as explained in connect ion with the encoding method of the second embodiment, the gain control function associated with the detected attack portion and the gain control function associated with the detected release portion are calculated and an ultimate gain control function is calculated from these two gain control functions. If the waveform signal in the block is uhe waveform signal SW3 or SW4 shown in Figs,7A or 7B, the calculation of the gain control function by the attack/release<br>
portion detection circuit 33 is the operation of adaptively selecting the gain control functions GC3 or GC4 as explained in connection with Fig.TC. If the waveform signal in the block is the waveform signal SW5 or SW6 shown in Figs,8A or 8B, the calculation of the gain control function by the attack/re lease portion detection circuit 33 is the operation of adaptively selecting the gain control functions GC6 or GC6 as explained in connection with Fig.SC.<br>
If the attack portion or the release portion is not detected, the attack/release portion detection circuit 33 selects a gain control function specifying the gain control amount of a value equal to unity. If the attack portion or the release portion is not detected, it is also possible not to perform gain control for the block. The attack/release detection circuit 33 outputs the attack/release portion detection flag, the position information for the detected attack or release portion, the information on the selected gain control function and signal components (waveform elements) of the respective blocks to the gain control circuit 34.<br>
If the attack/release portion detection flag supplied with the signal components in the block specifies that the attack<br>
portion in the block has been detected, the gain control circuit 34 performs a gain control operation of amplifying the small-amplitude signal ahead of the attack portion (quasi-stationary signals) in the block based upon the attack portion position<br>
information and the gain control information supplied along with the signal components in the block. Similarly, if the at tack/re 1 ease portion detection flag supplied with the signal components in the block specifies that the release portion in the block has been detected, the gain control circuit 34 performs the gain control operation of amplifying the small-amplitude signal ahead of the attack portion (quasi-stationary signals) in the block based upon the release portion position information and the gain control information supplied along with the signal components in the block.<br>
That is, if the waveform signal in the gain control circuit 34 is the waveform signal SW3 or SW4 shown in Figs.TA and 7B, the gain control operation by the gain control circuit 34 multiplies the waveform elements in the block with the gain control functions GC3 or GC4 explained in connection with Fig.TC. If the waveform signal in the gain control circuit 34 is the waveform signal SW5 or SW6 shown in Figs.SA and 8B, the gain control operation by the gain control circuit 34 multiplies the waveform elements in the block with the gain control functions GC5 or GC6 explained in connection with Fig.SC.<br>
If the attack/release portion detection flag indicates the<br>
-&gt;wi ~ absence of the attack or release portion,  the gain control<br>
circuit 34 does not perform signal amplification on the signal components in the block. Specifically, the gain control circuit multiplies the waveform elements in the block with a gain control<br>
amount equal to unity for not performing the amplification. The block-based signal components (waveform elements) are provided t'rom the gain control circuit 34 to the froward orthogonal transform circuit 35.<br>
The forward orthogonal transform circuit 35 performs orthogonal transform, such as DFT or DCT, on the supplied block-based signal components. The resulting spectral components are provided to the normalization quantization circuit 36.<br>
Similarly to the normalization circuits 3 to 6, quantization step decision circuit 7 and the quantization circuits 8 to 11 of Fig.5, the normalization quantization circuit 36 normalizes and quantizes the supplied spectral component signals.<br>
The next following encoding circuit 37 sequentially generates a codestring signal, from the quantized signal, normalization coefficient information and the quantization step Information, supplied from the normalization quantization circuit 36, attack/release portion detection flag, attack portion or release portion position information, in case of detection of the attack portion or the release portion, and the gain control information, and appends the error correction code to he<br>
codestring signal.   An output of the encoding circuit 37  is<br>
issued at a terminal 38 and modulated by 8-to—14 modulation for<br>
recording on an information recording medium or transmission over a transmission medium.<br>
Referring to Fig.7, to a terminal 41 are supplied playback<br>
signals from the information recording medium, demodulated by f ourteen-to-eight demodulation, or the codestring signal transmitted from the transmission medium. The codestring signal, supplied to the terminal 41, is corrected for errors by the decoding circuit 42, while being resolved into the quantized data, normalization coefficient data, normalization precision information, attack portion detection flag, attack position information in the sub-block where the attack portion has been found, and the gain control amount information. The quantized data, normalization coefficient data and the quantization precision information, from the decoding circuit 42, are sent to the denormalization dequantization circuit 43.<br>
The denormalization dequantization circuit 43 dequantizes the quantized data, using the quantization precision information, and denormalizes the normalized data using the normalization coefficient data. This causes the denormalization dequantization circuit 43 to output spectral component signals. The spectral component signals are sent to the . inverse orthogonal transform circuit 44.<br>
The inverse orthogonal transform circuit 44 then performs<br>
inverse orthogonal transform  corresponding to the orthogonal<br>
transform performed by the  encoder.   Specifically,  if  the<br>
orthogonal transform in the encoder is DFT or DCT, the inverse<br>
orthogonal transform is Inverse FDT (IDFT) or inverse DCT (IDCT).<br>
The time-domain signals (waveform elements), obtained by<br>
inverse orthogonal transform by the inverse orthogonal transform, are sent to the gain control correction circuit 45, which is also fed with the attack portion detection flag, attack position information in the block where the attack portion has been detected, and the gain control amount information. Thus, if the small-amplitude signal of the sub-block directly previous to 'the attack portion in the sub-block is amplified by the gain control circuit 34 of the encoder, the gain control correction circuit 45 performs gain control correction, with the aid of the above information, for attenuating the amplified signals in the sub-block. Specifically, the gain control circuit 45 performs gain control correction of attenuating the small-amplitude signals of the sub-block previous to the attack portion, on the basis of the attack/release portion detection flag, specifying the presence of the attack portion or the release portion in the block, gain control amount information and the attack/release portion position information specifying the position of the attack/release portion. The gain control correction in the gain control correction circuit 45 is the operation of multiplying the signal with the gain control correction function which is a reciprocal of the gain control function employed for encoding.<br>
jn«_<br>
Of the quantization noise spread substantially uniformly in the block at the stage of inverse orthogonal transform from the frequency domain to the time domain by the inverse orthogonal transform circuit 44, the quantization noise generated ahead and<br>
at back of the attack portion may be suppressed to a low level by attenuating the signal amplified during encoding, thus prohibiting obstructions to the hearing sense due to the pre-echo. The gain control correction circuit 45 does not perform signal attenuation on signal components in a block where there is no attack portion and hence no amplification is performed during encoding.<br>
The signal not amplified during encoding has been multiplied with the gain control function specifying the gain control amount equal to unity, so that it is multiplied with a gain control correction function specifying the gain control correction amount corresponding to the reciprocal of unity, that is unity. The block-based signal components via the gain control correction circuit 45 are sent to the neighboring block synthesis circuit 46.<br>
The block sent to the neighboring block synthesis circuit 46 is previously overlapped with neighboring blocks in the encoder. Thus the neighboring block synthesis circuit 46 adds sample data in the overlapped blocks together with interference for re-constructing waveform signals (digital audio signals). The digital audio signals, re-constructed by the neighboring block<br>
J !•*-..<br>
synthesis circuit 46, are outputted at a terminal 47 and amplified by an amplifier so as to be sent to sound radiating means, such as a speaker, headphone or an earphone, and thence outputted at an audio line output terminal.<br>
In the method explained in connection with Figs.7 to 10, the signal components in the block are multiplied with the above-mentioned transform windowing function before detecting the attack portion. In such case, even if the attack portion, which is a signal portion with large amplitudes, exists in an end portion of a block, the inherent waveform signals in the bl'ock are deformed on multiplication with the transform windowing function, so that the large amplitude portion in the block end portion is attenuated and hence the attack portion can occasionally not be detected. However, the signal components of the inherent time blocks can be completely restored by orthogonal transform using DFT or DCT followed by inverse orthogonal transform. Therefore, no problem is raised if the gain control correction operation is performed on the block basis in the decoding apparatus.<br>
Fig.11 shows an example of a processing flow for detecting an attack portion and a release portion of the waveform signal shown in Fig.8 for generating the gain control function in the application of the above-described gain control of the instant embodiment to actual signal encoding. The processing of Fig.11<br>
is built into the attack/release portion detection circuit 33<br>
shown in Fig.9.<br>
In Fig.11, the attack/release portion detection circuit 33 performs at step S101 the processing of calculating the gain control function for the attack portion, while performing at step<br>
S102 the processing of calculating the gain control function for the release portion. Meanwhile, the processing of calculating the gain control function at step S101 and at step S102 is actually the processing of adaptively selecting one of preselected plural gain control functions in dependence upon the characteristics of the signal components in the block. At s'tep S103, the ultimate gain control function is calculated from the gain control function for the attack portion found at step S101 and that for the release portion found at step S102.<br>
Fig.12 shows a detailed processing flow for generating the gain control function for the attack portion at step S101 in F i g . 11 .<br>
In Fig.12, a block having a length corresponding to 2M sample data is split into N sub-blocks, and the maximum amplitude value P[I] in the I ' th sub-bock is compared to the maximum amplitude value Q[I] in K continuous sub-blocks up to the I'th sub-block. If the result specifies a ratio higher than a pre-set value, the attack portion is deemed to have been detected. In addition, a gain control function corresponding to the smoothly changing gain control amount is ultimately constructed for<br>
prohibiting energy diffusion in case of orthogonal transform of<br>
 the signal components in the block.<br>
At a first step S101 of Fig.9, the maximum amplitude value Q[I] in K continuous sub-blocks up to I'th sub-block in N sub-blocks of a block, that is from the (I-K-l)st sub-block up to<br>
the I'th sub-block, is found. At step S102, the maximum amplitude value in the I'th sub-block P[I] is found.<br>
At the next step S103, I is set to 0 (1=0). At step 204, the gain control amount R is found as a ratio of the maximum amplitude value Q[I] of K sub-blocks up to the I'th sub-block to the maximum amplitude value P [ 1 +1 ] of the next following sXib-block. At the next step S205, T is a pre-set threshold value. If R is larger than T (YES), the attack portion is deemed to have been detected, and processing transfers to step S109. If the result of decision at step S205 is NO, the processing transfers to step S206 where I is incremented by one. At step S207, it is judged whether or not I has reached the sub-block number N at the terminal end of the block. The processing as from the step S204 is repeatedly carried out until I becomes equal to N (I = N).<br>
If the result of decision at step S207 is YES, L is set at step S208 to 0 (L = 0), that is, the attack portion is deemed to be not found. Thus, R is set to 1 (R = 1) and the processing transfers to step S210. If the result of detection at step S205 is YES, that is if the attack portion has been found, the processing transfers to step S209 where La is set to 1 (La = 1).<br>
For R,  an  integer  value  of  R  as  found  at  step  S204  is<br>
 substituted. That is, the length up to the attack portion in the<br>
block is construed as being the length corresponding to L sub-blocks. The corresponding value of R represents the gain control amount. After terminating the processing at step S209, the<br>
processing transfers to step S210.<br>
At step S210, the gain control amount for the sub-blocks up to the position L of the attack portion is set to R, while interpolation is carried out for ultimately providing a smoothly changing gain control amount. The processing then comes to a close. That is, at step S210, in which the gain control funct'ion g(n) is constructed on the basis of the values of L and R, while interpolation is carried out for the sub-blocks directly ahead of the attack portion so that the gain control amount will be changed smoothly. This effectively prohibits diffusion in energy distribution for assuring highly efficient encoding in case of transform into frequency-domain signals.<br>
By changing the gain control amount of the attack portion responsive to the level of the waveform signal, the pre-echo can be efficiently prevented from being produced even in case of a high compression ratio.<br>
Fig.13 shows a detailed processing flow for generating the gain control function for the release portion at step S102 in Fig.11.<br>
In Fig.13,  a block having a length corresponding to 2M<br>
sample data is split into N sub-blocks, and the maximum amplitude<br>
value P[I]  in the I ' th sub-bock is compared to the maximum<br>
amplitude value Q[I] in K continuous sub-blocks up to the I'th sub-block. If the result specifies that the resulting ratio is higher than a pre-set value, the attack portion is deemed to have<br>
been detected. In addition, a gain control function corresponding to the smoothly changing gain control amount is ultimately constructed for prohibiting energy diffusion in case of orthogonal transform of the signal components in the block.<br>
At a first step S301 in Fig. 13, the maximum amplitude value Q[I] in K contiguous sub-blocks, that is sub-blocks from I+'(K-i)the sub-block up to the I ' th sub-block, is found. The sub-blocks are obtained by equally dividing one block by N and the K contiguous sub-blocks are counted up to the I'th sub-block in an opposite direction to that in the case of the attack portion. At step S302, the maximum amplitude value in the I'th sub-block P[I] is found. At the next step S303, I is set to N + 1 . At step 304, the gain control amount R is found as a ratio of the maximum amplitude value Q[I] of K sub-blocks up to the I'th sub-block to the maximum amplitude value P[I - 1] of the next following sub-block.<br>
At the next step S105, T is a pre-set threshold value. If R is larger than T (YES), the release portion is deemed to have been detected, so that processing transfers to step S309. If the result of decision at step S305 is NO, the processing transfers<br>
to step S306 where I is decremented by one.  At step S307, it is<br>
dged whether or not I has reached the first sub-block (whether<br>
or not the sub-block number is 1). If the result of step S307 is NO, the processing reverts to step S304. The processing as from the step S304 is repeatedly carried out until I becomes<br>
equal to 1 (I =1). If the result of decision at step S307 is YES, L is set at step S308 to 0 (L=0), that is, the attack portion is deemed to be not found. Thus, R is set to 1 (R = 1) and the processing transfers to step S310. If the result of detection at step S305 is YES, that is if the attack portion has been found, the processing transfers to step S309 where Lr is 'set to I (L = I). For R, an integer value of R as found at step S304 is substituted. That is, the length of the attack portion and the downstream side portion in the block is construed as being the length corresponding to L sub-blocks. The corresponding value of R represents the gain control amount. After terminating the processing at step S309, the processing transfers to step S310.<br>
At step S310, the gain control amount for the sub-blocks up to the position L of the attack portion is set to R, while that for the remaining portion s set to 1 and interpolation is carried out for ultimately providing a smoothly changing transient portion. The processing then comes to a close. That is, at step S310, in which the gain control function g(n) is constructed on the basis of the values of L and R, interpolation is carried out for the sub-blocks directly ahead of the attack portion so that the gain control amount will be changed in value smoothly for prohibiting diffusion in energy distribution for assuring highly efficient encoding in case of transform into the frequency-domain signals.<br>
Fig.14 shows a detailed processing for calculating the ultimate gain control function from the gain control function for the attack portion and that for the release portion at step S103 in Fig.11 .<br>
Referring to Fig.14, the gain control function ga(n) for the attack portion and the gain control function gr(n) for the release portion are synthesized at step S401 for finding an ultimate gain control function g(n). At the next step S402, it is judged whether or not the last value of the gain control function g(n) is a value other than unity. If the last value is found to be a value other than unity, processing transfers to step S403 and, if otherwise, processing comes to an end. At the step S403, to which the processing transfers if the last value is fount at step S402 to be a value other than unity, the value is used as a division factor before the processing is brought to a close. The gain control function produced by the processing of Fig.14 corresponds to the gain control function GC of Fig.8.<br>
Figs.l5A to 15D illustrate the result of application of processing of Figs.11 to 14 to an actual waveform signal. Fig.ISA shows a waveform signal SW7 which is abruptly increased<br>
in signal level partway in a block and which then is abruptly<br>
decreased in signal level.<br>
Specifically, the gain control function for the attack portion, as found from the waveform signal SW7 of Fig.ISA at step S101 of Fig.11 (processing of Fig.12) is such a. function which<br>
multiplies the quasi-stationary signal FT7 directly ahead of the attack portion with a multiplication factor Ra7 and multiplies i.he remaining signal portion with a multiplication factor equal to unity, as shown in Fig.lSB. On the other hand, the gain control function for the release portion, as found from the waveform signal SW7 of Fig. ISA at step S102 of Fig. 11 (processing of Fig. 13) is such a function which multiplies the release portion RE directly at back of the attack portion with a multiplication factor Rr7 and multiplies the remaining signal portion with a multiplication factor equal to unity, as shown in Fig. 15C.<br>
The ultimate gain control function, as found at step S103 of Fig. 11 (by the processing of Fig. 15) from the gain control function ga(n) for the attack portion and from the gain control function gr(n) for the release portion, is such a gain control function GC7 which multiplies the quasi-stationary signal portion FT7 directly ahead of the attack portion with Ra7/Rr7 , then with l/Rr7 and finally with unity, as shown in Fig.lSD.<br>
Thus, with the instant embodiment, pre-echo ad post-echo may be effectively prohibited, even with a high compression ratio, by adaptively varying the gain control amount for the attack<br>
portion and that for the release portion depending upon the s ignal leve 1 .<br>
In the foregoing description, each block is assumed to have each one attack portion and release portion. The above-described<br>
embodiment of the invention is applicable to such a case in which there exist a plurality of attack portions and a plurality of release portions.<br>
If a gain control function which is changed abruptly in a step fashion is used, the encoding efficiency is lowered on orthogonal transform due to energy diffusion. Thus the inst'ant embodiment employs a gain control function having a smoothly changed transient region even in the attack portion. However, the transient region with a smoothly changing signal level of the gain control function needs to be of a sufficiently short duration, otherwise the pre-echo becomes perceptible. Thus the transient region of the gain control function is preferably on the order of msecs in view of the human hearing sense and has smooth transition such as that of a sine wave.<br>
Although an attack portion in a block is detected in the above-described embodiment, the range of detection of the attack portion may be extended to a leading sub-block of the next block in readiness for a case in which the attack portion exists in a leading end of the block next to the processed block. By extending the range of detection of the attack portion to the leading sub-block of the next block, it becomes possible to meet<br>
the condition for providing the gain control function with a smooth transition region and for assuring interference of waveform elements between neighboring blocks during inverse orthogonal transform as described above.<br>
Fig.16 shows a typical recording format for recording the codestring signal encoded in the method of the present invention on an information recording medium, or a transmission format for transmission on a transmission medium.<br>
In Fig.16, each block-based codestring signal (block information 121 to 123) at least has the attack/release port'ion detection flags 124, 126 and spectral component codes 125, 129 obtained on normalization, quantization and encoding of the spectral component signals and, depending upon the contents of the attack/release portion detection flag, the gain control correction function generating information comprising the position information for the attack portion and the release portion 127 and the gain control amount information 128. As the position information for the attack portion and the release portion 127 and the gain control amount information 128, the values of L and R employed in Figs. 12 and 13 may be employed, respect ively.<br>
Since the ratio of the blocks where there exist attack portions subject to pre-echo is low in actual audio signals, the attack portion position information and the gain control amount information can be appended only to the block information data<br>
corresponding to the blocks where there exist the attack and release portions (the N'th block information data in the example of Fig.16) for raising the recording efficiency for the recording medium or the transmission efficiency for the transmission<br>
medium. It is of course possible to add the gain control correction function generating information to the block information data of all blocks, in which case it is sufficient -f the gain control correction function generating information is appended in the form of L = 0 and R = 1 within the block information data or blocks where there exist no attack portions.<br>
Fig. 17 shows the processing flow for generating, by the decoding apparatus, the gain control correction function h(n) from the codestring signal explained with reference to Fig.16. By incorporating the processing shown in Fig.17 in the gain control correction circuit 45, the processing of Fig.17 may be realized by the gain control correction circuit 45. In addition, signal components in the block may be regenerated by multiplying the signal component constructed by the inverse orthogonal transform in the inverse orthogonal transform circuit 44 of Fig.10 with the gain control correction function h(n) generated by the processing of Fig.17. Of course, the processing of multiplication of the gain control correction function h(n) may be omitted for a block where no attack portion nor release portion has been detected.<br>
At step S21 in Fig.17, an attack/release portion detection<br>
~*r^t-v<br>
flag is taken out at step S21. If the attack/release portion detection flag is 0, that is if no attack portion nor release portion has been detected, processing transfers to step S22 for setting the gain control correction function h(n), that is the<br>
gam control correction amount, to 1 for terminating the processing. If the attack/re lease portion detection flag is 1, t. hat is if an attack portion or a release portion has been detected, processing transfers to step S23 . At step S23, as the value of the gain control function for La sub-blocks from the leading end of the block is set to Ra/Rr, while the value of the gain control function sub-blocks from (La+1) to Lr is set to 1/Rr and the value of the gain control function for the remaining sub-blocks is set to 1, the interpolation is carried out as described above for finding the ultimate gain control function g(n). At step S24, a reciprocal l/g(n) of the gain control function g(n) is calculated for finding the gain control correction function h(n) .<br>
The method of the present invention may be applied not only to direct resolution of waveform signals by orthogonal transform into spectral components but also to resolution of signal components temporarily split by a band-splitting filter, such as QMF, into plural frequency bands into spectral components by orthogonal transform or to resolution of waveform signals into frequency signal components of plural frequency bands by a filter<br>
such as QMF.  The method of the present invention may be applied<br>
 to spectral components or signal components split into plural<br>
bands by- a filter and, in particular, may be advantageously employed in connection with frequency components (spectral components) obtained by processing including orthogonal transform<br>
where pre-echo or post-echo presents serious problems.<br>
In addition, the method of the present invention may be applied to an apparatus for processing digital version of the audio signals as waveform signals or to computer processing of waveform signals once arranged into a file. The method of the present invention may also be employed for recording the produ'ced codestring signal on a recording medium or transmitting the signal on a transmission medium. Also, the method of the present invention may be applied not only to encoding at a constant bit rate at all times or to encoding with a temporally variable bit rate with the value of the bit rate being changed from one block to another.<br>
Although the foregoing description has been made in connection with making the quantization noise less outstanding on quantization of audio signals as waveform signals, the method of the present invention may also be applied in connection with making the quantization noise less outstanding on quantization of other signals, such as picture signals or multi-channel audio signals. Since the pre-echo in the attack portion in the audio signals proves serious hindrance to the hearing sense, the<br>
present  invention may be  applied most  effectively  to  the<br>
processing of audio signals.<br>
According to the present invention, the attack portion and the release portion are detected in the waveform signals, and the waveform elements of the release portion and the portion ahead<br>
of the attack portion are encoded after gain control with a gain control amount adaptively selected responsive to characteristics of waveform signals, while the signal portion gain-controlled during encoding is corrected for gain control during decoding. Thus the energy of the noise produced in the signal portion ahead of the attack portion and in the release portion on encoding 'and decoding the waveform signals can be lowered to an imperceptible level, thus prohibiting generation of pre-echo or post-echo even in case of a high compression ratio and assuring highly efficient encoding, decoding and transmission with superior sound quality.<br><br><br><br><br><br>
WE CLAIM:<br>
1.	A method for encoding a digital audio waveform signal comprising:<br>
detecting an attack portion of the waveform signal with an abruptly<br>
increased signal level;<br>
detecting a release portion of the waveform signal with an abruptly decreased signal level;<br>
adaptively selecting the gain control amount at least for waveform elements ahead of the attack portion and waveform elements of the release portion, responsive to characteristics of the waveform signal, from among a plurality of gain control amounts;<br>
gain-controlling at least the waveform elements ahead of the attack portion and waveform elements of the release portion, using the selected gain control amount;<br>
transforming said waveform signal into a plurality of frequency components; and<br>
encoding the control information for gain control and said frequency components.<br>
2.	The encoding method as claimed in claim 1 wherein a gain control<br>
amount smoothly changed in value is set in the vicinity of change of said<br>
gain control amount between a pre-change gain control value and a post-<br>
change gain control value.<br>
3.	The encoding method as claimed in claim 1 wherein the waveform<br>
signal is divided into a plurality of small-sized regions each having a<br>
plurality of waveform elements and wherein said attack portion is detected when the ratio of the maximum level of a given small-sized region to the maximum level of plural small-sized regions ahead of said small-sized region exceeds a first threshold value.<br>
4.	The encoding method as claimed in claim 1 wherein the waveform<br>
signal is divided into a plurality of small-sized regions each having a<br>
plurality  of waveform   elements   and  wherein   said   release   portion  is<br>
detected when the ratio of the maximum level of a given small-sized<br>
region to the maximum level of plural small-sized regions at back of said<br>
small-sized region exceeds a second threshold value.<br>
5.	The encoding method as claimed in claim  1 wherein the control<br>
information for gain control at least comprises the information specifying<br>
the presence or absence of the attack portion and the release portion, the<br>
information   specifying   the   gain   control   amount   for   the   waveform<br>
elements ahead of the attack portion on detection of the attack portion<br>
and the gain control amount for the waveform elements ahead of the<br>
release portion on detection of the release portion, and the information<br>
specifying the position of the attack portion on detection of the attack<br>
portion and the position of the release portion on detection of the release<br>
portion.<br>
6.	The encoding method as claimed in claim 1 wherein the processing<br>
of transforming said waveform signals into plural frequency components<br>
is the processing of blocking said waveform element in terms of plural<br>
waveform elements as a unit and the waveform elements are orthogonal-transformed on the block basis.<br>
7.	The encoding method as claimed in claim 1 wherein, in selecting<br>
said gain control amounts, gain control amounts for the attack portion<br>
for waveform elements ahead of the attack portion are adaptively selected<br>
responsive  to  characteristics of the waveform  signal from  among the<br>
plural gain control amounts for the attack portion, gain control amounts<br>
for the release portion for waveform elements of the release portion are<br>
adaptively selected responsive to characteristics of the waveform signal<br>
from among the plural gain control amounts for the release portion and<br>
wherein  said  gain control  amount is  selected  from  the  selected gain<br>
control  amount for  the  attack portion  and  the  selected  gain  control<br>
amount for the release portion.<br>
8.	The   encoding   method   as   claimed   in   claim    1    wherein   the<br>
characteristics  of said  waveform  signal  in  selecting  the  gain  control<br>
amount are the degree of change in the waveform signal.<br>
9.	An apparatus for encoding a digital audio waveform signal and for<br>
carrying  out  the   method   as   claimed   in   any  of claims   1   to   8,   the<br>
apparatus comprising:<br>
windowing means which slices said input digital audio waveform signal into blocks as waveform element each of preset length of which blocks are overlapped with the neighboring blocks and multiplies with a transform windowing function.<br>
attack/release portion detection means which detects an attack portion of the waveform element from said windowing means with an abruptly increased signal level and a release portion of the waveform signal with an abruptly decreased signal level, and adaptively selects a gain control amount for said waveform element responsive to characteristics of the waveform signal, from among a plurality of gain control amounts, and outputs an attack/release portion detection flag, a position information for said detected attack or release portion, an information on said selected gain control amount, and said waveform element from said windowing means;<br>
gain control means which performs a gain control operation of amplifying said waveform elements ahead of the attack portion and waveform elements of the release portion, using the selected gain control amount from said attack/release portion detection means;<br>
transforming means which transforms said waveform element from said gain control means into a plurality of frequency components;<br>
normalization and quantization means which normalizes and quantizes said plurality of frequency components from said transforming means; and<br>
encoding means which encodes information including said attack/release portion detection flag, said position information for said detected attack or release portion, and said information on the selected gain control amount from said attack/release portion detection means, and said frequency components from said normalization and quantization means.<br>
10.	The encoding apparatus as claimed in claim 9 wherein said gain<br>
control means sets a gain control amount smoothly changed in value in<br>
the vicinity of change of said gain control amount between a pre-change<br>
gam control value and a post-change gain control value.<br>
11.	The   encoding   apparatus   as   claimed   in   claim   9   wherein   the<br>
waveform element is divided into a plurality of small-sized regions each<br>
having a plurality of waveform elements and wherein said attack portion<br>
is detected when the ratio of the maximum level of a given small-sized<br>
region to the maximum level of plural small-sized regions ahead of said<br>
small-sized   region   exceeds   a   first   threshold   value   and   said   release<br>
portion is detected when the ratio of the maximum level of a given small-<br>
sized region to the maximum level of plural small-sized regions at back of<br>
said small-sized region exceeds a second threshold value.<br>
12.	The   encoding  apparatus   as   claimed  in   claim   9,   wherein   said<br>
attack/release portion detection means adaptively selects gain control<br>
amounts for the attack portion to characteristics of the waveform signal<br>
from among the plural gain control amounts for the attack portion, while<br>
adaptively selecting gain  control amounts for the  release  portion for<br>
waveform elements of the release portion responsive to characteristics of<br>
the waveform signal from among the plural gain control amounts for the<br>
release portion and finding said gain control amount from the selected<br>
gain control amount for the attack portion and the selected gain control<br>
amount for the release portion.<br>
13.	The   encoding   apparatus   as   claimed   in   claim   9   wherein   the<br>
characteristics  of said  waveform  signal  in   selecting  the  gain  control<br>
amount are the degree of change in the waveform signal.<br>
14.	An   apparatus   for   encoding   a   digital   audio   waveform   signal<br>
substantially   as   hereinbefore   described   with   reference   to   and   as<br>
illustrated in the accompanying drawings.<br><br></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzk3LWRlbC0xOTk2LWFic3RyYWN0LnBkZg==" target="_blank" style="word-wrap:break-word;">397-del-1996-abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzk3LWRlbC0xOTk2LWNsYWltcy5wZGY=" target="_blank" style="word-wrap:break-word;">397-del-1996-claims.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzk3LWRlbC0xOTk2LWNvbXBsZXRlIHNwZWNpZmljYXRpb24gIChncmFudGVkKS5wZGY=" target="_blank" style="word-wrap:break-word;">397-del-1996-complete specification  (granted).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzk3LWRlbC0xOTk2LWNvcnJlc3BvbmRlbmNlLW90aGVycy5wZGY=" target="_blank" style="word-wrap:break-word;">397-del-1996-correspondence-others.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzk3LWRlbC0xOTk2LWNvcnJlc3BvbmRlbmNlLXBvLnBkZg==" target="_blank" style="word-wrap:break-word;">397-del-1996-correspondence-po.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzk3LWRlbC0xOTk2LWRlc2NyaXB0aW9uIChjb21wbGV0ZSkucGRm" target="_blank" style="word-wrap:break-word;">397-del-1996-description (complete).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzk3LWRlbC0xOTk2LWRyYXdpbmdzLnBkZg==" target="_blank" style="word-wrap:break-word;">397-del-1996-drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzk3LWRlbC0xOTk2LWZvcm0tMS5wZGY=" target="_blank" style="word-wrap:break-word;">397-del-1996-form-1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzk3LWRlbC0xOTk2LWZvcm0tMTMucGRm" target="_blank" style="word-wrap:break-word;">397-del-1996-form-13.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzk3LWRlbC0xOTk2LWZvcm0tMi5wZGY=" target="_blank" style="word-wrap:break-word;">397-del-1996-form-2.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzk3LWRlbC0xOTk2LWZvcm0tMy5wZGY=" target="_blank" style="word-wrap:break-word;">397-del-1996-form-3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzk3LWRlbC0xOTk2LWZvcm0tNC5wZGY=" target="_blank" style="word-wrap:break-word;">397-del-1996-form-4.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzk3LWRlbC0xOTk2LWZvcm0tNi5wZGY=" target="_blank" style="word-wrap:break-word;">397-del-1996-form-6.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzk3LWRlbC0xOTk2LXBhLnBkZg==" target="_blank" style="word-wrap:break-word;">397-del-1996-pa.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzk3LWRlbC0xOTk2LXBldGl0aW9uLTEzNy5wZGY=" target="_blank" style="word-wrap:break-word;">397-del-1996-petition-137.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzk3LWRlbC0xOTk2LXBldGl0aW9uLTEzOC5wZGY=" target="_blank" style="word-wrap:break-word;">397-del-1996-petition-138.pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="218248-a-medical-hollow-needle-and-a-method-of-producing-thereof.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="218250-automatic-sandless-batch-roaster.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>218249</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>397/DEL/1996</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>29/2008</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>26-Sep-2008</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>31-Mar-2008</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>26-Feb-1996</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>SONY CORPORATION</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>7-35 KITASHINAGAWA 6-CHOME, SHINAGAWA-KU, TOKYO JAPAN</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>MITSUYUKI HATANAKA</td>
											<td>C/O SONY CORPORATION OF 7-35 KITASHINAGAWA 6-CHOME, SHINAGAWA-KU, TOKYO JAPAN.</td>
										</tr>
										<tr>
											<td>2</td>
											<td>YOSHIAKI OIKAWA</td>
											<td>C/O SONY CORPORATION OF 7-35 KITASHINAGAWA 6-CHOME, SHINAGAWA-KU, TOKYO JAPAN</td>
										</tr>
										<tr>
											<td>3</td>
											<td>KYOYA TSUTSUI</td>
											<td>C/O SONY CORPORATION OF 7-35 KITASHINAGAWA 6-CHOME, SHINAGAWA-KU, TOKYO JAPAN</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>H04L 7/02</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>N/A</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td></td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>P07-038266</td>
									<td>1995-02-27</td>
								    <td>Japan</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/218249-apparatus-for-encoding by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 12:38:24 GMT -->
</html>
