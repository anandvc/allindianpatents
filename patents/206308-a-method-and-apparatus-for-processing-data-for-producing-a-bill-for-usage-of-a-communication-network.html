<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/206308-a-method-and-apparatus-for-processing-data-for-producing-a-bill-for-usage-of-a-communication-network by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 05:10:38 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 206308:A METHOD AND APPARATUS FOR PROCESSING DATA FOR PRODUCING A BILL FOR USAGE OF A COMMUNICATION NETWORK</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">A METHOD AND APPARATUS FOR PROCESSING DATA FOR PRODUCING A BILL FOR USAGE OF A COMMUNICATION NETWORK</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>Aspects of the invention provide a method and apparatus for producing a bill for &quot;Y usage of a telecommunications network. The method comprises the steps of: obtaining from the telecommunications network a set of events on the network; providing a set of schema applicable to a set of products available to the user, the schema for processing events retrieved from the network; selecting from the set of schemas, schemas applicable to the products used by the user; and applying the 5 selected schemas to the set of events to process the events into a form ready for bill production.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td> <br><br>
This invention relates to billing for communications usage. In particular it relates to a billing system responsive to usage events in a communications network to process event data to support invoice production.<br>
In communications networks such as public switched telecommunications networks (PSTN), the customer receives charges based on usage of the network. Hence a billing system needs to detect usage of the network and to process data in respect of that usage so as to output a bill or other charging mechanism.<br>
For instance, when telephone calls are established across the British PSTN, records are created at the exchanges recording details about the call. The details will include information such as duration of the call, time of day of the call, start and end, the originating telephone line and destination telephone line. This information is periodically accessed by billing systems and processed into invoices which are sent out to the customer.<br>
A problem with present billing systems is that they can be very inflexible. For instance, when a communications service provider wishes to update its charges or wishes to introduce new services over the PSTN, a protracted and difficult upgrading process can be required to enable the billing system to cater for the new charging regime.<br>
According   to   a   first   aspect   of   the   invention   there   is   provided   a   method   of<br>
processing data for producing a bill for usage of a communications network, the<br>
method comprising:<br>
i)	receiving event data from the communications  network, the event data<br>
concerning network usage by a user;<br>
ii)	providing   a   set   of   schemas   applicable   to   communications   services<br>
available to users by means of the network, at least one schema containing service<br><br>
specific data and at least one rule, or an identifier for at least one rule, for use in<br>
processing received event data in respect of that service;<br>
iii)	selecting from the set of schemas one or more schemas applicable to the<br>
event data received; and<br>
iv)	applying the selected schema(s) to the event data to  process the event<br>
data for bill production.<br>
Preferably, the method further comprises:<br>
v)	storing a generic data processing structure, comprising an ordered set of<br>
data processing nodes which are ordered for the processing of event data relating<br>
to   communications   services   available   over the   network,   each   node   having   an<br>
associated schema from the set of schemas; and<br>
vi)	storing user specific information which identifies a set of services selected<br>
from the communications services available over the network and allocated to that<br>
user<br>
wherein the step of selecting one or more schemas is carried out by selecting a<br>
subset of the data processing nodes which have associated therewith schemas for<br>
processing network event data in respect of the selected set of services.<br>
The schemas may be stored in the nodes of the generic data processing structure but it may be more convenient that they are stored in a separate data structure, the generic data processing structure containing identifiers for the schemas rather than the schemas themselves.<br>
Although the term "user" is used above, the user may in fact be one of many representatives of a customer. For instance, a customer may be a multi-national company. In this case, it will be understood that the "user specific information" can in fact be relevant to all users of one particular customer.<br>
Embodiments of the present invention have the advantage that they can be relatively easily modified, for instance to cater for changes in a charging regime. Firstly, the services available over the network may change. In that case, the set of schemas or the generic data processing structure can be updated.   Alternatively,<br><br>
a customer may choose to add or delete a service from their specific set of services, or to change the specification for a particular service. In that case, the customer specific information can be updated.<br>
According to a second aspect of the invention there is provided apparatus for processing data for producing a bill for usage of a communications network, the apparatus comprising:<br>
means for receiving from the communications network a set of event data attributable to usage of the network;<br>
means for storing an ordered set of schemas applicable to a set of products available to a user, each schema comprising a logical process or an identifier for a logical process for processing event data received obtained from the network;<br>
means to select from the set of schemas those applicable to a selected set of communications products or services available to the user; and<br>
means to apply the selected schemas to the event data received from the network to process the events into a form ready for bill production.<br>
A specific embodiment of the invention will now be described, by way of example only, with reference to the drawing in which:-<br>
Figure 1 shows in .schematic block diagram form a billing system in accordance with the invention;<br>
Figure 2 shows in schematic block diagram form a pricing and assembly engine which is a component of the system shown in figure 1;<br>
Figure 3 shows in schematic block diagram form a module of the engine shown in figure 2;<br>
Figure 4 is an explanatory diagram used in an explanation of the concept of a cellular network of schemas to be applied to data obtained from a telecommunication network in order to produce a bill for usage;<br><br>
Figure 5 shows a generic cellular network (graph) and illustrates how cells of the graph may be selected for creating a customer specific graph;<br>
Figure 6 is an explanatory flow-chart of the operation of the system;<br>
Figure 7 is an explanatory diagram showing how cells of a graph are provided with datafields including pointers to other cells to establish a cellular network;<br>
Figure 8 shows the stages in the creation of a graph as a cellular network;<br>
Figure 9 is an explanatory flow-chart of the way in which a graph is applied to customer data (events);<br>
Figure 10 is a schematic diagram of the way in which the schemas of the customer specific graph process, create and combine events, and how the events flow from cell to cell in the graph;<br>
Figure 11 is an explanatory diagram which shows the way in which the results of the schemas point to their origins; and<br>
Figure 1 2 is a schematic diagram of the way a date-dependent change in customer specific data can be built into a customer specific graph.<br>
The following is a glossary of acronyms used in this specification, as an aid in reading the specification:<br>
PDG:	Primary Data Generator (such as a network exchange)<br>
NMP:	Network Mediation Processor<br>
PIUR:	Platform Independent Usage Record<br>
SDP:	Service Domain Processor<br>
PSLM:	Products and Services Life-Cycle Manager<br>
MEL:	Master Event List<br><br>
PEL:       Processed Event List CBP:      Customer Billing Processor<br>
•	IPE:	Invoice Production Engine PAE:       Pricing and Assembly Engine module<br>
•	CDM:	Customer Data Module<br>
•	CFM:	Common Functions Module<br>
•	ECM:	Environmental Control Module<br>
•	ELM:	Event List Module<br>
•	GMM:	Graph Manipulation Module<br>
•	PDM:	PSLM Data Module<br>
•	RIP:	Rules Interpretation Processor<br>
•	RCM:	Rules Compiler Module<br>
•	SMM:	Shared Memory Module<br>
With reference to Figure 1, a billing system 1 for generating bills for usage of a telecommunications network comprises a number of modules of software which provide the system with functionality. The system can be implemented on any suitable computing platform but will generally be distributed over a number of computer systems networked to enable appropriate interaction.<br>
In more detail, the system 1 includes a number of interfaces 2 to the network, three of which are shown although more than this will usually be provided for use with a network such as a PSTN. Each of the interfaces 2 is connected to a respective plurality of exchanges in the telecommunications network by links 3. The interfaces 2 are in turn connected to a customer billing processor CBP 4.<br>
A number of pricing and assembly engine modules (PAE) 5, three of which are shown, are arranged to interact with the CBP 4. These are also arranged to interact with a rules library module 6 and a products and service life cycle manager (PSLM) 7.<br>
Frofn the figure, it will be seen that the PSLM 7 is also arranged to interact with the rules library module 6.<br><br>
The interfaces 2 periodically poll the exchanges to which they are connected for information about network usage. The information is then processed into a form which is suitable for storage by the CBP 4. The'CBP 4 stores the information in a database 4a.<br>
The modules of the system 1 will now be described in more detail.<br>
Each interface 2 comprises two processors, a network mediation processor (NMP) 2a and a service domain processor (SDP) 2b.<br>
The NMP 2a is a processor for collecting event-related data from elements in the telecommunications network. These elements can be called primary data generators (PDGs) for the purpose of embodiments of the present invention. In a telecommunications network of the type generally in use today, they usually comprise exchanges. In this embodiment the NMP 2a runs on a UNIX platform on an ICL DRS 6000 workstation. The NMP 2a interfaces to and collects usage records from the primary data generators. The usage records contain data for billable events and may for instance be records of the origin, destination, time of commencement and duration of telephone calls routed by an exchange of the network.<br>
In order to obtain the data, the NMP 2a polls a list of the exchanges it serves.<br>
The usage records will vary in format according to the type and manufacturer of the data generator and part of the processor's task is to standardise and consolidate the records. The consolidated records are called platform independent usage records (PIURs) and these are output to the SDP 2b by encoding the records according to ASN1, an Open Systems Interconnection protocol.<br>
The SDP 2b receives the PIURs from the NMP 2a and applies a set of undiscounted,   simple   tariffs  to  them   in   order  to   produce   call   records   priced<br><br>
according to transaction based, elapsed time pricing. These priced call records are passed to the CBP 4.<br>
The CBP 4 takes the priced call records files generated by the SDPs 2a and assembles the information into a single data file. This file is stored on the database 4a for subsequent processing by a PAE 5.<br>
The CBP 4 contains a bill schedule process which runs against a customer billing database to determine which customers are to be billed. It does this by examining bill due dates and any other special flags which indicate that a bill is required, such as a "bill now" flag or "threshold breached" flag. This triggers selection of an available PAE 5 to which customer specific data is then sent for processing.<br>
Because billing is done periodically, all the information for a bill period can be assembled and it is possible to take into account many aspects of usage, including of course discounting against usage. It is also possible to take account of customer specific information such as pricing across multiple accounts.<br>
Each PAE 5 is essentially an event processor. An "event" for the purposes of the PAE 5 is the establishing of a connection on the network which is to be billed. For example, an event could be a call on the PSTN, a private circuit rental event or a transfer charge event. The file assembled from the priced call records files and received by the PAE 5 from the CBP 4 is converted in the PAE 5 into a master event list MEL.   Each event on the MEL is a PIUR.<br>
The output of the CBP 4 to the PAE 5 is sorted by "service" and, within each "service", in chronological order of distinguishing date/time. Each event may have a single date/time associated with it, in which case this is the distinguishing date/time. Alternatively there may be multiple date/times, such as start and finish date/times, or a start date time and a duration. In these cases, it is the start date/time which is the distinguishing date/time. The PAE 5 needs chronological date/time information for several reasons, such as where there has been start/stop/resume of a service in the period covered by a bill.    It is simpler if the<br><br>
CBP 4 provides an event list in chronological order so that the PAE5 does not have to support sorting. However, this does mean that events have to be have been provided with a common time zone.<br>
The PAE 5 processes events of the MEL either singly or in groups creating a processed event list (PEL). Each PEL is a subset of the events on the MEL together with information on how the events have been processed in the PAE. Thus the PEL has a processing audit which should an error occur in the billing process allow the origin of the error to be determined and corrective action to be carried out to prevent that fault from reoccurring.<br>
The PAE 5 processes events for a customer according to a set of related schemas for that customer. A schema is a logical process (not a UNIX process) that executes a rule provided by the PSLM 7 to produce for instance a price for a product or information for a bill. The PSLM 7 supplies rules (in plain text) which have been identified by a set of schemas concerned with the processing of the telecommunications usage. These rules can cater for the pricing of a wide range of services such as cost of time units, rental, and call services. Obviously, these prices may change over a time period for which a bill is to be produced and this is dealt with by reference to the distinguishing date/time for each event, mentioned above, and the application of the schemas. The schemas are held as a generic graph in a way which will be explained later. A set of related schemas for a customer is generated by applying customer specific data to the generic graph. This also is further dealt with below.<br>
The rules for the schemas are held in the rules library module 6.<br>
The PAE 5 includes a rule compiler module (RCM) 8. This module receives rules in plain text format from the PSLM 7 and converts them to a form of pseudo machine code (p-code) which represents the machine instructions for a virtual stack based machine. The PAE 5 also has a rules interpretation processor (RIP) 9 which understands the p-code form of the rules. The interpreter 9 runs as a separate process for scalability as several interpreters can run at the same time.<br><br>
The PAE will now be described in greater detail with reference to figure 2. The PAE 5 includes a number of modules. Modules are collections of software code which provides functionality to the PAE and are thus functional components and not architectural components. The first two modules were mentioned earlier and these are the RIP 9 and the RCM 8. A third module is a graph manipulation module (GMM) 1 0. A fourth module is a customer data module (CDM) 11. A fifth module is a shared memory module (SMM) 12. A sixth module is a common functions module (CFM) 13. A seventh module is an event list module (ELM) 14. An eighth module is a PSLM data module (PDM) 15. A ninth module is an environmental control module (ECM) 16.<br>
The functionality provided by each of the modules will now be described.<br>
The GMM 10 is a core module of the PAE 4 for it provides a function of building and manipulating graphs of pricing and billing schemas on a cellular framework (the concept of graphs will be described later). This module connects schema together to build a schema graph, tests the resulting graph to ensure that it is acyclic that is to say that there are no endless loops, instantiates a graph for a particular instance of a customer and invokes execution of that graph. These processes will be described in greater detail later.<br>
The CDM 11 provides the functionality required for handling customer data in the PAE 5. The customer data can be both inventory data and event data. It receives incoming files from the CBP 4 and parses them into separate files for each customer. It then parses each separate customer specific file and puts the inventory data into shared memory. The event data is formed into a master event list MEL and passed to the ELM 14 which then puts the MEL into shared memory controlled by the SMM 12. This module also enables the inventory data in shared memory to be accessed and combines invoice ready files (files processed by the PAE) and sends them back to the CBP 4, in particular to an invoice production engine (IPE) 4b which prints off the bill.<br><br>
The SMM 12 provides functions to manage memory allocation within memory which is shared by the modules.<br>
The CFM 13 provides a set of general purpose functions or utilities for use by other modules when required. The utilities include file access, rounding and error logging utilities.<br>
The ELM 14 provides the functionality required for manipulation of events. It enables creation of a MEL from event data received from the CBP 4, provides access to the original event data received from the CBP 4, creates PELs and adds pricing and assembly information to PELs. It also enables the selection and manipulation of event lists within PELs and builds the invoice ready data files which are sent back to the CBP 4.<br>
The PDM 15 comprises a number of sub-modules as shown in figure 3. The sub-modules include a PSLM interface 15a, a schema graph storage module 15b, a platform independent record definition storage 15c and a PDM API 15d which enables access to the PIRs held in storage 15c by other modules. The schema graph storage module 15b stores the schema rules and information necessary to build the schema graph. It stores the schema rules in an internal form after receiving them from the RCM 8. The RCM 8 converts the rules to the internal form from the form in which they are received from the PSLM 7.<br>
The ECM 16 provides co-ordination for the other modules, controlling the work flow amongst the other processors. In particular it detects when updating is necessary, for instance of the generic graph mentioned above. When an update is necessary, it is the ECM 16 which will stop new processing starting up, waiting until processes already in progress have finished before triggering the necessary updating and restarting processing.<br>
The principle which the PAE 5 follows is that the company's products and services used by the customers can be represented as a graph in which the nodes can process   events   generated   by   a   customer.      Each   node   in   the   graph   has   an<br><br>
associated schema and the interconnection of the node defines the interrelationship which exists between the schemas. Each node will process a relevant set of customer generated events and the flow of events from a first node to a final node results in a final customer invoice. This concept is illustrated in Figure 4.<br>
In Figure 4 the various processes that can be performed on the- event data input into the PAE 4 are shown as nodes A, B, C and D. The nodes are interconnected by links 40 to 43. Node A is interconnected by link 40 to node B and by link 41 to node C. Node B is interconnected to node C by link 42. Node C is interconnected to node D by link 43.<br>
Data "flows into" the graph at the bottom node as represented in the figure, that is, in this case, node A. Node A performs its operations on the data and passes the results of those operations to node B and node C, as represented by data flow arrows 44 and 45. Node B performs its operations on the data it receives from node A and passes the results of those operations to node C as represented by data flow arrow 46. Node C performs its operations on the data received from node A and node B and passes the results of those operations to node D as represented by dataflow arrow 47. Node D performs its operations and since it is the final node the processed data "flows out of" the graph.<br>
The graph is, in this case, acyclic since there are no endless loops. Consider the same graph with the addition of a link 48 (shown in broken outline) interconnecting node D back to node B. The link 48 passes data back from node D to node B as represented by dataflow arrow 49. This data would then be passed to node C and thence back to node D. Thus an endless processing loop could be established. It is part of the function of the GMM 10 to verify the graph to ensure that no endless processing loops are introduced during construction of the graph.<br>
The PSLM 7 holds a generic graph which has processing nodes for every possible service and product offered by the telephone operator. Figure 5 shows such a generic graph although for the sake of simplicity the number of nodes has been<br><br>
reduced. Not all customers will use all the products and services available. Thus, if this generic graph were to be used directly, a lot of processing steps will be carried out unnecessarily or processing power allocated to the task unnecessarily. This would waste valuable computing time when preparing a bill.<br>
Suppose, for example, a customer utilises those products or services requiring the nodes labelled X then six of the nodes (without labels) will be superfluous.<br>
In order to prevent this the PAE 5 utilises the GMM 10 to tailor the generic graph according to those goods and services the customer has taken.<br>
Figure 6 shows a flow-chart of the operation of the PAE 5. A first stage is for the PAE 5 to request the generic graph data from the PSLM 7 as represented by box 60. This data is used to build a generic graph in a step represented by box 61. The generic graph is tailored to be specific to a customer in a process (to be described later) called "lighting the graph", as represented by box 62. The tailored graph is then applied to the customer events passed to the PAE 5 by the CBP 4, this step being represented by box 63. The PAE 5 passes the processed data back to the CBP 4, as represented by box 64, where it is passed to the IPE 4b and a bill printed out and dispatched to the customer. New customer data is requested from the CBP 4 as represented by box 65 and the steps are then repeated..<br>
The first two step 60 and 61 will now be described in greater detail.<br>
The PSLM 7 holds information on:<br>
1.	Products prices and related information which will be used by the PAE 5 to produce a price for a product. For example, the rental charge for a telephone line or the price of an item of equipment such as a telephone or answering machine;<br>
2.	The rules for pricing a product or for producing information for a particular billing schema.   An example of this would be a discount service such as<br><br>
"Friends and Family" offered by British Telecommunications Pic of 82 Newgate Street, LONDON, United Kingdom. In this service a discount is made on calls to a nominated'set of numbers; and<br>
3.	The  relationships  between the  various  products  or  bills,  including  date<br>
information.<br>
In essence items 1 and 2 of the information are individual schemas equivalent to the nodes in figure 5 and item 3 is equivalent to the links between the nodes. Thus, although the generic graph is not stored in the way depicted in figure 5, that is in a pictorial way, all the information required to later form the schema graph is stored.<br>
The schemas are logical processes that execute a rule to produce a price or information to be produced on a bill (for example the total number of telephone units used). The rules implemented in the schema are provided by the PSLM 7 and a schema may be executed more than once in any bill production. In other words a node in the graph of figure 5 may be used more than once in processing customer data although not on the same item of data because the graph is acyclic as mentioned above.<br>
Those items of customer information to which a schema may be applied are termed schema instances. This concept is similar to the concept of object class and object instance in object orientated programming. A schema is executed once for each schema instance that exists for that schema. Each time a schema is executed a PEL is created as a record of everything done on the schema instance.<br>
In essence therefore the graph is a "map" of the processes to be carried out on the customer data giving the routes to be followed by the products of those processes 1 to other processes. It should be emphasised that the schema graph is built purely from the data held by the PSLM 7. No customer specific data is held in the nodes and links. It is a generic graph which will cater for a notional customer who will use all of the products and services offered by the operator.<br><br>
The PSLM 7 sends two types of data to the PAE 5 in order to create the schema graph. The first type concerns the rules - these are sent in a plain text form. The second type is a table mapping each schema to any parent schemas which act upon output generated by that schema.<br>
The PDM 1 5 of the PAE 5 translates the table into a form suitable for use with the GMM 10. From this table the GMM 10 builds the generic graph by structuring the data into a node with parents and children, that is, a parent child structure is created. A simplified parent child structure is shown in figure 7 and it can be seen that each node is a memory structure including a number of identifiers. Taking node 70, this has a cell identifier field 71, a field 72 including a pointer to children of that node, a field 73 including a pointer to parents of that node and a field 74 identifying the schema. Thus, from the figure, it will be seen that node 75 is schema C, it has a parent schema A as indicated by pointer 76, and it has a child schema which is schema D.<br>
At this stage in the process, a true graph has not been created but just a set of table structures with pointers to other table structures. The next stage is to convert this into cells and synapses of a cellular framework. The conversion process is carried as described in the following pseudo-code after the creation of a root node and a concentrator node.<br>
message BUILDGRAPH<br>
{<br>
copy schema id to cell<br>
if NO working node children<br>
{<br>
connect to concentrator<br>
enter concentrator child in cell child list<br>
}<br>
else<br>
{<br><br>
for each child in working node<br>
{<br>
if working node child cellid = =()<br>
{<br>
create cell for child<br>
connect to child cell<br>
reset working node to child node<br>
send BUILDGRAPH to child<br>
} else<br>
{<br>
connect to child cell<br>
}<br>
enter child in cell child list<br>
} } }<br>
Figure 8 shows the stages involved in the building of a simple graph. Figure 8a shows the first stage in the graph building process; that of creation of root (R) and concentrator (C) nodes. Figure 8(b) shows the creation of the first child 81 and in the next stage shown in figure 8(c) a child 82 of the child 81 is created. This is then connected to the concentrator C. In the final stage a further child 83 of the root node is created and connected to its child 82 which is an earlier created child of cell 81.<br>
The next stage is to "validate" the schema graph which has been created. This is a test carried out to ensure that no messages get lost or enter infinite loops circling through the same cells in the graph. The graph should be a directed acyclic graph (DAG) and to check this any message sent from a cell to a child must not then return as an input to this cell from a parent.<br><br>
A message called GRAPHCHECK is sent to the root cell and thence to each cell and its children in turn, in a synchronous manner. The GRAPHCHECK message contains a list of cell identifiers through which the message has passed. , The arrival of the message at a cell invokes a check of the cell id of that cell against those in the list of cell ids that have already been visited. If there is a match then that cell has been visited before and there is a loop in the graph. In such circumstances the graph would be held invalid. The errors are noted by marking the cell status accordingly.<br>
Children of each cell are sent the message and if it returns from every child cell with no error then the cell status is marked valid and this cell id is removed from the list on the message. The message is then sent back to the parent which sent it. If this cell is checked from another cell then it will immediately return the result that it is valid by checking its status.<br>
The pseudo-code for the GRAPHCHECK message is as follows:-<br>
message GRAPHCHECK<br>
{<br>
if status NOT set<br>
{<br>
if cellid in list of cellids in GRAPHCHECK<br>
{<br>
status = invalid<br>
copy status to GRAPHCHECK data<br>
/* could mark the cellid which caused error for reporting */<br>
return<br>
}<br>
status = valid<br>
add cellid to list in GRAPHCHECK<br>
for each child<br>
{<br><br>
send synchronous GRAPHCHECK<br>
if status returned in GRAPHCHECK =  = invalid<br>
{<br>
status = invalid<br>
return<br>
} }<br>
remove ceilid from GRAPHCHECK data<br>
set GRAPHCHECK return status to valid return<br>
} else<br>
{<br>
copy status to GRAPHCHECK data<br>
return<br>
}<br>
With the generic schema graph having been created and verified, the next step is to tailor this generic graph to a customer specific graph. This step is the step represented by box 62 in figure 6. It is referred to as "lighting up" the graph or instantiating the graph. In essence this lighting up process involves mapping customer inventory information held in the CDM 11 to the schema graph held in the PDM 1 5 to create a graph which is specific to that customer.<br>
Each customer will have a number of items which will generate events to be charged. The items are referred to as Feature Items (Fi) and they will include telephone lines, charge cards and private circuits. The events generated by the Feature Items will be charged for according to billing options held in the customer inventory. The options are termed products. An example of a product is "Family and Friends" which was described earlier.<br>
The customer inventory will include all instances of the products to which the customer subscribes. A product may have more than one instance, for example, the "Family and Friends" product will have two instances where the customer has<br><br>
two telephone lines utilising this product. Each product instance in the customer inventory contains all the customer defined attributes and data which relates to that instance of the product.<br>
The process of "lighting-up" the graph entails instructing each cell of the graph where to locate the product instances and the instances of the schemas it is to use. In order to do this each cell has at least one instance table. An example of a table is given below.<br><br>
The tailored graph can then be applied to the customer events (box 63 figure 6) in order to calculate the invoice.<br>
The steps involved in this process are shown in Figure 9. A first step in the process is to send the customer event list to the concentrator cell of the customer specific graph, this step being represented by box 90. The concentrator cell sends the appropriate events to its parent cells via the appropriate links, as represented by box 91. The concentrator cell then resets as represented by box 92. This involves the discarding of customer specific information. The cell is then no longer lit up and is ready to be "lighted up" to form a cell of a graph specific to the next customer.<br>
Each parent upon receipt of the events produces a PEL for each schema instance it has , as represented by box 93. The schema instances are run, as represented by box 94 and the results are sent to the appropriate parents of that cell, as represented by box 95. If the parent is the root cell (box 96) then the data has traversed the graph and the process ends as represented by box 97. If the parent is not the root then the steps represented by boxes 92 to 96 are carried out again.<br>
Thus, in applying the graph to the customer data a series of PELs are caused to "flow up" the graph (up in the sense from concentrator to root).   Figure 10 shows<br><br>
part of such a customer graph. The figure shows three cells 100, 101 and 103. Cell 100 is concerned with a product called "PSTN-U", cell 103 is concerned with a product called "OPTION 15" and cell 101 is^concemed with a product called "Family and Friends". Data flows into this part of the graph by means of link 104 to cell 100 and leaves the graph by means of-link 1 05 from cell 103. A link 106 exists between cell 100 and cell 101. Between cell 101. and cell 103 there is a link 107 and between cell 103 and 100 there is a link 108..<br>
Consider the situation where the customer has two lines numbered 124 and 456. Because there are two numbers, there will be two instances of the PSTN-U schema one for each number and this ceil will output two PELs 109 and 110. PEL 109 relates to line 456 and PEL 110 relates to line 123. The customer has taken Option 15 on line 123 and both "Family and Friends" and "Option 15" on line 456.<br>
Thus, PEL 109 is directed in the direction of arrow 11 1 to cell 101 because line 456 has the option "Family and Friends". Cell 101 applies the schema to the input PEL 109 and outputs another PEL 112 in the direction of arrow 113 along link 107. PEL 112 thus concerns calls on link 456 to telephone numbers discounted according to the "Friends and Family" option.<br>
Cell 103 awaits for the arrival of both PELs 112 and 110. PEL 110 is directed to cell 103 along link 108 in the direction of arrow 114. This cell processes the input PELs by discounting the total telephone usage on both lines. A PEL 11 5 is output from the cell 103 along link 105 in the direction of arrow 11 6 to the next cell in the graph (not shown). The output PEL 115 contains all the telephone usage records for both lines with the appropriate discounts applied.<br>
An important point to be noted here is that each PEL has a data-field which indicates the PEL from which it originated. This allows billing errors to be traced to the erroneous schema. As the schema instances execute, a PEL "spreadsheet" will be built up. The "spreadsheet" will contain information about the execution of the customer specific graph. For the example illustrated in figure 10 the PEL "spreadsheet" would be as shown in figure 11.<br><br>
A MEL 117 comprises a number of events labelled a to k in the figure 11. Of these events a, c, e, f, h, j are directed to cell 100 and traverse the section of graph depicted in figure 10. These events form the input PEL sent on link 104 to cell 100 but have pointers 118 back to their counterparts in the MEL 117. The input PEL is effectively split by the cell 100 in to the PEL 100 sent directly to the. cell 103 containing events c, f, j and the PEL 111 sent to cell 101 containing events a, e and h. The events sent to cell 101 are processed to form PEL 11 2 and these have pointers 121 back to back to PEL 120. The events of PEL 109 are processed by cell 101 to form PEL 112 which is to cell 103. Output PEL 1.15 has events a, e, h, j with pointers 122 back to PEL 109.<br>
After the events have been processed and leave the graph, they are passed to the IPE 4b of the CBP 4 where the bill is printed out and dispatched to the user, as represented by box 64 of figure 6.<br>
The process is then repeated (steps 62 to 64) for the next customer, as represented by box 65.<br>
The above described process does not take into account the "distinguishing date" information contained in an event. This becomes important because the customer specific data may show a change in circumstances during the billing period so that an event being processed needs to follow different links between cells (or schemas) at different times. As an example, the billing period may be January to February but the customer, although having the service "Option 15" continuously for his line 456, may only have begun to subscribe to Friends and Family for that line in February.<br>
Referring to Figure 12, looking at links from the concentrator node 130 to the "Option 15" node 131 and to the "Friends and Family" node 132, then these links will need associated date/time data to show the change in relationship, so that an event can be correctly "routed". This is because until February, a customer event should proceed from the concentrator node 130 directly to the "Option 15" node<br><br>
131. After the beginning of February however, event data for line 456 should follow the link to the "Friends and Family" node 132 and only thence to the "Option 15" node 131.<br>
It is possible to "tag" a link between two cells in this respect. Once two cells have been instantiated, it is possible to look at the instance tables of the two cells to find overlaps. These overlaps then indicate which ranges apply to apply to which links so that event data will flow along the correct link when the data is processed by the graph.<br><br><br><br>
WE CLAIM  :<br>
1.	A method of processing data for producing a bill for usage of a communications network, the method comprising receiving event data (117) from the communications network, the event data (117) concerning a plurality of network usage events by a user over a period of time; providing a set of schemas (70, 75) applicable to communications services available to users by means of the network, each schema (70, 75) containing service specific data and at least one rule, or an identifier for at least one rule, for use in processing received event data (117) in respect of that service; storing user specific information which identifies a set of services selected from the communications services available over the network and allocated for use by that user; selecting from the set of schemas (70, 75), in accordance with the user specific information stored for that user, one or more schemas (70, 75) applicable to the event data (117) received; and applying the selected schema(s)(70, 75) to the event data (117) to process the event data (117) for bill production.<br>
2.	The method according to claim 1, wherein the method further comprises storing a generic data processing structure, comprising an ordered set of data processing nodes which are structured for the processing of event data (117) relating to communications services available over the network, each node having an associated schema (70, 75) from the set of schemas (70, 75), wherein the step of selecting one or more schemas (70, 75) is carried out by selecting a subset (A,B,C,D) of the ordered set of data processing nodes which have associated therewith schemas (70, 75) for processing network event data (117) in respect of the selected set of services for the user.<br><br>
3.	The method according to claim 2 which further comprises instantiating each of the subset (A,B,C,D) of data processing nodes with user specific data in relation to the selected set of services, prior to applying the selected schema(s) (70,75) to the event data (117).<br>
4.	The method according to either one of claims 2 or 3, wherein an item of the event data (a-k) comprises at least one distinguishing date and the step of selecting schemas (70, 75) for processing that item of event data (a-k) includes the step of reading the distinguishing date and selecting a schema from alternative schemas in accordance with said date.<br>
5.	The method according to any either of claims 3 or 4, wherein at least one of the subset (A,B,C,D) of data processing nodes is instantiated with user specific data comprising date information in relation to a service, which date information is used in processing network event data (117) in respect of at least one of said selected set of services.<br>
6.	The method as claimed in claim 1, wherein the schemas (70, 75) to be applied to the data are formed as a linked node structure of inter-related schemas (70, 75) and the events to be processed are input to the structure.<br>
7.	The method as claimed in claim 6, wherein the events are formed into a master event list (117) and the linked node structure is formed as a graph of schemas (70, 75) each schema (70, 75) processing at least some of the events (109, 115, 120) on the master event list (117) and passing processed events (a-k) on to other cells and inputting at least some of the events (a-k) of the master event list (117) into a first node of the graph<br><br>
such that the events pass through cells in the graph to a final cell from which they are output from the graph in a processed form.<br>
8.	The method as claimed in claim 6 or 7, wherein the graph is formed by activating at least some of the cells in a generic graph.<br>
9.	The method as claimed in any one of claims 6 to 8, wherein the generic graph is built from a set of information about products and services available on or in connection with the communications network.<br>
10.	The method as claimed in claim 9, wherein the set of information is held on a database which may be updated to cater for a change in the products and services available on or in connection with the communications network.<br>
11.	The method as claimed in any one of claims 6 to 10, wherein at least some of the processed events (a,c,e,f,h,j) include pointers to the events from which they were derived.<br>
12.	The method as claimed in any one of claims 6 to 11, wherein each schema (70, 75) comprises one or more rules obtained from a database of rules.<br>
13.	The method as claimed in claim 12, wherein at least one rule is used for more than one schema (70, 75) either alone or in combination with another rule.<br>
14.	The method as claimed in claim 12 or 13 comprising the step or forming at least one schema (70,75) from one or more of the rules.<br><br>
15.	The method as claimed in any one of claims 6 to 14, wherein links are established between cells along which processed events may flow between the cells at least some of the links being dependent upon a temporal criterion of events allowed on to the link.<br>
16.	The method as claimed in any one of claims 6 to 15, wherein the results of the processed events (a,c,e,f,hj) include an indication of the events from which they are derived.<br>
17.	Apparatus for processing data for producing a bill for usage of a communications network, the apparatus comprising means arranged in operation to receive event data (117) from the communications network, the event data (117) concerning a plurality of network usage events by a user over a period of time; means arranged in operation to provide a set of schemas (70, 75) applicable to communications services available to users by means of the network, each schema (70, 75) containing service specific data and at least one rule, or an identifier for at least one rule, for use in processing received event data (117) in respect of that service; means arranged in operation to store user specific information which identifies a set of services selected from the communications services available over the network and allocated for use by that user; means arranged in operation to select from the set of schemas (70, 75), in accordance with the user specific information stored for that user, one or more schemas (70, 75) applicable to the event data (117) received; and means arranged in operation to apply the selected schema(s)(70, 75) to the event data (117) to process the event data (117) for bill production.<br><br>
18.	Apparatus as claimed in claim 17, wherein means are provided for<br>
forming the schema (70, 75) into a linked node structure.<br>
19.	Apparatus as claimed in claim 17 or 18, comprising means to form the<br>
events into a master event list.<br>
20.	A method of processing data for producing a bill for usage of a<br>
communications network, substantially as herein described with reference<br>
to the accompanying drawings.<br>
21.	Apparatus for processing data for producing a bill for usage of a<br>
communications network, substantially as herein described with reference<br>
to the accompanying drawings.<br><br></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM1LW1hcy0xOTk3LWFic3RyYWN0LnBkZg==" target="_blank" style="word-wrap:break-word;">135-mas-1997-abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM1LW1hcy0xOTk3LWNsYWltcyBkdXBsaWNhdGUucGRm" target="_blank" style="word-wrap:break-word;">135-mas-1997-claims duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM1LW1hcy0xOTk3LWNsYWltcyBvcmlnaW5hbC5wZGY=" target="_blank" style="word-wrap:break-word;">135-mas-1997-claims original.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM1LW1hcy0xOTk3LWNvcnJlc3BvbmRhbmNlIG90aGVycy5wZGY=" target="_blank" style="word-wrap:break-word;">135-mas-1997-correspondance others.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM1LW1hcy0xOTk3LWNvcnJlc3BvbmRhbmNlIHBvLnBkZg==" target="_blank" style="word-wrap:break-word;">135-mas-1997-correspondance po.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM1LW1hcy0xOTk3LWRlc2NyaXB0aW9uIGNvbXBsZXRlIGR1cGxpY2F0ZS5wZGY=" target="_blank" style="word-wrap:break-word;">135-mas-1997-description complete duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM1LW1hcy0xOTk3LWRlc2NyaXB0aW9uIGNvbXBsZXRlIG9yaWdpbmFsLnBkZg==" target="_blank" style="word-wrap:break-word;">135-mas-1997-description complete original.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM1LW1hcy0xOTk3LWRyYXdpbmdzLnBkZg==" target="_blank" style="word-wrap:break-word;">135-mas-1997-drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM1LW1hcy0xOTk3LWZvcm0gMS5wZGY=" target="_blank" style="word-wrap:break-word;">135-mas-1997-form 1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM1LW1hcy0xOTk3LWZvcm0gMjYucGRm" target="_blank" style="word-wrap:break-word;">135-mas-1997-form 26.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM1LW1hcy0xOTk3LWZvcm0gMy5wZGY=" target="_blank" style="word-wrap:break-word;">135-mas-1997-form 3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM1LW1hcy0xOTk3LWZvcm0gNC5wZGY=" target="_blank" style="word-wrap:break-word;">135-mas-1997-form 4.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM1LW1hcy0xOTk3LWZvcm0gNS5wZGY=" target="_blank" style="word-wrap:break-word;">135-mas-1997-form 5.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTM1LW1hcy0xOTk3LXBjdC5wZGY=" target="_blank" style="word-wrap:break-word;">135-mas-1997-pct.pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="206307-a-double-draw-single-pass-die-for-the-manufacture-of-a-metal-tube.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="206309-system-and-method-for-controlling-data-access-in-a-computer-network.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>206308</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>135/MAS/1997</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>26/2007</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>29-Jun-2007</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>23-Apr-2007</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>27-Jan-1997</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>BRITISH TELECOMMUNICATIONS PLC,</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>81 NEWGATE STREET, LONDON EC1A 7AJ</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>DAVID STEPHEN ALLISON</td>
											<td>10 ST ELLENS, EDENDERRY, BELFAST, BT8 8JN</td>
										</tr>
										<tr>
											<td>2</td>
											<td>DAVID MARTIN HAWTHORNE</td>
											<td>16 ORBY PARADE,BELFAST,BT5 6AH,NOTHERN IRELAND</td>
										</tr>
										<tr>
											<td>3</td>
											<td>ANDREW MAIRS</td>
											<td>130 BALLYNAHINCH ROAD,DROMORE,CO DOWN,BT25 1EA</td>
										</tr>
										<tr>
											<td>4</td>
											<td>WILLIAM GEORGE GLASS</td>
											<td>22 THISTLEMOUNT PARK,LISBURN,BT28 2UN</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>H04M15/00</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>N/A</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td></td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td></td>
									<td></td>
								    <td>NA</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/206308-a-method-and-apparatus-for-processing-data-for-producing-a-bill-for-usage-of-a-communication-network by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 05:10:39 GMT -->
</html>
