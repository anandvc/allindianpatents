<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/265126-recording-medium-reproducing-device-recording-method-and-reproducing-method by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 03:31:34 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 265126:RECORDING MEDIUM, REPRODUCING DEVICE, RECORDING METHOD, AND REPRODUCING METHOD</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">RECORDING MEDIUM, REPRODUCING DEVICE, RECORDING METHOD, AND REPRODUCING METHOD</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>On a BD-ROM, PlayList information is recorded. The PlayList information includes MainPath information and SubPath information. The MainPath information specifies one of a plurality of AVClips as a MainClip, and defines a primary playback section on the MainClip. The SubPath information specifies, among the rest of the AVClips, one AVClip as a SubClip, and defines, on the SubClip, a secondary playback section to be synchronized with the primary playback section. The PlayList information includes an STN_table, which indicates SubClip and, from among a plurality of elementary streams multiplexed into the SubClip, elementary streams allowed to be played back. A total data size of AVClip per unit time is, for example, less than or equal to 48 Mbits when the AVClip includes a plurality of elementary streams allowed in the STN_table to be played back and does not include elementary streams which are not allowed in the STN_table to be played back.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>Description<br>
RECORDING  MEDIUM,  REPRODUCING  DEVICE,  RECORDING  METHOD,  AND<br>
REPRODUCING METHOD<br>
Technical Field<br>
[0001]<br>
The present invention belongs to a technical field of Out-of-<br>
MUX framework.<br>
Background Art<br>
[0002]<br>
The Out-of-MUX framework is a technology that simultaneously<br>
reads a digital stream recorded on a read-only recording medium, such<br>
as a BD-ROM, and a digital stream recorded in a local storage, which<br>
is a rewritable recording medium, supplies them to a decoder, and<br>
then plays back them synchronously.<br>
Here, assume that the digital stream recorded on a BD-ROM is a<br>
main portion of a movie while the digital stream recorded in a local<br>
storage is a commentary of the director of the movie. In this case,<br>
by realizing the above-mentioned Out-of-MUX framework, the main<br>
portion of the movie on the BD-ROM and the commentary can be played<br>
back together, which thereby improves and expands content on the BD-<br>
ROM.<br>
The prior art regarding read-only recording media includes the<br>
following patent application.<br><patent reference> Japanese Laid-Open Patent Application No.<br>
H8-83478<br>
Disclosure of the Invention<br>
1<br><br>
[Problems that the Invention is to Solve]<br>
[0003]<br>
In the above-described Out-of-MOX framework, a stream recorded<br>
on the BD-RCM and a stream recorded in the local storage must be read<br>
simultaneously, and TS packets constituting these streams need to be<br>
supplied to the decoder. According to an examination of how much<br>
band is required for the supply to the decoder, in the worst case<br>
where the supply bit rate of the BD-RCM is 48 Mbps and the supply bit<br>
rate of the local storage is 48 Mbps, the data supply of as much as<br>
96 Mbits (48 Mbits + 48 Mbits) may occur during the period of the<br>
simultaneous readout. If such a worst case is likely to occure, the<br>
band in the device must be increased so as to supply TS packets at 96<br>
Mbps. If this cannot be done, it is necessary to provide a large<br>
buffer in the decoder and cause the decoder to perform a prior read<br>
operation to read TS packets in advance so that the supply does not<br>
concentrate at a point in time. If the period of simultaneous<br>
readout is short, it may be possible; however, in the case of plyaing<br>
back a movie of two hours length, the buffer capacity is insufficient,<br>
and the prior read operation is therefore not successfully performed.<br>
[0004]<br>
Since the prior read operation is not successfully performed,<br>
an underflow occures in the buffer for the prior reading operation.<br>
This then causes loss of video and audio, and therefore the playback<br>
quality is significantly reduced. However, high-bit-rate data supply<br>
results in an impediment of price reduction of such playback<br>
apparatuses.<br>
The present invention aims at providing a recording medium<br>
capable of supplying, to a decoder, digital streams supplied from<br>
2<br><br>
different recording media without the need of the band to be<br>
increased.<br>
[Means to Solve the Problem]<br>
[0005]<br>
In order to achieve the above-mentioned object, the recording<br>
medium of the present invention is characterized by that: the<br>
playlist information includes main-path information and sub-path<br>
information; the main-path information specifies, among a plurality<br>
of digital streams, one digital stream as a main stream, and defines<br>
a primary playback section on the main stream; the sub-path<br>
information specifies, among rest of the plurality of digital streams,<br>
one digital stream as a substream, and defines, on the substream, a<br>
secondary playback section which is to be synchronized with the<br>
primary playback section; the playlist information further includes a<br>
stream table showing at least one pair of elementary streams which<br>
are allowed to be simultaneously played back, the pair of elementary<br>
streams being made up of one of a plurality of elementary streams<br>
multiplexed into the main stream and one of a plurality of elementary<br>
streams multiplexed into the substream; and the total data size of a<br>
digital stream per unit time is less than or equal to a predetermined<br>
value, the digital stream including the pair of elementary streams<br>
and not including an elementary stream which is not allowed in the<br>
stream table to be simultaneously played back.<br>
[Advantageous Effects of the Invention]<br>
[0006]<br>
The total data size, per unit time, of a plurality of<br>
elementary streams allowed in the stream table to be played back is<br>
less than or equal to the predetermined value.  Even in the worst<br>
3<br><br>
case, the amount of TS packets transferred per unit time does not<br>
exceed the predetermined value.<br>
For example, in the case where the unit time is one second and<br>
the predetermined value is 48 Mbits, if the supply amount of TS<br>
packets locally reaches 96 Mbits due to the simultaneous readout of<br>
the streams, the bit amount per second is controlled to be less than<br>
or equal to 48 Mbits. Accordingly, the worst case—i.e. the data<br>
supply amount of 96 Mbits—does not continue for 0.5 seconds or more.<br>
[0007]<br>
Since it is ensured that "the worst case does not continue for<br>
0.5 seconds or more" at any point on the time axis of stream playback,<br>
an underflow in the buffer of the decoder can be prevented by<br>
building the playback apparatus in such a manner that TS packets with<br>
a size of 96 Mbits x 0.5 seconds are always read in advance and<br>
supplied to the decoder.<br>
The prior reading operation with the upper limit of "96 Mbits<br>
x 0.5 seconds" prevents the occurrence of an underflow, and therefore<br>
TS packets can be stably supplied to the decoder. This eliminates<br>
the risk that simultaneous readout to realize the Out-of-MUX<br>
framework has an influence on the quality of the digital stream. It<br>
is possible to realize the Out-of-MUX framework on a playback<br>
apparatus that performs ED-ROM playback only without requiring the<br>
bandwidth to be increased. As a result, playback apparatuses that<br>
realize the Out-of-MUX framework can be introduced to the market at<br>
low prices.<br>
[0008]<br>
In addition, with the limitation of "48 Mbps or less per<br>
second," if the playback apparatus executes the simple control of<br>
4<br><br>
"always performing a prior reading operation" as described above, it<br>
is possible to prevent the occurrence of an underflow even if the<br>
worst-case data supply occurs. This eliminates the need of<br>
implementation of a process for predicting the timings at which the<br>
worst-case data supply would occur, whereby facilitating development<br>
of the playback apparatuses.<br>
Brief Description of the Drawings<br>
[0009]<br>
FIG. 1 shows a usage application of a recording medium<br>
according to the present invention;<br>
FIG. 2 shows an internal structure of a BD-RCM;<br>
FIG. 3 is a schematic structure of a file with an extension<br>
of .m2ts attached thereto;<br>
FIG. 4 shows further details of how video and audio streams<br>
are stored in a PES packet sequence;<br>
FIG. 5 shows how the video and audio are multiplexed into a<br>
program stream and a transport stream;<br>
FIG. 6 shows details of a transport stream;<br>
FIG. 7 shows internal structures of a PAT packet and a PMT<br>
packet;<br>
FIG. 8 shows what processes TS packets constituting an AVClip<br>
are subject to before they are written to the BD-RCM;<br>
FIG. 9 shows an internal structure of an Aligned Unit;<br>
FIG. 10 shows an internal structure of Clip information;<br>
FIG. 11 shows EP_map settings for a video stream of a movie;<br>
FIG. 12 shows a data structure of PlayList information;<br>
FIG.  13 shows relationships between AVClip and PlayList<br>
information;<br>
5<br><br>
FIG. 14 shows an internal structure of a local storage 200;<br>
FIG. 15 shows the way a Primary TS and a Secondary TS making<br>
up an Out_of_MUX application are supplied to a decoder within a BD-RCM<br>
playback apparatus;<br>
FIG. 16 shows a data structure of PlayList information;<br>
FIG. 17 shows a close-up of an internal structure of Sutpath<br>
information;<br>
FIG. 18 shows relationship of SubClips in the local storage<br>
200, PlayList information in the local storage 200 and MainClip in<br>
the BD-RCM;<br>
FIG. 19A shows an internal structure of an STN_table;<br>
[0010]<br>
FIG. 19B shows a Stream_attribute corresponding to a video<br>
stream;<br>
FIG. 19C shows a Stream_attribute corresponding to an audio<br>
stream;<br>
FIG. 19D shows a Stream_entry of the audio stream;<br>
FIG. 20 shows TS packets read from a BD-RCM and from a local<br>
storage, and illustrates, of these TS packets, ones to be supplied to<br>
the decoder;<br>
FIGs. 21A-21D show shift of Window;<br>
FIG. 22 is a graph showing temporal transition regarding a<br>
data amount of TS packets read from the BD-RCM as well as a data<br>
amount of TS packets read from the local storage;<br>
FIGs. 23A and 23B show the comparison between the<br>
transmittable amount and the amount supplied to the decoder for each<br>
Window;<br>
6<br><br>
FIG. 24 shows a connection state of Playltems and SubPlayItems<br>
constituting the Out_of_MUX;<br>
FIG. 25 shows a relationship between In_Times and Out_Times of<br>
Playltems and In_Times and Out_Times of SubPlayltems in the case<br>
where connection_condition information of Playltem and<br>
sp_connection_condition infomraiton of SubPlayl tern shown in FIG. 24<br>
are set to "= 5";<br>
FIG. 26 shows an STC value to be referred to when part<br>
existing from ln_Time to Out_Time of Playltem is played back and an<br>
STC value to be referred to when part existing from In_Time to<br>
Out_Time of SubPlayltem is played back;<br>
FIG. 27 shows how TSls and TS2s are identified in a MainClip<br>
referred to in the previous Playltem and a SubClip referred to in the<br>
current Playltem;<br>
FIG. 28 shows details of CC = 5 and SP_CC = 5;<br>
FIG. 29 shows a relationship among multiple Video Presentation<br>
Units specified by a previous Playltem and the current Playltem,<br>
multiple Audio Presentation Units, and STC time axes;<br>
FIG. 30 shows an internal structure of the playback apparatus<br>
of the present invention;<br>
FIG. 31 is a flowchart showing a playback procedure based on<br>
PlayList information;<br>
FIG. 32 is a flowchart showing a processing procedure of a<br>
seamless connection of SubPlayltems;<br>
FIG. 33 shows an internal structure of an authoring system of<br>
Embodiment 2;<br>
FIG. 34 is a flowchart showing the verification procedure on<br>
Primary TSs and Secondary TSs;<br>
7<br><br>
FIG. 35 is a flowchart showing a procedure of verification on<br>
a Primary TS and a Secondary TS when there are multiple elementary<br>
streams of the same type;<br>
FIG. 36 shows a detailed explanation of CC = 6;<br>
FIG.  37  shows  a  correlation  between  PlayItems  and<br>
SubPlayItems ;<br>
FIG. 38 schematically shows the way multiple TS packets<br>
present on an ATC time axis are multiplexed;<br>
FIG. 39 schematically shows, in the case where a subtitle (PG)<br>
and a menu (IG) are also replaced in addition to audio, the way<br>
multiple TS packets constituting the Primary TS and multiple TS<br>
packets constituting the Secondary TS are multiplexed together;<br>
FIG. 40 shows the way a Primary TS and a Secondary TS<br>
constituting an audio mixing application are supplied to a decoder<br>
within the BD-ROM playback apparatus;<br>
FIG. 41 shows an internal structure of the playback appratus<br>
according to Embodiment 5;<br>
FIG. 42 shows a correlation between PlayItems and SubPlayIterns<br>
specified by a PlayList indicating audio mixing; and<br>
FIG. 43 shows an example of PlayList information making up<br>
both a theatrical version and a director's cut.<br>
Explanation of References<br>
[0011]<br>
la  ED-ROM drive<br>
lb, c  read buffer<br>
1b, a, c  ATC counter<br>
2a, d  source depacketizer<br>
2c, d  ATC counter<br>
8<br><br>
3a, c	STC counter<br>
3b, d	PID filter<br>
4	video decoder<br>
5	video plane<br>
6	transport buffer<br>
7	elementary buffer<br>
8	audio decoder<br>
10a, b, c, d	switch<br>
11	interactive graphics decoder<br>
12	interactive graphics plane<br>
13	presentation graphics decoder<br>
14	presentation graphics plane<br>
17	synthesis unit<br>
21	memory<br>
22	controller<br>
23	PSR set<br>
24	PID conversion unit<br>
25	network unit<br>
26	operation receiving unit<br>
100	ED-ROM<br>
200	local storage<br>
300	playback apparatus<br>
400	television<br>
500	AV amplifier<br>
Best Mode for Carrying Out the Invention<br>
[0012]<br>
EMBODIMENT	1<br>
9<br><br>
The following gives an account of a preferred embodiment of a<br>
recording medium according to the present invention. First, a usage<br>
application is described in relation to the implementation of the<br>
recording medium of the present invention. FIG. 1 shows a usage<br>
application of the recording medium according to the present<br>
invention. A local storage 200 in FIG. 1 is the recording medium of<br>
the present invention. The local storage 200 is used for the purpose<br>
of supplying a movie to a home theater system composed of a playback<br>
apparatus 300, a television 400, an AV amplifier 500 and speakers 600.<br>
[0013]<br>
The following explains a BD-ROM 100, the local storage 200 and<br>
the playback apparatus 300.<br>
The BD-ROM 100 is a recording medium on which a movie is<br>
recorded.<br>
The local storage 200 is a hard disk that is built in the<br>
playback apparatus, and is used for storing content distributed from<br>
a server of a movie distributor.<br>
[0014]<br>
The playback apparatus 300 is a digital home electrical<br>
appliance supported for networks, and has a function to play the BD-<br>
ROM 100. The playback apparatus 300 is also able to download content<br>
from a server 700 of a movie distributor via a network, store the<br>
downloaded content in the local storage 200, and combine this content<br>
with content recorded on the ED-ROM 100 to expand/update the content<br>
of the BD-ROM 100. A technology called "virtual package" combines<br>
content recorded on the BD-ROM 100 with content stored in the local<br>
storage 200 and treats data not recorded on the BD-ROM 100 in the way<br>
as if it is recorded on the BD-ROM 100.<br>
10<br><br>
[0015]<br>
Thus concludes the description of the usage application of the<br>
recording medium of the present invention.<br>
Next is described a production application of the recording<br>
medium of the present invention. The recording medium of the present<br>
invention can be realized as a result of improvements in the file<br>
system of a BD-RCM.<br><general description of bd-r0m><br>
FIG. 2 shows an internal structure of a ED-RCM. Level 4 in<br>
the figure shows the BD-ROM, and Level 3 shows a track on the BD-ROM.<br>
The figure depicts the track in a laterally drawn-out form, although<br>
the track is, in fact, formed in a spiral, winding from the inside<br>
toward the outside of the BD-RCM. The track is composed of a lead-in<br>
area, a volume area, and a lead-out area. The volume area in the<br>
figure has a layer model made up of a physical layer, a filesystem<br>
layer, and an application layer. Level 1 in the figure shows a<br>
format of the application layer of the BD-RCM by using a directory<br>
structure. In Level 1, BD-RCM has BDMV directory under Root<br>
directory.<br>
[0016]<br>
Furthermore, three subdirectories are located under the BDMV<br>
directory: PIAYLIST directory; CLIPINF directory; and STREAM<br>
directory.<br>
The PIAYLIST directory includes a file to which an extension<br>
of mpls is attached (00001.mpls).<br>
The CLIPINF directory includes files to each of which an<br>
extension of clpi is attached (00001.clip and 00002.clip).<br>
[0017]<br>
11<br><br>
The STREAM directory includes files to each of which an<br>
extension of m2ts is attached (00001.m2ts and 00002.m2ts) .<br>
Thus, it can be seen that multiple files of different types<br>
are arranged in the ED-RCM according to the directory structure above.<br><bd-rcm structure avclip><br>
First, files to which the extension "m2ts" is attached are<br>
explained. FIG. 3 shows a schematic structure of the file to which<br>
the extension "m2ts" is attached. The files to each of which the<br>
extension "m2ts" is attached (00001.m2ts and 00002.m2ts) store an<br>
AVClip. The AVClip is a digital stream in the MPBG2-Transport Stream<br>
format. The digital stream is generated by converting the digitized<br>
video and audio (upper Level 1) into an elementary stream composed of<br>
PES packets (upper Level 2), and converting the elementary stream<br>
into TS packets (upper Level 3), and similarly, converting the<br>
Presentation Graphics (PG) stream for the subtitles or the like and<br>
the Interactive Graphics (IG) stream for the interactive purposes<br>
(lower Level 1 and lower Level 2) into the TS packets (lower Level 3),<br>
and then finally multiplexing these TS packets.<br>
[0018]<br>
The following describes the video stream, audio stream, PG<br>
stream and IG stream.<br><video stream><br>
The video stream is a stream forming moving images of the<br>
movie, and is composed of picture data of SD images and HD images.<br>
The video stream is in VC-1 video stream, MPEG4-AVC or MPEG2-Video<br>
format. When the video stream is a video stream in MPEG4-AVC format,<br>
time stamps such as PTS and DTS are attached to 3DR, I, P and B<br>
pictures, and playback control is performed in units of pictures.  A<br>
12<br><br>
unit of a video stream, which is a unit for playback control with PTS<br>
and DTS attached thereto, is called the "Video Presentation Unit" .<br><audio stream><br>
The audio stream is a stream for an audio track of the movie,<br>
and the formats of the audio stream include LPCM audio stream format,<br>
DTS-HD audio stream format, DD/DD+ audio stream format, and DD/MLP<br>
audio stream format. Time stamps are attached to audio frames in the<br>
audio stream, and playback control is performed in units of audio<br>
frames. A unit of an audio stream, which is a unit for playback<br>
control with a time stamp attached thereto, is called the "Audio<br>
Presentation Unit".<br><pg stream><br>
The PG stream is a graphics stream constituting a subtitle<br>
written in a language. There are a plurality of streams that<br>
respectively correspond to a plurality of languages such as English,<br>
Japanese and French. The PG stream is composed of functional<br>
segments such as: PCS (Presentation Control Segment); PDS (Pallet<br>
Define Segment); WDS (Window Define Segment); ODS (Object Define<br>
Segment) ; and END (END of Display Set Segment) . The ODS (Object<br>
Define Segment) is a functional segment that defines a graphics<br>
object which is a subtitle.<br>
[0019]<br>
The WDS (Window Define Segment) is a functional segment that<br>
defines a bit amount of a graphics object on the screen. The PDS<br>
(Pallet Define Segment) is a functional segment that defines a color<br>
in drawing a graphics object. The PCS (Presentation Control Segment)<br>
is a functional segment that defines a page control in displaying a<br>
subtitle.  Such page control includes Cut-In/Out, Fade-In/Out, Color<br>
13<br><br>
Change, Scroll, and Wipe-In/Out.   It is possible with the page<br>
control by the PCS to achieve a display effect—for example, making<br>
the current subtitle fade out while displaying the next subtitle.<br>
[0020]<br><ig stream><br>
The IG stream is a graphics stream for achieving interactive<br>
control. The interactive control defined by an IG stream is an<br>
interactive control that is compatible with an interactive control on<br>
a DVD playback apparatus. The IG stream is composed of functional<br>
segments such as: ICS (Interactive Composition Segment); PDS<br>
(Palette Definition Segment); and ODS (Object Definition Segment).<br>
The ODS (Object Definition Segment) is a functional segment that<br>
defines a graphics object. Buttons on the interactive screen are<br>
drawn by a plurality of such graphics objects. The PDS (Palette<br>
Definition Segment) is a functional segment that defines a color in<br>
drawing a graphics object. The ICS (Interactive Composition Segment)<br>
is a functional segment that achieves a state change in which the<br>
button state changes in accordance with a user operation. The ICS<br>
includes a button command that is executed when a confirmation<br>
operation is performed on a button.<br>
[0021]<br>
Here, an AVClip is made up of at least one "STC_Sequence".<br>
The "STC_Sequence" is a section in which there is no discontinuity<br>
(system time-base discontinuity) in the STC (System Time Clock),<br>
which is a system base time of AV streams.  A discontinuity in the<br>
STC   is   a   point   at   which   discontinuity   information<br>
(discontinuity_indicator) of a PCR packet carrying a PCR (Program<br>
Clock Reference) referred to by the decoder to obtain the STC is ON.<br>
14<br><br>
[0022]<br>
FIG. 4 shows further details of how video and audio streams<br>
are stored in a PES packet sequence. Level 1 in the figure shows a<br>
video stream and Level 3 shows an audio stream. Level 2 shows a PES<br>
packet sequence. As shown by the arrows yyl, yy2, yy3 and yy4 in the<br>
figure, it can be seen that the IDR pictures, B pictures and P<br>
pictures, which are multiple Video Presentation Units in the video<br>
stream, are divided into multiple sections, and each of the divided<br>
sections is stored in one of the pay loads (V#l, V#2, V#3 and V#4 in<br>
the figure) of the PES packets. It can be also understood that each<br>
of the audio frames, which are Audio Presentation Units constituting<br>
the audio stream, is stored in one of the payloads (A#l and A#2 in<br>
the figure) of PES packets, as shown by the arrows aal and aa2.<br>
[0023]<br>
FIG. 5 shows how the video and audio are multiplexed into a<br>
program stream and a transport stream. The lower part of the figure<br>
shows multiple PES packets (V#l, V#2, V#3, V#4, A#l and A#2 in the<br>
figure) which have stored therein the video and audio streams. It<br>
can be seen from the figure that the video and audio streams are<br>
stored in different PES packets. The upper part shows a program<br>
stream and a transport stream in which the PES packets shown in the<br>
lower part are stored. When multiplexed into a program stream, each<br>
PES packet is fit into one pack. When multiplexed into a transport<br>
stream, a PES packet is divided into sections, each of which is then<br>
stored in one of payloads of multiple TS packets. Not the format of<br>
the program stream but the format of the transport stream is used for<br>
the storage format of the ED-ROM.  It is common that a video PES<br>
15<br><br>
packet used for a transport stream stores therein one frame or two<br>
paired fields although FIG. 5 does not illustrate such a case.<br>
[0024]<br>
FIG. 6 shows details of a transport stream. Level 1 of the<br>
figure shows a sequence of multiple TS packets forming an MPBG2<br>
transport stream and Level 2 shows the internal structure of a TS<br>
packet. As shown in Level 2, one TS packet is composed of a "header",<br>
an "adaptation field" and a "payload". The lead line thl shows up-<br>
close details of the structure of the header of a TS packet. As<br>
shown by the lead line, the header of a TS packet includes: a "unit<br>
start indicator (payload_unit_start_indicator)" indicating the start<br>
of the PES packet is stored; a "PID (Packet Identifier)" indicating a<br>
type of an elementary stream which is multiplexed into the transport<br>
stream; and an "adaptation field control" indicating whether an<br>
adaptation field is present in the TS packet.<br>
[0025]<br>
The lead line th2 shows up-close details of the internal<br>
structure of an adaptation field. An adaptation field is given to a<br>
TS packet in the case when the adaptation field control of the header<br>
of the TS packet is set to "1". Specifically speaking, the<br>
adaptation field stores:   therein a "random access indicator<br>
(random_access_indicator)" indicating that the TS packet is the<br>
beginning of a video or audio frame and an entry point; and a "PCR<br>
(Program Clock Reference)" that gives an STC (System Time Clock) of<br>
the T-STD (Transport System Target Decoder).<br>
[0026]<br>
16<br><br>
FIG. 7 shows the internal structures of a PAT packet and a PMT<br>
packet. These packets describe the program structure of a transport<br>
stream.<br>
The lead line hml of the figure shows up-close details of the<br>
structure of a TS packet with PID = 0 in the transport stream. Such<br>
a TS packet is called the PAT (Program Association Table) packet, and<br>
indicates a program structure of the entire transport stream. The<br>
PID of a PAT packet is always "0" . In a PAT packet, a PAS (Program<br>
Association Section) is stored. The lead line hm2 shows up-close<br>
details of the internal structure of a PAS.  As shown by the lead<br>
line, a PAS shows the correspondence between program_number (program<br>
number) and a program map table (a PID of the PMT) . The lead line<br>
hm3 shows up-close details of the structure of a TS packet with PID =<br>
0x100 present in the transport stream. Such a TS packet is called<br>
the PMT packet. As shown by the lead line hm4, a PMS of the PMT<br>
packet includes: "stream_type" indicating a type of the stream<br>
included in a program corresponding to the PMS; and "elementaryJPID"<br>
which is a PID of the stream. According to the example of the figure,<br>
the program with the program number #1 has a PMT with PID = 0x100,<br>
and a MPBG2 video with PID = 0x200 and an ADTS audio with PID = 0x201<br>
make up the program with the program number #1. A program in the<br>
transport stream as well as a PID of a stream constituting the<br>
transport stream and a type of the stream can be found by obtaining<br>
the PID of the PMT from the PAT whose PID is always 0, then obtaining<br>
the PMT packet according to the PID of the PMT, and referring to the<br>
PMS.<br>
[0027]<br>
Next, how an AVClip having the above-described structure is<br>
17<br><br>
written to the BD-RCM is explained. FIG. 8 shows what processes TS<br>
packets constituting an AVClip are subjected to before they are<br>
written to the BD-RCM. Level 1 of the figure shows the TS packets<br>
constituting the AVClip.<br>
As shown in Level 2 of FIG. 8, a 4-byte TS_extra_header<br>
(hatched portions in the figure) is attached to each 188-byte TS<br>
packet constituting the AVClip to generate each 192-byte Source<br>
Packet. The TS_extra_header includes Arrival_Time_Stamp that is<br>
information indicating the time at which the TS packet is input to<br>
the decoder. The reason for attaching an ATS header to each TS<br>
packet to form a stream is to assign, to each TS packet, a time at<br>
which the TS packet is input to the decoder (STD) . In the digital<br>
broadcasting, a transport stream is treated as a stream having a<br>
fixed bit rate. Therefore, dummy TS packets, called NULL packets,<br>
are also mulplexed together to form a transport stream so that the<br>
transport stream is broadcast at a fixed bit rate. However, in the<br>
case where streams are recorded on an optical disk or another<br>
recording medium having a limited recording capacity, such a fixed-<br>
bit-rate recording method is a disadvantage because it consumes the<br>
capacity wastefully. Therefore, NOLL packets are not recorded on BD-<br>
RCMs. In order to comply with a variable-bit-rate recording method,<br>
an ATS is attached to each TS packet, and then the transport stream<br>
is recorded on a BD-RCM. The use of the ATS allows for restoring the<br>
decoder input time for each TS packet, and thus can comply with a<br>
variable-bit-rate recording method. Hereinafter, a pair of an ATS<br>
header and a TS packet is called a Source Packet.<br>
[0028]<br>
The  AVClip  shown  in Level  3  includes  one  or  more<br>
18<br><br>
"ATC_Sequences," each of which is a sequence of Source Packets. The<br>
"ATC_Sequence" is a sequence of Source Packets, where<br>
Arrival_Time_Clocks referred to by the Arrival_Time_Stamps included in<br>
the ATC_Sequence do not include "arrival time-base discontinuity".<br>
In other words, the "ATC_Sequence" is a sequence of Source Packets,<br>
where Arrival_Time_Clocks referred to by the Arrival_Time_Stamps<br>
included in the ATC_Sequence are continuous.<br>
[0029]<br>
Such ATC_Sequences constitute the AVClip, and are recorded on<br>
the BD-RCM with a file name "xxxxx.m2ts".<br>
The AVClip is, as is the case with the normal computer files,<br>
divided into one or more file extents, which are then recorded in<br>
areas on the BD-RCM. Level 4 shows how the AVClip is recorded on the<br>
BD-RCM.  In Level 4, each file extent constituting the file has a<br>
data length that is equal to or larger than a predetermined length<br>
called Sextent.<br>
[0030]<br>
Sextent is the minimum data length of each file extent, where<br>
an AVClip is divided into a plurality of file extents to be recorded.<br>
The time required for the optical pickup to jump to a location<br>
on the BD-RCM is obtained by the following equation:<br>
Tjump = Taccess + Toverhead.<br>
The "Taccess" is a time required that corresponds to a jump<br>
distance (a distance to a jump-destination physical address) .<br>
The TS packets read out from the BD-RCM are stored in a buffer<br>
called read buffer, and then output to the decoder. The "Toverhead"<br>
is obtained by the following equation when the input to the read<br>
19<br><br>
buffer is performed with a bit rate called "Rud" and the number of<br>
sectors in the ECC block is represented by Secc:<br>
Toverhead 
TS packets read out from the BD-ROM are stored in the read<br>
buffer in the state of Source Packets, and then supplied to the<br>
decoder at a transfer rate called "TS_Recording_rate".<br>
[0031]<br>
To keep the transfer rate of the TS_Recording_rate while the TS<br>
packets are supplied to the decoder, it is necessary that, during<br>
Tjump, the TS packets are continuously output from the read buffer to<br>
the decoder. Here, Source Packets, not TS packets, are output from<br>
the read buffer. As a result, when the ratio of the TS packet to the<br>
Source Packet in size is 192/188, it is necessary that during Tjump,<br>
the Source Packets are continuously output from the read buffer at a<br>
transfer rate of "192/188 x TS_Recording_rate".<br>
Accordingly, the amount of occupied buffer capacity of the<br>
read buffer that does not cause an underflow is represented by the<br>
following equation:<br>
Boccupied &gt; (Tjump/1000x8) x ((192/188) x TS_Recording_rate) .<br>
The input rate to the read buffer is represented by Rud, and<br>
the  output  rate  from  the  read  buffer  is  represented  by<br>
TS_Recording_rate x (192/188) .  Therefore, the occupation rate of the<br>
read buffer is obtained by performing "(input rate) - (output rate)",<br>
and thus obtained by "(Rud - TS_Recording_rate) x (192/188)".<br>
[0032]<br>
The time "Tx" required to occupy the read buffer by<br>
"Boccupied" is obtained by the following equation:<br>
Tx = Boccupied / (Rud - TS_Recording_rate x (192/188)) .<br>
20<br><br>
When reading from the BD-ROM, it is necessary to continue to<br>
input TS packets with the bit rate Rud for the time period "Tx". As<br>
a result, the minimum data length Sextent per extent when the AVClip<br>
is divided into a plurality of file extents to be recorded is<br>
obtained by the following equations:<br>
Sextent = RudxTx<br>
= RudxBoccupied/ (Rud-TS_Recording_ratex (192/188))<br>
≥Rudx (Tjump/1000x8) x (192/188) xTS_Recording_rate)<br>
/ (Rud—TS_Recording_ratex (192/188))<br>
≥ (RudxTjump/1000x8) xTS_Recording_ratexl92<br>
/(Rudxl88—TS_Recording_ratexi92) .<br>
Hence,<br>
Sextent≥ (TjumpxRud/1000x8) x (TS_Recording_ratexl92/ (Rudxl88-<br>
TS_Recording_ratexl92)).<br>
If each file extent constituting the AVClip has the data<br>
length equal to or larger than Sextent that is calculated as a value<br>
that does not cause an underflow of the decoder, even if the file<br>
extents constituting the AVClip are located discretely on the ED-RCM,<br>
TS packets are continuously supplied to the decoder so that the data<br>
is read out continuously during the playback.<br>
[0033]<br>
The minimum constituent unit of the above-mentioned file<br>
extent is an Aligned Unit (the data size is 6 Kbytes) that is<br>
composed of a group of 32 Source Packets. Accordingly, the size of a<br>
stream file (XXXX.AVClip) on a ED is always a multiple of 6 Kbytes.<br>
FIG. 9 shows the internal structure of an "Aligned Unit". The<br>
Aligned Unit is composed of 32 Source Packets and is then written<br>
into a set of three consecutive sectors.  The group of 32 Source<br>
21<br><br>
Packets is 6144 bytes (= 32x192), which is equivalent to the size of<br>
three sectors (= 2048x3) . As to sectors on the BD-ROM, an error<br>
correction code is attached for every 32 Source Packets to thereby<br>
form an ECC block. As long as accessing the ED-ROM in units of<br>
Aligned Units, the playback apparatus can obtain 32 complete Source<br>
Packets. Thus concludes the description of the process of writing an<br>
AVClip to the BD-RCM. An AVClip that is recorded on the BD-RCM and<br>
with which high-resolution video streams are multiplexed together is<br>
hereinafter referred to as the "MainClip". On the other hand, an<br>
AVClip that is stored in the local storage and played back with a<br>
MainClip is called the "SubClip".<br>
[0034]<br>
A partial transport stream is obtained by demultiplexing a<br>
MainClip recorded on the BD-RCM. A partial transport stream<br>
corresponds to each elementary stream. A partial transport stream<br>
obtained by demultiplexing a MainClip and corresponding to each<br>
elementary stream is called the "Primary TS".<br><bd-r0m structure clip information></bd-r0m>
Next are described files to which an extension "dpi" is<br>
attached. Files (00001.clpi and 00002.clpi) to which an extension<br>
"clpi" is attached store Clip information. The Clip information is<br>
management information on each AVClip. FIG. 10 shows the internal<br>
structure of Clip information. As shown on the left-hand side of the<br>
figure, the Clip information includes:<br>
i) "ClipInfo()" storing therein information regarding the<br>
AVClip;<br>
ii) "Sequence Info()" storing therein information regarding<br>
the ATC Sequence and the STC Sequence;<br>
22<br><br>
iii) "Program Info()" storing therein information regarding<br>
the Program Sequence; and<br>
iv) "Characteristic Point Info (CPI())".<br>
[0035]<br>
The "Cliplnfo" includes "application_type" indicating the<br>
application type of the AVClip referred to by the Clip information.<br>
Referring to the Cliplnfo allows identification of whether the<br>
application type is the MainClip or SubClip, whether video is<br>
contained, or whether still pictures (slide show) are contained. In<br>
addition, the above-mentioned TS_recording_rate is described in the<br>
Cliplnfo.<br>
The Sequence Info is information regarding one or more STC-<br>
Sequences and ATC-Sequences contained in the AVClip. The reason that<br>
these information are provided is to preliminarily notify the<br>
playback apparatus of the system time-base discontinuity and the<br>
arrival time-base discontinuity. That is to say, if such<br>
discontinuity is present, there is a possibility that a PTS and an<br>
ATS that have the same value appear in the AVClip. This might be a<br>
cause of defective playback. The Sequence Info is provided to<br>
indicate from where to where in the transport stream the STCs or the<br>
ATCs are sequential.<br>
[0036]<br>
The Program Info is information that indicates a section<br>
(called "Program Sequence") of the program where the contents are<br>
constant. Here,, "Program" is a group of elementary streams that have<br>
in common a time axis for synchronous playback. The reason that the<br>
Program Info is provided is to preliminarily notify the playback<br>
apparatus of a point at which the Program contents change.  It should<br>
23<br><br>
be noted here that the point at which the Program contents change is,<br>
for example, a point at which the PID of the video stream changes, or<br>
a point at which the type of the video stream changes from SDTV to<br>
HDTV.<br>
Next is described the Characteristic Point Info. The lead<br>
line cu2 in FIG. 9 indicates a close-up of the structure of CPI. As<br>
indicated by the lead line cu2, the CPI is composed of Ne pieces of<br>
EP_map_for_one_stream_PIDs (EP_map_for_one_stream_PID [0] to<br>
EP_map_for_one_stream_PID[Ne-l]) . These EP_map_for_one_stream_PIDs<br>
are EP_maps of the elementary streams that belong to the AVClip. The<br>
EP_map is information that indicates, in association with an entry<br>
time (PTS_EP_start), a packet number (SPN_EP_start) at an entry<br>
position where the Access Unit is present in one elementary stream.<br>
The lead line cu3 in the figure indicates a close-up of the internal<br>
structure of EP_map_for_one_stream_PID.<br>
[0037]<br>
It   is  understood  from  the   close-up  that   the<br>
EP_map_for_one_stream_PID is composed of Ne pieces of EP_Highs<br>
(EP_High(0) to EP_High(Nc-l)) and Nf pieces of EP_Lows (EP_Low(0) to<br>
EP_Low(Nf-l)) .  Here, the EP_High plays a role of indicating upper<br>
bits of the SPN_EP_start and the PTS_EP_start of the Access Unit (Non-<br>
TDR I-Picture,  IDR-Picture), and the EP_Low plays a role of<br>
indicating lower bits of the SPN_EP_start and the PTS_EP_start of the<br>
Access Unit (Non-IDR I-Picture and IDR-Picture).<br>
[0038]<br>
The lead line cu4 in the figure indicates a close-up of the<br>
internal structure of EP_High. As indicated by the lead line cu4,<br>
the EP_High(i) is composed of:   "ref_to_EP_Low_id [i]" that is a<br>
24<br><br>
reference value to EP_Low; "PTS_EP_High[i]" that indicates upper bits<br>
of the PTS of the Access Unit (Non-IDR I-Picture, IDR-Picture) ; and<br>
"SPN_EP_High[i]" that indicates upper bits of the SPN of the Access<br>
Unit (Non-IDR I-Picture, IDR-Picture) . Here, "i" is an identifier of<br>
a given EP_High.<br>
[0039]<br>
The lead line cu5 in the figure indicates a close-up of the<br>
structure of EP_Low. As indicated by the lead line cu5, the<br>
EP_Low(i) is composed of: "is_angle_change_point (EP_Low_id)" that<br>
indicates whether the corresponding Access Unit is an IDR picture;<br>
"I_end_position_offset (EP_Low_id)" that indicates the size of the<br>
corresponding Access Unit; "PTS_EP_Low(EP_Low_id)" that indicates<br>
lower bits of the PTS of the Access Unit (Non-IDR I-Picture, IDR-<br>
Picture) ; and "SPN_EP_Low(EP_Low_id)" that indicates lower bits of<br>
the SPN of the Access Unit (Non-IDR I-Picture, IDR-Picture) . Here,<br>
"EP_Low_id" is an identifier for identifying a given EP_Low.<br>
[0040]<br><clip information explanation ep_map><br>
Here, the EP_map is explained using a specific example. FIG.<br>
11 shows EP_map settings for a video stream of a movie. Level 1<br>
shows a plurality of pictures (IDR picture, I-Picture, B-Picture, and<br>
P-Picture defined in MPEG4-AVC) arranged in the order of display.<br>
Level 2 shows the time axis for the pictures. Level 4 indicates a TS<br>
packet sequence on the BD-RCM, and Level 3 indicates settings of the<br>
EP_map.<br>
[0041]<br>
Assume here that, in the time axis of Level 2, an IDR picture<br>
or an I picture is present at each time point tl to t7. The interval<br>
25<br><br>
between adjacent ones of the time points tl to t7 is approximately-<br>
one second. The EP_map used for the movie is set to indicate tl to<br>
t7 with the entry times (PTS_EP_start), and indicate entry positions<br>
(SPN_EP_start) in association with the entry times.<br><playlist information><br>
Next  is described the  PlayList  information.    A file<br>
(00001.mpls) to which extension "mpls" is attached is a file storing<br>
therein the PlayList (PL) information.<br>
[0042]<br>
FIG. 12 shows the data structure of the PlayList information.<br>
As indicated by the lead line mpl in the figure, the PlayList<br>
information includes: MainPath information (MainPath ()) that defines<br>
MainPath; PlayListMark information (PlayListMarkO) that defines<br>
chapter; and other extension data (Extension Data) .<br><playlist information explanation mainpath><br>
First is described the MainPath.  The MainPath is a playback<br>
path that is defined in terms of a video stream, such as the main<br>
video, and an audio stream.<br>
[0043]<br>
As indicated by the arrow mpl, the MainPath is defined by a<br>
plurality of pieces of Playltem information: Playltem information #1<br>
to Playltem information #m. Playltem information defines one or more<br>
logical playback sections that constitute the MainPath. The lead<br>
line hsl in the figure indicates a close-up of the structure of<br>
Playltem information.  As indicated by the lead line hsl, Playltem<br>
information is composed of: "Clip_Information_file_name" that<br>
indicates the file name of the playback section information of the<br>
AVClip to which the IN point and the OUT point of the playback<br>
26<br><br>
section belong; "Clip_codec_identifier" that indicates the AVClip<br>
encoding method; "is_multi_angle" that indicates whether or not<br>
Playltem is multi angle; "connection_condition" that indicates<br>
whether or not to seamlessly connect the current Playltem and the<br>
preceding Playltem; "ref_to_STC_id [0]" that indicates uniquely the<br>
STC_Sequence targeted by Playltem; "In_time" that is time information<br>
indicating the start point of the playback section; "Out_time" that<br>
is time information indicating the end point of the playback section;<br>
"UO_mask_table" that indicates which user operation should be masked<br>
by Playltem; "Playltem_random_access_flag" that indicates whether to<br>
permit a random access to a mid-point in Playltem; "Stilljnode" that<br>
indicates whether to continue a still display of the last picture<br>
after the playback of Playltem ends; and "STN_table". Among these,<br>
the time information "In_time" indicating the start point of the<br>
playback section and the time information "Out_time" indicating the<br>
end point of the playback section constitute a playback path.  The<br>
playback path information is composed of "In_time" and "Out_time" .<br>
[0044]<br>
FIG. 13 shows the relationships between the AVClip and the<br>
PlayList information. Level 1 shows the time axis of the PlayList<br>
information (PlayList time axis) . Levels 2 to 5 show the video<br>
stream that is referenced by the EP_map.<br>
The PlayList information includes two pieces of Playltem<br>
information: Playltem information #1; and Playltem information #2.<br>
Two playback sections are defined by "In_time" and "Out_time"<br>
included in Playltem information #1 and Playltem information #2,<br>
respectively. When these playback sections are arranged, a time axis<br>
that is different from the AVClip time axis is defined.  This is the<br>
27<br><br>
PlayList time axis shown in Level 1. Thus, it is possible to define<br>
a playback path that is different from the AVClip by defining<br>
Playltem information.<br>
[0045]<br>
Thus concludes the description of the ED-ROM 100.<br><local storage><br>
The following describes the local storage 200 that is a<br>
recording medium of the present invention. FIG. 14 shows an internal<br>
structure of the local storage 200. As shown in the figure, the<br>
recording medium of the present invention can be produced by<br>
improving the application layer.<br>
[0046]<br>
Level 4 of the figure shows the local storage 200 and Level 3<br>
shows a track on the local storage 200. The figure depicts the track<br>
in a laterally drawn-out form, although the track is, in fact, formed<br>
in a spiral, winding from the inside toward the outside of the local<br>
storage 200. The track is composed of a lead-in area, a volume area,<br>
and a lead-out area. The volume area in the figure has a layer model<br>
made up of a physical layer, a filesystem layer, and an application<br>
layer. Level 1 in the figure shows a format of the application layer<br>
of the local storage 200 by using a directory structure.<br>
[0047]<br>
In the directory structure shown in FIG. 13, there is a<br>
subdirectory "organizational" under a root directory. Also, there is<br>
a subdirectory "disk#l" under the directory "organizational". The<br>
directory "organization#l" is assigned to a specific provider of a<br>
movie. The directory "disk#l" is assigned to each ED-ROM provided<br>
from the provider.<br>
28<br><br>
[0048]<br>
With this construction in Which the directory assigned to a<br>
specific provider includes directories that corresponds to BD-ROMs,<br>
download data for each ED-ROM is stored separately. Similarly to the<br>
information stored in the BD-ROM, under the subdirectory "disk#l",<br>
the  following  information  is  stored:    PlayList  information<br>
("00002.mpls"); Clip information ("00003.dpi" and "00004.clpi"); and<br>
AVClips ("00003.m2ts" and "00004. m2ts".<br>
The following describes components of the local storage 200:<br>
the PlayList information, Clip information and AVClips.<br>
[0049]<br><local storage structure avclip><br>
The AVClips (00003 .m2ts and 00004.m2ts) in the local storage<br>
200 make up SubClips. A partial transport stream is obtained by<br>
demultiplexing a SubClip. A partial transport stream obtained by<br>
demultiplexing a SubClip is called the "Secondary TS". Such a<br>
Secondary TS is a constituent of the Out_of_MUX application. The<br>
following describes the Out_of_MQK application.<br>
(Out_of_MUX Application)<br>
The Out_of_MUX application is an application that, for example,<br>
selects two TSs—a Primary TS in the ED-ROM and a Secondary TS, which<br>
is obtained via a network or the like and recorded in the local<br>
storage—and plays them back simultaneously, whereby allowing various<br>
combinations of elementary streams between these two TSs.<br>
[0050]<br>
FIG. 15 shows the way a Primary TS and a Secondary TS making<br>
up the Out_of_MUX application are supplied to the decoder within the<br>
BD-ROM playback apparatus.   In the figure, among the internal<br>
29<br><br>
structural components of the BD-ROM playback apparatus, a BD-RCM<br>
drive, a local storage and a network are shown on the left side while<br>
the decoder is shown on the right side.  A PID Filter that performs<br>
stream demultiplexing is shown in the center.  Primary TS (Video 1,<br>
Audio 1 (English) , Audio 2 (Spanish), PG 1 (English Subtitle) , IG<br>
1 (English Menu)) and the Secondary TS (Audio 2 (Japanese), Audio 3<br>
(Korean), PG 2 (Japanese Subtitle), PG 3 (Korean Subtitle), IG 2<br>
(Japanese Menu), IG 3 (Korean Menu)) in the figure are transport<br>
streams supplied from the BD-RCM and the local strage, respectively.<br>
Since only English (Audio 1) and Spanish (Audio 2) are recorded on<br>
the disk, a Japanese-dubbed version, for example, cannot be selected<br>
on the disk.  However, by downloading, to the local storage, the<br>
Secondary TS which includes the Japanese-dubbed version (Audio 2)<br>
provided by the content provider, the Japanese-dubbed audio (Audio 2),<br>
Japanese subtitle (PG 2), and Japanese menu screen (IG 2) can be sent<br>
to the decoder.  Herewith, the user is able to select any of the<br>
Japanese-dubbed audio (Audio 2), Japanese subtitle (PG 2), and<br>
Japanese menu screen (IG 2), and play it back with the video (Video<br>
1).<br>
[0051]<br>
The Out_of_MUX application allows the user to freely make a<br>
selection on an audio and a subtitle under the condition that the<br>
selection can be made for up to one for each type of the elementary<br>
streams that are stored in the two TSs to be played back<br>
simultaneously (in other words, up to one video, one audio, one<br>
subtitle and one menu stored in the primary and Secondary TSs) .<br>
Any BD-RCM playback apparatus is able to decode a Primary TS,<br>
however, cannot decode two TSs simultaneously.  Accordingly, the<br>
30<br><br>
introduction of the Out_of_MUX application without restriction would<br>
cause an increase in the size of the hardware and/or a large addition<br>
of software, which results in an increase in the cost of BD-ROM<br>
playback apparatuses. Therefore, when it comes to the realization of<br>
the Out_of_MUX application, whether the Out_of_MUX application can be<br>
realized on recources capable of decoding only a Primary TS is a key<br>
issue.<br>
[0052]<br>
The limitation of allowing for playback of up to one for each<br>
type of the elementary streams can be assumed as "replacing" the<br>
elementary streams of Primary TS with those of the Secondary TS.<br>
Herewith, the Out_of_MUX application can be realized on resources<br>
capable of decoding only a single TS, avoiding an increase in costs<br>
of the decoders. According to the example of the figure, the audio<br>
stream, subtitle stream (PG), and menu stream (IG) of the Primary TS<br>
are replaced with those of the Secondary TS.<br>
[0053]<br>
The Secondary TS may be input not only from a built-in HDD,<br>
such as the above-mentioned local storage, but also from a flush<br>
memory, a primary storage memory, and an HDD via a network, or by<br>
streaming via a direct netwark. For ease of explanation, assume that<br>
the Secondary TS is supplied from a built-in HDD like one shown in<br>
FIG. 1.<br><local storage structure clip information></local>
Clip information (00003.clpi, 00004.clpi) in the local strage,<br>
has the same data structure as Clip information recorded in the ED-<br>
ROM. Here, TS_Recording_Rate of Clip information in the local<br>
storage is set to be the same as the bit rate for reading the AVClip<br>
31<br><br>
from the ED-ROM. That is, TS_Recording_Rate written in Clip<br>
information of a SubClip is the same as TS_Recording _Rate written in<br>
Clip information of a MainClip. If TS_Recording_Rate of a MainClip<br>
is differenrt from TS_Recording_Rate of a SubClip, the data rate for<br>
transmission from each source depacketizer to the buffer changes<br>
according to which TS is transmitted. This fails to establish the<br>
assumption that the Out_of_MOX application can be regarded as one<br>
input TS.<br>
[0054]<br>
In addition, since the elementary streams to be played back<br>
are freely selected from two TSs, all the source depacketizer and the<br>
buffer in the decoder are set for a Primary TS bit rate when an audio<br>
of the Primary TS is selected, and all the source depacketizer and<br>
the buffer in the decoder are set for a Secondary TS bit rate when an<br>
audio of the Secondary TS is selected.  This makes processes and<br>
verification of the playback apparatus cumbersome and complicated.<br><local storage structure playlist information></local>
Next is described PlayList information in the local storage<br>
200.  A file (00002.mpls) to which extension "mpls" is attached is<br>
information that defines a group made by binding up two types of<br>
playback paths called MainPath and Subpath as Playlist (PL) . FIG. 16<br>
shows the data structure of the PlayList information.  As shown in<br>
the figure, the PlayList information includes:  MainPath information<br>
(MainPath ())  that  defines  MainPath;  PlayListMark  information<br>
(PlayListMark()) that defines a chapter; and Subpath information<br>
(SubpathO) that defines Subpath.  The internal structures of the<br>
PlayList information and Playltem information are the same as those<br>
in the ED-ROM, and therefore their descriptions are omitted here.<br>
32<br><br>
The following describes the Subpath information.<br><playlist information explanation subpath><br>
Whereas the MainPath is a playback path defined for the<br>
MainClip which is a main video, the Subpath is a playback path<br>
defined for the SubClip which synchronizes with the MainPath.<br>
[0055]<br>
FIG. 17 shows a close-up of the internal structure of the<br>
Subpath information.  As indicated by the arrow hc0 in the figure,<br>
each Subpath includes "SubPath_type" indicating a type of the SubClip<br>
and one or more pieces of SubPlayltem information (..J3ubPlayItem()...) .<br>
The lead line hcl in the figure indicates a close-up of the<br>
structure of SubPathltem information. As indicated by the arrow hcl<br>
in the figure, SubPlayltem informationn includes:<br>
"Clip_information_file_name" ;	"Clip_codec_identif ier" ;<br>
"SP_connection_condition" ;  "ref_to_STC_id[0] " ; "SubPlayItem_In_time" ;<br>
"SubPlayItem_Out_time";	'sync_PlayItem_id";	and<br>
"sync_start_PTS_of_PlayItem".<br>
[0056]<br>
The "Clip_information_file_name" is information that uniquely<br>
specifies a SubClip corresponding to SubPlayltem by describing a file<br>
name of the Clip information.<br>
The "Clip_codec_identifier" indicates an encoding system of the<br>
AVClip.<br>
The "SP_connection_condition" indicates a state of connection<br>
between       SubPlayltem (current       SubPlayltem)       and<br>
SubPlayltem (previousSubPlayltem)       immediately      preceding<br>
SubPlayltem(current SubPlayltem).<br>
[0057]<br>
33<br><br>
The "ref_to_STC_id[0]" uniquely indicates an STC_Sequence at<br>
which Playltem aims.<br>
The "SubPlayItem_In_time" is information indicating a start<br>
point of SubPlayltem on the playback time axis of the SubClip.<br>
The "SubPlayItem_Out_time" is information indicating an end<br>
point of SubPlayltem on the Playback time axis of the SubClip.<br>
[0058]<br>
The "sync_PlayItem_id" is information uniquely specifying, from<br>
among Playl terns making up the MainPath, Playltem with which<br>
SubPlayltem synchronizes. The "SubPlayItem_In_time" is present on the<br>
playback time axis of Playltem specified with the sync_PlayItem_id.<br>
The  " sync_start_PTS_of_PlayItem "   indicates, with a time<br>
accuracy of 45KHz, where the start point of SubPlayltem specified by<br>
SubPlayItem_In_time is present on the playback time axis of Playltem<br>
specified with the sync_PlayItem_id.<br>
[0059]<br><details of subpath information relationship three></details>
Objects&gt;<br>
Here, the three objects mean SubClips in the local storage 200,<br>
PlayList information in the local storage 200 and the MainClip in the<br>
BD-ROM.<br>
FIG. 18 shows relationship of SubClips in the local storage<br>
200, PlayList information in the local storage 200 and the MainClip<br>
on the BD-RCM. Level 1 of the figure indicates SubClips present in<br>
the local storage 200. As shown in Level 1, there are different<br>
types of Secondary TS in SubClips of the local storage 200: an audio<br>
stream, a PG stream and an IG stream. Any one of them is used as a<br>
SubPath for the synchronous playback.<br>
34<br><br>
[0060]<br>
Level 2 indicates two time axes defined by PlayList<br>
information. The lower time axis in Level 2 is a PlayList time axis<br>
defined by Playltem information and the upper time axis is<br>
SubPlayltem time axis defined by SubPlayltem.<br>
As  shown  in  the  figure,  it  can  be  seen  that<br>
SubPlayItem_Clip_information_file_name of  SubPlayltem  information<br>
plays a role of selecting, from among .m2ts files storing SubClips,<br>
a .m2ts file as a target for the playback section.<br>
[0061]<br>
SubPlayltem. Out_time play roles in defining the start point<br>
and end point of the playback section.<br>
The arrow Sync_PlayItem_Id plays a role in specifying which<br>
Playltem   is   synchronized   with   SubPlayltem.        The<br>
sync_start_PTS_of_PlayItem plays a role in determining a time point<br>
of SubPlayItem_In_time on the PlayList time axis.<br>
[0062]<br>
Thus concludes the description of the SubPath information.<br><stn_table><br>
A feature of the PlayList information in the local storage 200<br>
is an STN_Table. The following describes PlayList information in the<br>
local storage 200.<br>
The STN_table is a table showing at least one combination of<br>
elementary streams that are allowed to be played back simultaneously.<br>
The combination of elementary streams have been selected from<br>
multiple elementary streams multiplexed into a MainClip specified by<br>
Clip_Information_file_name of Playltem information as well as multiple<br>
elementary  streams  multiplexed  into  a  SubClip  specified by<br>
35<br><br>
Clip_Inforrration_file_name of SubPlayltem information.  Such multiple<br>
elementary streams allowed to be played back simultaneously in the<br>
STN_table in the PlayList information form the so-called "system<br>
stream".<br>
[0063]<br>
Specifically speaking, the STN_table is formed by associating<br>
a Stream_entry of each of the multiple elementary streams multiplexed<br>
into the MainClip and those multiplexed into the SubClip with a<br>
Stream_attribute.<br>
FIG. 19A shows an internal structure of the STN_table. As<br>
shown in the figure, the STN_table includes multiple pairs of an<br>
entry and an attribute (entry-attribute), and has a data structure<br>
showing the count of these entry-attribute pairs<br>
(number_of_video_stream_entries, number_of_audio_stream_entries,<br>
number_of_PG_stream_entries, number_of_IG_stream_entries) .<br>
[0064]<br>
The entry-attribute pairs respectively correspond to each of<br>
the video streams, audio streams, PG streams and IG streams that can<br>
be played back in Playltem, as shown by the symbol of "{" in the<br>
figure.<br>
The following describes the details of the entry-attribute.<br>
[0065]<br>
FIG. 19B shows a Stream_attribute corresponding to a video<br>
stream.<br>
The Stream_attribute of the video stream includes<br>
"Video_format" indicating a display format of the video stream and<br>
"frame_rate" indicating a frequency for displaying the video stream.<br>
36<br><br>
FIG. 19C shows a Stream_attribute corresponding to an audio<br>
stream.<br>
The Stream_attribute of the audio stream is composed of:<br>
"stream_coding_type" indicating an encoding method of the audio<br>
stream; "audio_presentation_type" indicating a channel structure of<br>
the corresponding audio stream; "Sampling_frequency" indicating a<br>
sampling frequency of the correspondingn audio stream; and<br>
"audio_language code" indicating a language attribute of the audio<br>
stream.<br>
[0066]<br>
FIG. 19D shows a Stream_entry of the audio stream. As shown<br>
in the figure, the Stream_entry of the video stream includes<br>
"ref_to_Stream_PID_of_Main_Clip" indicating a PID used for<br>
demultiplexing the video stream.<br>
Stream_attribute of an audio stream, an IG stream and a PG<br>
stream multiplexed into a MainClip has a format shown in FIG. 19D.<br>
[0067]<br><restriction on data amount of elementary streams allowed to></restriction>
Be Played Back&gt;<br>
The STN_table shows, among elementary streams read from the<br>
ED-ROM and the local storage, ones allowed to be played back.<br>
However, if such a STN_table allows elementary streams to be played<br>
back with no restriction, the decoder system may be broken down.<br>
[0068]<br>
The reason for this is as follows. According to the MPEG2<br>
decoder system standard, an overlap between TS packets on the ATC<br>
time axis in one transport stream is not allowed. This is a basic<br>
principle in order to cause the decoder system to perform a proper<br>
37<br><br>
decoding process. On the other hand, in the case where both playback<br>
of a stream read from the BD-ROM and playback of a stream read from<br>
the local storage are allowed, and then playback of an AVClip read<br>
from the ED-ROM and playback of an AVClip read from the local storage<br>
are performed simultaneously, an overlap is created between a TS<br>
packet from the BD-ROM and a TS packet from the local storage.<br>
[0069]<br>
Given this factor, the following restriction is imposed on<br>
decoding elementary streams.<br>
The decoding elementary streams are a video stream, an audio<br>
stream, a PG stream and an IG stream that have been allowed in the<br>
STN_table to be played back and have been selected for simultaneous<br>
playback. Some decoding elementary streams are read from the local<br>
storage and others are read from the BD-ROM.<br>
[0070]<br>
The restriction imposed on the decoding elementary streams is<br>
that the bit amount of TS packets (Decoding TS packets) constituting<br>
an AVClip (MainClip, SubClip) that includes elementary streams<br>
allowed in the STN_table to be simultaneously played back but does<br>
not include elementary streams not allowed to be played back must be<br>
48 Mbits/second or less.<br>
The unit time of one second is called the "Window", and can be<br>
located at any point on the time axis of the ATC Sequence.  That is<br>
to say, the bit amount of the decoding elementary streams during one<br>
second at any point must be 48 Mbits or less.<br>
[0071]<br>
FIG. 20 shows TS packets read from the BD-ROM and from the<br>
local storage, and illustrates, of these TS packets, ones to be<br>
38<br><br>
supplied to the decoder. Level 1 of the figure shows multiple TS<br>
packets read from the BD-RCM; Level 3 shows multiple TS packets read<br>
from the local storage. Among the TS packets in Levels 1 and 3,<br>
hatched ones in the figure are TS packets constituting a decoding<br>
elementary stream (Decoding TS packets) . Level 2 in the figure shows,<br>
of the Decoding TS packets shown in Levels 1 and 3, ones occurring in<br>
a period of one second. As has been described above, according to<br>
the MPBG2 decoder system standard, an overlap is not allowed between<br>
TS packets on the ATC time axis in one transport stream. However, it<br>
can be seen from the figure that overlaps rpl, rp2 and rp3 between TS<br>
packets occur on the ATC time axis. Thus, overlaps in the TS packet<br>
operations are allowed in the unit time of the Window. However,<br>
another requirement, which is not applied to the MPBG2 decoder system<br>
standard, is imposed. That is the above-mentioned restriction of 48<br>
Mbits/Window or less. Level 4 presents mathematical expressions of<br>
the condition that the Decoding TS packets must satisfy. The<br>
mathematical expressions indicate that a value obtained by converting<br>
the count of the above-mentioned Decoding TS packets into a bit count<br>
(the count of the Decoding TS packets is multiplied by the number of<br>
bytes of a TS packet, 188, and the result is expressed in 8 bits) is<br>
48 Mbits or less.<br>
[0072]<br>
Imposing the above-mentioned condition on the Decoding TS<br>
packets in any period of one second is the restriction of the bit<br>
amount according to the present embodiment. When the authoring is<br>
performed for the Out_of_MUX application, it is checked whether the<br>
bit amount of a Decoding TS packet over the period of one second is<br>
48 Mbits or less while keeping the Window shifting on the Source<br>
39<br><br>
Packet sequence by one packet each time. When the limitation is<br>
satisfied, the Window is shifted to the next TS packet. If the<br>
limitation is not satisfied, it is determined that there is a<br>
violation of the BD-RCM standard. When the Out_Time of the Window<br>
reaches the last Source Packet after the repetition of such shifts,<br>
it is determined that the Source Packets conform to the BD-RCM<br>
standard.<br>
[0073]<br><window shifting><br>
An ATS having a time accuracy of 27 MHz is attached to each TS<br>
packet. Coordinates on the ATC time axis have a time accuracy of<br>
1/27,000,000 second; however, an ATS is not always present at each<br>
coordinate on the ATC time axis. On the ATC time axis, periods<br>
having no ATS and periods having an ATS appear in an irregular manner.<br>
The occurrence of ATSs is varied, and therefore when the Window is<br>
shifted, how to adjust the Out_Time of the Window becomes an issue in<br>
the case where an ATS is absent 1 second after the In_Time.<br>
[0074]<br>
The Out_Time of the Window is, in principle, set to be 1<br>
second after the In_Time. Here, if an ATS is present, on the ATC<br>
time axis, at a coordinate corresponding to 1 second after the<br>
In_Time, the coordinate of the In__Time + 1 second is set as the<br>
Out_time. If an ATS is absent at the coordinate corresponding to 1<br>
second after the In_Time, a coordinate at which an ATS appears on the<br>
ATC time axis for the first time after the In_Time + 1 second is set<br>
as the Out_Time. Since the Out_Time of the Window shifting is<br>
adjusted by taking into account time periods during which no ATS is<br>
present, a different bit value is calculated each time when the<br>
40<br><br>
Window shifts.  The In_Time is shifted by one TS packet each time,<br>
and the Out_Time is ad_lasted in accordance with the shift, and<br>
thereby the transition of the bit values in the ATC time axis can be<br>
calculated with precision.<br>
[0075]<br>
FIGs. 21A-21D show the shifts of the Window. In each of FIGs.<br>
21A to 2ID, the upper part shows a Source Packet sequence which is a<br>
target for verification, and the lower part shows the In_Time and<br>
Out_Time of the Window. In FIG. 21A, the In_Time of the Window<br>
specifies a Source Packet #i.  A TS packet #j corresponding to 1<br>
second after the In_Time of the Window is set as the Out_Time of the<br>
Window.<br>
In FIG. 21B, the In_Time of the Window specifies a Source<br>
Packet #i+l. On the other hand, no ATS is present at the coordinate<br>
corresponding to the Source Packet #j+l, which is 1 second after the<br>
In_Time of the Window. The Out_Time of the Window of FIG. 2IB should<br>
specify one TS packet beyond the TS packet #j; however, since a<br>
Source Packet is not present immediately after the TS packet #j, the<br>
bit rate of the Window of FIG. 2IB becomes smaller than the bit rate<br>
of the Window of FIG. 21A. In such a case, there is no point for the<br>
Window of FIG. 2IB performing the check. Given this factor, by<br>
adjusting the Out_Time of the Window, a TS packet #j+2, which appears<br>
for the first time after 1 second from the In_Time of the Window, is<br>
set as the Out_Time. Setting the Out_Time in this way makes the check<br>
of the Window of FIG. 2IB worth performing.<br>
[0076]<br>
In FIG. 21C, the In_Time of the Window specifies a Source<br>
Packet #i+2.  On the other hand, the TS packet #j+2 is located at a<br>
41<br><br>
position corresponding to 1 second after the In_Time of the Window.<br>
The count of the TS packets for the Window of FIG. 21C is the same as<br>
that for the Window of FIG. 2IB, and therefore there is no point for<br>
performing the check. Accordingly, no check is performed in FIG. 21C,<br>
and the In_Time of the Window is shifted.<br>
In FIG. 21D, the In_Time of the Window specifies a Source<br>
Packet #1+3. On the other hand, no Source Packet is present at a<br>
position corresponding for a Source Packet #j+3, which is in 1 second<br>
after the In_Time of the Window. Given this factor, by adjusting the<br>
Out_Time of the Window in a manner described above, a TS packet #j+4,<br>
which appears for the first time after 1 second from the In_Time of<br>
the Window is set as the Out_Time. Herewith, the count of the TS<br>
packets in the Window becomes different from that for the Window of<br>
FIG. 21B, and the check of the Window of FIG. 21D is made to be worth<br>
performing.<br>
[0077]<br>
By performing the bit amount check with the Window shift in<br>
the above described manner when the authoring is carried out, it is<br>
guaranteed that no underflow or overflow is caused when TS packets<br>
are read from the local storage and the BD-ROM and supplied to the<br>
decoder.<br>
The assurance of the Window shift is described next with<br>
reference to specific examples of FIGs. 22-26.<br>
Level 1 in FIG. 22 is a graph showing temporal transition<br>
regarding the data amount of TS packets read from the BD-ROM as well<br>
as the data amount of TS packets read from the local storage. The<br>
horizontal axis is time and the vertical axis is transmission amounts<br>
in relation to each point on the time axis.  In the graph, the bit<br>
42<br><br>
amounts at the time when TS packets are being read from the BD-RCM<br>
and the local storage undergo a transition as indicated by the dashed<br>
curves.<br>
[0078]<br>
Level 2 in FIG. 22 shows the total data amount of, from among<br>
the TS packets read from the BD-RCM and the local storage, TS packets<br>
which are to be supplied to the decoder. The temporal transition of<br>
the total transmission amount is as shown by the solid curve. The<br>
total data amount is the sum amount of TS packets belonging to<br>
streams that have been allowed in the STN_table. In the worst case,<br>
the total transmission amount would reach close to 96 Mbits and TS<br>
packets having this data amount would be supplied to the decoder.<br>
Here, the time axis of the graph is divided into seven Windows, and a<br>
comparison is made between the supply amount in each Window and the<br>
transmittable amount for each Window.<br>
[0079]<br>
Level 3 in FIG. 22 is the graph of Level being divided for<br>
every 1 second. FIGs. 23A and 23B show the comparison between the<br>
transmittable amount and the amount supplied to the decoder for each<br>
Window. The transmittable amount for a Window is 48 Mbits per second,<br>
and it is 96 Mbits if the amount is converted in bit per 0.5 seconds.<br>
A hatching pattern pnl in the figure indicates the data amount<br>
supplied to the decoder. A hatching pattern pn2 in the figure<br>
indicates the transmittable amount in each Window. In any Window,<br>
the portion with the hatching pattern pnl has the same or smaller<br>
area than the portion with the hatching pattern pn2. This indicates<br>
that the data amount supplied from the BD-RCM and the local storage<br>
is limited to the transmittable amount or less in any Window.<br>
43<br><br>
[0080]<br>
At any point on the ATC time axis, the transmittable amount to<br>
the decoder is 48 Mbits/second or less.  Therefore, even if the<br>
transmittable amount to the decoder locally reaches close to 96 Mbits,<br>
the transmission at 96 Mbits never continues for 0.5 seconds, as<br>
evidenced by the calculation of 48 Mbits = 96 Mbits x 0.5 seconds.<br>
Accordingly, if the decoder performs a prior read operation to read<br>
in advance Source Packets from the BD-ROM and the local storage<br>
before the peak is reached, no underflow or overflow is caused in the<br>
buffer of the decoder.<br>
[0081]<br>
The transmittable amount in each Window, i.e. 48 Mbits/second,<br>
has been determined using, as a guide, an amount that a decoder<br>
complying with MPEG can read in advance into the buffer.  If the<br>
amount of data that can be read in advance into the buffer is larger,<br>
the data amount per second can be made larger, or the period for the<br>
Window can be set longer. Thus, the present invention is not limited<br>
to the rate of 48 Mbits/second.<br>
[0082]<br>
Thus concludes the description of the restriction of the data<br>
amount on a Secondary TS that is allowed in the STN_table to be<br>
played back.<br><setting of connection_condition information and></setting>
sp_connection_condition Information&gt;<br>
The following describes settings of connection_condition<br>
information in Playltem and sp_connection_condition information in<br>
SubPlayltem for realizing the Out_of_MUX application. The fields of<br>
connection_condition   information   and   sp_connection_condition<br>
44<br><br>
information can take values of "1", "5", and "6", the meanings of<br>
which are as follows.<br>
[0083]<br>
connection_condition=l (CC = 1) : There is no guarantee for a<br>
seamless connection between PlayItern (current Playltem) and the<br>
immediate previous Playltem (previous Playltem) . That is, it is a<br>
connection mode that allows a freeze to occur and the playback is<br>
interrupted (non-seamless connection) .<br>
connection__condition= 5 (CC = 5) : There is a guarantee for a<br>
seamless connection between a video stream, a PG stream and an IG<br>
stream multiplexed into the MainClip of the current Playltem and a<br>
video stream, a PG stream and an IG stream multiplexed into the<br>
MainClip of the previous Playltem. On the other hand, this is not<br>
the case with an audio stream multiplexed into the MainClip.<br>
[0084]<br>
connection_condition=6 (CC = 6) : Respective TS streams<br>
belonging to the current Playltem and to the previous Playltem,<br>
respectively, are logically continued (they are continuous on the<br>
time axis, and the encoding methods are also the same), and there is<br>
a guarantee for a seamless connection of both audio and video streams.<br>
sp_connection_condition information written in SubPlayItem#n<br>
can be defined as follows.<br>
[0085]<br>
sp_connection_condition information (SP_CC = 1) : There is no<br>
guarantee for a seamless connection between SubPlayltem (current<br>
SubPlayltem) and the immediate previous SubPlayltem (previous<br>
SubPlayltem).<br>
45<br><br>
sp_connection_condition information (SP_CC = 5) : There is a<br>
guarantee for a seamless connection between a PG stream and an IG<br>
stream multiplexed into the SubClip of the current SubPlayltem and a<br>
PG stream and an IG stream multiplexed into the SubClip of the<br>
previous SubPlayltem. On the other hand, this is not the case with<br>
an audio stream multiplexed into the SubClip.<br>
[0086]<br>
sp_connection_condition information (SP_CC = 6) : Respective<br>
TS streams belonging to the current SubPlayltem and to the previous<br>
SubPlayltem, respectively, are logically continued (they are<br>
continuous on the time axis, and the endocing methods are also the<br>
same), and there is a guarantee for a seamless connection.<br>
SubPlayltem to be set for Playltem that realizes the<br>
Out_of_MUX application should not cause discordance even if a video<br>
stream, an audio stream, a PG stream or an IG stream of SubPlayltem<br>
is within Playltem. Therefore, they have identical connection<br>
conditions. That is, if Playltem#l and Playltem#2 are connected by<br>
CC = 1, SubPlayItem#l and SuPlayItem#2 corresponding to them are also<br>
connected by CC = 1. Similarly, if Playltem#l and Playltem #2 are<br>
connected by CC= 5, the corresponding SubPlayItem#l and SubPlayItem#2<br>
are connected while satisfying the condition of CC = 5.<br>
The following describes the relationship of In_Times and<br>
Out_Times of Playltems and SubPlayltems constituting the Out_of_MUX<br>
application as well as the detail of connection_condition information<br>
with reference to FIGs. 24, 25 and 26.<br>
[0087]<br>
Relationship of In_Times and Out_Times&gt;<br>
46<br><br>
FIG. 24 shows a connection state of Playltetns and SubPlaylterns<br>
constituting the Out_of_MUX. Level 1 of the figure is a SubClip time<br>
axis; and Levels 2 and 3 are a SubPlayltem time axis and a PlayList<br>
time axis, respectively. Level 4 is a MainClip time axis. In the<br>
figure, in the case where connection_condition information of<br>
Playltem is "= 5", connection_condition information of SubPlayltem is<br>
also SP_CC = 5.<br>
[0088]<br>
FIG. 25 shows the relationship between In_Times and Out_Times<br>
of Playltems and In_Times and Out_Times of SubPlayltems in the case<br>
where connection_condition information of Playltem and<br>
sp_connection_condition infomraiton of SubPlayltem shown in FIG. 24<br>
are set to "= 5". Levels 1 and 4 are the same as those in FIG. 24.<br>
Of two Playltems (Playltem information #1 and Playltem information<br>
#2) shown in FIG. 24, Playltem information #1 has In_Time indicating<br>
a time point tl and has Out_Time indicating a time point t2. In_Time<br>
of Playltem information #2 indicates a time point t3, and Out_Time of<br>
Playltem information #2 indicates a time point t4.<br><br>
[0089]<br>
When  the  connection  state  of  Playltem  is  CC  =  5,<br>
Sync_Start_Pts_of_PlayItem of SubPlayltem indicates the same time<br>
point as In_Time of Playltem.  In_Time and Out_Time of SubPlayltem<br>
show the same time points as In_Time and Out_Time of Playltem.  Thus,<br>
in the case where connection_condition information of Playltem is "=<br>
5", sp_connection_condition information of SubPlayltem is also set to<br>
"= 5", and In_Time and Out_time of Playltem indicate the same time<br>
points as In_Time and Out_Time of SubPlayltem.<br>
[0090]<br>
47<br><br>
In_Time and Out_Time of Play Item and In_Time and Out_Time of<br>
SubPlayltem respectively refer to PTSs of a Video Presentation Unit<br>
and an Audio Presentation Unit. In_Time and Out_Time of Playltem and<br>
In_Time and Out_Time of SubPlayltem matching each other means that<br>
PTS values of the Video Presentation Unit and Audio Presentation Unit<br>
referred to by In_Time and Out_Time of Playltem are the same as PTS<br>
values of the Video Presentation Unit and Audio Presentation Unit<br>
referred to by In_Time and Out_Time of SubPlayltem. In this case, it<br>
is necessary that Primary TS and Secondary TS should be encoded so as<br>
to have the same length of time and to cause PTSs of the Video<br>
Presentation Unit and Audio Presentation Unit to be the same when the<br>
authoring is performed. Creating Primary TS and Secondary TS in this<br>
way is also a condition for realizing CC = 5 and SP__CC = 5.<br>
[0091]<br><stc values to be referred for synchronous playback><br>
FIG. 26 shows an STC value to be referred to when part<br>
existing from InJTime to Out_Time of Playltem is played back and an<br>
STC value to be referred to when part existing from In_Time to<br>
Out_Time of SubPlayltem is played back. Levels 2 and 3 are the same<br>
as those in the previous figure. Level 1 shows, in graph format, an<br>
STC value to be referred to when part existing from In_Time to<br>
Out_Time of SubPlayltem is played back. Level 4 shows, in graph<br>
format, an STC value to be referred to when part existing from<br>
In_Time to Out_Time of Playltem is played back. The horizontal axis<br>
of Level 1 is a time axis, and the vertical axis shows STC values in<br>
relation to each time point on the time axis. The STC values of<br>
Level 1 include a monotonic increase zkl from In_Time to Out_Time of<br>
SubPlayltem information #1 and a monotonic increase zk2 from In_Time<br>
48<br><br>
to Out_Time of SubPlayltem information #2. The STC values of Level 4<br>
include a monotonic increase zk3 from In_Time to Out_Time of Playltem<br>
information #1 and a monotonic increase zk4 from In_Time to Out_Time<br>
of Playltem information #2.<br>
[0092]<br>
As In_Time of Playltem indicates the same time point of<br>
In_Time of SubPlayltem, the initial values of the STCs in the above<br>
graph are the same and the STC values in the middle time points are<br>
also the same. That is, STC2(i), which is an STC value to be<br>
referred to when a Source Packet located at a discretional time point<br>
i between In_Time and Out_Time of Playltem is supplied to the decoder,<br>
is the same as STCl(i), which is an STC value to be referred to when<br>
a Source Packet located at the same time point i between In_Time and<br>
Out_Time of SubPlayltem is supplied to the decoder. When the STC<br>
values are the same, all the STC counters in the apparatus have to do<br>
is to create the same clock values and supply them to the<br>
demultiplexing units, thus simplifying controls on the playback<br>
apparatus.<br>
[0093]<br>
Hypothetically speaking, in the case where two or more<br>
SubPlayltems are prepared for one Playltem against the controls<br>
illustrated in FIGs. 25 and 26, the video and audio are interrupted<br>
at the boundary of these SubPlayltems, and inconveniences—such as<br>
playback suspension in the middle of Playltem—will result.<br>
Additionally, when a process of replacing a Primary TS with a<br>
Secondary TS is realized in the Out-of-MUX application, the STC time<br>
axis have to be changed at the replacement, which leads to<br>
complication of the synchronous controls on the playback apparatus.<br>
49<br><br>
On the other hand, by defining both In_Time and Out_Time of Playltem<br>
or SubPlayltem on a continuous STC time axis, it is possible to<br>
prevent the above-mentioned inconveniences, i.e. an interruption of<br>
video and audio and replacement of transport streams. Due to these<br>
situations, with respect to one Playltem, one SubPlayltem having the<br>
same start and end points as those of the Playltem is assigned.<br>
[0094]<br><errors of in_time and out_time><br>
Here, an exact match between In_Time and Out_Time of Playltem<br>
and those of SubPlayltem is not required, and some degree of errors<br>
can be allowed. The errors of In_Time and Out_Time are described<br>
next.<br>
STC times of In_Time and Out_Time of Playltem are set for<br>
video frames of Playltem. On the other hand, STC times of In_Time<br>
and Out_Time of SubPlayltem are set for audio frames of SubPlayltem.<br>
This is because SubPlayltem is mainly used for commentary and<br>
therefore it is often the case that a video stream is not multiplexed<br>
thereinto. In this case, due to, in a precise sense, a difference in<br>
the length of playback period of respective presentation units, their<br>
start and end times do not match each other. Accordingly, it is<br>
necessary to allow an error of, at least, less than one frame. The<br>
start and end times of Playltem#n and SubPlayItem#n are also<br>
specified on the same STC time axis as follows:<br>
(PlayItem#n.Out - Playltem#n.ln) - (SubPlayItem#n.Out_time -<br>
SubPlayItem#n.In_time) | 
or two interlace fields of video having the shortest playback period<br>
in Playltem#n 
the playback period of 1 progressive frame or two interlace fields of<br>
50<br><br>
video having the longest playback period in Playltem#n (
be used, or the value can be set to be 1 second or less.<br>
Thus concludes the description of the relationship of In_Times<br>
and Out_Times of Playltera and SubPlayltem.<br>
[0095]<br>
The following describes connection_condition information and<br>
sp_connection_condition information in detail. In order to satisfy<br>
CC = 5 and SP_CC = 5, the following conditions have to be met in all<br>
the levels of AV stream, transport stream, Video Presentation Unit<br>
and Audio Presentation Unit, and elementary stream.<br><level of av stream><br>
connection_condition information of the current Playltem and<br>
sp_connection_condition information being set to "5" means that there<br>
is "Clean Break" between the end point of an AV stream played back in<br>
the previous Playltem and the start point of the AV stream played<br>
back in the current Playltem.<br>
[0096]<br>
In order to realize Clean Break, the AV stream played back in<br>
the previous Playltem and the AV stream played back in the current<br>
Playltem must satisfy the following requirements.<br>
(1) An unnecessary Access Unit is absent at the end point of<br>
MainClip specified in the previous Playltem, and an unnecessary<br>
Access Unit having a PTS has been excluded from the period following<br>
Out_Time of the previous Playltem.<br>
[0097]<br>
Similarly, an unnecessary Access Unit is absent at the end<br>
point of SubClip specified in the previous SubPlayltem, and an<br>
51<br><br>
unnecessary Access Unit having a PTS has been excluded from the<br>
period following Out_Time of the previous SubPlayltem.<br>
(2)	At the start of the AV stream specified in the current<br>
Playltem, an unnecessary Access Unit having a PTS has been excluded<br>
from the period prior to In_Time of the current Playltem.   In<br>
addition, the first Audio Presentation Unit of MainClip includes<br>
Sample to be played back at In_Time on the STC time axis.<br>
[0098]<br>
Similarly, at the start of the AV stream specified in the<br>
current SubPlayltem, an unnecessary Access Unit having a PTS has been<br>
ecluded from the period prior to In_Time of the current SubPlayltem.<br>
In addition, the first Audio Presentation Unit of the SubClip<br>
includes Sample to be played back at In_Time on the STC time axis.<br>
(3)	Source Packets constituting the MainClip specified in the<br>
previous Playltem must be multiplexed in a manner that all of them<br>
are taken into the decoder system before the first packet of the<br>
MainClip specified in the current Playltem is sent to the decoder.<br>
[0099]<br>
Similarly, data of the SubClip specified in the previous<br>
SubPlayltem must be multiplexed in a manner that all the data is<br>
taken into the decoder system before the first packet of the SubClip<br>
specified in the current SubPlayltem is sent to the decoder.<br>
Thus concludes the description of conditions that should be<br>
satisfied at the level of the AV stream. Now, conditions that should<br>
be satisfied at the level of transport streams are described.<br><level of transport streams><br>
Here, two Primary TSs that are targets of a seamless<br>
connection when CC = 5 are called Primary TS1 and Primary TS2.  Two<br>
52<br><br>
Primary TSs that are targets of a seamless connection when SP_CC = 5<br>
are called Secondary TS1 Secondary TS2.<br>
[0100]<br>
FIG. 27 shows how TSls and TS2s are identified in an AVClip<br>
referred to in the previous Playltem and the previous SubPlayltem and<br>
in an AVClip referred to in the current Playltem and the current<br>
SubPlayltem. Level 4 in the figure shows Primary TS1 and Primary<br>
TS2; and Level 3 shows MainClipl of the previous Playltem and<br>
MainClip2 of the current Playltem. Level 1 shows Secondary TS1 and<br>
Secondary TS2; and Level 2 shows SubClipl of the previous SubPlayltem<br>
and SubClip2 of the current SubPlayltem.<br>
[0101]<br>
Primary TS1 is composed of a portion of data which is hatched<br>
in MainClipl in the figure. This data portion in MainClipl starts<br>
with a Source Packet from which decoding of In_Time in the previous<br>
Playltem can be started. This Source Packet is located at the<br>
beginning of a Video Presentation Unit and an Audio Presentation Unit<br>
that are referred to by In_Time. Then, the data portion ends with<br>
the last packet of MainClipl.<br>
[0102]<br>
Primary TS2 is composed of a portion of data which is hatched<br>
in MainClip2 in the figure. This data portion in MainClip2 starts<br>
with the first Source Packet of MainClip2. Then, the data portion in<br>
MainClip2 ends with a Source Packet at which decoding of the current<br>
Playltem is finished. This Source Packet is a Source Packet located<br>
at the end of a Video Presentation Unit and an Audio Presentation<br>
Unit that are referred to by Out_Time of the current Playltem.<br>
[0103]<br>
53<br><br>
Secondary TS1 is composed of a portion of data which is<br>
hatched in SubClipl in the figure. This data portion in SubClipl<br>
starts with a Source Packet from which decoding of In_Time in the<br>
previous SubPlayltem can be started. This Source Packet is located<br>
at the beginning of a Video Presentation Unit and an Audio<br>
Presentation Unit that are referred to by In_Time. Then, the data<br>
portion ends with the last packet of SubClipl.<br>
[0104]<br>
Secondary TS2 is composed of a portion of data which is<br>
hatched in SubClip2 in the figure. This data portion in SubClip2<br>
starts with the first Source Packet of SubClip2. Then, the data<br>
portion in SubClip2 ends with a Source Packet at which decoding of<br>
the current Playltem is finished. This Source Packet is located at<br>
the end of a Video Presentation Unit and an Audio Presentation Unit<br>
that are referred to by Out_Time of the current SubPlayltem.<br>
[0105]<br>
According to the description above, it can be understood how<br>
two transport streams to be connected are arranged in a MainClip and<br>
a SubClip when CC = 5 and SP_CC = 5. The MainClip of the previous<br>
Playltem must end with a Video Presentation Unit and an Audio<br>
Presentation Unit that are referred to by Out_Time of the previous<br>
Playltem, and the MainClip of the current Playltem must start with a<br>
Video Presentation Unit and an Audio Presentation Unit which are<br>
referred to by In_Time of the current Playltem. This relationship is<br>
also true for the previous SubPlayltem. That is, the SubClip of the<br>
previous SubPlayltem must end with an Audio Presentation Unit which<br>
is referred to by Out_Time of the previous SubPlayltem, and the<br>
SubClip of the current SubPlayltem must start with an Audio<br>
54<br><br>
Presentation Unit which is referred to by In_Time of the current<br>
SubPlayltem. This is because an unnecessary Audio Presentation Unit<br>
should not be present at or after a Video Presentation Unit and an<br>
Audio Presentation Unit which are referred to by Out_Time of the<br>
previous SubPlayltem, as described above. On the other hand, the<br>
SubClip of the previous SubPlayltem does not have to start with an<br>
Audio Presentation Unit which is referred to by In_Time of the<br>
previous SubPlayltem, and SubClip of the current SubPlayltem also<br>
does not have to end with an Audio Presentation Unit which is<br>
referred to by Out_Time of Current SubPlay Item.<br>
[0106]<br>
According to FIGs. 24 and 27, Primary TS and Secondary TS must<br>
be made to have the same length of time, and PTS values of the Video<br>
Presentaiton Unit and Audio Presentation Unit must be made to have<br>
the same value. In addition, the MainClip of the previous Playltem<br>
and the SubClip of the previous Playltem must be multiplexed in such<br>
a manner to end with a Video Presentation Unit and an Audio<br>
Presentation Unit corresponding to Out_Time. The MainClip of the<br>
current Playltem and the SubClip of the current Playltem must be<br>
multiplexed in such a manner to start with a Video Presentation Unit<br>
and an Audio Presentation Unit corresponding to In_Time.<br>
[0107]<br>
Additionally, these transport streams must meet the following<br>
conditions:<br>
the number of programs in TS1 and TS2 is one;<br>
the number of video streams is one;<br>
the number of audio streams is the same;<br>
55<br><br>
the content of STN_table of the previous Playltem is the<br>
same as that of STN_table of the current Playltem; and<br>
the playback period of the transport stream in each<br>
Playltem is three seconds.<br>
These are the conditions that should be satisfied at the level<br>
of transport streams for connecting two streams when CC = 5 and SP_CC<br>
= 5. Now, conditions that should be satisfied at the level of a<br>
Video Presentation Unit and an Audio Presentation Unit are described.<br><level of video presentation unit and audio><br>
Although the start time of the last Video Presentation Unit in<br>
the video stream of Primary TS1 is originally different from the end<br>
time of the first Video Presentation Unit in the video stream of<br>
Primary TS 2, CC = 5 makes the start time and the end time match each<br>
other. When the end time and start time of the Video Presentation<br>
Units are made to match each other, how to handle such Video<br>
Presentation Units and Audio Presentation Units for synchronous<br>
playback becomes an issue. This is because video and audio have<br>
different sampling frequencies, and the length of times of a Video<br>
Presentation Unit and an Audio Presentation Unit do not match each<br>
other.<br>
[0108]<br>
FIG. 28 shows details of CC = 5 and SP_CC = 5. Levels 1 to 3<br>
show connection_condition of SubPlayltem, and Levels 4 to 7 show<br>
sp_connection_condition in Playltem. Level 4 shows multiple Video<br>
Presentation Units of TS1 and TS2, and Level 5 shows Audio<br>
Presentation Units in TS1 and Audio Presentation Units in TS2. Level<br>
6 shows STC values in the MainClip. Level 7 shows a Source Packet<br>
sequence of the MainClip.<br>
56<br><br>
[0109]<br>
Hatched parts in the figure represent Video Presentation Units,<br>
Audio Presentation Units, and Source Packets of TS1, while parts with<br>
no shade represent Video Presentation Units, Audio Presentation Units,<br>
and Source Packets of TS2.<br>
In the figure, CC = 5 represents the state in which Video<br>
Presentation Units are aligned to have a common boundary (Level 4),<br>
there is a gap between ATCs in the MainClip (Level 7), and there is<br>
an overlap between Audio Presentation Units in the MainClip (Level 5) .<br>
SP_CC = 5 represents the state in which there is a gap between ATCs<br>
in the SubClip (Level 1), and there is an overlap between Audio<br>
Presentation Unit in the SubClip (Level 2) .<br>
[0110]<br>
The above-mentioned boundary between Video Presentation Units<br>
is located at, from the perspective of TS1, an end point<br>
PTSl(lstEnd)+Tpp of the last Video Presentation Unit of Level 4, and<br>
is located at, from the perspective of TS2, a start point<br>
PTS2(2ndSTART) of the Video Presentation Unit of Level 4.<br>
Assume that in TS1, the end point of an Audio Presentation<br>
Unit corresponding to a boundary time point T4 is T5a, and in TS2,<br>
the start point of Audio Presentation Unit corresponding to the time<br>
point T4 is T3a. Here, the overlap of Audio Presentation Units in<br>
the MainClip extends from T3a to T5a.<br>
[0111]<br>
In the figure, each Audio Presentation Unit of the SubClip is<br>
set longer than each Audio Presentation Unit of the MainClip. This<br>
is because the audio stream of the SubClip is set to have a low<br>
sampling frequency since it is supplied via a network,  and<br>
57<br><br>
accordingly, the period of time for each Audio Presentation Unit<br>
becomes longer. In the packet sequence of Level 1, there is a gap<br>
similar to the one in Level 7. Also, in Audio Presentation Units of<br>
Level 2, there is an overlap similar to the one in Level 4. Assume<br>
that, in TS1 of the SubClip, the end point of Audio Presentation Unit<br>
corresponding to the boundary time point T4 is T5b, and in TS2 of the<br>
SubClip, the start point of Audio Presentation Unit corresponding to<br>
the time point T4 is T3b. Here, the overlap extends from T3b to T5b.<br>
[0112]<br>
From the figure, it can be seen that, in order to realize CC =<br>
5 and SP_CC = 5, the following four conditions must be met at the<br>
levels of Video Presentation Units, Audio Presentation Units, and<br>
packets.<br>
(1)	The last Audio Presentation Unit of the audio stream in<br>
TS1 includes a sample having a playback time which coincides with the<br>
end of the display period of the last picture in TS1 specified in the<br>
previous Playltem and the previous SubPlayltem.<br>
[0113]<br>
(2)	The first Audio Presentation Unit of the audio stream in<br>
TS2 includes a sample having a playback time which coincides with the<br>
start of the display period of pictures of the first picture in TS2<br>
specified in the current Playltem and the current SubPlayltem.<br>
(3)	There is no gap at a connection point in the Audio<br>
Presentation Unit sequence.  This means that an overlap in the Audio<br>
Presentation Unit sequence can occur at a connection point. However,<br>
the extent of such an overlap must be shorter than the playback<br>
period of two audio frames.<br>
[0114]<br>
58<br><br>
(4) The first packet of TS2 includes a PAT, which can be<br>
immediately followed by one or more PMTs. If a PMT is larger than a<br>
payload of a TS packet, the EMT may be divided into two packets or<br>
more. TS packe storeing therein a EMT may include a PCR and an SIT.<br>
Relationship of In_Time and Out__Time with Video Presentation<br>
Unit&gt;<br>
FIG. 29 shows a relationship among multiple Video Presentation<br>
Units specified by a previous Playltem and the current Playltem,<br>
multiple Audio Presentation Units, and STC time axes. Level 1 shows<br>
multiple Video Presentation Units belonging to TS1 to which the<br>
previous Playltem refers and multiple Video Presentation Units<br>
belonging to TS2 to which the current Playltem refers. Level 2 shows<br>
multiple Audio Presentation Units belonging to a time stamp to which<br>
the previous SubPlayltem refers and multiple Audio Presentation Units<br>
belonging to TS2 to which the current SubPlayltem refers. Level 3<br>
shows an STC time axis of TS1 in the previous SubPlayltem and an STC<br>
time axis of TS2 in the current SubPlayltem. As shown in FIG. 28,<br>
within Audio Presentation Units of TS1 and Audio Presentation Units<br>
of TS2 at Level 2, the portion from the start point T3b to the end<br>
point T5b overlaps. In_Time of the current SubPlayltem and Out_Time<br>
of the previous SubPlayltem respectively specify the time point T4,<br>
which is a boundary of Video Presentation Units. Since In_Time of<br>
the current Playltem and Out_Time of SubPlayltem also specify the<br>
time point T4 of the boundary of Video Presentation Units, In_Time<br>
and Out_Time of Playltem coincide with In_Time and Out_Time of<br>
SubPlayltem. Thus, although In_Time of the previous SubPlayltem and<br>
Out_Time of the current SubPlayltem are recorded on a recording<br>
medium different from the BD-RCM, it can be seen that they correspond<br>
59<br><br>
to the boundary of Video Presentation Units in the MainClip, and also<br>
correspond to Out_Time of the previous Playltem and In_Time of the<br>
current Playltem, respectively.<br>
[0115]<br>
Thus concludes the detailed description of conditions that<br>
should be satisfied at the level of Video Presentation Units and<br>
Audio Presentation units.<br><level of elementary streams><br>
The following describes encoding conditions at the level of<br>
elementary streams in order to realize CC = 5 and SP_CC = 5.<br>
[0116]<br>
The following encoding conditions must be satisfied at the<br>
level of each elementary stream.<br>
(1)	Video Stream<br>
the video resolution and the frame rate do not change<br>
before and after a seamless connection; and<br>
a video stream immediately before a seamless connection<br>
ends with sequence_end_code (for MPEG-2 Video) and<br>
end__of_sequence_rbsp (for MPEG-4 AVC) .<br>
(2)	Audio Stream<br>
the encoding format of audio streams having the same PID do<br>
not change; and<br>
the sampling frequency, the quantization bit rate and the<br>
number of channels do not change.<br>
(3)	PG Stream<br>
a) The number of PG streams in TS1 and in TS2 is the same.<br>
[0117]<br>
60<br><br>
b)	PG stream of TS1 ends with a function segment called "End<br>
of Display Set".<br>
c)	PTS of a PES packet carrying the last PCS in TS1 indicates<br>
a time point before the playback time corresponding to OutJTime of<br>
the previous Playltem and the previous SubPlayltem.<br>
d)	PG stream of TS2 must start with Epock Start-type or Epock<br>
Continue-type Display Set.<br>
[0118]<br>
e)	PTS of a PES packet carrying the first PCS in TS2 indicates<br>
a time point at or after the playback time corresponding to In_Time<br>
of the current Playltem and the current SubPlayltem.<br>
f)	Taking out of Source Packets from TS1, which is followed by<br>
taking out of Source Packets from TS2, can be defined as STC1 and<br>
STC2 on the same system time axis, and there is no overlap in their<br>
DTS values/PTS values.<br>
(4) IG Stream<br>
a)	The number of IG streams in TS1 and in TS2 is the same.<br>
[0119]<br>
b)	IG stream of TS1 ends with the function segment called "End<br>
of Display Set".<br>
c)	PTS of a PES packet carrying the last ICS in TS1 indicates<br>
a time point before the playback time corresponding to Out_Time of<br>
the previous Playltem and the previous SubPlayltem.<br>
d)	IG stream of TS2 must start with Epock Start-type or Epock<br>
Continue-type Display Set.<br>
[0120]<br>
61<br><br>
e)	PTS of a PES packet carrying the first ICS in TS2 indicates<br>
a time point at or after the playback time corresponding to In_Time<br>
of the current Play Item and the current SubPlayltem.<br>
f)	Taking out of Source Packet from TS1, which is followed by<br>
taking out of Source Packet from TS2, can be defined as STC1 and STC2<br>
on the same system time axis, and there is no overlap in their DTS<br>
values/PTS values.<br>
In order to connect the previous Playltem and the current<br>
Playltem with CC = 5 and connect the previous SubPlayltem and the<br>
current SubPlayltem with SP_CC = 5, the above-mentioned all<br>
conditions for the levels of AV stream, transport stream, Video<br>
Presentation Units and Audio Presentation Units, and elementary<br>
stream must be met.<br>
[0121]<br>
Thus concludes the explanation of PlayList information which<br>
is a constituent of the storage content of the local storage 200.<br>
Thus concludes the explanation of the recording medium<br>
according to the present invention. Next, the playback apparatus of<br>
the present invention is explained.<br>
FIG. 30 shows an internal structure of the playback apparatus<br>
of the present invention. The playback apparatus of the present<br>
invention is commercially manufactured based on the internal<br>
structure shown in the figure. The playback device is mainly<br>
composed of two parts—a system LSI and a drive device, and can be<br>
produced commercially by mounting these parts on the cabinet and<br>
substrate of the device. The system LSI is an integrated circuit<br>
that integrates a variety of processing units for carrying out the<br>
functions of  the playback device.    The playback apparatus<br>
62<br><br>
manufactured in this way comprises: a BD-ROM drive la; read buffers<br>
Ib and lc; ATC counters 2a and 2c; Source depacketizers 2b and 2d;<br>
ATC counters 2c and 2d; STC counters 3a and 3c; PID filters 3b and<br>
3d; a video decoder 4; a transport buffer (TB) 4a; a multiplexed<br>
buffer (MB) 4b; a coded picture buffer (CPB) 4c; a video decoder 4d;<br>
a re-order buffer 4e; a switch 4f; a video plane 5; an audio decoder<br>
9; a transport buffer 6; an elementary buffer 7; a decoder 8;<br>
switches. 10a, 10b, 10c and lOd; an interactive graphics decoder 11; a<br>
transport buffer (TB) lla,- a coded data buffer (CDB) 11b; a stream<br>
graphics processor (SGP) 11e; an object buffer 11d; a composition<br>
buffer 11e; a graphics controller llf; an Interactive Graphics plane<br>
12; a presentation graphics decoder 13; a transport buffer (TB) 13a;<br>
a coded data buffer (CDB) 13b; a stream graphics processor (SGP) 13c;<br>
an object buffer 13d; a composition buffer 13e; a graphics controller<br>
13f; a presentation graphics plane 14; a transport buffer 15a; an<br>
elementary buffer 15b; a decoder 15c; a transport buffer 16a; an<br>
elementary buffer 16b; a decoder 16c; a synthesis unit 17 a memory<br>
21; a controller 22; a PSR set 23; a PID conversion unit 24; a<br>
network unit 25; an operation receiving unit 26; and the local<br>
storage 200.<br>
[0122]<br>
The BD-ROM drive la loads/ejects a BD-ROM, and executes access<br>
to the BD-ROM.<br>
The read buffer (RB) lb accumulates Source Packet sequences<br>
read from the J3D-RGM.<br>
The read buffer (RB) lc accumulates Source Packet sequences<br>
read from LastPlay title.<br>
[0123]<br>
63<br><br>
The ATC counter 2a is reset by using an ATS of the Source<br>
Packet located at the beginning of the playback section within Source<br>
Packets constituting Primary TS, and subsequently outputs ATCs to the<br>
source depacketizer 2b.<br>
The source depacketizer 2b takes out TS packets from source<br>
packets constituting Primary TS and sends out the TS packets. At the<br>
sending, the source depacketizer 2b adjusts the time of an input to<br>
the decoder according to an ATS of each TS packet. To be more<br>
specific, at the moment when the value of the ATC generated by the<br>
ATC counter 2a becomes the same as the ATS value of a Source Packet,<br>
the source depacketizer 2b transfers only the TS packet to the PTD<br>
filter 3b at TS_Recording_Rate.<br>
[0124]<br>
The ATC counter 2c is reset by using an ATS of the Source<br>
Packet located at the beginning of the playback section within Source<br>
Packets constituting Secondary TS, and subsequently outputs ATCs to<br>
the source depacketizer 2d.<br>
The source depacketizer 2d takes out TS packets from source<br>
packets constituting Secondary TS and sends out the TS packets. At<br>
the sending, the source depacketizer 2d adjusts the time of an input<br>
to the decoder according to an ATS of each TS packet. To be more<br>
specific, at the moment when the value of the ATC generated by the<br>
ATC counter 2c becomes the same as the ATS value of a Source Packet,<br>
the source depacketizer 2d transfers only the TS packet to the PID<br>
filter 3d at TS_Recording_Rate.<br>
[0125]<br>
The STC counter 3a is reset by a PCR of Primary TS and outputs<br>
an STC.<br>
64<br><br>
The PID filter 3b is a demultiplexing unit for Primary TS and<br>
outputs, among Source Packets output from the source depacketizer 2b,<br>
ones having PID reference values informed by the PID conversion unit<br>
24 to the video decoder 4, the audio decoder 9, the interactive<br>
graphics decoder 11 and the presentation graphics decoder 13.  Each<br>
of the decoders receives elementary streams passed through the PUD<br>
filter 3b and performs from decoding processing to playback<br>
processing according to the PCR of Primary TS (STC1 time axis) . Thus,<br>
the elementary streams input to each decoder after being passed<br>
through the PID filter 3b are subjected to decoding and playback<br>
based on the PCR of Primary TS.<br>
[0126]<br>
The STC counter 3 c is reset by a PCR of Secondary TS and<br>
outputs an STC. The PID filter 3d performs demultiplexing with<br>
reference to this STC.<br>
The PID filter 3d is a demultiplexing unit for the SubClip and<br>
outputs, among Source Packets output from the source depacketizer 2d,<br>
ones having PUD reference values informed by the PID conversion unit<br>
24 to the audio decoder 9, the interactive graphics decoder 11 and<br>
the presentation graphics decoder 13. Thus, the elementary streams<br>
input to each decoder after being passed through the PID filter 3d<br>
are subjected to decoding and playback based on the PCR of Secondary<br>
TS.<br>
[0127]<br>
As described in the explanation of the recording medium above,<br>
In_Time and Out_Time of Playltem correspond to In_Time and Out_Time<br>
of SubPlayltem. Therefore, if the ATC counters 2a and 2c have the<br>
same value (time) and tick at the same speed, time axes of Primary TS<br>
65<br><br>
and Secondary TS become aligned together. As a result, Primary TS<br>
and Secondary TS constituting the Out-of-MUX application can be<br>
handled as a single stream. In addition, the ATC time axes showing<br>
times for data input to the decoder can be synchronized, and also the<br>
STC time axes showing decoder base time can be synchronized.<br>
[0128]<br>
According to the synchronization of ATC time axes, the above-<br>
mentioned two source depacketizers can respectively process Source<br>
Packets read from the RD-RCM and Source Packets read from the local<br>
storage.<br>
The STC counters 3a and 3c have the same time and tick at the<br>
same speed according to the synchronization of STC time axes, and<br>
therefore two TSs can be processed as a single TS. Since the decoder<br>
of the playback apparatus operates on a single STC time axis, the<br>
management of STC time can be standardized in the same manner as when<br>
usual Primary TS-only playback is performed. Being able to cause all<br>
the video decoder 4, IG decoder 11, PG decoder 13, system decoders<br>
15c and 16c, and audio decoder 9 to operate on the same STC time axis<br>
is desirable from the perspective of the development of playback<br>
apparatuses since the control is exact the same as one used on usual<br>
playback apparatuses that perform BD-RCM playback only. Furthermore,<br>
when the authoring is performed, the buffer state can be observed by<br>
controlling the input timing of one TS, whereby facilitating<br>
verification at the authoring stage.<br>
[0129]<br>
The video decoder 4 decodes multiple PES packets output from<br>
the P3D filter 3b, obtains uncompressed pictures and writes the<br>
pictures to the video plane 5.  The video decoder 4 is composed of<br>
66<br><br>
the transport buffer 4a, multiplexed buffer 4b, elementary buffer 4c,<br>
decoder 4d, re-order buffer 4e and switch 4f.<br>
The transport buffer (TB) 4a is a buffer in which TS packets<br>
belonging to a video stream are temporarily accumulated after being<br>
output from the PID filter 3b.<br>
[0130]<br>
The multiplexed buffer (MB) 4b is a buffer in which PES<br>
packets are temporarily accumulated when a video stream is output<br>
from the transport buffer 4a to the elementary buffer 4c.<br>
The elementary buffer (EB) 4c is a buffer in which pictures in<br>
an encoded state (I pictures, B pictures, P pictures) are stored.<br>
[0131]<br>
The decoder (DEC.) 4d obtains multiple frame images by<br>
decoding individual frame images of a video elementary stream for<br>
each predetermined encoding time (DTS) and writes the frame images to<br>
the video plane 5.<br>
The re-order buffer 4e is a buffer used for changing the order<br>
of the decoded pictures so that they are arranged in the order of<br>
display.<br>
[0132]<br>
The switch 4f realizes the order change of the decoded<br>
pictures so that they are arranged in the display order.<br>
The video plane 5 is a plane for storing therein uncompressed<br>
pictures. The plane is a memory area of the playback apparatus for<br>
storing pixel data of a single screen capacity. The resolution of<br>
the video plane 5 is 1920 x 1080, and the picture data stored in the<br>
video plane 5 is composed of pixel data represented by a 16-bit YUV.<br>
[0133]<br>
67<br><br>
The audio decoder 9 is composed of the transport buffer 6,<br>
elementary buffer 7 and decoder 8, and decodes an audio stream.<br>
The transport buffer 6 stores therein TS packets output from<br>
the PID filter 3b in a first-in first-out manner, and sends the TS<br>
packets to the audio decoder 8.<br>
The elementary buffer 7 stores therein, among TS packets<br>
output from the PID filter 3b, only those having PID of an audio<br>
stream to be played back in a first-in first-out manner, and sends<br>
them to the audio decoder 8.<br>
[0134]<br>
The decoder 8 converts TS packets stored in. the transport<br>
buffer 6 into PES packets, decodes the PES packets to obtain<br>
noncompressed audio data in the LPCM state, and outputs the obtained<br>
audio data.<br>
The switch 10a selectively provides TS packets read from the<br>
BD-ROM or TS packets read from the local storage 200 to the video<br>
decoder 4.<br>
[0135]<br>
The switch 10b selectively provides TS packets read from the<br>
BD-ROM or TS packets read from the local storage 200 to the<br>
interactive graphics decoder 11.<br>
The switch 10c selectively provides TS packets read from the<br>
BD-ROM or TS packets read from the local storage 200 to the<br>
presentation graphics decoder 13.<br>
[0136]<br>
The interactive graphics (IG) decoder 11 decodes an IG stream<br>
read from the BD-ROM 100 or the local storage 200 and writes the<br>
noncompressed graphics to the IG plane 12.  The IG decoder 11 is<br>
68<br><br>
composed of the transport buffer (IB) lla, coded data buffer (CDB)<br>
11b,  stream graphics processor  (SGP)  11e,  object buffer 11d,<br>
composition buffer 11e and graphics controller (Ctrl) llf.<br>
[0137]<br>
The transport buffer (TB) lla is a buffer in which TS packets<br>
belonging to an IG stream are temporarily accumulated.<br>
The coded data buffer (CDB) lib is a buffer in which PES<br>
packets constituting an IG stream.<br>
The stream graphics processor (SGP) 11e decodes PES packets<br>
storeing therein graphics data and writes noncompressed bitmap<br>
composed of index colors obtained by the decode processing to the<br>
object buffer 11d as a graphics object.<br>
[0138]<br>
In the object buffer 11d, a graphics object obtained by decode<br>
processing performed by the stream graphics processor 11e is<br>
positioned.<br>
The composition buffer 11e is a memory in which control<br>
information for drawing graphics data is positioned.<br>
The graphics controller (Ctrl) llf decodes control information<br>
positioned in the composition buffer 11e and performs control based<br>
on the result of the decode processing.<br>
[0139]<br>
To the Interactive Graphics (IG) plane 12, uncompressed<br>
graphics obtained by decode processing of the IG decoder 11 are<br>
written.<br>
The presentation graphics (PG) decoder 13 decodes a PG stream<br>
read from a BD-ROM or the local storage 200 and writes the<br>
uncompressed graphics to the presentation graphics plane 14.  The PG<br>
69<br><br>
decoder 13 is composed of the transport buffer (TB) 13a, coded data<br>
buffer (CDB) 13b, stream graphics processor (SGP) 13c, object buffer<br>
(OB) 13d, composition buffer (CB) 13e and graphics controller (Ctrl)<br>
13f.<br>
[0140]<br>
The transport buffer (TB) 13a is a buffer in which TS packets<br>
belonging to a PG stream are temporarily accumulated after being<br>
output from the PH&gt; filter 4.<br>
The coded data buffer (CDB) 13b is a buffer in which PES<br>
packets constituting a PG stream.<br>
The stream graphics processor (SGP) 13c decodes PES packets<br>
(ODS) storeing therein graphics data and writes noncompressed bitmap<br>
composed of index colors obtained by the decode processing to the<br>
object buffer 13d as a graphics object.<br>
[0141]<br>
In the object buffer 13d, a graphics object obtained by decode<br>
processing performed by the stream graphics processor 13c is<br>
positioned.<br>
The composition buffer (CB) 13e is a memory in which control<br>
information (PCS) for drawing graphics data is positioned.<br>
The graphics controller (Ctrl) 13f decodes PCS positioned in<br>
the composition buffer 13e and performs control based on the result<br>
of the decode processing.<br>
[0142]<br>
The Presentation Graphics (PG) plane 14 is a memory having a<br>
single screen capacity area, and is able to store therein<br>
uncompressed graphics of a single screen capacity.<br>
70<br><br>
The system decoder 15 processes system control packets (PAT<br>
and PMT) of Secondary TS and controls the entire decoders.<br>
The transport buffer 15a stores therein system control packets<br>
(PAT and PMT) present in Primary TS.<br>
[0143]<br>
The elementary buffer 15b sends system control packets to the<br>
decoder 15c.<br>
The decoder 15c decodes system control packets stored in the<br>
elementary buffer 15b.<br>
The transport buffer 16a stores therein system control packets<br>
present in Secondary TS.<br>
[0144]<br>
The elementary buffer 16b sends system control packets of<br>
Secondary TS to the decoder 16c.<br>
The decoder 16c decodes system control packets stored in the<br>
elementary buffer 16b.<br>
The memory 21 is a memory for storing therein current PlayList<br>
information and current Clip information.   The current PlayList<br>
information is PlayList information that is currently processed,<br>
among a plurality of pieces of PlayList information stored in the BD-<br>
ROM.   The current Clip information is Clip information that is<br>
currently processed, among a plurality of pieces of Clip information<br>
stored in the ED-ROM/local storage.<br>
[0145]<br>
The controller 22 achieves a playback control of the BD-RCM by<br>
performing PlayList playback (i.e. playback control in accordance<br>
with the current PlayList information) . The controller 22 also<br>
performs the above-mentioned control on the ATS and STC.  In this<br>
71<br><br>
control, the controller 22 performs a prior read operation to read,<br>
in the period of 1 second, in advance Source Packets from the BD-RCM<br>
or the local storage to the buffer of the decorder.  By performing<br>
this prior read operation, prevention of underflow and overflow can<br>
be ensured due to the above-mentioned control of the Window.<br>
[0146]<br>
The PSR set 23 is a register built in the playback apparatus,<br>
and is composed of 64 pieces of Player Setting/Status Registers (PSR)<br>
and 4096 pieces of General Purpose Registers (GPR) . Among the values<br>
(PSR) set in the Player Setting/Status Registers, PSR4 to PSR8 are<br>
used to represent the current playback point.<br>
The PID conversion unit 24 converts audio streams and stream<br>
numbers of the audio streams stored in the PSR set 23 into PID<br>
reference values based on the STN_table, and notifies the PID<br>
reference values of the conversion results to the PUD filters 3b and<br>
3d.<br>
[0147]<br>
The network unit 25 achieves a communication function of the<br>
playback apparatus. When a URL is specified, the communication unit<br>
25 establishes a TCP connection or an FTP connection with a web site<br>
of the specified URL. The establishment of such a connection allows<br>
for downloading from web sites.<br>
The operation receiving unit 26 receives specification of an<br>
operation made by a user on the remote controller, and notifies User<br>
Operation information, which indicates the operation specified by the<br>
user, to the controller 22.<br>
[0148]<br>
72<br><br>
Thus concludes the description of the internal structure of<br>
the playback apparatus. The following describes implementation of<br>
the controller 22 on the playback appratus. The controller 22 can be<br>
implemented on the playback apparatus by creating a program which<br>
causes the CPU to perform the process procedure of the flowcharts<br>
shown in FIGs. 31 and 32, writing the program to an instruction RCM<br>
and sending it to the CPU.<br>
FIG. 31 is a flowchart showing a playback procedure based on<br>
PlayList information. The flowchart shows a loop structure in which<br>
a mpls file structuring the PlayList information is read in (Step<br>
Sll) , a Playltem at the beginning of the PlayList information is set<br>
as the current Playltem (Step S12) , and Steps S13 to S25 are repeated<br>
for the current Playltem. This loop structure has Step S23 as an<br>
ending condition. The BD-RCM drive is instructed to read Access<br>
Units starting with one corresponding to In_Time and ending with one<br>
corresponding to Out_Time of the current Playltem (Step S13). A<br>
judgment is made whether the previous Playltem is present in the<br>
current Playltem (Step S14) . Step S15 or Steps S16 to S21 is<br>
selectively executed according to the judgment result. To be more<br>
specific, if the current Playltem does not have the previous Playltem<br>
(Step S14: NO), the decoder is instructed to perform playback of the<br>
PlayItem_In_Time to the PlayItem_Out_Time (Step S15).<br>
[0149]<br>
If the current Playltem has the previous Playltem (Step S14:<br>
YES), a judgment is made whether the current Playltem is CC = 5 (Step<br>
S16) . When CC = 5 (Step S16: YES), the processing of Steps S17 to<br>
S20 is carried out.<br>
When the previous Playltem above is present, an ATC_Sequence<br>
73<br><br>
in the MainClip is switched. For the switch of the ATC_Sequence, an<br>
offset value for Primary TS, called ATCjdeltal, is calculated (Step<br>
S17) . An ATC value (ATC2) for a new ATC_Sequence is obtained by-<br>
adding the ATCjdeltal to an ATC value (ATC1) of the original<br>
ATC_Sequence (Step S18).<br>
[0150]<br>
In addition, when the previous Playltem above is present, an<br>
STC_Bequence in Primary TS is switched. For the switch of the<br>
STC_Sequence, an offset value called STC_deltal is calculated (Step<br>
S19) . An STC value (STC2) of a new STC_Sequence is obtained by<br>
adding the STCjdeltal to an STC value of the original STC_Sequence<br>
(Step S20).<br>
After the audio decoder 9 is instructed to mute the Audio<br>
Overlap, and the decoder is instructed to perform playback from the<br>
PlayItem_In_Time to the PlayItem_Out_Time (Step S21) . When the<br>
current Playltem is not CC = 5, the processing of CC = 1 and CC = 6<br>
is performed.<br>
[0151]<br>
After either one of the processing of Step S15 and the<br>
processing of Steps S16 to S21 is carried out, the processing of Step<br>
S25 is executed. Step S25 is a process of checking whether there is<br>
SubPlayltem to be synchronously played back with the current Playltem.<br>
Here, each SubPlayltem constituting the SubPath information has<br>
information called Sync_PlayItem_Id, and Sync_PlayItem_Id of a<br>
SubPlayltem to be synchronously played back with the current Playltem<br>
is set to this current Playltem. Therefore, in Step S25, a check is<br>
made whether a SubPlayltem whose Sync_PlayItem_Id has been set to the<br>
current Playltem is present in multiple SubPlayltems constituting the<br>
74<br><br>
SubPath information.<br>
[0152]<br>
If no such a SubPlayltem is present, the process moves to Step<br>
S22. In Step 22, a judgment is made whether the current playback<br>
time (Current PTM (Presentation TiMe)) on the AVClip time axis<br>
reaches Out_Time of the current Playltem (Step S22) . If it has<br>
reached, the process moves to Step S23. In Step S23, a judgment is<br>
made whether the current Playltem is the last Playltem of the<br>
PlayList information. If it is not the last Playltem, the next<br>
Playltem in the PlayList Information is set as the current Playltem<br>
(Step S24), and the process moves to Step S13. In this way, the<br>
processing of Steps S13-S24 is performed on all Playlterns in the<br>
PlayList information.<br>
[0153]<br>
FIG. 32 is a flowchart showing a processing procedure of a<br>
seamless connection of SubPlayltems.<br>
When it is determined in Step S25 that a SubPlayltem whose<br>
Sync_PlayItem_Id has been set to the current Playltem is present, the<br>
SubPlayltem is set as the current SubPlayltem (Step S31) . Then, the<br>
local storage 200 is instructed to output Access Units starting with<br>
one corresponding to In_Time of the SubPlayltem and ending with one<br>
corresponding to Out_Time (Step S32) . Then, a judgment is made<br>
whether the previous SubPlayltem is present in the current Playltem<br>
(Step S33) , and one of Step S34, Step S35, and Steps S36-S41 is<br>
selectively executed according to the judgment result. To be more<br>
specific, if the previous SubPlayltem is not present in the current<br>
Playltem (Step S33: No), it is waited until the current PTM reaches<br>
Sync_Start_Pts_of_PlayItem (Step S34) .  When the current PTM has<br>
75<br><br>
reached  it,  the  decoder  is  instructed to play back  from<br>
SubPlayItem_In_Time to SubPlayItem_Out_Time (Step S35) .<br>
[0154]<br>
When the previous SubPlayltem is present in the current<br>
PlayItern (Step S3 3: Yes), a judgment is made whether the current<br>
Playltem is SP_CC = 5 (Step S36) . When it is SP_CC = 5 (Step S36:<br>
Yes), the processing of Steps S37-S41 is carried out.<br>
When the current Playltem has a previous SubPlayltem, the<br>
ATCjSequence is switched. For the switch of the ATC_Sequence, an<br>
offset value for Secondary TS, called ATC_delta2, is calculated (Step<br>
S37) , and obtains an ATC value (ATC2) for a new ATC_Sequence by<br>
adding the ATC_delta 1 to an ATC value (ATC1) of the original<br>
ATC_Sequence (Step S38).<br>
[0155]<br>
The ATC_delta means an offset value representing an offset<br>
from the input time point Tl of the last TS packet of a transport<br>
stream (TS1) that has been originally read out to the input time<br>
point T2 of the last TS packet of a transport stream (TS2) that has<br>
been newly read out. The ATC_delta satisfies "ATC_delta &gt;<br>
Nl/TS_recording_rate", where Nl is the count of TS packets following<br>
the last video PES packet of the TS1.<br>
[0156]<br>
In addition, when the previous Playltem above is present, an<br>
STC_Sequence is switched.   For the switch of the STC_Sequence,<br>
STC_delta2 is calculated (Step S39), and an STC value (STC2) of a new<br>
STC_Sequence is obtained by adding the STC_delta2 to an STC value of<br>
the original STC_Sequence (Step S40).<br>
Assume that the display start time of a picture lastly played<br>
76<br><br>
in the preceding STC_Sequence is PTSl(lstEND), the display time<br>
period of the picture is TPP, and the start time of a picture<br>
initially displayed in the following STC_Sequence is PTS2 (2ndSTART) .<br>
Here, for CC = 5, since it is necessary to match the time of<br>
PTSl(lstEND) + TPP with the time of PTS2 (2ndSTART), the STC_delta2<br>
can be calculated from the following equation:<br>
STC_delta2 = PTSl(lstEND) + TPP - PTS2(2ndSTART).<br>
After the audio decoder 9 is instructed to mute the Audio<br>
Overlap, the decoder is instructed to play back from PlayItem_In_Time<br>
to PlayItem_Out_Time (Step S41).<br>
[0157]<br>
The controller 22 performs the STC switch process as described<br>
above, and this process is performed in a playback apparatus with<br>
general implementation when the decoder is in a free-run state. The<br>
free-run state means the state where the decoder is not performing<br>
synchronous control. Subsequently, when the STC returns to the<br>
condition where the STC time axis can be set, the decoder makes the<br>
transition from the free-run state to synchronous control with the<br>
STC. On the other hand, when the current Playltem is judged not<br>
being CC = 5 in Step S36 (Step S36: NO) , the processing of CC = 1 and<br>
CC = 6 is performed.<br>
[0158]<br>
Thus, according to the present embodiment, the transmittable<br>
amount called Window is limited to 48 Mbits/second or less.<br>
Therefore, if TS packets with a size of ,96 Mbits x 0.5 seconds are<br>
read to the decoder in advance, the buffer of the decoder will not<br>
cause underflow or overflow even when the transmittable amount<br>
locally reaches 96 Mbits within a period of 1 second. Since the data<br>
77<br><br>
amount is "96 Mbits x 0.5 seconds" or less at any period of time in a<br>
digital stream and TS packets can be supplied without underflow or<br>
overflow, loss of video and audio can be prevented. This eliminates<br>
the risk that simultaneous readout to realize the Out-of-MUX<br>
framework has an influence on the quality of the digital stream.<br>
[0159]<br>
In addition, if In_Time and Out_Time of a Playltem and In_Time<br>
and Out_Time of a SubPlayltem match each other and the connection<br>
state of Playltems is CC = 5, the connection state of SubPlaylterns<br>
becomes SP_CC = 5. Therefore, when a Playltem is switched, the<br>
switch from the Playltem to another Playltem and a switch from a<br>
SubPlayltem to another SubPlayltem can be performed simultaneously<br>
without reset of the demultiplexing units. Thus, while STC time axes<br>
to which the demultiplexing units refer are made to synchronize to<br>
each other, the playback process based on PlayList information can be<br>
proceeded.<br>
[0160]<br>
EMBODIMENT 2<br>
In the present embodiment, the production of the BD-ROM of the<br>
previous embodiment is described in detail. The BD-ROM of the<br>
previous embodiment can be produced by sequentially performing the<br>
following processes.<br><recording process of bd-r0m><br>
First, an outline with which the BD-ROM is played back is<br>
planned (Planning Process) , materials such as moving image records<br>
and audio records are created (Material Production Process), and<br>
volume configuration information is created based on the outline<br>
created in the planning process (Senario Production Process) .<br>
78<br><br>
[0161]<br>
The volume configuration information is information indicating<br>
a format of the application layer on the optical disk using an<br>
abstract description.<br>
Subseuently,  each of video materials,  audio materials,<br>
subtitle materials, and menu materials is encoded to thereby create<br>
elementary streams (Material Encoding Process).   Then, multiple<br>
elementary streams are multiplexed (Multiplexing Process).<br>
[0162]<br>
Then, an operation is carried out to fit the multiplexed<br>
streams and the volume configuration information into the format of<br>
the application layer of the BD-ROM, and the entire data (generally<br>
called the "volume data") to be recorded in the volume area of the<br>
BD-ROM is obtained (Formatting Process) .<br>
Instances of a class structure described in a programming<br>
language are the format of the application layer of the recording<br>
medium according to the present invention.   Clip information,<br>
PlayList information and the like can be created by describing<br>
instances of the class structure based on syntaxes specified in the<br>
BD-RCM standard. In this case, data in a table format can be defiend<br>
using "for" statements of a programming language, and data required<br>
under specific conditions can be defined using "if" statements.<br>
[0163]<br>
When the volume data is obtained after such a fitting process,<br>
the volume data is played back  to see whether the result of the<br>
scenario production process is correct (Emulation Process). In the<br>
emulation process, it is desirable to conduct a simulation of the<br>
buffer state of the BD-ROM player model.<br>
79<br><br>
Lastly, a press process is carried out.  In this press process,<br>
volume images are converted into physical data sequences, and master<br>
disk cutting is conducted by using the physical data sequences to<br>
create a master disk.  Then, ED-ROMs are produced from a master<br>
created by a press apparatus.  The production is composed of various<br>
processes,  mainly including substrate molding,  reflective film<br>
coating, protective film coating, laminating and printing a label.<br>
[0164]<br>
By completing these processes, the recording medium (BD-ROM)<br>
described in the embodiment above can be created.<br><additional content creating process><br>
When a motion picture is composed of BD-ROM contents and<br>
additional contents, the above-mentioned planning process to<br>
formatting process are carried out. Then, AVClips, Clip information<br>
and PlayList information making up one piece of volume data are<br>
obtained. Ones which will be provided by the BD-ROM are removed from<br>
the obtained AVClips, Clip information and PlayList information, and<br>
the remaining information is assembled into one file as additional<br>
contents by an archiver program or the like. When such additional<br>
contents are obtained after these processes, the additional contents<br>
are provided to a www server and sent to playback apparatuses upon<br>
request.<br>
[0165]<br>
The verification described in the above embodiment is<br>
conducted when AVClips, Clip information and PlayList information are<br>
completed and elementary streams to be played back are determined by<br>
the STN table in the PlayList information—i.e. in the formatting<br>
80<br><br>
process.  The following explains an authoring system that creates<br>
such application format.<br><authoring system><br>
FIG. 33 shows an internal structure of an authoring system of<br>
Embodiment 2. As shown in the figure, the authoring system is<br>
composed of: an input apparatus 51; an encode apparatus 52; a sever<br>
apparatus 53; a material storage 54; a BD configuration information<br>
storage 55; client apparatuses 56-58; a multiplexer 60; a BD scenario<br>
converter 61; a formatter 62; and a verifier 63.<br>
[0166]<br>
On the input apparatus 51, a videocassette on which HD images<br>
and SD images are recorded is mounted, and then the input apparatus<br>
51 plays the videocassette back and outputs playback signals to the<br>
encode apparatus 52.<br>
The encode apparatus 52 encodes the playback signals output<br>
from the input apparatus 51 to thereby obtain elementary streams such<br>
as video streams and audio streams. The elementary streams obtained<br>
in this way are output to the server apparatus 53 via a IAN and<br>
written to the material storage 54 in the server apparatus 53.<br>
[0167]<br>
The server apparatus 53 is composed of two drive devices, the<br>
material storage 54 and the BD configuration information storage 55.<br>
The material storage 54 is a built-in disk apparatus of the<br>
server apparatus 53, and sequentially stores therein elementary<br>
streams obtained by the encoding operations by the eoncode apparatus<br>
52. The material storage 54 has two directories, an HD stream<br>
directory and an SD stream directory. Elementary streams obtained by<br>
encoding HD images are written to the HD stream directory.<br>
81<br><br>
[0168]<br>
The ED configuration information storage 55 is a drive device<br>
in which the BD volume configuration information is sotred.<br>
The multiplexer 60 reads, among elementary streams stored in<br>
the HD stream directory and the SD stream directory in the material<br>
storage 54, ones specified in the BD volume configuration information,<br>
and then multiplexes the read elementary streams according to the BD<br>
volume configuration information to thereby obtain a multiplexed<br>
stream, i.e. an AVClip.<br>
[0169]<br>
The BD scenario converter 61 obtains a BD scenario by<br>
converting the BD volume configuration information sotred in the BD<br>
configuration information storage 55 into the BD-ROM application<br>
format.<br>
The formatter 62 adapts the Clip obtained by the multiplexer<br>
60 and the BD scenario obtained by the BD scenario converter 61 to<br>
the format of the application layer on the BD-ROM. Herewith, a<br>
master of the BD-ROM and contents for downloading which are to be<br>
stored in the local storage can be obtained from the adapted BD<br>
scenario.<br>
[0170]<br>
The verification unit 63 judges, by referring to the STN_table<br>
in the PlayList information generated by the scenario converter 61,<br>
whether Primary TSs for the BD-ROM and Secondary TSs for the local<br>
storage obtained by the multiplexer 60 satisfy the restrictions for<br>
realizing the Out_of_MUX application.<br>
82<br><br>
Thus concludes the internal structure of the authoring system.<br>
The following explains the implementation of the verification unit 63<br>
of the authoring system.<br>
[0171]<br><process procedure for implementing verification unit><br>
The verification unit 63 can be implemented in the authoring<br>
system by creating a program Which causes the CPU to perform the<br>
process procedures of the flowcharts shown in FIGs. 34 and 35,<br>
writing the program to an instruction ROM and sending it to the CPU.<br>
FIG. 34 is a flowchart showing the verification procedure on<br>
Primary TSs and Secondary TSs. The flowchart shows that an ATS of<br>
the first Source Packet in the Source Packet sequence is set as<br>
In_Time of the current Window in Step SI and the processes of Steps<br>
S2 to S7 are repeated. The loop structure repeats the following<br>
Steps S2 to S5 until the judgment in Step S6 becomes Yes: an ATS<br>
appearing after 1 second from the In_Time of the current Window is<br>
set as the Out_Time of the current Window (Step S2) ; TS packets<br>
present between the In_Time and the Out_Time of the current window are<br>
counted (Step S3); a bit count of the current Window is calculated<br>
from the In_Time (Step S4) ; and a judgment is made whether the bit<br>
value is 48 Mbits or less (Step S5) .  Step S6 is a judgment whether<br>
the Out_Time of the current Window has reached the last Source Packet<br>
on the ATC time axis. If Step S6 is No, the next ATS in the Source<br>
Packet sequence is set to the In_Time of the current Window (Step S7),<br>
and Steps S2-S6 are repeated. If, with any Window, Step S5 is No, it<br>
is determined that there is a violation of the BD-RCM standardization<br>
(Step S9) .  When Step S5 is Yes for all Windwos, and then Step S6 is<br>
83<br><br>
Yes, it is determined that the Primary TSs and Secondary TSs comply<br>
with the ED-ROM standard (Step S8) .<br>
[0172]<br>
Since Primary TSs and Secondary TSs have been subject to the<br>
verification process, the above-mentioned restrictions are always<br>
satisfied even when Primary TSs and Secondary TSs are supplied from<br>
the ED-ROM and the local storage, respectively.<br>
As to the video streams, audio streams, PG streams and IG<br>
streams, if there are multiple elementary streams of the same type,<br>
it is desirable to conduct the verification according to the<br>
procedure shown in FIG. 35.  In the verification procedure of FIG. 35,<br>
Steps S3 and S4 of FIG. 34 are replaced with Steps S81-S83.<br>
[0173]<br>
Steps S81-S83 are that: regarding TS packets belonging to the<br>
current Window, from among TS packets making up elementary streams<br>
that are allowed in the STN_table to be played back, the bit rate is<br>
calculated for each elementary stream each time one current Window is<br>
determined (Step S81) ; for each type of streams—i.e. multiple video<br>
streams, multiple audio streams, multiple PG streams and multiple IG<br>
streams, one having the highest calculated bit rate is selected (Step<br>
S82) ; the highest bit rate of the video stream, the highest bit rate<br>
of the audio stream, the highest bit rate of the PG stream, and the<br>
highest bit rate of the IG stream are summed (Step S83) ; and a<br>
judgment is made whether the sum total is 48 Mbits or less (Step S5).<br>
[0174]<br>
In the Out_of_MUX application, an elementary stream is always<br>
solely and exclusively selected among the same type of elementary<br>
84<br><br>
streams, and therefore it is more reasonable that the verification is<br>
conducted in the above-mentioned procedure.<br>
Regarding the verification, it is effective to check locations<br>
with locally high bit rates, i.e. bit values of locations at which<br>
local peaks appear.  The locations where local peaks appear are as<br>
follows.<br>
[0175]<br>
(1)	the beginning of TS packet indicated by In_Time of the<br>
Window;<br>
(2)	the end of TS packet indicated by In_Time of the Window;<br>
(3)	the beginning of TS packet indicated by Out_Time of the<br>
Window; and<br>
(4)	the end of TS packet indicated by Out_Time of the Window.<br>
The verification process in the authoring can be more<br>
simplified by specifically focusing on the bit amounts of these<br>
locations.<br>
[0176]<br>
Thus, according to the present embodiment, when an STN_table<br>
which allows playback of Secondary TSs is created, it can be verified<br>
in advance when the authoring is performed whether underflow or<br>
overflow would be caused in the playback process based on the<br>
STN_table.<br>
EMBODIMENT 3<br>
In the present envodiment, a new type of CC = 6 is provided as<br>
to the connection between Playltems and between SubPlayltems.<br>
[0177]<br>
CC = 6 specifies a connection state among multiple pieces of<br>
PlayItern information constituting Progressive PlayList information.<br>
85<br><br>
The Progressive PlayList information is PlayList information used for<br>
specifying, as one playback path, multiple AVClips for streaming<br>
playback.<br><progressive playlist information></progressive>
The Progressive PlayList information has an advantage of<br>
making the cache size smaller or being able to start playback without<br>
waiting for all files to be downloaded, by dividing Secondary TSs for<br>
downloading/streaming into piecemeal files.<br>
[0178]<br>
Since contents allowing for streaming transfer are specified<br>
by many short AVClips, the Progressive PlayList information is<br>
composed of many pieces of Playltem information, each of which<br>
corresponds to a different one of the multiple AVClips. On the other<br>
hand, the AVClips divided into small units have been divided for<br>
streaming transfer, and therefore discontinuity is not present in STC<br>
and ATC. Accordingly, such a connection state between AVClips must<br>
be specified as a different state from CC = 5. This type of<br>
connection state is specified as CC = 6.<br><conditions to be satisfied when cc="6"><br>
When CC = 6, TS1 and TS2 specified by two Playltems and TS1<br>
and TS2 specified by two SubPlayltems must satisfy the following<br>
conditions.<br>
[0179]<br>
1)	A video stream of TS2 has to start with a GOP.<br>
2)	There is no gap, in an Audio Presentation Unit sequence, at<br>
the connection point between the audio stream of TS2 and the audio<br>
stream of TS1 having the same PUD as that of the audio stream of TS2.<br>
86<br><br>
The audio stream of TS1 may finish as an incomplete audio<br>
stream. Then, the audio stream of TS2 having the same PID as TS1 may<br>
start with an incomplete Audio Presentation Unit. By playing back<br>
these TS1 and TS2 based on multiple Playltems and multiple<br>
SubPlaylterns, one complete Audio Presentation Unit can be obtained<br>
from two Audio Presentation Units.<br>
[0180]<br>
In the case of CC = 6, the stream is actually continuous.<br>
Therefore, all elementary streams are connected seamlessly unlike the<br>
case of CC = 5 where the video is only semelessly connected while the<br>
audio is connected in a discontinuous manner or set to mute.<br>
Thus, CC = 6 means a divisional boundary created when a<br>
logically continuous stream is divided into multiple parts according<br>
to the purpose of streaming transfer. Note that, since a stream to<br>
be recorded on the BD-ROM has to be composed of 32 Source Packets,<br>
one stream file forming one SubPlayltem needs to be multiples of 6<br>
Kbytes.<br>
[0181]<br><details of cc="6"><br>
FIG. 36 shows a detailed explanation of CC = 6. Level 1 shows<br>
a file (20000.m2ts) having a single continuous ATC/STC time series<br>
and the encoding method does not change.  Level 2 shows three files<br>
(20001.m2ts, 20002.m2t and 20003.m2ts) storing therein three streams.<br>
These three files store therein three Primary TSs that have been<br>
obtained by dividing the single stream of Level 1 in units of Aligned<br>
Units (6 Kbytes).<br>
[0182]<br>
87<br><br>
FIG. 37 shows a correlation between Playlterns and SubPlaylterns.<br>
Level 1 shows three Playlterns (Playltem information #1, Playltem<br>
information #2 and Playltem information #3) in PlayList information.<br>
These three Playltems specify a Primary TS, and the connection<br>
between Playltem information #1 and #2 is set to CC = 1 while the<br>
connection between Playltem information #2 and #3 is set to CC = 5.<br>
Level 2 shows three SubPlayl terns (SubPlayl tern #1, SubPlayl tern #2 and<br>
SubPlayltern #3) in PlayList information.  These three SubPlaylterns<br>
specify a Secondary TS, and the connection between SubPlayltems #1<br>
and #2 is set to CC = 1 while the connection between SubPlayltems #2<br>
and #3 is set to CC =5. Level 3 shows nine SubPlayltems (SubPlayltem<br>
#1, SubPlayltem #2, SubPlayltem #3 to SubPlayltem #9) in the<br>
Progressive PlayList information.  These nine SubPlayltems specify a<br>
Secondary TS. Here, the connection between SubPlayltems #3 and #4 is<br>
set to CC = 1, the connection between SubPlayltems #6 and #7 is set<br>
to CC = 5, and the remaining connections are set to CC = 6.<br>
SubPlayltems in the Progressive PlayList are generally connected with<br>
CC = 6; however, when Playltems are connected with CC = 1 and CC =5,<br>
SubPlayltems are also connected satisfying the condition of CC = 1<br>
and CC = 5, respecitively, like the Playltems.<br>
[0183]<br>
Thus, the present embodiment introduces the new connection<br>
state of CC = 6 for Playltems and SubPlayltems, whereby realizing a<br>
process of dividing AVClips constituting the Progressive PlayList<br>
information into small sections and providing them by means of a<br>
streaming transfer.<br>
EMBODIMENT 4<br>
88<br><br>
In Embodiment 1, how to limit the bit amount for each Window<br>
is explained;  the present embodiment presents how to perform<br>
multiplexing to satisfy such restrictions.<br>
[0184]<br><multiplexing of video and audio></multiplexing>
FIG. 38 schematically shows, in the case where audio<br>
constituting a Primary TS is replaced with audio constituting a<br>
Secondary TS, how multiple TS packets constituting the Primary TS and<br>
multiple TS packets constituting the Secondary TS are multiplexed<br>
together.<br>
FIG. 38 schematicall shows the way multiple TS packets present<br>
on the ATC time axis are multiplexed together. Level 1 shows a<br>
Primary TS. The Primary TS is composed of TS packets storeing<br>
therein V, Al and A2 (one set of video and two sets of audio) . These<br>
TS packets are obtained by multiplexing these three elementary<br>
streams of two types together.<br>
[0185]<br>
Level 2 shows a Secondary TS. The secondary TS is composed of<br>
TS packets storing therein two sets of audio A3 and A4. A time<br>
period p3 during which these TS packets of the Secondary TS are<br>
multiplexed is, on the ATC time axis indicating input timings to the<br>
decoder, made up of a time period p1 during which audio packets of<br>
the Primary TS are multiplexed and a time period p2 during which TS<br>
packets constituting the Primary TS are not being transferred.<br>
[0186]<br>
By multiplexing the streams in this way, it can be make sure<br>
that the sum total of the bit rate of elementary streams to be<br>
decoded does not exceed the allowable maximum bit rate of Primary TS<br>
89<br><br>
(48 Mbps) no natter which elementary stream is selected for each type<br>
of the elementary streams.  The example shown in FIG. 38 is a<br>
simplest case in which the Secondary TS includes only audio.<br><multiplexing of video audio pg and ig streams><br>
FIG. 39 schematically shows, in the case where a subtitle (PG<br>
stream) and a menu (IG stream) are also replaced in addition to the<br>
audio, the way multiple TS packets constituting the Primary TS and<br>
multiple TS packets constituting the Secondary TS are multiplexed<br>
together.<br>
[0187]<br>
In the figure, a time period k3 during which packets of the<br>
Secondary TS are transferred is the sum total of:<br>
1)	a time period kl during which a packet whose type is the<br>
same as in the Primary TS is transferred; and<br>
2)	a time period during which the Primary TS is not being<br>
transferred.<br>
The above rules 1) and 2) are applied in the same manner to<br>
other types of streams (Video, IG, PG and the like) stored in the<br>
Secondary TS. Therefore, it is efficient if, for each stream, a<br>
judgment is first made whether the stream can be multiplexed into the<br>
Secondary TS during the time period when a packet whose type is the<br>
same as in the Primary TS is transferred, and when the judgment is<br>
negative, multiplexing is performed in the time period during which<br>
no Primary TS is being transferred.<br>
[0188]<br><process of multiplexer><br>
The following specifically describes the process of the<br>
multiplexer 60 of the present embodiment.<br>
90<br><br>
To realize the multiplexing described above, the multiplexer<br>
60 simulates, according to a decoder model, the state of the buffer<br>
entered when a Primary TS is played back, and finds a time period for<br>
transferring each packet of the Primary TS and a time period for no<br>
Primary TS being transferred. After finding these time periods, the<br>
multiplexer 60 converts each PES packet constituting the Secondary TS<br>
into TS packets so that each of the PES packets is transferred during<br>
the time period when a packet whose type is the same as in the<br>
Primary TS is transferred or during the time period when the Primary<br>
TS is not being transferred, and attaches an ATS to each TS packet.<br>
Since an ATS attached in this way indicates the time period when a<br>
packet whose type is the same as in the Primary TS is transferred or<br>
the time period when the Primary TS is not being transferred, each<br>
PES packet constituting the Secondary TS is sent to the decoder<br>
during the time period when a packet whose type is the same as in the<br>
Primary TS is transferred or the time period when the Primary TS is<br>
not being transferred, as shown in FIG. 39.<br>
[0189]<br><supply by dvd><br>
In the case when elementary streams supplied from the local<br>
storage are made not in the transport stream format but in the<br>
program stream format, the multiplexer 60 converts PES packets<br>
constituting the elementary streams into packs, and an SCR (System<br>
Clock Reference) is attached to the TS header of each pack. An SCR<br>
attached in this way also indicates, like an ATS, the time period<br>
when a packet whose type is the same as in the Primary TS is<br>
transferred or the time period when the Primary TS is not being<br>
transferred.  Therefore, each PES packet constituting a Secondary PS<br>
91<br><br>
(a program stream supplied from the local storage) is sent to the<br>
decoder during the time period when a packet whose type is the same<br>
as in the Primary PS (a program stream supplied from the BD-ROM) or<br>
the time period when the Primary TS is not being transferred, as<br>
shown in FIG. 39. In the case when elementary streams supplied from<br>
the local storage are made in the program stream format, the time<br>
period when a packet whose type is the same as in the Primary TS is<br>
transferred or the time period when the Primary TS is not being<br>
transferred are expressed in large units of time, pack (PES packet) .<br>
Therefore, burden when the authoring is performed is significantly<br>
less, which facilitates the Out_of_MQX application to be realized.<br>
This is an advantage when the Out_of_MUX application is realized on a<br>
DVD playback apparatus.<br>
[0190]<br>
Thus, the present embodiment performs multiplexing by<br>
selecting, as input periods for packets constituting the Secondary TS,<br>
the time period when a packet whose type is the same as in the<br>
Primary TS is transferred or the time period when the Primary TS is<br>
not being transferred. This facilitates the restriction of the bit<br>
amount shown in Embodiment 1 to be satisfied. Realizing such<br>
multiplexing on the authoring system of Embodiment 2 makes it easier<br>
to produce a movie performing the Out_of_MUX application. Herewith, a<br>
guarantee of no occurrence of an overflow during the playback can be<br>
easily realized when the authoring is performed.<br>
EMBODIMENT 5<br>
In the present embodiment, an audio mixing application is<br>
explained in detail. This application includes an exception to the<br>
Out_of_MUX rule of selecting only one elementary stream for each type.<br>
92<br><br>
That is, the audio mixing application simultaneously selects an audio<br>
stream for the Primary TS and an audio stream for the Secondary TS at<br>
the same time, and decodes two audios, an audio of the Primary TS and<br>
an audio of the Secondary TS, at the same time.<br>
[0191]<br>
FIG. 40 shows the way a Primary TS and a Secondary TS<br>
constituting the audio mixing application are supplied to the decoder<br>
in the ED-ROM playback apparatus. In the figure, among the internal<br>
structural components of the BD-ROM playback apparatus, a BD-ROM<br>
drive la, the local storage 200 and a network unit 25 are shown on<br>
the left side while the respective decoders are shown on the right<br>
side. A PID Filter that performs stream demultiplexing is shown in<br>
the center.   Primary TS (Video 1, Audio 1 (English) , Audio 2<br>
(Spanish), PG 1 (English Subtitle), IG 1 (English Menu)) and the<br>
Secondary TS (Audio 3 (Commentary) , PG 2 (Japanese Subtitle), PG 3<br>
(Korean Subtitle) , PG 4 (Chinese Subtitle) , IG 2 (English Menu)) in<br>
the figure are transport streams supplied from the BD-ROM and the<br>
local strage, respectively. Since only English (Audio 1) and Spanish<br>
(Audio 2) are recorded on the disk, the commentary of the movie<br>
director cannot be selected on the disk. However, by downloading, to<br>
the local storage, the Secondary TS which includes Audio 3 provided<br>
by the content provider, the English audio (Audio 1) and Audio 3<br>
(Commentary) can be sent to the decoder. Then, the decoder mixes the<br>
English audio (Audio 1) and Audio 3 (Commentary) and outputs the<br>
result, which allows the user to play back, together with the video<br>
(Video 1), the English audio to which the commentary is attached.<br>
[0192]<br>
93<br><br>
Here, the only difference from the Out_of_MUX application is<br>
decoding two audio streams at the same time. With any Primary TS,<br>
the case may occure where a directory's commentary audio, for example,<br>
is desired to be added after the release of the disk. Accordingly, a<br>
restriction on the bit rate of the Primary TS is not preferable, and<br>
therefore a restriction on the Secondary TS is introduced as in the<br>
case of the Out_of_MUX application.  Since the audio mixing needs to<br>
decode an audio in addition to each elementary stream (a video, an<br>
audio, a subtitle and a menu), two recources to the audio decoder are<br>
necessary.<br>
[0193]<br><structures of primary and secondary audio streams><br>
In the realization of the audio mixing application, an audio<br>
stream that will belong to a Primary TS is referred to as a primary<br>
audio stream while an audio stream that will belong to a Secondary TS<br>
is referred to as a secondary audio stream. The following describes<br>
such primary and secondary audio streams.<br>
[0194]<br>
There are 32 primary audio streams, each of which has a<br>
different PTD from among 0x1100 to OxlllF. On the other hand,<br>
similar to the primary streams, there are 32 secondary audio streams,<br>
each of which has a different PTD from among OxlAOO to OxlAlF.<br>
The difference of the secondary audio streams from the primary<br>
audio streams is that audio frames of the secondary audio streams<br>
include metadata made up of "downmixing information" and "gain<br>
control information".<br>
[0195]<br>
94<br><br>
The Mownmixing information" is information for downnrbcing.<br>
Downmixing is a conversion that reduces the number of the audio<br>
playback channels less than the number of the encoded channels. The<br>
downmbcing information specifies a conversion factor matrix for<br>
downmixing, and thereby causes the playback apparatus to perform<br>
downmixing. Playing back a 5.1 ch audio stream after converting it<br>
into a 2 ch audio stream is one example of downmixing.<br>
[0196]<br>
The "gain control information" is information for increasing<br>
or decreasing a gain of the audio output of a primary audio stream;<br>
however, the gain control information here only has to decrease the<br>
gain. Thus, the metadata of a secondary audio stream is able to<br>
decrease, in real time, the output of a primary audio stream which is<br>
played back with the secondary audio stream at the same time. In the<br>
case of superimposing a Secondary audio onto a Primary audio, since a<br>
pair of a Primary audio and a Secondary audio to be mixed is known in<br>
advance, there is no need to control the gain of the two audios in<br>
real time. In this case, mixing (superposition) can be realized well<br>
by only reducing the gain of the Primary audio while keeping the gain<br>
of the Secondary audio unchanged. By providing such metadata, it is<br>
possible to avoid occurrence of adding up the output sound volume of<br>
the primary audio stream playback and the output sound volume of the<br>
secondary audio stream playback and, in this way, damaging the<br>
speakers. Thus concludes the audio streams of the present embodiment.<br>
Improvements of the PlayList information of the present embodiment<br>
are described next.<br>
[0197]<br><stn_table for realizing audio mixing application></stn_table>
95<br><br>
Elementary streams of the same type are to be decoded by the<br>
decoder at the same time, and therefore regarding the PlayList<br>
information of the present embodiment, multiple primary audio streams<br>
and multiple secondary audio streams allowed to be played back are<br>
shown in the STN__table of each Playltem.<br>
[0198]<br>
The following describes the STN_table of the present<br>
embodiment. To realize the audio mixing application, pairs of<br>
Stream_entry and Stream_attribute in the secondary audio streams are<br>
present in STN_table in addition to pairs of Stream_entry and<br>
Stream_attribute in the primary audio streams. Each pair of<br>
Stream_entry and Stream_attribute in the secondary audio streams is<br>
associated with Canb_info_Secondary_audio_Primary_audio.<br>
[0199]<br>
(Comb_inf o_Secondary_audio_Primary_audio)<br>
Corib_info_Secondary_audio_Primary_audio uniquely specifies one<br>
or more primary audio streams with which the playback output of the<br>
secondary audio stream can be mixed. This allows for, when the<br>
authoring is performed, making a setting of the necessity of mixing<br>
according to the audio attribute so that, for example, a secondary<br>
audio stream is not mixed when a primary audio stream having a<br>
predetermined attribute is to be played back while a secondary audio<br>
stream is mixed when a primary audio stream having an attribute other<br>
than the predetermined attribute is to be played back.<br>
[0200]<br>
(sp_connection_condition Information)<br>
In   PlayList   information,   the   same   value   as<br>
connection_condition information of the Playltem information is set<br>
96<br><br>
for sp_connection_condition information of a SubPlayltem.  Therefore,<br>
when connection_condition information of Playltem information is "=<br>
5", sp_connection_condition information of SubPlayltem information is<br>
also set as "SP_CC = 5".   In addition, In_Time and Out_Time of<br>
SubPlayltem information shows the same points of time as In_Time and<br>
Out_Time of Playltem information.<br>
[0201]<br>
Thus concludes the improvement of the recording medium of the<br>
present embodiment. The internal structure of the playback apparatus<br>
of the present embodiment is described next.<br><internal structure of playback apparatus><br>
FIG. 41 shows an internal structure of the playback appratus<br>
according to Embodiment 5. The TB 6, EB 7 and audio decoder 8 are<br>
replaced with an audio mixing processor (enclosed by the dotted<br>
lines), as shown in the figure. The audio mixing processor inputs<br>
two audio streams from a Primary TS and a Secondary TS, decodes them<br>
at the same time, and mixes them. The rest of the internal structure<br>
is the same as that for realizing the Out_of_MUX application. The<br>
audio mixing processor is described next. The audio mixing processor<br>
is composed of: transport buffers 6a and 6b; EBs 7a and 7b; a<br>
preload buffer 7c; audio decoders 8a and 8b; and mixers 9a and 9b.<br>
[0202]<br>
The transport buffer 6a stores therein TS packets having PIDs<br>
of audio streams and output from the PUD filter 3b in a first-in<br>
first-out manner, and sends the TS packets to the audio decoder 8a.<br>
The transport buffer 6b stores therein TS packets having PIDs<br>
of audio streams and output from the PID filter 3d in a first-in<br>
first-out manner, and sends the TS packets to the audio decoder 8b.<br>
97<br><br>
[0203]<br>
The EB 7a is a buffer that stores therein PES packets obtained<br>
by converting the TS packets stored in the buffer 6a.<br>
The EB 7b is a buffer that stores therein PES packets obtained<br>
by converting the TS packets stored in the buffer 6a.<br>
The preload buffer 7c is a memory for preloading sound.bdmv<br>
file read from the BD-RCM/local storage.  The sound.bdmv file is a<br>
file that stores therein audio data to be output in response to an<br>
operation made on the menu.<br>
[0204]<br>
The audio decoder 8a decodes PES packets constituting a<br>
Primary TS to thereby obtain noncorpressed audio data in the LPCM<br>
state, and outputs the obtained audio data. This achieves a digital<br>
output of an audio stream.<br>
The audio decoder 8b decodes PES packets constituting a<br>
Secondary TS to thereby obtain noncompressed audio data in the LPCM<br>
state, and outputs the obtained audio data.  This achieves a digital<br>
output of an audio stream.<br>
[0205]<br>
The mixer 9a mixes digital audio in the LPCM state output from<br>
the audio decoder 8a and digital audio in the LPCM state output from<br>
the audio decoder 8b.<br>
The mixer 9b mixes digital audio in the LPCM state output from<br>
the mixer 9a and sound data stored in the buffer 7c.  This mixing<br>
operation by the sound mixer 9b is realized by that the controller 22<br>
decodes a navigation command intending to emit a clicking sound.<br>
[0206]<br>
98<br><br>
Thus concludes the description of the playback apparatus of<br>
the present embodiment.<br><verification on audio mixing application></verification>
Since the audio mixing application is composed of primary<br>
audio streams and secondary audio streams, as described above, the<br>
verification as shown in Embodiment 2 is conducted assuming that a<br>
primary audio stream and a secondary audio stream have been read at<br>
the same time. Specifically speaking, the Window is shifted by one<br>
packet each time on the ATC time axis to which the MainClip and<br>
SubClip refer. This shifting procedure is the same as one shown in<br>
the flowchart of FIG. 35. On each coordinate of the ATC time axis<br>
indicated by an ATS, a stream having the highest calculated bit rate<br>
is selected with respect to each type of a video stream, multiple<br>
primary audio streams, multiple secondary audio streams, multiple PG<br>
streams and multiple IG streams. The highest bit rate of the video<br>
stream, the highest bit rate of the primary audio stream, the highest<br>
bit rate of the secondary audio stream, the highest bit rate of the<br>
PG stream and the highest bit rate of the IG stream are summed, and a<br>
judgment is made whether the sum total is 48 Mbits or less. If the<br>
sum total exceeds 48 Mbits, it is determined that there is a<br>
violation of the ED-ROM standardization.<br>
[0207]<br>
Thus, according to the present embodiment, it is guaranteed<br>
that the bit amount per second does not exceed a predetermined upper<br>
limit even when primary and secondary audio streams are read both<br>
from the ED-ROM and local storage at the same time and supplied to<br>
the decoders for primary and secondary audio streams. With such a<br>
guarantee, the audio mixing application can be created efficiently.<br>
99<br><br>
This enables a supply system that downloads, to the local storage,<br>
additional contents that realize the audio mixing application and<br>
supplies them to the decoder from the local storage.  Therefore, a<br>
supply arrangement for, for example, adding a commentary after<br>
shipment of the BD-RCM can be readily realized.<br>
[0208]<br>
EMBODIMENT 6<br>
In Embodiment 1, connection points between Playlterns and<br>
between SubPlayltems are matched by matching In_Times and Out_Times<br>
of Playl terns and In_Times and Out_Times of SubPlayltems. On the<br>
other hand, the present embodiment does not require the connection<br>
points to be matched and allows some degree of time difference in<br>
order to realize audio mixing.<br>
[0209]<br>
In the case of allowing the time difference, another<br>
restriction is required. The above-mentioned process of changing<br>
STCs is performed at seamless connections between Playltems and<br>
between SubPlayltems, and this changing process is performed when the<br>
decoder is in the free-run state. Here, in the seamless connection,<br>
the decoder cannot move to synchronous control until an STC returns,<br>
and therefore a seamless connection involving an STC change cannot be<br>
accepted frequently due to implementation issues. Accordingly, the<br>
connection points of CC =3 continuing both in Playltems and<br>
SubPlayltems should controlled to occure at a predetermined interval<br>
(e.g. three seconds or so) from each other.<br>
[0210]<br>
FIG. 42 shows a correlation between Playltems and SubPlayltems<br>
specified by a PlayList indicating audio mixing.  Level 1 of FIG. 42<br>
100<br><br>
shows three PlayIterns (Play I tern information #1, Playltem information<br>
#2 and Playltem information #3) in PlayList information. These three<br>
Playltems specify a Primary TS, and the connection between Playltem<br>
information #1 and #2 is set to CC = 1 while the connection between<br>
Playltem information #2 and #3 is set to CC = 5. Level 2 of FIG. 42<br>
shows three SubPlaylterns (SubPlayltem #1, SubPlayltem #2 and<br>
SubPlayltem #3) in PlayList information. These three SubPlaylterns<br>
specify a Secondary TS, and the connection between SubPlaylterns #1<br>
and #2 is set to CC = 1 while the connection between SubPlayltems #2<br>
and #3 is set to CC =5. Level 3 of FIG. 42 shows nine SubPlayltems<br>
(SubPlayltem #1, SubPlayltem #2, SubPlayltem #3 to SubPlayltem #9) in<br>
the Progressive PlayList information. These nine SubPlayltems<br>
specify a Secondary TS. Here, the connection between SubPlayltems #3<br>
and #4 is set to CC = 1, the connection between SubPlayltems #4 and<br>
#5 is set to CC = 5, and the remaining connections are set to CC = 6.<br>
[0211]<br>
In the figure, the start of SubPlayltem #3 of Level 2 is 3<br>
seconds before the start point of Playltem #3 of Level 1. Similarly,<br>
the start point of SubPlayltem #5 of Level 3 is 3 seconds before the<br>
start point of Playltem #3 of Level 1.<br>
The time interval for changing the STC time axes of the<br>
Playltems and SubPlayltems is 3 seconds, and therefore the change of<br>
the STC time axes does not occur too often.<br>
[0212]<br>
The timing of CC = 1 for Playltems is set in accordance with<br>
SP_CC = 1. This is for preventing the playback of Playltems and<br>
SubPlayltems from getting out of synchronization in the case where<br>
101<br><br>
only playback of the SubPlayltems is continued when the connection is<br>
nonseamless with CC = 1.<br>
The connection mode of connecting SubPlayltems with SP_CC = 5<br>
in the middle of Playltems becomes useful when both a theatrical<br>
version and a director's cut are stored on a single disk.<br>
[0213]<br>
Level 1 of FIG. 43 shows one example of PlayList information<br>
constituting both a theatrical version and a director's cut. Within<br>
the PlayList information, the director's cut is composed of PlayItem<br>
#1, Playltem #2 and PlayItern #4 while the theatrical version is<br>
composed of Playltem #1, Playltem #3 and Playltem #4. Thus, since<br>
Playltem #1 and Playltem #4 are shared by the two versions, titles<br>
can be created effectively. Because the part of video in each<br>
version different from the other is shorter than the entire length of<br>
the video, the data volume recorded on the disk can be reduced<br>
effectively. Level 2 of FIG 43 shows an example in which<br>
commentaries corresponding to Playltem #1, Playltem #2 and Playltem<br>
#4 of Level 1 are defined as one SubPlayltem and commentaries<br>
corresponding to Playltem #1, Playltem #3 and Playltem #4 are defined<br>
as another SubPlayltem. In this case, the commentaries corresponding<br>
to Playltem #1 and Playltem #4 have to be prepared for each of the<br>
two SubPlayltems, which is unfavorable in terms of the volume of data.<br>
[0214]<br>
Level 3 of FIG. 43 shows an example in which SubPlayltems<br>
(SubPlayltem #1, SubPlayltem #2, SubPlayltem #3 and SubPlayltem #4)<br>
each corresponding to Playltem #1, Playltem #2, Playltem #3 and<br>
Playltem #4 are defined.  Assume that the connections of SubPlayltem<br>
#1 with SubPlayltem #2 and with SubPlayltem #3 as well as the<br>
102<br><br>
connections of SubPlayltem #2 with SubPlayltem #3 and with<br>
SubPlayltem #4 are CC = 5. These connection points occur at points<br>
of time apart from the connection points of Playlterns. That is, on<br>
the commentary side, branching to SubPlayltem #2 or SubPlayltem #3 is<br>
caused 3 seconds before Playltem #1 ends, using CC = 5 (or CC = 6).<br>
[0215]<br>
In addition, branching to SubPlayltem #4 is caused 3 seconds<br>
after Playltem #2 and Playltem #3 end, using CC = 5 (or CC = 6). The<br>
starts of SubPlayltem #2 and SubPlayltem #3 and the start of<br>
SubPlayltem #4 are respectively 3 seconds apart from the starts of<br>
Playltem #2 and Playltem #3 and the start of Playltem #4. By<br>
provinding such time intervals, the change of the STC time axes does<br>
not occur too often.<br>
[0216]<br>
In a precise sense, CC = 5 is required only to cause a return<br>
from SubPlayltem #3 to SubPlayltem #4 (seamless connection at which<br>
the ATC/STC time axes are reset), and CC = 6 can be used instead of<br>
CC = 5 for the remaining branchings.<br>
Thus, "according to the present embodiment, since In_Time and<br>
Out_Time of Playltems do not match In_Time and Out_Time of<br>
SubPlayltems, the synchronization of the ATC counters 2a and 2c as<br>
well as the STC counters 3a and 3c is not necessary, which increases<br>
the freedom of design of playback apparatuses.<br>
[0217]<br>
EMBODIMENT 7<br>
In Embodiment 6, the primary and secondary audio streams are<br>
targets of the restriction of the bit amount when they are read from<br>
the BD-ROM and the local storage at the same time and supplied to the<br>
103<br><br>
decoder.  The present embodiment explains the restriction of the bit<br>
amount imposed When Picture in Picture (PiP) playback application is<br>
realized.<br>
[0218]<br>
PiP playback is, when MainClips constituting moving images are<br>
specified by MainPath information of PlayList information and<br>
SubClips constituting another set of moving images are specified by<br>
SubPlayltem information of PlayList information, technology for<br>
displaying the former moving images (Primary Video) and the latter<br>
moving images (Secondary Video) on the same screen. Here, the<br>
Primary Video is composed of HD images while the Secondary Video is<br>
composed of SD images.  The HD images have a resolution of 1920 x<br>
1080 with a frame clock cycle of 3750 (alternatively 3753 or 3754),<br>
like a film material.  The SD images have a resolution of 720 x 480<br>
with a display clock cycle of 1501 like an NTSC material or with a<br>
frame clock cycle of 1800 like a PAL material.<br>
[0219]<br>
The SD images have about 1/4 the resolution of the HD images,<br>
and therefore if the Primary Video, which is HD images, and the<br>
Secondary Video are displayed on the same screen, the size of the<br>
Secondary Video is about 1/4 in relation to the Primary Video.<br>
Here, assume that the Secondary Video is moving images in<br>
which only the director and/or the cast appear and give a performance<br>
of, for example, pointing at the video content of the Primary Video.<br>
In this case, by combining the video content of the Secondary Video<br>
with the video content of the Primary Video, it is possible to<br>
realize an amusing screen effect where the movie director and/or cast<br>
104<br><br>
is giving commentary while pointing at the contents in the playback<br>
video of the movie.<br>
[0220]<br><playlist information of present embodiment><br>
A video stream for the Secondary Video (secondary video<br>
stream) is specified by multiple pieces of SubPlayltem information in<br>
SubPath information of PlayList information.  To such SubPlayltem<br>
information, information elements of PiP_Position and PiP_Size are<br>
newly added.<br>
"PiP_Position" indicates, using X and Y coordinates on the<br>
screen plane used for the playback of the Primary Video, a position<br>
at which the playback video of the Secondary Video is to be located.<br>
[0221]<br>
"PiP_Size" indicates the height and width of the playback<br>
video of the Secondary Video.<br>
Additionally, sp_connection_condition information of<br>
SubPlaylterns in the present embodiment is set to "= 5". This means a<br>
guarantee of a seamless connection between a secondary video stream<br>
multiplexed into SubClips of the current SubPlayltem and a secondary<br>
video stream multiplexed into SubClip of the previous SubPlayltem.<br>
sp_connection_condition information of such SubPlayltems is set to the<br>
same value as connection_condition information of Playltem<br>
information. Therefore, if connect ion_condition information of<br>
Playltem information is "= 5", sp_connection_condition information of<br>
SubPlayltem information must also be set to "= 5". That is, if the<br>
primary video stream on the Playltem side is seamlessly connected,<br>
the secondary video stream on the SubPlayltem side must be seamlessly<br>
connected.   In addition,  In_Time and Out_Time of SubPlayltem<br>
105<br><br>
information must indicate the same points of time as In_Time and<br>
Out_Time of Playltem information.<br>
[0222]<br>
Thus concludes the description of the recording medium of the<br>
present embodiment.<br><improvement of playback apparatus present embodiment></improvement>
The following explains improvements of the playback apparatus.<br>
In order to perform decode processing of secondary video streams, the<br>
hardware of the playback apparatus of the present embodiment includes<br>
another set of structural elements used to decode the video streams.<br>
Here, the structural elements used to decode the video streams are:<br>
a transport buffer; a multiplexed buffer; an elementary buffer; a<br>
decoder; and a video plane, and decode secondary video streams. In<br>
addition, the playback apparatus of the present embodiment includes a<br>
scalier and a synthesis unit described hereinafter.<br>
[0223]<br>
The scalier enlarges or reduces the size of the playback video<br>
in the Secondary Video plane based on the height and width indicated<br>
by PiP_Size of SubPlayltem information.<br>
The synthesis unit realizes PiP playback by synthesizing<br>
playback video, the size of which has been enlarged by the scalier,<br>
and playback video obtained by the video decoder. The synthesis of<br>
the playback video of the Primary Video and the playback video of the<br>
Secondary Video is performed in accordance with PiP_Position<br>
specified by SubPlayltem information. Herewith, synthesized video<br>
which is created by synthesizing the playback video of the Primary<br>
Video and the playback video of the Secondary Video can be played<br>
back.  The synthesis unit is able to perform Chroma-key synthesis,<br>
106<br><br>
layer synthesis and the like, and perform a process of, for example,<br>
removing the background of the Secondary Video, extracting image of a<br>
person, and synthesizing the image of the person with the playback<br>
video of the Primary Video. Thus concludes the description of the<br>
playback apparatus of the present embodiment.<br>
[0224]<br><verification on pip application><br>
In the case where a video stream which is a primary TS<br>
(primary video stream) and a video stream which is a secondary video<br>
stream (secondary video stream) are read at the same time and<br>
supplied to the decoder in order to realize PiP playback, the primary<br>
and secondary video streams are targets for verification for<br>
restricting the bit amount.<br>
[0225]<br>
Specifically speaking, as the Window is shifted on the ATC<br>
time axis, a stream having the highest calculated bit rate is<br>
selected, on each coordinate of the ATC time axis indicated by an ATS,<br>
with respect to each type of primary video stream, secondary video<br>
stream, multiple primary audio streams, multiple secondary audio<br>
streams, multiple PG streams and multiple IG streams. The highest<br>
bit rate of the primary video stream, the highest bit rate of the<br>
secondary video stream, the highest bit rate of the primary audio<br>
stream, the highest bit rate of the secondary audio stream, the<br>
highest bit rate of the PG stream and the highest bit rate of the IG<br>
stream are summed, and a judgment is made whether the sum total is 48<br>
Mbits or less.<br>
[0226]<br>
107<br><br>
Thus, according to the present embodiment, it is guaranteed<br>
that the bit amount per second does not exceed a predetermined upper<br>
limit even when primary and secondary video streams are read both<br>
from the BD-ROM and local storage at the same time and supplied to<br>
the respective decoders. With such a guarantee, the PiP application<br>
can be created efficiently.<br>
[0227]<br>
(Supplementary Notes)<br>
The best modes for carrying out the invention, as far as known<br>
to the applicant at the time of filing the present application, have<br>
been described. However, further improvements or modifications can<br>
be made on the present invention in terms of the following technical<br>
topics. It should be noted here that whether or not to make such<br>
improvements or modifications is optional, and depends on the<br>
implementer of the invention.<br>
[0228]<br>
(In_Time, Out_Time)<br>
In FIG. 27, the last Video Presentation Unit of TS1 is<br>
selected for Out_Time of the previous Playltem while the first Video<br>
Presentation Unit of TS2 is selected for In_Times of the previous<br>
Playltem and the previous SubPlayltem. Instead, however, a middle<br>
Video Presentation Unit in TS1 may be selected for Out_Time of the<br>
previous Playltem while a middle Video Presentation Unit in TS2 may<br>
be selected for In_Times of the current Playltem and the current<br>
SubPlayltem. In this case, seamless connections cannot be realized<br>
for the current Playltem and the current Subplayltem, and they must<br>
be connected using CC = 1 and SP_CC = 1.<br>
[0229]<br>
108<br><br>
(All PlayList Information)<br>
When it is desired to connect two Playltems with CC = 5, all<br>
Playltem information and all SubPlayltem information that belong to<br>
one piece of PlayList information must be connected with CC = 5.<br>
(Data Amount Supplied to Decoder)<br>
As to the Out_of_ICX, the data amount supplied to the decoder<br>
does not always become large. For example, assume the case in which<br>
the primary audio stream is a MainClip and is composed of DD (Dolby<br>
Digital) of CBR and MLP of VBR, and the MLP is replaced with the DD<br>
of the CBR supplied from the local storage. In this case, the data<br>
amount supplied to the decoder is in fact decreased. If the<br>
occurrence is obvious, the verification process can be omitted.<br>
[0230]<br>
(Difference in Playback Times)<br>
In order to realize CC = 5 and SP_CC =5, it is desirable if a<br>
difference in playback time of the video and audio streams in one<br>
Playltem is small. An allowable difference may be: a time period<br>
equivalent to one video frame (1/60 to 1/25 seconds); one second or<br>
less; a time period corresponding to a certain percentage of the<br>
entire playback period (e.g. 1% or less); or a combination of two of<br>
these. This is also the case for a difference in playback time of<br>
the video and audio streams in one SubPlayltem.<br>
[0231]<br>
In the case where two elementary streams are stored in one PID,<br>
it is desirable that a difference in playback time of the two streams<br>
stored in the same PID is the same as or less than the minimum<br>
playback unit (1 frame) of a stream having a shorter playback time.<br>
This condition can be realized by storing Dolby Digital (AC-3) and<br>
109<br><br>
MLP (Meridian Lossless Packing) in a single elementary stream and<br>
then recording the elementary stream on the BD-ROM.<br>
[0232]<br>
(Processing of Additional Contents)<br>
It is desirable to make the initial setting of the playback<br>
apparatus in a manner that additional contents downloaded to the<br>
local storage 200 will be automatically deleted when several months<br>
or several years have elapsed after the downloading.<br>
(Substitution of PID)<br>
When the audio mixing application is realized, PIDs are used<br>
to distinguish between the primary and secondary audio streams; when<br>
MPEG2-PG is used, however, it is desirable to make stream_id of PES<br>
packet headers different from each other.<br>
[0233]<br>
In addition, the primary and secondary audio streams only have<br>
to be distinguished on a system stream level so that two audio<br>
streams can be differentiated by one demultiplexer. Alternatively,<br>
before multiplexing two streams, PIDs of one of the streams may be<br>
changed to different PIDs.<br>
[0234]<br>
(Preloading)<br>
It is desirable that preloading of audio data (a file<br>
"sound.bdmv") for a clicking sound is performed when the BD-ROM is<br>
being loaded or when a title is switched. This is because, if<br>
reading of the file sound.bdmv is attempted during the playback of an<br>
AVClip, a seek operation of optical pickup for reading a file<br>
different from the AVClip is caused. On the other hand, when the BD-<br>
ROM is being loaded or when a title is switched, it is rare that the<br>
110<br><br>
playback of an AVClip is being continued. Therefore, by reading the<br>
file sound.bdmv at such a timing, it is possible to enhance the<br>
responsivity of the apparatus and make it difficult to cause<br>
interruption of the AVClip playback.<br>
[0235]<br>
(Java™ Platform)<br>
A Java™ platform can be structured by fully mounting, on the<br>
playback apparatus of each embodiment, the Java™ 2Micro_Edition(J2ME)<br>
Personal Basis Profile (PBP 1.0) and the Globally Executable MHP<br>
specification (GEM..0.2) for package media targets, and then the<br>
playback apparatus may be caused to perform a BD-J application. To<br>
perform the application, the playback apparatus may be caused to<br>
perform the Out_of_MUX framework.<br>
[0236]<br>
(Title)<br>
It is preferable to create a "module manager" in the playback<br>
apparatus, which selects a title according to the mount of the BD-ROM,<br>
a user operation, or a state of the apparatus. The decoder in the<br>
BD-RCM playback apparatus performs playback of an AVClip based on the<br>
PlayList information according to the title selection by the "module<br>
manager".<br>
[0237]<br>
When the "module manager" selects a title, the application<br>
manager executes signaling using an application management table<br>
(AMI) corresponding to a previous title and an AMT corresponding to<br>
the current title. The signaling takes control that terminates the<br>
operation of an application described in the AMT of the previous<br>
title but not described in the AMT of the current AMT while commences<br>
111<br><br>
the operation of an application not described in the AMT of the<br>
previous title but described in the AMT of the current title.<br>
[0238]<br>
(Directory Structure in Local Storage)<br>
Individual areas in the local storage described in each<br>
embodiment are preferably created under a directory corresponding to<br>
a disk's root certificate of the BD-ROM.<br>
The disk's root certificate is a root certificate that is<br>
distributed by the root certificate authority and assigned to the BD-<br>
RCM by the creator of the BD-RCM.  The disk's root certificate is<br>
encoded in, for example, the X.509.  The specifications of the X.509<br>
have been issued by the International Telegraph and Telephone<br>
Consultative Committee, and described in CCITT Recommendation X.509<br>
(1988), "The Directory - Authentication Framework".<br>
[0239]<br>
In addition, it is preferable that the contents recorded in<br>
the BD-RCM and local storage be encoded using the Advanced Access<br>
Content System (AACS), a signature information be attached thereto,<br>
and a use authorization be specified in a permission file.<br>
(Package to be Mounted)<br>
When the BD-RCM playback apparatus is implemented as the Java™<br>
platform, it is desirable to mount the following BD-J Extention on<br>
the playback apparatus. The BD-J Extention includes various packages<br>
specialized to provide functions beyond GEM[1.0.2] to the Java™<br>
platform. Packages included in the BD-J Extention are shown below.<br>
• org.bluray.media<br>
112<br><br>
This package provides special functions to be added to Java™<br>
Media Framework. Controls for selecting angle, audio and subtitle<br>
are added to the package.<br>
•	org.bluray.ti<br>
This package includes: API for mapping "services" of<br>
GEM [1.0.2] on a "title"; a mechanism to inquire about title<br>
information from the BD-RCM; and a mechanism to select a new title.<br>
•	org.bluray.application<br>
This package includes APIs for managing active periods of an<br>
application. In addition, the package includes APIs for inquiring<br>
about information required for signaling when an application is<br>
performed.<br>
•	org.bluray.ui<br>
This package includes classes that define constants used for<br>
key events specialized for the BD-RCM and realize synchronization<br>
with video playback.<br>
•	org.bluray.vfs<br>
This package provides a mechanism (Binding Scheme) to bind<br>
contents recorded on the BD-RCM (on-disc contents) and contents in<br>
the local storage (off-disc contents), which are not recorded on the<br>
BD-RCM, in order to playback the data seamlessly indifferent to where<br>
the data is recorded.<br>
[0240]<br>
Binding Scheme associates contents on the BD-RCM (AVClip,<br>
subtitle, and BD-J application) with related contents in the tlocal<br>
storage. Binding Scheme realizes seamless playback indifferent to<br>
where the contents are recorded.<br>
(Virtual Package)<br>
113<br><br>
The BD-ROM playback apparatus may be caused to perform a<br>
process of creating Virtual Package. This is realized by that the<br>
playback appratus creates Virtual Package information. Virtual<br>
Package information is information obtained by expanding the volume<br>
management information on the BD-ROM. Here, the volume management<br>
information is information that specifies a directory-file structure<br>
existing on a recording medium, and is composed of directory<br>
management information related to the directories and file management<br>
information related to the files. Virtual Package information is<br>
designed to expand the directory-file structure of the BD-ROM by<br>
adding new file management information to the volume management<br>
information showing the directory-file structure of the BD-ROM.<br>
[0241]<br>
(Realization of Control Procedure)<br>
Both the control procedures explained in the above-described<br>
embodiments using the flowcharts and the control procedures of the<br>
functional components explained in the above-described embodiments<br>
satisfy the requirements for the "program invention" since the above-<br>
mentioned control procedures are realized concretely using the<br>
hardware resources and are the creation of a technical idea utilizing<br>
natural laws.<br>
[0242]<br>
• Production of Program of Present Invention<br>
The program of the present invention is an object program that<br>
can execute on a computer. The object program is composed of one or<br>
more program codes that cause the computer to execute each step in<br>
the flowchart or each procedure of the functional components. There<br>
are various types of program codes such as the native code of the<br>
114<br><br>
processor, and JAVA™ byte code. There are also various forms of<br>
realizing the steps of the program codes. For example, when each<br>
step can be. realized by using an external function, the call<br>
statements for calling the external functions are used as the program<br>
codes. Program codes that realize one step may belong to different<br>
object programs. In the RISC processor in which the types of<br>
instructions are limited, each step of flowcharts may be realized by<br>
combining arithmetic operation instructions, logical operation<br>
instructions, branch instructions and the like.<br>
[0243]<br>
The program of the present invention can be produced as<br>
follows. First, the software developer writes, using a programming<br>
language, a source program that achieves each flowchart and<br>
functional component. In this writing, the software developer uses<br>
the class structure, variables, array variables, calls to external<br>
functions, and so on, which conform to the sentence structure of the<br>
programming language s/he uses.<br>
[0244]<br>
The written source program is sent to the compiler as files.<br>
The compiler translates the source program and generates an object<br>
program.<br>
The translation performed by the compiler includes processes<br>
such as the sentence structure analysis, optimization, resource<br>
allocation, and code generation. In the sentence structure analysis,<br>
the characters and phrases, sentence structure, and meaning of the<br>
source program are analyzed and the source program is converted into<br>
an intermediate program. In the optimization, the intermediate<br>
program is subjected to such processes as the basic block setting,<br>
115<br><br>
control flow analysis, and data flow analysis. In the resource<br>
allocation, to adapt to the instruction sets of the target processor,<br>
the variables in the intermediate program are allocated to the<br>
register or memory of the target processor. In the code generation,<br>
each intermediate instruction in the intermediate program is<br>
converted into a program code, and an object program is obtained.<br>
[0245]<br>
After the object program is generated, the programmer<br>
activates a linker. The linker allocates the memory spaces to the<br>
object programs and the related library programs, and links them<br>
together to generate a load module. The generated load module is<br>
based on the presumption that it is read by the computer and causes<br>
the computer to execute the procedures indicated in the flowcharts<br>
and the procedures of the functional components. The program of the<br>
present invention can be produced in this way.<br>
[0246]<br>
The program of the present invention can be used as follows.<br>
When the program of the present invention is used as an embedded<br>
program,  the load module as the program is written into an<br>
instruction ROM, together with the Basic Input/Output System (BIOS)<br>
program and various pieces of middleware (operation systems).  The<br>
program of the present invention is used as the control program of<br>
the playback apparatus 300 as the instruction ROM is embedded in the<br>
control unit and is executed by the CPU.<br>
[0247]<br>
When the playback apparatus is a bootstrap model, the Basic<br>
Input/Output System (BIOS) program is embedded in an instruction ROM,<br>
and various pieces of middleware (operation systems) are preinstalled<br>
116<br><br>
in a hard disk. Also, a boot ROM for activating the system from the<br>
hard disk is provided in the playback apparatus. In this case, only<br>
the load module is supplied to the playback apparatus via a<br>
transportable recording medium and/or a network, and is installed in<br>
the hard disk as one application. This enables the playback<br>
apparatus to perform the bootstrapping by the boot ROM to activate an<br>
operation system, and then causes the CPU to execute the installed<br>
load module as one application so that the program of the present<br>
application can be used.<br>
[0248]<br>
As described above, when the playback apparatus is a hard-disk<br>
model, the program of the present invention can be used as one<br>
application. Accordingly, it is possible to transfer, lend, or<br>
supply, via a network, the program of the present invention<br>
separately.<br>
(Controller 22)<br>
The controller 22 can be realized as one system LSI.<br>
[0249]<br>
The system LSI is obtained by implementing a bare chip on a<br>
high-density substrate and packaging them. The system LSI is also<br>
obtained by implementing a plurality of bare chips on a high-density<br>
substrate and packaging them, so that the plurality of bare chips<br>
have an outer appearance of one LSI (such a system LSI is called a<br>
multi-chip module) .<br>
The system LSI has a QFP (Quad Flat Package) type and a PGA<br>
(Pin Grid Array) type. In the QFP-type system LSI, pins are attached<br>
to the four sides of the package. In the PGA-type system LSI, a lot<br>
of pins are attached to the entire bottom.<br>
117<br><br>
[0250]<br>
These pins function as an interface with other circuits. The<br>
system LSI, which is connected with other circuits through such pins<br>
as an interface, plays a role as the core of the playback apparatus.<br>
Each of the bare chips packaged in the system LSI is composed<br>
of: a front end unit; a back end unit; and a digital processing unit.<br>
The front end unit digitizes an analogue signal while the back end<br>
unit changes the obtained data into analog form and outputs it.<br>
[0251]<br>
Each structural element shown in the diagram of the internal<br>
structure in the above embodiment is mounted in the digital<br>
processing	unit.<br>
As described above in "Used as Embedded Program", the load<br>
module as the program, the Basic Input/Output System (BIOS) program<br>
and various pieces of middleware (operation systems) are written into<br>
an instruction ROM. The major improvement of the embodiments is<br>
achieved by the load module as the program. It is therefore possible<br>
to produce a system LSI of the present invention by packaging the<br>
instruction ROM as bare chips, in which the load module as the<br>
program is stored, as the bare chip.<br>
[0252]<br>
It is desirable to employ SoC implementation or SiP<br>
implementation for the actual implementation. The SoC (System on<br>
chip) implementation is a technique that burns multiple circuits onto<br>
one chip. The SiP (System in package) implementation is a technique<br>
that puts multiple chips in one package using resin. By the above<br>
procedure, the system LSI of the present invention can be produced<br>
118<br><br>
based on the internal structure diagrams of the playback apparatus<br>
described in each embodiment.<br>
[0253]<br>
It should be noted here that although the term LSI is used<br>
here, it may be called IC, LSI, super LSI, ultra LSI or the like,<br>
depending on the level of integration.<br>
Further, part or all of the components of each playback<br>
apparatus may be achieved as one chip. The integrated circuit is not<br>
limited to the SoC implementation or the SiP implementation, but may<br>
be achieved by a dedicated circuit or a general purpose processor.<br>
It is also possible to achieve the integrated circuit by using the<br>
FPGA (Field Programmable Gate Array) that can be re-programmed after<br>
it is manufactured, or a reconfigurable processor that can<br>
reconfigure the connection and settings of the circuit cells inside<br>
the LSI. Furthermore, a technology for an integrated circuit that<br>
replaces the LSI may appear in the near future as the semiconductor<br>
technology improves or branches into another technologies. In that<br>
case, the new technology may be incorporated into the integration of<br>
the functional blocks constituting the present invention as described<br>
above. Such possible technologies include biotechnology.<br>
Industrial Applicability<br>
[0254]<br>
The recording medium and playback apparatus of the present<br>
invention can be mass-produced based on the internal structures of<br>
them shown in the embodiments above. As such, the and playback<br>
apparatus of the present invention has the industrial applicability.<br>
119<br><br>
Claims<br>
1.	A recording medium on which playlist information is recorded,<br>
wherein the playlist information includes main-path<br>
information and sub-path information,<br>
the main-path information specifies, among a plurality of<br>
digital streams, one digital stream as a main stream, and defines a<br>
primary playback section on the main stream,<br>
the sub-path information specifies, among rest of the<br>
plurality of digital streams, one digital stream as a substream, and<br>
defines, on the substream, a secondary playback section which is to<br>
be synchronized with the primary playback section,<br>
the playlist information further includes a stream table<br>
showing at least one pair of elementary streams which are allowed to<br>
be simultaneously played back, the pair of elementary streams being<br>
made up of one of a plurality of elementary streams multiplexed into<br>
the main stream and one of a plurality of elementary streams<br>
multiplexed into the substream, and<br>
a total data size of a digital stream per unit time is less<br>
than or equal to a predetermined value, the digital stream including<br>
the pair of elementary streams and not including an elementary stream<br>
which is not allowed in the stream table to be simultaneously played<br>
back.<br>
2.	The recording medium of Claim 1,<br>
wherein in a case where at least one of the main stream and<br>
the substream includes a plurality of elementary streams of same type,<br>
an elementary stream having a highest bit rate among the elementary<br>
120<br><br>
streams of same type is used for calculation of the total data size<br>
of the digital stream per unit time.<br>
3.	The recording medium of Claim 2,<br>
wherein types of the elementary streams include a primary-<br>
audio stream type and a secondary-audio stream type,<br>
an elementary stream of the primary-audio stream type and an<br>
elementary stream of the secondary-audio stream type make up an audio<br>
mixing application, and<br>
with respect to each of the primary-audio stream type and the<br>
secondary-audio stream type, the elementary stream having the highest<br>
bit rate is selected from a plurality of elementary streams.<br>
4.	The recording medium of Claim 2,<br>
wherein types of the elementary streams include a<br>
primary-video stream type and a secondary-video stream type,<br>
an elementary stream of the primary-video stream type and an<br>
elementary stream of the secondary-video stream type make up a<br>
picture-in-picture application, and<br>
with respect to each of the primary-video stream type<br>
and the secondary-video stream type, the elementary stream having the<br>
highest bit rate is selected.<br>
5.	A playback apparatus for playing back, in accordance with playlist<br>
information, a main stream in which a primary playback section is<br>
defined and a substream in which a secondary playback section is<br>
defined,<br>
121<br><br>
wherein the playlist information defines, with respect to each<br>
of a plurality of digital streams, a playback section, and includes<br>
main-path information and sub-path information, and<br>
the playback apparatus comprising:<br>
a 1st reading unit operable to read packets constituting the<br>
primary playback section in accordance with the main-path<br>
information;<br>
a 2nd reading unit operable to read packets constituting the<br>
secondary playback section in accordance with the sub-path<br>
information;<br>
a decoder; and<br>
a demultiplexing unit operable to demultiplex the primary<br>
playback section and the secondary playback section to obtain packets,<br>
which are supplied to the decoder, and<br>
wherein a total data size of the supplied packets per unit<br>
time is less than or equal to a predetermined value.<br>
6.	The playback apparatus of Claim 5,<br>
wherein in a case where at least one of the main stream and<br>
the substream includes a plurality of elementary streams of same type,<br>
an elementary stream having a highest bit rate among the elementary<br>
streams of same type is used for calculation of the total data size<br>
of the digital stream per unit time.<br>
7.	The playback apparatus of Claim 6,<br>
wherein types of the elementary streams include a primary-<br>
audio stream type and a secondary-audio stream type,<br>
the decoder includes:<br>
122<br><br>
a 1st decoder operable to decode an elementary stream of the<br>
primary-audio stream type;<br>
a 2nd decoder operable to decode an elementary stream of the<br>
secondary-audio stream type; and<br>
a synthesis unit operable to synthesize decoded results<br>
obtained by the 1st and 2nd decoders, and<br>
with respect to each of the primary-audio stream type and the<br>
secondary-audio stream type, the elementary stream having the highest<br>
bit rate is selected from a plurality of elementary streams.<br>
8.	The playback apparatus of Claim 6,<br>
wherein types of the elementary streams include a primary-<br>
video stream type and a secondary-video stream type,<br>
the decoder includes:<br>
a 1st decoder operable to decode an elementary stream of the<br>
primary-audio stream type;<br>
a 2nd decoder operable to decode an elementary stream of the<br>
secondary-audio stream type; and<br>
a synthesis unit operable to synthesize decoded results<br>
obtained by the 1st and 2nd decoders, and<br>
with respect to each of the primary-video stream type and the<br>
secondary-video stream type, the elementary stream having the highest<br>
bit rate is selected.<br>
9.	A recording method, for recording application data on a recording<br>
medium, comprising the steps of:<br>
(a)	generating the application data;<br>
(b)	verifying the application data; and<br>
123<br><br>
(c) obtaining the recording medium to which the application<br>
data, whose authenticity has been verified, is written,<br>
wherein the application data includes playlist information and<br>
a plurality of digital streams,<br>
the playlist information includes main-path information and<br>
sub-path information,<br>
the main-path information specifies, among the plurality of<br>
digital streams, one digital stream as a main stream, and defines a<br>
primary playback section on the main stream,<br>
the sub-path information specifies, among rest of the<br>
plurality of digital streams, one digital stream as a substream, and<br>
defines, on the substream, a secondary playback section which is to<br>
be synchronized with the primary playback section,<br>
the playlist information further includes a stream table<br>
showing at least one pair of elementary streams which are allowed to<br>
be simultaneously played back, the pair of elementary streams being<br>
made up of one of a plurality of elementary streams multiplexed into<br>
the main stream and one of a plurality of elementary streams<br>
multiplexed into the substream, and<br>
the step (b) verifies whether a total data size of a digital<br>
stream per unit time is less than or equal to a predetermined value,<br>
the digital stream including the pair of elementary streams and not<br>
including an elementary stream which is not allowed in the stream<br>
table to be simultaneously played back.<br>
10. The recording method of Claim 9,<br>
wherein in a case where at least one of the main stream and<br>
the substream includes a plurality of elementary streams of same type,<br>
124<br><br>
an elementary stream having a highest bit rate among the elementary<br>
streams of same type is used for calculation of the total data size<br>
of the digital stream per unit time.<br>
11.	The recording method of Claim 10,<br>
wherein types of the elementary streams include a primary-<br>
audio stream type and a secondary-audio stream type,<br>
an elementary stream of the primary-audio stream type and an<br>
elementary stream of the secondary-audio stream type make up an audio<br>
mixing application, and<br>
with respect to each of the primary-audio stream type and the<br>
secondary-audio stream type, the elementary stream having the highest<br>
bit rate is selected from a plurality of elementary streams.<br>
12.	The recording method of Claim 10,<br>
wherein types of the elementary streams include a<br>
primary-video stream type and a secondary-video stream type,<br>
an elementary stream of the primary-video stream type and an<br>
elementary stream of the secondary-video stream type make up a<br>
picture-in-picture application, and<br>
with respect to each of the primary-video stream type and the<br>
secondary-video stream type, the elementary stream having the highest<br>
bit rate is selected.<br>
13.	The recording method of Claim 9,<br>
wherein each of the digital streams includes a plurality of<br>
packets, each of which has an arrival time stamp attached thereto,<br>
and<br>
125<br><br>
the recording method further comprising a step of:<br>
defining, on a time axis that functions as a reference for the<br>
arrival time stamps, a window having a length of the unit time, and<br>
shifting the window along the time axis in accordance with a<br>
coordinate indicated by each of the arrival time stamps, and<br>
wherein verification of the total data size of step (b) is<br>
performed each time the window shifts.<br>
14. A playback method for playing back, in accordance with playlist<br>
information, a main stream in which a primary playback section is<br>
defined and a substream in which a secondary playback section is<br>
defined,<br>
wherein the playlist information defines, with respect to each<br>
of a plurality of digital streams, a playback section, and includes<br>
main-path information and sub-path information, and<br>
the playback method comprising:<br>
a 1st reading step of reading packets constituting the primary<br>
playback section in accordance with the main-path information;<br>
a 2nd reading step of reading packets constituting the<br>
secondary playback section in accordance with the sub-path<br>
information; and<br>
a demultiplexing step of demultiplexing the primary playback<br>
section and the secondary playback section to obtain packets, which<br>
are supplied to a decoder, and<br>
wherein a total data size of the supplied packets per unit<br>
time is less than or equal to a predetermined value.<br><br>
On a BD-ROM, PlayList information is recorded. The PlayList<br>
information includes MainPath information and SubPath information.<br>
The MainPath information specifies one of a plurality of AVClips as a<br>
MainClip, and defines a primary playback section on the MainClip.<br>
The SubPath information specifies, among the rest of the AVClips, one<br>
AVClip as a SubClip, and defines, on the SubClip, a secondary<br>
playback section to be synchronized with the primary playback section.<br>
The PlayList information includes an STN_table, which indicates<br>
SubClip and, from among a plurality of elementary streams multiplexed<br>
into the SubClip, elementary streams allowed to be played back. A<br>
total data size of AVClip per unit time is, for example, less than or<br>
equal to 48 Mbits when the AVClip includes a plurality of elementary<br>
streams allowed in the STN_table to be played back and does not<br>
include elementary streams which are not allowed in the STN_table to<br>
be played back.</verification></playlist></internal></structures></supply></process></multiplexing></details></conditions></process></authoring></additional></recording></level></level></level></level></errors></stc></window></stn_table></playlist></local></local></playlist></playlist></clip></ig></pg></audio></video></bd-rcm></general></patent></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDM3ODQta29sbnAtMjAwNy1hYnN0cmFjdC5wZGY=" target="_blank" style="word-wrap:break-word;">03784-kolnp-2007-abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDM3ODQta29sbnAtMjAwNy1jbGFpbXMucGRm" target="_blank" style="word-wrap:break-word;">03784-kolnp-2007-claims.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDM3ODQta29sbnAtMjAwNy1jb3JyZXNwb25kZW5jZSBvdGhlcnMtMS4xLnBkZg==" target="_blank" style="word-wrap:break-word;">03784-kolnp-2007-correspondence others-1.1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDM3ODQta29sbnAtMjAwNy1jb3JyZXNwb25kZW5jZSBvdGhlcnMucGRm" target="_blank" style="word-wrap:break-word;">03784-kolnp-2007-correspondence others.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDM3ODQta29sbnAtMjAwNy1kZXNjcmlwdGlvbiBjb21wbGV0ZS5wZGY=" target="_blank" style="word-wrap:break-word;">03784-kolnp-2007-description complete.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDM3ODQta29sbnAtMjAwNy1kcmF3aW5ncy5wZGY=" target="_blank" style="word-wrap:break-word;">03784-kolnp-2007-drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDM3ODQta29sbnAtMjAwNy1mb3JtIDEucGRm" target="_blank" style="word-wrap:break-word;">03784-kolnp-2007-form 1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDM3ODQta29sbnAtMjAwNy1mb3JtIDIucGRm" target="_blank" style="word-wrap:break-word;">03784-kolnp-2007-form 2.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDM3ODQta29sbnAtMjAwNy1mb3JtIDMucGRm" target="_blank" style="word-wrap:break-word;">03784-kolnp-2007-form 3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDM3ODQta29sbnAtMjAwNy1mb3JtIDUucGRm" target="_blank" style="word-wrap:break-word;">03784-kolnp-2007-form 5.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDM3ODQta29sbnAtMjAwNy1pbnRlcm5hdGlvbmFsIHNlYXJjaCByZXBvcnQucGRm" target="_blank" style="word-wrap:break-word;">03784-kolnp-2007-international search report.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDM3ODQta29sbnAtMjAwNy1vdGhlcnMucGRm" target="_blank" style="word-wrap:break-word;">03784-kolnp-2007-others.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDM3ODQta29sbnAtMjAwNy1wY3QgcHJpb3JpdHkgZG9jdW1lbnQgbm90aWZpY2F0aW9uLnBkZg==" target="_blank" style="word-wrap:break-word;">03784-kolnp-2007-pct priority document notification.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDM3ODQta29sbnAtMjAwNy1wY3QgcmVxdWVzdCBmb3JtLnBkZg==" target="_blank" style="word-wrap:break-word;">03784-kolnp-2007-pct request form.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDM3ODQta29sbnAtMjAwNy1wcmlvcml0eSBkb2N1bWVudC5wZGY=" target="_blank" style="word-wrap:break-word;">03784-kolnp-2007-priority document.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDM3ODQta29sbnAtMjAwNy10cmFuc2xhdGVkIGNvcHkgb2YgcHJpb3JpdHkgZG9jdW1lbnQucGRm" target="_blank" style="word-wrap:break-word;">03784-kolnp-2007-translated copy of priority document.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LSgyMi0wOC0yMDE0KS1BQlNUUkFDVC5wZGY=" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-(22-08-2014)-ABSTRACT.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LSgyMi0wOC0yMDE0KS1DT1JSRVNQT05ERU5DRS5wZGY=" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-(22-08-2014)-CORRESPONDENCE.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LSgyMi0wOC0yMDE0KS1ERVNDUklQVElPTiAoQ09NUExFVEUpLnBkZg==" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-(22-08-2014)-DESCRIPTION (COMPLETE).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LSgyMi0wOC0yMDE0KS1GT1JNLTEucGRm" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-(22-08-2014)-FORM-1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LSgyMi0wOC0yMDE0KS1GT1JNLTIucGRm" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-(22-08-2014)-FORM-2.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LSgyMi0wOC0yMDE0KS1GT1JNLTMucGRm" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-(22-08-2014)-FORM-3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LSgyMi0wOC0yMDE0KS1GT1JNLTUucGRm" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-(22-08-2014)-FORM-5.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LSgyMi0wOC0yMDE0KS1PVEhFUlMucGRm" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-(22-08-2014)-OTHERS.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LSgyMi0wOC0yMDE0KS1QRVRJVElPTiBVTkRFUiBSVUxFIDEzNy5wZGY=" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-(22-08-2014)-PETITION UNDER RULE 137.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LSgyOC0wMS0yMDE0KS1BTk5FWFVSRSBUTyBGT1JNIDMucGRm" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-(28-01-2014)-ANNEXURE TO FORM 3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LSgyOC0wMS0yMDE0KS1DT1JSRVNQT05ERU5DRS5wZGY=" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-(28-01-2014)-CORRESPONDENCE.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LUNPUlJFU1BPTkRFTkNFIDEuMi5wZGY=" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-CORRESPONDENCE 1.2.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LUNPUlJFU1BPTkRFTkNFLTEuMy5wZGY=" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-CORRESPONDENCE-1.3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LUNPUlJFU1BPTkRFTkNFLTEuNC5wZGY=" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-CORRESPONDENCE-1.4.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LUNPUlJFU1BPTkRFTkNFLnBkZg==" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-CORRESPONDENCE.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LUZPUk0gMS0xLjEucGRm" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-FORM 1-1.1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LUZPUk0gMTMtMS4xLnBkZg==" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-FORM 13-1.1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LUZPUk0gMTMucGRm" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-FORM 13.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1rb2xucC0yMDA3LWZvcm0gMTgucGRm" target="_blank" style="word-wrap:break-word;">3784-kolnp-2007-form 18.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LUZPUk0gMi0xLjEucGRm" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-FORM 2-1.1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LUdQQS5wZGY=" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-GPA.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LU9USEVSUy5wZGY=" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-OTHERS.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LVBBLnBkZg==" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-PA.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=Mzc4NC1LT0xOUC0yMDA3LVJFUExZIFRPIEVYQU1JTkFUSU9OIFJFUE9SVC5wZGY=" target="_blank" style="word-wrap:break-word;">3784-KOLNP-2007-REPLY TO EXAMINATION REPORT.pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="265125-process-for-increasing-production-of-light-olefins-from-hydrocarbon-feedstock-in-catalytic-cracking.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="265127-method-and-system-of-conveying-of-location-of-mobile-device-using-automatically-synthesized-voice-calls.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>265126</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>3784/KOLNP/2007</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>07/2015</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>13-Feb-2015</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>09-Feb-2015</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>05-Oct-2007</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>PANASONIC CORPORATION,</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>1006, OAZA KADOMA, KADOMA SHI, OSAKA</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>HIROSHI YAHATA</td>
											<td>C/O MATSUSHITA ELECTRIC INDUSTRIAL CO. LTD. 1006, OAZA KADOMA, KADOMA-SHI, OSAKA 571-8501</td>
										</tr>
										<tr>
											<td>2</td>
											<td>TOMOYUKI OKADA</td>
											<td>C/O MATSUSHITA ELECTRIC INDUSTRIAL CO. LTD. 1006, OAZA KADOMA, KADOMA-SHI, OSAKA 571-8501</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>G11B 20/12</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/JP2006/307441</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2006-04-07</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>2005-111426</td>
									<td>2005-04-07</td>
								    <td>Japan</td>
								</tr>
								<tr>
									<td>2</td>
									<td>2005-111427</td>
									<td>2005-04-07</td>
								    <td>Japan</td>
								</tr>
								<tr>
									<td>3</td>
									<td>2005-111429</td>
									<td>2005-04-07</td>
								    <td>Japan</td>
								</tr>
								<tr>
									<td>4</td>
									<td>2005-111425</td>
									<td>2005-04-07</td>
								    <td>Japan</td>
								</tr>
								<tr>
									<td>5</td>
									<td>2005-111428</td>
									<td>2005-04-07</td>
								    <td>Japan</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/265126-recording-medium-reproducing-device-recording-method-and-reproducing-method by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 03:31:35 GMT -->
</html>
