<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/264185-a-controller-for-a-touch-surface-and-a-method-of-operating-a-touch-surface by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 00:07:56 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 264185:A CONTROLLER FOR A TOUCH SURFACE AND A METHOD OF OPERATING A TOUCH SURFACE</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">A CONTROLLER FOR A TOUCH SURFACE AND A METHOD OF OPERATING A TOUCH SURFACE</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>A multipoint touch surface controller is disclosed herein. The controller includes an integrated circuit including output circuitry for driving a capacitive. multi-touch sensor and input circuitry for reading the sensor. Also disclosed herein are various noise rejection and dynamic range enhancement techniques that permit the controller to be used with various sensors in various conditions without reconfiguring hardware.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>MULTIPOINT TOUCH SURFACE CONTROLLER<br>
Background<br>
[0001] There exist today many styles of input devices for<br>
performing operations in a computer system. The operations generally<br>
correspond to moving a cursor and/or making selections on a display<br>
screen. By way of example, the input devices may include buttons or keys,<br>
mice, trackballs, touch pads, joy sticks, touch screens and the like. Touch<br>
pads and touch screens (collectively "touch surfaces") are becoming<br>
increasingly popular because of their ease and versatility of operation as<br>
well as to their declining price. Touch surfaces allow a user to make<br>
selections and move a cursor by simply touching the surface, which may<br>
be a pad or the display screen, with a finger, stylus, or the like. In<br>
general, the touch surface recognizes the touch and position of the touch<br>
and the computer system interprets the touch and thereafter performs an<br>
action based on the touch.<br>
[0002] Of particular interest are touch screens. Various types of<br>
touch screens are described in applicant's co-pending patent application<br>
serial no. 10/840,862, entitled "Multipoint Touchscreen," filed May 6,<br>
2004, which is hereby incorporated by reference in its entirety. As noted<br>
therein, touch screens typically include a touch panel, a controller and a<br>
software driver. The touch panel is generally a clear panel with a touch<br>
sensitive surface. The touch panel is positioned in front of a display<br>
screen so that the touch sensitive surface covers the viewable area of the<br>
display screen. The touch panel registers touch events and sends these<br>
signals to the controller. The controller processes these signals and sends<br>
the data to the computer system. The software driver translates the touch<br>
events into computer events.<br><br>
[0003] There are several types of touch screen technologies<br>
including resistive, capacitive, infrared, surface acoustic wave,<br>
electromagnetic, near field imaging, etc. Each of these devices has<br>
advantages and disadvantages that are taken into account when designing<br>
or configuring a touch screen. One problem found in these prior art<br>
technologies is that they are only capable of reporting a single point even<br>
when multiple objects are placed on the sensing surface. That is, they<br>
lack the ability to track multiple points of contact simultaneously. In<br>
resistive and traditional capacitive technologies, an average of atl<br>
simultaneously occurring touch points are determined and a single point<br>
which falls somewhere between the touch points is reported. In surface<br>
wave and infrared technologies, it is impossible to discern the exact<br>
position of multiple touch points that fall on the same horizontal or vertical<br>
lines due to masking. In either case, faulty results are generated.<br>
[0004] These problems are particularly problematic in handheld<br>
devices, such as tablet PCs, where one hand is used to hold the tablet and<br>
the other is used to generate touch events. For example, as shown in<br>
Figs. 1A and IB, holding a tablet 2 causes the thumb 3 to overlap the<br>
edge of the touch sensitive surface 4 of the touch screen 5. As shown in<br>
Fig. 1A, if the touch technology uses averaging, the technique used by<br>
resistive and capacitive panels, then a single point that falls somewhere<br>
between the thumb 3 of the left hand and the index finger 6 of the right<br>
hand would be reported. As shown in Fig. IB, if the technology uses<br>
projection scanning, the technique used by infrared and surface acoustic<br>
wave panels, it is hard to discern the exact vertical position of the index<br>
finger 6 due to the large vertical component of the thumb 3. The tablet 2<br>
can only resolve the patches shown in gray. In essence, the thumb 3<br>
masks out the vertical position of the index finger 6.<br>
[0005] While virtually ail commercially available touch screen based<br>
systems available today provide single point detection only and have<br>
-2-<br><br>
limited resolution and speed, other products available today are able to<br>
detect multiple touch points. Unfortunately, these products only work on<br>
opaque surfaces because of the circuitry that must be placed behind the<br>
electrode structure. Examples of such products include the Fingerworks<br>
series of touch pad products. Historically, the number of points detectable<br>
with such technology has been limited by the size of the detection<br>
circuitry.<br>
[0006] Therefore, what is needed in the art is a multi-touch capable<br>
touch screen controller that facilitates the use of transparent touch<br>
sensors and provides for a conveniently integrated package.<br>
Summary<br>
[0007] A controller for multi-touch touch surfaces is disclosed<br>
herein. One aspect of the multi-touch touch surface controller relates to<br>
the integration of drive electronics for stimulating the multi-touch sensor<br>
and sensing circuits for reading the multi-touch sensor into a single<br>
integrated package.<br>
[0008] Another aspect of the controller relates to a technique for<br>
suppressing noise in the sensor by providing a plurality of stimulus<br>
waveforms to the sensor wherein the waveforms have different<br>
frequencies. This permits at least one noise-free detection cycle in cases<br>
where noise appears at a particular frequency.<br>
[0009] Another aspect of the controller relates to a charge amplifier<br>
that includes programmable components, namely, programmable resistors<br>
and capacitors to allow the circuit to be easily reconfigured to provide<br>
optimum sensing configurations for a variety of sensor conditions.<br>
[0010] Another aspect of the controller relates to an offset<br>
compensation circuit that expands the dynamic range of the controller by<br>
eliminating a static portion of the multi-touch surface sensor output<br>
-3-<br><br>
allowing the full dynamic range of the sensing circuitry to be allocated to<br>
the changing portions of the output signal.<br>
[0011]        Another aspect of the controller relates to a demodulation<br>
circuit that enhances the noise immunity of the sensor arrangement by<br>
application of particular demodulation waveforms known to have particular<br>
frequency characteristics.<br>
[0012]        Another aspect of the controller relates to the application of<br>
various algorithms to the sensor outputs obtained from the multiple<br>
stimulus frequencies described above to further increase noise immunity<br>
of the system.<br>
[0013]        These and other aspects will be more readily understood by<br>
reference to the following detailed description and figures.<br>
Brief Description of the Drawings<br>
[0014]        Figures 1A and 1B illustrates certain problems with prior art<br>
touch screen technologies.<br>
[0015]        Figure 2 illustrates a perspective view of a computing device<br>
incorporating a multi-touch touch screen and multi-touch touch screen<br>
controller according to certain teachings of the present disclosure.<br>
[0016]        Figure   3   is  a   block  diagram   of  a   computing   device<br>
incorporating a multi-touch touch screen and multi-touch touch screen<br>
controller according to certain teachings of the present disclosure.<br>
[0017]         Figures 4A and 4B illustrate two possible arrangement of<br>
drive and sense electrodes in a multi-touch touch surface.<br>
[0018]        Figure  5   is  a   layer diagram   illustrating  communication<br>
between the multi-touch surface and the host computer device by way of<br>
a multi-touch controller incorporating various teachings of the present<br>
disclosure.<br>
-4-<br><br>
[0019]        Figure 6 is an equivalent circuit showing the output circuitry<br>
of the controller, a cell of the multi-touch sensor, and the input circuitry of<br>
a multi-touch controller incorporating various teachings of the present<br>
disclosure.<br>
[0020]        Figure   7  is  a  circuit  schematic  of a   charge  amplifier<br>
incorporated   in   certain   embodiments   of   a   multi-touch   controller<br>
incorporating various teachings of the present disclosure.<br>
[0021]        Figure 8 is a block diagram of the multi-touch surface and<br>
multi-touch controller system in accordance with various teachings of the<br>
present disclosure.<br>
[0022]        Figure 9 illustrates the sequence in which drive waveforms of<br>
varying frequencies are applied to the multi-touch sensor in accordance<br>
with certain teachings of the present disclosure.<br>
[0023]        Figure 10 is a block diagram illustrating the input circuitry of<br>
a multi-touch controller incorporating certain teachings of the present<br>
disclosure.<br>
[0024]        Figures   11A   and   11B   illustrate   various   demodulation<br>
waveforms together with frequency spectra of their passbands.<br>
[0025]        Figure 12 illustrates a sequence of stimulus waveforms,<br>
together with a particular demodulation waveform, and the resulting<br>
output.<br>
[0026]        Figure 13 illustrates the noise rejection technique employed<br>
by the majority rules algorithm.<br>
Detailed Description<br>
[0027] A multipoint touch screen controller (MTC) is described<br>
herein. The following embodiments of the invention, described in terms of<br>
devices and applications compatible with computer systems manufactured<br>
-5-<br><br>
by Apple Computer, Inc. of Cupertino, California, are illustrative only and<br>
should not be considered limiting in any respect.<br>
[0028] Fig. 2 is a perspective view of a touch screen display<br>
arrangement 30. Display arrangement 30 includes a display 34 and a<br>
transparent touch screen 36 positioned in front of display 34. Display 34<br>
may be configured to display a graphical user interface (GUI) including<br>
perhaps a pointer or cursor as well as other information to the user.<br>
Transparent touch screen 36 is an input device that is sensitive to a user's<br>
touch, allowing a user to interact with the graphical user interface on<br>
display 34. In general, touch screen 36 recognizes touch events on<br>
surface 38 of touch screen 36 and thereafter outputs this information to a<br>
host device. The host device may, for example, correspond to a computer<br>
such as a desktop, laptop, handheld or tablet computer. The host device<br>
interprets the touch event and thereafter performs an action based on the<br>
touch event.<br>
[0029] In contrast to prior art touch screens, touch screen 36 shown<br>
herein is configured to recognize multiple touch events that occur<br>
simultaneously at different locations on touch sensitive surface 38. That<br>
is, touch screen 36 allows for multiple contact points T1-T4 to be tracked<br>
simultaneously. Touch screen 36 generates separate tracking signals Sl-<br>
S4 for each touch point T1-T4 that occurs on the surface of touch screen<br>
36 at the same time. In one embodiment, the number of recognizable<br>
touches may be about 15 which allows for a user's 10 fingers and two<br>
palms to be tracked along with 3 other contacts. The multiple touch<br>
events can be used separately or together to perform singular or multiple<br>
actions in the host device. Numerous examples of multiple touch events<br>
used to control a host device are disclosed in U.S. Patents 6,323,846;<br>
6,888,536; 6,677,932; 6,570,557, and co-pending U.S. patent applications<br>
11/015,434;      10/903,964;     11/048,264;     11/038,590;      11/228,758;<br>
-6-<br><br>
11/228,700; 11/228,737; 11/367,749, each of which is hereby<br>
incorporated by reference in its entirely.<br>
[0030] Fig. 3 is a block diagram of a computer system 50,<br>
employing a multi-touch touch screen. Computer system 50 may be, for<br>
example, a personal computer system such as a desktop, laptop, tablet, or<br>
handheld computer. The computer system could also be a public<br>
computer system such as an information kiosk, automated teller machine<br>
(ATM), point of sale machine (POS), industrial machine, gaming machine,<br>
arcade machine, vending machine, airline e-ticket terminal, restaurant<br>
reservation terminal, customer service station, library terminal, learning<br>
device, etc.<br>
[0031] Computer system 50 includes a processor 56 configured to<br>
execute instructions and to carry out operations associated with the<br>
computer system 50. Computer code and data required by processor 56<br>
are generally stored in storage block 58, which is operatively coupled to<br>
processor 56. Storage block 58 may include read-only memory (ROM) 60,<br>
random access memory (RAM) 62, hard disk drive 64, and/or removable<br>
storage media such as CD-ROM, PC-card, floppy disks, and magnetic<br>
tapes. Any of these storage devices may also be accessed over a network.<br>
Computer system 50 also includes a display device 68 that is operatively<br>
coupled to the processor 56. Display device 68 may be any of a variety of<br>
display types including liquid crystal displays (e.g., active matrix, passive<br>
matrix, etc.), cathode ray tubes (CRT), plasma displays, etc.<br>
[0032] Computer system 50 also includes touch screen 70, which is<br>
operatively coupled to the processor 56 by I/O controller 66 and touch<br>
screen controller 76. (The I/O controller 66 may be integrated with the<br>
processor 56, or it may be a separate component.) In any case, touch<br>
screen 70 is a transparent panel that is positioned in front of the display<br>
device 68, and may be integrated with the display device 68 or it may be a<br>
separate component. Touch screen 70 is configured to receive input from<br>
-7-<br><br>
a user's touch and to send this information to the processor 56. In most<br>
cases, touch screen 70 recognizes touches and the position and<br>
magnitude of touches on its surface.<br>
[0033] Better understanding of the interface between the touch<br>
sensor and the host computer system may be had with reference to Fig. 5,<br>
which is a layer diagram of the system illustrated in Fig. 3. The touch<br>
sensor 301 resides at the lowermost layer. In a preferred embodiment,<br>
the sensor interfaces with an ASIC (application specific integrated circuit)<br>
305 that stimulates the sensor and reads the raw sensor output as<br>
described in more detail below. ASIC 305 interfaces via signaling 306 with<br>
a DSP (digital signal processor) and/or microcontroller 307, which<br>
generates the capacitance images. Together ASIC 305 and<br>
DSP/microcontroller 307 form the multipoint touch screen controller.<br>
[0034] DSP/Microcontroller 307 includes an interface 308 for<br>
accepting the signaling 306 from ASIC 305, and these signals are then<br>
passed to a data capture and error rejection layer 309. Data from this<br>
layer may be accessed both for calibration, baseline and standby<br>
processing by module 310, as well as feature (i.e., touch point) extraction<br>
and compression module 311. Once the features are extracted they are<br>
passed as high-level information to the host computer 302 via interface<br>
303. Interface 303 may be, for example, a USB (universal serial bus)<br>
interface. Alternatively, other forms of interface, such as IEEE 1394<br>
("Firewire"), RS-232 serial interface, SCSI (small computer systems<br>
interface), etc. could be used.<br>
[0035] The exact physical construction of the sensing device is not<br>
necessary for a complete understanding touch screen controller disclosed<br>
herein. Nonetheless, details of the construction may be understood by<br>
reference to the patents and patent applications incorporated by reference<br>
above.    For purposes of the present description, the sensor may be<br>
-8-<br><br>
assumed to be a mutual capacitance device constructed as described<br>
below with reference to Figs. 4A and 4B.<br>
[0036] The sensor panel is comprised of a two-layered electrode<br>
structure, with driving lines on one layer and sensing lines on the other.<br>
In either case, the layers are separated by a dielectric material. In the<br>
Cartesian arrangement of Fig. 4A, one layer is comprised of N horizontal,<br>
preferably equally spaced row electrodes 81, while the other layer is<br>
comprised of M vertical, preferably equally spaced column electrodes 82.<br>
In a polar arrangement, illustrated in Fig. 4B, the sensing lines may be<br>
concentric circles and the driving lines may be radially extending lines (or<br>
vice versa). As will be appreciated by those skilled in the art, other<br>
configurations based on an infinite variety of coordinate systems are also<br>
possible.<br>
[0037] Each intersection 83 represents a pixel and has a<br>
characteristic mutual capacitance, CSIG. A grounded object (such as a<br>
finger) that approaches a pixel 83 from a finite distance shunts the electric<br>
field between the row and column intersection, causing a decrease in the<br>
mutual capacitance CSIG at that location, In the case of a typical sensor<br>
panel, the typical signal capacitance CSIG is about 0.75pF and the change<br>
induced by a finger touching a pixel, is about 0.25pF.<br>
[0038] The electrode material may vary depending on the<br>
application. In touch screen applications, the electrode material may be<br>
ITO (Indium Tin Oxide) on a glass substrate. In a touch tablet, which<br>
need not be transparent, copper on an FR4 substrate may be used. The<br>
number of sensing points 83 may also be widely varied. In touch screen<br>
applications, the number of sensing points 83 generally depends on the<br>
desired sensitivity as well as the desired transparency, of the touch screen<br>
70. More nodes or sensing points generally increases sensitivity, but<br>
reduces transparency (and vice versa).<br>
-9-<br><br>
[0039] During operation, each row (or column) is sequentially<br>
charged by driving it with a predetermined voltage waveform 85<br>
(discussed in greater detail below). The charge capacitively couples to the<br>
columns (or rows) at the intersection. The capacitance of each<br>
intersection 83 is measured to determine the positions of multiple objects<br>
when they touch the touch surface. Sensing circuitry monitors the charge<br>
transferred and time required to detect changes in capacitance that occur<br>
at each node. The positions where changes occur and the magnitude of<br>
those changes are used to identify and quantify the multiple touch events.<br>
Driving each row and column and sensing the charge transfer is the<br>
function of a multipoint touch screen controller.<br>
[0040]	Fig. 6 is a simplified diagram of the equivalent mutual<br>
capacitance circuit 220 for each coupling node. Mutual capacitance circuit<br>
220 includes a driving line 222 and a sensing line 224 that are spatially<br>
separated thereby forming a capacitive coupling node 226. When no<br>
object is present, the capacitive coupling at node 226 stays fairly constant.<br>
When an object, such as a finger, is placed proximate the node 226, the<br>
capacitive coupling through node 226 changes. The object effectively<br>
shunts the electric field so that the charge transferred across node 226 is<br>
less.<br>
[0041] With reference to Figs. 5 and 8, ASIC 305 generates all the<br>
drive waveforms necessary to scan the sensor panel. Specifically, the<br>
microprocessor sends a clock signal 321 to set the timing of the ASIC,<br>
which in turn generates the appropriate timing waveforms 322 to create<br>
the row stimuli to the sensor 301. Decoder 311 decodes the timing<br>
signals to drive each row of sensor 301 in sequence. Level shifter 310<br>
converts timing signals 322 from the signaling level (e.g., 3.3V) to the<br>
level used to drive the sensor (e.g., 18V).<br>
[0042] Each row of the sensor panel is driven determined by<br>
microprocessor 307.   For noise rejection purposes it is desirable to drive<br>
-10-<br><br>
the panel at multiple different frequencies for noise rejection purposes.<br>
Noise that exists at a particular drive frequency may not, and likely will not<br>
exist at the other frequencies. In a preferred embodiment, each sensor<br>
panel row is stimulated with three bursts of twelve square wave cycles<br>
(50% duty-cycle, 18V amplitude), while the remaining rows are kept at<br>
ground. For better noise rejection, described in greater detail below the<br>
frequency of each burst is different, exemplary burst frequencies are<br>
140kHz, 200kHz, and 260Khz.<br>
[0043] During each burst of pulses ASIC 305 takes a measurement<br>
of the column electrodes. This process is repeated for all remaining rows<br>
in the sensor panel. The results are three images, each image taken at a<br>
different stimulus frequency.<br>
[0044] Additionally, it is preferable to minimize the amount of<br>
stimulus frequency change required for each subsequent burst. Therefore<br>
a frequency hopping pattern that minimizes the changes is desirable.<br>
Figure 29 shows one possible frequency hopping pattern. In this<br>
arrangement, a first row is driven with a 140 kHz burst, then a 200 kHz,<br>
and finally a 260 kHz burst. Then a next row is driven with three bursts at<br>
260 kHz, 200 kHz, and 140 kHz, respectively. This particular frequency<br>
pattern was chosen to keep changes between frequencies small and allow<br>
the frequency transitions have to be smooth and glitch free. However,<br>
other frequency hopping arrangements are also possible, including<br>
scanning more than three frequencies, scanning the frequencies in a<br>
quasi-random sequence rather than the ordered pattern described, and<br>
adaptive frequency hopping, in which the scan frequencies are selected<br>
based on the noise environment.<br>
[0045] Turning back to Fig. 6, sensing line 224 is electrically coupled<br>
to a capacitive sensing circuit 230. Capacitive sensing circuit 230 detects<br>
and quantifies the current change and the position of the node 226 where<br>
the current change occurred and reports this information to a  host<br>
-11-<br><br>
computer. The signal of interest is the capacitance CSIG, which couples<br>
charge from RC network A to RC network B. The output from RC network<br>
B connects directly to the analog input terminals of ASIC 305. ASIC 305<br>
also uses the clock signal 321 (Fig. 8) from microprocessor 307 (Fig. 8) to<br>
time the detection and quantification of the capacitance signals.<br>
[0046] Figure 10 is a block diagram illustrating the input stage of<br>
ASIC 305. The input signal is first received by a charge amplifier 401.<br>
The charge amplifier performs the following tasks: (1) charge to voltage<br>
conversion, (2) charge amplification, (3) rejection or stray capacitance<br>
present at the column electrode, and (4) anti aliasing, and (5) gain<br>
equalization at different frequencies. Figure 7 is a diagram of one possible<br>
charge amplifier 401.<br>
[0047] Charge to voltage conversion is performed by a capacitor CFB<br>
in the feedback path of an operational amplifier 450. In one embodiment,<br>
the feedback capacitor can be programmed with values ranging from 2 to<br>
32 pF, which allows the output voltage level to be adjusted to obtain the<br>
best dynamic range for a range of CSIG values. The feedback resistor RFB<br>
is also preferably programmable to control the amplifier gain.<br>
[0048] Because CSIG will vary across a touch surface because of a<br>
variety of manufacturing tolerance related factors, it is useful to adjust the<br>
charge amplifier feedback capacitance CFB on a per-pixel basis. This<br>
allows gain compensation to be performed to optimize the performance of<br>
each pixel. In one embodiment, quasi-per pixel adjustment is performed<br>
as follows: The feedback capacitor CFB has its value set by a register<br>
known as CFB_REG. The value of CFB_REG is set according to the<br>
following equation:<br>
CFB_REG[Y]=CFB_UNIV+CFB[Y]<br>
where Y is an individual pixel within a row, CFB_UNIV is adjusted on a row<br>
by row basis, and CFB[Y] is a lookup table loaded at system startup. In<br>
alternative arrangements, CFB_UNIV may be constant for all rows, or the<br>
-12-<br><br>
CFB[Y] lookup table may be switched out on a row by row basis. Also,<br>
although discussed in terms of rows and columns, the adjustment<br>
arrangement is equally applicable to non-Cartesian coordinate systems.<br>
[0049] Obviously it is desirable to measure CSIG while rejecting as<br>
much as possible the effects of any parasitic resistance and capacitance in<br>
the physical sensor. Rejection of parasitic resistance and capacitance in<br>
the sensor may be accomplished by holding the non-inverting input 451 of<br>
amplifier 45D at a constant value, e.g., ground. The inverting input 452 is<br>
coupled to the node being measured. As will be appreciated by those<br>
skilled in the art, inverting input 452 (connected to the column electrode<br>
being measured) is thus held at virtual ground. Therefore any parasitic<br>
capacitance present at the column electrode, e.g., PCB stray capacitance<br>
or dynamic stray capacitance caused by the user touching the column<br>
electrode, is rejected because the net charge of the stray capacitor does<br>
not change {i.e., the voltage across the stray capacitance is held at virtual<br>
ground). Therefore the charge amplifier output voltage 453 is only a<br>
function of the stimulus voltage, CSIG, and CFB. Because the stimulus<br>
voltage and CFB are determined by the controller, CSIG may be readily<br>
inferred.<br>
[0050] A series resistor 454 between the ASIC input pin 455 and the<br>
inverting input 452 of the charge amplifier forms an anti-aliasing filter in<br>
combination with the feedback network of RFB and CFB.<br>
[0051] The high pass roll off of the charge amplifier is set by the<br>
parallel combination of the feedback resistor RFB and the feedback<br>
capacitor CFB.<br>
[0052] Again with reference to Fig. 10, the output of charge<br>
amplifier 401 passes to demodulator 403. Demodulator 403 is a 5-bit<br>
quantized continuous time analog (four-quadrant) multiplier. The purpose<br>
of demodulator 403 is to reject out of band noise sources (from cell<br>
phones, microwave ovens, etc.) that are present on the signal entering<br>
-13-<br><br>
ASIC 305. The output 402 of the charge amplifier (VSIG) is mixed with a 5-<br>
bit quantized waveform that is stored in a lookup table 404. The shape,<br>
amplitude, and frequency of the demodulation waveform is determined by<br>
programming suitable coefficients into lookup table 404. The<br>
demodulation waveform determines pass band, stop band, stop band<br>
ripple and other characteristics of the mixer. In a preferred embodiment,<br>
Gaussian shaped sine wave is used as the demodulation waveform. A<br>
Gaussian sine wave provides a sharp pass band with reduced stop band<br>
ripple.<br>
[0053] Another aspect of demodulator 403 relates to demodulator<br>
phase delay adjustment. As can be seen with reference to Fig. 10, the<br>
touch surface electrodes can be represented by a RC networks (RC<br>
Network A and RC Network B) that have a mutual capacitance (CSIG) at<br>
the point they intersect. Each RC network constitutes a low pass filter,<br>
while CSIG introduces a high pass filter response. Therefore the touch<br>
panel looks like a bandpass filter, only allowing signals with a certain<br>
frequency ranges to pass the panel. This frequency range, i.e., those<br>
. frequencies that are below the cutoff of CSIG but above the cutoff of RC<br>
Networks A and B, determines the stimulus frequencies that may be used<br>
to drive the touch panel.<br>
[0054] The panel will therefore impose a phase delay on the<br>
stimulus waveform passing through it. This phase delay is negligible for<br>
traditional opaque touch panels, wherein the electrode structure is<br>
typically formed by PCB traces, which have negligible resistance to their<br>
characteristic impedance. However, for transparent panels, typically<br>
constructed using Indium Tin Oxide (ITO) conductive traces, the resistive<br>
component may be quite large. This introduces a significant time (phase)<br>
delay in the propagation of the stimulus voltage through the panel. This<br>
phase delay causes the demodulation waveform to be delayed with<br>
-14-<br><br>
respect to the signal entering the pre-amplifier, thereby reducing the<br>
dynamic range of the signal coming out of the ADC.<br>
[0055] To compensate for this phase delay, a delay clock register<br>
("DCL", not shown) may be provided, which can be used to delay the<br>
demodulation waveform relative to the signal entering the preamplifier<br>
therefore compensating for the external panel delay and maximizing the<br>
dynamic range. This register is input into the demodulator 403 and simply<br>
delays the demodulation waveform by a predetermined amount. The<br>
amount may be determined either on startup of the panel by<br>
measurement, or may be estimated for the panel as a whole based on<br>
known manufacturing characteristics. Each pixel of the touch surface may<br>
have its own uniquely determined delay parameter to fully optimize the<br>
reading circuitry, or the delay parameter may be determined on a row by<br>
row basis. Adjustment would be generally similar to the techniques<br>
discussed above for adjustment of the charge amplifier feedback capacitor<br>
and the offset compensation voltage.<br>
[0056] The demodulated signal is then passed to offset<br>
compensation circuitry. The offset compensation circuitry comprises mixer<br>
402 and programmable offset DAC 405. Mixer 402 takes the output<br>
voltage 453 of the demodulator and subtracts an offset voltage (discussed<br>
below) to increase the dynamic range of the system.<br>
[0057] Offset compensation is necessary because the pixel<br>
capacitance CSIG is comprised of a static part and a dynamic part. The<br>
static part is a function of sensor construction. The dynamic part is a<br>
function of the change of CSIG when the linger approaches the pixel, and is<br>
thus the signal of interest. The purpose of the offset compensator is to<br>
eliminate or minimize the static component thereby extending the dynamic<br>
range of the system.<br>
[0058]        As   noted   above,   the   offset  compensation   circuitry   is<br>
comprised of two parts, a programmable offset DAC 405 and a mixer 402.<br>
-15-<br><br>
Offset DAC 405 generates a programmable offset voltage from the digital<br>
static offset value VOFF_REG. This digital value is converted into a static<br>
analog voltage (or current, if operating in the current domain) by the DAC<br>
and then mixed (by mixer 403b) with a voltage (or current) set by the<br>
absolute value (determined by block 404b) of the demodulation waveform.<br>
The result is a rectified version of the demodulation waveform, the<br>
amplitude of which is set by the static value of VOFF_REG and the<br>
absolute portion of the demodulation waveform currently retrieved from<br>
the DMOD lookup table 404. This allows for the right amount of offset<br>
compensation for a given portion of the demodulation waveform.<br>
Therefore the offset compensation waveform effectively tracks the<br>
demodulation waveform.<br>
[0059] As with the charge amplifier feedback capacitor, it is useful<br>
to adjust the offset compensation circuitry to account for variations in the<br>
individual pixel capacitance due to manufacturing tolerances, etc. The<br>
adjustment may be substantially similar to that discussed above with<br>
respect to the charge amplifier feedback capacitor. Specifically, the offset<br>
voltage value stored in VOFF_REG may be calculated as follows:<br>
VOFF_REG[Y]=VOFF_UNIV+VOFF[Y]<br>
where Y is the individual column within a row, VOFFJJNIV is an offset<br>
voltage set on a row by row basis, and VOFF[Y] is a lookup table. Again,<br>
the adjustment could be performed on a true pixel by pixel basis or<br>
VOFFJJNIV could be a single constant value, depending on a particular<br>
implementation. Also, although discussed in terms of rows and columns,<br>
the adjustment arrangement is equally applicable to non-Cartesian<br>
coordinate systems.<br>
[0060] As an alternative to the arrangement described above with<br>
respect to Fig. 10, the offset compensation could take place prior to<br>
demodulation. In this case, the shape of the offset compensation<br>
waveform has to match the waveform coming out of the preamplifier<br>
-16-<br><br>
rather than the waveform coming out of the demodulator, i.e., it has to be<br>
a square wave, assuming negligible attenuation in the panel, such that the<br>
shape of the drive waveform is preserved. Also, if offset compensation is<br>
performed first, the offset waveform is an AC waveform with respect to<br>
the reference voltage, i.e., the maxima are positive in respect to VREF and<br>
the minima are negative in respect to VREF. The amplitude of the offset<br>
waveform is equivalent to the amount of offset compensation.<br>
Conversely, if demodulation is performed first, the offset waveform is a DC<br>
waveform, i.e. it is either positive in respect to Vref or negative (since the<br>
demodulated waveform is also DC in respect to Vref). Again, the amplitude<br>
in this case is equivalent to the amount of offset compensation for every<br>
part of the demodulated waveform. In essence, the offset compensation<br>
circuit needs to correlate the amount of offset compensation needed<br>
dependent on the shape of the waveform.<br>
[0061] The demodulated, offset compensated signal is then<br>
processed by programmable gain ADC 406. In one embodiment, ADC 406<br>
may be a sigma-delta, although similar type ADCs (such as a voltage to<br>
frequency converter with a subsequent counter stage) could be used. The<br>
ADC performs two functions: (1) it converts the offset compensated<br>
waveform out of the mixer arrangement (offset and signal mixer) to a<br>
digital value; and (2) it performs low pass filtering functions, i.e., it<br>
averages the rectified signal coming out of the mixer arrangement. The<br>
offset compensated, demodulated signal looks like a rectified Gaussian<br>
shaped sine wave, whose amplitude is a function of CFB and CSIG. The ADC<br>
result returned to the host computer is actually the average of that signal.<br>
[0062] One advantage of using a sigma delta ADC is that such ADCs<br>
are much more efficient for performing averaging in the digital domain.<br>
Additionally, digital gates are a lot smaller than analog low pass filters and<br>
sample and hold elements, thus reducing the size of the total ASIC.  One<br>
-17-<br><br>
skilled in the art will further appreciated other advantages, particularly<br>
with regard to power consumption and clock speed.<br>
[0063] Alternatively, one could use an ADC separate from the<br>
controller ASIC. This would require a multiplexor to share the ADC<br>
between multiple channels and a sample and hold circuit for each channel<br>
to average and hold the average of the demodulation waveform. This<br>
would likely consume so much die area as to be impractical for controllers<br>
intended for use with touch surfaces having a large number of pixels.<br>
Additionally, to achieve acceptable operation, the external ADC would<br>
need to operate very fast, as a large number of pixels must be processed<br>
very quickly to provide timely and smooth results in response to a user's<br>
input.<br>
[0064] As noted above, the sensor is driven at three different<br>
frequencies, resulting in three capacitance images, which are used for<br>
noise rejection as described below. The three frequencies are chosen<br>
such that the pass band at one particular frequency does not overlap with<br>
the pass bands at the other frequencies. As noted above, a preferred<br>
embodiment uses frequencies of 140 kHz, 200 kHz, and 240 kHz. The<br>
demodulation waveform is chosen such that the side bands are<br>
suppressed.<br>
[0065] As noted above, a Gaussian enveloped sine wave, illustrated<br>
in Fig. 11A together with its passband frequency spectrum, is one<br>
preferred demodulation waveform. The Gaussian shaped sine wave<br>
provides a well-defined pass band with minimum stop band ripple.<br>
Alternatively, other waveforms having well defined pass bands with<br>
minimum stop band ripple could also be used. For example, a ramp-<br>
enveloped sine wave, illustrated in Fig. 11B together with its passband<br>
frequency spectrum, also has a well defined pass band, although the stop<br>
band ripple is slightly greater than that for a Gaussian enveloped sine<br>
-18-<br><br>
wave. As will be appreciated by those skilled in the art, other waveforms<br>
coutd also be used.<br>
[0066] Turning now to Fig. 12, nine waveforms are illustrated that<br>
explain the noise suppression features of the system. Voltage waveform<br>
501 is a square wave demonstrating the stimulus waveform applied to the<br>
sensor. Waveform 504 is the Gaussian enveloped sine wave signal used<br>
as a demodulation waveform. Waveform 507 is the output of the<br>
demodulator, i.e., the product of the waveforms 501 and 504. Note that it<br>
provides a well defined pulse at the fundamental frequency of the applied<br>
square wave voltage.<br>
[0067]        The center column illustrates an exemplary noise waveform<br>
502. Demodulation waveform 505 is the same as demodulation waveform<br>
504.   Note that the demodulated noise signal 508 does not produce a<br>
significant spike, because the fundamental frequency of the noise signal is<br>
outside the passband of the demodulation signal.<br>
[0068]        The composite of the excitation waveform and noise signal is<br>
illustrated in 503.   Again, demodulation waveform 506 is the same as<br>
demodulation waveforms 505 and 504. The demodulated composite does<br>
still   show   the   noise  waveform,   although  various  signal   processing<br>
algorithms may be applied to extract this relatively isolated spike.<br>
[0069]        Additionally, noise rejection may accomplished by providing<br>
multiple stimulus voltage at different frequencies and applying a majority<br>
rules algorithm to the result.   In a majority rules algorithm, for each<br>
capacitance node, the two frequency channels that provide the best<br>
amplitude match are averaged and the remaining channel is disposed of.<br>
For example,  in Fig.   13 vertical line 600 represents the  measured<br>
capacitance, with the markings 601, 602, and 603 representing the three<br>
values measured at three stimulus frequencies.    Values 602 and 603<br>
provide the best match, possibly suggesting that value 601 is corrupted.<br>
-19-<br><br>
Thus value 601 is discarded and values 602 and 603 are averaged to form<br>
the output.<br>
[0070] Alternatively, a median filter could be applied, in which case<br>
value 602, i.e., the median value would be selected as an output. As yet<br>
another alternative, the three results could simply be averaged, in which<br>
case a value somewhere between value 601 and 602 would result. A<br>
variety of other noise rejection techniques for multiple sample values will<br>
be obvious to those skilled in the art, any of which may suitably be used<br>
with the controller described herein.<br>
[0071] Operation of the circuit may be further understood with<br>
respect to Fig. 14, which is a flowchart depicting operation of the<br>
controller. One skilled in the art will appreciate that various timing and<br>
memory storage issues are omitted from this flowchart for the sake of<br>
clarity.<br>
[0072] Image acquisition begins at: block 701. The system then sets<br>
the clock so as to acquire samples at the middle clock frequency {e.g.,<br>
200kHz) as discussed above with respect to Fig. 9 (block 702). The<br>
various programmable registers, which control such parameters as voltage<br>
offset, amplifier gain, delay clocks, etc., are then updated (block 703). All<br>
columns are read, with the result stored as a Mid Vector (block 704) The<br>
high clock frequency is then set (block 705), and the steps of updating<br>
registers (block 706) and reading all columns and storing the result (step<br>
707) are repeated for the high sample frequency. The clock is then set to<br>
the low frequency (step 708) and the register update (block 709) and<br>
column reading (block 710) are repeated for the low sample frequency.<br>
[0073] The three vectors are then offset compensated, according to<br>
the algorithm described above (block 711). The offset compensated<br>
vectors are then subjected to a median filter as described above.<br>
Alternatively, the offset compensated vectors could be filtered by the<br>
majority rules algorithm described with respect to Fig. 13 or any other<br>
-20-<br><br>
suitable filtering technique. In any case, the result is stored. If more<br>
rows remain, the process returns to the mid frequency sampling at block<br>
702). If all rows are completed (block 713), the entire image is output to<br>
the host device (block 714), and a subsequent new image is acquired<br>
(block 701).<br>
[0074] While this invention has been described in terms of several<br>
preferred embodiments, there are alterations, permutations, and<br>
equivalents, which fall within the scope of this invention. For example, the<br>
term "computer" does not necessarily mean any particular kind of device,<br>
combination of hardware and/or software, nor should it be considered<br>
restricted to either a multi purpose or single purpose device. Additionally,<br>
although the embodiments herein have been described in relation to touch<br>
screens, the teachings of the present invention are equally applicable to<br>
touch pads or any other touch surface type of sensor. Furthermore,<br>
although the disclosure is primarily directed at capacitive sensing, it should<br>
be noted that some or all of the features described herein may be applied<br>
to other sensing methodologies. It should also be noted that there are<br>
many alternative ways of implementing the methods and apparatuses of<br>
the present invention. It is therefore intended that the following appended<br>
claims be interpreted as including all such alterations, permutations, and<br>
equivalents as fall within the true spirit and scope of the present invention.<br>
-21-<br><br>
What is claimed is:<br>
1.	A controller for a multi-touch surface, the multi-touch surface<br>
having at least one drive electrode, at least one sense electrode,<br>
and at least one node disposed at an intersection of the at least<br>
one drive electrode and the at least one sense electrode, the<br>
controller comprising:<br>
output circuitry operatively connected to the at least one<br>
drive electrode, the output circuitry being configured<br>
to generate timing signals that may be used to<br>
generate drive waveforms for the multi-touch surface;<br>
and<br>
input circuitry operatively connected to the at least one<br>
sense electrode, the input circuitry being configured<br>
to determine proximity of an object at each node by<br>
measuring capacitive coupling of the drive waveforms<br>
from the drive electrode to the sense electrode;<br>
wherein the output circuitry and input circuitry are part of<br>
a single application specific integrated circuit.<br>
2.	The controller of claim 1 further comprising decoding and level<br>
shifting circuitry connected between the output circuitry and the<br>
drive electrode, the decoding and level shifting circuitry being<br>
configured  to  receive  the  timing  signals  and  generate drive<br>
waveforms for the multi-touch surface.<br>
3.	The controller of claim 1 wherein the decoding and level shifting<br>
circuitry are part of the single application specific integrated circuit.<br>
-22-<br><br>
4.	The controller of claim 1 wherein the drive waveforms comprise:<br>
a first periodic waveform having a first predetermined<br>
frequency; and<br>
at least one  additional  periodic waveform  having an<br>
additional predetermined frequency different from the<br>
first predetermined frequency;<br>
wherein the first periodic waveform and at least one<br>
additional periodic waveforms are applied sequentially<br>
to the drive electrode.<br>
5.	The controller of claim 4 wherein the at least one additional<br>
periodic waveforms comprise a second periodic waveform having a<br>
second predetermined frequency and a third periodic waveform<br>
having a third  predetermined frequency, each of the second<br>
predetermined frequency and the third predetermined frequency<br>
being different from the first predetermined frequency and different<br>
from each other.<br>
6.	The controller of claim 1 wherein the input circuitry comprises a<br>
charge amplifier, the charge amplifier further comprising:<br>
an operational amplifier having an inverting input<br>
terminal, a non-inverting input terminal, and an<br>
output terminal, wherein the non-inverting input<br>
terminal is operatively connected to the at least one<br>
sense electrode;<br>
a feedback capacitor connected between the output<br>
terminal and the inverting input terminal, wherein the<br>
feedback capacitor is programmable to take on a<br>
range of values; and<br>
-23-<br><br>
a feedback resistor connected between the output<br>
terminal and the inverting input terminal, wherein the<br>
feedback resistor is programmable to take on a range<br>
of values.<br>
7.	The controller of claim 6 wherein the charge amplifier further<br>
comprises  a   resistor coupled  between  the  non-inverting  input<br>
terminal and the at least one sense electrode to form an anti-aliasing<br>
filter  in  combination  with  the  feedback  resistor and<br>
feedback capacitor.<br>
8.	The controller of claim 6 wherein the non-inverting input of the<br>
amplifier is coupled to ground.<br>
9.	The controller of claim 1 wherein the input circuitry comprises an<br>
offset compensator, the offset compensator comprising:<br>
a programmable offset digital to analog converter adapted<br>
to generate an offset signal corresponding to a static<br>
component of the capacitive coupling between the<br>
drive electrode and the sense electrode; and<br>
a subtracter circuit configured to subtract the offset signal<br>
from a measured signal indicative of the capacitive<br>
coupling between the at least one drive electrode and<br>
the at least one sense electrode.<br>
10. The controller of claim 6 wherein the input circuitry further<br>
comprises an offset compensator, the offset compensator<br>
comprising:<br>
a programmable offset digital to analog converter adapted<br>
to generate an offset signal corresponding to a static<br>
-24-<br><br>
component of the capacitive coupling between the<br>
drive electrode and the sense electrode; and<br>
a subtractor circuit configured to subtract the offset signal<br>
from an output signal of the charge amplifier, the<br>
output signal being indicative of the capacitive<br>
coupling between the at least one drive electrode and<br>
the at least one sense electrode.<br>
11.	The controller of claim 1 wherein the input circuitry comprises a<br>
demodulator, the demodulator comprising a multiplier configured to<br>
mix a signal indicative of a capacitive coupling between the at least<br>
one drive electrode and the at least one sense electrode with a<br>
demodulation waveform.<br>
12.	The  controller of claim  6  wherein the  input circuitry further<br>
comprises a demodulator, the demodulator comprising a multiplier<br>
configured to mix an output signal of the operational amplifier, said<br>
output signal being indicative of a capacitive coupling between the<br>
at least one drive electrode and the at least one sense electrode,<br>
with a demodulation waveform.<br>
13.	The controller of claim 12 wherein the input circuitry further<br>
comprises   an   offset   compensator,   the   offset   compensator<br>
comprising:<br>
a programmable offset digital to analog converter adapted<br>
to generate an offset signal corresponding to a static<br>
component of the capacitive coupling between the<br>
drive electrode and the sense electrode; and<br>
a subtractor circuit configured to subtract the offset signal<br>
from the output signal of the demodulator, said<br>
output   signal   being   indicative   of  the   capacitive<br>
-25-<br><br>
coupling between the at least one drive electrode and<br>
the at least one sense electrode.<br>
14.	The controller of claim  9 wherein  the  input circuitry further<br>
comprises a demodulator, the demodulator comprising a multiplier<br>
configured to mix an output signal of the offset compensator, said<br>
output signal being indicative of a capacitive coupling between the<br>
at least one drive electrode and the at least one sense electrode,<br>
with a demodulation waveform.<br>
15.	The controller of claim 11, 12, 13, or 14 wherein the demodulation<br>
waveform is determined with reference to a lookup table.<br>
16.	The controller of claim 15 wherein the demodulation waveform is a<br>
Gaussian-enveloped sine wave.<br>
17.	The controller of claim 1, 6, 9, 10, 11, 12, 13, or 14, wherein the<br>
input circuitry further comprises an analog to digital converter<br>
configured to produce a digital output from the measured capacitive<br>
coupling of the drive waveforms from the drive electrode to the<br>
sense electrode.<br>
18.	The controller of claim 17 wherein the analog to digital converter is<br>
a sigma-delta converter.<br>
19.	A method of operating a  multi-touch surface, the multi-touch<br>
surface comprising at least one drive electrode, at least one sense<br>
electrode, and at least one node disposed at an intersection of the<br>
at least one drive electrode and the at least one sense electrode,<br>
the method comprising:<br>
-26-<br><br>
stimulating the at least one drive electrode with a first<br>
periodic waveform having a first predetermined<br>
frequency;<br>
reading the at least one sense electrode to determine a<br>
capacitance of the node disposed at the intersection<br>
of the at least one drive electrode and the at least one<br>
sense electrode;<br>
stimulating the at least one drive electrode with at least<br>
one additional periodic waveform having an additional<br>
predetermined frequency different from the first<br>
predetermined frequency;<br>
reading the at least one drive electrode to determine a<br>
capacitance of the node disposed at the intersection<br>
of the at least one drive electrode and the at least one<br>
sense electrode; and<br>
comparing the capacitance determined by the first<br>
stimulus with the capacitance determined by the at<br>
least one additional stimulus to determine the true<br>
capacitance of the node.<br>
20. The method of claim 19 wherein stimulating the at least one drive<br>
electrode with at least one additional periodic waveform having an<br>
additional predetermined frequency different from the first<br>
predetermined frequency comprises:<br>
stimulating the at least one drive electrode with a second<br>
periodic waveform having a second predetermined<br>
frequency; and<br>
stimulating the at least one drive electrode with a third<br>
periodic waveform having a third predetermined<br>
frequency;<br>
-27-<br><br>
wherein the second and third predetermined frequencies<br>
are different from the first predetermined frequency<br>
and different from each other.<br>
21.	The  method  of claim  20  wherein  comparing  the  capacitance<br>
determined by the first stimulus with the capacitance determined by<br>
the   at   least  one   additional   stimulus   to   determine   the  true<br>
capacitance  of the node comprises taking an  average of the<br>
capacitances determined by the first, second, and third stimuli.<br>
22.	The  method  of claim  20  wherein  comparing  the  capacitance<br>
determined by the first stimulus with the capacitance determined by<br>
the  at   least  one  additional   stimulus  to   determine  the  true<br>
capacitance  of the  node comprises applying a  majority rules<br>
algorithm to the capacitances determined by the first, second, and<br>
third stimuli.<br>
23.	The  method  of claim  20  wherein  comparing  the  capacitance<br>
determined by the first stimulus with the capacitance determined by<br>
the  at   least  one  additional   stimulus  to  determine  the  true<br>
capacitance of the node comprises taking the median of the<br>
capacitances determined by the first, second, and third stimuli.<br>
24.	A charge amplifier comprising:<br>
an operational amplifier having an inverting input<br>
terminal, a non-inverting input terminal, and an<br>
output terminal;<br>
a feedback capacitor connected between the output<br>
terminal and the inverting input terminal, wherein the<br>
feedback capacitor is programmable to take on a<br>
range of values; and<br>
-28-<br><br>
a feedback resistor connected between the output<br>
terminal and the inverting input terminal, wherein the<br>
feedback resistor is programmable to take on a range<br>
of values.<br>
25.	The charge amplifier of claim 24 wherein the charge amplifier<br>
further comprises a resistor coupled between the non-inverting<br>
input terminal and an input to form an anti-aliasing filter in<br>
combination with the feedback resistor and capacitor.<br>
26.	The charge amplifier of claim 24 wherein the non-inverting input of<br>
the amplifier is coupled to ground.<br>
27.	A method of operating a multi-touch surface, the multi-touch<br>
surface comprising at least one drive electrode, at least one sense<br>
electrode, and at least one node disposed at an intersection of the<br>
at least one drive electrode and the at least one sense electrode,<br>
the method comprising:<br>
detecting a waveform on the at least one sense electrode<br>
caused by capacitive coupling of a drive waveform at<br>
the at least one node, said drive waveform having<br>
been applied to the at least one drive electrode;<br>
amplifying the detected waveform; and<br>
demodulating the amplified waveform to detect an object<br>
located proximate the at least one node.<br>
28.	The method of claim 27 further comprising subtracting an offset<br>
from the amplified waveform, the offset being determined as a<br>
function of the static capacitance of the at least one node, wherein<br>
the step of demodulating the amplified waveform takes  place<br>
subsequent to subtracting the offset.<br>
-29-<br><br>
29.	The method of claim 27 wherein:<br>
detecting a waveform on the at least one sense electrode<br>
comprises:<br>
detecting a first waveform on the at least one sense<br>
electrode caused by capacitive coupling of a first drive<br>
waveform at the at least one node, the first drive<br>
waveform having been applied to the at least one<br>
drive electrode and having a first predetermined<br>
frequency; and<br>
detecting at least one additional waveform on the at least<br>
one sense electrode caused by capacitive coupling of<br>
at least one additional drive waveform at the at least<br>
one node, the at least one additional drive waveform<br>
having been applied to the at least one drive<br>
electrode and having an additional predetermined<br>
frequency; and<br>
demodulating the amplified waveform comprises:<br>
demodulating each of the first waveform and the at least<br>
one additional waveform and comparing the<br>
demodulated waveforms to determine a capacitance<br>
of the node.<br>
30.	The method of claim 29 wherein comparing the demodulated<br>
waveforms comprises taking an average.<br>
31.	The method  of claim 29 wherein comparing the demodulated<br>
waveforms comprises selecting a median.<br>
32.	The method of claim 29 wherein comparing the demodulated<br>
waveforms comprises applying a majority rules algorithm.<br>
-30-<br><br>
33.	The method  of claim 27 wherein demodulating the amplified<br>
waveform   comprises   mixing   the  amplified   waveform   with   a<br>
Gaussian enveloped sine wave.<br>
34.	An offset compensation circuit for use in conjunction with a<br>
capacitive touch sensor, wherein the capacitive touch sensor is<br>
operated by measuring capacitive coupling of a drive waveform<br>
from   a   drive   electrode   to   a   sense   electrode,   the   offset<br>
compensation circuit comprising:<br>
a programmable offset digital to analog converter adapted<br>
to generate an offset signal corresponding to a static<br>
component of the capacitive coupling between the<br>
drive electrode and the sense electrode; and<br>
a subtractor circuit configured to subtract the offset signal<br>
from a measured signal indicative of the capacitive<br>
coupling between the at least one drive electrode and<br>
the at least one sense electrode.<br>
-31-<br><br>
A multipoint touch surface controller is<br>
disclosed herein. The controller includes an integrated<br>
circuit including output circuitry for driving a capacitive.<br>
multi-touch sensor and input circuitry for reading the sensor.<br>
Also disclosed herein are various noise rejection and dynamic<br>
range enhancement techniques that permit the controller to<br>
be used with various sensors in various conditions without<br>
reconfiguring hardware.<br></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1LT0xOUC0yMDA4LSgwNC0wOC0yMDE0KS1BQlNUUkFDVC5wZGY=" target="_blank" style="word-wrap:break-word;">4310-KOLNP-2008-(04-08-2014)-ABSTRACT.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1LT0xOUC0yMDA4LSgwNC0wOC0yMDE0KS1DTEFJTVMucGRm" target="_blank" style="word-wrap:break-word;">4310-KOLNP-2008-(04-08-2014)-CLAIMS.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1LT0xOUC0yMDA4LSgwNC0wOC0yMDE0KS1DT1JSRVNQT05ERU5DRS5wZGY=" target="_blank" style="word-wrap:break-word;">4310-KOLNP-2008-(04-08-2014)-CORRESPONDENCE.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1LT0xOUC0yMDA4LSgwNC0wOC0yMDE0KS1ERVNDUklQVElPTiAoQ09NUExFVEUpLnBkZg==" target="_blank" style="word-wrap:break-word;">4310-KOLNP-2008-(04-08-2014)-DESCRIPTION (COMPLETE).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1LT0xOUC0yMDA4LSgwNC0wOC0yMDE0KS1EUkFXSU5HUy5wZGY=" target="_blank" style="word-wrap:break-word;">4310-KOLNP-2008-(04-08-2014)-DRAWINGS.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1LT0xOUC0yMDA4LSgwNC0wOC0yMDE0KS1GT1JNLTEucGRm" target="_blank" style="word-wrap:break-word;">4310-KOLNP-2008-(04-08-2014)-FORM-1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1LT0xOUC0yMDA4LSgwNC0wOC0yMDE0KS1GT1JNLTEzLnBkZg==" target="_blank" style="word-wrap:break-word;">4310-KOLNP-2008-(04-08-2014)-FORM-13.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1LT0xOUC0yMDA4LSgwNC0wOC0yMDE0KS1GT1JNLTIucGRm" target="_blank" style="word-wrap:break-word;">4310-KOLNP-2008-(04-08-2014)-FORM-2.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1LT0xOUC0yMDA4LSgwNC0wOC0yMDE0KS1GT1JNLTMucGRm" target="_blank" style="word-wrap:break-word;">4310-KOLNP-2008-(04-08-2014)-FORM-3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1LT0xOUC0yMDA4LSgwNC0wOC0yMDE0KS1GT1JNLTUucGRm" target="_blank" style="word-wrap:break-word;">4310-KOLNP-2008-(04-08-2014)-FORM-5.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1LT0xOUC0yMDA4LSgwNC0wOC0yMDE0KS1PVEhFUlMucGRm" target="_blank" style="word-wrap:break-word;">4310-KOLNP-2008-(04-08-2014)-OTHERS.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1LT0xOUC0yMDA4LSgwNC0wOC0yMDE0KS1QQS5wZGY=" target="_blank" style="word-wrap:break-word;">4310-KOLNP-2008-(04-08-2014)-PA.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1LT0xOUC0yMDA4LSgwNC0wOC0yMDE0KS1QRVRJVElPTiBVTkRFUiBSVUxFIDEzNy5wZGY=" target="_blank" style="word-wrap:break-word;">4310-KOLNP-2008-(04-08-2014)-PETITION UNDER RULE 137.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1LT0xOUC0yMDA4LSgyMy0wNC0yMDEyKS1DT1JSRVNQT05ERU5DRS5wZGY=" target="_blank" style="word-wrap:break-word;">4310-KOLNP-2008-(23-04-2012)-CORRESPONDENCE.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1LT0xOUC0yMDA4LSgyMy0wNC0yMDEyKS1GT1JNLTMucGRm" target="_blank" style="word-wrap:break-word;">4310-KOLNP-2008-(23-04-2012)-FORM-3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1LT0xOUC0yMDA4LSgyMy0wNC0yMDEyKS1PVEhFUlMucGRm" target="_blank" style="word-wrap:break-word;">4310-KOLNP-2008-(23-04-2012)-OTHERS.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1rb2xucC0yMDA4LWFic3RyYWN0LnBkZg==" target="_blank" style="word-wrap:break-word;">4310-kolnp-2008-abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1LT0xOUC0yMDA4LUFTU0lHTk1FTlQucGRm" target="_blank" style="word-wrap:break-word;">4310-KOLNP-2008-ASSIGNMENT.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1rb2xucC0yMDA4LWNsYWltcy5wZGY=" target="_blank" style="word-wrap:break-word;">4310-kolnp-2008-claims.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1LT0xOUC0yMDA4LUNPUlJFU1BPTkRFTkNFLTEuMS5wZGY=" target="_blank" style="word-wrap:break-word;">4310-KOLNP-2008-CORRESPONDENCE-1.1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1rb2xucC0yMDA4LWNvcnJlc3BvbmRlbmNlLnBkZg==" target="_blank" style="word-wrap:break-word;">4310-kolnp-2008-correspondence.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1rb2xucC0yMDA4LWRlc2NyaXB0aW9uIChjb21wbGV0ZSkucGRm" target="_blank" style="word-wrap:break-word;">4310-kolnp-2008-description (complete).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1rb2xucC0yMDA4LWRyYXdpbmdzLnBkZg==" target="_blank" style="word-wrap:break-word;">4310-kolnp-2008-drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1rb2xucC0yMDA4LWZvcm0gMS5wZGY=" target="_blank" style="word-wrap:break-word;">4310-kolnp-2008-form 1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1rb2xucC0yMDA4LWZvcm0gMTgucGRm" target="_blank" style="word-wrap:break-word;">4310-kolnp-2008-form 18.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1LT0xOUC0yMDA4LUZPUk0gMy0xLjEucGRm" target="_blank" style="word-wrap:break-word;">4310-KOLNP-2008-FORM 3-1.1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1rb2xucC0yMDA4LWZvcm0gMy5wZGY=" target="_blank" style="word-wrap:break-word;">4310-kolnp-2008-form 3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1rb2xucC0yMDA4LWZvcm0gNS5wZGY=" target="_blank" style="word-wrap:break-word;">4310-kolnp-2008-form 5.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1rb2xucC0yMDA4LWdwYS5wZGY=" target="_blank" style="word-wrap:break-word;">4310-kolnp-2008-gpa.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1rb2xucC0yMDA4LWludGVybmF0aW9uYWwgcHVibGljYXRpb24ucGRm" target="_blank" style="word-wrap:break-word;">4310-kolnp-2008-international publication.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1rb2xucC0yMDA4LWludGVybmF0aW9uYWwgc2VhcmNoIHJlcG9ydC5wZGY=" target="_blank" style="word-wrap:break-word;">4310-kolnp-2008-international search report.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1rb2xucC0yMDA4LXBjdCBwcmlvcml0eSBkb2N1bWVudCBub3RpZmljYXRpb24ucGRm" target="_blank" style="word-wrap:break-word;">4310-kolnp-2008-pct priority document notification.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1rb2xucC0yMDA4LXBjdCByZXF1ZXN0IGZvcm0ucGRm" target="_blank" style="word-wrap:break-word;">4310-kolnp-2008-pct request form.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NDMxMC1rb2xucC0yMDA4LXNwZWNpZmljYXRpb24ucGRm" target="_blank" style="word-wrap:break-word;">4310-kolnp-2008-specification.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=YWJzdHJhY3QtNDMxMC1rb2xucC0yMDA4LmpwZw==" target="_blank" style="word-wrap:break-word;">abstract-4310-kolnp-2008.jpg</a></p>
		<br>
		<div class="pull-left">
			<a href="264184-opthalmological-pharmaceutical-composition-devoid-of-dexpanthenol-calcium-ions-and-phosphate.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="264186-a-method-for-establishing-a-connection-between-the-client-and-server-on-a-network.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>264185</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>4310/KOLNP/2008</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>51/2014</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>19-Dec-2014</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>11-Dec-2014</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>23-Oct-2008</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>APPLE INC.</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>1 INFINITE LOOP, CUPERTINO, CALIFORNIA 95014</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>HUPPI, BRIAN, QUENTIN</td>
											<td>C/0 APPLE INC .. 1 INFINITE LOOP. MS 83-T. CUPERTINO. CA 95014 U.S.A.</td>
										</tr>
										<tr>
											<td>2</td>
											<td>KRAH, CHRISTOPH, H.</td>
											<td>C/O APPLE INC .,1 INFINITE LOOP, MS 83-T.CUPERTINO, CA 95014</td>
										</tr>
										<tr>
											<td>3</td>
											<td>HOTELLING, STEVEN, P.</td>
											<td>C/0 APPLE INC., 1 INFINITE LOOP. MS 83-T. CUPERTINO. CA 95014 U.S.A.</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>G06F 3/044</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/US2007/066021</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2007-04-05</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>11/381,313</td>
									<td>2006-05-02</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/264185-a-controller-for-a-touch-surface-and-a-method-of-operating-a-touch-surface by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 00:07:57 GMT -->
</html>
