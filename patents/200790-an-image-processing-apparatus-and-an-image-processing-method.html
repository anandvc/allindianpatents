<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/200790-an-image-processing-apparatus-and-an-image-processing-method by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 03:10:06 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 200790:AN IMAGE PROCESSING APPARATUS AND AN IMAGE PROCESSING METHOD</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">AN IMAGE PROCESSING APPARATUS AND AN IMAGE PROCESSING METHOD</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>There are disclosed an image processing apparatus and method, and the like, which can obtain a high-quality image, the dynamic range or partial pixel value range of which has been changed while suppressing or avoiding collapse of the edge structure of an image or generation of overshoot. Also, there are disclosed an image processing apparatus and method, and the like, which can obtain a high-quality image, desired spatial frequency components of which have been emphasized or suppressed while suppressing or avoiding collapse of the edge structure of an edge portion contained in an objective image. For example, an image processing apparatus includes tone conversion means for executing tone conversion of an image, frequency transformation means for decomposing the image that has undergone tone conversion by the tone conversion means into frequency components of a plurality of frequency bands, and component conversion means for converting the frequency components of the plurality of frequency bands obtained by the frequency transformation means, on the basis of values of the frequency components and the tone conversion characteristics of the tone conversion means</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td> <br><br><br>
DESCRIPTION IMAGE PROCESSING DEVICE, IMAGE PROCESSING METHOD,<br>
STORAGE MEDIUM, AND PROGRAM<br>
TECHNICAL FIELD<br>
The present invention relates to an image processing apparatus and method and, more particularly, to an image processing apparatus and method for changing the dynamic range of image data, and an image processing apparatus and method for executing a frequency emphasis or suppression process such as sharpening or the like of an image that contains an edge structure or the like.<br>
BACKGROUND ART<br>
For example, an X-ray chest image has a very broad range of pixel values since it is made up of an image region of lungs through which X-rays are readily transmitted, and an image region of a mediastinal part through which X-rays are hardly transmitted.  For this reason, it has been considered to be difficult to obtain an X-ray chest image that allows to simultaneously observe both the lungs and mediastinal part.<br>
As a method of avoiding this problem, a method described in SPIE Vol. 626 MedicineXIV/PACSIV (1986) is<br><br>
known.  This method is described using constants A, B, and C (for example, A = 3, B = 0.7) by:<br>
SD = A[Sorg - Sus] + B[Sus] + C	. . . (D<br>
where SD is the pixel value of an image after processing, Sorg is the pixel value (input pixel value) of an original image (input image), and Sus is the pixel value of a low-frequency image of the original image.<br>
This method can change weighting coefficients for high-frequency components (first term) and low-frequency components (second term),  For example, when A = 3 and B = 0.7, the effect of emphasizing the high-frequency components and compressing the overall dynamic range can be obtained.  Five radiologists evaluated that this method is effective for diagnosis compared to an image without any processing.<br>
If the ratio of A is increased in equation (1), the ratio of high-frequency components increases, and a sharpening effect can be obtained.  On the other hand, if the ratio of B is changed, the magnitudes of low-frequency components are changed as well as the dynamic range of the image SD-<br>
Japanese Patent No. 2509503 describes a method which is described by:<br>
SD = Sorg + F[G(Px, Py)]	... (2)<br>
where SD is the pixel value after processing, Sorg is the original pixel value (input pixel value), Py is the<br><br>
average profile of a plurality of Y-profiles of an original image, and Px is the average profile of a plurality of X-profiles.<br>
The characteristics of the function F(x) will be explained below.  If "x &gt; Dth", F(x) becomes "0".  If "0 
F(x) = E - (E/Dth)x, when 0 
= 0, when x &gt; Dth	... (3)<br>
Py = {lPyi)/n	... (4)<br>
Px = (ZPxi)/n	... (5)<br>
where (i = 1 to n), and Pyi and Pxi are profiles.  For example, G(Px, Py) is given by:<br>
G(Px, Py) = max(Px, Py)	...(6)<br>
In this method, of the pixel value (density value) range of the original image, the pixel value (density value) range in which the pixel values of a low-frequency image are equal to or smaller than Dth is compressed.<br>
As a method similar to the method of Japanese Patent No. 2509503, a method described in "Anan et. al., Japanese Journal of Radiological Technology, Vol. 45, No. 8, August 1989, p. 1030", and Japanese Patent No, 2663189 is known.  Using the monotone decreasing function f(x), this method is described by:<br>
SD    =    Sorg    +    f (Sus)	...   (7)<br>
Sus    =   ∑Sorg/M2	...   (8)<br><br>
where SD is the pixel value after processing, Sorg is the original pixel value, and Sus is the average pixel value upon calculating a moving average using a mask size M .X M pixels in the original image.<br>
In this method, the low-frequency image generation method is different from that in the method given by equation (2).  In the method given by equation (2), a low-frequency image is generated based on one-dimensional data, while in this method, a low-frequency image is generated based on two-dimensional data.  In this method as well, of the pixel value (density value) range of the original image, the pixel value (density value) range in which the pixel values of a low-frequency image are equal to or smaller than Dth is compressed.<br>
The aforementioned dynamic range compression method can be expressed using a function f1() of converting a low-frequency image by:<br>
SD = fl(Sus)  +  (Sorg " Sus)	•- - (9)<br>
Note that the variable of a function may be omitted for the sake of simplicity in this specification.<br>
In equation (9), the dynamic range is changed by changing low-frequency components using the function f 1 0 .  The dynamic range compression method given by equation (9) will be explained below.  Figs, 1 and 2 are views for explaining the principle of that method. The uppermost view in Fig. 1 shows the profile of an<br><br>
edge portion of an original image, the middle view shows the profile of a smoothed image of that original image, and the lowermost view shows the profile of a high-frequency image generated by subtracting the smoothed image from the original image.  In Fig. 2, the uppermost view shows the profile of an image obtained by multiplying by 1/2 the absolute values of the smoothed image in the middle view of Fig. 1, the middle view shows the same profile as that of the high-frequency image in Fig. 1, and the lowermost view shows the profile of an image obtained by adding the high-frequency image in the interrupt view to the image in the uppermost view obtained by converting the values of the smoothed image. A process for obtaining an image, the dynamic range of which is compressed, like the image shown in the lowermost view in Fig. 2, is called a dynamic range compression process.<br>
As can be seen from Fig. 1, the smoothed image cannot maintain an edge structure in the edge portion, and the high-frequency components have large values at the edge portion.  Note that the source original image can be recovered by adding the smoothed image and high-frequency image.<br>
However, as shown in Fig. 2, when the high-frequency image is added to the image obtained by converting the values of the low-frequency image, the edge structure collapses, as indicated by arrows in<br><br>
Fig. 2. Such phenomenon is called overshoot/undershoot (to be also referred to as overshoot, overshoot, or the like hereinafter).<br>
Note that equation (10) changes the original image by the function f1(), and expresses normal tone conversion; it can change the dynamic range of the overall original image.<br>
SD =  fl(Sorg)	... (10)<br>
In recent years, a multiple-frequency process (to be also referred to as a multiple-frequency transformation process hereinafter) using Laplacian pyramid transformation and wavelet transformation has been developed.  In such multiple-frequency process, high-frequency components such as Laplacian coefficients or wavelet coefficients (to be referred to as   frequency coefficients hereinafter) obtained by decomposing an image into frequency components are converted using a nonlinear function shown in Fig. 3 or 4-  In Figs. 3 and 4, the abscissa plots the input coefficients, and the ordinate plots the output coefficients.  Figs. 3 and 4 show conversion curves when the coefficients are +, and the same conversion is made even when the coefficients are -. That is. Figs. 3 and 4 show only the first quadrant of an odd function.  In this specification, all functions used to convert frequency coefficients are odd functions, and only their first quadrants are shown. Also, "curve"<br><br>
and "functions" may be used as equivalent terms. Fig. 3 shows a monotone increasing concave function (upward convex). When coefficients are converted using such function form, coefficients can be increased in a small coefficient region, and the coefficients can be saturated in a large coefficient region. Therefore, when the small coefficient region expresses effective image components of, e.g., a fine structure, an image process that emphasizes the fine structure is done.  In addition, since the coefficients of the large coefficient region are saturated, an effect of suppressing emphasis of an edge structure or the like can be obtained.<br>
The curve form shown in Fig. 4   is used in a method called degeneracy of wavelet, and converts frequency coefficients less than a predetermined absolute value (threshold value) 3001 shown in Fig. 4 into 0 (zero), thus providing an effect of suppressing noise.<br>
Furthermore, a method of changing the dynamic range of a recovered image by changing coefficients in the lowermost-frequency band in the multiple-frequency process is known.<br>
Along with the advance of digital technologies in recent years, a radiation image such as an X-ray image or the like is converted into a digital signal, such digital image undergoes an image process, and the<br><br>
processed image is displayed on a display device (e.g., a CRT, liquid crystal display, or the like) or is recorded on a recording medium such as a film or the like by a recording apparatus (printer or the like). Such image process is categorized into a pre-process for correcting an image obtained from an image sensing device depending on the characteristics or the like of the image sensing device, and a quality assurance (QA) process for converting the image (original image) that has undergone the pre-process into an image with image quality suitable for diagnosis. Of these processes, the QA process includes frequency processes such as a sharpening process for emphasizing the high-frequency components of an original image, a noise reduction process for suppressing high-frequency components, and the like.<br>
The sharpening process is based on the following process-  That is, a high-frequency image as high-frequency components of an original image shown in Fig, 5C is generated by subtracting a blurred image (smoothed image) as low-frequency components of the original image shown in Fig. 5B from the original image (including an edge portion) shown in Fig. 5A. Then, as shown in Fig. 6, the high-frequency image is added to the original image to obtain an image with higher sharpness (sharpened image).  Figs. 5A, 5B, and 5C are waveform charts for explaining the sharpening process.<br><br>
in which Fig. 5A is a waveform chart showing the profile of the original image including an edge portion, Fig. 5B is a waveform chart showing the profile of the smoothed image obtained by smoothing the original image shown in Fig. 5A, and Fig. 5C is a waveform chart showing the profile of the high-frequency image generated by subtracting the smoothed image shown in Fig. 5B from the original image shown in Fig. 5A. Fig. 6 is a waveform chart showing the profile of the sharpened image obtained by adding the high-frequency image shown in Fig. 5C to the original image shown in Fig, 5A,<br>
With the dynamic range compression process given by equation (1), since high- and low-frequency components are converted by uniformly multiplying by different" constants, the dynamic range compression process can be achieved, but overshoot occurs.<br>
The dynamic range compression process given by equation (2) has no disclosure about an idea that adjusts high-frequency components, and changes only low-frequency components.  Hence, the dynamic range compression process can be achieved, but overshoot occurs.<br>
With the dynamic range compression process which is given by equation (9) and adds high-frequency components to the converted smoothed image (low-frequency components), only low-frequency<br><br>
components are converted, and high-frequency components remain the same.  Hence, overshoot occurs again.<br>
For example, when the entire smoothed image is converted to be 1/2 in Fig. 2, if high-frequency components of portions corresponding to overshoot and undershoot are multiplied by 1/2, the edge structure is preserved in the image of the dynamic range compression process.  However, when the entire smoothed image is converted to be 1/3 or is converted using a complicated curve form, overshoot or undershoot occurs if the high-frequency components of portions corresponding to overshoot and undershoot are multiplied by 1/2.<br>
As a method of suppressing such overshoot and undershoot, the present applicant has filed Japanese Patent Laid-Open No. 2000-316090,  This method suppresses overshoot and undershoot by suppressing high-frequency component values corresponding to overshoot and undershoot portions,  However, such method of suppressing portions with large high-frequency value portions can suppress overshoot and undershoot, but cannot perfectly preserve the edge structure.  Therefore, portions where high-frequency components are suppressed become unnatural.<br>
On the other hand, the edge structure can be perfectly preserved if high- and low-frequency components are changed at the same ratio, like in Fig. 1 in which the original image can be recovered by<br><br>
adding the high-frequency image and smoothed image. However, such method is nothing but tone conversion given by equation (10).  Since simple tone conversion can adjust the dynamic range but cannot adjust frequency components, when, for example, the dynamic range is compressed, a fine structure or the like undesirably flattens out. Also, the effect of the sharpening process or the like cannot be obtained.<br>
Upon converting the frequency coefficients in the multiple-frequency process using the conversion curve shown in Fig. 3, overshoot can be suppressed by the same effect as in Japanese Patent Laid-Open No, 2000-316090.  However, the edge structure cannot be perfectly preserved, either, as described above, and an unnatural edge portion may appear.<br>
Also, when the coefficients of the lowest-frequency band are changed, the edge structure cannot be preserved due to the same principle as described above, and overshoot may be generated. That is, when the absolute values of coefficients of a partial frequency band which forms the edge portion are changed, the structure of the edge portion collapses somehow, thus generating unnaturalness (artifacts).<br>
If all the frequency coefficients are changed at an identical ratio, the edge structure can be prevented from collapsing-  However, such change is merely tone<br><br>
conversion.  Hence, no effect of the frequency process is expected.<br>
When coefficients are converted using the conversion curve shown in Fig. 4, the edge structure is preserved in an inversely converted image (e.g., an image that has undergone inverse wavelet transformation).  However, since there is no idea of emphasizing coefficients, the sharpening effect cannot be obtained by the inversely converted image at all. When the slope of the curve in Fig. 4 is set other than 1, the edge structure is not preserved, and overshoot or the like occurs.<br>
On the other hand, the conventional sharpening process cannot sharpen an image that contains an edge portion with high quality.  For example, as best illustrated in Fig. 1,   since high-frequency components of the edge portion have values extremely larger than those of other portions, extremely protruding regions (regions a and b indicated by circles in Fig. 7) may appear in a sharpened image obtained by adding them. Note that Fig. 7 is a waveform chart showing the profile of a sharpened image that suffers overshoot. These regions a and b are artifacts called overshoot (region b may also be called undershoot).  Such image, the edge portion of which is excessively emphasized by overshoot, is unnatural.  Especially, in case of a medical image such as a radiation image or the like<br><br>
which is used in diagnosis, generation of such artifacts is not preferable. On the other hand, in order to suppress overshoot, a high-frequency image may be decreased at a predetermined ratio, and may then be added to an original image.  However, the effect of the sharpening process undesirably lowers in a region other than the edge portion.<br>
In the above description, when high-frequency components are emphasized while preserving low-frequency components of an image, the edge structure collapses (the same applies to suppression of low-frequency components while preserving high-frequency components). Conversely, when high-frequency components are suppressed while preserving low-frequency components of an image, the edge structure collapses again (the same applies to emphasis of low-frequency components while preserving high-frequency components).  In this case, in place of overshoot, sharpness of the edge portion is lost, and the edge structure collapses with the edge portion being blurred.<br>
DISCLOSURE OF INVENTION<br>
The present invention has been made to solve the aforementioned problems, and has as   its object to provide an image processing apparatus and method, and a computer-readable medium and program, which can obtain<br><br>
a high-quality image, the dynamic range or partial pixel value range of which has been changed while suppressing or avoiding collapse of the edge structure of an image or generation of overshoot.<br>
Also, the present invention has been made to solve the aforementioned problems, and has as its object to provide an image processing apparatus and method, and a computer-readable medium and program, which can obtain a high-quality image, desired spatial frequency components of which have been emphasized or suppressed, while suppressing or avoiding collapse of the edge structure of an edge portion included in an objective image -<br>
According to the first aspect of the present invention, there is provided an image processing apparatus comprising tone conversion means .for executing tone conversion of an image, and component conversion means for converting frequency components of a plurality of frequency bands of the image or an image after that image has undergone tone conversion by the tone conversion means, on the basis of values of the frequency components and tone conversion characteristics of the tone conversion means.<br>
According to the second aspect of the present invention, there is provided an image processing apparatus comprising tone conversion means for executing tone conversion of an image, frequency<br><br>
transformation means for decomposing the image that has undergone tone conversion by the tone conversion means into frequency components of a plurality of frequency bands, and component conversion means for converting the frequency components of the plurality of frequency bands obtained by the frequency transformation means, on the basis of values of the frequency components and tone conversion characteristics of the tone conversion means.<br>
According to the third aspect of the present invention, there is provided an image processing apparatus comprising first frequency transformation means for decomposing an image into first frequency components of a plurality of frequency bands, tone conversion means for executing tone conversion of the image, second frequency transformation means for decomposing the image that has undergone tone conversion by the tone conversion means into second frequency components of a plurality of frequency bands, and component conversion means for converting the second frequency components of the plurality of frequency bands by adding frequency components, which are obtained by converting the first frequency components of the plurality of frequency bands on the basis of values of the first frequency components of the plurality of frequency bands and tone conversion characteristics of the tone conversion means, to the<br><br>
second frequency components of the plurality of frequency bands.<br>
According to the fourth aspect of the present invention, there is provided an image processing apparatus comprising tone conversion means for executing tone conversion of an image, frequency transformation means for decomposing the image into frequency components of a plurality of frequency bands, component conversion means for converting frequency components of a plurality of frequency bands obtained by the frequency transformation means, on the basis of values of the frequency components and tone conversion characteristics of the tone conversion means, inverse frequency transformation means for generating an image by compositing the frequency components converted by the component conversion means, and addition means for adding the image generated by the inverse frequency transformation means and the image that has undergone tone conversion by the tone conversion means.<br>
According to the fifth aspect of the present invention, there is provided an image processing apparatus comprising frequency transformation means for decomposing an image into frequency components of a plurality of frequency bands, component conversion means for converting the frequency components of the plurality of frequency bands obtained by the frequency transformation means, on the basis of values of the<br><br>
frequency components and tone conversion characteristics, inverse frequency transformation means for generating an image by compositing the frequency components converted by the component conversion means, and tone conversion means for executing tone conversion of the image generated by the inverse frequency transformation means on the basis of the tone conversion characteristics,<br>
According to the sixth aspect of the present invention, there is provided an image processing apparatus comprising tone conversion means for executing tone conversion of an image, and component conversion means for converting high-frequency components of the image or an image after that image has undergone tone conversion by the tone conversion means, on the basis of values of the high-frequency components and tone conversion characteristics of the tone conversion means.<br>
According to the seventh aspect of the present invention, there is provided an image processing apparatus comprising tone conversion means for executing tone conversion of an image, high-frequency component calculation means for calculating high-frequency components of the image, component conversion means for converting the high-frequency components obtained by the high-frequency component calculation means, on the basis of values of the<br><br>
high-frequency components and tone conversion characteristics of the tone conversion means, and addition means for adding the high-frequency components converted by the component conversion means and the image that has undergone tone conversion by the tone conversion means.<br>
According to the eighth aspect of the present invention, there is provided an image processing apparatus comprising tone conversion means for executing tone conversion of an image, high-frequency component calculation means for calculating high-frequency components of the image that has undergone tone conversion by the tone conversion means, component conversion means for converting the frequency components obtained by the high-frequency component calculation means, on the basis of values of the high-frequency components and tone conversion characteristics of the tone conversion means, and addition means for adding the high-frequency components converted by the component conversion means and the image that has undergone tone conversion by the tone conversion means.<br>
According to the ninth aspect of the present invention, there is provided an image processing method comprising the tone conversion step of executing tone conversion of an image, and the component conversion step of converting frequency components of a plurality<br><br>
of frequency bands of the image or an image after that image has undergone tone conversion in the tone conversion step, on the basis of values of the frequency components and tone conversion characteristics of the tone conversion step.<br>
According to the 10th aspect of the present invent ion;, there is provided an image processing method comprising the tone conversion step of executing tone conversion of an image, the frequency transformation step of decomposing the image that has undergone tone conversion in the tone conversion step into frequency components of a plurality of frequency bands, and the component conversion step of converting the frequency components of the plurality of frequency bands obtained in the frequency transformation step, on the basis of values of the frequency components and tone conversion characteristics of the tone conversion means.<br>
According to the 11th aspect of the present invention, there is provided an image processing method comprising the first frequency transformation step of decomposing an image into first frequency components of a plurality of frequency bands, the tone conversion step of executing tone conversion of the image, the second frequency transformation step of decomposing the image that has undergone tone conversion in the tone conversion step into second frequency components of a plurality of frequency bands, and the component<br><br>
conversion step of converting the second frequency components of the plurality of frequency bands by adding frequency components, which are obtained by converting the first frequency components of the plurality of frequency bands, on the basis of values of the first frequency components of the plurality of frequency bands and tone conversion characteristics of the tone conversion means, to the second frequency components of the plurality of frequency bands.<br>
According to the 12th aspect of the present invention, there is provided an image processing method comprising the tone conversion step of executing tone conversion of an image, the frequency transformation step of decomposing the image into frequency components of a plurality of frequency bands, the component conversion step of converting frequency components of the plurality of frequency bands obtained in the frequency transformation step, on the basis of values of the frequency components and tone conversion characteristics of the tone conversion means, the inverse frequency transformation step of generating an image by compositing the frequency components converted in the component conversion step, and the addition step of adding the image generated in the inverse frequency transformation step and the image that has undergone tone conversion in the tone conversion step.<br><br>
According to the 13th aspect of the present invention, there is provided an image processing method comprising the frequency transformation step of decomposing an image into frequency components of a plurality of frequency bands, the component conversion step of converting the frequency components of the plurality of frequency bands obtained in the frequency transformation step, on the basis of values of the frequency components and tone conversion characteristics, the inverse frequency transformation step of generating an image by compositing the frequency components converted in the component conversion step, and the tone conversion step of executing tone conversion of the image generated in the inverse frequency transformation step, on the basis of the tone conversion characteristics.<br>
According to the 14th aspect of the present invention, there is provided an image processing method comprising the tone conversion step of executing tone conversion of an image, and the component conversion step of converting high-frequency components of the image or an image after that image has undergone tone conversion in the tone conversion step, on the basis of values of the high-frequency components and tone conversion characteristics of the tone conversion step.<br>
According to the 15th aspect of the present invention, there is provided an image processing method<br><br>
comprising the tone conversion step of executing tone conversion of an image, the high-frequency component calculation step of calculating high-frequency components of the image, the component conversion step of converting the frequency components obtained in the high-frequency component calculation step, on the basis of values of the high-frequency components and tone conversion characteristics of the tone conversion means, and the addition step of adding the high-frequency components converted in the component conversion step and the image that has undergone tone conversion in the tone conversion step.<br>
According to the 16th aspect of the present invention, there is provided an image processing method comprising the tone conversion step of executing tone conversion of an image, the high-frequency component calculation step of calculating high-frequency components of the image that has undergone tone conversion in the tone conversion step, the component conversion step of converting the frequency components obtained in the high-frequency component calculation step on the basis of values of the high-frequency components and tone conversion characteristics of the tone conversion means, and addition step of adding the high-frequency components converted in the component conversion step and the image that has undergone tone conversion in the tone conversion step-<br><br>
According to the 17th aspect of the present invention, there is provided an image processing apparatus comprising a decomposition unit for generating^ from an objective image, low-frequency components of the objective image, and high-frequency components of at least one frequency band, a component conversion unit for converting at least the high-frequency components of the at least one frequency band of the low-frequency components and the high-frequency components of the at least one frequency band obtained by the decomposition unit, and an image generation unit for generating a processed image using the high-frequency components of the at least one frequency band converted by the component conversion unit, and the objective image or the low-frequency components, wherein the component conversion unit performs first conversion for converting the high-frequency components of the at least one frequency band and the low-frequency component so that first elements having absolute values not less than a predetermined threshold value in the high-frequency components of the at least one frequency band obtained by the decomposition unit, and the low-frequency components change at substantially the same ratio upon change from the objective image to the processed image, and second conversion, different from the first conversion, for second elements having absolute values<br><br>
less than the predetermined threshold value in the high-frequency components of the at least one frequency band.<br>
Acco-rding to the 18th aspect of the present invention, there is provided an image processing method comprising the step of generating, from an objective image, low-frequency components of the objective image, and high-frequency components of at least one frequency band thereof, the step of converting at least the high-frequency components of the at least one frequency band of the low-frequency components and the high-frequency components of the at least one frequency band obtained in the generation step, and the step of generating a processed image using the high-frequency components of the at least one frequency band converted in the conversion step, and the objective image or the low-frequency components, and wherein the conversion step includes the step of performing first conversion for converting the high-frequency components of the at least one frequency band and the low-frequency component so that first elements having absolute values not less than a predetermined threshold value in the high-frequency components of the at least one frequency band obtained in the generation step, and the low-frequency components change at substantially the same ratio upon change from the objective image to the processed image, and second conversion, different from<br><br>
the first conversion, for second elements having absolute values less than the predetermined threshold value in the high-frequency components of the at least one frequency band.<br>
According to the 19th aspect of the present invention, there is provided an image processing apparatus comprising a decomposition unit for generating, from an objective image, low-frequency components of the objective image, and high-frequency components of at least one frequency band, a component conversion unit for converting the low-frequency components and the high-frequency components of the at least one frequency band obtained by the decomposition unit, and an image generation unit for generating a processed image using the low-frequency components and the high-frequency components of the at least one frequency band converted by the component conversion unit, and wherein the component conversion unit converts the high-frequency components of the at least one frequency band and the low-frequency component so that first elements having absolute values not less than a predetermined threshold value in the high-frequency components of the at least one frequency band obtained by the decomposition unit, and the low-frequency components change at substantially the same ratio upon change from the objective image to the processed image.<br><br>
According to the 20th aspect of the present invention, there is provided an image processing apparatus comprising the step of generating, from an objective image, low-frequency components of the objective image, and high-frequency components of at least one frequency band, the step of converting the low-frequency components and the high-frequency components of the at least one frequency band obtained in the generation step, and the step of generating a processed image using the low-frequency components and the high-frequency components of the at least one frequency band converted in the conversion step, and wherein the conversion step includes the step of converting the high-frequency components of the at least one frequency band and the low-frequency component so that first elements having absolute values not less than a predetermined threshold value in the high-frequency components of the at least one frequency band obtained in the generation step, and the low-frequency components change at substantially the same ratio upon change from the obj ective image to the processed image,<br>
Other objects, features, and effects of the present invention will become apparent from the best mode of carrying out the invention to be described hereinafter with reference to the accompanying drawings<br><br>
BRIEF DESCRIPTION OF DRAWINGS<br>
Fig. 1 is a chart for explaining generation of overshoot;<br>
Fig, 2 is a chart for explaining generation of overshoot;<br>
Fig. 3 shows a conventional curve used to convert frequency coefficients;<br>
Fig. 4 shows a conventional curve used to convert frequency coefficients;<br>
Figs. 5A to 5C are charts for explaining a conventional sharpening process;<br>
Fig, 6 is a chart showing the profile of a sharpened image;<br>
Fig. 7 is a chart showing the profile of a sharpened image which suffers overshoot;<br>
Fig, 8 is a block diagram of an image processing apparatus of Embodiment 1;<br>
Fig. 9 is a flow chart showing the processing sequence of the image processing apparatus of Embodiment 1;<br>
Fig. 10 shows an example of a curve used to change the dynamic range;<br>
Figs, llA to lie are explanatory views of discrete wavelet transformation and its inverse transformation;<br>
Fig. 12 shows a coefficient conversion curve;<br>
Fig. 13 shows a coefficient conversion curve;<br><br>
Fig. 14 is a flow chart showing the processing sequence of the image processing apparatus of Embodiment 2;<br>
Fig. 15 is a flow chart showing the processing sequence of the image processing apparatus of Embodiment 3;<br>
Fig. 16 is a block diagram of an image processing apparatus of Embodiments 4 and 5;<br>
Fig. 17 is a flow chart showing the processing sequence of the image processing apparatus of Embodiment 4;<br>
Fig, 18 shows an example of a curve used to change high-frequency components;<br>
Fig, 19 is a flow chart showing the processing sequence of the image processing apparatus of Embodiment 5;"<br>
Fig, 20 is a block diagram of an image processing apparatus of Embodiment 6;<br>
Fig. 21 shows a tone conversion curve used to change the dynamic ranger-Fig. 22 is a flow chart showing the processing sequence of the image processing apparatus of Embodiment 6;<br>
Fig. 23 shows a curve used to convert frequency coefficients;<br><br>
Figs. 24A to 24C are explanatory views of Laplacian pyramid transformation and its inverse transformation;<br>
Fig. 25 is a blo.ck diagram of an image processing apparatus of Embodiment 7 ;<br>
Fig. 26 is a flow chart showing the processing sequence of the image processing apparatus of Embodiment 7;<br>
Fig. 27 shows a curve used to convert frequency coefficients;<br>
Fig. 28 is a block diagram of an image processing apparatus of Embodiment 8;<br>
Fig. 29 is a flow chart showing the processing sequence of the image processing apparatus of Embodiment 8;<br>
Fig. 30 shows a curve used to convert frequency coefficients;<br>
Fig. 31 is a block diagram showing an image processing apparatus of Embodiment 9;<br>
Fig. 32 is a flow chart showing an image processing method of Embodiment 9;<br>
Fig. 33 shows a conversion curve used to convert high-frequency components in a high-frequency component addition unit;<br>
Fig. 34 is a flow chart showing another image processing method of Embodiment 9;<br><br>
Fig. 3 5 shows a conversion curve used to convert high-frequency components in a high-frequency component addition unit;<br>
Fig. 36 is a block diagram showing an image processing apparatus of Embodiment 10;<br>
Fig. 37A is a circuit diagram showing an instantiated circuit arrangement of a discrete wavelet transformation process, and Fig. 37B is a circuit diagram showing an instantiated circuit arrangement of a Laplacian pyramid transformation process;<br>
Fig. 38A is a circuit diagram showing an instantiated circuit arrangement of an  inverse discrete wavelet transformation process, and Fig. 38B is a circuit diagram showing an instantiated circuit arrangement of an inverse Laplacian pyramid transformation process;<br>
Fig. 39 is a flow chart showing the process of an image processing unit of Embodiment 10;<br>
Fig. 40 shows an example of the format of transform coefficient groups of two levels obtained by a two-dimensional transformation process;<br>
Fig. 41 is a graph showing a coefficient conversion function F3();<br>
Fig. 42A shows the profile of an original image, Fig. 42B shows the profile of an image after a sharpening process that does not preserve an edge structure, and Fig. 42C shows the profile of an image<br><br>
after a sharpening process that preserves the edge<br>
structure<br><br>
Fig (function<br>
Fig (function<br>
Fig (function<br>
Fig (function<br>
Fig (function<br>
Fig (function<br>
Fig (function<br>
Fig (function<br><br>
4 3 is a graph showing an example of a curve<br>
used to convert frequency coefficients;<br>
44 is a graph showing an example of a curve<br>
used to convert frequency coefficients;<br>
4 5 is a graph showing an example of a curve<br>
used to convert frequency coefficients;<br>
4 6 is a graph showing an example of a curve<br>
used to convert frequency coefficients;<br>
4 7 is a graph showing an example of a curve<br>
used to convert frequency coefficients;<br>
is a graph showing an example of a curve used to convert frequency coefficients;<br>
a graph showing an example of a curve used to convert frequency coefficients;<br>
is a graph showing an example of a curve used to convert frequency coefficients; and<br><br>
Fig. 51 shows an example of a low-pass filter<br>
shown in Figs. 37B and 38B.<br>
BEST MODE OF CARRYING OUT THE INVENTION<br>
(Embodiment 1)<br>
Fig. 8 shows an X-ray photographing apparatus 100 according to Embodiment 1.  The X-ray photographing apparatus 100 has a function of executing processes for<br>
respective frequency bands of a taken image, and<br><br>
comprises a pre-processing circuit 106, CPU 108, main memory 109, control panel 110, image display 111, and image processing circuit 112, which exchange data via a CPU bus 107.<br>
The X-ray photographing apparatus 100 also comprises a data acquisition circuit 105 connected to the pre-processing circuit 106, and a two-dimensional X-ray sensor 104 and X-ray generation circuit 101, which are connected to the data acquisition circuit 105, and these circuits are also connected to the CPU bus 107.<br>
In the aforementioned X-ray photographing apparatus 100, the main memory 109 stores various data and the like required for the processing by the CPU 108, and serves as a work memory for the CPU 108.<br>
The CPU 108 executes operation control and the like of the overall apparatus in accordance with operations at the control panel 110. As a result, the X-ray photographing apparatus 100 operates as follows.<br>
The X-ray generation circuit 101 emits an X-ray beam 102 toward an object 103 to be examined.  The X-ray beam 102 emitted by the X-ray generation circuit 101 is transmitted through the object 103 to be examined while being attenuated, and reaches the two-dimensional X-ray sensor 104. The two-dimensional X-ray sensor 104 detects an X-ray image. Assume that<br><br>
the X-ray image is, for example, a human body image or the like in this embodiment.<br>
The data acquisition circuit 105 converts X-ray image information (electrical signal) output from the two-dimensional X-ray sensor 104 into a predetermined electrical signal, and supplies that signal to the pre-processing circuit 106. The pre-processing circuit 106 executes pre-processes such as offset correction, gain correction, and the like for the signal (X-ray image signal) from the data acquisition circuit 105. The X-ray image signal that has undergone the pre-processes by the pre-processing circuit is transferred as an original image to the main memory 109 and image processing circuit 112 via the CPU bus 107 under the control of the CPU 108,<br>
Reference numeral 112 denotes a block diagram showing the arrangement of the image processing circuit In the image processing circuit 112, reference numeral 113 denotes a tone conversion circuit for performing tone conversion of the original image; 114, a DWT circuit for computing the discrete wavelet transforms (to be referred to as DWTs hereinafter) of the original image that has undergone the tone conversion by the tone conversion circuit 113 to obtain image components (wavelet transform coefficients) of respective frequency bands; 115, a component conversion circuit for converting the image components of the respective<br><br>
frequency bands obtained by the discrete wavelet transformation circuit 114; and 116, an inverse DWT circuit for computing the inverse discrete wavelet transforms (to be referred to as inverse DWTs<br>
)  hereinafter) on the basis of the image components converted by the component conversion circuit 115.<br>
Fig. 9 is a flow chart showing the flow of processes in the image processing circuit 112, Fig. 10 shows an example of a tone conversion curve used to<br>
I  change the dynamic range of image data by the tone conversion circuit 113, Fig. llA is a circuit diagram showing the arrangement of the DWT circuit 114, Fig. IIB shows an example of the format of transform coefficient groups of two levels obtained by a two-dimensional transformation process, and Fig. IIC is a circuit diagram showing the arrangement of the ' inverse DWT circuit 116.  Figs. 12 and 13 show examples of function forms used to change image components (transform coefficients obtained by the DWT circuit 114) .<br>
The processing in Embodiment 1 will be explained below along with the flow of processes shown in Fig. 9.<br>
An original image that has undergone the pre-processes in the pre-processing circuit 106 is transferred to the image processing circuit 112 via the CPU bus 107.<br><br>
In the image processing circuit 112^ the tone conversion circuit converts an original image Org(x^ y) into f(Org{x, y) using a tone conversion curve f() (s201) .  Note that x and y are the coordinates on the original image. As the tone conversion curve f(), for example, a curve form shown in Fig. 10 is used.  For example, solid line 1 is a function with slope = 1. That is, input and output values are not changed (input and output values are equal to each other), and no dynamic range compression effect is expected.  Broken line 2 indicates a function form for compressing the dynamic range on the low pixel value side, and broken line 3 indicates a function form for expanding the dynamic range on the low pixel value side.  Likewise, broken line 4 expands the dynamic range on the high pixel value side, and broken line 5 indicates a function form for compressing the dynamic range on the high pixel value side.<br>
In practice, these curve forms are preferably formed to be differential continuous (differentiable and continuous functions). This is because a false edge may be generated at a differential discontinuous point (a point on an image after tone conversion corresponding to a■point where a curve is not differentiable or continuous)-<br>
The DWT circuit (discrete wavelet transformation circuit) 114 executes a two-dimensional discrete<br><br>
wavelet transformation process of the image f(Org(x, y) after tone conversion, and calculates and outputs image components (transform coefficients). The image data stored in the main memory 109 is sequentially read out and undergoes the transformation process by the DWT circuit 114, and is written in the main memory 109 again.  In the DWT circuit 114 of this embodiment, an input image signal is separated into odd and even address signals by a combination of a delay element and down samplers, and undergoes filter processes of two filters p and u.  In Fig. IIA, s and d represent low- and high-pass coefficients upon decomposing a linear image signal to one level, and are respectively computed by:<br>
d(n) = X (2xn + l)-floor ( (x(2xn)+x(2xn+2) )/2) ... (11) s (n) = x(2xn)+floor( (d (n-1)+d (n) ) /4)      ... . (12) where x(n) is an image signal to be transformed.<br>
With the above process, a linear discrete wavelet transformation process is done for an image signal. Since two-dimensional discrete wavelet transformation is implemented by sequentially executing linear discrete wavelet transformation in the horizontal and vertical directions of an image and its details are known to those who are skilled in the art, a description thereof will be omitted.  Fig. IIB shows an example of the format of transform coefficient groups of two levels obtained by the two-dimensional discrete<br><br>
wavelet transformation process. An image signal is decomposed into image components HHl, HLl, LHl,..., LL in different frequency bands (s202).  In Fig. IIB, each of HHl, HLl, LHl,-.., LL (to be referred to as subbands hereinafter) indicates an image component for each frequency band.<br>
The component conversion circuit converts image component hn(x, y) of each subband by:<br>
h2n(x, y) - (l/f'(Org(x, y))) xhn(x, y)  ...(13) where h2n(x, y) is the converted image component, and n is the subband category.<br>
With this process^ image components after the tone conversion process, which become f'() times (fM) is the slope of the tone conversion curve f() in Org(x, y) corresponding to hn (x, y)) of those of the original image Org(x, y) by the tone conversion process, can be converted into values nearly equal to those of the original image Org(x, y) ,  Note that the image components of the LL subband as  the low-frequency component of the lowermost layer are not changed. Hence, the dynamic range of the overall image is changed, but image components corresponding to high-frequency components can maintain values nearly equal to those of the original image.  Note that the right-hand side of equation (13) may be multiplied by a predetermined constant.  In this case, the high-frequency components of an image can be adjusted<br><br>
(emphasized or suppressed) while changing the dynamic range.<br>
According to equation (13), high-frequency components are emphasized in a region where the pixel value range of the original image is compressed, and high-frequency components are suppressed in a region where the pixel value range of the original image is expanded.  However, as described above, an adjustment means for multiplying the right-hand side of equation (13) by an arbitrary constant may be further provided.<br>
The image, the dynamic range of which has been changed by the tone conversion process, does not suffer any artifacts such as overshoot and the like.  However, the process given by equation (13) can amplify high-frequency components by changing them, but artifacts such as overshoot and the like may be generated.<br>
To prevent generation of such artifacts, in place of equation (13), it is effective to change high-frequency components by:<br>
h2n(x, y) = hn(x, y) + (l/f*(x, y) - 1)<br>
X fn(hn(x, y))	...(14)<br>
Note that the function fn() has a curve form shown in Fig. 12 or 13. These curves are differential continuous (differentiable and continuous functions), and can prevent generation of any false edges.  Image components generated at an edge portion have values<br><br>
larger than normal components (components other than the edge portion) , and these curve forms suppress image components corresponding to edge components or set them 0 (zero) .  As a result, in equation (14),   when an image component is larger than a predetermined threshold value, fn(hn(x, y)) becomes a suppressed value or 0, and h2n(x, y) becomes a suppressed value or nearly equal to hn(x, y) .  On the other hand, when an image component has a normal value, h2n(x, y) becomes the same value as  equation (13)-<br>
In this way, the dynamic range is changed, and effective image components (those equal to or lower than the predetermined value) of the high-frequency components become equal to those of the image before tone conversion.  Since image components (those higher than the predetermined value) that cause overshoot of the high-frequency components are not changed or are changed while being suppressed, overshoot or the like can be suppressed.  By setting the slope of the function form fn() to be equal to or larger than 1 (or larger than 1) within the range where the input value is equal to or smaller than the predetermined value, high-frequency components can be emphasized while suppressing overshoot.  Hence, the dynamic range and high-frequency components can be changed while suppressing overshoot and the like.<br><br>
The inverse DWT circuit 116 computes the inverse discrete wavelet transforms of image components (transform coefficients) converted by the component conversion circuit 115 as follows (s204).  The converted image components stored in the main memory 109 are sequentially read out and undergo the transformation process by the inverse discrete wavelet transformation circuit 116, and are written in the main •memory 109 again. Assume that the arrangement of the inverse discrete wavelet transformation of the inverse DWT circuit 116 in this embodiment is as shown in Fig. lie.  Input image components undergo filter' processes using two filters u and p, and are added to each other after being up-sampled, thus outputting an image signal x'.  These processes are described by:<br>
x' (2xn)=s' (n)-floor((d* (n-l)+d' (n))/4)    ... (15)<br>
X* (2xn+l)=d' (n)+floor( (x* (2xn)+x* (2xn+2))II)<br>
...(16)<br>
With the above process, linear inverse discrete wavelet transformation of transform coefficients is done.  Since two-dimensional inverse discrete wavelet transformation is implemented by sequentially executing linear inverse transformation in the horizontal and vertical directions of an image and its details are known to those who are skilled in the art, a description thereof will be omitted.<br><br>
As described above, in Embodiment 1,   a high-quality output image, the dynamic range of which has been changed, and high-frequency components of which have been adjusted while suppressing artifacts such as overshoot and the like can be obtained. Furthermore, a dynamic range change process and an emphasis or suppression process for each frequency band by changing image components for each frequency band can be made organically. (Embodiment 2)<br>
Embodiment 2 will be described below along with the flow of processes shown in Fig. 14. A description of the same processes as those in Embodiment 1 will be omitted.<br>
The DWT circuit 114 executes a DWT process of an original image Org(x, y).  Let horgn(x, y) be each image component obtained by that process (s701) .  The tone conversion circuit 113 executes a tone conversion process of the original image Org(x, y) using a tone conversion curve f() (s702). The DWT circuit 114 executes a DWT process of the image f(Org(x, y)) that has undergone the tone conversion process to obtain image components hn(x, y) (s703). Note that n indicates the subband category and x and y are the coordinates as in Embodiment 1.<br>
The component conversion circuit 115 converts the image component horgn(x, y) by:<br><br>
h2n(x, y) = hn(x, y) + (1 - fWOrg(x, y) ) )<br>
X horgn(x, y)	...(17)<br>
and adds the converted component to the image component hn (x, y) , thus obtaining a new. image component h2n (x, y) (s704).<br>
Note that the image components of the LL subband as the low-frequency component of the lowermost layer are not changed.  In this manner, the magnitudes of high-frequency components of the image, the dynamic range of which has been changed can be maintained to be nearly equal to those of high-frequency components of the original image.  In this case, since the high-frequency components are added using those of the original image, the magnitudes of the high-frequency components after the processing can accurately come closer to those of the high-frequency components of the original image. Note that the second term of the right-hand side of equation (17) may be multiplied by a predetermined constant.  In this case, the high-frequency components of the image can be adjusted (emphasized or suppressed) while changing the dynamic range,<br>
Note that equation (18) may be used in place of equation (17) to obtain the same effect:<br>
h2n(x., y) = horgn(x, y)	..',(18)<br>
The image, the dynamic range of which has been changed by the tone conversion process, does not suffer<br><br>
any artifacts such as  overshoot and the like.  However, the process given by equation (17) can amplify high-frequency components by converting and adding those of the original image, but simultaneously adds components of the original image which may cause artifacts such as overshoot and the like.  Hence, overshoot may occur.<br>
To prevent this, in place of equation (17), it is effective to change high-frequency components by:<br>
h2n(x, y) = hn(x, y) + (1 - f'(Org(x, y)))<br>
X fn(horgn(x, y))	...(19)<br>
Note that the function fn() has a curve form shown in Fig. 12 or 13.  Image components generated at an edge portion have values larger than normal components, and these curve forms suppress image components corresponding to edge components or set them 0 (zero). As a result, in equation (19), when an image component is large, fn(horgn(x, y)) becomes a suppressed value or 0, and h2n(x, y) becomes a suppressed value or nearly equal to hn(x, y) .  On the other hand, when an image component has a normal value, h2n(x, y) becomes the same value as equation (17).<br>
In this way, the dynamic range is changed, and effective image components (those equal to or lower than the predetermined value) of the high-frequency components become nearly equal to those of the image before tone conversion.  Since image components (those<br><br>
higher than the predetermined value) that cause overshoot of the high-frequency components are not changed or are changed while being suppressed, overshoot or the like can be suppressed.  By setting the slope of the function form fn() to be equal to or larger than 1 (or larger than 1) within the range where the input value is equal to or smaller than the predetermined value, high-frequency components can be emphasized while suppressing overshoot. Hence, the dynamic range and high-frequency components can be changed while suppressing overshoot and the like.<br>
The inverse DWT circuit 116 executes an inverse DWT process based on the image components changed by the component change circuit 115 (S705).<br>
In Embodiment 2, a high-quality output image, the dynamic range of which has been changed, and high-frequency components of which have been adjusted while suppressing artifacts such as overshoot and the like can be obtained.  Furthermore, a dynamic range change process and an emphasis or suppression process for each frequency band by changing image components for each frequency band can be made organically.  In addition, since the high-frequency components of the original image are used as those to be added, the high-frequency components of the processed image can accurately come closer to those of the original image.<br>
(Embodiment 3)<br><br>
Embodiment 3 will be described along with the flow of processes shown in Fig. 15. A description of the same processes as those in Embodiment 1 will be omitted.<br>
The tone conversion circuit 113 executes a tone conversion process of an original image Org(x, y) using a tone conversion curve f() to obtain a processed image f(Org(x, y) (s801) . The DWT circuit 114 then executes a DWT process of the original image to obtain image components hn(x, y) (s802) . Note that n indicates the subband category and x and y are the coordinates as in Embodiment 1.<br>
The component conversion circuit 115 converts each image component hn(x, y) by:<br>
h2n(x, y) = (1 - f'(Org(x, y))) x hn(x, y)<br>
... (20) to obtain a new image component h2n(x, y) (s803).<br>
Note that the values of the lowest frequency component LL are set to be all Os (zeros).<br>
In this way, by computing the inverse DWTs of h2n(x, y), an image Hr(x, y) consisting of only high-frequency components depending on the slope of the tone conversion curve can be obtained. Note that the right-hand side of equation (20) may be multiplied by a predetermined constant.  In this case, the high-frequency components of the image can be adjusted (emphasized or suppressed).<br><br>
The inverse DWT circuit 116 computes the inverse DWTs based on the components converted by the component conversion circuit 115 to obtain a restored image (s804).  The image f(Org(x, y) obtained by the tone conversion circuit 113 is added to the image Hr (x, y) obtained by the inverse DWT circuit 116 by:<br>
Prc(x, y) = f(Org(x, y)) + Hr(x, y)       ...(21) to obtain a processed image Prc(x, y) (s805),  Note that this addition is made by an image composition circuit 117 shown in Fig. 8.<br>
The image, the dynamic range of which has been changed by the tone conversion process, does not suffer any artifacts such as overshoot and the like.  However, the high-frequency components obtained by equation (20) are likely to contain components of the original image which may cause artifacts such as  overshoot and the like.  Therefore, an image obtained by inversely transforming such image components contains components which may cause overshoot, and if that image is added, overshoot may occur.<br>
To prevent this, in place of equation (20), it is effective to change high-frequency components by:<br>
h2n(x, y) - (1 - f'(Org(x, y))) x fn(hn(x, y))<br>
...(22)<br>
Note that the function fn() has a curve form shown in Fig, 12 or 13.  Image components generated at an edge portion have values larger than normal<br><br>
components, and these curve forms suppress image components corresponding to edge components or set them 0 (zero) . As a result, in equation (22), when an image component is large, since fn(hn(x, y)) becomes a suppressed value or 0, h2n (x, y) becomes a suppressed value or nearly equal to hn(x, y).  On the other hand, when an image component has a normal value, h2n(x, y) becomes the same value as equation (20).<br>
By adding the image obtained by computing the inverse DWTs of the image components given by equation (20) to the image that has undergone the tone conversion, the dynamic range can be changed, and an image, the high-frequency components of which have magnitudes nearly equal to those of the original image, can be obtained.<br>
Furthermore, since the image components are changed in correspondence with the magnitudes of image components as in equation (22), effective image components (those equal to or lower than the predetermined value) of the high-frequency components become nearly equal to those of the image before tone conversion.  Since image components (those higher than the predetermined value) that cause overshoot of the high-frequency components are not changed or are changed while being .suppressed, overshoot or the like can be suppressed.  By setting the slope of the function form fn() to be equal to or larger than 1 (or<br><br>
larger than 1) within the range where the input value is equal to or smaller than the predetermined value, high-frequency components can be emphasized while suppressing overshoot.  Hence, the dynamic range and high-frequency components can be changed while suppressing overshoot and the like.<br>
In Embodiment 3, a high-quality output image, the dynamic range of which has been changed, and high-frequency components of which have been adjusted while suppressing artifacts such as overshoot and the like can be obtained.  Furthermore.,- a dynamic range change process and an emphasis or suppression process for each frequency band by changing image components for each frequency band can be made organically.  In addition, since the high-frequency components of the original image are used as those to be added, the high-frequency components of the processed image can accurately come closer to those of the original image. Moreover, since the DWT process is done only once, the computation time can be shortened.<br>
(Embodiment 4)<br>
Embodiment 4 relates to an image process of the fourth aspect, which changes the dynamic range while preserving the edge structure. A description of the same process as in Embodiment 1 will be omitted. Fig. 16 is a block diagram showing the arrangement of an image processing circuit 112 of Embodiment 4,<br><br>
Reference numeral 901 denotes a high-frequency component generation circuit for generating high-frequency components by subtracting a smoothed image from an original image; 902, a tone conversion circuit for changing the dynamic range by executing tone conversion of the original image; and 903, a high-frequency component addition circuit for converting the high-frequency components generated by the high-frequency component generation circuit 901, and adding the converted high-frequency components to the image that has undergone the tone conversion in correspondence with the slope of a tone conversion curve used in the tone conversion circuit 902,<br>
Fig. 17 is a flow chart showing the flow of processes of Embodiment 4, and the processing of the image processing circuit 112 will be explained below along with the flow of processes shown in Fig. 17.<br>
In the image processing circuit 112 which receives an original image f(x, y) that has been processed by the pre-processing circuit 106 via the CPU bus 107 under the control of the CPU 108, the high-frequency component generation circuit 601 generates a smoothed image (slOOl) by;<br><br><br>
d2 = y - d	...(25)<br>
d3 = X + d	...(26)<br>
d4 = X - d	...(27)<br>
where fus (x, y) is the smoothed image, f(x, y) is the<br>
original image, and dl, d2, d3, and d4 are the mask<br>
sizes.<br>
When such smoothed image generation method using<br>
the moving average is used, a short calculation time<br>
can be assured.<br>
Note that the smoothed image fus(x, y) may be<br>
calculated using morphology arithmetic operations<br>
described by:<br><br>
and rl is an arbitrary constant selected in correspondence with an .input image.<br>
The profile of fus(x, y) obtained by the above process preserves the edge structure, and that image<br><br>
hardly causes overshoot and undershoot as drawbacks of the conventional sharpening process.<br>
Likewise, fus (x, y) may be generated using a median filter,  Since the smoothed image in such case relatively preserves the edge structure, it hardly causes overshoot and undershoot as drawbacks of the conventional sharpening process as in the image obtained using the morphology arithmetic operations.<br>
The high-frequency component generation circuit 901 generates high-frequency components fh(x, y) (sl002) by:<br>
fh(x, y) = f(x, y) - fus(x, y)	...(33)<br>
The tone conversion circuit 602 changes the dynamic range of the original image by executing tone conversion of the original image using a tone conversion curve Fl() by:<br>
fO(x, y) = Fl(f(X, y))	...(34)<br>
and obtains an output image f0(x, y) after tone conversion (sl003) .<br>
With the tone conversion described by equation (34), the dynamic range according to a predetermined object can be obtained, and no artifacts such as overshoot and the like occur.  However, since simple tone conversion is done, high-frequency components that form a fine structure are also compressed in a region where the dynamic range (pixel value range) is<br><br>
compressed, and the fine structure becomes hard to observe.<br>
The high-frequency component addition circuit 903 generates high-frequency components fh2(x, y) after the high-frequency components fh(x, y) by:<br>
fh2(x, y) = F(fh(x, y))	... (35)<br>
Note that the conversion curve F() is a function, as   shown in, e.g.. Fig. 18. According to the curve shape of this function, high-frequency components equal to or higher than a predetermined absolute value (threshold value) 301 shown in Fig. 18 can be set to be 0 (zero), and the magnitudes of high-frequency components less than the predetermined absolute value 301 remain unchanged (the slope of the curve is 1). Note that a curve shape that gradually decreases the high-frequency components equal to or higher than the predetermined absolute value to 0, or a curve shape that linearly or nonlinearly increases or decreases the magnitudes of the high-frequency components less than the predetermined absolute value may be adopted.<br>
The high-frequency component addition circuit 903 then converts the high-frequency components fh2(x, y) according to differential coefficients (slope) of the tone conversion curve, and adds the converted high-frequency components to the image fO(x, y) after tone conversion, as described by:<br>
fdr(x, y) = fO(x, y) + F3(f(x, y)) x c(f(x, y))<br><br><br>
to obtain a processed image fdr(x, y) (sl004).<br>
Mote that 3F1 (%) /5% represents the slope of the tone conversion curve Fl() .  F3() is a function which depends on the original image f(x, y) or smoothed image fus(x, y)^ and the addition amount of the high-frequency components can be adjusted by adjusting the function form of F3 () .  For example, if F3() &gt; 1, a sharpening effect can be simultaneously obtained.  If F3() is set to be a function which monotonously increases with increasing pixel value, noise can be reduced by decreasing the addition amount of the high-frequency components in a low pixel value region where noise is relatively conspicuous,<br>
As described above, with this process, since high-frequency components corresponding to effective information such as a fine structure or the like can be restored, and high-frequency components of an edge portion are set to be 0 and are not added to the image after tone conversion, the edge shape can be preserved, and overshoot or the like can be prevented.<br>
In general, the absolute value of a high-frequency component that indicates overshoot is larger than a predetermined value (threshold value), and the absolute value of a high-frequency component<br><br>
corresponding to a fine structure is smaller than the predetermined value. Also, the high-frequency component with the large absolute value is generated in an edge portion of an image.  Furthermore, overshoot is experienced in the processed image obtained by restoring high-frequency components when the value of the high-frequency component equal to or higher than the predetermined value is specifically outstanding.<br>
For this reason, when the absolute value of a high-frequency component to be added is larger than the predetermined value, it is set to be 0, thus suppressing overshoot and preserving the edge structure<br>
Since high-frequency components are restored in correspondence with the degree of a change in dynamic range (pixel value range) according to equation (36), the fine structure can be accurately observed even after the dynamic range has been changed.  Furthermore, since high-frequency components that cause overshoot are set to be 0 by the same effect as in Embodiment 1, the edge structure of the processed image is maintained<br>
As described above, according to Embodiment 4, since the dynamic range is changed by tone conversion, and high-frequency components are restored by cutting those which cause overshoot, a processed image in which the edge structure can be maintained, and the fine structure is restored to that before tone conversion can be obtained.  Furthermore, by converting<br><br>
high-frequency components corresponding to the fine structure using a predetermined function, the fine structure before tone conversion can undergo a predetermined emphasis or suppression process. Hence, a high-quality processed image, the dynamic range or predetermined pixel value range of which has been changed, can be obtained.<br>
When a smoothed image is generated by morphology arithmetic operations, overshoot hardly occurs. Furthermore, when the aforementioned conversion curve is used, since high-frequency components corresponding to overshoot can be suppressed, overshoot can be suppressed more effectively.<br>
Likewise, when a smoothed image is generated by the median filter, overshoot hardly occurs. Furthermore, when the aforementioned conversion curve is used, since high-frequency components corresponding to overshoot can be suppressed, overshoot can be suppressed more effectively.<br>
(Embodiment 5)<br>
Embodiment 5 relates to an image process of the fifth aspect, which changes the dynamic range while preserving the edge structure. A description of the same process as in Embodiment 1 will be omitted. Also, the arrangement of the image processing circuit 112 of Embodiment 4 will be explained using Fig. 16. Reference numeral 902 denotes a tone conversion circuit<br><br>
for changing the dynamic range by executing tone conversion of an original image; 901, a high-frequency component generation circuit for generating high-frequency components by subtracting a smoothed image of the image that has undergone tone conversion by the tone conversion circuit 902 from that image; and 90 3, a high-frequency component addition circuit for converting the high-frequency components generated by the high-frequency component generation circuit 901 in correspondence with the slope of a tone conversion curve used in the tone conversion circuit 902, and adding the converted high-frequency components to the image that has undergone the tone conversion.<br>
Fig. 19 is a flow chart showing the flow of processes of Embodiment 5, and the processing of the image processing circuit 112 will be explained below along with the flow of processes shown in Fig. 19.<br>
In the image processing circuit 112 which receives an original image f(x, y) that has been processed by the pre-processing circuit 106 via the CPU bus 107 under the control of the CPU 108, the tone conversion circuit 902 changes the dynamic range of the original image by executing tone conversion of the original image using a tone conversion curve Fl() by:<br>
fO(x, y) = Fl(f(x, y) )	... (38)<br>
to obtain an'output image f0 (x, y) after tone conversion (sl201) .<br><br>
The high-frequency component generation circuit 901 generates a smoothed image of the image that has undergone the tone conversion (sl202) . Let fus(x, y) be the smoothed image. As described in Embodiment 4, generation of the smoothed image may use any method of the moving average, morphology arithmetic operation, median filter, and the like.<br>
The high-frequency component generation circuit 901 then generates high-frequency components fh(x, y) (S1203) by:<br>
fh(x, y) = fO(x, y) - fus(x, y)	...(39)<br>
The high-frequency component addition circuit 90 3 generates high-frequency components fh2 (x, y) by converting the high-frequency components fh(x, y) using:<br>
fh2(x, y) - F(fth(x, y) )	... (40)<br>
Note that the conversion curve F() has a function form shown in, e.g.. Fig. 18.<br>
The high-frequency component addition circuit 903 then converts the high-frequency components .fh2(x, y) according to differential coefficients (slope) of the tone conversion curve and adds the converted high-frequency components to the image fO(x, y) after tone conversion, as described by:<br>
fdr(x, y) = fO(x, y) + F3(f(x, y)) x c(f(x, y))<br>
X fh2(x, y)	...(41)<br><br><br>
to obtain a processed image fdr(x, y) (sl204).<br>
Note that F3() is a function which depends on the original image or smoothed image, the addition amount )  of the high-frequency components can be adjusted by adjusting the function form of F3(), and a sharpening effect can be simultaneously obtained if F3() &gt; 1.<br>
Since high-frequency components are restored in correspondence with the degree of a change in dynamic range (pixel value range) according to equations (41) and (42), the fine structure can be accurately observed even after the dynamic range has been changed. Furthermore, since the addition amount of high-frequency components that cause overshoot is set to be 0 by the same effect as in Embodiment 1, the edge structure of the processed image is maintained.<br>
As described above, according to Embodiment 5, since the dynamic range is changed by tone conversion, and high-frequency components are restored by cutting those which cause overshoot^ the fine structure can be maintained in practice or can be emphasized or suppressed while maintaining the edge structure in the processed image.<br>
When a smoothed image is generated by morphology arithmetic operations, overshoot hardly occurs. Furthermore, when the aforementioned conversion curve<br><br>
is used, since high-frequency components corresponding to overshoot can be suppressed, overshoot can be suppressed more effectively.<br>
Likewise, when a smoothed image is generated by the median filter, overshoot hardly occurs. Furthermore, when the aforementioned conversion curve is used, since high-frequency components corresponding to overshoot can be suppressed, overshoot can be suppressed more effectively.<br>
(Embodiment 6)<br>
Embodiment 6 obtains the effects of the dynamic range change and frequency processes while preserving the edge structure by decomposing an image that has undergone tone conversion into frequency coefficients of a plurality of frequency bands, and converting the frequency coefficients.  Fig. 20 is a block diagram showing the arrangement of Embodiment 6, and a description of the same processes as in Embodiment 1 will be omitted.  Referring to Fig. 20, reference numeral 112 denotes an image processing circuit; 1301, a tone conversion circuit for making tone conversion that changes the dynamic range; 1302, a frequency band decomposing circuit for decomposing the image that has undergone tone conversion by the tone conversion circuit 1301 into a plurality of frequency bands by wavelet transformation, Laplacian pyramid transformation, or the like to obtain frequency<br><br>
coefficients; 1303, a coefficient conversion circuit for converting frequency coefficient values, depending on the slope of the tone conversion curve used in the tone conversion circuit 1301 and pixel values of an original image or its smoothed image; and 1304, an inverse conversion circuit for reconstructing an image by inversely converting the frequency coefficients using inverse wavelet transformation, inverse Laplacian pyramid transformation, or the like on the basis of the coefficients converted by the coefficient conversion circuit 1303.<br>
Fig. 21 shows an example of the tone conversion curve used to convert the dynamic range in the tone conversion circuit 1301. Note that the abscissa plots the pixel values of an input image; and the ordinate plots those of an output image.  Fig. 22 is a flow chart showing the flow of processes in the image processing circuit 112 according to Embodiment 6 of the present invention.  Fig. 23 shows an example of a curve form used to convert frequency coefficients.  The abscissa plots input coefficients, and the ordinate plots output coefficients.<br>
Embodiment 6 will be described below along with the flow of processes shown in Fig. 22. The tone ■ conversion circuit 1301 executes tone conversion of an original image f(x, y) in accordance with the tone conversion curve F() shown in Fig. 21 (sl501).  In this<br><br>
case, for example, curve 2 compresses the range of a low-pixel value region, and curve 3 expands that range conversely.  Likewise, curve 4 expands the range of a high-pixel value region, and curve 5 compresses that range. The curve F() is preferably formed to be differential continuous (differentiable and continuous function).  Since the process in step S1501 is simple tone conversion, no overshoot occurs in the image after tone conversion.<br>
The frequency coefficient decomposing circuit 1302 performs a two-dimensional discrete wavelet transformation process of an image F(f(x, y), the dynamic range of which has been changed by tone conversion in the tone conversion circuit 1301, and outputs frequency coefficients (sl502). The frequency transformation method may be, e.g., wavelet transformation described in Embodiment 1.  In this case, the image is decomposed into frequency coefficients HHl, HLl, LHl,.,., LL for respective frequency bands. Note that frequency decomposition may be done by a Laplacian pyramid transformation method to be described below.<br>
In Fig, 24A, g and b respectively represent a low-resolution image and high-frequency component coefficient of an image upon decomposing to one level. The low-resolution approximate image g is obtained by filtering image signal x using a low-pass filter, and down-sampling the filtered signal.  The high-frequency<br><br>
component coefficient b is obtained by calculating the difference between image signal x and an image obtained by up-sampling the low-resolution approximate image g and filtering the sampled image using a low-pass filter As the low-pass filter, a filter shown in, e.g.. Fig. 24B is used.  In the Laplacian pyramid transformation method, this process is repeated for the low-resolution approximate image g to obtain frequency coefficients of respective frequency bands.  Since details of this method are known to those who are skilled in the art, a description thereof will be omitted.<br>
Fig. 2 4C shows inverse Laplacian pyramid transformation.  By adding the high-frequency component coefficient b and an image obtained by up-sampling low-resolution approximate image g and filtering it using a low-pass filter, image signal x' is output.  As the low-pass filter, a filter shown in, e.g.. Fig. 24B is used.  The Laplacian pyramid transformation method obtains a composite image by repeating this process for respective levels.  Since details of this method are known to those who are skilled in the art, a description thereof will be omitted.<br>
The coefficient conversion circuit 1303 converts the frequency coefficients using a conversion curve F2() shown in, e.g.. Fig. 23 (sl503).  In this case, only coefficients in a region 1601 equal to or lower<br><br>
than a predetermined absolute value (threshold value) are converted, and those higher than the predetermined absolute value remain unchanged.  Note that hn(x, y) are frequency coefficients of n levels and those in the region 1601 equal to or lower than the predetermined absolute value, and h2n are coefficient values after coefficient conversion of hn(x, y) by:<br>
h2n(x, y) = f4(f(x, y)) x (1/F'(x, y)) x hn(x, y)<br>
... (43)<br>
Note that f4() has a curve form which depends on the original image f(x, y) or its smoothed image.and, for example, a curve form that decreases a value of interest when that value is equal to or lower than a predetermined pixel value, and increases the value of interest when that value is larger than the predetermined pixel value.  Frequency coefficients which are higher than the predetermined absolute value (threshold value) remain unchanged-  This predetermined absolute value is determined by experiments depending on the magnitudes of coefficients with respect to the edge of an image.  The edge structure can be preserved when coefficients higher than the predetermined absolute value remain unchanged, and artifacts such as overshoot and the like can be suppressed in a reconstructed image.  Note that the conversion curve F2() in Fig. 23 illustrates the aforementioned process, and coefficients in the region 1601 are not always<br><br>
converted linearly but are converted on the basis of equation (43).<br>
Since the magnitudes of frequency components (corresponding to effective components of a fine structure or the like) equal to or lower than the predetermined absolute value (threshold value) are converted on the basis of the tone conversion curve^ the same contrast of the fine structure as in the original image can be maintained even in the processed image.  Furthermore, since the frequency coefficients equal to or lower than the predetermined absolute value are increased/decreased on the basis of the values of the original image f(x, y) or the like, effective information (fine structure) corresponding to large pixel values of the original image can be sharpened on the reconstructed image. Also, noise emphasis can be suppressed since coefficients in the low pixel value region are not increased.<br>
From the aforementioned fact, equation (43) can be rewritten as:<br>
h2n(x, y) = f4(f(x, y) ) x (l/F' x, y) ) x hn(x, y) , when hn(x, y) 
= hn(x, y), when hn(x, y) &gt; predetermined absolute value (threshold value) .,.(43)*<br>
The inverse conversion circuit 1304 inversely converts the image components that have undergone<br><br>
coefficient conversion, thereby generating a reconstructed image (sl504) .<br>
According to Embodiment 6 described above, the dynamic range is changed, and the information of the fine structure before the dynamic range is changed can be substantially maintained while suppressing overshoot and the like.  Furthermore, since the frequency coefficients are increased/decreased depending on the pixel values of the original image or its smoothed image, noise suppression and sharpening effects can also be obtained in the reconstructed image.<br>
(Embodiment 7)<br>
Embodiment 7 obtains the effects of the dynamic range change and frequency processes while preserving the edge structure.  Fig. 25 is a block diagram showing the arrangement of Embodiment 7, and a description of the same processes as in Embodiment 1 will be omitted. Referring to' Fig. 25, reference numeral 112 denotes an image processing circuit; 1801, a first frequency band decomposing circuit for decomposing an original image into a plurality of frequency bands by wavelet transformation, Laplacian pyramid transformation, or the like to obtain first frequency coefficients; 1802, a tone conversion circuit for making tone conversion that changes the dynamic range; 18 03, a second frequency band decomposing circuit for decomposing the image that has undergone tone conversion by the- tone<br><br>
conversion circuit 1802 into a plurality of frequency bands by wavelet transformation, Laplacian pyramid transformation, or the like to obtain second frequency coefficients; 18 04, a coefficient conversion circuit for converting first frequency coefficient values, depending on the slope of the tone conversion curve used in the tone conversion circuit 1802 and pixel values of an original image or its smoothed image; 1805, a coefficient addition circuit for adding the coefficients converted by the coefficient conversion circuit 1804 to the second frequency coefficients; and 1806, an inverse conversion circuit for reconstructing an image by inversely converting the frequency coefficients obtained by the coefficient addition circuit 1805 using inverse wavelet transformation, inverse Laplacian pyramid transformation, or the like.<br>
Fig. 26 is a flow chart showing the flow of processes of the image processing circuit 112 according to Embodiment 7 of the present invention.  Fig. 27 shows an example of the coefficient conversion curve used in the coefficient conversion circuit 1804.  In Fig. 27, the abscissa plots input coefficients, and the ordinate plots output coefficients.<br>
Embodiment 7 will be described below along with the flow of processes shown in Fig. 26. The first frequency band decomposing circuit 1801 executes a frequency band decomposing process of an original image<br><br>
to obtain image components horgn(x, y) (sl901). The frequency coefficient decomposing method may be any method of wavelet transformation, Laplacian pyramid transformation, and the like.  In this embodiment, a method using two-dimensional discrete wavelet transformation (DWT) will be explained.<br>
The tone conversion circuit 1802 executes tone conversion of an original image Org (x, y) using a tone conversion curve f() (sl902).  An image f(Org(x, y)) that has undergone the tone conversion process undergoes a DWT process in the second frequency band decomposing circuit 1803 to obtain frequency coefficients hn(x, y) (sl903). Note that n indicates the subband category and x and y are the coordinates as in other embodiments.<br>
The coefficient conversion circuit 18 04 and coefficient addition circuit 1805 convert the frequency coefficients horgn (x, y) and add the converted frequency coefficients to the frequency coefficients hn(x, y), as described by:<br>
h2n(x, y) = hn(x, y) + (1 - fWOrg(x, y) ) )<br>
X horgn(x, y)	...(44)<br>
to obtain new frequency components h2n(x, y) (sl904).<br>
Note that horgn(x, y) are converted in advance using the conversion curve shown in Fig. 27, and coefficients which are higher than a predetermined absolute value (threshold value) (corresponding to an<br><br>
edge portion) are set to be 0 in advance.  Therefore, in equation (44), since only effective components corresponding to a fine structure are converted in accordance with the slope of the tone conversion curve, and the converted components are added to the frequency coefficients of the image after tone conversion, the magnitudes of effective high-frequency components of the original image can be preserved in practice.  In this case, since the high-frequency components are added using those of the original image, the magnitudes of high-frequency components of the processed image can accurately become closer to those of the original image.<br>
In place of equation (44), equation (45) may be used to obtain the same effect.  That is, horgn(x, y) is converted in advance using the conversion curve shown in Fig. 27 in this case as well so as to prevent the edge structure from being not preserved and overshoot and the like from occurring.  Only when the converted horgn(x, y) is not 0, (the converted) Horgn(x, Y) is selected as h2n(x, y); when the converted horgn(x, y) is 0, hn(x, y) is selected as h2n(x, y).<br>
h2n(x, y) = horgn(x, y), when converted horgn(x, y) ;^ 0<br>
= hn(x, y), when converted horgn(x, y)<br>
= 0	...(45)<br>
The inverse conversion circuit 1806 executes an inverse conversion process based on the frequency<br><br>
coefficients obtained by the coefficient addition circuit 1805 (sl905) .<br>
As described above, according to Embodiment 7, since only effective coefficients corresponding to the fine structure of the original image are converted in accordance with the slope of the tone conversion curve, and the converted coefficients are added to frequency components of the image after tone conversion, the magnitudes of effective high-frequency components of the original image can be preserved in practice in the restored image.  In this case,   since the high-frequency components are added using those of the original image, the magnitudes of the high-frequency components after the processing can accurately come closer to those of the high-frequency components of the original image. Since the edge structure is preserved even in an image, the dynamic range of which has been changed, and which has undergone the frequency process, overshoot and the like can be suppressed.<br>
(Embodiment 8)<br>
Embodiment 8 relates to an image process for obtaining the effects of the dynamic range change and frequency processes while preserving the edge structure Fig. 28 is a block diagram showing the arrangement of Embodiment 8, and a description of the same processes as in Embodiment 1 will be omitted.  Referring to Fig. 28, reference numeral 112 (denotes an image<br><br>
processing circuit; 2101, a frequency band decomposing circuit for decomposing an original image into a plurality of frequency bands by wavelet transformation, Laplacian pyramid transformation, or the like to obtain frequency coefficients; 2102, a coefficient conversion circuit for converting the coefficients on the basis of the slope of a tone conversion curve used later to change the dynamic range; 2103, an inverse conversion circuit for inversely converting the coefficients obtained by conversion by the coefficient conversipn circuit 2102; and 2104, a tone conversion circuit for changing the dynamic range of the image, obtained by inverse conversion by the inverse conversion circuit 2103.<br>
Fig. 29 is a flow chart showing the flow of processes of the image processing circuit 112 according to Embodiment 8 of the present invention.  Fig. 30 shows an example of the coefficient conversion curve used in the coefficient conversion circuit 2102.  In Fig. 30, the abscissa plots input coefficients, and the ordinate plots output coefficients.<br>
Embodiment 8 will be described below along with the flow of processes shown in Fig, 29, The frequency band decomposing circuit 2101 executes a two-dimensional discrete wavelet transformation process of an original image f(x, y), and outputs frequency coefficients (s2201).  The frequency coefficient<br><br>
decomposing method may be any method of wavelet transformation, Laplacian pyramid transformation, and the like.  In this embodiment, the image is decomposed into frequency coefficients HHl, HLl, LHl,..., LL for respective frequency bands using two-dimensional discrete wavelet transformation.<br>
The coefficient conversion circuit 2102 converts the frequency coefficients in accordance with a tone conversion curve {e.g., a conversion curve shown in Fig. 21) F() used in the tone conversion circuit 2104 (s2202).  In this case, only coefficients in a region 2301 equal to or lower than a predetermined absolute value (threshold value) are converted, and those higher than the predetermined absolute value remain unchanged, as shown in Fig. 30.  This predetermined absolute value is determined by experiments depending on the magnitudes of coefficients with respect to the edge of an image. The edge structure can be preserved when coefficients higher than the predetermined absolute value remain unchanged, and artifacts such as overshoot and the like can be suppressed in a reconstructed image<br>
Note that hn (x, y) are frequency coefficients of n levels, and h2n(x, y) are coefficient values obtained by executing coefficient conversion of hn (x, y) based on whether or not hn(x, y) is a coefficient which belongs to the region 2301 equal to or lower than the predetermined absolute value (threshold value).<br><br>
h2n(x, y) = f5(f(x, y)) x (1/F'(x, y)) x hn(x, y), when hn(x, y) 
= fn (x, y), when hn (x^ y) &gt;<br>
predetermined threshold value	,..(46)<br>
Note that f5() has a curve form that depends on the original image f(x, y) or its smoothed image and, for example, a curve form that decreases the value of interest when that value is equal to or lower than a predetermined pixel value, and increases the value of interest when that value is larger than the predetermined pixel value.<br>
The inverse conversion circuit 2103 inversely converts h2n(x, y) (inverse DWT) (S2203).  A restored image f2(x, y) is then obtained.  The tone conversion circuit 2104 executes tone conversion of the restored image f2(x, y) by:<br>
f3(x, y) = F(f2(x, y))	...(47)<br>
to obtain an image f3(x, y), the dynamic range of which has been changed (s2204).<br>
As described above, according to Embodiment 8, since the frequency coefficients are changed in advance on the basis of a curve form of tone conversion used to change the dynamic range, the magnitudes of high-frequency components in an image, the dynamic range of which has been changed, can be maintained nearly equal to those"of high-frequency components of the original image.  Since coefficient values within<br><br>
the predetermined absolute value range are not changed, the edge structure can be preserved, and overshoot and the like can be suppressed even in an image which has undergone the frequency process and dynamic range change process. Also, since the original image is decomposed into multiple-frequency coefficients, hybrid processes with noise suppression, a sharpening process, and the like can be easily implemented.  For example, in noise suppression or the like, an analysis process based on coefficients of the original image is executed<br>
According to the embodiments mentioned above, a high-quality image, the dynamic range or partial pixel value range of which has been changed, while suppressing or avoiding collapse of the edge structure of the image or generation of overshoot, can be obtained.<br>
(Embodiment 9)<br>
An image processing apparatus 4100 as one aspect of the present invention will be described below with reference to the accompanying drawings.  Note that the same reference numerals denote the same parts throughout the figures, and a repetitive description thereof will be omitted.  The image processing apparatus 4100 of the present invention is realized as an X-ray photographing apparatus used in X-ray radiography or a part of the X-ray photographing<br><br>
apparatus (e.g., an image processing unit of the X-ray photographing apparatus).<br>
Referring to Fig. 31, the image processing apparatus 4100 has.a CPU 4110, memory 4120, control panel 4130, display unit 4140, pre-processing unit 4150, data acquisition unit 4160, and image processing unit 4170. The image processing apparatus 4100 has a CPU bus 4105, and respective components can exchange data or information via the CPU bus 4105. Note that Fig. 31 is a block diagram showing the image processing apparatus 4100 of this embodiment. As will be described in this embodiment, the image processing apparatus 4100 has an image sensing unit 4190 connected to the data acquisition unit 4160, and can achieve an image process of X-ray images sensed by the image sensing unit 4190 by a single apparatus.  However, the image processing 'apparatus 4100 of this embodiment may be arbitrarily connectable to another image sensing device, and may have an arrangement that can implement only an image process (frequency process such as sharpening or the like) to be described later.<br>
In this arrangement, the image processing apparatus 4100 generates an original image by executing pre-processes (e.g., offset correction, gain correction. Log correction) of an image (raw image) obtained by the image sensing unit 4190 by the pre-processing unit 4150. The original image means an image which is obtained by<br><br>
executing the pre-processes for a raw image, e.g., an image which has undergone corrections depending on the characteristics of the image sensing unit  4190 to adjust its format. However, since the original image is insufficient for a doctor to make diagnosis, an image most suitable for diagnosis or a desired image can be obtained by executing a sharpening process or the like by the image processing unit 4170. Note that this optimal image or desired image will also be referred to as a QA image (image quality-assured image)<br>
The CPU 4110 can be any processors independently of their names such as an MPU and the like, and is connected to the CPU bus 41Q5. The CPU 4110 controls the operations of respective units via the CPU bus 4105 The CPU 4110 controls the operation of the overall image processing apparatus 4100 in accordance with operator's operations at the control panel 4110 using a program stored in the memory 4120.<br>
The memory 4120 includes a nonvolatile memory such as a ROM or the like, which stores an operation program of the image processing apparatus 4100, various data required for processes, and the like, and a volatile memory such as a RAM or the like, which temporarily stores an image and a required control program.<br>
The control panel 4130 comprises, e.g., a keyboard, switches, touch panel, and the like, and<br><br>
allows the operator to operate the image processing apparatus 4100.  The display unit 4140 includes a display device such as a CRT, liquid crystal display, or the like, and/or printing device, and can output a QA image.<br>
The pre-processing unit 4150 is a circuit which can execute pre-processes for a raw image, and is connected to the CPU bus 4105 and data acquisition unit 4160.  Note that the pre-processes in this embodiment includes a process for correcting image errors generated by variations of the characteristics (dark current, detection sensitivity, and the like) of respective pixels (not shown) of a two-dimensional X-ray sensor 4194 (to be described later) of the image sensing unit 4190.  More specifically, the pre-processes indicate offset correction, gain correction, logarithmic conversion (Log conversion), and the like, and every state-of-the-art techniques can be applied as such ones.  The pre-processing unit 4150 executes correction on the basis of data obtained by storing a raw image received by the data acquisition unit 4160 (or a raw image received by the data acquisition unit 4160 via the memory 4120) in the memory 4120 under the control of the CPU 4110.  Note that the pre-processing unit 4150 is a part of a circuit for executing image processes, and may be formed as a part of the image processing unit 4170 to<br><br>
be described later.  The pre-processing unit 4150 outputs the processed image (original image) to the image processing unit 417 0 and/or the memory 4120.<br>
The data acquisition unit 4160 is connected to the image sensing unit 4190, pre-processing unit 4150, and CPU bus 4105.  The data acquisition unit 4160 converts a raw image output from the image sensing unit 4190 into a predetermined electrical signal, and supplies the electrical signal to the pre-processing unit 4150 and/or the memory 4120.  The data acquisition unit 4160 has, e.g., a 14-bit A/D converter, and supplies a digital signal proportional to the output from the image sensing unit 4190 to the pre-processing unit 4150 and/or the memory 4120.  In this way, the pre-processing unit 4150 can execute the aforementioned pre-processes, e.g., logarithmically convert the digital signal into one proportional to the log value of the X-ray dose.<br>
The image processing unit 4170 has a low-frequency component generator 4171, high-frequency component generator 4172, component converter 417 4, and high-frequency component adder 417 6, and can exchange data via the CPU bus 4105.  The low-frequency component generator 4171 generates a smoothed image (i.e., low-frequency components or a low-frequency image, which are or is used as synonymous terms in principle in this specification) from the original image.  The<br><br>
high-frequency component generator 4172 generates high-frequency components (high-frequency image) by subtracting the smoothed image from the original image. The component converter 4174 converts the high-frequency components generated by the high-frequency generator 417 2 using a predetermined function.  Note that such predetermined function will be explained in detail later in the paragraphs of operations, and a description thereof will be omitted here.  The high-frequency component adder 417 6 adds the high-frequency components converted by the component converter 4174 to the original image or smoothed image. The image processing unit 4170 of this embodiment does not add high-frequency components having absolute values equal to or higher than a predetermined threshold value to the original image. Or the image processing unit 4170 adds, to the smoothed image converted at a predetermined magnification, high-frequency components obtained by converting high-frequency components having absolute values equal to or higher than the predetermined threshold value at an identical magnification (the predetermined magnification) and arbitrarily converting high-frequency components having absolute values less than the predetermined threshold value.  In this way, the edge structure is preserved, overshoot and the like<br><br>
can be suppressed;. and a desired frequency process such as sharpening or the like can be executed.<br>
As shown in Fig. 36, the image processing unit 4170 may be replaced by an image processing unit 4170a. Note that Fig. 36 is a block diagram showing an image processing apparatus 4100a according to another embodiment of the present invention. The image processing unit 4170a has a frequency coefficient decomposing unit 417 8, coefficient converter 4180, and inverse converter 4182, and can exchange data via the CPU bus 4105.<br>
The frequency coefficient decomposing unit 417 8 comprises a circuit for applying a frequency decomposing process based on discrete wavelet transformation (to be also referred to as DWT hereinafter) or Laplacian pyramid transformation to the original image.  Such circuit has an arrangement, as shown in, e.g.. Figs. 37A and 37B, but does not limit application of any other state-of-the-art techniques. Fig. 37A is a circuit diagram of the circuit showing an instantiated circuit arrangement of the frequency decomposing process based on discrete wavelet transformation, and Fig. 37B is a circuit diagram of the circuit showing an instantiated circuit arrangement of the frequency decomposing process based on Laplacian pyramid transformation. With such arrangement, the frequency coefficient decomposing unit 417 8 obtains<br><br>
frequency coefficients (wavelet transform coefficients or Laplacian pyramid transform coefficients) for respective frequency bands.<br>
The coefficient converter 4180 is a coefficient conversion circuit for converting the frequency coefficients for respective frequency bands obtained by the frequency coefficient decomposing unit 4178, and converts the frequency coefficients on the basis of a predetermined function.  Note that the predetermined function will be explained in detail later in the paragraphs of operations, and a description thereof will be omitted here.<br>
The inverse converter 4182 comprises a circuit for making inverse discrete wavelet transformation (to be also referred to as inverse DWT hereinafter) or inverse transformation of the Laplacian pyramid method (inverse Laplacian pyramid transformation) on the basis of the frequency coefficients converted by the coefficient converter 4180. Such circuit has an arrangement, as shown in, e.g.. Figs. 38A and 38B, but does not limit application of any other state-of-the-art techniques.  Fig. 38A is a circuit diagram of the circuit showing an instantiated circuit arrangement of inverse discrete wavelet transformation, and Fig. 38B is a circuit diagram of the circuit showing an instantiated circuit arrangement of inverse transformation of the Laplacian pyramid method (inverse<br><br>
Laplacian pyramid transformation).  With such arrangement, the inverse converter 4182 can obtain a QA image by inversely converting the converted frequency coefficients.<br>
Note that the image processing units 417 0 and 4170a are different in terms of their image processing methods, which will be easily understood in the paragraphs of operations to be described later.<br>
The image sensing unit 4190 comprises an X-ray generator 4192 and the two-dimensional X-ray sensor 4194, and is connected to the data acquisition unit 4160. As shown in Fig, 31, the X-ray generator 4192 and two-dimensional X-ray sensor 4194 are arranged at opposing positions via an object P to be examined.  In such arrangement, the image sensing unit 4194 senses X-rays via interactions with the object P to be examined such as absorption, scattering, and the like, and supplies the X-ray image (raw image) to be data acquisition unit 4160. The X-ray generator 4192 can be operated by the operator (including control by the CPU 4110 in accordance with an operation program stored in the memory 4120 when the operator operates the control panel 4130), and comprises a circuit including an X-ray bulb. On the other hand, the two-dimensional sensor 4194 has a multilayered structure made-up of a phosphor and amorphous silicon photosensor in turn from the entrance side of X-rays, and is connected to the data<br><br>
acquisition unit 4160. Note that the image sensing unit 4190 is not limited to the aforementioned specific arrangement, and other state-of-the-art techniques may be applied. The image sensing unit 4190 may be a building component independent from the image processing apparatus 4100, and the image processing apparatus 4100 of the present invention does not always require the image sensing unit 4190. For example, the image sensing unit 4190 may be connected to the image processing apparatus MP6]4100 as an independent device<br>
The operations of the aforementioned image processing apparatus 4100 will be described below.  In the following description, the image processing apparatus 4100 is embodied as, for example, a medical X-ray photographing apparatus.<br>
When the operator inputs a photographing instruction by operating the control panel 4130, the X-ray generator 4192 emits-an X-ray beam toward-the object P to be examined. The X-ray beam emitted by the X-ray generator 4192 is transmitted through the object P to be examined while being attenuated, and reaches the two-dimensional X-ray sensor 4194. The X-ray beam is detected by the two-dimensional X-ray sensor 4194, and is output as an X-ray image. Assume that the X-ray image output from the two-dimensional X-ray sensor 4194 is, for example, a human body image or the like.<br><br>
The data acquisition unit 4160 converts the X-ray image output from the two-dimensional X-ray sensor 4194 into a digital signal, and supplies that signal to the pre-processing unit 4150.  The pre-processing unit 4150 executes pre-processes such as offset correction, gain correction, and the like for the digital signal output from the data acquisition unit 4160. The signal that has undergone the pre-processes by the pre-processing unit 4150 is transferred as an original image to the memory 4120 and/or the image processing unit 4170 via the CPU bus 4105 under the control of the CPU 4110.<br>
The operation of the image processing unit 4170, i.e., the image processing method according to a preferred embodiment of the present invention, will be described below with reference to Figs. 32 and 33. Fig. 32 is a flow chart showing the image processing method according to an embodiment of the present invention.  Fig. 33 shows a conversion curve used to convert high-frequency components in the component converter 4174.  In Fig, 33, the abscissa plots input high-frequency components, and the ordinate plots converted high-frequency components.  Fig. 33 shows the conversion curve when input components are +, and the same conversion is made even when coefficients are -. That is, as  can be easily understood for those who are skilled in the art. Fig. 33 shows only the first quadrant of an odd function.<br><br>
The low-frequency component generator 4171 of the image processing unit 4170 receives the image (original image) output from the pre-processing unit 4150 via the CPU bus 4105. -The low-frequency component generator 4171 generates, based on the original image, a smoothed image (step 5000) by:<br><br>
where f(x, y) is the original image, fus(x, y) is the smoothed image, and dl, d2, d3, and d4 are the mask sizes.<br>
Note that dl = y + d, d2 = y - d, d3 = x + d, and d4 = X - d. When such smoothed image generation method using the moving average is used, a short calculation time can be assured.<br>
Note that the smoothed image fus(x, y) generated in step 5000 is not limited to that obtained by the function given by equation (48) .  For example, the smoothed image may be generated using morphological filter arithmetic operations described by:<br>
fl(x, y) = min(f(x+l, y+1) - D(xl, yl)<br>
I xl X xl + yl X yl 
f2(x, y) = max{fl(x+l, y+1) + D(xl, yl)<br>
I xl x xl + yl X yl 
f3(x, y) = max{f2(x+l, y+1) + D(xl, yl)<br>
I xl x xl + yl x yl 
 <br>
fus(x, y) = min{f3(x-fl, y+1) - D(xl, yl)<br>
I xl X xl + yl X yl 
D(x,   y)   =   0,   when  xxx+yxy<rlxrl></rlxrl>
...(53)<br>
D(x,   y)   =  -oo,   when  xxx  +  yxy&gt;rlxrl<br>
...(54)<br>
The profile of fus(x, y) obtained by the above process approximately preserves the edge structure, and that image hardly causes overshoot as a drawback of the conventional sharpening process,<br>
Likewise, fus(x, y) may be generated using a median filter.  Since the smoothed image in such case relatively preserves the edge structure, it hardly causes overshoot as a drawback of the conventional sharpening process as   in the image obtained using the morphology arithmetic operations.<br>
The high-frequency component generator 417 2 generates high-frequency components fh(x, y) by:<br>
fh(x, y) =   f(x, y) - fus(x, y)	...(55)<br>
That is, the generator 4172 calculates the difference between the smoothed image fus(x, y) obtained in step 5000 and the original image f(x, y),<br><br>
and extracts a differential image consisting of high-frequency components (5005).<br>
The component converter 417 4 generates high-frequency fhl(x, y) by converting the high-frequency components fh (x, y) using a conversion curve (function Fl()) (step 5010) by:<br>
fhl(x, y) - Fl(fh(x, y))	...(56)<br>
Note that the conversion curve Fl() is a function which is expressed by a curve shape shown in, e.g.. Fig. 33- According to such curve shape, high-frequency components having absolute values equal to or higher than a predetermined value (threshold value) are decreased, and the magnitudes of high-frequency components having absolute values less than the predetermined value (range ai in Fig. 33) are arbitrarily changed.  In Fig. 33, conversion is made so that high-frequency components equal to or higher than the predetermined value are set to be 0, and those less than the predetermined value remain unchanged (the slope of curve is 1). Note that the threshold value may be arbitrarily input by the operator, or may be automatically determined on the basis of the original image by analyzing the original image.<br>
In general, the absolute values of high-frequency components that indicate overshoot are larger than a predetermined value, and the absolute values of high-frequency components corresponding to a fine<br><br>
structure are small, Also, the high-frequency components with the large absolute values are generated in an edge portion of an image.  Furthermore, overshoot is experienced in the QA  image when the pixel values of some pixels in the edge portion are specifically and excessively outstanding.  For this reason, when the absolute value of a given high-frequency component is larger than the predetermined value (threshold value), the value of that high-frequency component is set to be 0 {as  a  result, that high-frequency component is not added to the original image), thus suppressing overshoot and preserving the edge structure.<br>
The high-frequency component adder 4176 adds the converted high-frequency components fhl (x, y) to the original image (step 5015) by:<br>
fprc(x, y) = f(x, y) + fhl(x, y)	...(57)<br>
Note that the ratio at which high-frequency components are added may be determined depending on the pixel values of the original image or its smoothed image by:<br>
fprc(x, y) = f(x, y) + FO(f(x, y)) x fhl(x, y)<br>
...(58)<br>
Note that FO () is a function which depends on the pixel value and, for example, a function or the like which monotonously increases with increasing pixel value.  In this way, by decreasing the amount of high-frequency components to be added in the low pixel<br><br>
value region where noise is relatively conspicuous, the effect of preventing noise emphasis can be obtained.<br>
Also, by converting high-frequency components less than the predetermined threshold value by various linear or nonlinear conversion functions, frequency processes according to various purposes can be done. For example, a process that especially emphasizes high-frequency components within a predetermined absolute value range in accordance with the distribution of the absolute values of high-frequency components of a fine structure to be emphasized, a process that weakly emphasizes, does not emphasize, or suppresses high-frequency components within a predetermined absolute value range in accordance with the distribution of the absolute values of relatively unnecessary high-frequency components, an emphasis/suppression process as a combination of these processes, and the like can be executed.<br>
The image fprc(x, y) after such processes is supplied from the image processing unit 4170 to the memory 4120 and display unit 4140,  The operator (e.g., a radiologist or doctor) can confirm the sensed image and make diagnosis on the basis of the image output to the display unit 4140.<br>
As described above, with such image processing method, high-frequency components having absolute values equal to or higher than the predetermined<br><br>
threshold value are not added to the original image since they are set to be 0, thus preserving the edge shape and preventing overshoot.  Since only high-frequency components less than the predetermined threshold value are added to the original image directly or after they are converted using a predetermined function, frequency processes according to various purposes, e.g., sharpening that emphasizes high-frequency components corresponding to effective information of a fine structure or the like, sharpening that emphasizes only effective or desired high-frequency components having absolute values within the predetermined range, and the like can be done.  For example, an image, which is naturally emphasized without unnaturally influencing a metal segment implanted in a human body and the edge portion of a bone or the like, can be obtained.<br>
When the smoothed image is generated by morphology arithmetic operations, overshoot hardly occurs.  Furthermore, when the process using the aforementioned conversion curve is done, since high-frequency components corresponding to overshoot can be suppressed, overshoot can be suppressed more effectively.<br>
Likewise, when a smoothed image is generated by the median filter, overshoot hardly occurs. Furthermore, when the process using the aforementioned<br><br>
conversion curve is done, since high-frequency components corresponding to overshoot can be suppressed, overshoot can be suppressed more effectively.<br>
An image processing method as a modification of the aforementioned image processing method, i.e., a modification of the operation executed by the image processing unit 4170, will be described below with reference to Figs. 34 and 35.  Fig. 34 is a flow chart showing another image processing method of the present invention.  Fig. 35 shows a conversion curve used to convert high-frequency components in the component converter 4174.  In Fig. 35, the abscissa plots input high-frequency components, and the ordinate plots converted high-frequency components.  Fig. 35 shows the conversion curve when input components are +, and the same conversion is made even when coefficients are -. That is. Fig. 35 shows only the first quadrant of an odd function. Also, the overall operation of the image processing apparatus 4100 is as described above, and a repetitive explanation will be avoided here.<br>
As in the aforementioned method, the low-frequency component generator 4171 of the image processing unit 4170 receives the image (original image) output from the pre-processing unit 4150 via the CPU bus 4105.  The low-frequency component generator 4171 generates a smoothed image from the original image using equation (48) above (step 5100). Let f(x, y) be<br><br>
the original image, and fus (x, y) be the smoothed image Note that generation of the smoothed image fus (x, y) may use any methods such as morphological filtering, and the like as in the above method.<br>
The high-frequency component generator 4172 generates high-frequency components fh(x, y) according to equation (55).  That is, the generator 4172 calculates the difference between the smoothed image fus(x, y) obtained in step 5100 and the original image f{x,   y), and extracts a differential image consisting of high-frequency components (5105).<br>
The component converter 417 4 generates high-frequency fh2 (x, y) by converting the high-frequency components fh(x, y) using a conversion curve (function F2()) (step 5110) by:<br>
fh2(x, y) = F2(fh(x, y))	... (59)<br>
Note that the conversion curve F2() is a function which is expressed by a curve shape shown in, e.g.. Fig. 35. According to the curve shape shown in Fig. 35, high-frequency components having absolute values equal to or higher than a predetermined value (threshold value) are maintained (slope = 1), i.e., their values are not converted. On the other hand, the magnitudes of high-frequency components having absolute values less than the predetermined value (range az   in Fig. 35) are increased (or may be decreased).  Such threshold value may be arbitrarily input by the operator, or may<br><br>
be automatically determined on the basis of the original image by analyzing the original image. Note that the function form shown in Fig. 35 is an example, and it suffices to convert high-frequency components equal to or higher than the predetermined threshold value and those less than the predetermined threshold value at different magnifications in this embodiment. However, the slope of the function form with respect to an input value equal to or higher than the predetermined threshold value must depend on a predetermined magnification of the smoothed image (to be described later).  For example, if low-frequency components are added after they are doubled or tripled, the slope (differential value) must be set to be 2 or 3 in correspondence with that magnification.<br>
The converted high-frequency components fh2(x, y) are added to the smoothed image fus(x, y) (step S5115). Note that fprc (x, y) is the processed image.<br>
fprc (x, y) = fus (x, y) + f h2 (x, y)       ...(60) Note that the ratio at which only high-frequency components less than the predetermined threshold value are added to the smoothed image fus(x, y) may be determined depending on the pixel values of the original image or its smoothed image, as described by equation (58) ,  The smoothed image fus(x, y) may be converted (emphasized or suppressed) at a predetermined magnification, and the converted image may be added to<br><br>
the high-frequency components fh2(x, y),  However, when the smoothed image fus (x, y) is converted at the predetermined magnification, the edge structure of a QA image is not preserved normally.  Therefore, in order to preserve the edge structure of the QA image, low-frequency components and high-frequency components equal to or higher than the predetermined threshold value must be converted at substantially the same ratio More specifically, the slope (differential value) of the function used to convert high-frequency components equal to or higher than the predetermined threshold value must be equal to that predetermined magnification This can be easily understood since high-frequency components which form an  edge portion have large absolute values, and since the edge structure does not collapse if low- and high-frequency components which form the edge portion are uniformly converted at the same ratio, but the edge structure collapses if low- and high-frequency components which form the edge portion are converted at different ratios.<br>
Therefore, when high-frequency components which form the edge structure (i.e., have absolute values equal to or higher than the predetermined threshold value) and all low-frequency components are changed at a predetermined ratio, and other high-frequency components remain unchanged, the dynamic range can be changed while preserving the edge structure, and a<br><br>
processed image that can maintain an effective fine structure unchanged can be obtained.<br>
Also, by converting high-frequency components less than the predetermined threshold value by various linear or nonlinear conversion functions, frequency processes according to various purposes can be done. For example, a process that especially emphasizes high-frequency components within a predetermined absolute value range in accordance with the distribution of the absolute values of high-frequency components of a fine structure to be emphasized, a process that weakly emphasizes, does not emphasize, or suppresses high-frequency components within a predetermined absolute value range in accordance with the distribution of the absolute values of relatively unnecessary high-frequency components, an emphasis/suppression process as a combination of these processes, and the like can be executed.<br>
The image fprc(x, y) after such processes is supplied from the image processing unit 4170 to the memory 4120 and display unit 414 0.  The operator (e.g., a radiologist or doctor) can confirm the sensed image and make diagnosis on the basis of the image output to the display unit 4140.<br>
 In the aforementioned image processing method, high-frequency components converted using the function Fl() are added to the oriqinal imaqe, while in the<br><br>
modification, high-frequency components converted using the function F2() are added to the smoothed image. With such modification, the same effect as in the aforementioned image processing method can be obtained. As a result, the effect of sharpening that emphasizes high-frequency components corresponding to effective information of a fine structure or the like, noise reduction that suppresses high-frequency components corresponding to unnecessary information such as noise or the like, and the like can be obtained.  In addition, since the magnitudes of high-frequency components of the edge portion remain unchanged relative to those of low-frequency components, the edge shape can be preserved, and overshoot can be prevented.<br>
(Embodiment 10)<br>
An image processing method when the image processing unit 4170 of the image processing apparatus 4100 is replaced by the image processing unit 4170a, i.e., a modification of the operation done by the image processing unit 4170a, will be explained below with reference to Figs. 3 6 to 4 2C.  Fig. 39 is a flow chart showing the process of the image processing unit 4170a. Fig. 40 shows an example of the format of transform coefficient groups of two levels obtained by a two-dimensional discrete wavelet transformation process. Fig. 41 is a graph showing the shape of a conversion curve of a coefficient conversion function F3(), and a<br><br>
line on the right side of the dotted line in Fig. 41 has a slope = 1.  Fig. 42A shows the profile of an original image, Fig. 42B shows the profile of an image after a sharpening process that does not preserve the edge structure, and Fig. 42C shows the profile of an image after a sharpening process that preserves the edge structure.<br>
The frequency coefficient decomposing unit 4178 of the image processing unit 4170a executes a two-dimensional discrete wavelet transformation process (DWT process) for an original image f((x, y)) to compute and output frequency coefficients.  More specifically, the frequency coefficient decomposing unit 417 8 sequentially reads out original image data (shown in, e.g.. Fig. 42A) stored in the memory 4120 and executes a transformation process. The frequency<br>
coefficients that has undergone the DWT process are<br>
&gt;<br>
written in the memory 4120 again. More specifically, an input image signal is separated into odd and even address signals by a combination of a delay element and down samplers, and undergoes filter processes of two filters p and u. As shown in Fig. 37A, s and d represent low- and high-pass coefficients upon decomposing a linear image signal to one level, and are respectively computed by:<br>
d(n) = x(2xn+l)-floor ( (x(2xn)+x(2xn+2))/2) ... (61) s(n) = x(2xn)+floor((d(n-l)+d(n))/4)      ...(62)<br><br>
where x(n) is an image signal to be transformed.<br>
With the above process, a linear discrete wavelet transformation process is done for an image signal. Since two-dimensional discrete wavelet transformation is implemented by sequentially executing linear discrete wavelet transformation in the horizontal and vertical directions of an image and its details are known to those who are skilled in the art, a description thereof will be omitted. As shown in Fig, 40, an image signal is decomposed into frequency coefficients HHl, HLl, LHl,..., LL in different frequency bands (step 1200).  In Fig. 40, each of HHl, HLl, LHl,..., LL (to be referred to as subbands hereinafter) indicates a wavelet transform coefficient (frequency coefficient) for each frequency band.<br>
The coefficient converter 4180 then converts the frequency coefficients according to a conversion curve F3() shown in, e.g.. Fig. 41 (step 5205).  In Fig. 41, the abscissa plots input coefficients, and the ordinate plots output coefficients.  Fig. 41 shows the conversion curve when input coefficients are +, and the same conversion is made even when input coefficients are -. That is, as can be easily understood for those who are skilled in the art. Fig. 41 shows only the first quadrant of an odd function.<br>
According to this curve form (function f3()), high-frequency coefficients equal to or higher than a<br><br>
predetermined absolute value (threshold value) are not converted (e.g., slope = 1), and the magnitudes of frequency coefficients within a given threshold value range (a range indicated by as) are increased. Note that such function form suffices to convert frequency coefficients equal to or higher than the predetermined threshold value and those less than the predetermined threshold value at different magnifications, as will be described later, but the present invention is not limited to only the function form shown in Fig. 41. Using such curve, all frequency coefficients other than LL subband coefficients are converted. The converted frequency coefficients are stored in the memory 4120. Note that the predetermined threshold value is determined by experiments in advance. Alternatively, for example, this predetermined threshold value may be determined in such a manner that a cumulative histogram of the absolute values of subband coefficients may be generated, and the absolute value of a coefficient corresponding to the cumulative frequency of occurrence = 80% may be selected as the value of the predetermined threshold value. Also, the predetermined threshold value is preferably set to be larger for coefficients corresponding to larger frequency decomposition level (those corresponding to lower frequencies).  This is because frequency coefficients corresponding to edge components become larger among those corresponding to<br><br>
lower frequencies.  Note that the predetermined threshold value for higher-level (e.g., level 1) subbands corresponding to the high spatial frequency may often be set to be 0.<br>
Upon converting coefficients less than the predetermined threshold value, the ratio of changing coefficients may be changed depending on the pixel values of the original image or the values of LL components.  For example, the rate of increase in coefficients corresponding to a low pixel value region in the original image may be decreased. As a result, noise which is conspicuous in the low pixel value region can be avoided from being emphasized.<br>
Such coefficient domain is characterized in that frequency coefficients corresponding to effective information such as  a   fine structure or the like have large absolute values, and frequency coefficients corresponding to an edge portion have large absolute values.  Therefore, when coefficients are converted using the curve form (function F3()) shown in Fig. 41, frequency coefficients corresponding to an effective structure such as   a   fine structure or the like increases, and those corresponding to the edge structure remain unchanged.<br>
Figs. 43 to 50 similarly show examples in which frequency coefficients equal to or higher than the predetermined threshold value and those less than the<br><br>
predetermined threshold value are converted at different magnifications.  Note that Figs. 43 to 50 are graphs showing examples of curves (functions) used to convert frequency coefficients.  The dotted line in each figure is a line segment which passes through the predetermined threshold value and is parallel to the ordinate, and different conversion characteristics (slopes and the like) are set to have the dotted line as a boundary.  In Fig. 43, coefficients less than the predetermined absolute value (threshold value) (a3a in Fig, 43) are increased, and no zero coefficient is generated.  In this case, coefficients with smaller absolute values are emphasized more, and the dynamic range of coefficients is compressed, compared to the case shown in Fig. 41.  In Fig. 44, coefficients less than the predetermined absolute value (threshold value) (a3b) are decreased, and coefficients are monotonously increased from 0.  In such case, no sharpening effect is obtained, and a noise reduction effect or the like is obtained.<br>
In the example shown in Fig. 45, not only coefficients less than the predetermined absolute value (threshold value) (a3c) but also coefficients equal to or higher than the predetermined absolute value are increased, and the rate of increase in coefficients within the range other than a3c is set to be smaller than that in the range a3c- That is, the slope of the<br><br>
conversion curve other than the range a3c is larger than 1.  In such case, although the edge structure cannot be perfectly preserved, effective components such as a fine structure or the like can be emphasized while suppressing overshoot at the edge portion. Setting the slope other than the range a3c  to be larger or smaller than 1 so as not to collapse the edge structure is substantially equivalent to maintaining the slope other than the range a3c to be 1,<br>
In Fig. 46, the slope other than a range less than the predetermined absolute value 9threshold value (a3ci) , i.e., the slope of the range equal to or higher than the predetermined absolute value is set to be 1, but the entire curve form is set to be differential continuous (differentiable and continuous function or at least the slope is continuous). As a result, the rate of change in coefficients changes continuously, and is often preferable to prevent artifacts such as false edges or the like from being generated in a processed image.  However, since high-frequency subbands obtained by the DWT process are expressed in the coefficient domain unlike the aforementioned high-frequency image, even when the conversion function is differential discontinuous (undifferentiable or discontinuous), artifacts such as false edges or the like are not always generated in a processed image.<br><br>
In Figs, 4 7 and 48, only coefficients within predetermined ranges (a3e in Fig. 47, aaf in Fig. 48) less than the predetermined absolute value (threshold value) are increased/decreased. Note that the slope of a curve less than a second threshold value in Figs. 47 and 4 8 need not be 1. With such curve forms, different coefficients can be increased/decreased within the ranges a3e and asf and the ranges with coefficients smaller than those ranges, and the edge structure can be preserved.  In this way, only desired effective components can be emphasized while suppressing unnecessary components such as noise and the like.<br>
With curve forms shown in Figs. 4 9 and 50, coefficients (asg and asn in Figs. 49 and 50) corresponding to the edge structure are<br>
increased/decreased (the slope is not 1).  In this case, coefficients of all subbands corresponding to the edge structure (all coefficients for the LL subband as the lowest spatial frequency component) are preferably changed at the same ratio. As a result, the pixel values of an edge portion are simply increased/decreased, and the edge structure is preserved without causing any overshoot and blurred edge.  For example, a restored image obtained when coefficients of all subbands are doubled corresponds to an image obtained by simply doubling the dynamic range of the original image, and no overshoot and blurred<br><br>
edge appear.  For the same reason, if coefficients (all coefficients for LL) of all subbands which form the edge structure are changed at a predetermined ratio, and other coefficients are changed arbitrarily, a processed image, the dynamic range of which has been changed while preserving the edge structure, and the fine structure of which has been changed (emphasized or suppressed), can be obtained. On the other hand, if coefficients (all coefficients for LL) of all subbands which form the edge structure (i.e., those having absolute values equal to or higher than the predetermined threshold value) are changed at a predetermined ratio, and other coefficients remain unchanged, a processed image, the dynamic range of which has been changed while preserving the edge structure, and the fine structure of which remains unchanged, can be obtained.  The function forms shown in Figs. 43 to 50 above can also be applied to the previous embodiments (embodiments that add a high-frequency image to a smoothed image).  However, as described above, when a high-frequency image is used, if a conversion function has a discontinuous point or differential discontinuous point (undifferentiable point), artifacts such as false edges or the like readily appear. Hence, a differential continuous (differentiable and continuous) conversion function is<br><br>
preferably used.  In such case, the discontinuous point or break point can be converted into a smooth curve.<br>
The inverse converter 4182 computes the inverse discrete wavelet transforms (inverse DWTs) of the frequency coefficients converted by the coefficient converter 4180 (step 5120) . More specifically, the frequency coefficients which have been converted using the function F3() and are stored in the memory 4120 are sequentially read out by the inverse converter 4182 and undergo an inverse transformation process.  The image signal that has undergone inverse DWT in the inverse converter 4182 is written in the memory 4120 again. As shown in Fig. 38A, input image components (s' and d') undergo processes using two filters u and p.  The filtered outputs are added to each other after being up-sampled, thus outputting an image signal x'. These processes are described by:<br>
x' (2xn)=s' (n)-floor((d' (n-l)+d' (n))/4)   ... (63)<br>
x' (2xn+l)=d' (n)+floor((x' (2xn)+x' (2xn+2))12)<br>
...(64)<br>
With the above process, linear inverse discrete wavelet transformation of transform coefficients is done.  Since two-dimensional inverse discrete wavelet transformation is implemented by sequentially executing linear inverse transformation in the horizontal and vertical directions of an image and its details are<br><br>
known to those who are skilled in the art, a description thereof will be omitted.<br>
The image after such processes is supplied from the image processing unit 4170a to the memory 4120 and display unit 4140. The operator (e.g., a radiologist or doctor) can confirm the sensed image and make diagnosis on the basis of the image output to the display unit 4140.<br>
Fig. 42B shows an image obtained by doubling the entire coefficients of all subbands except for the LL subbands by the coefficient converter 4180. On the other hand, Fig. 42C shows a result image obtained when coefficients within the range as in Fig. 41 are doubled and other coefficients remain unchanged (i.e., the slope of the function F3 () is 1). When all the coefficients are converted, overshoot appears strongly, as indicated by the arrow in, e.g.. Fig. 42B.  However, in Fig. 42C in which coefficients equal to or higher than the predetermined absolute value remain unchanged, the fine structure is emphasized, but the edge structure is preserved and no overshoot appears.<br>
In Fig. 41, the conversion function F3() has an undifferentiable and discontinuous point, but no artifacts such as false edges or the like appear in the inversely converted image. This is because no structure which is visually recognized as a continuous boundary such as a line or the like appears on the<br><br>
inversely converted image since coefficients having the predetermined absolute value (those corresponding to the undifferentiable and discontinuous point of the conversion curve) are randomly distributed in the coefficient domain.  That is, the wavelet coefficients are frequency coefficients, and a predetermined image domain is restored by the inverse wavelet transformation process in correspondence with the magnitudes of frequency components. Note that frequency coefficients of the predetermined absolute value may often be arranged continuously in correspondence with the edge portion of an image in the coefficient domain.  In such case, since a continuous structure in the coefficient domain, which appears after coefficient conversion using a discontinuous function like the conversion function F3(), appears as a continuous structure along the edge portion even on the restored image, it is not recognized as a false edge.<br>
In the above description, discrete wavelet transformation is used. However, any other methods may be used as long as an image can be decomposed into multiple frequency components, and for example, a Laplacian pyramid transformation method may be used. In the frequency coefficient decomposing unit 4178 shown in Fig. 37B, g and b respectively represent a low-resolution image and high-frequency component<br><br>
coefficient of an image upon decomposing to one level. The low-resolution approximate image g is obtained by filtering image signal x using a low-pass filter, and down-sampling the filtered signal.  The high-frequency component coefficient b is obtained by calculating the difference between image signal x and an image obtained by up-sampling the low-resolution approximate image g and filtering the sampled image using a low-pass filter As the low-pass filter, a filter shown in, e.g., Fig. 51 is used.  Fig. 51 shows a filter form that can be applied to the frequency coefficient decomposing unit 417 8 shown in Fig. 37B.  In the Laplacian pyramid transformation method, this process is repeated for the low-resolution approximate image g to obtain frequency coefficients of respective frequency bands.  Since details of this method are known to those who are skilled in the art, a description thereof will be omitted.<br>
As shown in Fig. 38B, by adding the high-frequency component coefficient b and an image obtained by up-sampling low-resolution approximate image g and filtering it using a low-pass filter, image signal x' is output. As the low-pass filter, a filter shown in, e.g.. Fig. 51 is used.  The Laplacian pyramid transformation method (inverse Laplacian pyramid transformation) obtains a composite image by repeating this process for respective levels.  Since details of<br><br>
this method are known to those who are skilled in the art, a description thereof will be omitted.<br>
As described above, the image processing method of this embodiment obtains the effect of a frequency process such as  sharpening or the like while preserving the edge structure by decomposing an image into frequency coefficients of a plurality of frequency bands, and converting the frequency coefficients. This method can provide the effect of flexibly adjusting the degree of emphasis or suppression for each frequency band while maintaining the edge structure. Also, this method can provide the effect of preventing artifacts such as false edges and the like from being generated on a processed image even when the frequency process is done while maintaining the edge structure.  Furthermore, by increasing the predetermined absolute value (threshold value) as the decomposition level shifts toward lower frequencies, a frequency process that can preserve the edge structure more effectively can be done.<br>
As described above, according to Embodiment 9 and the subsequent embodiment, an image processing apparatus and method which can obtain a high-quality image, desired spatial frequency components of which have been emphasized or suppressed while suppressing or avoiding collapse of the edge structure of an edge<br><br>
portion contained in an objective image, and a computer-readable medium and program, can be provided.<br>
The image processing apparatus and method according to Embodiment 9 can convert high-frequency components having absolute values equal to or higher than the predetermined threshold value, and those having absolute values less than the predetermined threshold value at different magnifications. Hence, high-frequency components having absolute values equal to or higher than the predetermined threshold value can be prevented from being emphasized. Also, high-frequency components having absolute values equal to or higher than the predetermined threshold value can be converted at the same magnification as   the conversion magnification for a smoothed image. As a result, overshoot can be suppressed, or the edge structure can be preserved. Hence, the processed image obtained by such image processing apparatus and method is free from any unnatural edge portion.  Furthermore, since high-frequency components having absolute values less than the predetermined threshold value can be arbitrarily converted, high-frequency components can be appropriately emphasized (sharpened) or suppressed.<br>
On the other hand, the image processing apparatus and method according to Embodiment 10 can convert high-frequency coefficients (those of the high-frequency bands) having absolute values equal to<br><br>
or higher than the predetermined threshold value, and those having absolute values less than the predetermined threshold value at different magnifications. As a result, high-frequency coefficients having absolute values equal to or higher than the predetermined threshold value can, for example, remain unchanged, or can be converted at the same magnification as the conversion magnification for low-frequency components (those of the low-frequency bands).  Hence, overshoot can be suppressed, or the edge structure can be preserved.  Furthermore, such image processing apparatus and method can flexibly adjust the degree of emphasis or suppression for each frequency band.  Since the method of making conversion based on coefficient values for respective high-frequency bands is adopted, even when a frequency process for suppressing overshoot or preserving the edge structure is executed, other false edges (e.g., a blurry stripe pattern that can be visually recognized along the edge portion) are not formed on the processed image.  Since high-frequency components having absolute values less than the predetermined threshold value are increased/decreased, the fine structure can be emphasized (sharpened) or noise reduction can be attained-  Moreover, the image processing apparatus and method may execute conversion for strongly decreasing or setting, to be zero, high-frequency coefficients<br><br>
which have absolute values less than the predetermined threshold value and also less than a second threshold value smaller than the predetermined threshold value. This arrangement can appropriately convert (emphasize or suppress) effective components in an image while suppressing noise components in the image.  By setting different threshold values (e.g., a larger threshold value is set as the frequencies of high-frequency bands become lower), overshoot can be suppressed or the edge structure can be preserved more effectively. (Another Embodiment)<br>
The scope of the present invention includes a case wherein the functions of the embodiments are implemented or the processing steps are executed by supplying a program code of software that implements the functions of the embodiments or executes the processing steps to a computer (or a CPU or MPU) in a system or apparatus connected to various devices, and making the computer in the system or apparatus operate the various devices in accordance with the stored program, so as  to operate the various devices for the purpose of implementing the functions of the embodiments or executing the processing steps.<br>
In this case, the program code itself read out from the storage medium implements the functions of the embodiments or executes the processing steps, and the program code itself, and means for supplying the<br><br>
program code to the computer (i.e., a storage medium which stores the program code) constitutes the present invention.<br>
As the storage medium for storing such program code, for example, a floppy disk, hard disk, optical disk, magneto-optical disk, CD-ROM, magnetic tape, nonvolatile memory card, ROM, and the like may be used.<br>
The program code also constitutes the present invention not only when the functions of the embodiments are implemented or the processing steps are executed by executing the supplied program code by the computer but also when the functions of the embodiments are implemented or the processing steps are executed by collaboration of "the program code and an OS (operating system) or another application software running on the computer.<br>
Furthermore, the program code constitutes the present invention when the functions of the embodiments are implemented or the processing steps are executed by some or all of actual processes executed by a CPU or the like arranged in a function extension board or a function extension unit, which is inserted in or connected to the computer, after the supplied program code is written in a memory of the extension board or unit.<br>
Note that the aforementioned program can be a transaction object when it is stored in the<br><br>
aforementioned computer-readable storage medium, and can also be an independent transaction object when it is distributed on-line via a communication network such as the Internet and the like.<br>
The embodiments have been explained in detail above, and various modifications and changes of the present invention can be made within the scope of the invention.<br><br><br><br>
CLAIMS<br>
1.	An image processing apparatus characterized by<br>
comprising:<br>
tone conversion means for executing tone conversion of an image; and<br>
component conversion means for converting frequency components of a plurality of frequency bands of the image or an image after that image has undergone tone conversion by said tone conversion means, on the basis of values of the frequency components and tone conversion characteristics of said tone conversion means.<br>
2.	The apparatus according to claim 1, characterized in that said component conversion means converts the frequency components on the basis of a slope of a tone conversion curve of said tone conversion means.<br>
3.	The apparatus according to claim 1 or 2, characterized in that said component conversion means does not convert predetermined low-frequency components, or sets the predetermined low-frequency components to be zero.<br>
4 .    The apparatus according to any one of claims 1 to 3, characterized in that said component conversion means comprises frequency transformation means for decomposing an image into frequency components of a plurality of frequency bands, and inverse frequency transformation means for generating an image by<br><br>
compositing frequency components of a plurality of frequency bands of an image.<br>
5.	The apparatus according to any one of claims 1 to 4, characterized in that said component conversion means executes a discrete wavelet transformation process for an image, and converts components of predetermined subbands except for an LL subband obtained by the discrete wavelet transformation process, on the basis of a slope of a tone conversion curve of said tone conversion means.<br>
6.	The apparatus according to claim 5, characterized in that said component conversion means does not convert components of the LL subband or sets the components of the LL subband to be zero.<br>
7.	The apparatus according to any one of claims 1 to 1,   characterized in that said component conversion means converts frequency components having absolute values greater than a predetermined threshold value more suppressedly than frequency components having absolute values not greater than the threshold value.<br>
8.	The apparatus according to any one of claims 1 to 1,   characterized in that said component conversion means substantially does not convert frequency components having absolute values greater than a predetermined threshold value or sets those frequency components to be zero.<br><br>
9.	An image processing apparatus characterized by<br>
comprising:<br>
tone conversion means for executing tone .conversion of an   image;<br>
frequency transformation means for decomposing the image that has undergone tone conversion by said tone conversion means into frequency components of a plurality of frequency bands; and<br>
component conversion means for converting the frequency components of the plurality of frequency bands obtained by said frequency transformation means, on the basis of values of the frequency components and tone conversion characteristics of said tone conversion means,<br>
10.	The apparatus according to claim 9, characterized in that said component■conversion means converts the frequency components on the basis of a slope of a tone conversion curve of said tone conversion means.<br>
11.	The apparatus according to claim 9 or 10, characterized in that said component conversion means does not convert predetermined low-frequency components<br>
12.	The apparatus according to any one of claims 9 to 11, characterized by further comprising inverse frequency transformation means for generating an image by compositing frequency components of a plurality of frequency bands.<br><br>
13.	The apparatus according to claim 9, characterized in that said frequency transformation means executes a discrete wavelet transformation process, and said component, conversion means converts components of predetermined subbands except for an LL subband obtained by the discrete wavelet transformation process, on the basis of a slope of a tone conversion curve of said tone conversion means.<br>
14.	The apparatus according to claim 13, characterized in that said component conversion means does not convert components of the LL subband,<br>
15.	The apparatus according to any one of claims 9 to 14, characterized in that said component conversion means converts frequency components having absolute values greater than a predetermined threshold value more suppressedly than frequency components having absolute values not greater than the threshold value.<br>
16.	The apparatus according to any one of claims 9 to 14, characterized in that said component conversion means substantially does not convert frequency components having absolute values greater than a predetermined threshold value.<br>
17.	An image processing apparatus characterized by comprising:<br>
first frequency transformation means for decomposing an image into first frequency components of a plurality of frequency bands;<br><br>
tone conversion means for executing tone conversion of the images-second frequency transformation means for decomposing the image that has undergone tone conversion by said tone conversion means into second frequency components of a plurality of frequency bandstand<br>
component conversion means for converting the second frequency components of the plurality of frequency bands by adding frequency components, which are obtained by converting the first frequency components of the plurality of frequency bands on the basis of values of the first frequency components of the plurality of frequency bands and tone conversion characteristics of said tone conversion means, to the second frequency components of the plurality of frequency bands.<br>
18.	The apparatus according to claim 17, characterized in that said component conversion means converts the first frequency components of the plurality of frequency bands on the basis of a slope of a tone conversion curve of said tone conversion means.<br>
19.	The apparatus according to claim 17 or 18, characterized in that said component conversion means does not convert predetermined low-frequency components of the second frequency components of the plurality of frequency bands.<br><br>
20.	The apparatus according to any one of claims 17 to 19, characterized by further comprising inverse frequency transformation means for generating an image by compositing the second frequency components of the plurality of frequency bands converted by said component conversion means.<br>
21.	The apparatus according to claim 11, characterized in that said first and second frequency transformation means execute a discrete wavelet transformation process, and said component conversion means converts components of predetermined subbands except for an LL subband obtained by the discrete wavelet transformation process of said first frequency transformation means, on the basis of a slope of a tone conversion curve of said tone conversion means.<br>
22.	The apparatus according to claim 21, characterized in that said component conversion means does not convert components of the LL subband obtained by the discrete wavelet transformation process of said second frequency transformation means.<br>
23.	The apparatus according to any one of claims 17 to 22, characterized in that said component conversion means converts the first frequency components of the plurality of frequency bands, which have absolute values greater than a predetermined threshold value more supressedly than the first frequency components of<br><br>
the plurality of frequency bands, which have absolute<br>
values not greater than the threshold value.<br>
2 4.   The apparatus according to any one of claims 17<br>
to 22f   characterized in that said component conversion<br>
means substantially does not convert the second<br>
frequency components of the plurality of frequency<br>
bands, which have absolute values greater than a<br>
predetermined threshold value.<br>
25.   An image processing apparatus characterized by<br>
comprising:<br>
tone conversion means for executing tone conversion of an images-frequency transformation means for decomposing the image into frequency components of a plurality of frequency bands;<br>
component conversion means for converting frequency components of the plurality of frequency bands obtained by said frequency transformation means, on the basis of values of the frequency components and tone conversion characteristics of said tone conversion means;<br>
inverse frequency transformation means for generating an image by compositing the frequency components converted by said component conversion means; and<br>
addition means for adding the image generated by said inverse frequency transformation means and the<br><br>
image that has undergone tone conversion by said tone conversion means,<br>
26.	The apparatus according to claim 25, characterized in that said component conversion means converts the frequency components on the basis of a slope of a tone conversion curve of said tone conversion means.<br>
27.	The apparatus according to claim 25 or 26, characterized in that said component conversion means sets predetermined low-frequency components to be zero.<br>
28.	The apparatus according to claim 25, characterized in that said frequency transformation means executes a discrete wavelet transformation process, and said component conversion means converts components of predetermined subbands except for an LL subband obtained by the discrete wavelet transformation process, on the basis of a slope of a tone conversion curve of said tone conversion means.<br>
29.	The apparatus according to claim 28, characterized in that said component conversion means sets components of the LL subband to be zero.<br>
30.	The apparatus according to any one of claims 25 to 2 9, characterized in that said component conversion means converts frequency components having absolute values greater than a predetermined threshold value more suppressedly than frequency components having absolute values not greater than the threshold value.<br><br>
31.	The apparatus according to any one of claims 25 to 29, characterized in that said component conversion means converts frequency components having absolute values greater than a predetermined threshold value into zero.<br>
32.	An image processing apparatus characterized by comprising;<br>
frequency transformation means for decomposing an image into frequency components of a plurality of frequency bands;<br>
component conversion means for converting the frequency components of the plurality of frequency bands obtained by said frequency transformation means, on the basis of values of the frequency components and tone conversion characteristics;<br>
inverse frequency transformation means for generating an image by compositing the frequency components converted by said component conversion means; and<br>
tone conversion means for executing tone conversion of the image generated by said inverse frequency transformation means on the basis of the tone conversion characteristics.<br>
33.	The apparatus according to claim 32,<br>
characterized in that said component conversion means<br>
converts the frequency components on the basis of a<br><br>
slope of a tone conversion curve of said tone conversion means.<br>
34 .   The apparatus according to claim 32 or 33, characterized in that said component conversion means does not convert predetermined low-frequency components 3 5.   The apparatus according to any one of claims 32 to 34, characterized in that said frequency transformation means executes a discrete wavelet transformation process, and said component conversion means converts components of predetermined subbands except for an LL subband obtained by the discrete wavelet transformation process, on the basis of a slope of a tone conversion curve of said tone conversion means.<br>
36.	The apparatus according to claim 35, characterized in that said component conversion means does not convert components of the LL subband.<br>
37.	The apparatus according to any one of claims 32 to 36, characterized in that said component conversion means converts frequency components having absolute values greater than a predetermined threshold value more suppressedly than frequency components having absolute values not grater than the predetermined threshold value.<br>
38.	The- apparatus according to any one of claims 32 to 36, characterized in that said component conversion means substantially does not convert frequency<br><br>
components having absolute values greater than a predetermined threshold value.<br>
39.	An image processing apparatus characterized by<br>
comprising:<br>
tone conversion means for executing tone conversion of an image; and<br>
component conversion means for converting high-frequency components of the image or an image after that image has undergone tone conversion by said tone conversion means, on the basis of values of the high-frequency components and tone conversion characteristics of said tone conversion means.<br>
40.	The apparatus according to claim 39, characterized in that said component conversion means converts the high-frequency components on the basis of a slope of a tone conversion curve of said tone conversion means.<br>
41.	The apparatus according to claim 39 or 40, characterized in that said component conversion means converts high-frequency components having absolute values greater than a predetermined threshold value more suppressedly than high-frequency components having absolute values not greater than the predetermined threshold value.<br>
42.	The apparatus according to claim 39 or 40, characterized in that said component conversion means substantially does not convert high-frequency<br><br>
components having absolute values greater than a predetermined threshold value or sets those high-frequency components to be zero.<br>
43.	An image processing apparatus characterized by<br>
comprising:<br>
tone conversion means for executing tone conversion of an images-high-frequency component calculation means for calculating high-frequency components of the image; component conversion means for converting the frequency components obtained by said high-frequency component calculation means, on the basis of values of the high-frequency components and tone conversion characteristics of said tone conversion means; and addition means for adding the high-frequency components converted by said component conversion means and the image that has undergone tone conversion by said tone conversion means.<br>
44.	The apparatus according to claim 43, characterized in that said component conversion means converts the high-frequency components on the basis of a slope of a tone conversion curve of said tone conversion means.<br>
45.	The apparatus according to claim 43 or 44, characterized in that said component conversion means converts high-frequency components having absolute values greater than a predetermined threshold value<br><br>
more suppressedly than high-frequency components having absolute values not greater than the threshold value.<br>
46.	The apparatus according to claim 43 or 44, characterized in that said component conversion means converts high-frequency components having absolute values greater than a predetermined threshold value into zero.<br>
47.	An image processing apparatus characterized by comprising:<br>
tone conversion means for executing tone conversion of an image;<br>
high-frequency component calculation means for calculating high-frequency components of the image that has undergone tone conversion by said tone conversion means;<br>
component conversion means for converting the high-frequency components obtained by said high-frequency component calculation means, on the basis of values of the high-frequency components and tone conversion characteristics of said tone conversion means; and<br>
addition means for adding the high-frequency components converted by said component conversion means and the image that has undergone tone conversion by said tone conversion means.<br>
48.	The apparatus according to claim 47,<br>
characterized in that said component conversion means<br><br>
converts the high-frequency components on the basis of a slope of a tone conversion curve of said tone conversion means.<br>
49.	The apparatus according to claim 47 or 48, characterized in that said' component conversion means converts high-frequency components having absolute values greater than a predetermined threshold value more suppressedly than high-frequency components having absolute values not greater than the predetermined threshold value.<br>
50.	The apparatus according to claim 47 or 48, characterized in that said component conversion means converts high-frequency components having absolute values greater than a predetermined threshold value into zero.<br>
51.	An image processing method characterized by comprising:<br>
a tone conversion step of executing tone conversion of an image; and<br>
a component conversion step of converting frequency components of a plurality of frequency bands of the image or an image after that image has undergone tone conversion in the tone conversion step, on the basis of values of the frequency components and tone conversion characteristics of the tone conversion step.<br>
52.	An image processing method characterized by<br>
comprising:<br><br>
a tone conversion step of executing tone conversion of an image;<br>
a frequency transformation step of decomposing the image that has undergone tone conversion in the tone conversion step into frequency components of a plurality of frequency bands; and<br>
a component conversion step of converting the frequency components of the plurality of frequency bands obtained in the frequency transformation step, on the basis of values of the frequency components and tone conversion characteristics of the tone conversion means.<br>
53,   An image processing method characterized by comprising:<br>
a first frequency transformation step of decomposing an image into first frequency components of a plurality of frequency bands;<br>
a tone conversion step of executing tone conversion of the image;<br>
a second frequency transformation step of decomposing the image that has undergone tone conversion in the tone conversion step into second frequency components of a plurality of frequency bands; and<br>
a component conversion step of converting the second frequency components of the plurality of frequency bands by adding frequency components, which<br><br>
are obtained by converting the first frequency components of the plurality of frequency bands, on the basis of values of the first frequency components of the plurality of frequency bands and tone conversion characteristics of the tone conversion means, to the second frequency components of the plurality of frequency bands.<br>
54,   An image processing method characterized by comprising:<br>
a tone conversion step of executing tone conversion of an image;<br>
a frequency transformation step of decomposing the image into frequency components of a plurality of frequency bands;<br>
a component conversion step of converting frequency components of the plurality of frequency bands obtained in the frequency transformation step, on the basis of values of the frequency components and tone conversion characteristics of the tone conversion means;<br>
an inverse frequency transformation step of generating an image by compositing the frequency components converted in the component conversion step; and<br>
an addition step of adding the image generated in the inverse frequency transformation step and the image<br><br>
that has undergone tone conversion in the tone conversion step.<br>
55.	An image processing method characterized by<br>
comprising:<br>
a frequency transformation step of decomposing an image into frequency components of a plurality of frequency bands;<br>
a component conversion step of converting the frequency components of the plurality of frequency bands obtained in the frequency transformation step, on the basis of values of the frequency components and tone conversion characteristics;<br>
an inverse frequency transformation step of generating an image by compositing the frequency components converted in the component conversion step; and<br>
a tone conversion step of executing tone conversion of the image generated in the inverse frequency transformation step, on the basis of the tone conversion characteristics.<br>
56.	An image processing method characterized by<br>
comprising:<br>
a tone conversion step of executing tone conversion of an image; and<br>
a component conversion step of converting high-frequency components of the image or an image after that image has undergone tone conversion in the<br><br>
tone conversion step, on the basis of values of the high-frequency components and tone conversion characteristics of the tone conversion step.<br>
57,	An image processing method characterized by<br>
comprising:<br>
a tone conversion step of executing tone conversion of an image;<br>
a high-frequency component calculation step of calculating high-frequency components of the image;<br>
a component conversion step of converting the frequency components obtained in the high-frequency component calculation step, on the basis of values of the high-frequency components and tone conversion characteristics of the tone conversion means; and<br>
an addition step of adding the high-frequency components converted in the component conversion step and the image that has undergone tone conversion in the tone conversion step.<br>
58.	An image processing method characterized by<br>
comprising:<br>
a tone conversion step of executing tone conversion of an image;<br>
a high-frequency component calculation step of calculating high-frequency components of the image that has undergone tone conversion in the tone conversion step;<br><br>
a component conversion step of converting the frequency components obtained in the high-frequency component calculation step on the basis of values of the high-frequency components and tone conversion characteristics of the tone conversion means; and<br>
an addition step of adding the high-frequency components converted in the component conversion step and the image that has undergone tone conversion in the tone conversion step-<br>
59.	A computer-readable storage medium that stores a program for making a computer implement functions of an image processing apparatus cited in any one of claims 1 to 50.<br>
60.	A computer-readable storage medium that stores a program for making a computer execute processing steps of an image processing method cited in any one of claims 51 to 58.<br>
61.	A program for making a computer implement functions of an image processing apparatus cited in any one of claims 1 to 50.<br>
62.	A program for making a computer execute processing steps of an image processing method cited in any one of claims 51 to 58.<br>
63.	An image processing apparatus characterized by comprising:<br>
a decomposition unit for producing, from an objective image, low-frequency components of the<br><br>
objective image, and high-frequency components of at least one frequency band;<br>
a component conversion unit for converting at least the high-frequency components of the at least one frequency band of the low-frequency components and the high-frequency components of the at least one frequency band obtained by said decomposition unit; and<br>
an image generation unit for generating a processed image using the high-frequency components of the at least one frequency band converted by said component conversion unit, and the objective image or the low-frequency components, and<br>
in that said component conversion unit performs "^ first conversion for converting the high-frequency components of the at least one frequency band and the low-frequency components so that first elements having absolute values not less than a predetermined threshold value in the high-frequency components of the at least one frequency band and the low-frequency components obtained by said decomposition unit, change at substantially the same ratio upon change from the objective image to the processed image, and second conversion, different from the first conversion, for second elements having absolute values less than the predetermined threshold value in the high-frequency components of the at least one frequency band.<br><br>
64.	The apparatus according to claim 63, characterized in that when said component conversion unit performs conversion that does not change the low-frequency components upon change from the objective image to the processed image, said component conversion unit converts the high-frequency components of the at least one frequency band so that the first elements substantially remain unchanged upon change from the objective image to the processed image.<br>
65.	The apparatus according to claim 63, characterized in that the same ratio in the first conversion of said component conversion unit is 1.<br>
66.	The apparatus according to claim 63, characterized in that said decomposition unit comprises:<br>
a smoothing unit for generating the low-frequency components by smoothing the objective image; and<br>
a subtraction unit for generating the high-frequency components by subtracting the low-frequency components generated by said smoothing unit from the objective image.<br>
67.	The apparatus according to claim 66,<br>
characterized in that said image generation unit<br>
obtains the processed image by adding the<br>
high-frequency components converted by said component<br>
conversion unit to the objective image.<br><br>
68.	The apparatus according to claim 67, characterized in that said component conversion unit converts the first elements into substantially zero.<br>
69.	The apparatus according to claim 66, characterized in that said image generation unit obtains the processed image by adding the high-frequency components converted by said component conversion unit to the low-frequency components.<br>
70.	The apparatus according to claim 69, characterized in that said component conversion unit substantially does not change the first elements.<br>
71.	The apparatus according to claim 66, characterized in that said image generation unit obtains the processed image by adding the high-frequency components converted by said component conversion unit to the low-frequency components converted at a predetermined ratio by said component conversion unit.<br>
72.	The apparatus according to claim 71, characterized in that said component conversion unit converts the first elements at the predetermined ratio.<br>
73.	The apparatus according to claim 63, characterized in that said decomposition unit decomposes the objective image into low-frequency components and high-frequency components of a plurality of frequency bands.<br><br>
74.	The apparatus according to claim 73, characterized in that said decomposition unit decomposes the objective image into low-frequency components and high-frequency components of a plurality of frequency bands by discrete wavelet transformation.<br>
75.	The apparatus according to claim 73, characterized in that said decomposition unit decomposes the objective image into low-frequency components and high-frequency components of a plurality of frequency bands by Laplacian pyramid transformation. 7 6.   The apparatus according to claim 73, characterized in that said image generation unit obtains the processed image by compositing the low-frequency components and the high-frequency components of the plurality of frequency bands converted by said component conversion unit.<br>
77 .   The apparatus according to claim 76, characterized in that said component conversion unit substantially does not change the first elements. 78.   The apparatus according to claim 73, characterized in that said image generation unit obtains the processed image by compositing the low-frequency components converted at a predetermined ratio by said component conversion unit, and the high-frequency components of the plurality of frequency bands converted by said component conversion unit.<br><br>
79.   The apparatus according to claim 78, characterized in that said component conversion unit converts the first elements at the predetermined ratio. 8 0.   The apparatus according to claim 74, characterized in that said image generation unit composites the low-frequency components and the high-frequency components of the plurality of frequency bands, which are converted by said component conversion unit, by inverse discrete wavelet transformation.<br>
81.	The apparatus according to claim 75, characterized in that said image generation unit composites the low-frequency components and the high-frequency components of the plurality of frequency bands, which are converted by said component conversion unit, by inverse Laplacian pyramid transformation.<br>
82.	The apparatus according to any one of claims 63 to 81, characterized in that the predetermined threshold value in said component conversion unit can be changed.<br>
83.	The apparatus according to any one of claims 73 to 81, characterized in that the predetermined threshold value in said component conversion unit is determined on the basis of a cumulative histogram of absolute values of elements of predetermined high-frequency components in the high-frequency components of the plurality of frequency bands.<br><br>
84.	The apparatus according to any one of claims 73 to 81, characterized in that the predetermined threshold value in said component conversion unit can be set for each predetermined frequency band in the plurality of frequency bands.<br>
85.	The apparatus according to any one of claims 73 to 81, characterized in that the predetermined threshold value in said component conversion unit is set to be larger as a spatial frequency of a predetermined frequency band in the plurality of frequency bands becomes lower.<br>
86.	An image processing method characterized by comprising:<br>
a step of producing, from an objective image, low-frequency components of the objective image, and high-frequency components of at least one frequency band;<br>
a step of converting at least the high-frequency components of the at least one frequency band of the low-frequency components and the high-frequency components of the at least one frequency band obtained in the production step; and<br>
a step of generating a processed image using the high-frequency components of the at least one frequency band converted in the conversion step, and the objective image or the low-frequency components, and<br><br>
in that the conversion step includes the performing first conversion for converting the high-frequency components of the at least one frequency band and the low-frequency components so that first elements having absolute values not less than a predetermined threshold value in the high-frequency components of the at least one frequency band and the low-frequency components obtained in the production step, change at substantially the same ratio upon change from the objective image to the processed image, and performing second conversion, different from the first conversion, for second elements having absolute values less than the predetermined threshold value in the high-frequency components of the at least one frequency band.<br>
87.	A computer-readable storage medium that stores a program for making a computer implement functions of an image processing apparatus cited in any one of claims 63 to 85.<br>
88.	A computer-readable storage medium that stores a program for making a computer execute processing steps of an image processing method cited in claim 86.<br>
89.	A program for making a computer implement functions of an image processing apparatus cited in any one of claims 63 to 85.<br><br>
90.	A program for making a computer execute processing steps of an image processing method cited in claim 86.<br>
91.	An image processing apparatus characterized by comprising:<br>
a decomposition unit for producing, from an objective image, low-frequency components of the objective image, and high-frequency components of at least one frequency band;<br>
a component conversion unit for converting the low-frequency components and the high-frequency components of the at least one frequency band obtained by said decomposition unit; and<br>
an image generation unit for generating a processed image using the low-frequency components and the high-frequency components of the at least one frequency band converted by said component conversion unit, and<br>
in that said component conversion unit converts the high-frequency components of the at least one frequency band and the low-frequency components so that first elements having absolute values not less than a predetermined threshold value in the high-frequency components of the at least one frequency band and the low-frequency components obtained by said decomposition unit, change at substantially the same ratio upon change from the objective image to the processed image.<br><br>
92.	The apparatus according to claim 91, characterised in that said component conversion unit maintains second elements having absolute values less than the predetermined threshold value in the high-frequency components of the at least one frequency band substantially unchanged.<br>
93.	An image processing method characterized by comprising:<br>
a step of producing, from an objective image, low-frequency components of the objective image, and high-frequency components of at least one frequency band;<br>
a step of converting the low-frequency components and the high-frequency components of the at least one frequency band obtained in the production step; and<br>
a step of generating a processed image using the low-frequency components and the high-frequency components of the at least one frequency band converted in the conversion step, and<br>
in that the conversion step includes converting the high-frequency components of the at least one frequency band and the low-frequency components so that first elements having absolute values not less than a predetermined threshold value in the high-frequency components of the at least one frequency band and the low-frequency components obtained in the production<br><br>
step; change at substantially the same ratio upon change from the objective image to the processed image. 94 .   A computer-readable storage medium that stores a program for making a computer implement functions of an image processing apparatus cited in claim 91 or 92.<br>
95.	A computer-readable storage medium that stores a program for making a computer execute processing steps of an image processing method cited in claim 93.<br>
96.	A program for making a computer implement functions of an image processing apparatus cited in claim 91 or 92.<br>
97.	A program for making a computer execute processing steps of an image processing method cited in claim 93.<br><br>
98.	An image processing apparatus substantially as herein described with reference to the<br>
accompanying drawings.<br>
99.	A computer-readable storage substantially as herein described with reference to the<br>
accompanying drawings.<br><br></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODE3LWNoZW5wLTIwMDMtYWJzdHJhY3QucGRm" target="_blank" style="word-wrap:break-word;">817-chenp-2003-abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODE3LWNoZW5wLTIwMDMtY2xhaW1zIGR1cGxpY2F0ZS5wZGY=" target="_blank" style="word-wrap:break-word;">817-chenp-2003-claims duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODE3LWNoZW5wLTIwMDMtY2xhaW1zIG9yaWdpbmFsLnBkZg==" target="_blank" style="word-wrap:break-word;">817-chenp-2003-claims original.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODE3LWNoZW5wLTIwMDMtY29ycmVzcG9uZG5lY2Utb3RoZXJzLnBkZg==" target="_blank" style="word-wrap:break-word;">817-chenp-2003-correspondnece-others.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODE3LWNoZW5wLTIwMDMtY29ycmVzcG9uZG5lY2UtcG8ucGRm" target="_blank" style="word-wrap:break-word;">817-chenp-2003-correspondnece-po.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODE3LWNoZW5wLTIwMDMtZGVzY3JpcHRpb24oY29tcGxldGUpIGR1cGxpY2F0ZS5wZGY=" target="_blank" style="word-wrap:break-word;">817-chenp-2003-description(complete) duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODE3LWNoZW5wLTIwMDMtZGVzY3JpcHRpb24oY29tcGxldGUpIG9yaWdpbmFsLnBkZg==" target="_blank" style="word-wrap:break-word;">817-chenp-2003-description(complete) original.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODE3LWNoZW5wLTIwMDMtZHJhd2luZ3MucGRm" target="_blank" style="word-wrap:break-word;">817-chenp-2003-drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODE3LWNoZW5wLTIwMDMtZm9ybSAxLnBkZg==" target="_blank" style="word-wrap:break-word;">817-chenp-2003-form 1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODE3LWNoZW5wLTIwMDMtZm9ybSAxOS5wZGY=" target="_blank" style="word-wrap:break-word;">817-chenp-2003-form 19.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODE3LWNoZW5wLTIwMDMtZm9ybSAyNi5wZGY=" target="_blank" style="word-wrap:break-word;">817-chenp-2003-form 26.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODE3LWNoZW5wLTIwMDMtZm9ybSAzLnBkZg==" target="_blank" style="word-wrap:break-word;">817-chenp-2003-form 3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODE3LWNoZW5wLTIwMDMtZm9ybSA1LnBkZg==" target="_blank" style="word-wrap:break-word;">817-chenp-2003-form 5.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODE3LWNoZW5wLTIwMDMtcGN0LnBkZg==" target="_blank" style="word-wrap:break-word;">817-chenp-2003-pct.pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="200789-a-method-of-controlling-the-temperature-of-a-silicon-melt-in-a-furnace.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="200791-method-for-preparation-of-a-detergent-composition.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>200790</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>817/CHENP/2003</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>30/2009</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>24-Jul-2009</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>09-Jun-2006</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>26-May-2003</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>M/S. CANON KABUSHIKI KAISHA</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>3-30-2 SHIMOMARUKO OHTA-KU TOKYO 146-8501</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>HIROYUKI SHINBATA</td>
											<td>C/O CANON KABUSHIKI KAISHA 3-30-2 SHIMOMARUKO OHTA-KU TOKYO 146-8501</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>G06T 5/10</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/JP01/10388</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2001-11-28</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>2001-104754</td>
									<td>2001-04-03</td>
								    <td>Japan</td>
								</tr>
								<tr>
									<td>2</td>
									<td>2001-108984</td>
									<td>2001-04-06</td>
								    <td>Japan</td>
								</tr>
								<tr>
									<td>3</td>
									<td>2000-365328</td>
									<td>2000-11-30</td>
								    <td>Japan</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/200790-an-image-processing-apparatus-and-an-image-processing-method by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 03:10:07 GMT -->
</html>
