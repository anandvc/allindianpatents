<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/253780-method-for-dynamic-bandwidth-allocation-in-passive-optical-network by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 12:24:21 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 253780:METHOD FOR DYNAMIC BANDWIDTH ALLOCATION IN PASSIVE OPTICAL NETWORK</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">METHOD FOR DYNAMIC BANDWIDTH ALLOCATION IN PASSIVE OPTICAL NETWORK</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>A method for dynamic bandwidth allocation in Passive Optical Network (PON), said PON includes a OLT and a plurality of ONUs accessing to the OLT, comprising: classifying traffic which is to be communicated between the OLT and the ONUs into a plurality of service types, and granting a different priority to each type of the services; authorizing service ports of every type of services to transmit service data in descending sequence of said priorities of the services, and recording granting information of the service ports obtained from the authorization; reading out said granting information of every to-be-granted service port of a same ONU; and scheduling granted start time of data transmission of every to-be-granted port of current ONU, generating downlink granting messages including both said granting information and said granted start time of data transmission of every granted port of said current ONU, transmitting said downlink granting messages to said current ONU. This method for bandwidth allocation in the present invention can satisfy requirements of different types of services, increase bandwidth utilization ratio and realize equal bandwidth allocation.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td> <br><br>
METHOD FOR DYNAMIC BANDWIDTH ALLOCATION IN<br>
PASSIVE OPTICAL NETWORK<br>
Field of the Technology<br>
The present invention relates to optical communication field, especially to a method for dynamic bandwidth allocation in Passive Optical Network (PON).<br>
Background of the Invention<br>
As a new broadband access optical fiber technology covering the “last mile”, PON needs no active node and only a simple optical splitter needs to be installed. Thus PON has the advantage of saving optical cable resource, sharing bandwidth resource, saving equipment room investment, high security device, rapidity of setting up network, low cost of network building, and so on. As a primary type of present optical access network, PON has been widely applied.<br>
PON takes the point-to-multipoint master-slave control structure. With reference to Figure 1, an Optical Line Terminal (OLT) is a master node device, which is connected with a plurality of Optical Network Units (ONUs) through optical splitter, and the processes of the ONU registration, authorization of the data waiting to be transmitted, message interaction of Media Access Control (MAC) sub-layer and so on are performed at the OLT. The ONU is a slave node device, responding to the OLT finding message, reporting the sizes of data waiting to be transmitted, transmitting data of every port according to granting information, and a plurality of client terminals are accessed to the ONU to support multi-service access. With such frame structure as in optical access network, the problem of how to reasonably allocating bandwidth and effectively using network resource to meet service requirement is of great importance to PON MAC scheme.<br>
In optical access network, there are two ways of allocating bandwidth: Static Bandwidth Allocation (SBA) and Dynamic Bandwidth Allocation (DBA). As to SBA, ONUs or its port is allocated with fixed bandwidth and unused time slot cannot be arbitrarily occupied. The disadvantage of SBA is low bandwidth utilization ratio and poor adaptive faculty to self-likelihooH service with high burst ratio. DBA algorithm is a mechanism or algorithm for rapidly re-allocating bandwidth based on<br><br>
requirements of the current client service. As to DBA, the PON bandwidth utilization ratio can be increased by dynamically adjusting bandwidth, with reference to requirements of ONUs burst service.<br>
At present, there are a lot of dynamic bandwidth allocation methods, For example, an Interleaved Polling with Adaptive Cycle Time (IPACT) dynamic bandwidth allocation method for PON; a DBA protocol special for APON which is put forward in G.983.4 standard by ITU-T (International Telecommunication Union-Telecommunication) Standardization Sector.<br>
The main idea of IP ACT is that polls the next ONU before the data sent by the former ONU arrive at OLT, thereby, to determine whether to authorize and how much to authorize, etc. and determine the start time of the data transmission of the next ONU according to the calculated arrival time of the last bit of the data of the current ONU.<br>
As to the second scheme, a DBA protocol is put forward in ITU-T G.983.4 standard, service from ONU is divided into several types of T-CONT (Transmission Container). According to service priority, there are four types of T-CONT, in descending priority they are T-CONT1, T-CONT2, T-CONT3 and T-CONT4, while T-CONT5 is adaptive to all services in order to reduce number of transmission containers. Every type of T-CONT corresponds to a specific requirement of bandwidth allocation. There are four types of bandwidth allocation requirements: constant bandwidth, assured bandwidth, non-assured bandwidth and best-effort transmission bandwidth. And there are three strategies in the present DBA protocol: NSR (Non-Status-Reporting), SR (Status-Reporting) and mixing type.<br>
In the first technology scheme mentioned above, the polling period adaptively varies with amount of data, resulting in data transmission jitter in the same service, so the requirement of low delay and delay jitter for real-time service is not be satisfied. In the second technology scheme, Round-Robin constant sequence polling is adopted, which is special for connection-oriented APON application with fixed length of PDU (Protocol Data Unit). Additionally, the bandwidth updating mechanism is special for T-CONT and bandwidth is allocated neither according to different ports nor different services.<br><br>
In the above two schemes, since different allocating strategies for different services are not taken into account, they are applied in single service system in practical application, such as in system only providing browsing service or voice service. This kind of system cannot meet Quality of Service (QoS) requirement of more than one service type, neither allocate bandwidth according to client service ports. Moreover, when allocating bandwidth, granting messages of window allocation are basically generated in sequence of port reporting, without considering delay requirement of different ONU ports, and bandwidth utilization ratio is also low; in addition, there is no dynamic process if ONUs are offline.<br>
Summary of the Invention<br>
An object of the present invention is to provide a method for dynamic bandwidth allocation in PON. Service transparency is achieved in this dynamic bandwidth allocation method, which is applicable for different types of service requirements. Through allocating bandwidth for different service ports, bandwidth utilization ratio is increased and bandwidth allocation is realized fairly. In order to accomplish the above object, a dynamic bandwidth allocation method for PON is provided in the present invention, PON includes an OLT and a plurality of ONUs accessing to the OLT, the method comprises:<br>
a)	classifying services which are to be communicated between the OLT and the ONUs into a plurality of service types according to different transmitting requirements, and granting a different priority to each type of the services;<br>
b)	authorizing service ports of every type of services to transmit service data in descending sequence of said priorities of the services, and recording the granting information of the service ports obtained from the authorization;<br>
c)	reading out said granting information of every to-be-granted service port of a same ONU; and<br>
d)	scheduling granted start time of data transmission of every to-be-granted service port of current ONU, generating downlink granting messages including both said granting information and said granted start time of data transmission of every granted port of said current ONU, transmitting said downlink granting messages to said current ONU.<br><br>
The method further comprises a flow of aging ONU information.<br>
A.	inquiring status of the ONUs one by one, determining whether the status of current ONU is invalid, if yes, returning to step A, continuing with the inquiry; otherwise, proceeding to step B;<br>
B.	determining whether MPCP messages have been reported by said current ONU in present bandwidth allocation polling period, if yes, resetting corresponding Active Timeout Count of said current ONU, and proceeding to step C; otherwise, proceeding to step C directly;<br>
C.	determining whether the value of said Active Timeout Count of said current ONU exceeds the settled off-line threshold, if yes, setting the status of the current ONU as invalid, releasing corresponding resources of this ONU, and proceeding to step D; otherwise, proceeding to step D directly; and<br>
D.	determining whether all the ONUs are inquired, if yes, ending the ONU information aging flow of the present bandwidth allocation polling period; otherwise, returning to step A.<br>
The method further comprises:<br>
generating an ONU Status Information table indexed by ONUID, which is to store every ONU’s status information that is generated according to MPCP messages communication between the ONUs and the OLT;<br>
generating an ONU Active Timeout Count table indexed by ONUID, which includes said Active Timeout Counter and reported flags to indicate whether MPCP messages have been reported by corresponding ONUs;<br>
said step of determining in step A comprises: according to ONUID index, reading out ONU status information from the ONU Status Information table one by one, determining whether current ONU is invalid according to said ONU status information;<br>
said step of determining in step B comprises: reading out table item of said current ONU from Active Timeout Count table, determining whether there exists a reported flag in corresponding table item of said current ONU, if yes, it can be concluded that MPCP messages have been reported in the present bandwidth<br><br>
allocation polling period; otherwise, it can be concluded that MPCP message* have not been reported;<br>
between step C and step D, further comprises: clearing the reported flag of said current ONU in the ONU Active Timeout Count table;<br>
said step of determining in step D comprises: determining whether all table items of the ONU Status Information table are read out, if yes, it can be concluded that all the ONUs have been inquired; otherwise, it can be concluded that some of the ONUs have not been inquired.<br>
The method further comprises: generating a vMAC Granting information table indexed by ONUID, which includes granting information of each of the service ports of the ONUs and granted flags to indicate whether corresponding service ports are authorized;<br>
the step of recording granting information in step b) comprises: recording said granting information in the vMAC Granting information table, setting granted flag of said granted service ports as authorized;<br>
the step of reading out granting information in step c) comprises: searching for table items corresponding to the service ports of the same ONU in the vMAC Granting information table according to ONUID index, searching for granted service ports according to granted flag, reading out granting information of the granted service ports; and<br>
after step d) further comprises: setting the granted flag as negative of the service ports which have read out granting information.<br>
The method further comprises: generating the ONU Status Information table indexed by ONUID, which is to store status information of every ONU that is generated according to MPCP messages communication between the ONUs and the OLT;<br>
before step c) further comprising: reading out status information of the ONUs one by one from the ONU Status Information table according to ONUID index, determining whether current ONU status is invalid according to the status information of said current ONU, if yes, returning to read a next ONU status information in the ONU Status Information table, otherwise, proceeding to step c).<br><br>
‘Preferably, said traffic being classified by priority in descending sequence in step a) as fast forwarding service, automatic detecting MPCP message service, non-automatic detecting MPCP message service, MF service, Assured Forwarding service and Best-Effort Forwarding service.<br>
As to services except automatic detecting MPCP message service, said step of authorization in step b) comprises:<br>
bll) confirming current to-be-granted service port according to uplink service activating status;<br>
bl2) according to the residual bandwidth resource in the current bandwidth allocation polling period, determining whether current bandwidth resource is available to the constant amount of data of said current to-be granted service port for non-automatic detecting MPCP message service, or to the report information from said current to-be-granted service port for the other types of the services, if yes, entering step bl3); otherwise, entering step bl5);<br>
bl3) authorizing said current to-be-granted service port to transmit service data, and recording the current granting information;<br>
bl4) updating residual bandwidth in the current bandwidth allocation polling period and relevant information of said current to-be-granted service port; and<br>
bl5) determining whether there are un-granted service ports of current priority service, if yes, returning to step bll); otherwise, authorizing the ports of the next priority service.<br>
This method further comprises:<br>
generating a Service Active ONU Bitmap register for every type of service to store active information indicating whether the type of service is activated in the ONUs;<br>
generating a Service Active Port Bitmap table for services with port as unit, which is indexed by ONUID, to store active information indicating whether this type of service is activated in the accessed service ports of the ONUs;<br>
generating a vMAC Report Information table indexed by ONUID, to store report information from the accessed ports of the ONUs;<br><br>
said step Ml) comprises: polling the Service Active ONU Bitmap register and the Service Active Port Bitmap table of every service type in descending sequence of priorities, finding out a service port with positive active information and confirming the service port as said current to-be-granted service port;<br>
before step bl2) further comprising: finding out report information of current to-be-granted service port from the vMAC Report Information table; and<br>
in step bl5), determining whether there are unread table items in current Service Active ONU Bitmap register and current Service Active Port Bitmap table, if yes, returning to step Ml); otherwise, inquiring the corresponding Service Active ONU Bitmap register and Service Active Port Bitmap table for the service with the next priority.<br>
Preferably, for the fast forwarding service, said granting information comprises start time of data transmission and sizes of data transmission; said report information comprises reported sizes of data waiting to be transmitted;<br>
for the fast forwarding service, said step of scheduling granted start time in step d) comprises: taking said start time of data transmission of said granting information as the granted start time of data transmission;<br>
for the non-automatic detecting MPCP message service, said granting information comprises downlink MPCP message type and reserved field, wherein said MPCP message type comprises Discovery GATE, Normal GATE and REGISTER&amp;GATE; said report information comprises MPCP message type field and reserved field;<br>
for the MF service, said granting information comprises reserved field and sizes of data transmission; said report information comprises reported sizes of data waiting to be transmitted;<br>
for the Assured Forwarding service, said granting information comprises grant deficit quantity and sizes of data transmission of corresponding service ports; said report information comprises reported sizes of data waiting to be transmitted;<br>
for the Best-Effort Forwarding service, said granting information comprises sizes of data transmission; said report information comprises reported sizes of data waiting to be transmitted.<br><br>
The method further comprising: generating a Bandwidth Information table for those service ports requesting bandwidth control, to store transmit quantum in every bandwidth allocation polling period;<br>
the step of determining for those service ports requesting bandwidth control in step bl2) comprises: finding out transmit quantum of current service port from the Bandwidth Information table, determining whether current bandwidth resource is available according to report information from said current to-be-granted service port, transmit quantum of said current to-be-granted service port and said residual bandwidth resource in the current bandwidth allocation polling period.<br>
Preferably, generating a start-up counter for the automatic detecting MPCP message service;<br>
the step of authorizing service ports in step b) including:<br>
b21) touching off said start-up counter, when said counter achieves configured threshold, launching the process of detecting for the automatic detecting MPCP messages, if an automatic detecting MPCP message is detected, proceeding to step b22); otherwise, resetting the start-up counter and returning to step b21);<br>
b22) determining whether current bandwidth resource is available to the constant amount of data of said current to-be-granted service port, according to the residual bandwidth resource in current bandwidth allocation polling period of the automatic detecting MPCP message service, if yes, proceeding to step b23), otherwise, authorizing the ports of the next priority service;<br>
b23) resetting the start-up counter and returning to step b21).<br>
Preferably, for the automatic detecting MPCP message service, said granting information comprises downlink MPCP message type and reserved field, wherein said MPCP message type comprises Discovery GATE, Normal GATE, REGISTER&amp;GATE.<br>
Preferably, after step d) the method further comprising: determining whether there is still any ONU with un-granted port, if yes, returning to step c); otherwise, ending the current procedure.<br>
Preferably, the type of said downlink granting messages of the method is GATE downlink MPCP message.<br><br>
Preferably, said uplink granting information of the present method being carried by REPORT messages.<br>
Preferably, said bandwidth allocation polling period of the present method is virtual frame period.<br>
It is obvious from the above-mentioned technical scheme that this method bears the following advantages: dynamically performing bandwidth allocation aiming at different services with different priority levels, in order to satisfy requirements of different service types and implement service transparency; when generating granting message, authorizing start time of data transmission to a group of ports accessed to the same ONU, in this way all the granted windows of different service ports accessed to the same ONU are consecutive with no protective band inserted, the protective bandwidth for data transmission is reduced and bandwidth utilization ratio is increased.<br>
In addition, ONU information aging mechanism is adopted in the present invention. By supervising ONU status real-timely, off-line ONU can be dynamically processed thus occupied resource is released.<br>
Compared with the existing technologies, technology scheme of the present invention is of visible and beneficial effects. In this scheme, dynamic bandwidth allocation is transparent to services, to satisfy requirements of more than one service, such as transmission of TDM/EF, AF, DF and MPCP message as well as ensured transmission of CPU/OAM. Beneficial effects of this scheme further comprises: increased bandwidth utilization ratio, fair bandwidth allocation, better robustness, better real-time performance, using bandwidth resource more effectively and avoiding resource waste.<br>
Brief Description of the Drawings<br>
Figure 1 is a sketch map of a Passive Optical Network;<br>
Figure 2 illustrates the structure of Service Active ONU Bitmap register and corresponding Service Active Port Bitmap table, according to a preferred embodiment case of the present invention;<br>
Figure 3 is a structure of vMAC Report Information table according to a preferred embodiment of the present invention;<br><br>
Figure 4 illustrates the authorization flow of different services according to a preferred embodiment of the present invention;<br>
Figure 5 is Granting information table structure of vMAC according to a preferred embodiment of the present invention;<br>
Figure 6 is ONU Status Information table structure of ONU according to a preferred embodiment of the present invention;<br>
Figure 7 is a flow diagram of method for generating granting information according to a preferred embodiment of the present invention;<br>
Figure 8 is a structure of ONU Active Timeout Count table according to a preferred embodiment of the present invention;<br>
Figure 9 is a flow diagram of ONU information aging method according to a preferred embodiment of the present invention.<br>
Detailed Description of the Invention<br>
To clarify the object, technology scheme and advantages of the present invention, the present invention will be described in detail with reference to the attached<br>
drawings.<br>
In the present invention, a method of dynamic bandwidth allocation in Passive Optical Network is put forward. This method comprises service registration, bandwidth allocation, granting message generation and ONU information aging, etc.. Firstly, different services are classified in sequence of priority and given different data structure so as to perform different allocation strategies. When allocating bandwidth, different service ports accessed to the same ONU are distinguished in terms of different service types and processed separately by allocating corresponding window size; when generating granting messages, different service ports accessed to the same ONU are processed collectively, start time of data transmission is assigned, in this way granted windows of different service ports accessed to the same ONU are consecutive with no protective band inserted, thus bandwidth utilization ratio is increased. In addition, the ONUs status is real-timely supervised in the present method and the off-line ONU is dynamically released. Wherein, the mentioned service port is a port carrying a certain service. The service port is a logical conception, not really corresponding to an ONU physical port. For instance, if a<br><br>
physical port carries multi services at the same time, this port can be divided into more than one logical service port.<br>
A preferred embodiment of the present invention is introduced in detail as follow.<br>
To separately process different service ports, different services in a PON need to be classified into a plurality of service types. Also, data structures of different services as well as different ports need to be set up for the system to separately process. In a preferred embodiment of the present invention, in descending sequence of priority, traffic is classified into following services:<br>
Fast Forwarding service: such as TDM (Time Division Multiplex), EF (Expedited Forwarding), etc.. These services can be named by a joint name EF service. This kind of service needs to be real-timely forwarded with low delay and delay-jitter without bandwidth limit, thus has the highest priority.<br>
MPCP (Multi-Point Control Protocol) message service: MPCP message is used for normal MPCP communication, comprised of automatic detecting MPCP message service and non-automatic detecting MPCP message service. Relevant parameters of MPCP message are all constant. In the present invention, MPCP message of an ONU is used to judge whether this ONU is online.<br>
MF (Must Forwarding) service: such as CPU (Central Process Unit) message and OAM message, and messages must be correctly transmitted in this kind of service which is used for OAM&amp;P (Operation Administration, Maintenance and Provision) and communication between OLT and ONUs, thus has pretty high priority too.<br>
Assured Forwarding service: such as AF (Assured Forwarding), specified minimum bandwidth must be assured in this service but with low real-time requirement.<br>
Best-Effort Forwarding service: such as DF (Default Forwarding), there is no requirement for minimum bandwidth thus with the lowest priority.<br>
In the present invention, collective control way of report information is adopted with OLT managing status of every ONU. In a preferred embodiment of the present invention, IEEE 802.3ah standard is adopted in automatic detection of ONU and info interaction of registration course.<br><br>
When data transmit authorization is being performed, in order to polling according to different services and in sequence of priority, in a preferred embodiment of the present invention, Service Active ONU Bitmap register is set up to store ONU activation info of different services, such as IMAB (Ingress MPCP Active Bitmap) of the MPCP message service, IMFAB (Ingress Must Forwarding Active Bitmap) of the MF service, IEFAB (Ingress Expedited Forwarding Active Bitmap) of the EF service, IAFAB (Ingress Assured Forwarding Active Bitmap) of the AF service and IDFAB (Ingress Default Forwarding Active Bitmap) of the DF service. Among others, some services take port as unit, such as the services of EF, AF and DF, then Service Active Port Bitmap table must be set in these services to store active information of ports, such as IEFABT (Ingress Expedited Forwarding Active Bitmap Table) of the EF service, IAFABT (Ingress Assured Forwarding Active Bitmap Table) of the AF service and IDFABT (Ingress Default Forwarding Active Bitmap Table) of the DF service.<br>
With reference to Figure 2, the left box is the Service Active ONU Bitmap register, which is comprised of N bits respectively corresponding to N ONUs and is used to indicate whether this service is active, for example, with 1 as active and 0 as inactive. The right box is the Service Active Port Bitmap table, that is comprised of N table items corresponding to the ONUs, with content of every table item storing information concerning every port accessed to a corresponding ONU, and this information indicates whether the port is active or not, for example, with 1 as active and 0 as inactive. In the system, these tables are put into a register and can be indexed for relevant ONU table items according to corresponding ONUID (Optical Network Unit Identifier), convenient for reading active information of service port.<br>
It is necessary to specify that in service registration course, the LLID (Logical Link Identifier) allocated to ONU is of the format as {ONUID, active Bitmap},<br>
which is convenient for indexing of various service active info and bandwidth allocation info by using ONUID and offset of every port, also convenient for developing multicast service.<br>
MPCP port of ONU is activated during registering, and registration info is stored in IMAB; MF port is activated after the ONU is registered and registration info is stored in IMFAB. Hereby each ONU is defaulted to provide with CPU and OAM<br>
service.<br><br>
After being successfully registered, for those services with port as unit, ONUs request bandwidth from the OLT, and bandwidth info is delivered by network manager through interacting with the CPU. Bandwidth information comprises active information of EF service port, active information and bandwidth of AF and DF service port. Thereby, since the bandwidth in every virtual frame period of the EF service is constant, thus port bandwidth is not necessary to be included in the bandwidth information. Active information of the EF, the AF and the DF services ports are respectively stored in IEFAB, IAFAB, IDFAB and corresponding table item of IEFABT, IAFABT, IDFABT. Corresponding bits of IEFAB, IAFAB and IDFAB respectively indicate whether there is active information in EF, DF or AF services of the ONU. Corresponding table items of IEFABT, IAFABT and IDFABT respectively indicate which ports of the ONU are of active EF, DF and AF services.<br>
As to those ports requesting constant bandwidth, such as the EF, since bandwidth in every virtual frame period is constant, a register with constant bandwidth info can be set to store the constant bandwidth; or a default bandwidth can be predefined, after acquiring port type through information interaction, then data can be transmitted by this default bandwidth.<br>
As to those ports requesting dynamic bandwidth control, such as the DF and the AF services, BIT (Bandwidth Information Table) is set to store bandwidth information of provision. For convenience, provision bandwidth is converted to and stored in transmit quantum format. Hereby the transmit quantum means the amount of data allowed to transmit in every constant polling period. This transmit quantum is calculated by multiplying provision bandwidth by polling period, with Byte or Word as unit. In the present invention virtual frame period of EF service is adopted as the polling period of bandwidth allocation operation. Similarly, by indexing ONUID and Offset of every port, corresponding table item content is read and provision bandwidth information is acquired from BIT table by the system.<br>
By interacting with network manager, OLT of the system can dynamically operate and modify relevant bits of Service Active ONU Bitmap register, activate relevant table items content in the Service Active Port Bitmap table and the BIT. In this way, dynamic inserting/deleting and re-configuration of bandwidth information of ONU service port are realized.<br><br>
In every polling period, ONU reports sizes of data waiting to be transmitted to OLT through REPORT message of IEEE 802.3ah standard. According to IEEE 802.3ah standard, every REPORT message comprises 8 arrays of data sizes reported item. And the corresponding relationship between every array and ONU port is pre-defined so that OLT can specify which port the reported sizes are from. Meanwhile valid indicator of every array is set, for example, every bit of 8 bits respectively indicates whether every array is valid or active, with bit 0 indicating array 0, bit 1 indicating array 1,..., and so on. For example, bit 0 indicates that corresponding array is inactive and 1 indicates active or valid. When more than 8 ports are accessed to ONU, multi REPORT messages attributes are adopted and flags are carried in the messages to indicate the continuity of multi REPORT messages in one period, thus OLT can determine from the multi REPORT messages which port the reported item is from.<br>
In order to separately process the report information from each port, OLT stores the reported sizes of data waiting to be transmitted in RIT (vMAC Report Information Table) assorted by vMAC (Virtual MAC). With reference to Figure 3, structure of the RIT is shown on the left: each table item is corresponding to each piece of report information of each ONU port, and the items are indexed by ONUID. As to data of general service, such as OAM, CPU and general forwarding service, table item is comprised of reported flag (“Reported Flag”) and the reported sizes of data waiting to be transmitted (“Report”). Thereby “Reported Flag” indicates whether vMAC is to report the stored data in the current virtual frame period. The numerical unit of “Report” is the same as that of transmit quantum, namely Byte or Word. For MPCP message service, with reference to Figure 3 on the right, Reported Flag, uplink MPCP message type (“Type”) and reserved region (“Reserved”) table items are comprised in the RIT. Thereby, “Type” demonstrates the type of this uplink MPCP message, such as “REGISTERJREQ”, “REGISTER_ACK” , “Normal REPORT” and so on,<br>
making clearly to OLT which registration period ONU is in and making definite which type of downlink MPCP message should be generated. For EF service, as soon as virtual frame period is fixed, the port can only transmit constant sizes data in a virtual frame period, thus there is no need to report sizes of data waiting to be transmitted.<br><br>
Bandwidth allocation, namely authorization of ONU by OLT to transmit service data, is actually a polling grant course according to service priority. This course is performed by OLT according to port active information, bandwidth allocation information and report information of ONU. To guarantee QoS of EF service, virtual frame period is set as polling grant period. Bandwidth allocations for other services are also performed in this virtual frame period in sequence of priority. At the beginning of virtual frame period, EF bandwidth allocation is performed. The services of MPCP ^ MF AF and DF are sequentially performed in the residual time.<br>
The procedure of uplink service data transmission in the embodiment of the present invention will be described in detail with reference to Figure 4.<br>
In this embodiment, in descending sequence of priority services are EF service, automatic detecting MPCP message service, non-automatic detecting MPCP message service, MF service, AF service and DF service, and these services are sequentially polled and granted.<br>
For the convenience of sending granting message to each type of uplink service by OLT, vMAC GIT (Granting information Table) is set in this implemented case for storing granting information of transmit authorization. In uplink receiving procedure, data of the GIT are read and granting information is created by OLT. And then, the granting information is transmitted by OLT to corresponding ONU, and dynamic bandwidth allocation is finished.<br>
Figure 4 demonstrates authorization flow of each type of service in the present embodiment.<br>
Step 401: the OLT confirms current to-be-granted service port according to uplink service active information, or touches off the start-up counter of the automatic detecting MPCP message service.<br>
For services like EF, MF, AF, DF and non-automatic detecting MPCP message, current to-be-granted service port can be confirmed through polling the Service Active ONU Bitmap registers and Ingress Active Bitmap tables. The specifics are: polling the Service Active ONU Bitmap registers of each service in descending sequence of priority. For MF and non-automatic detecting MPCP message service, the Service Active ONU Bitmap register of this service is polled to find out the ONU activated by the type of service through active information of table item, and this<br><br>
ONU port is taken as the one to be granted. For those service with port as unit, like EF, AF, and DF, the Service Active ONU Bitmap register of this service is polled to find out the ONU activated by this service, then the Service Active Port Bitmap table of this service is looked up with the ONUID of the found ONU, and further this service is confirmed to be activated by which port of this ONU.<br>
For automatic detecting MPCP message service, in order to make the new on-line ONU be dynamically registered, an automatic detecting MPCP message service start-up counter is set; automatic detecting MPCP is started as soon as the counter achieves the configured threshold. If automatic detecting MPCP service is detected, enters step 402; otherwise returns to step 401. In this way, periodic automatic detecting MPCP procedure is implemented and not much bandwidth is occupied.<br>
Step 402: the OLT searches for report information of current to-be granted service port in the RIT table, and judges whether the current bandwidth is available for granting, if yes, authorizes bandwidth and records granting information in the GIT; otherwise jumps to step 404.<br>
Thereby, for EF, MF and MPCP message services, the availability of bandwidth resource is judged according to port provision bandwidth, namely according to the allowed amount of data (for EF and MF service) or constant amount of data of MPCP (for MPCP service) in one virtual frame period, and the residual bandwidth in the current virtual frame period. When the former is greater than the latter, bandwidth resource is available and granting is allowed.<br>
For AF service, only when the following conditions are satisfied, the bandwidth resource can be judged as available: there are primed data reported at the port and the reported primed amount of data is less than both the residual allowed amount of data and sum of bandwidth provision transmit amount of data and deficit quantum. Here the provision transmit amount of data can be substituted by transmit quantum inquired in BIT table through ONUID and Offset index.<br>
For DF service, only when the following conditions are satisfied, the bandwidth resource can be judged as available: there are primed data reported at the port and the residual reported primed data is no less than the maximum of reported amount of data and bandwidth provision transmit amount of data. Here the provision transmit amount<br><br>
of data can be substituted by transmit quantum inquired in BIT table through ONUID and Offset index.<br>
If bandwidth is available, OLT authorizes the current port to transmit, and records the granting information in the GIT. For the EF service, the OLT confirms the Start Time and the sizes of data transmission according to the Arriving Stamp of reserved data and protective band and then records said Start Time and said sizes of data transmission in corresponding table item of the port in the GIT of this service. The identifier of said Arriving Stamp of reserved data is the identifier of the pre-defined data arrival time in the next uplink virtual frame period. The reference standard of the identifier is the oscillatory clock at the OLT.<br>
For the MPCP message service, the OLT confirms downlink MPCP message type according to uplink message type of current MPCP port in the RIT. Hereby, for the automatic detecting MPCP message service, downlink message type is constant. Then the OLT records the confirmed MPCP type and Granted Flag in the GIT table item corresponding MPCP port. If the service is the automatic detecting MPCP message service, the OLT may only record the Granted Flag in the GIT.<br>
For the MF and the DF service, the OLT authorizes current port a size of the granted window according to the reported data sizes info in the corresponding table items of the RIT, and records the granted window size in corresponding GIT table item.<br>
For the AF service, the OLT authorizes the size of the granted window according to the reported data sizes info in the corresponding table items of the RIT and the existing grant deficit. Meanwhile, the OLT calculates a new grant deficit. Then the OLT records the granted window size and the new grant deficit in corresponding GIT table item.<br>
Step 403: the OLT updates residual bandwidth in current virtual frame period and information relevant to the current to-be-granted service port.<br>
Specifically comprising: updating residual bandwidth in current virtual frame period; updating arrival time stamp of current reserved data and residual bandwidth in virtual frame period in EF service; as far as automatic detecting MPCP is concerned, resetting start-up counter and directly returning to step 401; clearing out the Reported<br><br>
Flag in corresponding RTT of MPCP, MT, AF and DF. Thereby clearing out the Reported Flag is to avoid repeating authorization in the next virtual frame period.<br>
In a preferred embodiment of the present invention, “funnel algorithm” is adopted as granting dispatching method in AF service. One skilled in the art should comprehend that weighing polling algorithm also can be adopted as granting dispatching method in AF service without affecting essence and scope of the present invention.<br>
Step 404: the OLT judges whether there are un-granted ports, if yes, returns to step 401; otherwise ends port authorization of this priority level and enters into another port authorization course of the next priority level.<br>
Specifically, for MF and non-automatic detecting MPCP, the mentioned determining course is: the OLT judges whether there are unread table items in the currently polled Service Active ONU Bitmap register, if yes, there are un-granted ports; otherwise, authorization to this kind of service is finished. While for the services with port as unit, like EF, AF and DF, the OLT firstly judges whether there are unread table item in the currently polled Service Active Port Bitmap table, if yes, continues to inquire the next table item; otherwise continues to judge whether there are unread table item in the currently polled Service Active ONU Bitmap register, if yes, there are un-granted ports; otherwise, authorization to this kind of service is finished.<br>
Thereinto, for automatic detecting MPCP, since there is at most one authorization in a virtual frame period, the OLT ignores step 404 and directly takes the authorization course to the service with the next priority level.<br>
Figure 5 demonstrates the structure of the GIT, with each table item corresponding to granting information of each ONU port, and the items are indexed by ONUID.<br>
For uplink EF service, the table item is comprised of the Granted Flag, the start time of data transmission (“Start Time”) and the size of data transmission (“Length”). Here, the Granted Flag indicates whether this service port is granted, the Start Time clarifies to this granted port when to start transmitting data, the Length equals granted window size and indicates how many data are granted to transmit.<br><br>
For uplink MF service, the table item is comprised of the Granted Flag, Reserved and the Length. Here Reserved means the undefined part reserved for future use.<br>
For MPCP service, the table item is comprised of the Granted Flag, the Type and the Reserved. Here Type is comprised of “Discovery GATE”, “Normal GATE” and “REGISTER&amp;GATE”. Here, downlink MPCP with GATE type is specially used to carry the granting message.<br>
For other services, like DF and AF, the table item is comprised of “Granted Flag”, “Deficit Count” and “Length”. Here, Deficit Count is used for recording authorization deficit of this port. Grant deficit reflects the extent when accumulative grant bandwidth exceeds reported bandwidth in the former uplink service period. And the system makes equal QoS guarantee of AF or DF service through authorization deficit; for DF service, since authorization deficit is ignored, value of Deficit Count can be set zero.<br>
During the authorization stage as said above, Start Time is only authorized to the EF service. For other services, such as automatic detecting MPCP message service, its registration window size is constant to PON system with constant ONU number and constant maximum spread space; for non-automatic detecting MPCP, granted Length is constant since the MPCP message length is constant, and granted Length is not written into the GIT any more; for AF and DF services, granted Length must be written into the GIT since granted Length of service port is non-constant.<br>
For convenient ONU management, ONU Status Information Table (SIT) is set in the present invention for flagging ONU status information. Figure 6 illustrates structure of the Status Information Table. Each ONU corresponds to one table item containing ONU status and the items are indexed by ONUID. In a preferred embodiment of the present invention, two bits are used to flag ONU status of Invalid Entry, Registered ONU and Registering ONU. Here, Invalid Entry indicates that no ONU is assigned to this ONUID; Registered ONU means this ONU has finished registering and service data forwarding can be performed; Registered ONU means this ONU is registering, in this status, current interacted messages can be confirmed according to RIT table item of MPCP port and GIT table item of the present ONU. ONU Status Information Table item is generated in the interactive procedure of MPCP messages. Current ONU status depends on both the former status and<br><br>
interacted MPCP message between OLT and the ONU in the former status. For instance: when in Invalid Entry status, if Discovery GATE MPCP message is received by the ONU and REGISTERJIEQ MPCP message is sent out to OLT, ONU gears into Registering ONU status; when in Registering status, if REGISTER_ACK message is received by the OLT, the ONU gears into Registered status.<br>
After finishing authorization operation of service transmission, OLT will generate granting messages in the virtual frame period and send the granting messages to corresponding ONU at a certain time. The principle of granting message generation is: in order to reduce the granting messages of each ONU service port and for the sake of less protective bands and synchronization time sects, transmit windows of all port services are successive and adjacent except EF service. So, except EF service, start time of granted data transmit of all port services are confirmed and written into granting message during the granting message generation period. This is because low delay and low delay jitter is needed in EF service, and timing transmission is always adopted in terms of these ports. Thus, for EF service, granted start time of data transmission and granted sizes of data transmission should be already confirmed during the granting message creating period. While for other service ports, only granted sizes of data transmission are confirmed during the granting message creating period and granted start time of data transmission are confirmed during the granting message generation period. The purpose is to make ports’ granted windows of the same ONU be successive and adjacent in time field, consequently reduce protective bands number and increase bandwidth utilization ratio.<br>
Figure 7 shows a flow of granting message generation method based on a preferred embodiment of the present invention.<br>
A granting message is generated with ONU as unit in the system so that granting message is carried in downlink MPCP message with GATE type. Furthermore, service ports belonging to the same ONU can be granted universally.<br>
As is shown in Figure 7, in step 701, reading out ONU status information table items one by one according to ONUID index.<br>
Step 702: determining whether current ONU is invalid, namely determining whether the corresponding SIT table item of the current ONU’s ONUID is 00, if yes, no granting and continuing to read next table item of the SIT, entering step 701;<br><br>
otherwise, namely the corresponding SIT table item of the current ONU’s ONUID is 01 or 10, continuing with step 703.<br>
Step 703: reading the corresponding GIT table items of each to-be-granted service port of the current ONU and generating granting information, scheduling granted start time of data transmission for each to-be-granted service port.<br>
This procedure specifically comprising: inquiring corresponding table items of service ports belonging to the same ONU in the GIT through ONUID index, acquiring Grant Status of service ports according to the Grant Flag of the corresponding table item, determining whether current service port is granted, if the service port is granted, reading out relevant information such as the size of data transmission from the corresponding table item and scheduling granted start time of data transmission for the service port.<br>
Thereby for EF service, by inquiring corresponding items of the GIT, acquiring size of data transmission and start time of data transmission, taking the start time as the granted start time of data transmission, writing them directly into downlink MPCP message with GATE type.<br>
For uplink MPCP service, the MPCP message type is acquired by requiring the GIT; in addition, since granted size of data transmission is constant, only the granted start time of data transmission of corresponding service port should be scheduled according to the granted data transmission time stamp which is inherited from data transmission granting period.<br>
For other services, like MF, AF and DF services, the granted size of data transmission is acquired by inquiring the GIT, and scheduling the granted start time of data transmission of corresponding service port according to the granted data transmission time stamp which is inherited from transmission granting period.<br>
Step 704: granting messages being generated and released according to the granting information and the granted start time of data transmission.<br>
Here, the granting information and the granted start time of data transmission of service ports, which belongs to the current ONU, are carried by MPCP message with GATE type. Firstly, downlink MPCP message type to the current ONU is confirmed according to the granted MPCP messages types, which comprises: determining whether there is a granted MPCP message type of the GATE type, if there is a granted<br><br>
MPCP message type of the GATE type, then granted MPCP message is taken as downlink MPCP message, the granting information and the granted start time of data transmission of each granted port confirmed in step 703 are written into the downlink MPCP message with GATE type and then sent out.<br>
Generally, the granting information and the granted start time of data transmission of four ports can be carried in one downlink MPCP message with GATE type. Therefore, if there are more than 4 ports requesting for grant, two or more downlink MPCP messages with GATE type are generated to carry the granting information and the granted start time of data transmission of all ports.<br>
Step 705: setting Granting Flag of GIT table item of current granted port as negative, in order to avoid repeatedly generating granting message.<br>
Step 706: determining whether all items of the SIT are read, if yes, it can be concluded that all ONU granting messages are created and the procedure of generating granting message is to be ended; otherwise returning to step 701 and continuing to read the SIT.<br>
At last, the present invention provides a method for processing offline ONU or fault ONU, namely a method of ONU information aging procedure. ONU Active Timeout Count table is set and each non-response time is counted. If the value exceeds the specified offline threshold, this ONU will be judged as invalid and resource of invalid ONU will be released.<br>
Figure 8 shows structure of the ONU Active Timeout Count table. Each ONU corresponds to one table item and the items are indexed by ONUID. Table item is comprised of Reported flag and ATC (Active Timeout Count).<br>
Figure 9 illustrates flow of ONU information aging method according to an implemented case of the present case.<br>
With reference to Figure 9, in step 901, reading out the items of the SIT one by one according to ONUID index.<br>
Step 902: determining whether the ONU status information in current item is invalid, if yes, returning to step 901 without processing this invalid ONU and continuing to read next item of the SIT; otherwise entering step 903.<br><br>
Step °03: reading out the item of the Active Timeout Count table corresponding to the cunent ONU and entering step 904.<br>
Step 904: determining whether any MPCP message is reported by this ONU in the present virtual frame period according to reported flag of the present item, namely determining whether there exists a reported flag in the table item, if yes, resetting the Active Timeout Count of the present item; otherwise continuing counting. Besides, whatever the determining result is, Reported flag must be cleared out.<br>
Step 905: determining whether the value of the Active Timeout Count exceeds the settled off-line threshold, if yes, it can be concluded that this ONU is offline and entering step 906; otherwise, it can be concluded that this ONU is online and entering<br>
step 907.<br>
Step 906: setting the SIT item of the present ONU as invalid, releasing relevant resources of this ONU and entering step 907. In this way, for offline ONU, corresponding item of the SIT is set invalid to indicate nonexistence of this ONU.<br>
Thereby, the released relevant ONU resources comprising: corresponding bits of Service Active Bitmap Registers, such as IMPAB, IMFAB, IEFAB, IAFAB and EDFAB; corresponding items of Service Active Bitmap Table, such as IEFAT, IAFAT and IDF AT, corresponding items of Bandwidth Information Table, as well as ONUID originally assigned to this ONU.<br>
Step 907: determining whether all items of the SIT are read out, if yes, it can be concluded that all the ONUs have been inquired, then ending ONU information aging procedure in the present virtual frame period; otherwise, returning to step 901 and continuing to read the SIT.<br>
The mentioned aging procedure can be repeatedly performed. In a preferred embodiment of the present invention, the ONU information aging procedure of the SIT can be initiated by a certain event. Once the aging procedure is initiated, all table items are traversed to update all the ONUs information. The procedure is ended when all items are traversed, waiting for the next event to initiate this procedure.<br>
The present invention is applicable in master-slave system and ONUs access must be controlled by OLT in this system. All the uplink service data forwarding and accessing of all ONUs, such as MPCP or other MAC messages are controlled by OLT; for downlink situation, broadcast mode is adopted, data being filtered and received by<br><br>
ONU. Downlink transmission dispatching can be based on priority, namely downlink dispatching forwarding be performed in sequence of EF, MPCP, CPU/OAM, AF, DF.<br>
The present invention is illustrated with graphs and description with reference to some excellent implemented cases of the present invention. Despite of that, common technicians in this field should understand that various kinds of changes could be performed in form and detail to the present invention. Those changes are confined to the spirit and scope of the attached claims.<br><br>
Claims<br>
1.	A method for dynamic bandwidth allocation in a Passive Optical Network (PON), said PON includes an OLT and a plurality of ONUs accessing to the OLT, comprising:<br>
a)	classifying services which are to be communicated between the OLT and an ONU into a plurality of service types according to different transmitting requirements, and granting a different priority to each type of the services;<br>
b)	authorizing a service port of every type of services to transmit service data in descending sequence of said priorities of the services, and recording the granting information of the service ports obtained from the authorization;<br>
c)	reading out said granting information of every to-be-granted service port of the same ONU; and<br>
d)	scheduling start time of granted data transmission of every to-be-granted service port of current ONU, generating a downlink granting message including both said granting information and said start time of granted data transmission of every granted port of said current ONU, and transmitting said downlink granting messages to said current ONU.<br>
2.	The method according to Claim 1, further comprising: generating Active Timeout Counter to count non-response periods of each ONU;<br>
and further comprising a flow of aging ONU information:<br>
A.	inquiring status of the ONUs one by one, determining whether the status of current ONU is invalid, if yes, returning to step A; otherwise, proceeding to step B;<br>
B.	determining whether MPCP messages have been reported by said current ONU in the present bandwidth allocation polling period, if yes, resetting corresponding Active Timeout Counter of said current ONU, and proceeding to step C; otherwise, proceeding to step C directly;<br>
C.	determining whether the value of said Active Timeout Counter of said current ONU exceeds the settled off-line threshold, if yes, setting the status of the current ONU as invalid, releasing corresponding resources of this ONU, proceeding to step D; otherwise, proceeding to step D directly; and<br><br>
D. determining whether all the ONUs- are inquired, if yes, ending the ONU information aging flow of the present bandwidth allocation polling period; otherwise, returning to step A, continuing with the inquiry of a next ONU.<br>
3. The method according to Claim 2, further comprising:<br>
generating an ONU Status Information table indexed by ONUID, which is to store every ONU's status information that is generated according to MPCP messages communication between the ONUs and the OLT;<br>
generating an ONU Active Timeout Count table indexed by ONUID, which includes said Active Timeout Counter and reported flags to indicate whether MPCP messages have been reported by corresponding ONUs;<br>
said step of determining in step A comprises: according to ONUID index, reading out ONU status information from the ONU Status Information table one by one, determining whether current ONU is invalid according to said ONU status information;<br>
said step of determining in step B comprises: reading out table item of said current ONU from Active Timeout Count table, determining whether there exists a reported flag in corresponding table item of said current ONU, if yes, it can be concluded that MPCP messages have been reported in the present bandwidth allocation polling period; otherwise, it can be concluded that MPCP messages have not been reported;<br>
between step C and step D, further comprising: clearing the reported flag of said current ONU in the ONU Active Timeout Count table;<br>
said step of determining in step D comprising: determining whether all table items of the ONU Status Information table are read out, if yes, it can be concluded that all the ONUs have been inquired; otherwise, it can be concluded that some of the ONUs have not been inquired.<br>
4. The method according to Claim 1, further comprising:<br>
generating a vMAC Granting information table indexed by ONUID, which includes granting information of each of the service ports of the ONUs and granted flags to indicate whether corresponding service ports are authorized;<br><br>
the step of recording granting information in step b) comprises: recording said granting information in the vMAC Granting information table, setting granted flag of said granted service ports as authorized;<br>
the step of reading out granting information in step c) comprises: searching for table items corresponding to the service ports of the same ONU in the vMAC Granting information table according to ONUID index, searching for granted service ports according to granted flag, reading out granting information of the granted service ports; and<br>
after step d) further comprising: setting the granted flag as negative of the service ports which have read out granting information.<br>
5.	The method according to Claim 1, further comprising:<br>
generating the ONU Status Information table indexed by ONUID, which is to store status information of every ONU that is generated according to MPCP messages communication between the ONUs and the OLT;<br>
before step c) further comprising: reading out status information of the ONUs one by one from the ONU Status Information table according to ONUID index, determining whether current ONU status is invalid according to the status information of said current ONU, if yes, returning to read a next ONU status information in the ONU Status Information table, otherwise, proceeding to step c).<br>
6.	The method according to Claim 1, wherein said services being classified by priority in descending sequence in step a) as fast forwarding service, automatic detecting MPCP message service, non-automatic detecting MPCP message service, MF service, Assured Forwarding service and Best-Effort Forwarding service.<br>
7.	The method according to Claim 6, wherein as to services except automatic detecting MPCP message service, said step of authorization in step b) comprises:<br>
bll) confirming current to-be-granted service port according to uplink service<br>
activating status;<br>
bl2) according to the residual bandwidth resource in the current bandwidth allocation polling period, determining whether current bandwidth resource is available to the constant amount of data of said current to-be granted service port for non-automatic detecting MPCP message service, or to the report information from said<br><br>
current to-be-granted service port for the other types of the services, If yes, proceeding to step bl3); otherwise, proceeding to step bl5);<br>
bl3) authorizing said current to-be-granted service port to transmit service data, and recording the current granting information;<br>
bl4) updating residual bandwidth in the current bandwidth allocation polling period and relevant information of said current to-be-granted service port; and<br>
bl5) determining whether there are un-granted service ports of current priority service, if yes, returning to step bll); otherwise, authorizing the ports of the next priority service.<br>
8. The method according to Claim 7, further comprising:<br>
generating a Service Active ONU Bitmap register for every type of service to store active information indicating whether the type of service is activated in the ONUs;<br>
generating a Service Active Port Bitmap table for services with port as unit, which is indexed by ONUID, to store active information indicating whether this type of service is activated in the accessed service ports of the ONUs;<br>
generating a vMAC Report Information table indexed by ONUID, to store report information from the accessed ports of the ONUs;<br>
step bll) comprises: polling the Service Active ONU Bitmap register and the Service Active Port Bitmap table of every service type in descending sequence of priorities, finding out a service port with positive active information and confirming the service port as said current to-be-granted service port;<br>
before step bl2) further comprising: finding out report information of current to-be-granted service port from the vMAC Report Information table; and<br>
in step bl5), determining whether there are unread table items in current Service Active ONU Bitmap register and current Service Active Port Bitmap table, if yes, returning to step bll); otherwise, inquiring the corresponding Service Active ONU Bitmap register and Service Active Port Bitmap table of the service with the next priority.<br>
9. The method according to Claim 7 or 8, wherein<br><br>
for the fast forwarding service, said granting information comprising start lime of data transmission and sizes of data transmission; said report information comprising reported sizes of data waiting to be transmitted;<br>
for the fast forwarding service, said step of scheduling granted start time in step d) comprising: taking said start time of data transmission of said granting information as the granted start time of data transmission;<br>
for the non-automatic detecting MPCP message service, said granting information comprising downlink MPCP message type and reserved field, wherein said MPCP message type comprising Discovery GATE, Normal GATE and REGISTER&amp;GATE; said report information comprising MPCP message type field and reserved field;<br>
for the MF service, said granting information comprising reserved field and sizes of data transmission; said report information comprising reported sizes of data waiting to be transmitted;<br>
for the Assured Forwarding service, said granting information comprising grant deficit quantity and sizes of data transmission of corresponding service ports; said report information comprising reported sizes of data waiting to be transmitted;<br>
for the Best-Effort Forwarding service, said granting information comprising sizes of data transmission; said report information comprising reported sizes of data waiting to be transmitted.<br>
10. The method according to Claim 7, further comprising:<br>
generating a Bandwidth Information table for those service ports requesting bandwidth control, to store transmit quantum in every bandwidth allocation polling period;<br>
the step of determining for those service ports requesting bandwidth control in step bl2) comprises: finding out transmit quantum of current service port from the Bandwidth Information table, determining whether current bandwidth resource is available according to report information from said current to-be-granted service port, transmit quantum of said current to-be-granted service port and said residual bandwidth resource in the current bandwidth allocation polling period.<br><br>
11. The method according to Claim 6, further comprising generating a start-up counter for the automatic detecting MPCP message service;<br>
the step of authorizing service ports in step b) comprises:<br>
b21) touching off said start-up counter, when said counter achieves configured threshold, launching the process of the automatic detecting MPCP messages detecting, if a automatic detecting MPCP message is detected, proceeding to step b22); otherwise, resetting the start-up counter and returning to step b21);<br>
b22) determining whether current bandwidth resource is available to the constant amount of data of said current to-be-granted service port, according to the residual bandwidth resource in current bandwidth allocation polling period of the automatic detecting MPCP message service, if yes, entering step b23), otherwise, authorizing the ports of the next priority service;<br>
b23) resetting the start-up counter and returning to step b21).<br>
12.	The method according to Claim 11, wherein<br>
for the automatic detecting MPCP message service, said granting information comprising downlink MPCP message type and reserved field, wherein said MPCP message type comprising Discovery GATE, Normal GATE, REGISTER&amp;GATE.<br>
13.	The method according to Claim 1, after step d) further comprising: determining whether there is still any ONU with un-granted port, if yes, returning to step c); otherwise, ending.<br>
14.	The method according to Claim 1, wherein the type of said downlink granting messages of the method is GATE downlink MPCP message.<br>
15.	The method according to Claim 7, 8 or 10 wherein said uplink granting information of the present method being carried by REPORT messages.<br>
16.	The method according to any one of Claim 2, 7 and 10, wherein said bandwidth allocation polling period of the present method is the virtual frame period.<br><br></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTc2Ny1DSEVOUC0yMDA2ICAgQ09SUkVTUE9OREVOQ0UgT1RIRVJTICAwNS0xMi0yMDExLnBkZg==" target="_blank" style="word-wrap:break-word;">1767-CHENP-2006   CORRESPONDENCE OTHERS  05-12-2011.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTc2Ny1DSEVOUC0yMDA2ICAgQ09SUkVTUE9OREVOQ0UgT1RIRVJTICAwNy0wMi0yMDEyLnBkZg==" target="_blank" style="word-wrap:break-word;">1767-CHENP-2006   CORRESPONDENCE OTHERS  07-02-2012.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTc2Ny1DSEVOUC0yMDA2ICAgRVhBTUlOQVRJT04gUkVQT1JUIFJFUExZIFJFQ0VJVkVEIDA0LTA3LTIwMTIucGRm" target="_blank" style="word-wrap:break-word;">1767-CHENP-2006   EXAMINATION REPORT REPLY RECEIVED 04-07-2012.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTc2Ny1DSEVOUC0yMDA2ICBBTUVOREVEIENMQUlNUyAwNC0wNy0yMDEyLnBkZg==" target="_blank" style="word-wrap:break-word;">1767-CHENP-2006  AMENDED CLAIMS 04-07-2012.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTc2Ny1DSEVOUC0yMDA2ICBBTUVOREVEIFBBR0VTIE9GIFNQRUNJRklDQVRJT04gMDQtMDctMjAxMi5wZGY=" target="_blank" style="word-wrap:break-word;">1767-CHENP-2006  AMENDED PAGES OF SPECIFICATION 04-07-2012.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTc2Ny1DSEVOUC0yMDA2ICBDT1JSRVNQT05ERU5DRSBPVEhFUlMgMDEtMDgtMjAxMi5wZGY=" target="_blank" style="word-wrap:break-word;">1767-CHENP-2006  CORRESPONDENCE OTHERS 01-08-2012.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTc2Ny1DSEVOUC0yMDA2ICBGT1JNLTMgMDQtMDctMjAxMi5wZGY=" target="_blank" style="word-wrap:break-word;">1767-CHENP-2006  FORM-3 04-07-2012.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTc2Ny1DSEVOUC0yMDA2ICBPVEhFUiBQQVRFTlQgRE9DVU1FTlQgMDQtMDctMjAxMi5wZGY=" target="_blank" style="word-wrap:break-word;">1767-CHENP-2006  OTHER PATENT DOCUMENT 04-07-2012.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTc2Ny1DSEVOUC0yMDA2ICBQT1dFUiBPRiBBVFRPUk5FWSAwNC0wNy0yMDEyLnBkZg==" target="_blank" style="word-wrap:break-word;">1767-CHENP-2006  POWER OF ATTORNEY 04-07-2012.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTc2Ny1jaGVucC0yMDA2LWFic3RyYWN0LnBkZg==" target="_blank" style="word-wrap:break-word;">1767-chenp-2006-abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTc2Ny1jaGVucC0yMDA2LWNsYWltcy5wZGY=" target="_blank" style="word-wrap:break-word;">1767-chenp-2006-claims.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTc2Ny1jaGVucC0yMDA2LWNvcnJlc3BvbmRuZWNlLW90aGVycy5wZGY=" target="_blank" style="word-wrap:break-word;">1767-chenp-2006-correspondnece-others.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTc2Ny1jaGVucC0yMDA2LWRlc2NyaXB0aW9uKGNvbXBsZXRlKS5wZGY=" target="_blank" style="word-wrap:break-word;">1767-chenp-2006-description(complete).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTc2Ny1jaGVucC0yMDA2LWRyYXdpbmdzLnBkZg==" target="_blank" style="word-wrap:break-word;">1767-chenp-2006-drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTc2Ny1jaGVucC0yMDA2LWZvcm0gMS5wZGY=" target="_blank" style="word-wrap:break-word;">1767-chenp-2006-form 1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTc2Ny1jaGVucC0yMDA2LWZvcm0gMTgucGRm" target="_blank" style="word-wrap:break-word;">1767-chenp-2006-form 18.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTc2Ny1jaGVucC0yMDA2LWZvcm0gMy5wZGY=" target="_blank" style="word-wrap:break-word;">1767-chenp-2006-form 3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTc2Ny1jaGVucC0yMDA2LWZvcm0gNS5wZGY=" target="_blank" style="word-wrap:break-word;">1767-chenp-2006-form 5.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTc2Ny1jaGVucC0yMDA2LXBjdC5wZGY=" target="_blank" style="word-wrap:break-word;">1767-chenp-2006-pct.pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="253779-air-flux-director-system-for-x-ray-tubes.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="253781-a-method-to-save-emulation-switching-time-in-rendering-devices.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>253780</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>1767/CHENP/2006</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>34/2012</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>24-Aug-2012</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>23-Aug-2012</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>19-May-2006</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>HUAWEI TECHNOLOGIES CO., LTD.</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>Huawei Administration Building, Bantian, Longgang District, Shenzhen, Guangdong 518129.</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>TAN, Peilong</td>
											<td>Huawei Administration Building, Bantian, Longgang District, Shenzhen, Guangdong 518129</td>
										</tr>
										<tr>
											<td>2</td>
											<td>ZHAO, Jun</td>
											<td>Huawei Administration Building, Bantian, Longgang District, Shenzhen, Guangdong 518129</td>
										</tr>
										<tr>
											<td>3</td>
											<td>LIU, Yu</td>
											<td>Huawei Administration Building, Bantian, Longgang District, Shenzhen, Guangdong 518129</td>
										</tr>
										<tr>
											<td>4</td>
											<td>HONG, Jianming</td>
											<td>Huawei Administration Building, Bantian, Longgang District, Shenzhen, Guangdong 518129</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>H04B10/12</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/CN2004/001195</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2004-10-21</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>200310101183.8</td>
									<td>2003-10-21</td>
								    <td>China</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/253780-method-for-dynamic-bandwidth-allocation-in-passive-optical-network by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 12:24:22 GMT -->
</html>
