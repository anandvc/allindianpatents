<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/203565-a-device-for-processing-a-data-stream by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 04:32:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 203565:A DEVICE FOR PROCESSING A DATA STREAM</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">A DEVICE FOR PROCESSING A DATA STREAM</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>THE DEVICE FOR PROCESSING A DATA STREAM The present invention relates to an exemplary data processing device includes a clock recovery system for locking a clock frequency to time stamps (PCR) of an incoming data stream e.g. MPEG, The exemplary device uses a free running clock (20) that generates a reference frequency (FREF) from which a desired locked clock frequency is synthesized (25,35) under control of a processing unit (24,34) that compares (241,341) the locked clock frequency to the time stamps (PCR). MPEG audio and video processing clock frequencies are synthesized (25,35) from a free running reference frequency (FREF) and locked to the MPEG time base on basis of time stamps (PCR) provided in the MPEG data stream. Other sub-systems (23,23&#x27;) run on frequencies that are not locked to the time base, e.g. simple multiples (22,22&#x27;) of the free running frequency (FREF). (figure 2 )</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>The invention relates to a device for processing a data stream, the device comprising a clock recovery system for locking a clock frequency to a time base of the data stream by comparing the clock frequency to time stamps representing the time base.<br>
The invention further relates to a method of locking a clock frequency to a time base of a data stream by comparing the clock frequency to time stamps representing the time base.<br>
US-A 5,699,392 discloses a system for the recovery of an encoder clock from an MPEG-2 transport stream. The frequency of a decoder clock is maintained at approximately the same frequency as an encoder clock, based on program clock reference (PCR) values contained in a digital information stream. A voltage-controlled oscillator produces a decoder clock frequency of 27 MHz. The decoder clock is fed back to a counter to produce a local system time clock (STC). The counter is initially loaded with a PCR value from the digital data stream. As subsequent PCR values are received, a subtracter subtracts the value of the PCR from the value of the local STC to produce an error signal. To produce a control signal, the error signal is filtered, scaled, and added to a control variable within a low-pass filter and processor. The control signal is applied to the voltage-controlled oscillator to adjust the oscillation frequency of the oscillator.<br>
The MPEG standards provide for the transmission of digital information from multiple sources by dividing the digital data into a number of packets. The packets are then multiplexed onto a single data channel, allowing a relatively large number of users to transmit and receive data over a common data channel. All audio, video and auxiliary information to be carried within a given data channel is divided into 188-byte long transport packets. Each transport packet is subdivided into a header and a payload. The header carries information to identify the type of data that is carried within the payload and information required for decoding the transport packet stream. The PCR is a 42-bit value that represents time stamps from a relative STC that is clocked by an encoder clock within an MPEG-2 encoder. Of the 42 Dits, the first 33 bits of the PCR value are referred to as the PCR base, and express a value of he encoder system time clock in 90 kHz-time base units. The remaining 9 bits of the PCR.<br><br>
value are referred to as the PCR extension, and express a value of the system time clocK. in i / MHz (modulo 300) time base units. The MPEG-2 standard requires that the PCR values must be provided at intervals of no more than 100 ms in the transport stream. The PCR values within the MPEG-2 transport stream are used to accurately recover the encoder clock in the MPEG-2 decoder. It is necessary to maintain accurate synchronization between the encoder clock used to encode the data and the decoder clock used to decode the data in order to properly demultiplex and decode the audio and video data. A difference in the encoder and decoder clock frequencies causes buffer underflow or overflow.<br>
The transport stream is provided with presentation time-stamps (PTS) to indicate to the MPEG-2 decoder when to present the individual frames of video and audio data to the user. The value of each PTS is ultimately dictated by the frequency of the encoder clock in the encoder, which clocks an STC in the MPEG-2 encoder. When encoding the data, the MPEG-2 encoder inserts the PTS into the transport stream based on samples of the STC. The decoder clock in the MPEG-2 decoder must therefore operate at the same frequency as the encoder clock if the data streams are to be properly presented to a user. For purposes of this description, "synchronization" between the encoder clock and the decoder clock implies that the clocks are operating at the same frequency, but with a possible phase offset between them.<br>
Assuming an error-free environment, synchronizing the encoder and the decoder clocks eliminates frame skips or frame holds mat occur when displaying the transmitted data. A frame skip can occur when data is received later than its PTS denotes. A frame hold can occur when the buffer within the decoder receives insufficient audio or video data to perform the decoding. To maintain synchronization, a phase locked loop is provided in the clock recovery system. The voltage-controlled oscillator operates at a nominal oscillation frequency of 27 MHz and has a control input to adjust the frequency within a small range surrounding the 27 MHz nominal frequency. The decoder clock is used for demultiplexing, decoding and displaying the audio and video.<br>
An object of the invention is, inter alia, to provide a more flexible and cost-effective clock recovery system. To this end, the invention provides a data processing device and a method of locking a clock frequency to a time base of a data stream as defined in the independent claims. Advantageous embodiments are defined in the dependent claims.<br>
A first embodiment of the invention is characterized in that said clock recovery system comprises: a free running clock for generating a free running reference frequency; and means for synthesizing said clock fi-eauericv from said reference frequency under control of<br><br>
said time stamps. A free running clock is more cost-effective than a de-tunable crystal as is used in embodiments that are known from the prior art Faster locking and a larger tracking range can be achieved. The invention further offers more flexibility in choosing another frequency.<br>
An embodiment of the invention comprises further means for synthesizing a further clock frequency from said reference frequency without locking to said time base. A further clock frequency for which locking to the time base of the incoming data stream is not necessary, is generated from the free running reference frequency, for example by a dedicated phase locked loop. This embodiment provides a clock system that provides locked clocks as well as unlocked clocks. The free running reference frequency is used for both types of clocks as a reference clock. Locking is only performed for those clocks that really need locking, e.g. clocks for use in MPEG audio and video processing units. In a practical embodiment of the invention, said further means comprise a multiplier for multiplying said reference frequency by an appropriate integer number to obtain said further clock frequency. If such a multiplier is implemented by use of a phase locked loop, integer dividers are required, thus simplifying the design. Clock skew, due to different load of the individual clock trees, between various blocks is minimized and data can be exchanged without additional synchronization circuitry.<br>
In a further embodiment of the invention, said synthesizing means comprise a controlled multiplier for multiplying the reference frequency by an appropriate number to obtain said clock frequency, said appropriate number being derived under control of said time stamps. For flexibility, the appropriate number is made controllable by a processing unit. Locking to the time base of the incoming data stream is achieved by comparing the locked clock frequency with the incoming time stamps and to calculate the appropriate number by the processing unit.<br>
In a practical embodiment, the controlled multiplier comprises a phase locked loop (PLL) circuit for obtaining an oscillation frequency at an integer multiple of the reference frequency, said circuit comprising a phase detector coupled to an oscillator, and a feedback loop for feeding the oscillation frequency to an input of the phase detector, said feedback loop comprising an integer divider; and a controlled divider for dividing the oscillation frequency by a non-integer divider number to obtain a divided frequency, said divider number being derived under control of said time stamps and said divided frequency being output as the clock frequency. This is a practical implementation of the invention, in which the feedback loop only needs a simple integer divider. Since this straight forward implementation of the synthesizing means for locking the clock frequency by the use of a phase locked loop does not<br><br>
mininiize clock jitter and clock skew, some special measures are defined in further embodiments.<br>
In a clock skew reducing embodiment of the invention, said controlled multiplier comprises: a phase locked loop circuit for obtaining an oscillation frequency at an integer multiple of the reference frequency, said circuit comprising a phase detector coupled to an oscillator; a controlled divider for dividing the oscillation frequency by a non-integer divider number to obtain a divided frequency, said divider number being derived under control of said time stamps; a counter for counting the number of positive edges in the divided frequency per cycle of the reference frequency; means for generating a predetermined frequency comprising an amount of positive edges at predetermined positions, said amount being equal to said number of positive edges in the divided frequency and said predetermined frequency being output as the clock frequency; and a feedback loop for feeding the clock frequency to an input of the phase detector, said feedback loop comprising an cascaded divider being arranged to divide the clock frequency by a divider number equal to said number of positive edges.<br>
An advantageous embodiment of the invention comprises means for synthesizing clock frequencies for audio processing and video processing independently. Locking the audio and video clocks independently has the additional advantage that even PTS time stamps can be involved in the regulation by which an exact time base match can be achieved. Also time base discontinuities can be optimized independently.<br>
A further embodiment comprises first processing means for performing a first processing step with use of said clock frequency; second processing means for performing a second processing step with use of said further clock frequency; and a sample rate converter for converting a sample rate of an output signal of the first processing means to furnish converted output signals to the second processing means. This embodiment provides a solution for coupling a unit that runs on a locked clock frequency and a second unit that runs on an unlocked, i.e. a different frequency. The sample rate converters compensate for the clock jitter, so that no difficult high performance analog PLL's are required. This embodiment is especially useful for running audio and video processing units on a locked clock frequency and digital to analog converters coupled to the processing units on an unlocked clock frequency. In an advantageous embodiment, the D/A converter for the video part runs at an integer multiple of the clock frequency of the audio D/A converter. This integer can be equal to one, so that the audio and video D/A converters run at the same clock frequency. The same clock frequency or a simple mutual clock ratio for audio and video D/A converters simplifies<br><br>
the integration on the same chip. The sample rate converter may De comxoueo oy pnase informaiion out of the controlled multiplier.<br>
The aforementioned and other aspects of the invention will be apparent from and elucidated with reference to the embodiments described hereinafter.<br>
In the drawings:<br>
Fig. 1 shows a schematic overview of a clock recovery system as known from the prior art;<br>
Fig. 2 shows a device for processing a data stream, comprising several aspects of the invention;<br>
Fig. 3 shows a generalized block diagram of PLL clock synthesizing according to the invention;<br>
Figs. 4A and 4B show a diagram of a non-integer divider and a corresponding timing diagram;<br>
Fig. 5 shows a further embodiment of a locked clock according to the invention;<br>
Fig. 6 shows an embodiment of the invention for compensation of clock jitter;<br>
Figs. 7 A and 7B show an embodiment of the invention for compensation of clock skew and a corresponding timing diagram; and<br>
Figs. 8A and 8B show a PLL with non-integer dividers according to the invention and a corresponding timing diagram.<br>
The drawings only show those elements that are necessary to understand the invention.<br>
The clock recovery system of Fig. 1 schematically shows a system as is known from the prior art. This system comprises a comparator 10, a control unit 11 and an oscillator 12. The oscillator is controllable by the control unit 11. The output of the oscillator is about 27 MHz, which is fed back to the comparator 10. The output frequency of 27 MHz is de-tunafale within a small range of approximately 100 ppm. The comparator 10 compares the clock frequency with the incoming time stamps PCR. Based on the comparison performed in the comparator, the frequency of the oscillator is adjusted. The 27 MHz frequency is used as a clock frequency in the decoder. The conventional 27 MHz is only optimized for standard ITU656 based video. For other integrated functions like audio decoding, graphics overlay, CPU, peripherals etc. other clocks might be more optimal. Hence many different PLL's or multiple crystals would be required in such systems which complicates the design<br><br>
considerably. The audio part requires a low jitter clock at a multiple of the audio sampling frequency. Here, an additional non-integer divider plus a high performance PLL would be necessary with the disadvantage that the clock skew with the other clock domains is unknown. Moreover it is very difficult to meet the very demanding requirements on clock jitter for the audio D/A converters.<br>
A data processing device according to the invention is shown in Fig. 2. Although the invention is applicable to any data stream comprising time stamps, the following discussion will concentrate on an MPEG encoded data stream.<br>
The device comprises a free running clock 20 that produces an exemplary free running frequency of 24.576 MHz. This is a practical frequency for a DVB set top box. Dependent on the specific application another frequency might be more practical. A practical frequency for a TV is e.g. 24.0 MHz.<br>
A frequency divider 21 is an optional element that can be used to divide the frequency of the free running clock 20. The frequency divider 21 can be part of the free running clock and may also be omined. In the following discussion the frequency divider 21 is assumed to be present and to divide the frequency of the free running clock 20 by 4 to obtain a free running reference frequency FREF of 6.144 MHz. This single low reference frequency FREF is distributed over the device. The free running frequency generated by the free running clock 20 or a derivative thereof, is optionally output to an external device or communication bus, for example external SDRAM, an IEEE1394 interface or a modem. If the divider 21 is omitted, the reference frequency FREF is equal to the frequency as generated by the free running clock 20.<br>
The device comprises PLL's 22 and 22', which generate local frequencies for the sub-system units 23 and 23' respectively. The units 23 and 23' perform some processing function. Examples of sub-system units 23 and 23' are, among others: memory interfaces, central processing units (CPU's), peripherals, decoders, etc.<br>
Time stamps PCR, as known from the art, represent a time base of an incoming data stream. According to a first aspect of the invention, a clock that needs locking to the time base is synthesized from the reference frequency FREF under control of the time stamps PCR. MPEG presentation units, for example, need clock frequencies that are locked to the time base of the incoming data stream. For locking an MPEG video processing clock frequency to the time stamps PCR, the device comprises a CPU 24 and a controlled multiplier 25 (PLL). Locking to the time base of the incoming data stream is achieved by comparing the video time base, i.e. the video processing clock frequency with the incoming time stamps PCR and to<br><br>
calculate an appropriate multiplying factor by the CPU 24. Practically, the CPU 24 calculates appropriate divider numbers for non-integer dividers that are used in the PLL that forms the controlled multiplier 25 as will be discussed in relation to Fig. 3. The CPU 24 comprises a compare unit 243 and a control unit 240. The video processing clock frequency is output from the PLL 25 to a video processing unit 26. Coupled to the video-processing unit 26 is a video time counter 261. The video time counter 261 is used to divide and feed back the required video time base to the compare unit 241 in the CPU 24.<br>
The audio part of the device is implemented in a similar way and comprises a CPU 34 comprising a compare unit 341 and a control unit 340. The audio part further comprises a controlled multiplier 35 (PLL) and an audio processing unit 36 coupled to an audio time counter 361. The elements in the audio part are similar to their counterpart in the video part of the device.<br>
Doing the time base regulation for the audio and video parts of the device independently, has the additional advantage that time base discontinuities can be optimized individually. Furthermore, decoding and presentation time stamps can be involved in the regulation so that an exact time base match can be achieved. MPEG-2 decoding and presentation time stamps are described in US-A 5,652,627. A presentation time stamp (PTS) specifies the time at which each picture is to be displayed, and a decode time stamp (DTS) specifies the time at which a picture is to be decoded when the decoding time differs from the presentation time. Each MPEG-2 picture and audio frame is tagged (explicitly or implicitly) with a DTS, which indicates the time of the decoder clock at which the picture or audio frame should be decoded. If a DTS for a particular picture or audio frame is not explicitly coded in the MPEG-2 bit stream, then that picture or audio frame is decoded immediately following the previous one. Both pictures and audio frames are transmitted in order of increasing DTS value. Because MPEG-2 requires some pictures to be transmitted several pictures earlier in sequence than they are to be shown (i.e. prior to a B-picture), these pictures also require a second time stamp called the presentation time stamp (PTS) which indicates the clock value at which the picture is intended to be shown. If only a single time stamp is coded (as is always the case with audio), it is assumed to be both the DTS and PTS. Beginning both the video and audio at the time indicated in their respective PTS fields ensures synchronization (lip sync) of the audio and video. Locking to DTS can be done in a similar way as locking PTS.<br>
A practical frequency for the video part is 27 MHz. Practical frequencies for the audio part are 24.6 or 22.6 MHz, i.e. a multiple of the audio sampling frequency. The clock system of Fig. 2 provides locked and unlocked clocks with crystal stability.<br><br>
In an embodiment of the invention, video and audio digital to analog (D/A) converters 28 and 38 run on a frequency that is derived from the free running reference frequency FREF without locking to the time base of the incoming data stream. In a practical embodiment, PLL's similar to the PLL's 22 and 22' are used. It is however also possible to derive the clock frequencies for the D/A converters 28 and 38 in an alternative way. For integration on a single Integrated Circuit (IC) it is profitable to run the D/A converters 28,38 on a simple mutual clock ratio or on the same clock frequency, e.g. running the video D/A converter 28 on an integer multiple of the audio D/A converter 38 clock frequency.<br>
Fig. 3 shows a generalized block diagram of PLL clock synthesizing according to the invention. In general, a PLL is a closed loop frequency control system which functioning is based on phase sensitive detection of phase difference between an input signal and an output signal of a controlled oscillator. The PLL controls the oscillator so that it maintains a constant phase angle relative to a reference signal.<br>
Fig. 3 shows the PLL 22, which does not lock the clock frequency to the time base of the incoming data stream and the PLL 25 that generates the video presentation clock, which is locked to the time base of the incoming data stream. The PLL 22* and the PLL 35 are similar to the PLL 22 and the PLL 25, respectively.     .<br>
The PLL 22 comprises a phase detector 221 (PD), a loop filter 222 (LPF), a controlled oscillator 223 (Osc), a first divider 224 (DivNl), and a second divider 225 (DivN2) being placed in a feedback loop. In this embodiment, the unlocked further clock frequencies that are used in the sub-systems are integer multiples of the free running reference frequency FREF. The dividers 224,225 are therefore simple, integer dividers. The oscillator 223 generates a frequency that is an integer multiple of the reference frequency FREF. The frequency of the oscillator 223 is thereafter divided in the first divider 224 by an integer number Nl to generate the further clock frequency FOUTO) that is used in the sub-system 23. The further clock frequency FOUTO) is fed back to the phase detector 221 after dividing by a second integer number N2 in the second divider 225 to make comparison with the reference frequency FREF possible. This is necessary because the further clock frequency FOUTO) is an integer multiple of the reference frequency FREF. Depending on the phase difference detected in the phase detector 221, the generated frequency of the controlled oscillator 223 is amended by use of the loop filter 222 to keep a constant phase angle between the further clock frequency FOUTO) and the reference frequency FREF-<br>
The PLL 25 comprises a phase detector 251, a loop filter 252, an oscillator 253, a first divider 254 (DivMl) and a second divider 255 (DivM2). As in the PLL 22, the free<br><br>
running reference frequency FREF is used as a reference. However, for generating a locked clock frequency FOUT(P) for MPEG time base related blocks, it is required that the divider 254 is a non-integer divider dividing by a non-integer divider number M1. For flexibility, the non-integer divider number Ml is made controllable by the'CPU 24. In general, the non-integer divider 254 can be implemented as shown in Fig 4A. The non-integer divider 254 comprises an accumulator 256 and a feedback register 257. Such a divider is also called a discrete time oscillator or a numerically controlled oscillator. The register 257 receives the frequency Fosc that has been generated by the oscillator 253. In an exemplary embodiment, Fosc is 73.728 MHz having a width of 22 bits. The divider 254 divides the oscillation frequency to the desired locked frequency of 27 MHz. The most significant bit msb, of the 23-bit output of the register 257 represents the output frequency Four- The remaining 22-bit output of the register 257 is fed back to the accumulator 256. The accumulator 256 further receives a 22-bit number m that is obtained from the CPU 24. The feedback signal and the number m are accumulated in the accumulator 256 and thereafter transmitted as a 23-bit number to the register 257. F0UT is equal to m times 73,728,000/222, i.e. m times 17.6 Hz. For an output frequency Four of 27.0 MHz, the number m should be 1,536,000. This number m is calculated in the CPU under control of the time stamps PCR as describisd above and represents the divider-number M1. The regulation accuracy of the illustrated 22-bit implementation is 0.65 ppm (17.6/27,000,000). If a higher accuracy for the output frequency FOUT is required, die data path in the feedback loop has to be widened by one bit for every factor 2. It should be noted that the data in the feedback loop represents the phase relation phs between Four and Fosc-<br>
Fig. 4b shows a timing diagram of the non-integer divider 254. Edges of FOUT will coincide with edges of Fosc- Since the ratio between Four and Fosc is non-integer, the distance between two successive output pulses will switch between the two adjacent integer values. In the example of 27 MHz output, the distance will be alternating between 2 and 3 such that the average value equals the divider number 73.278 / 27 = 2.73. The output will therefore exhibit ajitter of Â± 0.5 Tosc-<br>
Because the divider number Ml is non-integer, a non-integer relationship exists between FOUT and FREF- There are several possibilities to implement the desired feedback of Four to the phase detector.<br>
Figure 5 shows a practical implementation of a locked clock generator witii a non-integer divider 254. The frequency FOUT(P) is locked to the MPEG time base via the CPU controlled divider 254. The oscillation frequency Fosc is fed back to the phase detector 251 via a divider 255* rather than the output frequency FOUT- An advantage of this embodiment is that<br><br>
the divider 255* can be implemented as a simple integer divider, because Fosc is an integer multiple of FREF- Due to the unknown load in an MPEG clock tree, the delay d of the divider 254, i.e. the relation with FREF is lost In this embodiment, clock skew and clock jitter are not minimized.<br>
In advantageous embodiments of the invention, solutions are proposed to minimize clock jitter and clock skew.<br>
Clock jitter in the embodiment of Fig. 5 can be reduced by increasing the oscillation frequency Fosc. e.g. by a factor 4 to 294.9 MHz. An advantage thereof is that the design of the digital part is simplified. A disadvantage is that the clock requirements for the D/A convener 28 might not be satisfied. Also post-PLL's as in tbe existing implementation for audio will have their limitation in signal quality.<br>
Fig. 6 shows an embodiment for compensating clock jitter in an advantageous manner. The D/A converter 28 runs on a frequency that is derived from the reference frequency FREF without locking to the MPEG time base, which frequency has a low jitter. In the illustrating embodiment of Fig. 6, the D/A converter 28 runs on Fosc which is in fact an unlocked integer multiple of the reference frequency FREF- The feedback in the PLL is performed by the divider 255*, in the same way as already discussed in relation to Fig. 5. A sample rate converter 27 (SRC) is used in the signal path for converting the sample rate of the output signal of the video-processing unit 26 to furnish a converted video stream to the D/A converter 28. This is necessary because the D/A converter 28 runs on a different frequency than the video-processing unit 26 that runs on the locked clock frequency FOUT(P)- Although a D/A converter is discussed, it should be mentioned that according to the invention any processing unit which runs on an unlocked frequency and is coupled to another unit that runs on a locked frequency, could be used with a sample rate converter to convert the sample rate of the signal. The sample rate converter 27 can be controlled by phase information phs out of the non-integer divider 254.<br>
This foregoing approach is used for both audio and video. The additional advantage is that the audio and video D/A converters 28, 38 can run on the same clock frequency or on different clock frequencies having a simple mutual ratio, e.g. an integer number, which simplifies the integration of both converters on the same chip significantly.<br>
Reduction of clock skew can be achieved by introducing a feedback loop from FOUT(P) lo FREF as shown in Fig. 7A. This is in conformity with the non-integer PLLs as shown in Fig. 3. The main difference between the embodiments shown in Figs. 5 and 7A is that the divider 255 in the feedback loop as shown in Fig. 7A needs to be a nan-integer<br><br>
divider, instead of a integer divider. The divider 255 can be implemented similar to the non-integer divider 254. A timing diagram of the embodiment of Fig. 7A is shown in Fig. 7B.The non-integer divider number M2 is equal to 4.39 (27.0 / 6.144). As can be seen, Four exhibits in this embodiment clock jitter with reference to FREF- Additional measures are proposed to minimize this clock jitter.<br>
An illustration of an embodiment comprising these additional measures is shown in Fig. 8a. The non-integer divider 254 is the same as described above. This divider converts the Fosc of 72.728 MHz to F0UT(P), being 27.0 MHz and locked to the MPEG time base. The number of positive edges in each FREF cycle TREF is counted in edge counter 259. For Fosc is 72.728 MHz and F0ur(P) is 27.0 MHz, the number of positive edges- will be 4 or 5, because 27.0 / 6.144 is 4.73. The edge counter 259 uses Fosc being divided by 12 in divider 258 as representation of FREF. The output of the edge counter 259 is the number of counted positive edges, being 4 or 5 in this implementation. With this information, FOUT(P) is generated with exactly the same number of positive edges for a FREF cycle, but at predetermined positions. The embodiment therefore comprises a selector 260 that selects a predetermined sequence 4Fx or 5Fx, depending on the number of positive edges counted for output, as FOUT(P)- The divider 255 is being arranged as a cascaded divider, bringing down FOUT(P) to 6.144 MHz by switching between two integer numbers depending on the counted number of positive edges as provided by the edge counter. The resulting frequency Fx has the proper frequency and no jitter compared to FREF- The frequency Fx can therefore be used in the phase detector. The phase relation between Four and FREF is only determined by the delay of the divider 255. In this way, independence of clock tree load is achieved, resulting in a minimized clock skew with other domains, even with clock frequencies that have integer relationships with FREF- The invention thus provides clocks that have crystal stability, exhibit low clock skew and are controllable over a large frequency range.<br>
The same mechanism can be used for the generation of the clock frequency for the audio part, where the clock frequency is either 24.6 or 22.6 MHz. Also here the number of clocks per reference clock cycle TREF is between 4 and 5. Only the switching will occur at a different ratio in order to achieve the proper output frequency value.<br>
The mechanism of clock edge permutation is only effective in the digital domain and does not change the average frequency. The sample rate converters 27, 37 in front of the D/A converters 28, 38 do not require any modification, although required buffering may need to be enlarged by one sample.<br><br>
It should be noted that the above-mentioned embodiments illustrate rather than limit the invention, and that those skilled in the art will be able to design many alternative embodiments without departing from the scope of the appended claims. In the claims, any reference signs placed between parentheses shall not be construed as limiting the claim. The word "comprising" does not exclude the presence of other elements or steps than those listed in a claim. The invention can be implemented by means of hardware comprising several distinct elements, and by means of a suitably programmed computer. In a device claim enumerating several means, several of these means can be embodied by one and the same item of hardware.<br>
In summary, the invention relates to a data processing device having a clock recovery system for locking a clock frequency to time stamps of an incoming data stream, e.g. MPEG. It has been proposed to use a free running clock that generates a reference frequency from which a desired locked clock frequency is synthesized under control of a processing unit that compares the locked clock frequency to the time stamps. The invention provides a cost-effective and flexible system. MPEG audio and video processing clock frequencies are synthesized from a free running reference frequency and locked to the MPEG time base on basis of time stamps provided in the MPEG data stream. Other sub-systems run on ciock frequencies that are not locked to the time base, e.g. simple multiples of the free running reference frequency. Audio and video D/A converters run on the same clock frequency or on two different clock frequencies having a simple mutual ratio that are synthesized from the free running reference frequency without locking to the time base. Sample rate converters are present in the signal path to adjust the output signal of a processing unit to the input of the D/A converter Tim** hanre regulation for audio and video is performed independently.<br><br><br>
WE CLAIM :<br>
1.	A device for processing a data stream, the device comprising a clock recoverv<br>
system for locking a clock frequency to a time base of the data stream by comparing<br>
the clock frequency F -OUT (P) to time stamps (PCR) representing the time base,<br>
characterized in that said clock recovery system comprises:<br>
a free running clock (20) for generating a free running reference frequency (F.REF); and<br>
means (24,25,34,35) for synthesizing said clock frequency from said reference frequency   (F.REF)   under   control   (24,25)   of   said   time   stamps   (PCR);   and<br>
wherein said clock recovery system comprises further means (22,22') for synthesizing a further clock frequency F.0uT(i) from said reference frequency (F.REF) without locking to said time base.<br>
2.	The device as claimed in claim 1, wherein said further means (22,22') comprise a multiplier (22,22') for multiplying said reference frequency by an appropriate integer number to obtain said further clock frequency comparing the clock frequency F.0uT (])<br>
3.	The device as claimed in claim 1, comprising:<br>
first processing means (26,36) for performing a first processing step with use of said clock frequency;<br>
second processing means (28, 38) for performing a second processing step with use of said further clock frequency; and<br>
a sample rate converter (27,37) for converting a sample rate of an output signal of the first processing means to furnish converted output signals to the second processing means.<br><br>
4.	The device as claimed in claim 3,<br>
wherein said synthesizing means (24,25,34,35) comprise a controlled multiplier<br>
(25,35) for multiplying the reference frequency (F.REF) by an appropriate number to<br>
obtain said clock frequency F.OUT (P)&gt; said appropriate number being derived under<br>
control	(24,34)	of	said	time	stamps	(PCR);	and<br>
wherein the sample rate converter (27,37) has a control input for receiving phase     information     (phs)     out     of     the     controlled     multiplier     (25,35).<br>
5.	A device for processing a data stream, the device comprising a clock recovery<br>
system for locking a clock frequency to a time base of the data stream by comparing<br>
the clock frequency F.OUT (p) t0 time stamps (PCR) representing the time base,<br>
characterized       in       that       said       clock       recovery       system       comprises:<br>
a free running clock (20) for generating a free running reference frequency<br>
(FREF); and<br>
means (24,25,34,35) for synthesizing said clock frequency from said reference frequency   (F.REF)   under   control   (24,25)   of   said   time   stamps   (PCR);   and<br>
wherein said synthesizing means (24,25,34,35) comprise a controlled multiplier (25,35) for multiplying the reference frequency(FUF) by an appropriate number to obtain said clock frequency F.0UT <p said appropriate number being derived under control of time stamps></p>
6.	The device as claimed in claim 5, wherein said controlled multiplier (25,35)<br>
comprises:<br>
a phase locked loop circuit for obtaining an oscillation frequency (Fosc) at a" integer multiple of the reference frequency (F.REF), said circuit comprising a phase detector (251) coupled to an oscillator (253), and a feedback loop for feeding the oscillation frequency (Fosc) to an input of the phase detector(251), said feedback loop comprising an inteper divider (755*1: and a controlled divider (254) for<br><br>
dividing the oscillation frequency (Fosc) by a non-integer divider number(Ml) to obtain the clock frequency (F.0UT (p)&gt; said divider number(Ml) being derived under control (24) of said time stamps (PCR).<br>
7.	The device as claimed in claim 5, wherein said controlled multiplier (25)<br>
comprises:<br>
a phase locked loop circuit for obtaining an oscillation frequency (Fosc) at an integer multiple of the reference frequency (F.REF), said circuit comprising a phase detector(251) coupled to an oscillator (253);<br>
a controlled divider (254) for dividing the oscillation frequency (Fosc) by a non-integer divider number(Ml) to obtain a divided frequency(F27), said divider number(Ml)  being  derived  under  control   (24)   of said  time  stamps   (PCR);<br>
a counter (259) for counting the number of positive edges in the divided frequency(F27)    per    cycle    (TREF)    of   the    reference    frequency(F.REF,    F6);<br>
means (258) for generating a predetermined frequency(4Fx, 5Fx) comprising an amount of positive edges at predetermined positions, said amount being equal to said number of positive edges in the divided frequency (F27) and said predetermined frequency(4Fx, 5Fx) being output as the clock frequency (F-OUTCP), and a feedback loop for feeding the clock frequency F.OUT (P) to an input of the phase detector(251), said feedback loop comprising a cascaded divider(255) being arranged to divide the clock frequency F 0UT (PJ by a divider number (4 or 5) equal to said number of positive edges.<br>
8.	The device for processing a data stream, the device comprising a clock<br>
recovery system for locking a clock frequency to a time base of the data stream by<br>
comparing the clock frequency F.0UT (p) to time stamps (PCR) representing the time<br>
base,<br>
characterized     in     that     said     clock     recovery     system     comprises: a free running clock (20) for generating a free running reference frequency (F. REF); and<br><br>
means (24,25,34,35) for synthesizing said clock frequency from said reference frequency   (F.REF)   under   control   (24,25)   of   said   time   stamps   (PCR);   and<br>
wherein said data stream comprises a video stream and an audio stream, characterized       in       that       the       clock       recovery       system       comprises:<br>
first means (24,25) for synthesizing a video clock frequency for use in means (26) for processing the video stream; and<br>
second means (34,35) for synthesizing an audio clock frequency for use in means (36) for processing the audio stream.<br>
9.        The device as claimed in claim 8, comprising:<br>
a first digital to analog converter (28) suitable for running on a first free running clock frequency;<br>
a second digital to analog converter (38) suitable for running on a second free running clock frequency;<br>
a first sample rate converter (27) for converting a sample rate of an output signal of the means (26) for processing the video stream to furnish a converted video stream to the first digital to analog converter (28);<br>
a second sample rate converter (37) for converting a sample rate of an output signal of the means (36) for processing the audio stream to furnish a converted audio stream to the second digital to analog converter (38).<br><br></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDY5Ny1jaGUgYWJzdHJhY3QuanBn" target="_blank" style="word-wrap:break-word;">in-pct-2001-0697-che abstract.jpg</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDY5Ny1jaGUgYWJzdHJhY3QucGRm" target="_blank" style="word-wrap:break-word;">in-pct-2001-0697-che abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDY5Ny1jaGUgY2xhaW1zLWR1cGxpY2F0ZS5wZGY=" target="_blank" style="word-wrap:break-word;">in-pct-2001-0697-che claims-duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDY5Ny1jaGUgY2xhaW1zLnBkZg==" target="_blank" style="word-wrap:break-word;">in-pct-2001-0697-che claims.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDY5Ny1jaGUgY29ycmVzcG9uZGVuY2Utb3RoZXJzLnBkZg==" target="_blank" style="word-wrap:break-word;">in-pct-2001-0697-che correspondence-others.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDY5Ny1jaGUgY29ycmVzcG9uZGVuY2UtcG8ucGRm" target="_blank" style="word-wrap:break-word;">in-pct-2001-0697-che correspondence-po.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDY5Ny1jaGUgZGVzY3JpcHRpb24oY29tcGxldGUpLWR1cGxpY2F0ZS5wZGY=" target="_blank" style="word-wrap:break-word;">in-pct-2001-0697-che description(complete)-duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDY5Ny1jaGUgZGVzY3JpcHRpb24oY29tcGxldGUpLnBkZg==" target="_blank" style="word-wrap:break-word;">in-pct-2001-0697-che description(complete).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDY5Ny1jaGUgZHJhd2luZ3MucGRm" target="_blank" style="word-wrap:break-word;">in-pct-2001-0697-che drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDY5Ny1jaGUgZm9ybS0xLnBkZg==" target="_blank" style="word-wrap:break-word;">in-pct-2001-0697-che form-1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDY5Ny1jaGUgZm9ybS0xOS5wZGY=" target="_blank" style="word-wrap:break-word;">in-pct-2001-0697-che form-19.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDY5Ny1jaGUgZm9ybS0zLnBkZg==" target="_blank" style="word-wrap:break-word;">in-pct-2001-0697-che form-3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDY5Ny1jaGUgZm9ybS01LnBkZg==" target="_blank" style="word-wrap:break-word;">in-pct-2001-0697-che form-5.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDEtMDY5Ny1jaGUgcGV0aXRpb24ucGRm" target="_blank" style="word-wrap:break-word;">in-pct-2001-0697-che petition.pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="203564-transmission-system.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="203566-an-electrode-module-for-a-diagnostic-device.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>203565</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>IN/PCT/2001/697/CHE</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>05/2007</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>02-Feb-2007</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>29-Nov-2006</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>18-May-2001</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>M/S. KONINKLIJKE PHILIPS ELECTRONICS N. V</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>GROENEWOUDSEWEG 1, NL-5621 BA EINDHOVEN</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>M/S. KONINKLIJKE PHILIPS ELECTRONICS N. V</td>
											<td>GROENEWOUDSEWEG 1, NL-5621 BA EINDHOVEN</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>H04N 7/62</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/EP00/08967</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2000-09-12</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>99203092.4</td>
									<td>1999-09-21</td>
								    <td>EUROPEAN UNION</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/203565-a-device-for-processing-a-data-stream by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 04:32:29 GMT -->
</html>
