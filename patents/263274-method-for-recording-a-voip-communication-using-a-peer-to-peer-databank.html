<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/263274-method-for-recording-a-voip-communication-using-a-peer-to-peer-databank by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 01:38:07 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 263274:METHOD FOR RECORDING A VOIP COMMUNICATION USING A PEER-TO-PEER DATABANK</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">METHOD FOR RECORDING A VOIP COMMUNICATION USING A PEER-TO-PEER DATABANK</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>The invention concerns a method for operating a communication network comprising a plurality of nodes (105, 106, 107), whereby a databank is stored in shared manner among the nodes (105, 106, 107). A first node (106) extracts from the databank identification data for identifying and/or addressing the first node (106) by a correspondent (SIP PROVIDER) for recording, initiated by said first node, of a communication with the correspondent (SIP PROVIDER) of an external communication system. In another embodiment, when the recording of a communication with a first node (107) is initiated by a correspondent (SIP PROVIDER) of an external communication system, a notification concerning the recording of the communication initiated by said correspondent (SIP PROVIDER) by means of the databank can be supplied to a second node (106) and the correspondent (SIP PROVIDER) is then tracked. Said invention also concerns nodes for implementing said method.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>Description<br>
The invention relates to methods for operating a communication network comprising a plurality of nodes, in which a databank is stored in a shared manner among nodes.<br>
In communication systems or networks, messages are transmitted by a sender to one or more receivers. The transmission media and protocols used for transmitting the messages depend on the particular design of the communication system. Examples of communication systems are radio communication systems such as cellular mobile radio communication systems or WLANs (Wireless Local Area Networks), or line-based communication systems such as the public telephone network or LANs (Local Area Networks) or corporate communication networks.<br>
Communications between communication terminals are possible both within a communication network as well as between communication terminals of different communication systems. If a node of a first network initiates the establishment of communication with a node of a second communication network, from the point of view of the first network this constitutes an outgoing communication. If, on the other hand, a node of the second network initiates the establishment of communication with a node of the first network, from the point of view of the first network this constitutes an incoming communication. The establishment of a communication is usually performed by exchanging appropriate signaling messages.<br>
The document US 2002/0143855 Al describes a peer system in which two groups of peers exist, in which peers in one group cannot communicate directly with peers in the other group. There is a relay node which forwards messages between the two groups.<br>
The document US 2004/0260761 Al describes a peer-to-peer network for identifying devices. For this purpose, each device enters an identification file in the peer-to-peer network, which file can be searched and filtered by a search engine in order to determine suitable partners.<br>
The document DE 103 24 372 Al describes the registration of a terminal on a communication node of a communication network. For this purpose the terminal accesses an information store in which the communication nodes are registered.<br>
The document "Newton, Harry: Newton's Telecom Dictionary, 20th updated and expanded edition, San Francisco, CA, USA: CMP Books, March 2004, page 754, dictionary entry for "Skype", ISBN 1-57820-309-0", describes Skype, software which enables PCs to exchange voice communications over the internet. Skype utilizes VoIP and peer-to-peer technology.<br>
The object of the invention is to disclose methods for operating a communication network which are efficient both with respect to outgoing and with respect to incoming communications. In addition, devices for carrying out the methods are to be presented.<br>
This object is achieved by a method having the features of claim 1, and by a method and devices having the features of subordinate claims. Advantageous embodiments and refinements are set out in the subclaims.<br>
In the first method according to the invention for operating a communication network comprising a plurality of nodes, a databank is stored in a shared manner among nodes. In order to establish a communication initiated by a first node with a communication partner of an external communication system, said first node queries the databank for identification information for the identification and/or addressing of the first node by the communication partner.<br>
A communication network having a plurality of nodes will be considered. At least some of the nodes of the communication network are preferably communication terminals, such as telephones for example. In this case, in addition to the communication terminals, central devices that do not function as communication terminals may be present. It is however also possible for all nodes of the communication network to be communication terminals.<br>
A distributed databank is used in which several or all nodes of the communication network are involved in the storage of the databank. There is thus no central device that stores the entire databank. It is particularly advantageous if the first node also has part of the databank stored in its store, that is to say if the first node is also involved in the storage of the databank.<br>
A first node of the communication network initiates the establishment of communication with a communication partner on an external communication system. This means that, in the course of establishing communication, the first node first contacts the external communication partner, and not the other way round. In this case, from the point of view of the communication network this constitutes an outgoing communication. The nodes of the communication network can communicate with external communication partners via a gateway node for example, which node forwards messages between the nodes of the communication network and external communication partners.<br>
In order to establish communication with the external communication partner, the first node queries the databank for identification information. In particular this information may be a call number of the communication network, and/or an IP address of the communication network, and/or a name in combination with a password, and/or another subscriber identifier. Said identification information is preferably information which is required to establish communication with the external communication partner, but which is not available to the first node prior to querying the databank.<br>
In a refinement of the invention, the identification information is previously sent to the communication partner by a second node and is input into the databank. It is advantageous if the second node is also involved in the storage of the databank. The second node can send the identification information to the communication partner as part of a registration for example. By means of the registration, the second node is known to the communication partner under the identification information. It is advantageous if, although the second node has performed such a registration with the external communication partner, the first node is nevertheless not known to the external communication partner on the basis of a registration.<br>
In the second method according to the invention for operating a communication network comprising a plurality of nodes, a databank is stored in a shared manner among nodes. In the case of an establishment of communication with a first node initiated by a communication partner of an external communication system, using the databank a second node is notified about the establishment of communication initiated by the communication partner. The establishment of communication is then continued between the second node and the communication partner.<br>
The above explanations with respect to the storage of the databank by the nodes of the communication network, and also with respect to the embodiments of the nodes of the communication network, also apply to the second method according to the invention. The second method according to the invention relates to the establishment of a communication initiated by an external communication partner. This means that, in the course of establishing communication, the external communication partner first contacts the first node, and not the other way round. In this case, from the point of view of the communication network this therefore constitutes an incoming communication.<br>
in the course of the establishment of communication initiated by the external communication partner, a first node is contacted by the communication partner. The second node is notified of information about this establishment of contact, with the databank being involved in the notification of the second node. Thus, for example, the first node can notify the databank about the establishment of communication by the external communication partner, whereupon the databank notifies the second node. Alternatively, the first node can be informed by the databank that the second node is to be notified, and can perform said notification. Following the notification of the second node about the establishment of communication, the establishment of communication between the second node and the communication partner is continued; here the second node preferably takes the place of the first node, which does not continue the establishment of communication.<br>
According to a further development of the invention, prior to the establishment of communication initiated by the communication partner, the first node sends identification information to the communication partner. Furthermore, it is stored in the databank that the second node should be notified in the case of an establishment of communication which is initiated by the communication partner and which uses the identification information for addressing. The identification information is preferably a call number. That the information that the second node is to be notified is stored in the databank preferably results from the fact that the second node has informed the databank of an interest in incoming communications relating to the identification information.<br>
In one embodiment of the invention, the first node notifies the communication partner that the establishment of communication should be continued with the second node. Alternatively, the second node can also notify the communication partner that the establishment of communication should be continued with the second node. Said notifications from the first or the second node to the communication partner preferably include identification information for the<br>
second node which is to be used by the communication partner for addressing the second node.<br>
It is particularly advantageous if the nodes of the communication system have equal access to the databank. Access to the databank relates both to the querying of information from the databank and to the storage of information in the databank. The databank is preferably a peer-to-peer databank, and the databank is accessed using a peer-to-peer method. Examples of peer-to-peer methods are: DHT-based methods (DHT: Distributed Hash Table) such as CHORD, Tapestry, Kademlia; methods derived from DHT-based methods; or also other methods such as Gnutella, Opennap, edonkey, Fasttrack.<br>
In one embodiment of the invention, communication is established using SIP (Session Initiation Protocol) both with respect to outgoing and with respect to incoming communications. The communication is preferably a VoIP communication (VoIP: Voice over IP).<br>
A first node according to the invention for a communication network has means for participating in the storage of a databank stored in a shared manner among a plurality of nodes of the communication network, as well as means for initiating an establishment of communication with a communication partner of an external communication system, and means for querying the databank for identification information for the identification and/or addressing of the node by the communication partner and for using the identification information during the establishment of communication.<br>
A second node according to the invention for a communication network has means for participating in the storage of a databank stored in a shared manner among a plurality of nodes of the communication network, as well as means for receiving a notification about an establishment of communication with another node of the communication network initiated by a communication partner of an<br>
external communication system from the other node or from the databank, and means for continuing the establishment of communication with the communication partner following the notification.<br>
Both the first and also the second node according to the invention are particularly suitable for carrying out the respective method according to the invention; this may also apply to the embodiments and further developments. They may have further suitable means for this purpose. In particular it is possible for a node to encompass the means of both the first and the second node according to the invention.<br>
The invention will be explained in greater detail below with reference to an exemplary embodiment.<br>
Figure 1:        shows a section of a corporate communication network connected to the internet;<br>
Figure 2:        shows the sequence of a message exchange for an incoming call according to the prior art;<br>
Figure 3:        shows a first sequence according to the invention of a message exchange for an incoming call;<br>
Figure 4:        shows a second sequence according to the invention of a message exchange for an incoming call;<br>
Figure 5:        shows a third sequence according to the invention of a message exchange for an incoming call.<br>
The section of a corporate communication network illustrated in Figure 1 encompasses the terminals 105,106 and 107. The figures 105,106 and 107 are<br>
internal call numbers under which the terminals 105, 106 and 107 can be reached within the corporate communication network. The device NAT (NAT: Network Address Translation) to which the terminals 105, 106 and 107 are connected is also part of the corporate communication network. The terminals 105, 106 and 107 can communicate with the internet INTERNET or with servers or communication terminals connected to the internet INTERNET, such as with the servers STUN and SIP PROVIDER for example, via the device NAT. The device NAT may be generally any type of network gateway which enables messages to be transmitted between the internal corporate communication network and an external communication system.<br>
The case where the terminals 105, 106 and 107 are devices that utilize VoIP (Voice over IP) will be considered below. The external communication partners with which the terminals 105, 106 and 107 communicate using VoIP are the server SIP PROVIDER or VoIP-compliant terminals connected to the server SIP PROVIDER. The connection between the internet INTERNET and the terminals 105, 106 and 107 is made via the device NAT. Incoming calls, that is to say calls for which the server SIP PROVIDER contacts the respective terminal, and outgoing calls, that is to say calls for which the respective terminal contacts the server SIP PROVIDER, are possible.<br>
Figure 2 shows the sequence of the message exchange during the establishment of an incoming call according to the prior art. The messages symbolized by arrows correspond to the standardized messages according to SIP (Session Initiation Protocol). Using the message REGISTER, the device NAT registers with the server SIP PROVIDER specifying its IP address IP-ADDRESS NAT and a call number CALL NUMBER. Following said registration, the device NAT is known to the server SIP PROVIDER under the IP address IP-ADDRESS NAT and the call number CALL NUMBER, so that the server SIP PROVIDER is both able to place calls to the call number CALL NUMBER and to accept calls from the call number CALL NUMBER.<br>
Figure 2 shows the case where the server SIP PROVIDER or a terminal connected to the server SIP PROVIDER would like to set up a VoIP connection to the terminal of the corporate communication network having the call number CALL NUMBER. The server SIP PROVIDER thus sends the message INVITE, which is addressed to the IP address IP-ADDRESS NAT of the device NAT, to the device NAT, with specification of the call number CALL NUMBER. The device NAT has a store in which a link between the terminals 105, 106 and 107 and various call numbers is stored. In the example shown in Figure 2, the external call number CALL NUMBER is associated with the terminal 107. In addition, an internal IP address which is known and used only within the corporate communication network is allocated to the terminals 105, 106 and 107 in each case.<br>
The device NAT links the call number CALL NUMBER to the terminal 107 and therefore sends a message INVITE to the terminal 107 using the internal IP address IP-ADDRESS 107 of the terminal 107. The terminal 107 intends to accept the incoming call and therefore sends the messages TRYING, RINGING and OK to the device NAT, which forwards them to the server SIP PROVIDER. The IP address IP-ADDRESS NAT of the device NAT which is known to the server SIP PROVIDER is used for the forwarding, and not the internal IP address IP-ADDRESS 107 of the terminal 107, as the latter is not known to the server SIP PROVIDER. The device NAT thus does not forward the messages transparently, but performs an address translation. Following reception of the messages TRYING, RINGING and OK by the server SIP PROVIDER, VoIP data PAYLOAD can be transmitted between the server SIP PROVIDER and the terminal 107, with the device NAT handling the forwarding and address translation of the VoIP data PAYLOAD.<br>
As explained, according to the prior art a central device is installed at the gateway from the corporate communication network to the internet INTERNET,<br>
which is designated the device NAT in Figure 1, often also referred to as border proxy, IP-IP gateway or back-to-back user agent. All the signaling and payload data terminates at said central device from both sides, that is to say from the point of view of the terminals 105,106 and 107 and from the point of view of the internet INTERNET. Seen from the outside, that is to say from the internet INTERNET, only the central device with its IP address IP-ADDRESS NAT is known. The central device performs an address conversion between an external call number and an internal IP address of a terminal 105, 106 or 107 in each case. This address conversion is necessary because only a limited number of external IP addresses is available to the corporate communication network, so not every terminal 105, 106 or 107 can be known and addressed externally by its own IP address.<br>
The invention makes it possible to dispense with the device NAT with respect to the tasks of registration and address conversion described with reference to Figure 2. As will be described in greater detail below, the device NAT is only used for transparently forwarding messages between the server SIP PROVIDER and the terminals 105, 106 and 107. A virtual databank in the form of a peer-to-peer databank is used, which databank is stored by the terminals 105, 106 and 107 or, respectively, in a shared manner among the terminals 105, 106 and 107. The terminals 105,106 and 107 thus form a peer-to-peer network.<br>
Peer-to-peer methods provide instructions for storing data in stores and locating data in the respective store(s) in question. Each peer or a plurality of peers makes available a portion of its own store for storing the peer-to-peer databank. The data/information of the peer-to-peer databank is typically located at a plurality of locations in the peer-to-peer network, so that a high level of fail-safety is achieved by the virtual databank formed by the peers. A peer-to-peer method thus enables a peer, that is to say a node communicating with other nodes using the peer-to-peer method, to locate other peers, with a specific namespace for the<br>
respective peer-to-peer method being used to address the peers. It also enables a peer to locate data stored by other peers in an efficient way.<br>
The following may be used as the peer-to-peer method for example:<br>
•	CHORD,	described	e.g.	in<br>
http://www.cs.biu.ac.il/~galk/teachinq/p2D/stoica01chord.Ddf<br>
•	Tapestry,	described	e.g.	at<br>
http://www.cs.ucsb.edu/~ravenben/tapestry/<br>
•	Kademlia,	described	e.g.	in<br>
http://www.cs.rice.ed u/Conferences/IPTPS02/109.pdf<br>
•	Gnutella,	described	e.g.	in<br>
http://www.stanford.ed u/class/cs244b/gnutella_protocol_0.4.<br>
pdf<br>
•	Fasttrack (KaZaA, also Skype derived from this) described<br>
e.g.	at<br>
http://www.kazaa.com: http://www,skype.com.<br>
All terminals 105, 106 and 107 of the corporate communication network are preferably involved in the storage of the peer-to-peer databank. Alternatively, it is also possible for only some of the terminals to store data of the peer-to-peer databank, and/or for the device NAT to also be involved in the storage of the peer-to-peer databank. Irrespective of whether they are involved in the storage of the peer-to-peer databank, the terminals can both access the peer-to-peer databank, that is to say input or modify information in the peer-to-peer databank, and read out or query information from the peer-to-peer databank.<br>
The peer-to-peer databank is stored in a redundant manner, that is to say in the event of a temporary or complete failure of a peer-to-peer servant, i.e. a peer involved in the storage, the information stored by said peer is not lost because it is also stored by one or more other peer-to-peer servants. The peer-to-peer<br>
method thus makes reliable and fast location of all information in the peer-to-peer databank possible at all times.<br>
A terminal performs a registration with the server SIP PROVIDER for each external call number of the corporate communication network to be used for communicating with the server SIP PROVIDER, that is to say for each call number at which the terminals of the corporate communication network are to be addressable by external communication partners connected to the server SIP PROVIDER. The message REGISTER described in Figure 2 may be used for this purpose. Since as a rule fewer external call numbers are available than terminals, not every terminal performs a registration. The external call numbers in combination with in each case an external IP address of the corporate communication network are thus known to the server SIP PROVIDER.<br>
The following procedure is possible with respect to the external IP addresses which are used by the terminals and are notified to the server SIP PROVIDER with the registration messages: an external IP address of the corporate communication network is used. Each of the terminals uses said external IP address in combination with a particular port number. By using different port numbers for the different terminals, the device NAT knows to which terminal an IP message addressed to the external IP address in combination with a port number is to be forwarded. In this way, every terminal can be addressed by an external communication partner using the external IP address in combination with the terminal-specific port number without requiring address conversion by the device NAT.<br>
Each terminal determines the combination of external IP address of the corporate communication network and port number it is to use. This may be accomplished for example by sending a query to the server STUN using the known STUN (Simple Traversal of User Datagram Protocol through NAT) mechanism. The combination of external IP address and port number thus determined is input by<br>
each terminal into the peer-to-peer databank, so that it is possible to obtain for each terminal from the peer-to-peer databank the information specifying how it is to be addressed externally for IP data. The IP addresses used by a terminal may differ for different applications, e.g. for SIP signaling and RTP payload (RTP: Real Time Protocol). This means that several combinations of external IP address of the corporate communication network and port number may be stored in the peer-to-peer databank for each terminal.<br>
Each terminal that has registered with the server SIP PROVIDER inputs all information required for placing an outgoing call from the respective external call number for which the registration was performed into the peer-to-peer databank. This relates to the following values:<br>
•	external  call  number  of the  corporate  communication<br>
network;<br>
•	external IP address of the corporate communication network<br>
in combination with the port number of the respective<br>
terminal that was used for registration in connection with the<br>
external call number;<br>
•	name or customer identifier and password for logging onto<br>
the server SIP PROVIDER;<br>
•	SIP address comprising a subscriber identifier assigned by<br>
the server SIP PROVIDER or call number and the SIP<br>
domain of the server SIP PROVIDER.<br>
The peer-to-peer databank thus contains all information that any terminal requires to place an outgoing call from a call number of the corporate communication network to the server SIP PROVIDER, if a terminal intends to set up an outgoing connection, the terminal inputs the call number of the desired external communication partner into the peer-to-peer databank or, respectively, queries the values required for setting up a connection to said external communication partner, with specification of the call number of the desired<br>
external communication partner. In response, the terminal receives the above-mentioned values, i.e. an external call number of the corporate communication network, the external IP address of the corporate communication network in combination with a port number that was used for registration in connection with the external call number, name and password, and the SIP address. Said values are then used by the terminal to set up a communications connection to the server SIP PROVIDER. The device NAT performs here solely a forwarding of the messages between the respective terminal and the internet INTERNET.<br>
Figure 3 shows a first sequence of the method according to the invention in relation to incoming calls. It is assumed that the terminal 107 has registered under the external IP address IP-ADDRESS of the corporate communication network in combination with its port number PORT 107 with the server SIP PROVIDER under the call number CALL NUMBER. To set up a connection to the call number CALL NUMBER, the server SIP PROVIDER sends the message INVITE to the device NAT, with specification of the external IP address IP-ADDRESS of the corporate communication network in combination with the port number PORT 107 of the terminal 107 and the call number CALL NUMBER. Since the port number used by the terminal 107 is known to the device NAT, said device NAT forwards the message INVITE to the terminal 107.<br>
The terminal 107 intends to accept the call and responds with the messages TRYING, RINGING and OK, using for this purpose the external IP address IP-ADDRESS of the corporate communication network in combination with the port number PORT 107 of the terminal 107. The device NAT forwards the messages TRYING, RINGING and OK to the server SIP PROVIDER without processing. Following reception of the messages TRYING, RINGING and OK by the server SIP PROVIDER, VoIP data PAYLOAD is exchanged between the server SIP PROVIDER and the terminal 107, with the VoIP data PAYLOAD being forwarded transparently by the device NAT.<br>
According to the situation set out with reference to Figure 3, the terminal 107 which previously registered with the server SIP PROVIDER for the call number CALL NUMBER accepts the call for the call number CALL NUMBER. By using the peer-to-peer databank it is alternatively possible for a terminal other than the one that performed the registration to accept the call for the call number CALL NUMBER, as illustrated in Figures 4 and 5. It is assumed in both cases that the terminal 107 has registered with the server SIP PROVIDER under the call number CALL NUMBER.<br>
The terminal 106 is interested in incoming calls for the call number CALL NUMBER although it has not registered with the server SIP PROVIDER under the call number CALL NUMBER and, according to the first step in Figure 4, informs the peer-to-peer databank P2P of this with the message SUBSCRIBE CALL NUMBER. This information about the subscription of the terminal 106 for incoming calls to the call number CALL NUMBER is stored in the peer-to-peer databank P2P so that the terminal 106 can be informed in the event of an incoming call for the call number CALL NUMBER. To establish communication with the terminal having the call number CALL NUMBER, the server SIP PROVIDER sends the message INVITE to the external IP address IP-ADDRESS of the corporate communication network and the port number PORT 107 of the terminal 107. The terminal receives the message INVITE of the server SIP PROVIDER by means of forwarding by the device NAT and informs the peer-to-peer databank P2P with the message INCOMING CALL FOR CALL NUMBER that a call is arriving for the call number CALL NUMBER. The terminal 107 also answers the server SIP PROVIDER with the message TRYING, which is forwarded by the device NAT.<br>
The terminal 106 receives the message NOTIFY which is automatically generated by the peer-to-peer databank P2P to notify that a call for the call number CALL NUMBER is arriving. The message NOTIFY also indicates to the terminal 106 that the terminal 107 is registered with respect to calls for the call<br>
number CALL NUMBER, so that the terminal 106 can inform the terminal 107 with the message 106 WANTS TO ANSWER that it wishes to accept the incoming call for the call number CALL NUMBER. Alternatively, the terminal 106 can also inform the peer-to-peer databank P2P that it wishes to accept the incoming call for the call number CALL NUMBER, whereupon the peer-to-peer databank P2P notifies the terminal 107 of this.<br>
Once the terminal 107 knows that the terminal 106 intends to accept the call, it queries the peer-to-peer databank P2P with the message SEARCH IP-ADDRESS of 106 for the IP address used by the terminal 106 and receives as the query result the external IP address IP-ADDRESS of the corporate communication network and the port number PORT 106 of the terminal 106. The terminal 107 sends the messages RINGING and OK to the server SIP PROVIDER, with the latter indicating the IP address IP-ADDRESS used by the terminal 106 and the port number PORT 106 of the terminal 106. Following reception of the message OK by the server SIP PROVIDER, VoIP data PAYLOAD is exchanged between the server SIP PROVIDER and the terminal 106, with the server SIP PROVIDER addressing the terminal 106 using the IP address IP-ADDRESS and the port number PORT 106 of the terminal 106.<br>
As an alternative to the procedure according to Figure 4, the described method following reception of the message NOTIFY by the terminal 106 may also proceed as illustrated in Figure 5. If it wishes to accept the incoming call for the call number CALL NUMBER, the terminal 106 sends the message INVITE WITH REPLACE to the server SIP PROVIDER, specifying the external IP address IP-ADDRESS and its port number PORT 106. The terminal 106 obtains the IP address of the server SIP PROVIDER required for this purpose from the message NOTIFY. The message INVITE WITH REPLACE indicates to the server SIP PROVIDER that the external IP address IP-ADDRESS and the port number PORT 106 is to be used for the following message transmissions and not the external IP address IP-ADDRESS and the port number PORT 107. The server<br>
SIP PROVIDER then sends the message INVITE to the external IP address IP-ADDRESS and the port number PORT 106. The terminal 106 responds with the messages TRYING, RINGING and OK, with the latter specifying the external IP address IP-ADDRESS and the port number PORT 106 of the terminal 106. Following this, VoIP data is exchanged between the server SIP PROVIDER and the terminal 106, with the server SIP PROVIDER addressing the terminal 106 using the IP address IP-ADDRESS and the port number PORT 106 of the terminal 106.<br>
Alternatively to the message NOTIFY being sent by the peer-to-peer databank P2P, the message NOTIFY can also be sent by the terminal 107 to the terminal(s) subscribed for the call number CALL NUMBER. To address the subscribed terminals, the terminal 107 queries the peer-to-peer databank P2P for the IP addresses used by said terminals.<br>
According to the procedure described, it is possible for terminals that have not registered for the call number CALL NUMBER to accept incoming calls for the call number CALL NUMBER. For this purpose the peer-to-peer databank P2P stores which terminal(s) are potentially interested in incoming calls for the call number CALL NUMBER, that is to say which terminals are subscribed for the call number CALL NUMBER. If several terminals have signaled an interest in calls for the call number CALL NUMBER to the peer-to-peer databank P2P using a message SUBSCRIBE CALL NUMBER, in the event of an incoming call for the call number CALL NUMBER, the peer-to-peer databank P2P sends a message NOTIFY to each of said terminals. The terminal that responds first to the message NOTIFY can accept the call. If the terminal that registered with the server SIP PROVIDER under the call number CALL NUMBER intends to accept the incoming call for the call number CALL NUMBER, said terminal does not send a message INCOMING CALL FOR CALL NUMBER to the databank P2P.<br>
The invention confers the advantage that no central device is required to connect the terminals of the corporate communication network to the external server SIP PROVIDER by means of registration with the server SIP PROVIDER and processing of the messages from both sides. Rather, according to the invention the device NAT serves only for the transparent forwarding of messages between the terminals and the server SIP PROVIDER. As a result, the requirements with respect to the capabilities of the device at the boundary between the corporate communication network and the internet INTERNET are reduced. This reduction is especially advantageous in distributed networks in which all nodes are of the same type, and consequently all nodes must be able to function as the node at the boundary. In this case, although at any one time only one of the nodes would assume the function of the device at the gateway from the corporate communication network to the external system, the other nodes must nevertheless be equipped to perform this function.<br>
Moreover, the use of the invention increases the fail-safety of the corporate communication, network with respect to communication with external communication partners. This is because the availability of the distributed peer-to-peer databank is greater than that of a central databank, since the entire network is affected if a central databank fails, whereas by virtue of the redundant peer-to-peer storage method, the use of the distributed databank is not restricted if a device which stores only part of the distributed databank fails.<br>
Since the device NAT does not perform any functions, both with respect to signaling and to payload data, during the set-up of communication connections between terminals of the corporate communication network and an external system other than the transparent forwarding of messages, the device NAT can be dispensed with. This applies both to incoming and to outgoing calls. The transparent forwarding of messages function can be assumed by one of the terminals.<br><br>
Although the invention was described with reference to the SIP protocol, it is not limited to the use of SIP. Other protocols may also be used within the scope of the invention, such as H.323 for example.<br><br><br><br><br>
We Claim:-<br>
1.	A method for operating a communication network comprising a plurality of<br>
nodes (105, 106, 107), in which a databank (P2P) is stored in a shared manner<br>
among nodes (105, 106, 107), in order to establish a communication initiated by<br>
a first node (106) with a communication partner (SIP PROVIDER) of an external<br>
communication   system,   said  first  node  queries  the  databank  (P2P)  for<br>
identification information (IP-ADDRESS + PORT 107, CALL NUMBER) for the<br>
identification and/or addressing of the first node (106) by the communication<br>
partner (SIP PROVIDER).<br>
2.	The      method      as      claimed      in      claim       1,       in      which<br>
the identification information (IP-ADDRESS + PORT 107, CALL NUMBER) is<br>
previously sent to the communication partner (SIP PROVIDER) by a second<br>
node (107) and is input into the databank (P2P).<br>
3.	The method as claimed in claim 2, in which the second node (107) sends<br>
the identification information (IP-ADDRESS + PORT 107, CALL NUMBER) to the<br>
communication partner (SIP PROVIDER) as part of a registration.<br>
4.	A method for operating a communication network comprising a plurality of<br>
nodes (105, 106, 107), in which a databank (P2P) is stored in a shared manner<br>
among nodes (105, 106, 107), in the case of an establishment of communication<br>
with a first node (107) initiated by a communication partner (SIP PROVIDER) of<br>
an external communication system, using the databank (P2P) a second node<br>
(106) is notified about the establishment of communication initiated by the<br>
communication    partner   (SIP    PROVIDER),    and    the   establishment   of<br>
communication is then continued between the second node (106) and the<br>
communication partner (SIP PROVIDER).<br>
5.	The      method      as      claimed      in      claim      4,      in      which,<br>
prior to the establishment of communication initiated by the communication<br>
partner (SIP PROVIDER), the first node (107) sends identification information<br>
(CALL NUMBER) to the communication partner (SIP PROVIDER), and it is<br>
stored in the databank (P2P) that the second node (106) should be notified in the<br>
case  of  an  establishment  of  communication  which   is   initiated  by  the<br>
communication partner (SIP PROVIDER) and which uses the identification<br>
information (CALL NUMBER) for addressing.<br>
6.	The    method     as    claimed     in    claim     4    or    5,     in    which<br>
the first node (107) notifies the communication partner (SIP PROVIDER) that the<br>
establishment of communication should be continued with the second node<br>
(106), or the second node (106) notifies the communication partner (SIP<br>
PROVIDER) that the establishment of communication should be continued with<br>
the second node (106).<br>
7.	The method as claimed in one of claims 1 to 6, in which the nodes (105,<br>
106, 107) of the communication system have equal access to the databank<br>
(P2P).<br>
8.	The method as claimed in claim 7, in which the databank (P2P) is a peer-<br>
to-peer databank, and the databank (P2P) is accessed using a peer-to-peer<br>
method.<br>
9.	The  method  as claimed  in  one  of claims   1   to  8,   in which the<br>
communication is established using SIP.<br>
10.	The  method  as claimed  in  one  of claims   1   to  9,   in which the<br>
communication is a VoIP communication.<br>
11.	A     node     (106)     for     a     communication      network,      having<br>
means for participating in the storage of a databank (P2P) stored in a shared<br>
manner among a plurality of nodes (105, 106, 107) of the communication<br>
network,   means for initiating  an establishment of communication  with  a<br>
communication partner (SIP PROVIDER) of an external communication system,<br>
means for querying the databank (P2P) for identification information (IP-<br>
ADDRESS, CALL NUMBER) for the identification and/or addressing of the node<br>
(106) by the communication partner (SIP PROVIDER) and for using the<br>
identification information (IP-ADDRESS + PORT 107, CALL NUMBER) during<br>
the establishment of communication.<br>
12.	A      node      (106)     for     a      communication      network,      having<br>
means for participating in the storage of a databank (P2P) stored in a shared<br>
manner among a plurality of nodes (105, 106, 107) of the communication<br>
network,   means  for  receiving   a   notification  about  an   establishment  of<br>
communication with another node (107) of the communication network initiated<br>
by a communication partner (SIP PROVIDER) of an external communication<br>
system from the other node (107) or from the databank (P2P), means for<br>
continuing the establishment of communication with the communication partner<br>
(SIP PROVIDER) following the notification.<br>
13.	A  method  for  operating  a  communication  network  substantially  as<br>
hereinbefore described with reference to the accompanying drawings 1, 3 to 5.<br>
14.	A node (106) for a communication network substantially as hereinbefore<br>
described with reference to the accompanying drawings 1, 3 to 5.<br></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LUFic3RyYWN0LSgxMy0wMi0yMDEzKS5wZGY=" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-Abstract-(13-02-2013).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LWFic3RyYWN0LnBkZg==" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LUNsYWltcy0oMDEtMTAtMjAxNCkucGRm" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-Claims-(01-10-2014).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LUNsYWltcy0oMTMtMDItMjAxMykucGRm" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-Claims-(13-02-2013).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LWNsYWltcy5wZGY=" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-claims.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LUNvcnJlc3BvbmRlbmNlIE90aGVycy0oMDEtMTAtMjAxNCkucGRm" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-Correspondence Others-(01-10-2014).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LUNvcnJlc3BvbmRlbmNlIE90aGVycy0oMTEtMDctMjAxMikucGRm" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-Correspondence Others-(11-07-2012).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LUNvcnJlc3BvbmRlbmNlIE90aGVycy0oMTMtMDItMjAxMykucGRm" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-Correspondence Others-(13-02-2013).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LUNvcnJlc3BvbmRlbmNlIE90aGVycy0oMjMtMDYtMjAxNCkucGRm" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-Correspondence Others-(23-06-2014).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LUNvcnJlc3BvbmRlbmNlLU90aGVycy0oMDYtMDgtMjAxNCkucGRm" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-Correspondence-Others-(06-08-2014).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LWNvcnJlc3BvbmRlbmNlLW90aGVycy0xLnBkZg==" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-correspondence-others-1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LWNvcnJlc3BvbmRlbmNlLW90aGVyc2MucGRm" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-correspondence-othersc.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LWRlc2NyaXB0aW9uIChjb21wbGV0ZSkucGRm" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-description (complete).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LWRyYXdpbmdzLnBkZg==" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LWZvcm0tMS5wZGY=" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-form-1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LWZvcm0tMTgucGRm" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-form-18.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LUZvcm0tMi0oMTMtMDItMjAxMykucGRm" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-Form-2-(13-02-2013).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LWZvcm0tMi5wZGY=" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-form-2.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LUZvcm0tMy0oMTMtMDItMjAxMykucGRm" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-Form-3-(13-02-2013).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LUZvcm0tMy0oMjMtMDYtMjAxNCkucGRm" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-Form-3-(23-06-2014).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LWZvcm0tMy5wZGY=" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-form-3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LUZvcm0tNS0oMTMtMDItMjAxMykucGRm" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-Form-5-(13-02-2013).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LWZvcm0tNS5wZGY=" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-form-5.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LUdQQS0oMTEtMDctMjAxMikucGRm" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-GPA-(11-07-2012).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=NjE3My1kZWxucC0yMDA3LXBjdC0zMDQucGRm" target="_blank" style="word-wrap:break-word;">6173-delnp-2007-pct-304.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=YWJzdHJhY3QuanBn" target="_blank" style="word-wrap:break-word;">abstract.jpg</a></p>
		<br>
		<div class="pull-left">
			<a href="263273-blending-multiple-display-layers.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="263275-an-active-ternary-catalyst-system-for-dimerization-of-ethylene-to-1-butene.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>263274</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>6173/DELNP/2007</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>43/2014</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>24-Oct-2014</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>17-Oct-2014</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>08-Aug-2007</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>SIEMENS ENTERPRISE COMMUNICATION GMBH &amp; CO. KG</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>HOFMANNSTR. 51, 81379 MUNCHEN, GERMANY.</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>NEUHAUS; RALF</td>
											<td>FRIEDRICH-WILHELM-WEBER-STR. 22M, 44534 LUNEN, GERMANY.</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>H04M 3/54</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/EP2005/055011</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2005-10-05</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>10 2005 008 590.3</td>
									<td>2005-02-24</td>
								    <td>Germany</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/263274-method-for-recording-a-voip-communication-using-a-peer-to-peer-databank by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 01:38:08 GMT -->
</html>
