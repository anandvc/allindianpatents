<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/257582-a-drive-apparatus-for-performing-a-sequential-recording-for-a-write-once-recording-medium by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 08:01:58 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 257582:A DRIVE APPARATUS FOR PERFORMING A SEQUENTIAL RECORDING FOR A WRITE-ONCE RECORDING MEDIUM</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">A DRIVE APPARATUS FOR PERFORMING A SEQUENTIAL RECORDING FOR A WRITE-ONCE RECORDING MEDIUM</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>A drive apparatus of the present invention includes a recording/repoduction section and a drive control section 5) The drive control section performs a process including: determining whether or not replacement management information including a replacement physical address is found in the replacement management information list, the replacement physical address matching the physical address 10)corresponding to the logical address included in the recording instruction, when the replacement management information is not found, as a first time pseudo-overwrite recording for a location indicated by the physical address corresponding to the logical address included in the 15) recording instruction, performing a process; and when the replacement management information is found, as a second time or more pseudo-overwrite recording for a location indicated by the physical address corresponding to the logical address included inthe recording instruction, 20)performing a process.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>`FORM 2<br>
THE PATENTS ACT, 1970<br>
(39 of 1970)<br>
&amp;<br>
THE PATENTS RULES, 2003<br>
COMPLETE SPECIFICATION<br>
(See section 10, rule 13)<br>
“DRIVE DEVICE”<br>
MATSUSHITA ELECTRIC INDUSTRIAL CO., LTD.<br>
a Japanese company of 1006, Oaza Kadoma, Kadoma-shi, Osaka 571-8501 Japan.<br>
The following specification particularly describes the invention and the manner in which it is to be performed.<br><br>
P38153   -2-<br>
	  DESCRIPTION<br>
                         DRIVE DEVICE<br>
5	TECHNICAL FIELD<br>
The present invention relates to a drive apparatus for recording data in an Information recording medium and for reproducing the data recorded in the information<br>
10  	 recording medium.<br>
BACKGROUND ART<br>
Recently, various types of information recording <br>
15	mediums are used to record digital data. For example, a rewritable optical disc or a write-once optical disc is used. In the rewritable optical disc, data can be rewritten repeatedly at the same location. In the write-once optical disc, data can be written only once at the same location, <br>
20    while it is inexpensive.<br>
As an example of rewritable optical discs, there are DVD-RAM discs and BD-RE (Blu-ray Disc Rewritable) discs and the like. <br>
25<br>
As an example of write-once optical discs, there are DVD-R discs and BD-R (Blu-ray Disc Recordable) discs and the like.<br>
30	In the rewritable optical disc,  a defective<br>
management mechanism is introduced to improve the reliability of data recorded on the disc.<br><br>
P38153 3<br>
The defective management mechanism includes a slipping replacement algorithm and a linear replacement<br>
algorithm.<br>
5	The  slipping replacement algorithm is mainly<br>
performed when the disc is formatted. In the slipping replacement algorithm, all of the ECC clusters in the user data area are checked for detecting a defective cluster. When the defective cluster is found, the location of the<br>
10	 defective cluster is registered to a primary defect list (hereinafter, "PDL") . The logical cluster corresponding to the defective cluster is shifted such that the logical cluster corresponds to a physical cluster which is next to the physical cluster corresponding to the defective cluster.<br>
15<br>
Thus, when the user data is recorded, it is possible to avoid recording the user data in the defective cluster registered in the PDL. As a result, it is possible to improve the reliability of the data recording.<br>
20<br>
The linear replacement algorithm is performed when a user data is recorded.<br>
After the user data is recorded, a verify process <br>
25	is performed. In the verify process, the recording result is verified. If the data recording has failed, the ECC cluster including the recording location is determined as a defective cluster. Then, the location of the defective cluster is managed by a secondary defect list (hereinafter, <br>
30     "SDL").<br>
The user data is recorded in the spare area which is located at the inner-most periphery or the outer-most<br><br>
P38153<br>
4<br>
periphery on the disc, instead of the defective cluster in the user data area.<br>
The verify process described above is performed<br>
5   during the replacement recording.  If the data recording has<br>
     succeeded, the location at which the user data is recorded<br>
    is determined. An SDL entry which correlates the location<br>
 of the defective cluster with an ECC cluster for replacement is generated.  Then, the SDL entry is registered to the SDL.<br>
10<br>
The SDL entry is provided for each of the all ECC clusters included in the spare area. It is possible to manage whether or not each ECC cluster in the spare area is available as a replacement cluster.  If the ECC cluster is an unrecorded<br>
15	 area in the spare area, then the ECC cluster is available as a replacement cluster. If the ECC cluster is a recorded area in the spare area, then the ECC cluster is not available as a replacement cluster. The unrecorded area in the spare area is also called a spare cluster.<br>
20<br>
In the reproduction process, by referring to the PDL and the SDL, if necessary, the data is reproduced from the replacement cluster.<br>
2 5	The PDL and the SDL are recorded in a defect management<br>
area (hereinafter, "DMA") provided in the lead-in area on the disc. In the DMA, information indicating the size of the spare area and the like is further recorded.<br>
30	In the rewritable optical disc, the information on<br>
the defective management is updated by rewriting the DMA.<br>
In the write-once optical disc, it is possible to<br><br>
P38153<br>
5<br>
introduce a defective management mechanism, for example, as described in the specification of U.S. laid-open patent<br>
publication No. 2004/0076096 (hereinafter, "reference 1") .<br>
5		FIG. 3 of the reference 1 shows a data structure of<br>
the disc. In the disc of the reference 1, the DMA is provided in the lead-in area and the lead-out area.<br>
Further, a  temporary  defect management  area <br>
10   hereinafter, "TDMA") is provided in the lead-in area and the lead-out area.<br>
In the write-once optical disc, the information on the defective management is updated by additionally recording<br>
15    defective information in the TDMA each time the defective information is updated.<br>
When the disc is closed or finalized, the data in the latest TDMA is recorded in the DMA.<br>
 20<br>
In the TDMA, temporary defect management information (hereinafter, "TDDS") and temporary defect information (hereinafter, "TDFL") are recorded.<br>
25	FIG. 5B of the reference 1 shows a data structure<br>
of the TDDS. The TDDS includes pointer information to the TDFL. The TDFL can be recorded in the TDMA a plurality of times. The pointer information is recorded for the respective TDFLs.<br>
30<br>
In the TDDS, a last recorded address on the write-once optical disc is recorded. As shown in FIG. 5B of the reference 1, a single write-once optical disc can have a plurality<br><br>
P38153<br>
6<br>
of last recorded addresses.<br>
In the TDDS, a last recorded replacement address on<br>
the write-once optical disc is recorded. As shown in FIG.<br>
5    5B of the reference 1, a single write-once optical disc can have a plurality of last recorded replacement addresses.<br>
FIG. 6 of the reference 1 shows a data structure of the TDFL. <br>
10		The TDFL includes information regarding defect #1, #2, ... and the like.<br>
The information regarding defect includes status <br>
15   information, a pointer to the defective cluster and a pointer to the replacement cluster.<br>
The information regarding defect has a data structure<br>
similar to the SDL entry included in the SDL. The information<br>
20   regarding defect performs a function similar to the SDL entry.<br>
Figures 33A and 33B show a method for updating the TDFL disclosed in FIG. 9A and FIG. 9B of the reference 1.<br>
25	Figure 33A shows a data structure of the TDFL #0.<br>
The TDFL #0 includes the information regarding defect #1, #2 and #3 corresponding to the defects #1, #2 and #3.<br>
After the TDFL #0 is recorded, it is assumed that <br>
30   the defects #4 and #5 are detected as a result of performing a new data recording. In this case, the TDFL #1 shown in Figure 33B is recorded on the write-once optical disc.<br><br>
P38153 7<br>
The TDFL #1 is generated by maintaining the information regarding defect #1, #2 and #3 included in the TDFL #0 and adding the information regarding defect #4 and #5 corresponding to the defects #4 and #5. <br>
5<br>
FIG. 10 of the reference 1 shows a data structure of the information regarding defect.<br>
The information regarding defect includes status <br>
10         information.  The status information includes information indicating that the defective area is a continuous defect block or a single defect block.<br>
The information regarding defect further includes <br>
15    	a pointer to the defective area (the location of the defective area on the disc).<br>
The information regarding defect further includes a pointer to the replacement area corresponding to the<br>
 20   	defective area.<br>
When the defective area is a continuous defect block, the status information indicates that a pointer to the defective area designates a start location of the continuous <br>
25	defect block or an end location of the continuous defect block. In this case, the status information further indicates that a pointer to the replacement area designates<br>
a start location of the replacement block or an end location of the replacement block. <br>
30		<br>
By using these data structures, the defective management mechanism can be implemented in the write-once optical disc.<br><br>
P38153<br>
Further, by using the defective management mechanism described above, it is possible to implement a pseudo-overwrite recording for the write-once optical disc. <br>
5<br>
With reference to Figures 31 and 32, the pseudo-overwrite recording for the write-once optical disc will be described.<br>
10	As described above, in the defective management<br>
mechanism, by using the replacement information such as the information regarding defect or the SDL entry, the physical address at which the data is actually recorded is mapped to another location which is previously allocated, without<br>
15    changing the logical address at which the data is recorded.<br>
When it is instructed to record data at a logical address at which the data has already been recorded on the write-once optical disc, the data is recorded in a sector<br>
20 	located at a physical address which is different from the physical address corresponding to the logical address, and the replacement information is updated to maintain the logical address. According to this process, it is possible to overwrite data in a pseudo manner. Hereinafter, such data<br>
25    recording is referred to as a pseudo-overwrite recording.<br>
Figure 31 shows a data structure after directories<br>
and files are recorded in the information recording medium<br>
1 which is a write-once optical disc.  In the state shown<br>
30   in Figure 31, it is assumed that the pseudo-overwrite<br>
recording has not been performed.<br>
In the write-once optical disc, the user data area<br><br>
P38153<br>
9<br>
on the disc is managed as a unit of track or session.<br>
In Figure 31, the user data recorded in the user data  area is managed by a file system. A space managed by the <br>
5   file system is referred to as a volume space 2.<br>
In the description below, it is assumed that information recorded in the information recording medium 1 as the volume/file structure of the file system (e.g.<br>
10  descriptor, pointer, metadata partition and metadata file) has a data structure defined in the ISO/IEC 13346 standard or the UDF (Universal Disc Format) specification, unless it is explicitly described on the contrary.<br>
 15	In Figure 31, a volume structure area 3 and a physical<br>
partition 4 are recorded in the volume space 2.<br>
In the physical partition 4 , metadata partitions 5a, 5b   defined by version 2.5 of the UDF specification are <br>
20  included.<br>
In the physical partition 4, metadata file 6a and metadata mirror file 6b which is the duplication of the metadata file 6a are recorded. <br>
25<br>
FE (metadata file) 7a and FE (metadata mirror file)<br>
   7b, each being a file entry (FE) indicating the recording<br>
   location in the physical partition 4 , are recorded. Further,<br>
     datafile (File-a) 8 and datafile (File-b) 9 are also recorded.<br>
30<br>
All information on the file structure such as a file entry and directory file is allocated in the metadata partition, i.e. the metadata file.<br><br>
P38153<br>
10	<br>
In the data structure defined in the UDF specification, the respective recording locations of the metadata partition 5a and the file set descriptor (FSD) 12 are recorded in the <br>
5    volume structure area 3.<br>
By retrieving the file structure from the ROOT directory using the FSD 12 as a start point, it is possible to access data file (File-a) 8, for example. <br>
10		Next, in the state shown in Figure 31, it is assumed that the pseudo-overwrite recording for data file (File-c) is performed.<br>
15	Figure 32 shows a data structure after the<br>
pseudo-overwrite recording for data file (File-c) is completed.<br>
Herein, it is assumed that the data file (File-c) <br>
20  is recorded immediately under the ROOT directory on the   information recording medium 1.<br>
During recording the data file (File-c) , the required<br>
information on the file structure is updated or generated<br>
25   in order to add the data file (File-c).  Specifically, FE<br>
(ROOT) 13 is updated and FE (File-c) 14 is generated, for<br>
example.<br>
The data file (File-c) 15 is recorded in an unrecorded <br>
30    area shown in Figure 31.  Figure 32 shows a state at this time.<br>
When the FE (File-c) 14 is recorded, the FE (File-c)<br><br>
P38153<br>
- &amp;4  - II —<br>
14 is recorded in the unrecorded area 11a in the metadata partition 5a (i.e. the metadata file 6a).<br>
Next, the pseudo-overwrite recording is performed <br>
5    as if the FE (ROOT) 16 would be overwritten on the FE (ROOT) 13.<br>
In this case, as shown in Figure 32, the data for the FE (ROOT) 16 is recorded in the spare area 17. <br>
10		Further, the replacement information included in the  disc management information 2 is updated such that the FE (ROOT) 13 is mapped to the FE (ROOT) 16.<br>
15	After performing the recording process for files,<br>
a reproduction operation for reproducing the data file (File-c) 15 will be described.<br>
The location information of FE (metadata file) 7a <br>
20   and the location information of FSD 12 are obtained from<br>
the volume structure area 3 of the information recording medium 1.<br>
Next, the file structure is reproduced. In order <br>
25    to reproduce the file structure, the FSD 12 is reproduced based on the location information of FE (metadata file) 7a and the location information of FSD 12.<br>
The location information of the FE (ROOT) 13 is <br>
30   obtained as a logical address from the reproduced FSD 12.<br>
The FE (ROOT) 13 is reproduced based on the location information of the FE (ROOT) 13.<br><br>
P38153 12<br>
By referring to the replacement information, the FE (ROOT) 16, to which the FE (ROOT) 13 is mapped, is reproduced.<br>
5	The FE (ROOT) 16 includes the latest ROOT directory<br>
file. Accordingly, the FE (ROOT) 16 includes the location information of the FE (File-c) 14.<br>
 The data file (File-c) 15 is reproduced using the<br>
10    location information of the data file (File-c) 15 which   is obtained from the FE (File-c) 14.<br>
Thus, in the write-once optical disc, it is possible to perform a pseudo-overwrite recording using the defective <br>
15    management mechanism.<br>
However, according to the pseudo-overwrite recording for the write-once optical disc described above, there is a problem that if there is no unrecorded area in <br>
20 	the spare area, it is not possible to further perform the data recording even if there is an unrecorded area in the user data area. This is because it is not possible to update file system information.<br>
25	In particular, in the write-once optical disc, the<br>
size of the spare area is fixed at the time when the disc is formatted (initialized), unlike the rewritable optical disc in which the size of the spare area can be extended if required.<br>
30<br>
It is difficult to determine the size of the spare area appropriately in view of the pseudo-overwrite recording which may be performed in the future.<br><br>
P38153<br>
If the size of the spare area is determined as a relatively large size, the size of the user data area must be reduced. If the size of the spare area is determined as <br>
5 	a relatively small size, a problem may be caused. The problem is that it is not possible to further perform the data recording even if there is an unrecorded area in the user data area. In either case, it is not possible to effectively utilize the user data area of the write-once optical disc. <br>
10				The present invention is intended to solve the problem described above. One of the purposes of the present invention is to provide a drive apparatus capable of utilizing the user data area without any loss in the pseudo-overwrite<br>
15   recording for the write-once optical disc.<br>
According to the present invention, it is possible to provide a drive apparatus capable of utilizing the user data area without any loss in the pseudo-overwrite recording <br>
20  for the write-once optical disc.<br>
DISCLOSURE OF THE INVENTION<br>
According to one aspect of the invention, a drive <br>
25  	apparatus is provided for performing a sequential recording for a write-once recording medium, wherein the write-once recording medium includes a data area and a disc management information area, disc management information for managing the write-once recording medium is recorded in the disc <br>
30 management information area, a plurality of physical addresses are assigned to the data area, a plurality of logical addresses are assigned to the user data area, at least one sequential recording area is allocated to the user data area.<br><br>
P38153<br>
14<br>
the disc management information includes sequential recording area management information for managing the at least one sequential recording area, the sequential recording area management information includes a last recorded address,<br>
5 	the last recorded address being a physical address indicating a location at which data is last recorded in a sequential recording area, the disc management information includes replacement management information list including at least one replacement management information, the at least one<br>
10 	replacement management information maps a physical address indicating an original location in the user data area to another physical address indicating a replacement location, the drive apparatus including: a recording/reproduction section for performing a recording operation or a re-<br>
15 	production operation for the write-once recording medium; and a drive control section for controlling the recording/reproduction section, wherein the drive control section performs a process including: reading the disc management information from the disc management information<br>
20 	area; determining a primary logical address -physical address mapping indicating a corresponding relationship between the plurality of logical addresses and the plurality of physical addresses based on the disc management information; receiving a recording instruction including a logical address in-<br>
25 	dicating a location at which data is to be recorded; translating the logical address included in the recording instruction into a physical address in accordance with the primary logical address-physical address mapping; determining a sequential recording area of the at least one<br>
30 	sequential recording area based on the physical address corresponding to the logical address included in the recording instruction and the sequential recording area management information; determining a physical address<br><br>
P38153<br>
indicating a location at which data can be recorded    next in the determined sequential recording area as a next writable address , based on the last recorded address in the determined sequential recording area; comparing the physical address<br>
5 	corresponding to the logical address included in the recording instruction with the next writable address; when the physical address corresponding to the logical address included in the recording instruction is smaller than the next writable address, performing a process including:<br>
10 	controlling the recording/ reproduction section to record the data at a specific location in the user data area, the specific location being a location other than the location indicated by the physical address corresponding to the logical address included in the recording instruction;<br>
15 	determining whether or not replacement management information including a replacement physical address is found in the replacement management information list, the replacement physical address matching the physical address corresponding to the logical address included in the<br>
20 	recording instruction, when the replacement management information is not found, as a first time pseudo-overwrite recording for a location indicated by the physical address corresponding to the logical address included in the recording instruction, performing a process including:<br>
25	generating new replacement management information for mapping the physical address corresponding to the logical address included in the recording instruction to a physical address indicating the specific location, updating the replacement management information list by adding the new<br>
30 	replacement management information to the replacement management information list or when the replacement management information is found, as a second time or more pseudo-overwrite recording for a location indicated by the<br><br>
i<br><br>
P38153 16<br>
physical address corresponding to the logical address included in the recording instruction, performing a process including: updating the replacement management information list by changing a replacement address of the found re-<br>
5 	placement management information into a physical address indicating the specific location, generating new disc management information including the updated replacement management information list and the last recorded address updated by the recording of the data; and controlling the <br>
10	recording/reproduction section to record the new disc management information in the disc management information area.<br>
In one embodiment of the invention, the write-once <br>
15 	recording medium includes a plurality of ECC clusters, each of the plurality of ECC clusters includes a plurality of sectors, the plurality of physical addresses are assigned to the plurality of sectors, respectively, and the next writable address is a physical address for a first sector<br>
20	 included in an ECC cluster subsequent to an ECC including the last recorded address.<br>
BRIEF DESCRIPTION OF THE DRAWINGS<br>
2 5		Figure 1A is an illustrative diagram showing an<br>
appearance of information recording medium 100 according to an embodiment of the present invention.<br>
Figure 1B is an illustrative diagram showing an<br>
30   exemplary data structure of the information recording medium<br>
100 according to an embodiment of the present invention.<br>
Figure 1C is an illustrative diagram showing an<br><br>
P38153<br>
exemplary data structure of the user data area 108 shown in Figure 1B.<br>
Figure 2A is an illustrative diagram showing an <br>
5     exemplary data structure of the session management in  formation 200 according to an embodiment of the present invention.<br>
Figure 2B is an illustrative diagram showing an<br>
10    exemplary data structure of the track management information<br>
210 according to an embodiment of the present invention.<br>
Figure 2C is an illustrative diagram showing an exemplary data structure of the space bitmap management 15   information 220 according to an embodiment of the present invention.<br>
Figure 3 is an illustrative diagram showing an<br>
 exemplary data structure of the disc structure information<br>
20    1110 according to an embodiment of the present invention.<br>
Figure 4 is an illustrative diagram showing an exemplary data structure of the information recording medium 100b according to an embodiment of the present invention.<br>
25			Figure 5A is an illustrative diagram showing an exemplary data structure of the replacement management information list 1000 according to an embodiment of the present invention. 30<br>
Figure 5B is an illustrative diagram showing an exemplary data structure of the replacement management information 1010 according to an embodiment of the present<br><br>
P38153<br>
invention.<br>
Figure 6 is a block diagram showing an exemplary configuration of the information recording/reproduction <br>
5   	apparatus 300 according to an embodiment of the present invention.<br>
Figure 7 is an illustrative diagram showing an exemplary data structure of the information recording medium <br>
10     after the formatting process according to an embodiment of the present invention.<br>
Figure 8A is a flowchart showing a recording process according to an embodiment of the present invention. <br>
15			Figure 8B is a flowchart showing a RMW process according to an embodiment of the present invention.<br>
Figure 9 is an illustrative diagram showing an <br>
20  	exemplary data structure of the information recording medium after the recording process according to an embodiment of the present invention.<br>
Figure 10 is a flowchart showing a reproduction <br>
25    process according to an embodiment of the present invention.<br>
Figure 11 is an illustrative diagram showing an exemplary data structure of the replacement management information 1010B according to an embodiment of the present <br>
30   invention.<br>
Figure 12 is an illustrative diagram showing an exemplary data structure of the physical address space and<br><br>
P38153 19<br>
the logical address space according to an embodiment of the present invention.<br>
Figure 13A is an illustrative diagram showing a <br>
5   replacement recording according to an embodiment of the present invention.<br>
Figure 13B is an illustrative diagram showing a replacement management information according to an em-<br>
10   bodiment of the present invention.<br>
Figure 14A is an illustrative diagram showing a<br>
replacement recording according to an embodiment of the present invention.<br>
15<br>
Figure 14B is an illustrative diagram showing a replacement management information according to an embodiment of the present invention.<br>
20	Figure 15A is an illustrative diagram showing a<br>
replacement recording according to an embodiment of the present invention.<br>
Figure 15B is an illustrative diagram showing a <br>
25  replacement management information according to an em bodiment of the present invention.<br>
Figure 16A is an illustrative diagram showing a replacement recording according to an embodiment of the<br>
30   present invention.<br>
Figure 16B is an illustrative diagram showing a replacement management information according to an em-<br><br>
P38153<br>
20-<br>
bodiment of the present invention.<br>
Figure 17A is an illustrative diagram showing a replacement recording according to an embodiment of the<br>
5   	present invention.<br>
Figure 17B is an illustrative diagram showing a replacement management information according to an embodiment of the present invention.<br>
10<br>
Figure 18 is an illustrative diagram showing an exemplary data structure of the DFL entry 2010 which is an example of the replacement management information according to an embodiment of the present invention. <br>
15			Figure 19A is a flowchart showing a recording process according to an embodiment of the present invention.<br>
Figure 19B is a flowchart showing a recording process 20    according to an embodiment of the present invention.<br>
Figure 20A is an illustrative diagram showing a replacement recording according to an embodiment of the present invention. 25<br>
Figure 20B is an illustrative diagram showing a replacement management information according to an embodiment of the present invention.<br>
30	Figure 21A is an illustrative diagram showing a<br>
replacement recording according to an embodiment of the present invention.<br><br>
P38153<br>
21<br>
Figure 21B is an illustrative diagram showing a replacement management information according to an embodiment of the present invention.<br>
5	Figure 22A is an illustrative diagram showing a<br>
replacement recording according to an embodiment of the present invention.<br>
Figure 22B is an illustrative diagram showing a<br>
10   replacement management information according to an embodiment of the present invention.<br>
Figure 23A is an illustrative diagram showing a replacement recording according to an embodiment of the<br>
15  present invention.<br>
Figure 23B is an illustrative diagram showing a replacement management information according to an embodiment of the present invention. <br>
20		    Figure 24A is an illustrative diagram showing a replacement recording according to an embodiment of the present invention.<br>
 2 5	Figure 24B is an illustrative diagram showing a<br>
replacement management information according to an embodiment of the present invention.<br><br>
 Figure 25 is an illustrative diagram showing an <br>
30   exemplary data structure of the track management information according to an embodiment of the present invention.<br>
Figure 26A is an illustrative diagram showing a<br><br>
P38153<br>
22<br>
replacement recording according to an embodiment of the present invention.<br>
Figure 26B is an illustrative diagram showing a <br>
5     replacement management information according to an em  bodiment of the present invention.<br>
Figure 27 is an illustrative diagram showing a replacement recording according to an embodiment of the<br>
10   present invention.<br>
Figure 28 is an illustrative diagram showing a replacement recording according to an embodiment of the present invention. <br>
15		    Figure 29 is an illustrative diagram showing a replacement recording according to an embodiment of the present invention.<br>
20	Figure 30 is an illustrative diagram showing a<br>
replacement recording according to an embodiment of the present invention.<br>
Figure 31 is an illustrative diagram showing an<br>
25    exemplary data structure of the information recording medium according to the conventional technique.<br>
Figure 32 is an illustrative diagram showing an exemplary data structure of the information recording medium<br>
30   after the file recording process according to the conventional technique.<br>
Figure 33A is an illustrative diagram showing an<br><br>
P38153 23<br>
exemplary data structure of the TDFL according to the conventional technique.<br>
Figure 33B is an illustrative diagram showing an <br>
5   exemplary data structure of the TDFL according to the conventional technique.<br>
Figure 34 is an illustrative diagram showing an   exemplary data structure of disc structure information 1100<br>
10   according to an embodiment of the present invention.<br>
Figure 35A is an illustrative diagram showing an exemplary data structure of replacement recording control information list according to an embodiment of the present<br>
15    invention.<br>
Figure 35B is an illustrative diagram showing an<br>
exemplary data structure of track management information 6210 according to an embodiment of the present invention.<br>
20<br>
 Figure 36A is an illustrative diagram showing a replacement recording according to an embodiment of the present invention.<br>
25	Figure 37A is an illustrative diagram showing a<br>
replacement recording according to an embodiment of the present invention.<br>
      Figure 37B is an illustrative diagram showing <br>
30   replacement management information according to an embodiment of the present invention.<br>
 Figure 38A is an illustrative diagram showing a<br><br>
P38153<br>
replacement recording according to an embodiment of the present invention.<br>
Figure 39A is an illustrative diagram showing a <br>
5    replacement recording according to an embodiment of the   present invention.<br>
Figure 39B is an illustrative diagram showing<br>
replacement management information according to an em-<br>
10    bodiment of the present invention.<br>
Figure 40 is an illustrative diagram showing an exemplary data structure of the track management information according to an embodiment of the present invention. <br>
15<br>
Figure 41A is an illustrative diagram showing a replacement recording according to an embodiment of the present invention.<br>
20	Figure 42A is an illustrative diagram showing a<br>
replacement recording according to an embodiment of the present invention.<br>
Figure 42B is an illustrative diagram showing <br>
25    replacement management information according to an em bodiment of the present invention.<br>
Figure 43 is an illustrative diagram showing an exemplary data structure of track management information <br>
30   according to an embodiment of the present invention.<br>
Figure 44 is an illustrative diagram showing an exemplary data structure of track management information<br><br>
25<br><br>
P38153<br><br>
according to an embodiment of the present invention,<br><br>
10<br>
15<br>
20<br>
25<br><br><br>
100,	100b<br>
101	<br>
102,	102a<br>
103	<br>
103b,	,   103c<br>
104,	105<br>
104a,	, 105a<br>
106,	106a<br>
107,	107a<br>
108,	108a<br>
109	<br>
122	<br>
120,	121<br>
210	<br>
211	<br>
212	<br>
213	<br>
within track	(LRA)<br>
300	<br>
apparatus	<br>
301	<br>
302	<br>
303	<br>
304	<br>
310	<br>
311	<br><br>
information recording medium<br>
lead-in area<br>
data area<br>
lead-out area<br>
outer area<br>
disc management information area<br>
disc management information area<br>
inner spare area<br>
outer spare area<br>
user data area<br>
volume space<br>
unrecorded area<br>
LRA<br>
track management information<br>
session start information<br>
track start location information<br>
last recorded address information<br>
information   recording/reproduction<br>
system control section<br>
memory circuit<br>
I/O bus<br>
magnetic disc apparatus<br>
drive apparatus<br>
drive control section<br><br><br><br>
30<br><br>
BEST MODE FOR CARRYING OUT THE INVENTION<br><br>
P38153 26<br>
(Embodiment 1)<br>
1-1. Write-once recording medium<br>
5	Figure 1A shows an appearance of information<br>
recording medium 100 according to an embodiment of the present invention.<br>
A lead-in area 101 is located in an inner-most<br>
10   periphery of the information recording medium 100. A lead-out area 103 is located in an outer-most periphery of the information recording medium 100. A data area 102 is located between the lead-in area 101 and the lead-out area 103 of the information recording medium 100.<br>
15		<br>
In the lead-in area 101, reference information necessary for an optical pickup included in the recording/reproduction section 314 which will be described below to access the information recording medium 100,<br>
20	information for identifying from other recording media, and the like are recorded. In the lead-out area 103, similar information as those in the lead-in area 101 is recorded.<br>
A plurality of physical sectors are assigned to the<br>
25   lead-in area 101, the data area 102 and the lead-out area<br>
103.  Each physical sector is a minimum access unit. Each<br>
physical sector is identified by an address information such<br>
as a physical sector number (hereinafter, "PSN").<br>
30	The data recording/reproduction is performed for<br>
each ECC cluster (or each ECC block) including a plurality<br>
of physical sectors. An ECC cluster (or an ECC block) is a minimum unit for the data recording/reproduction.<br><br>
P38153<br>
27 <br>
Figure 1B shows a data structure of the information<br>
recording medium 100.  In Figure 1B, the lead-in area 101,<br>
the data area 102 and the lead-out area 103 are shown in<br>
5    a lateral arrangement, although they are actually  arranged<br>
in a concentric circular manner as shown in Figure 1A.<br>
The lead-in area 101 includes a disc management information area 104.  The lead-out area 103 includes a disc<br>
10 	management information area 105. Disc management information is recorded in each of the disc management information areas 104 and 105. The disc management information includes replacement management information, session management information, and space bitmap management<br>
15 	information. This information will be described below. The disc management information areas 104 and 105 are used as an area for updating the disc management information. The area for updating the disc management information is also referred to as a temporal disc management information area.<br>
20<br>
In a case where the present invention is applied to the BD-R specification, the term "disc management information area" in the present specification should be read as a "Disc Management Area (DMA)" , the term "temporal disc management<br>
25 	information area" in the present specification should be read as a "Temporal Disc Management Area (TDMA)", the term "disc management information" in the present specification should be read as a "Disc Management Structure (DMS)" and the term " temporal disc management information" in the<br>
30 	present specification should be read as a "Temporal Disc Management Structure (TDMS)".<br>
The data area 102 includes an inner spare area 106,<br><br>
P38153  -28-<br>
a user data area 108 and an outer spare area 107.<br>
The user data area 108 is an area used for recording a user data.<br>
5<br>
Figure 1C shows a data structure of the user data area 108.<br>
The user data area 108 includes a plurality of 10   sessions. Each session includes a plurality of tracks.<br>
Each track is a contiguous area on the information recording medium 100.  Each track is managed by track management information which will be described below. <br>
15<br>
In a case where the present invention is applied to the BD-R specification, the term "track" in the present specification should be read as a "Sequential Recording Range" (hereinafter, "SRR").<br>
 20<br>
Each session includes a plurality of tracks which are contiguously allocated on the information recording medium 100. Each session is managed by session management information which will be described below. <br>
25<br>
Figure 2A shows a data structure of the session management information 200 for managing the session. The session management information 200 is included in the disc management information. 30<br>
The session management information 200 includes header information 201 and a plurality of track management information.<br><br>
P38153 29<br>
The header information 201 includes general in<br>
formation such as an identifier of the session management information 200 and the number of the track management <br>
5  	 information 210 shown in Figure 2B.<br>
The track management information #N contains information corresponding to the track #N shown in Figure 1C, where N denotes an integer greater than or equal to 1.<br>
10<br>
Figure 2B shows a data structure of the track management information 210 for managing the track. The track management information 210 is included in the disc management information.<br>
15<br>
The track management information 210 includes session start information 211 which indicates whether or not the track is a leading track of the session, track start location information 212 which indicates a start location<br>
20 	of the track, and last recorded address information within track 213 which indicates a location at which data has been lastly recorded within the track. Hereinafter, the last recorded address information within track 213 is referred to as LRA 213.<br>
25<br>
If the track managed by the track management information is 210 located at a leading position of the session, a value (e.g. "1") indicating that the track is located at a leading position of the session is set to session start<br>
30 	information 211. Otherwise, a different value (e.g. "0") is set to session start information 211.<br>
The track start location information 212 includes<br><br>
P38153<br>
30<br>
a physical address indicating a start location of the track.<br>
The LRA 213 includes a physical address indicating<br>
a location at which valid data has been lastly recorded within<br>
5   	 the track. Valid data may be, for example, user data supplied<br>
from the host apparatus 305. The LRA 120 and the LRA 121<br>
shown in Figure 1C are an example of the LRA 213.<br>
In the case where the present invention is applied<br>
10 	to the BD-R specification, the term "track management information" in the present specification should be read as a "Sequential Recording Range Entry (SRR Entry)" and the term "session management information" in the present specification should be read as a " Sequential Recording Range<br>
15    Information".<br>
In the case where the data recording is performed for each ECC cluster as a minimum unit on the information recording medium 100, the location indicated by the LRA 213 <br>
20   does not always match the boundary of ECC clusters.<br>
In general, the size of data specified by the recording instruction does not match multiple integral of the size of one ECC cluster. In this case, the LRA 213 <br>
25	indicates an address of the last physical sector among the physical sectors in which the data specified by the recording instruction is recorded.<br>
If the location indicated by the LRA 213 does not <br>
30    match the boundary of ECC clusters, padding data is recorded after the valid data so that the end of the recorded data can match the boundary of ECC clusters.<br><br>
P38153<br>
31<br>
In the present embodiment, the data recording can be performed for each track. In this case, the recording of new data is started from a leading position of each track, and the new data is contiguously recorded within the track <br>
5 	(a sequential recording). When the data recording is performed for a track, the location at which the data has been lastly recorded within the track is reflected to the<br>
LRA 213.<br>
10	When the data recording is re-started within the track,<br>
a value of the LRA 213 is checked. By checking the value of the LRA 213, it is possible to determine a next writable address within the track.<br>
15	In the case where no data is recorded within the track<br>
(e.g. immediately after the track is allocated), a predetermined value (e.g. "0") indicating such a status can be set to the LRA 213.<br>
20	In general, a next writable address (hereinafter,<br>
"NWA") indicates a location of a physical sector which is next to the physical sector indicated by the LRA 213. Alternatively, in the case where the data recording is performed for each ECC cluster as a minimum unit on the<br>
25 	information recording medium 100, the NWA indicates a location of a leading position of an ECC cluster which is next to the ECC cluster including the physical sector indicated by the LRA 213.<br>
30	The location of the NWA is calculated according to<br>
Expression (1) below.<br>
(a) When LRA≠O<br><br>
P38153 32<br>
NWA = N x (Floor (LRA / N) + 1) N: the number of the physical sectors included in each ECC cluster (for example, N = 32).<br>
5	(b) When LRA =0<br>
NWA = (start location of the corresponding<br>
track)<br>
where Floor(x) represents the largest integer number = x <br>
10<br>
Hereinafter, it is assumed that the NWA indicates a leading position of the ECC cluster.<br>
A track where it is possible to record data is referred 15   to as an open track.<br>
The track number of the open track is included in<br>
 the header information 201 of the session management<br>
     information 200 shown in Figure 2A (for example, a first<br>
20   open track number 203, a second open track number 204, etc. ) .<br>
Any track other than the open track is referred to as a closed track.<br>
25	For example, a track which does not include any<br>
unrecorded area or a track designated by a user can be a closed track.<br>
Unlike the open track, the track number of the closed<br>
30   track is not stored in the header information 201 of the session management information 200.<br>
The data recording to any closed track is prohibited.<br><br>
P38153 -33-<br>
In the case where the present invention is applied to the BD-R specification, the term "open track" in the present specification should be read as an "Open SRR" and the term <br>
5     "closed track" should be read as a "Closed SRR".<br>
By checking the open track number and the LRA 213 in the track management information 210, it is possible to determine an unrecorded area on the information recording <br>
10    medium 100.<br>
By managing the recorded clusters for the write-once type of the information recording medium 100, it is possible to perform a kind of random recording (i.e. recording data<br>
15  	 at an arbitrary location (physical address) on the in  formation recording medium 100).<br>
In order to realize such a random recording, it is<br>
necessary to manage unrecorded areas on the information<br>
  20      recording medium 100 and to manage the last recorded address .<br>
  In the present embodiment, these managements are<br>
realized by utilizing the space bitmap management information<br>
220 shown in Figure 2C and the disc management information<br>
25       recorded in the disc management information area 104 and<br>
          105.<br>
When the random recording is performed, the space bitmap management information 220 shown in Figure 2C is<br>
30   	recorded in the disc management information area 104.<br>
Figure 2C shows a data structure of space bitmap management information 220. The space bitmap management<br><br>
P38153<br>
information 220 includes header information 221, managed area information 222 and space bitmap information 223.<br>
The header information 221 includes general in<br>
5     formation such as an identifier of the space bitmap management information 220.<br>
The managed area information 222 includes information which specifies an area in the user data area 108,<br>
10	wherein the recorded/unrecorded status of a sector included in the area is managed by the space bitmap management information 220. For example, the managed area information 222 includes a start location of the area and a length of the area.<br>
15<br>
The space bitmap information 223 includes information indicating whether each ECC cluster included in the area to be managed is a recorded ECC cluster or an unrecorded ECC cluster. For example, a single bit data is<br>
20	 assigned to each ECC cluster, a predetermined value (e.g. "0") is set to the single bit data when the ECC cluster is an unrecorded ECC cluster, and a predetermined value (e.g. "1") is set to the single bit data when the ECC cluster is a recorded ECC cluster. This makes it possible to manage<br>
25  	unrecorded areas for all ECC clusters in the area to be managed.<br>
The disc management information recorded in the disc management information area 104 includes disc structure information 1100 shown in Figure 3. The disc structure<br>
30  information 1100 includes last recorded address information 1107. The last recorded address information 1107 includes a physical address indicating a location at which data has been lastly recorded within the user data area 108.<br><br>
P38153 35<br>
The disc structure information 1100 further includes general information 1101 concerning an entire disc structure information 1100, replacement management information list<br>
5 		location information 1102 which indicates location information of the latest replacement management information list 1000 within the disc management information area 104, 105, user area start location information 1103 which indicates a start location of the user data area 108, user<br>
10	area end location information 1104 which indicates an end location of the user data area 108, disc management information area size 1107b, and spare area information 1105 and spare area management information 1108 which indicates the size of the inner spare area 106 and the outer spare<br>
15    area 107 and an area available for replacement.<br>
By using the disc management information area size 1107b, it is possible to change the size of the disc management information area for each information recording medium.<br>
20	 Further, by using the disc management information area size 1107b, it is possible to change the temporal disc management information area described above in the inner spare area 106 and the outer spare area 107.<br>
25	By using the spare area information 1105, it is<br>
possible to change the size of the spare area for each information recording medium. For example, it is possible to set the size of the inner spare area 106 or the size of the outer spare area 107 to zero.<br>
30<br>
The spare area management information 1108 includes next available location information indicating a next available location in the inner spare area 106 and the outer<br><br>
36		       			P38153<br>
spare area 107.<br>
In each spare area, a sequential recording is performed in the same way in each track. The next available<br>
5 	location in each spare area performs the similar function as the NWA in each track. The recording of new data to each spare area is performed sequentially from the location indicated by the next available location information.<br>
10	The disc structure information 1100 further includes<br>
session management information location information 1109 which indicates location information of the latest session management information 200 in the disc management information areas 104 and 105, and space bitmap management information<br>
15 	location information 1110 which indicates location information of the latest space bitmap management information 220 in the disc management information areas 104 and 105.<br>
As described above, by using the session management <br>
20    information 200 or the space bitmap management information 220, it is possible to manage the status of unrecorded physical sectors on the information recording medium 100.  Accordingly, it is possible to selectively use one of the session management information 200 and the space bitmap management<br>
25    information 220 for its purposes.  Alternatively, it is possible to use both information.  The information concerning a method for managing unrecorded areas is included in the recording mode information 1106 of the disc structure information 1100. <br>
30<br>
The disc management information area 105 is an extended area which is used to record duplication of the disc management information recorded in the disc management<br><br>
P38153<br>
information area 104 or is used to record the information which cannot be recorded in the disc management information area 104 in updating the disc management information. Hereinafter, the detailed description of the disc management <br>
5  information area 105 will be omitted. This is similar to the temporal disc management information recorded in the spare area.<br>
In the example shown in Figure 1C, the user data <br>
10   recorded in the user data area 108 is managed by a file system. A space managed by the file system is referred to as a volume space 109.<br>
A plurality of logical sectors are assigned to the <br>
 15   volume space 109.  Each logical sector is identified by address information such as a logical sector number (hereinafter, "LSN").<br>
In the description below, it is assumed that <br>
20  information recorded in the information recording medium 100 as the volume/file structure of the file system (e.g. descriptor, pointer, metadata partition and metadata file) has a data structure defined in the ISO/IEC 13346 standard or the UDF (Universal Disc Format) specification, unless <br>
25 	it is explicitly described on the contrary. Of course, it is possible to use a file system other than those described above.<br>
The information recording medium 100 shown in Figures<br>
30   1A to 1C is described as an information recording medium<br>
  having a single recording layer. However, the information<br>
  recording medium 100 may have two or more recording layers.<br><br>
P38153<br>
38<br>
Figure 4 shows a data structure of an information recording medium 100b having two recording layers.<br>
In Figure 4, L0 denotes a first layer and LI denotes <br>
5 	a second layer. Each of the first and second layers has almost the same structure as the information recording medium 100. Specifically, the lead-in area 101 is located in an inner-most periphery of the first layer and the lead-out area 103a is located in an inner-most periphery of the second layer.<br>
10 	Further, the outer area 103b is located in an outer-most periphery of the first layer and the outer area 103c is located in an outer-most periphery of the second layer. The lead-in area 101, the outer area 103b, the lead-out area 103a and the outer area 103c includes a disc management information<br>
15  area 104, 105, 104a and 105a, respectively.<br>
Further, as shown in Figure 4, the spare areas 106, 106a, 107 and 107a are provided. As described above, it is possible to change the size of each spare area for each<br>
20 	information recording medium. It is also possible to provide an additional temporal disc management information area in each spare area. The user data areas 108 and 108a are logically treated as a single volume space having contiguous logical addresses.<br>
25<br>
Thus, it is possible to logically treat an information recording medium having a plurality of recording layers as an information recording medium having a single recording layer. Hereinafter, an information recording medium having<br>
30	 a single recording layer is described. It is possible to apply the description of the information recording medium having a single recording layer to an information recording medium having a plurality of recording layers. Therefore,<br><br>
P38153 39<br>
an information recording medium having a plurality of recording layers is referred to only when a special description is required.<br>
5	1-2. Pseudo-overwrite recording<br>
The replacement information is described with reference to Figures 5A and 5B.<br>
10	The replacement information is defined as a re-<br>
placement management information list (or a defect list) including replacement management information (or a defect<br>
list entry). The replacement management information (or the defect list entry) includes original location information <br>
15   indicating a location of a cluster in which a defect occurs on the information recording medium (i.e. a defective cluster) and replacement location information indicating<br>
a location of a replacement cluster which is used instead of the defective cluster.<br>
20<br>
The present invention enables recording a replacement cluster in the user data area.<br>
Further,  the  present  invention  realizes  a <br>
25    pseudo-overwrite recording on a write-once information recording medium using the replacement information.<br>
As shown in Figure 1B, the data area 102 includes the inner spare area 106, the user data area 108 and the<br>
30    outer spare area 107.<br>
At least a part of the inner spare area 106 and the outer spare area 107 is used as an area for replacement<br><br>
P38153<br>
40<br>
recording of the data to be recorded in the user data area 108.<br>
For example, when there exists a defective cluster<br>
5  	 in the user data area 108, at least a part of the inner spare<br>
area 106 and the outer spare area 107 is used as an area<br>
for recording a replacement cluster with which the defective<br>
cluster is replaced.<br>
10	Alternatively, at least a part of the inner spare<br>
area 106 and the outer spare area 107 can be used as an area for recording the updated data in the pseudo-overwrite recording described below.<br>
15	The replacement recording, which is the combination<br>
of the replacement information with the spare area, is performed as well as a verify process.<br>
The verify process is a process including the steps .<br>
20 	of reproducing data immediately after the data is recorded, comparing the reproduced data with the recorded data and determining whether or not the data is recorded correctly based on the comparison result. Such a process including these steps is called a verify-after-write process. <br>
25<br>
When an error occurs during the verify process (i.e.<br>
it is determined that the data is not recorded correctly) ,<br>
a replacement recording is performed.  Specifically, the<br>
defective cluster is replaced by a replacement cluster and<br>
30    the data is recorded in the replacement cluster.<br>
The replacement cluster is recorded in the inner spare area 106 (or the outer spare area 107) or the user data area<br><br>
P38153<br>
replacement management information list 1000 is used to map the location of the defective cluster to the location of the replacement cluster. The replacement management information list 1000 includes header information 1001 and<br>
5 	a plurality of replacement management information 1010 (e.g. replacement management information #1, #2, #3...).<br>
The header information 1001 includes the number of the replacement management information included in the <br>
10   replacement management information list 1000.  The replacement management information includes information indicating the mapping described above.<br>
Figure 5B shows a data structure of the replacement<br>
15   management information 1010. The replacement management information 1010 includes status information 1011, original location information 1012 and replacement location information 1013.<br>
20		The status information 1011 includes status in-<br>
formation concerning the mapping described above. For example, the status information indicates a type or an attribute of the replacement management information 1010, the valid/invalid status of the original location information<br>
25  	 1012 and the replacement location information 1013 and like.<br>
The original location information 1012 indicates a location of original information (e.g. a defective cluster) .<br>
30	The replacement location information 1013 indicates<br>
a location of replacement information (e.g. a replacement cluster).<br><br>
P38153 41<br>
108.<br>
The pseudo-overwrite recording is defined as a method<br>
for mapping a physical address at which the data is actually<br>
5    recorded to another physical address, such that it can be<br>
seen as if the logical address at which the data is recorded<br>
is not changed.<br>
When the overwrite of new data is instructed to a <br>
10 	logical address at which data is recorded, a physical address corresponding to the logical address is replaced by a separate physical address and the new data is written into an ECC cluster on the separate physical address. Then, the ECC cluster before overwrite is mapped to the ECC cluster <br>
15   (replacement cluster) in which the new data is recorded.<br>
The replacement cluster used in the pseudo-overwrite recording is recorded in the spare area or the user data area. <br>
20				As the replacement information for performing such a mapping process, the replacement management information list 1000 shown in Figure 5A is used.<br>
2 5	By performing such a mapping process , it is possible<br>
to realize that it can be seen as if the data is overwritten, although the data is not actually overwritten. Hereinafter, this recording method is referred to as a pseudo-overwrite recording.<br>
30<br>
  Figure 5A shows a data structure of a replacement management information list 1000 which is replacement information according to the present invention.   The<br><br>
P38153<br>
In the pseudo-overwrite recording, the location of the ECC cluster before overwrite is indicated by the original location information 1012, and the location of the ECC cluster after overwrite is indicated by the replacement location <br>
5 	information 1013. Thus, the location of the ECC cluster before overwrite is mapped to the location of the ECC cluster after overwrite.<br>
Herein, the original location 1012 and the re-<br>
10 placement location information 1013 registered in the replacement management information 1010 may be represented by a physical address (e.g. PSN) of the first sector in the corresponding ECC cluster. This is because a mapping is performed as a unit of ECC cluster in the defective management <br>
15   and the pseudo-overwrite recording.<br>
In the conventional linear replacement method, the replacement cluster is recorded in the spare area.  Accordingly, in every case, the information indicating a 20    location of the ECC cluster in the spare area is set to the replacement location information 1013.<br>
On the other hand, in the present invention, the location at which the replacement cluster can be recorded<br>
25 	is not limited to the location in the spare area. It is possible to record the replacement cluster in the user data area. Accordingly, the information indicating a location of the ECC cluster in the spare area or the information indicating a location of the ECC cluster in the user data<br>
30    area may be set to the replacement location information 1013.<br>
Thus, the replacement location information 1013 may indicate a location of the ECC cluster recorded in one of<br><br>
P38153 44<br>
two areas (i.e. the spare area and the user data area) . In order to determine whether the replacement location information 1013 indicates a location of the ECC cluster in the spare area or a location of the ECC cluster in the user <br>
5 	data area, information indicating one of the two cases may be defined. Such information may be incorporated into the status information 1011.<br>
1-3. Recording/reproduction apparatus<br>
10<br>
Figure 6 shows a configuration of an information recording/reproduction apparatus 300 according to an embodiment of the present invention.<br>
15	The information recording/reproduction apparatus<br>
300 includes a host apparatus 305 and a drive apparatus 310.<br>
The host apparatus 305 can be, for example, a computer system or a personal computer.<br>
20<br>
 	The drive apparatus 310 can be, for example, any one of a recording apparatus, a reproduction apparatus and a recording/reproduction apparatus. The information recording/reproduction apparatus 300 as a whole also can be <br>
25  called any one of a recording apparatus, a reproduction apparatus and a recording/reproduction apparatus.<br>
The host apparatus 305 includes a system control<br>
 section 301 and a memory circuit 302.  The host apparatus<br>
   30   305 may further include magnetic disc apparatus 304 such<br>
 as a hard disc drive.  The components in the host apparatus<br>
 305 are connected to each other via an I/O bus 303.<br><br>
P38153 45<br>
The system control section 301 can be implemented, for example, by a microprocessor including a system control program and a memory for operation. The system control section 301 controls various processes and performs various <br>
5 	operations such as recording/reproduction of a volume structure/file structure of a file system, recording/reproduction of a metadata partition/file structure described below, recording/reproduction of files and recording/reproduction of the lead-in/lead-out areas.<br>
10<br>
The memory circuit 302 is used to operate information such as a volume structure, a file structure, a metadata partition/file structure and files, and is used to temporarily store them.<br>
15<br>
The drive apparatus 310 includes a drive control section 311, a memory circuit 312, and a recording/reproduction section 314. The components in the drive apparatus 310 are connected to each other via an internal<br>
20    bus 313.<br>
The drive control section 310 can be implemented, for example, by a microprocessor including a drive control program and a memory for operation. The drive control section<br>
25 	310 controls various processes and performs various operations such as recording/reproduction of the disc management information area and the spare area and the pseudo-overwrite recording/reproduction.<br>
30	The system control section 301 and drive control<br>
section 310 shown in Figure 6 can be implemented by a semiconductor integrated circuit such as an LSI. Alternatively, they can be implemented by a general processor<br><br>
P38153<br>
and a memory (e.g. a ROM).<br>
A program is stored in the memory (e.g. a ROM) . The program is executable by a computer (e.g. a general processor) . <br>
5 	This program may represent a reproduction process and/or a recording process according to the present invention described above or described below. A computer (e.g. a general processor) performs the reproduction process and/or the recording process according to the present invention<br>
10   	in accordance with the program.<br>
The memory circuit 312 is used to operate data concerning the disc management information area and the spare area and data transferred to the drive apparatus 310, and<br>
15   	is used to temporarily store them.<br>
1-4. Procedure of recording process (1)<br>
With reference to Figure 7, the data structure of <br>
20   	the information recording medium 100 after performing a format process according to the present embodiment of the invention will be described below.<br>
Track #1 401, track #2 402 and track #3 403 are<br>
25  	 	allocated in the user data area 108.<br>
A volume space 109 is allocated in the user data area 108. A volume structure area 410, a physical partition 420 and a volume structure area 411 are allocated in the volume<br>
30   	space 109.<br>
In the physical partition 420, a metadata partition 430 is included. The metadata partition 430 is defined in<br><br>
P38153 47<br>
a pseudo-overwrite method in version 2.5 or higher version of the UDF specification.<br>
In the metadata partition 430, a metadata file 440<br>
5   is recorded.  In order to simplify the description, the<br>
description of a metadata mirror file is omitted below. The<br>
metadata mirror file is a duplication of metadata file 440.<br>
The metadata mirror file can be also recorded.<br>
10	A FE (Metadata file) 441 is recorded.  The FE<br>
(Metadata file) 441 is a file entry (FE) indicating a recording location of the metadata file 440 in the physical partition 420.<br>
15	The information on the file structure such as a file<br>
entry (FE) indicating a recording location of a user data file or a directory, is located in the metadata partition<br>
430 (i.e. the metadata file 440).<br>
20	In Figure 7, only the ROOT directory is recorded.<br>
In the metadata file 440, only a file set descriptor 433 FE and an FE (ROOT) 442 are recorded. In order to simplify the description, it is assumed that a directory file is included in each FE.<br>
25<br>
It is assumed that the state shown in Figure 7 is a state in which any replacement recording has not been performed yet. The management of unrecorded areas in the metadata partition 430 may be performed using a metadata<br>
30    bitmap (not shown) as defined in version 2.5 of the UDF specification.<br>
Alternatively, it is possible to perform the<br><br>
P38153<br>
48<br>
management of unrecorded areas in the metadata partition 430 by the LRA 405 in the track #1 while maintaining unrecorded areas in the metadata partition 430 unrecorded.<br>
5	The method for allocating tracks is not limited to<br>
the method shown in Figure 7. For example, more tracks can be allocated. It is possible to add a new track when it is required, while maintaining the state of the last track in the user data area such that the new track can be added to<br>
10    the last track.<br>
Next, with reference to a flowchart shown in Figure 8A, the procedure of the data recording process will be described below. <br>
15<br>
Herein, a case where a data file (File-a) is to be recorded in the information recording medium 100 is described as an example.<br>
20		A plurality of physical addresses are assigned to<br>
the data area 102 of the information recording medium 100. A plurality of logical addresses are assigned to the user data area 108 of the information recording medium 100.  It<br>
is assumed that a corresponding relationship between the <br>
25    plurality of logical addresses and the plurality of physical  addresses is predetermined.<br>
Each of the plurality of logical addresses is represented by a logical sector number (LSN) or a logical<br>
30   block address (LBA). Each of the plurality of physical addresses is represented by a physical sector number (PSN) or physical block address (PBA) . Further, it is assumed that at least one track is allocated in user data area 108.<br><br>
P38153<br>
48<br>
(Step S101) Prior to recording the data file (File-a), the drive control section 311 performs a preparation process for the data recording. Such a preparation process for the <br>
5 	data recording is performed, for example, when the information recording medium 100 is loaded into the drive apparatus 310.<br>
For example, the drive control section 311 reads the <br>
10  	latest disc management information from the disc management information area 104 (or the disc management information area 105) of the information recording medium 100.<br>
The drive control section 311 obtains the user area <br>
15	start location information 1103, the user area end location information 1104, the spare area information 1105 and like from the disc management information in order to determine a primary logical address-physical address mapping indicating the corresponding relationship between the 20 plurality of logical addresses and the plurality of physical addresses assigned to the user data area 108.<br>
Hereinafter, the drive control section 311 performs  translation between the logical address and primary physical<br>
25        address in accordance with the primary logical address-physical address mapping.<br>
The drive control section 311 obtains track  management information included in the disc management<br>
30  	information area 104.<br>
(Step S102) The drive control section 311 receives a recording instruction from the host apparatus 305. The<br><br>
P38153 50<br>
recording instruction includes a logical address indicating a location at which data is to be recorded. This logical address is represented, for example, by a logical sector number (LSN) or a logical block address (LBA). The recording <br>
5 	instruction may include a single logical address indicating a location at which single data is to be recorded, or it may include a plurality of logical addresses indicating a plurality of locations at which a plurality of data are to be recorded respectively.<br>
10<br>
The logical address included in the recording instruction is determined, for example, by the host apparatus 305 based on a logical address indicating a location at which data is to be recorded the next time (i.e. a logical next<br>
15   writable address (a logical NWA)).<br>
The logical NWA is output from the drive apparatus 310 to the host apparatus 305 in response to a request from the host apparatus 305 to the drive apparatus 310, for example.<br>
20		The logical NWA is obtained by translating the NWA determined by Expression (1) described above in accordance with the primary logical address-physical address mapping. This translation is performed by the drive control section<br>
25 	311. The procedure for determining the NWA and the logical NWA will be described later in detail in embodiment 2 of the invention.<br>
The system control section 301 of the host apparatus<br>
30    305 generates and updates file system information as<br>
necessary in order to record data file (File-a) . For example, the system control section 301 generates an FE (File-a) for the data file (File-a) and updates the ROOT directory which<br><br>
P38153 51<br>
is a parent directory of the data file (File-a) using the memory circuit 302.<br>
The generated FE (File-a) for the data file (File-a)<br>
5     and the updated ROOT directory are recorded in the information<br>
recording medium 100 by outputting the recording instruction<br>
from the host apparatus 305 to the drive apparatus 310. Thus,<br>
the latest file system information is reflected on the<br>
information recording medium 100.<br>
10<br>
If necessary, the host apparatus 305 inquires the<br>
drive apparatus 310 using a predetermined command as to<br>
whether or not there is any remaining unrecorded area for<br>
performing a replacement recording. <br>
15<br>
The instructions from the host apparatus 305 to the<br>
drive apparatus 310 may be a standardized command such as<br>
a SCSI multi-media command.<br>
20	For example, a request for the logical NWA may be<br>
a READ TRACK INFORMATION command, and a recording instruction may be a WRITE command.<br>
(Step S103) The drive control section 311 translates<br>
25    the logical address included in the recording instruction<br>
received in step S102 into a physical address in accordance<br>
with the primary logical address-physical address mapping.<br>
(Step S104) The drive control section 311 determines<br>
30    a track (an open track) of the at least one track allocated<br>
 in the user data area 108 based on the physical address<br>
corresponding to the logical address included in the<br>
recording instruction and the track management information<br><br>
P38153-52-<br>
210 (Figure 2B) included in the disc management information.<br>
The drive control section 311 determines a physical address indicating a location at which data is to be recorded<br>
5	the next time (i.e. NWA) within the determined track, based on LRA 213 within the determined track. This NWA is a next writable address determined in accordance with Expression (1) described above.<br>
10	The NWA may be determined in step S104.  Alter-<br>
natively, the NWA may be determined in other steps other than step S104 (e.g. in the preparation process for the data recording described above).<br>
15	By calculating the NWA using the LRA, it is not<br>
necessary to hold the information on the NWA in the track management information. As a result, it is possible to simplify the data structure of the track management information.<br>
20<br>
(Step S105) The drive control section 311 determines whether or not the physical address corresponding to the logical address included in the recording instruction is less than the NWA.<br>
25<br>
When it is determined that the physical address corresponding to the logical address included in the recording instruction is less than the NWA, the recording instruction is determined as a recording instruction for<br>
30 	the recorded area in the user data area 108. In this case, the process proceeds to step S106. Otherwise, the process proceeds to step S108.<br><br>
P38153  53<br>
(Step S106) The drive control section 311 determines<br>
data to be recorded. When the data recording is performed as a unit of ECC cluster in the information recording medium 100, the drive control section 311 determines the data <br>
5 	specified by the recording instruction as the data to be recorded. For example, if the recording location and the size of the data specified by the recording instruction match a boundary of the ECC clusters, then an entire ECC cluster is rewritten. In this case, the drive control section 311<br>
10 determines the data itself specified by the recording instruction as the data to be recorded.<br>
If it does not match any boundary of the ECC clusters , then the drive control section 311 performs a <br>
15  read-modify-write process described below. In this case, the drive control section 311 determines the data as a unit of ECC cluster which is obtained during the read-modify-write process as the data to be recorded.<br>
20	(Step S107) The drive control section 311 determines<br>
the recording location of the data determined in step S106. Specifically, the drive control section 311 determines a specific location in the user data area 108, which is other than the location indicated by the physical address<br>
25 corresponding to the logical address included in the recording instruction, as the recording location of the data determined in step S106.<br>
The specific location may be the NWA within the track <br>
 30  determined in step S104.<br>
Alternatively, the specific location may be a location indicated by an NWA within an open track which is<br><br>
P38153<br>
different from the track determined in step S104. In this case, it is preferable that the NWA within the open track is an NWA which indicates a location which is closest to the location indicated by the physical address corresponding <br>
5     to the logical address included in the recording instruction.<br>
(Step S108) The drive control section 311 determines whether or not the physical address corresponding to the logical address included in the recording instruction is <br>
10   equal to the NWA.<br>
When it is determined that the physical address corresponding to the logical address included in the recording instruction is equal to the NWA, the recording<br>
15  instruction is determined as a recording instruction to the location indicated by the NWA. That is, the data recording instructed by the recording instruction is determined as an appending recording (a new recording) . In this case, the process proceeds to step S109.  Otherwise, the process<br>
20   proceeds to step Sill.<br>
(Step S109) The drive control section 311 determines data to be recorded. Specifically, the drive control section 311 determines the data specified by the recording in-<br>
25   struction as the data to be recorded.<br>
Then, the drive control section 311 determines<br>
whether or not the end of the data specified by the recording instruction matches a boundary of the ECC clusters. If it <br>
30 	does not match the boundary of the ECC clusters, padding data (e.g. data consisting of one or more "00"h) is inserted such that the end of the data after insertion matches the boundary of the ECC clusters. In this case, the drive control<br><br>
P38153<br>
section 311 determines the data after insertion as the data to be recorded.<br>
(Step S110) The drive control section 311 determines <br>
5 	the recording location of the data determined in step S106. Specifically, the drive control section 311 determines the location indicated by the physical address corresponding to the logical address included in the recording instruction (i.e. the location indicated by the    NWA), as the recording<br>
10   location of the data determined in step S106.<br>
(Step Sill) The drive control section 311 performs an error process.<br>
15	(Step S112) The drive control section 311 performs<br>
a recording process for the determined recording location.<br>
When the determination result in step S105 is "Yes", the  drive  control  section  311  controls  the  re-<br>
 20  cording/reproduction section 314 to record the data determined in step S106 at the recording location determined in step S107.<br>
When the determination result in step S108 is "Yes" , <br>
25   the  drive  control  section  311  controls  the  recording/reproduction section 314 to record the data determined in step S109 at the recording location determined in step S110.<br>
30	Further, the drive control section 311 performs a<br>
verify process for the recorded data to determine whether or not the data recording has succeeded. If the data recording has succeeded, then the process proceeds to step<br><br>
P38153<br>
S113.<br>
If the data recording has failed, then an unrecorded area in the spare area (e.g. the inner spare area 106) or <br>
5    the user data area 108 is allocated as a replacement cluster, and the data is recorded in the replacement cluster.<br>
After the data recording has finally succeeded, the process proceeds to step S113. <br>
10		For example, the processes of step S106 and step S112 described above is performed as a read-modify-write process (hereinafter RMW process).<br>
15	According to the RMW process, firstly, the drive<br>
control section 311 controls the recording/reproduction section 314 to reproduce the data recorded in the ECC cluster including a physical sector at a location indicated by the physical address corresponding to the logical address<br>
20 	included in the recording instruction, and it stores the data reproduced from the ECC cluster in the memory circuit 312 (i.e. "read" process).<br>
There is a possibility that the ECC cluster to be <br>
25 	reproduced is replaced with a replacement cluster at the time when the reproduction process is performed. The drive control section 311 refers to the replacement management information list 1000, and, if necessary, it controls the recording/reproduction section 314 to reproduce the data<br>
30 	recorded in the replacement cluster. The procedure of the data reproduction referring to the replacement management information list 1000 will be described later.<br><br>
P38153 57<br>
Secondly, the drive control section 311 replaces the data recorded in the physical sector at the location indicated by the physical address corresponding to the logical address included in the recording instruction among the data <br>
5   reproduced from the ECC cluster with the data included in the recording instruction (i.e. "modify" process). As a result, the data to be recorded in the replacement cluster is obtained.<br>
10	The drive control section 311 performs a read process<br>
and a modify process in step S106.<br>
Figure 8B shows the steps performed when the read<br>
process and the modify process are performed in step S106<br>
15    shown in Figure 8A. Each step shown in Figure 8B is performed<br>
by the drive control section 311 of the drive apparatus 310.<br>
(Step S151) The drive control section 311 determines whether or not the ECC cluster including the location <br>
20 	specified by the recording instruction has been already replaced by an replacement cluster. Such a determination is made, for example, by retrieving the replacement management information list 1000.<br>
2 5	If the replacement management information 1010 which<br>
indicates the location specified by the recording instruction as original location is found, it is determined that the ECC cluster has been already replaced by the replacement cluster and the process proceeds to step S152A.  Otherwise,<br>
30   	 the process proceeds to step S152B.<br>
By holding the determination result of step S151 as a value of the internal variable, it is possible to refer<br><br>
P38153 58<br>
to the value of the internal variable. By referring to the value of the internal variable, if necessary, in the steps other than step S151, it is possible to determine whether or not the ECC cluster including the location specified by <br>
5 	the recording instruction has been already replaced by a replacement cluster. This makes it possible to avoid repeatedly performing the same process . For example, if the determination result of step S151 is "Yes", then the value of "1" may held as the value of the internal variable, and<br>
10 	if the determination result of step S151 is "No", then the value of "0" may held as the value of the internal variable.<br>
(Step S152A) The drive control section 311 determines whether or not the RMW process is required. For example,<br>
15 	if the location and the size specified by the recording instruction matches a boundary of the ECC clusters, then drive control section 311 determines that the RMW process is not required. If the location and the size specified by the recording instruction do not match any boundary of the<br>
20  ECC clusters, then drive control section 311 determines that the RMW process is required.<br>
If it is determined that the RMW process is required, then the process proceeds to step S153. Otherwise, the <br>
25  process proceeds to step S157.<br>
Similar to step S151, by holding the determination result of step S152A as a value of the internal variable, it is possible to refer to the value of the internal variable.<br>
30 	By referring to the value of the internal variable, if necessary, in the steps other than step S152A, it is possible to determine whether or not the RMW process is required.<br><br>
P38153<br>
59<br>
(Step S152B) The drive control section 311 determines Whether or not the RMW process is required. The process of<br>
step S152B is the same as the process of step S152A.<br>
5	If it is determined that the RMW process is required,<br>
then the process proceeds to step S154. Otherwise, the process proceeds to step S157.<br>
(Step S153) The drive control section 311 controls <br>
10  the recording/reproduction section 314 to reproduce the data recorded in the replacement cluster indicated by the replacement management information 1010 found in step S151, instead of the ECC cluster including the location specified by the recording instruction, and stores the reproduced data<br>
15  in the memory circuit 312.<br>
(Step S154) The drive control section 311 controls<br>
the recording/reproduction section 314 to reproduce the data<br>
recorded in the ECC cluster including the location specified<br>
20   by the recording instruction, and stores the reproduced data<br>
in the memory circuit 312.<br>
(Step S155) The drive control section 311 replaces the reproduced data by the data specified by the recording <br>
25   instruction so as to generate a modified data.<br>
(Step S156) The drive control section 311 determines the modified data as the data to be recorded in the information recording medium 100. <br>
30<br>
(Step S157) The drive control section 311 determines the data specified by the recording instruction as the data to be recorded in the information recording medium 100.<br><br>
P38153<br>
Thus, the read process and the modify process are completed.<br>
5		Thirdly, the drive control section 311 controls the<br>
recording/reproduction section 314 to record the data obtained as a result of the modify process (i.e. the data to be recorded in the replacement cluster) in a location of the original ECC cluster (i.e. "write" process). The drive<br>
10   control section 311 performs write process in step S112.<br>
However, in the present invention, since the information recording medium is a write - once recording medium, it is not possible to actually record the data in a location<br>
15  of the original ECC cluster.<br>
Accordingly, in the present invention, an unrecorded<br>
area in the spare area such as the inner spare area 106 or<br>
the user data area 108 is allocated as a replacement cluster,<br>
20   and the updated data is recorded in the replacement cluster.<br>
Further, the drive control section 311 performs a verify process to determine whether or not the data recording has succeeded. When it is determined that the data recording<br>
25   has succeeded, the process proceeds to step S113.<br>
When it is determined that the data recording has<br>
failed, an unrecorded area in the spare area such as the<br>
inner spare area 106 or the user data area 108 is allocated<br>
30   as a further replacement cluster, and the data is recorded<br>
in the further replacement cluster.<br>
After the data recording has finally succeeded, the<br><br>
P38153<br>
61<br>
process proceeds to step S113.<br>
When the area specified by the recording instruction   corresponds to an entire ECC cluster, the entire ECC block<br>
5  	is rewritten.  In this case, the read process described above is not required.<br>
(Step S113) The drive control section 311 generates replacement management information 1010 in accordance with<br>
10 	the process in step S112, and stores the replacement management information 1010 in memory circuit 312. For example, in step S112, when the drive control section 311 controls the recording/reproduction section 314 to record data at a specific location in the user data area 108 wherein<br>
15	 the specific location is any location other than the location indicated by the physical address corresponding to the logical address included in the recording instruction, the drive control section 311 generates replacement management information 1010 which maps the physical address corre-<br>
20 	sponding to the logical address included in the recording instruction to a physical address indicating the specific location.<br>
It is possible to determine whether or not the <br>
25 	replacement management information 1010 having the original location information 1012, which indicates the same location as the physical address corresponding to the logical address included in the recording instruction, is found in the existing replacement management information list 1000 by <br>
30 	retrieving the existing replacement management information list 1000.<br>
If it is found, the drive control section 311 updates<br><br>
P38153 -62-<br>
the replacement management information 1010 so as to set the physical address indication of the specific address as a new replacement location information 1013.<br>
5	If it is not found, the drive control section 311<br>
generates new replacement management information 1010 and adds the new replacement management information 1010 to the replacement management information list 1000.<br>
10	Next, the drive control section 311 sorts the<br>
replacement management information list 1000 . For example, the drive control section 311 sorts the replacement management information list 1000 by the status information 1011, and then sorts it by the physical address indicated<br>
15    by the original location information 1012.<br>
Thus, a new replacement management information list<br>
1000 including the replacement management information 1010<br>
which maps the physical address corresponding to the logical<br>
20   address included in the recording instruction to the physical<br>
address indicating the specific location is generated.<br>
(Step S114) The drive control section 311 updates the disc management information to reflect the recording<br>
25 	process described above. For example, the drive control section 311 updates the last recorded address information 1107. In addition, the drive control section 311 updates the LRA 213 in each track management information 210 corresponding to the tracks in which data have been recorded<br>
30   to reflect the latest recording status.<br>
Further, the drive control section 311 generates the new disc management information including the updated<br><br>
P38153 -63-<br>
information such as the new replacement management information list 1000 and track management information 210. In addition, the drive control section 311 sets the replacement management and the session management information list location information <br>
5 	1102 information location information 1109 included in the new disc management information to indicate the latest recording location of the new replacement management information list 1000 and track management information 210 on the information recording<br>
10    medium 100.<br>
The drive control section 311 controls the recording/reproduction section 314 to record the new disc management information in a predetermined area (e.g. a <br>
15 	temporal disc management information area) on the information recording medium 100 . Thus , the disc management information is updated to reflect the latest status.<br>
When the data recording is completed, the drive<br>
20    apparatus 310 can notify the host apparatus 305 of the result<br>
of the recording process. The result of the recording process<br>
is, for example, information indicating that the data<br>
recording has succeeded or failed.<br>
2 5		Such a notification can be sent to the host apparatus<br>
305 at a predetermined timing. For example, it is possible to send this notification to the host apparatus 305 at the timing of the end of step S108 or at the timing when an error occurs in step S112.  Alternatively, it is possible to send<br>
30 	this notification before the data recording is actually completed. For example, it is possible to send a notification indicating that the data recording is completed to the host apparatus 305 at the timing when the interpretation of the<br><br>
P38153<br>
received record instruction is completed correctly.<br>
In the replacement recording process , it is possible to retrieve an unrecorded area in a direction along which <br>
5 	the PSNs are increased from the location of the original ECC cluster. If the unrecorded area is found during the retrieval, the unrecorded area is allocated as a replacement cluster.<br>
10	Alternatively, it is possible to first retrieve an<br>
unrecorded area in a track including the original ECC cluster, and then retrieve an unrecorded area for each track in a direction along which the PSNs are increased from the track.<br>
15	When the retrieval for the unrecorded area reaches<br>
the end of the user data area 108 without finding any unrecorded area, it is possible to retrieve an unrecorded area in the outer spare area 107 following the user data area 108.<br>
20	Further, the retrieval for the unrecorded area<br>
reaches the end of the outer spare area 107 without finding any unrecorded area, it is possible to retrieve an unrecorded area in a direction along which the PSNs are increased from a predetermined location at the inner side of the information<br>
25 	recording medium 100 (e.g. a leading position of the inner spare area 106 or a leading position of the user data area 108 or a location apart from its leading position by a predetermined distance).<br>
30	In steps S105 and S108 of the procedure of the<br>
recording process, it is determined whether the data recording is a pseudo-overwrite recording or an appending recording by comparing the physical address corresponding<br><br>
P38153 65<br>
to the logical address included in the recording instruction with the NWA.<br>
The reason why it is determined whether the data <br>
5 	recording is a pseudo-overwrite recording or an appending recording based on such a comparison is that the information recording medium 100 is a write-once recording medium and that a sequential recording is performed for the write-once recording medium.<br>
10<br>
The replacement recording method using the user data area described above according to the present invention is applicable to any rewritable optical disc. However, in order to determine whether the data recording is a overwrite<br>
15 	recording or an appending recording (or a new recording) for the rewritable optical disc, a more complex process is required. This is because, in the case of the rewritable optical disc, it is possible to randomly rewrite data at an arbitrary location on the optical disc.<br>
20<br>
When the drive apparatus manages an unrecorded area on the rewritable optical disc as described in the embodiment above, it is necessary to manage replacement management information corresponding to all ECC clusters on the<br>
25 	rewritable optical disc using the SDL, as described in the background art of the present specification, for example. Further, in order to determine whether the data recording for recording data at a certain location in the user data area is an overwrite recording or a new recording, it is<br>
30 	necessary to retrieve an entire replacement management information list 1000, for example. Similarly, in order to determine whether or not an ECC cluster is used as a replacement<br>
cluster, it is necessary to retrieve an entire replacement<br><br>
P38153<br>
management information list 1000. The amount of such a retrieving process is increased as the size of the replacement management information list 1000 is increased. This should be a problem since the capacity of the optical disc is being<br>
5   increased more and more.<br>
On the other hand, in the present invention, since<br>
the information recording medium 100 is a write-once<br>
recording medium, it is ensured that every area in a track<br>
10   which has an address less than the NWA is an unrecorded area.<br>
Accordingly, by performing the comparison described in steps S105 and S108, it is possible to easily determine whether the data recording is a pseudo-overwrite recording<br>
15 	or an appending recording, regardless of the size of the replacement management information list 1000. Further, it is possible to easily select a replacement cluster since the replacement cluster can be selected from any location after the NWA. <br>
20<br>
The pseudo-overwrite recording in a random recording method for a write-once optical disc is performed in a similar way as the rewritable optical disc.<br>
25	Further, in order to perform the random recording<br>
method for the write-once optical disc, a special structure such as the space bitmap management information 220 is required. The management of the unrecorded area for the random recording method using the space bitmap management<br>
30	 information 220 requires significantly greater processing load to the drive control section 311, compared to the management of the unrecorded area for the sequential recording method.<br><br>
P38153 66<br>
In particular, in the sequential recording method, it is possible to limit the number of open tracks to a predetermined number (for example, four at maximum) so that<br>
5   the utilization of a file system is not reduced.<br>
In this case, the number of open tracks depends on the structure of the file system, and it is independent from the capacity of the optical disc. On the other hand, the 10 size of the space bitmap management information 220 is increased as the capacity of the optical disc is increased. As a result, the processing load is also increased.<br>
Thus, the effect of the present invention for<br>
15   performing a pseudo-overwrite in the sequential recording<br>
method is very significant for the optical disc, since the<br>
capacity of the optical disc is being increased more and<br>
more.<br>
20	One feature of the present invention is to determine<br>
an NWA in accordance with LRA 213 included in the latest track management information 210 and expression (1) in order to determine whether the data recording is a pseudo-overwrite recording or an appending recording.<br>
25<br>
By recording the LRA 213, which has been updated as a result of the data recording, on the disc, it is possible to reduce the time required to find the latest LRA 213 when the information recording medium 100 is loaded into the drive<br>
30   apparatus 310.<br>
By calculating the NWA using the LRA 213, it is not necessary to hold information on the NWA in the track<br><br>
P38153 68<br>
information. As a result, it is possible to simplify the data structure of the track management information.<br>
In order to determine whether the data recording is <br>
5    a pseudo-overwrite recording or an appending recording without using a method according to the present invention, the following procedure is required, for example.<br>
Specifically, the procedure includes the steps of<br>
10 	determining a track including a physical address corresponding to the logical address included in the recording instruction, sequentially checking ECC clusters from a leading position of the determined track, and determining whether or not each of the ECC clusters is recorded.<br>
15<br>
If the ECC cluster is in a recorded state at a location indicated by the recording instruction, then it is determined that the data recording is a pseudo-overwrite recording.<br>
20	However, it is not preferable to perform such a<br>
procedure since the amount of the required processing is increased as the size of the track is increased.<br>
On the other hand, according to the present invention, <br>
25   	it is possible to easily determine whether the data recording is a pseudo-overwrite recording or an appending recording, regardless of the size of the track.<br>
Further, since LRA 213 is included in the track<br>
30   management information 210,  it is possible to easily<br>
determine an NWA as well as the determination of a track<br>
in which the data is to be recorded when the drive apparatus<br>
310 receives the recording instruction.<br><br>
P38153 -69-<br>
Figure 9 shows a data structure on the information recording medium 100 after the data file has been recorded in accordance with the procedure of the data recording. <br>
5<br>
Referring to Figure 9, data file (File-a) 460 is<br>
described as an example of the data file. It is assumed that<br>
a defective cluster #1 and a defective cluster #2 are detected<br>
in the data file (File-a) 460 in the procedure of the data<br>
10   recording.<br>
The disc management information including replacement management information indicating a replacement of the defective cluster #1 with a replacement cluster #1 15 and a replacement management information indicating a replacement of the defective cluster #2 with a replacement cluster #2 is recorded in the disc management information area 104.<br>
20	As shown in Figure 9, the replacement cluster #1 is<br>
recorded in the inner spare area 106 and the replacement cluster #2 is recorded in the user data area 108.<br>
The content of the data file (File-a) 460 is updated<br>
25    by the pseudo-overwrite recording.   Specifically, an<br>
 overwritten cluster #3 and an overwritten cluster #4<br>
correspond to the updated portions of the data file (File-a) 460 according to the pseudo-overwrite recording.<br>
30	The new data updated by the pseudo-overwrite<br>
recording is recorded in a replacement cluster #3 assigned as the substitute for the overwritten cluster #3 and is recorded in a replacement cluster #4 assigned as the<br><br>
P38153<br>
substitute for the overwritten cluster #4. The corresponding replacement information is recorded in the disc management information area 104.<br>
5	As shown in Figure 9, the replacement cluster #3 is<br>
assigned in the inner spare area 106 and the replacement cluster #4 is assigned in the user data area 108.<br>
1-5. Procedure of reproduction process (1)<br>
10<br>
With reference to a flowchart shown in Figure 10, a reproduction process for a file is described. Herein, a reproduction process for the data file (File-a) 460 shown in Figure 9 is described as an example.<br>
15<br>
(Step S201) Prior to performing a reproduction process , the drive control section 311 performs a preparation process for the data reproduction. Such a preparation process for the data reproduction is performed, for example,<br>
20   when the information recording medium 100 is loaded into the drive apparatus 310.<br>
For example, the drive control section 311 reads disc management information from the disc management information<br>
25   area 104 (or the disc management information area 105) of the information recording medium 100.<br>
The drive control section 311 obtains user area start location information 1103 , user area end location information<br>
30	1104, spare area information 1105 and like from the disc management information to generate a primary logical address-physical address mapping indicating the corresponding relationship between the plurality of logical<br><br>
P38153<br>
addresses and the plurality of physical addresses assigned to the user data area 108.<br>
Hereinafter, the drive apparatus 310 performs <br>
5  	translation between the logical address and the primary physical address in accordance with primary logical address-physical address mapping.<br>
(Step S202) The system control section 301 outputs <br>
10   a reproduction instruction to the drive apparatus 310 to reproduce an AVDP recorded at a predetermined location (e.g. LSN=256) of the information recording medium 100.<br>
 The AVDP is a data structure defined by the UDF <br>
15  specification as an anchor point of the file system information . The AVDP is recorded in the volume structure area 410 and the volume structure area 411.<br>
(Step S203) The system control section 301 obtains<br>
20   location information of a main volume descriptor sequence<br>
410A recorded in the volume structure area 410 from the AVDP.<br>
The system control section 301 outputs an instruction to the drive apparatus 310 to reproduce the main volume structure 410A.<br>
25<br>
Further, the system control section 301 obtains location information (LSN) of an FE (metadata file) 441 by retrieving the data structure from the reproduced main volume descriptor sequence 410A in steps.<br>
30<br>
(Step S204) The system control section 301 reproduces a file structure. In order to reproduce the file structure, the system control section 301 outputs a reproduction<br><br>
P38153<br>
instruction to the drive apparatus 310 based on the obtained location information (LSN) of the FE (metadata file) 441 to reproduce the FE (metadata file) 441.<br>
5	The system control section 301 obtains location<br>
information of a metadata file 440 from the reproduced FE (metadata file) 441. As a result, it is possible to access the metadata file 440.<br>
10	(Step S205) In accordance with the procedure of the<br>
data reproduction based on the UDF specification, the FDS 433, the FE (ROOT) 442, the FE (File-a) 443 and the data file (File-a) 460 are reproduced in this order. The description of the reproduction of the directory file is<br>
15    omitted.<br>
In each step in the reproduction process described above, a reproduction instruction is output from the host apparatus 305 to the drive apparatus 310. The drive control <br>
20 	section 311 of the drive apparatus 310 receives the reproduction instruction from the host apparatus 305, and performs a reproduction process in accordance with the reproduction instruction.<br>
25	The reproduction instruction includes a logical<br>
address indicating a location from which data is to be reproduced. The logical address is, for example, represented by a logical sector number (LSN). Alternatively, the logical address may be represented by a logical block<br>
30 	address (LBA). The reproduction instruction is, for example, a READ command.<br>
The drive control section 311 translates the logical<br><br>
P38153<br>
address included in the reproduction instruction into a physical address in accordance with the primary logical address-physical address mapping (for example, see Figure 12)<br>
5<br>
The drive control section 311 determines whether or not the replacement management information 1010 having the original location information 1012, which indicates the same location as the physical address corresponding to the logical <br>
10 	address included in the reproduction instruction, is found in the replacement management information list 1000 by retrieving the replacement management information list 1000.<br>
If it is found, the drive control section 311 refers <br>
15 	to the replacement location information 1013 of the replacement management information 1010 and controls the recording/reproduction section 314 to reproduce data from the location indicated by the replacement location information 1013. <br>
20<br>
If it is not found, the drive control section 311 controls the recording/reproduction section 314 to reproduce data from the location indicated by the physical address corresponding to the logical address included in the <br>
25 	reproduction instruction. The reproduced data is sent back to the host apparatus 305.<br>
1-6. Procedure of recording process (2)<br>
30		Figure 11 shows a data structure of the replacement<br>
management information 1010B. The replacement management information 1010B is a different embodiment of the replacement management information 1010 shown in Figure 5B.<br><br>
P38153<br>
As shown in Figure 11, the status information 1011 of the replacement management information 1010B includes three information, i.e. Flagl, Flag2 and Flag3. <br>
5<br>
Flag1 is information for classifying the replacement<br>
management information 1010B. Flagl includes information<br>
indicating whether the replacement information is for the<br>
purpose of the replacement recording or for the purpose of<br>
10   the designation of the defective cluster.<br>
Flag2 is information on the recording location of the replacement cluster managed by the replacement management information 1010B. Flag2 includes information indicating<br>
15	 whether the recording location of the replacement cluster is in the spare area (or there is no replacement cluster) or the recording location of the replacement cluster is in the user data area.<br>
20	Flag3 is information on the number of the clusters<br>
managed by the replacement management information 1010B. Flag3 includes information indicating whether the replacement information corresponds to a single cluster or<br>
a plurality of contiguous clusters. When the replacement 25    information corresponds to a plurality of contiguous clusters ,<br>
Flag3 further includes information indicating whether the<br>
replacement information corresponds to a start location of<br>
the contiguous range or an end location of the contiguous<br>
range. 30<br>
Hereinafter, with reference to Figure 11, the<br>
 procedure of the data recording according to the present<br>
invention will be described in detail.<br><br>
P38153 75<br>
The symbols at the right side of Figure 11 represent<br>
the respective types of the replacement management information. These symbols are referred to in the description <br>
5 	below, if necessary. For example, the replacement management information (type (1)) includes the status information 1011 such that Flagl=l (for the purpose of the replacement recording), Flag2=0 (for the replacement in the spare area) and Flag3=00 (for a single cluster). This <br>
10   replacement management information (type (1) ) may be denoted by the replacement management information (1).<br>
Figure 12 shows an example of the data structure of the physical address space and the logical address space<br>
15   on the information recording medium 100 according to the present invention.<br>
Figure 12 also shows a corresponding relationship between the logical sector number (LSN) and the physical<br>
20	sector number (PSN) in a primary state. The logical sector number (LSN) is a logical address indicating a location which is seen from the host apparatus 305 on the information recording medium 100. The physical sector number (PSN) is a physical address indicating an actual location on the<br>
25  information recording medium 100. This corresponding relationship is referred to as a primary logical address-physical address mapping. This mapping is represented by broken line arrows in Figure 12 (or other figures) .<br>
30	Each row shown in Figure 12 corresponds to one ECC<br>
cluster. In Figure 12, a physical address (PSN) and a logical address (LSN) corresponding to the physical address (PSN) are shown in the same row.<br><br>
P38153<br>
In Figure 12, the values of the PSNs and the LSNs are shown as the values of the PSNs and the LSNs from the first sector to the last sector in the corresponding ECC<br>
5   cluster.<br>
Herein, it is assumed that one ECC cluster consists of 32 sectors. However, one ECC cluster may be any other configuration. <br>
10<br>
The PSNs are assigned to the inner spare area 106, the outer spare area 107 and the user data area 108.<br>
The tracks are allocated from a leading position of <br>
15   the user data area 108.  In the state shown in Figure  12, since no data is recorded, the LRA 500 designates a leading position of the user data area 108.<br>
The LSNs are assigned to only the user data area 108 <br>
20    (or the volume space 109).<br>
The host apparatus 305 instructs a recording process or a reproduction process.  These instructions specify a specific logical sector on the information recording medium<br>
25  100 using the LSN.<br>
The drive apparatus 310 translates the LSN received<br>
from the host apparatus 305 into a PSN using the primary<br>
logical address-physical address mapping, and accesses a<br>
30   physical sector or ECC cluster in accordance with the PSN.<br>
In the replacement recording described hereinafter, the primary logical address-physical address mapping is<br><br>
P38153<br>
basically used. When the logical address-physical address mapping other than the primary logical address-physical address mapping is required, the replacement management information 1010 is used. <br>
5		   The values of the PSNs and the LSNs are only examples for explanation. These values can be varied depending on the structure and the capacity of the information recording medium 100.<br>
10<br>
As described above, the size of the disc management information and the spare area can be changed. The size of these is determined at the time when the format process is performed in response to an instruction from the host<br>
15 	apparatus 305. After the format process , the start location and the end location of the user data area 108 is not changed.<br>
In this case, it is possible to determine a relationship of the primary logical address-physical address<br>
20	 mapping uniquely (e.g. by a predetermined calculation) from information of the disc structure information 1100 (e.g. in more detail, user area start location information 1103, user area end location information 1104, spare area information 1105 and like) included in the disc management<br>
25    information.<br>
With reference to Figures 12 to 17B, an exemplary use of the replacement management information 1010B shown in Figure 11 will be described. <br>
30			Firstly, the transition from the state shown in Figure 12 to the state shown in Figure 13A is described.<br><br>
P38153<br>
78<br>
The host apparatus 305 instructs to record data "A" at a location of LSN=0.<br>
Upon the receipt of the recording instruction, the <br>
5  	drive apparatus 310 translates LSN=0 into PSN=1100 in accordance with the primary logical address-physical address mapping and records data "A" at a location of PSN=1100.<br>
Next, the drive apparatus 310 performs a verify <br>
10      process for the recorded data. Herein, it is assumed that the recording of data "A" has succeeded.<br>
The host apparatus 305 instructs to record data "Al" at a location of LSN=0. <br>
15<br>
Upon the receipt of the recording instruction, the drive apparatus 310 translates LSN=0 into PSN=1100 in accordance with the primary logical address -physical address mapping and performs a RMW process at a location of PSN=1100.<br>
20	 Then, the drive apparatus 310 records data "Al" at a location of PSN=100 in the inner spare area 106.<br>
The drive apparatus 310 generates replacement management information 511.  The location of PSN=1100 at<br>
25	which data "A" is recorded is set to the original location of the replacement management information 511. The location of PSN=100 at which data "Al" is recorded is set to the replacement location of the replacement management information 511.  The status information 1011 of the re-<br>
30 	placement management information 511 is set in accordance with Figure 11.<br>
The replacement management information 511 cor-<br><br>
P38153<br>
79<br>
responds to solid line arrows shown in Figure 13A. The tail of each arrow represents the original location of the replacement management information 511 and the head of each arrow represents the replacement location of the replacement<br>
5 	management information 511. Hereinafter, a similar notation will be used.<br>
In the state shown in Figure 13A, the host apparatus<br>
   305 instructs to record data "B" at a location of LSN=2.<br>
10   Herein, it is assumed that the recording of data "B" has<br>
   failed. Then, the data "B" is recorded at a location of<br>
   PSN=132 in the inner spare area 106.<br>
The replacement management information 512 is <br>
15   generated in response to this replacement recording. The location of PSN=1032 is set to the original location of the replacement management information 512. The location of PSN=132 is set to the replacement location of the replacement management information 512. The status information 1011 of<br>
20  the replacement management information 512 is set in accordance with Figure 11.<br>
The data allocation and the replacement management information list after the data recording described above <br>
25 is completed are shown in Figure 13A and Figure 13B, respectively. In the replacement management information list 1000A shown in Figure 13B, the replacement management information (1) is used.<br>
30	With reference to Figures 14A and 14B, the cases where<br>
the replacement management information (4) and (7) are used will be described.<br><br>
P38153<br>
80<br>
The host apparatus 305 instructs to record data "C" at a location of LSN=64. In accordance with the recording instruction, the drive apparatus 310 records data "C" at a location of PSN=1164. Herein, it is assumed that the <br>
5 	recording of data "C" has failed. Then, a recorded area in the user data area 108 (PSN=1196) is allocated and the data "C" is recorded at a location of PSN=1196 instead of the location of PSN=1164.<br>
10	The replacement management information 513 is<br>
generated in response to this replacement recording.<br>
The host apparatus 305 instructs to record data "D"<br>
    at a location of LSN=128.  Then, the host apparatus 305<br>
15   instructs to record data "Dl". Herein, it is assumed that<br>
     the recording of data "Dl" has failed. Then, the data "Dl"<br>
    is recorded at a location of PSN=1292.<br>
The replacement management information 514 is <br>
20   generated in response to this replacement recording.<br>
PSN=1260 indicates a location of a defective cluster, wherein there is no replacement cluster corresponding to the defective cluster. Then, the replacement management<br>
25  information 515 is generated.<br>
The host apparatus 305 instructs to record data "D2" at a location of LSN=128. Then, the data "D2" is recorded at a location of PSN=1324. <br>
30<br>
The replacement management information 514A is generated in response to this replacement recording. The replacement management information 514 becomes unnecessary.<br><br>
P38153 81<br>
Accordingly, the replacement management information 514 is deleted from the replacement management information list 1000.<br>
5	After the recording process described above is<br>
completed, the location of the LRA is updated to a location indicated by 500B.<br>
The replacement management information list 1000B <br>
10   (Figure 14B) is sorted by Flagl of the status information 1011, and then it is sorted by the value of PSN indicated by the original location information 1012.<br>
With reference to Figures 15A and 15B, the cases where<br>
15   the replacement management information (5) and (6) are used will be described.<br>
The host apparatus 305 instructs to record data "E"<br>
    at a location of LSN=256~X1. Herein, it is assumed that<br>
20   the recording of data "E" has failed. Then, the data "E"<br>
is recorded at a location of PSN=x2~x3. The replacement management information 516 and the replacement management information 517 are generated. Each of the replacement management information 516 and 517 indicates the first PSN 2 5 of the ECC cluster corresponding to a start location of the replacement recording and the first PSN of the ECC cluster corresponding to an end location of the replacement recording.<br>
30	In the state shown in Figures 16A and 16B, the host<br>
apparatus 305 instructs to record data "El" at a location of LSN=256~X1. Then, the data "El" is recorded at a location of PSN=x4~x5, which are an recorded area in the state shown<br><br>
P38153<br>
82<br>
in Figure 15A.<br>
The replacement management information 516A is generated as information indicating a start point of the<br>
  5    	replacement recording.  The replacement management information 517A is generated as information indicating an end point of the replacement recording.<br>
At this time, the replacement management information <br>
  10   	516 and 517 become unnecessary.  Accordingly, the replacement management information 516 and 517 are deleted from the replacement management information list 1000.<br>
In the examples shown in Figures 15A and 16A, all<br>
15   of data are recorded in the user data area 108 as a result<br>
of the replacement recording. However, it is possible to<br>
record these data in the inner spare area 106.  In this case,<br>
the replacement management information (2) and (3) are used.<br>
20	As described in reference with Figure 8A, the updated<br>
replacement management information list is recorded in the disc management information area.<br>
1-7. Procedure of reproduction process (2)<br>
25<br>
In order to reproduce the recorded data, the following reproduction process is performed.<br>
Prior to performing a reproduction process, the drive<br>
30   control section 311 performs a preparation process for the<br>
data reproduction. Such a preparation process for the data<br>
reproduction is performed, for example, in a manner similar<br>
to step S201 described above.<br><br>
P38153<br>
For example, in the state shown in Figure 13A, the<br>
host apparatus 305 outputs a reproduction instruction to the drive apparatus 310 to reproduce data "B" at a location <br>
5 	of LSN=32. The drive apparatus 310 translates the location of LSN=32 into a location of PSN=1132 in accordance with the primary logical address-physical address mapping.<br>
The drive apparatus 310 retrieves the replacement <br>
10  management information having a location of PSN=1132 as an original location in the latest replacement management information list 1000.<br>
In this case, the replacement management information <br>
15  512 is found, the drive apparatus 310 obtains a location of PSN=132 as a replacement location.<br>
The drive apparatus 310 reproduces data "B" from the location of PSN=132 and sends the reproduced data back to<br>
20   the host apparatus 305.<br>
Even if the LSN specified by the host apparatus 305 is changed, the drive apparatus 310 performs the same reproduction process.  Specifically, the drive apparatus<br>
25 	310 translates the received LSN into a PSN in accordance with the primary logical address-physical address mapping, and determines whether or not the replacement management information corresponding to the PSN is found in the replacement management information list 1000 .  If it is found,<br>
30 	then the data is reproduced from the replacement cluster. If it is not found, then the data is reproduced from the PSN.<br><br>
P38153<br>
As described above, it is possible to use the user data area 108 as an area for a replacement location without any loss in the pseudo-overwrite recording for the information recording medium 100. <br>
5<br>
1-8. Procedure of recording process (3)<br><br>
Figure 18 shows a data structure of a DFL entry 2010. The DFL entry 2010 is a different embodiment of the replacement <br>
10  management information 1010 and the replacement management information 1010B described above.<br>
The DFL entry 2010 includes status 1 2011A, status 2 2011B, a defective cluster first PSN 2012 and a replacement<br>
15	 cluster leading PSN 2013. The status 1 2011A and the status 2 2011B correspond to the status information 1011 described above. The defective cluster first PSN 2012 corresponds to the original location information 1012 described above. The replacement cluster first PSN 2013 corresponds to the<br>
20   replacement location information 1013 described above.<br>
Herein, similar to the explanation with reference to figure 5B, the defective cluster first PNS 2012 and the replacement cluster first PSN 2013 may be represented by<br>
25 	a physical address (e.g. PSN) of the first sector in the corresponding ECC cluster. This is because a mapping is performed as a unit of ECC cluster in the defective management and the pseudo-overwrite recording.<br>
30	The status 1 2011A includes at least information<br>
corresponding to Flagl and Flag2 in the replacement management information 1010B. For example, when the status 1 2011A has a value of "1000", it is determined that there<br><br>
P38153<br>
85<br>
is no replacement cluster for the replacement information. This corresponds to a case where Flag2=0 and there is no replacement cluster. In this case, a value of "0" is set to the replacement cluster first PSN 2013. <br>
5		On the other hand, when there exists a replacement cluster, a value of "0000" is set to the status 1 2011A. This corresponds to a case where Flag2=0 and there is a replacement cluster.<br>
10<br>
The status 2 2011B includes at least information corresponding to Flag3 in the replacement management information 1010B. For example, when the status 2 2011B has a value of "0000", it is determined that the replacement<br>
15   information corresponds to a single cluster.    This corresponds to a case where Flag3=00.<br>
When the status 2 2011B has a value of "0001", it<br>
is determined that the replacement information corresponds<br>
20   to a location of the first sector of a start cluster of a<br>
contiguous range including a plurality of clusters.  This<br>
corresponds to a case where Flag3=01. When the status 2 2011B has a value of "0010" , it is determined that the replacement information corresponds to a location of the last sector <br>
25 	of an end cluster of a contiguous range including a plurality of clusters.  This corresponds to a case where Flag3=10.<br>
The DFL entry 2010 can be applied to all embodiments.<br>
30	With reference to the data structure of the DFL entry<br>
2010 shown in Figure 18 and the flowchart shown in Figure 19A, an exemplary process for the replacement management information in step S113 of Figure 8A will be described in<br><br>
P38153<br>
detail.<br>
Herein, it is assumed that the replacement recording for the pseudo-overwrite recording is performed in step S112 <br>
5   shown in Figure 8A and then the process proceeds to step S113.<br>
(Step  S301)  It  is  determined  whether  the<br>
pseudo-overwrite recording is a first time replacement<br>
10   recording or a second time or more replacement recording.<br>
This determination is performed, for example, by retrieving a DFL entry 2010 having a value of the first PSN of the ECC cluster including the physical address cor-<br>
15 	responding to the logical address included in the recording instruction as a value of the defective cluster first PSN 2012 in the latest replacement management information list. The physical address corresponding to the logical address included in the recording instruction is obtained in step<br>
20    S103 shown in Figure 8A.<br>
This latest replacement management information list is reproduced from the disc management information area and is stored in the memory circuit 312 in step S101 (Figure <br>
25   8A), for example.<br>
When the corresponding replacement management information (e.g. the DFL entry 2010) is not found in the replacement management information list, it is determined<br>
30 	that the pseudo-overwrite recording is a first time replacement recording. As a result, the process proceeds to step S302.<br><br>
P38153<br>
When the corresponding replacement management information is found in the replacement management information list, it is determined that the pseudo-overwrite recording is a second time or more replacement recording.<br>
5   As a result, the process proceeds to step S304.<br>
Whether the pseudo-overwrite recording is a first time replacement recording or a second time or more replacement recording may be predetermined in another step.<br>
10	For example, it may be predetermined in step S106. The determination result in step S106 may be held and may be used in step S301.<br>
(Step S302) The first time replacement recording is <br>
15   performed as follows.<br>
The drive control section 311 creates a new DFL entry 2010 and stores it in the memory circuit 312.<br>
20	(Step S303 ) The drive control section 311 sets values<br>
to the DFL entry 2010.<br>
An appropriate value is set to the status 1 2011A<br>
of the DFL entry 2010.  For example, when the replacement<br>
25   recording is performed with the replacement cluster, the<br>
value of "0000" is set to the status 1 2011A of the DFL entry<br>
2010.<br>
A value of a first PSN of the ECC cluster located <br>
30   at the physical address corresponding to the logical address included in the recording instruction is set to the defective cluster first PSN 2012 of the DFL entry 2010.<br><br>
P38153<br>
A value of a first PSN of the replacement cluster in which the data is actually recorded in the replacement recording is set to the replacement cluster first PSN 2013 of the DFL entry 2010. <br>
5<br>
An appropriate value is set to the status 2 2011B<br>
of the DFL entry 2010. For example, when the replacement<br>
recording is performed for the single cluster, the value<br>
of "0000" is set to the status 2 2011B of the DFL entry 2010.<br>
10<br>
(Step S304) The second time or more replacement recording is performed as follows.<br>
The process proceeds to step S305 in order to update <br>
15   the DFL entry 2010 which has been found in step S301.<br>
(Step S305) The status 1 2011A of the DFL entry 2010 is updated to an appropriate value. For example, when the replacement recording is performed and there exists a<br>
20    replacement cluster, the value of "0000" is set to the status 1 2011A of the DFL entry 2010.<br>
The replacement cluster first PSN 2013 of the DFL<br>
entry 2010 is updated to a value of a first PSN of the<br>
25   replacement cluster in which the data is actually recorded<br>
in the replacement recording. That is, the location of a<br>
new replacement cluster is set.<br>
It is not necessary to update the defective cluster<br>
30   first PSN 2012 of the DFL entry 2010, since the second time<br>
or more replacement recording is performed for the same ECC<br>
cluster. The defective cluster first PSN 2012 of the DFL<br>
entry 2010 maintains the same value.<br><br>
P38153<br>
The status 2 2011B of the DFL entry 2010 is updated<br>
to an appropriate value.  For example, when the replacement<br>
recording is performed for the single cluster, the value<br>
5    of "0000" is set to the status 2 2011B of the DFL entry 2010.<br>
(Step S306) According to the process mentioned above,<br>
the replacement management information list is updated.<br>
That is, a new DFL entry 2010 is added to the replacement<br>
10   management information list or the existing DFL entry 2010<br>
in the replacement management information list is updated.<br>
Then, the replacement management information list is sorted. For example, the replacement management in-<br>
15 	formation list is sorted by the status 1 2011A. Further, the replacement management information list is sorted by the defective cluster first PSN 2012, the status 2 2011B and the replacement cluster first PSN 2013, in this order.<br>
20	The process of step S113 shown in Figure 8A is<br>
terminated. The latest replacement management information list obtained in the process is additionally recorded in the (temporary) disc management information area.<br>
25	In the exemplary process, a case is described where<br>
the replacement recording for the pseudo-overwrite recording is performed. However, the process can be also applied to the replacement recording due to the occurrence of the defective cluster.<br>
30<br>
As described in the background art with reference to Figures 33A and 33B, in the conventional defective management for the write-once optical discs, new replacement<br><br>
P38153<br>
management information is added to the replacement management information list each time the replacement recording is performed, while maintaining the existing replacement management information in the replacement management <br>
5     information list.<br>
When such a method is applied to a recording method in which the user data area is used as an area for recording a replacement cluster as described in the present embodiment,<br>
10    the number of the replacement management information is increased each time the replacement recording is performed, and the size of the replacement management information list is increased each time the replacement recording is performed. This is not preferable in implementing the drive apparatus<br>
15    and the like.<br>
In particular, in the conventional defective management for the write-once optical discs, the cluster which has been replaced with another cluster is not further<br>
20 	replaced. However, in the pseudo-overwrite recording as described in the present embodiment, it is possible to further replace the cluster which has been replaced with another cluster. Accordingly, there is a possibility that the size of the replacement management information list is much<br>
25    increased.<br>
Further, it is possible that there exists a plurality of replacement management information in the replacement management information list, wherein each of the plurality <br>
30    of replacement management information has the same value as the defective cluster first PSN 2012. Accordingly, an additional process and/or structure are required to obtain the latest replacement management information.<br><br>
P38153<br>
In the defective management for the rewritable optical discs, the replacement management information is provided for every replacement cluster, regardless of whether<br>
5   	or not the replacement cluster is actually used.<br>
When such a method is applied to a recording method in which the user data area is used as an area for recording a replacement cluster as described in the present embodiment, <br>
10 	a large amount of replacement management information is required from an initial state. This is not preferable in implementing the drive apparatus and the like.<br>
According to the method shown in Figure 19A, it is <br>
15   sufficient to generate and manage the minimum number of<br>
replacement management information. It is possible to easily find the latest replacement management information.<br>
 1-9. Procedure of recording process (4)<br>
20<br>
With reference to Figure 19B, an exemplary process of the replacement management information in the procedure of the recording process will be described in more detail.<br>
25	The respective steps shown in Figure 19B are included<br>
in step S113 shown in Figure 8A. The following description refers to a data structure of the DFL entry 2010 which is an example of the replacement management information shown in Figure 18.<br>
30<br>
Herein, it is assumed that the replacement recording for the pseudo-overwrite recording is performed in step S112 shown in Figure 8A and then the process proceeds to step<br><br>
P38153<br>
S113.<br>
(Step S601) The drive control section 311 determines whether or not the area specified by the recording instruction<br>
5   	is a contiguous range in the physical address space.<br>
For example, the drive control section 311 determines the size of the area on the physical address space based on the recording location specified by the recording<br>
10	instruction and the size of the data to be recorded specified by the recording instruction. When the size of the area on the physical address space which is thus determined is greater than the size of one ECC cluster, the drive control section 311 determines that the area specified by the recording<br>
15	instruction is a contiguous range in the physical address space.<br>
If the determination result in step S601 is "Yes", then the process proceeds to step S602. If the determination <br>
20    result in step S601 is "No", then the process proceeds to step S603.<br>
(Step S602) The drive control section 311 determines whether or not the area in which the data is actually recorded<br>
25   in step S112 is a contiguous range in the physical address space.<br>
For example, the size of the area in which the data is actually recorded in step S112 is equal to the size of <br>
30 	the area specified by the recording instruction, the drive control section 311 determines that the area in which the data is actually recorded in step S112 is a contiguous range in the physical address space.<br><br>
P38153<br>
If the determination result in step S602 is "Yes", then the process proceeds to step S604. If the determination result in step S602 is "No", then the process proceeds to <br>
5    step S603.<br>
(Step S603) The drive control section 311 performs the process described with reference to Figure 19A, for example.<br>
10<br>
(Step S604) The drive control section 311 determines whether the pseudo-overwrite recording is a first time replacement recording or a second time or replacement recording.<br>
15<br>
Such a determination is performed, for example, by retrieving the latest replacement management information list to determine whether or not a first DFL entry 2010 (status 2 2011B = "0001" ) and a second DFL entry 2010 (status 2 2011B<br>
20 	= " 0010 " ) , each of which having original location information indicating the same area as the contiguous range determined in step S601, are found in the replacement management information list.<br>
25		When the first DFL entry 2010 and the second DFL entry<br>
2010 are not found in the replacement management information list, it is determined that the pseudo-overwrite recording is a first time replacement recording. As a result, the<br>
process proceeds to step S605. <br>
30<br>
When the first DFL entry 2010 and the second DFL entry 2010 are found in the replacement management information list, it is determined that the pseudo-overwrite recording<br><br>
P38153<br>
94<br>
is a second time or more replacement recording. As a result, the process proceeds to step S607.<br>
(Step S605) The drive control section 311 creates <br>
5    new first DFL entry 2010 and a new second DFL entry 2010   and stores them in the memory circuit 312.<br>
( Step S606 ) The drive control section 311 sets values to the first DFL entry 2010 and the second DFL entry 2010. <br>
10<br>
A value of "0000" indicating that the replacement recording is performed and there exists a replacement cluster is set to the status 1 2011A of the first DFL entry 2010.<br>
15	A value of a first PSN of the ECC cluster including<br>
a start location of the area specified by the recording instruction is set to the defective cluster first PSN 2012 of the first DFL entry 2010.<br>
20	A value of a first PSN of the ECC cluster including<br>
a start location of the contiguous range in which the data is actually recorded is set to the replacement cluster first PSN 2013 of the first DFL entry 2010.<br>
25	A value of "0001" indicating a start location of the<br>
contiguous range is set to the status 2 2011B of the first DFL entry 2010.<br>
A value of "0000" indicating that the replacement<br>
30   recording is performed and there exists a replacement cluster<br>
is set to the status 1 2011A of the second DFL entry 2010.<br>
A value of a first PSN of the ECC cluster including<br><br>
P38153<br>
an end location of the area specified by the recording instruction is set to the defective cluster first PSN 2012 of the second DFL entry 2010. The end location of the area specified by the recording instruction is calculated, for<br>
5 	example, by the physical address corresponding to the logical address and the length of the data to be recorded, which are specified by the recording instruction.<br>
A value of a first PSN of the ECC cluster including <br>
10   an end location of the contiguous range in which the data is actually recorded is set to the replacement cluster first PSN 2013 of the second DFL entry 2010.<br>
A value of "0010" indicating an end location of the <br>
15    contiguous range is set to the status 2 2011B of the second DFL entry 2010.<br>
(Step S607) The drive control section 311 performs<br>
an update process for the first DFL entry 2010 and the second<br>
20   DFL entry 2010 found in step S604.  Specifically, the update<br>
process is performed by setting values to the first DFL entry<br>
    2010 and the second DFL entry 2010 in step S608.<br>
(Step S608) The drive control section 311 sets values <br>
25   to the first DFL entry 2010 and the second DFL entry 2010.<br>
A value of a first PSN of the ECC cluster including<br>
a start location of the contiguous range in which the data<br>
is actually recorded is set to the replacement cluster first<br>
30   PSN 2013 of the first DFL entry 2010.  That is, the start<br>
location of a new replacement range is set.<br>
It is not necessary to update the defective cluster<br><br>
P38153<br>
first PSN 2012 of the first DFL entry 2010, since the second time or more replacement recording is performed for the same ECC cluster.  The defective cluster first PSN 2012 of the first DFL entry 2010 maintains the same value. <br>
5<br>
A value of a first PSN of the ECC cluster including<br>
an end location of the contiguous range in which the data<br>
is actually recorded is set to the replacement cluster first<br>
PSN 2013 of the second DFL entry 2010.  That is, the end<br>
10   location of a new replacement range is set.<br>
It is not necessary to update the defective cluster<br>
first PSN 2012 of the second DFL entry 2010, since the second<br>
time or more replacement recording is performed for the same<br>
15   ECC cluster. The defective cluster first PSN 2012 of the<br>
second DFL entry 2010 maintains the same value.<br>
( Step S609) According to the process mentioned above, the replacement management information list is updated. <br>
20   That is, a new first DFL entry 2010 and a new second DFL entry 2010 are added to the replacement management information list or the existing first DFL entry 2010 and the<br>
existing second DFL entry 2010 in the replacement management information list are updated.<br>
25<br>
Then, the replacement management information list is sorted. For example, the replacement management information list is sorted by the status 1 2011A. Further, the replacement management information list may be sorted<br>
30   by the defective cluster first PSN 2012, the status 2 2011B and the replacement cluster first PSN 2013, in this order.<br>
The process of step S113 shown in Figure 8A is<br><br>
P38153<br>
terminated. The latest replacement management information list obtained in the process is additionally recorded in the (temporary) disc management information area.<br>
5	In the exemplary process, a case is described where<br>
the replacement recording for the pseudo-overwrite recording<br>
is performed. However, the process can be also applied to the replacement recording due to the occurrence of the defective cluster. <br>
10<br>
With reference to Figures 20A to 24B, the procedure of the data recording will be further described.<br>
Figure 20A shows a physical address space and a <br>
15 	logical address space on the information recording medium 100, which is similar to Figure 13A and the like. Figure 20A shows a state in which data " AO" is recorded at the location of LSN=0 immediately after the formatting process. In the physical space, data "AO" is recorded in the location of <br>
20   PSN=1000.<br>
The location of LSN=0 and the location of PSN=1000 maintain the relationship of the primary logical address-physical address mapping. <br>
25<br>
 	Figure 20B shows a replacement management information list corresponding to Figure 20A. The replacement management information list includes header information 1001 only and does not include any replacement management <br>
30   information.<br>
In the state shown in Figure 20A, it is assumed that the drive apparatus 310 is instructed by the host apparatus<br><br>
P38153<br>
305 to record data "Al" at the location of LSN=0.<br>
Figure 21A shows a state in which the recording of data "Al" is completed. <br>
5<br>
As shown in Figure 21A, data "Al" is recorded at the<br>
location of PSN=1132 in the user data area 108 instead of<br>
the location of PSN=1000in the user data area 108 , for example .<br>
This is because the data has been already recorded at the<br>
10   location of PSN=1000.<br>
This replacement recording is a first time replacement recording. Accordingly, in accordance with step S302 and the subsequent steps shown in Figure 19A, the process<br>
15 	for the first time replacement recording is performed. As a result, the DFL entry 2100A shown in Figure 21B is added to the replacement management information list.<br>
Next, in the state shown in Figure 21A, it is assumed<br>
20   that the drive apparatus 310 is instructed by the host<br>
apparatus 305 to record data "A2" at the location of LSN=0.<br>
Figure 22A shows a state in which the recording of data "A2" is completed. <br>
25<br>
As shown in Figure 22A, data "A2" is recorded at the<br>
location of PSN=1164 in the user data area 108 instead of<br>
the location of PSN=1000 in the user data area 108 , for example.<br>
This is because the data has been already recorded at the<br>
30   location of PSN=1000.<br>
This replacement recording is a second time or more replacement recording.  Accordingly, in accordance with<br><br>
P38153<br>
99<br>
step S304 and the subsequent steps shown in Figure 19A, the process for the second time or more replacement recording is performed. As a result, the DFL entry 2100A is updated to the DFL entry 2100B shown in Figure 22B. That is, any<br>
5 	DFL entry is not added to the replacement management information list.<br>
Next, in the state shown in Figure 22A, it is assumed<br>
that the drive apparatus 310 is instructed by the host<br>
10   apparatus 305 to record data "BO" at the location of LSN=96<br>
and to record data "CO" at the location of LSNs = 128 to 192.<br>
Figure 23A shows a state in which the recording of data "BO" and data "CO" is completed. <br>
15<br>
As shown in Figure 23A, it is assumed that an error occurs during the verify process for verifying the recording of data "BO" at the location of PSN=1192.<br>
20	In this case, data "BO" is recorded at the location<br>
of PSN=x10 in the outer spare area 107 instead of the location of PSN=1193 in the user data area 108, for example.<br>
This replacement recording is a first time re-<br>
25 	placement recording. Accordingly, in accordance with step S302 and the subsequent steps shown in Figure 19A, the process for the first time replacement recording is performed. As a result, the DFL entry 2101A shown in Figure 23B is added to the replacement management information list. <br>
30		It is assumed that the verify process for verifying the recording of data "CO" has been successfully completed. In this case, the replacement management information list<br><br>
P38153 100<br>
is  maintained without any change.<br>
Next, in the state shown in Figure 23A, it is assumed that the drive apparatus 310 is instructed by the host <br>
5     apparatus 305 to record data "CI" at the location of LSNs = 128 to 192.<br>
Figure 24A shows a state in which the recording of data "CI" is completed. <br>
10<br>
As shown in Figure 24A, data "CI" is recorded at the<br>
location of PSNs = 1324 to 1388 in the user data area 108 instead<br>
of the location of PSNs=1288 to 1292 in the user data area<br>
108, for example.  This is because the data has been already<br>
15   recorded at the location of PSNs=1288 to 1292.<br>
This replacement recording is a first time replacement recording. Accordingly, in accordance with step S302 and the subsequent steps shown in Figure 19A, the process<br>
20 	for the first time replacement recording is performed. As a result, the DFL entry 2102A and the DFL entry 2103A shown in Figure 24B are added to the replacement management information list.<br>
25	This replacement recording is based on a replacement<br>
of the contiguous range 2200 (PSNs= 1228 to 1292) with the contiguous range 2201 (PSNs = 1324 to 1388) . The replacement is represented using the DFL entry 2012A indicating start location of the replacement range and the DFL entry 2103A<br>
30   indicating end location of the replacement range.<br>
Thus, in the pseudo-overwrite recording which replaces the contiguous range 2200 with the contiguous range<br><br>
P38153 101<br>
2201 in the user data area 108, the drive apparatus 310 generates a first replacement management information (DFL entry 2102A) for mapping the start location of the contiguous range 2200 to the start location of the contiguous range<br>
5 	2201 and a second replacement management information (DFL entry 2103A) for mapping the end location of the contiguous range 2200 to the end location of the contiguous range 2201.<br>
Although the replacement recording is performed for <br>
10 	the contiguous range including three ECC clusters, only two DFL entries are added to the replacement management information list. This is an effect obtained by using the DFL entry 2102A and the DFL entry 2103A which map the contiguous range 2200 to the contiguous range 2201 in the user data <br>
15   area 108.<br>
Regarding the replacement of the contiguous range, when the pseudo-overwrite recording is a second time or more replacement recording, it is needless to say that the existing<br>
20   DFL entries are updated.<br>
(Embodiment 2)<br>
2-1. Procedure of NWA determining process<br>
25<br>
Hereinafter, a method for determining a next writable address represented by a logical address (hereinafter, "logical NWA") will be described. The drive device 310 returns the logical NWA back to the host apparatus 305 in<br>
30   response to a request from the host apparatus 305.<br>
The logical NWA is determined in accordance with the following procedure in the present invention.<br><br>
P38153<br>
An ECC cluster which is next to the ECC cluster including the physical sector indicated by the LRA is determined. This ECC cluster is a next writable ECC cluster.<br>
5 	The first physical sector of the next writable ECC cluster is a next writable address. The next writable address represented by a physical address is the NWA described above.<br>
The logical NWA has a value which is obtained by <br>
10   translating the value of the PSN indicated by the NWA into a value of the LSN in accordance with the primary logical address-physical address mapping.<br>
Several specific examples will be described below.<br>
15		<br>
In the state shown in Figure 12, the LRA 500 indicates<br>
a leading position of the user data area 108.  In this state,<br>
the NWA in the physical address space is PSN=1100. The LSN<br>
corresponding to PSN=1000 is LSN=0. Therefore, the logical<br>
20   NWA=0.<br>
In Figure 13A, the host apparatus 305 obtains the logical NWA from the drive apparatus 310 and instructs the drive apparatus 310 to record data "A" at the location of<br>
25   LSN=0.<br>
In the state immediately after the recording of data "A" is completed, the LRA of the track #1 indicates an ECC cluster including the location of PSN=1132. In this state,<br>
30 	the NWA is PSN=1132. Accordingly, the logical NWA is LSN=32. The host apparatus 305 can instruct the drive apparatus 310 to record data "B" at the logical NWA (i.e. LSN=32).<br><br>
P38153<br>
In the state immediately after the recording of data<br>
"B" is completed, the LRA of the track #1 indicates a physical<br>
sector within an ECC cluster including the location of<br>
PSN=1132. In this state, the NWA is PSN=1164. Accordingly,<br>
5    the logical NWA is LSN=64.<br>
The feature of the method for determining a logical NWA described above is to determine the logical NWA to maintain the relationship of the primary logical address-physical<br>
10 	address mapping. Specifically, the NWA is determined from the LRA within a track and then the logical NWA is obtained in accordance with the primary logical address-physical address mapping. As a result, the replacement management information 1010B is not required for the new data recording.<br>
15<br>
In Figure 14A, it is possible that the host apparatus 305 erroneously holds a value corresponding to the LRA 501B as the logical NWA, even through the actual latest logical NWA should correspond to the LRA 500B.<br>
20<br>
For example, such a state may be caused when the drive apparatus 310 performs a recording operation for recording data at the location after PSN=1292 as an operation independent of the host apparatus 305 and the host apparatus<br>
25 	305 does not obtain the latest logical NWA from the drive apparatus 310.<br>
In this state, when the host apparatus 305 instructs the drive apparatus 310 to record new data, the host apparatus <br>
30 	305 outputs a recording instruction for recording data at the logical NWA corresponding to the LRA 501B. However, the drive apparatus 310 records the data at the location of PSN=1336.<br><br>
P38153<br>
This recording causes a replacement recording. Accordingly, new replacement management information is required. <br>
5<br>
On the other hand, when the host apparatus 305 instructs the drive apparatus 310 to record new data, after it obtains the logical NWA corresponding to the latest LRA 500B from the drive apparatus 310, the recording does not<br>
10 	cause any replacement recording. Accordingly, any new replacement management information is not required.<br>
In Figures 15A and 16A, a similar state may be caused.<br>
In Figures 15A and 16A, it is possible that the host apparatus<br>
15   305 erroneously holds a value corresponding to the LRA 501C<br>
as the logical NWA, even through the actual latest logical<br>
NWA should correspond to the LRA 500C and the LRA 500D.<br>
Therefore, it is desirable that the host apparatus <br>
20   305 obtains the latest logical NWA before recording a new data.<br>
In summary, when the host apparatus 305 instructs the drive apparatus 310 to record new data, the host apparatus<br>
25 	305 outputs a request to the drive apparatus 310 immediately before step S102 shown in Figure 8A, for example, in order to obtain the latest logical NWA from the drive apparatus 310. Upon receipt of the request, the drive apparatus 310 determines the logical NWA from the LRA and the NWA in<br>
30 	accordance with the process described above and returns the logical NWA back to the host apparatus 305.<br>
Upon receipt of the logical NWA, the host apparatus<br><br>
P38153 105<br>
305 generates a next recording instruction based on the logical NWA and outputs the next recording instruction to the drive apparatus 310.<br>
5	By performing the operations described above, the<br>
replacement management information 1010B is not required for recording new data. The replacement management information 1010B is required for performing the replacement recording only.<br>
10<br>
As a result, it is possible to restrict increasing the data amount of the replacement management information list 1000. This provides an effect such as the reduction of  the  amount  of  processing  in  the  data  re-<br>
15    cording/reproduction, the reduction of the size of the memory, the reduction of the data size on the information recording medium 100 and the like.<br>
(Embodiment 3) 20<br>
3-1. Procedure of recording process (1)<br>
A method for determining NWA described in the embodiment 2 causes a state in which a particular LSN is<br>
25    not used.<br>
For example, in Figure 14A, the logical sector at the location of LSN=96 is a logical sector in which any data has not been recorded when it is seen from the host apparatus <br>
30   305 or the file system.<br>
Such a logical sector is referred to as an unrecorded logical sector or a unused logical sector, an orphan logical<br><br>
P38153<br>
sector and the like.<br>
A logical cluster consisting of the unrecorded<br>
logical sectors is referred to as an unrecorded logical<br>
5    cluster. For example, in Figure 14A, the logical cluster<br>
corresponding to the location of LSNs = 96 to 127 is an<br>
unrecorded logical cluster.<br>
Similarly,  in Figure 15A,  the logical sector <br>
10   corresponding to the location of LSN=X2 is an unrecorded  logical sector.<br>
As shown in Figure 14A and the like, the LSNs are assigned to the unrecorded logical sectors in the same manner<br>
15 	as other normal logical sectors. Further, it is the feature of the method for determining logical NWA according to the present embodiment that the LSNs of the logical sectors subsequent to the unrecorded logical sector are not changed.<br>
20	When it is instructed to record data at the unrecorded<br>
logical sector, the pseudo-overwrite recording is performed in a similar manner as the embodiments described above. For example, the following process is performed.<br>
2 5	Herein, in the state shown in Figure 14A, it is assumed<br>
that it is instructed to record data "F" at the location of LSN=96.<br>
In this case, the drive apparatus 310 translates <br>
30    LSN=96 into PSN=1196 in accordance with the primary logical address-physical address mapping.<br>
By comparing the location of PSN=1196 with the<br><br>
P38153<br>
107<br>
location indicated by the NWA, it is recognized that the data is recorded at the location of PSN=1196.<br>
Then, the pseudo-overwrite recording is performed <br>
5    in a similar manner as the other embodiments described above.<br>
In this case, the drive apparatus 310 records data "F" at the location indicated by the NWA (e.g. the location of PSN=1336) and generates replacement management in-<br>
10   formation 518.<br>
Thus , the data recording is performed for the location of LSN=96. As a result, a logical cluster corresponding to the location of LSN=96 changes from the unrecorded logical <br>
15   cluster to the normal logical cluster.<br>
A logical cluster corresponding to the location of LSNs=256 to 287 associated with the location of PSN=1336 in accordance with the primary logical address-physical<br>
20   address mapping newly becomes an unrecorded cluster.<br>
Figures 17A and 17B show a state after the recording of data "G" is completed.<br>
25	3-2- Procedure of reproduction process (1)<br>
In Figure 14A, the logical cluster at the location of LSN=224 is an unrecorded logical cluster.<br>
30	The physical cluster corresponding to the unrecorded<br>
logical cluster at the location of LSN=224 is a physical cluster at the location of PSN=1324. The relationship between the LSNs and the PSNs are predetermined in accordance<br><br>
P38153<br>
with the primary logical address-physical address mapping.<br>
The physical cluster at the location of PSN=1324 is related to the physical cluster at the location of PSN=1228<br>
5    by the replacement management information 514.<br>
The physical cluster at the location of PSN=1228 is mapped to the logical cluster at the location of LSN=128 in accordance with the primary logical address-physical<br>
10   address mapping.<br>
Thus , the physical cluster at the location of PSN=1228 is assigned to the logical cluster at the location of LSN=128 and the unrecorded logical cluster at the location of LSN=224 . <br>
15<br>
The procedure of the reproduction process will be described in a case where two logical clusters are assigned to one physical cluster.<br>
20	The host apparatus 305 outputs a reproduction<br>
instruction for the location of LSN=128 to the drive apparatus 310. Upon the receipt of the reproduction instruction, the drive apparatus 310 translates the LSN into the PSN in accordance with the primary logical address-physical address<br>
25   mapping. The PSN is referred to as a reproduction PSN.<br>
In this case, the reproduction PSN is PSN=1228.<br>
Replacement management information having the location of<br>
PSN=1228 as the replacement location is retrieved in the<br>
30   replacement management information list. As a result, the<br>
replacement management information 514A is found.<br>
The replacement cluster indicated by the replacement<br><br>
P38153 109<br>
management information 514A is a physical cluster at the location of PSN=1324. The data recorded in the physical cluster at the location of PSN=1324 is reproduced.<br>
5	The host apparatus 305 outputs a reproduction<br>
instruction for the location of LSN=224 to the drive apparatus 310. Upon the receipt of the reproduction instruction, the drive apparatus 310 translates the LSN into the reproduction PSN in accordance with the primary logical address-physical<br>
10   address mapping.<br>
In this case, the reproduction PSN is PSN=1324.<br>
Replacement management information having the location of<br>
PSN=1324 as the replacement location is retrieved in the<br>
15   replacement management information list.  However, such<br>
replacement management information is not found.<br>
The drive apparatus 310 reproduces data recorded in the physical cluster at the location of PSN=1324. <br>
20		According to the reproduction process described above, when the host apparatus 305 outputs a reproduction instruction for the location of an unrecorded logical sector in which any data has not been logically recorded, it is<br>
25 	possible to reproduce data recorded in the physical sector corresponding to the unrecorded logical sector.<br>
As a result, it is seen from the file system and the like at the side of the host apparatus 305 that there is<br>
30 	no exceptional area on the information recording medium 100.  Further, it is not necessary to implement a complex error process in the system structure. It is possible to configure the system with a simplified implementation.<br><br>
P38153 110<br>
Upon the receipt of a reproduction instruction for an unrecorded logical sector, if the drive apparatus 310 reproduces data recorded in the physical cluster corre-<br>
5 	sponding to the unrecorded logical sector, then the data which should not be essentially reproduced is reproduced. If such a reproduction is inconvenient for the system configuration, it is possible to adopt the following procedure for the reproduction process.<br>
10<br>
The drive apparatus 310 translates the LSN specified by the reproduction instruction into a PSN in accordance with the primary logical address-physical address mapping, and retrieves the replacement management information 1010B<br>
15 	having the original location information 1012 corresponding to the translated PSN in the replacement management information list 1000.<br>
If the replacement management information 1010B <br>
20 	having the original location information 1012 corresponding to the translated PSN is found, the data is reproduced from the ECC cluster at the replacement location indicated by the replacement location information 1013 of the replacement management information 1010B in a similar manner as the other <br>
25   embodiments described above.<br>
If it is not found, the drive apparatus 310 retrieves<br>
the replacement management information 1010B having the<br>
replacement location information 1013 corresponding to the<br>
30   translated PSN in the replacement management information<br>
list 1000.<br>
If the replacement management information 1010B<br><br>
P38153 111<br>
having the replacement location information 1013 corresponding to the translated PSN is found, the ECC cluster indicated by the replacement location information 1013 is determined as the replacement cluster in which the data has<br>
5    been already recorded.<br>
Then, the drive apparatus 310 does not reproduce the<br>
data from the replacement cluster.  Instead, the drive<br>
apparatus 310 returns a predetermined data (e.g. data having<br>
10   a value of "00...0") as the reproduced data back to the host<br>
apparatus 305.<br>
According to the reproduction process described<br>
above, when it is instructed to reproduce data from the<br>
15   unrecorded logical sector, the data can be reproduced<br>
appropriately from the physical sector corresponding to the<br>
unrecorded logical sector.<br>
Such a reproduction process can be performed when <br>
20    the drive apparatus 310 receives the reproduction instruction from the host apparatus 305 in each step of the reproduction process described with reference to Figure 10.<br>
	3-3. Comparison between procedures of NWA de-<br>
25	termining process<br>
Unlike the embodiment described above, a method for determining a logical NWA will be described.  In this method, any unrecorded logical sector does not occur. <br>
30<br>
In this method, the logical LRA is managed, and a new data is recorded at the logical NWA which is adjacent to the logical LRA.<br><br>
P38153<br>
The LSN indicating the logical NWA is translated into<br>
a PSN in accordance with the primary logical address-physical address mapping.  The translated PSN is referred to as <br>
5    "PSN-1".<br>
The data is actually recorded at the NWA within an ECC cluster which is next to the ECC cluster including the PSN indicated by the LRA 213. The PSN indicated by the NWA <br>
10   is referred to as "PSN-2".<br>
The replacement recording is performed with the original location of PSN-1 and the replacement location of PSN-2.<br>
15		Figure 25 shows a data structure of the track management information 3210 according to the present embodiment. The track management information 3210 is used to manage the logical NWA.<br>
20		In the track management information 3210 shown in Figure 25, last recorded logical address information within track 3214 is newly defined.<br>
25	The last recorded logical address information within<br>
track 3214 is used to manage the last recorded address represented by LSN in the logical address space, whereas the last recorded address information within track (LRA) 213 is used to manage the last recorded address represented<br>
30   by PSN in the physical address space.<br>
The drive apparatus 310 can determine the logical<br>
NWA for each track by referring to the last recorded logical<br><br>
P38153 113<br>
address information within track 3214.<br>
The last recorded logical address information within track 3214 is updated in the following manner. <br>
5<br>
The value of "0" is set to the last recorded logical address information within track 3214 as an initial value. The drive apparatus 310 receives a recording instruction including a LSN. When the LSN in the recording instruction <br>
10 	is greater than the last recorded logical address information within track 3214, the drive apparatus 310 updates the last recorded logical address information within track 3214 to the LSN.<br>
15	According to the update process described above, it<br>
is possible to maintain the last recorded logical address information within track 3214 as being a maximum value.<br>
Figure 26A shows a data structure after the recording<br>
20   of data "A", "B", "C", "D", "F" and "G" are completed in<br>
the same order as in Figures 13A, 14A and 17A in accordance<br>
with the procedure of NWA determining process described<br>
above.<br>
25	In Figure 26B,  all of defective clusters are<br>
registered as the replacement management information (7). However, it is possible to delete these replacement management information (7) from the replacement management information list 1000F.  By deleting these, the size of the<br>
30    replacement management information list 1000F can be reduced.<br>
By comparing the replacement management information list 1000E shown in Figure 17B with the replacement management<br><br>
P38153<br>
-114-<br>
information list 1000F shown in Figure 26B, it is understood that the number of the replacement management information in the replacement management information list 1000E is smaller than the number of the replacement management <br>
5 	information in the replacement management information list 1000F.<br>
By comparing these lists after deleting replacement management information (7), it is also understood that the<br>
10 	number of the replacement management information in the replacement management information list 1000E is much smaller than the number of the replacement management information in the replacement management information list 1000F.<br>
15	Accordingly, the method for determining NWA while<br>
allowing the occurrence of the unrecorded logical sector as described in embodiment 1 and embodiment 2 is more desirable rather than the method which refers to Figure 26A while not allowing the occurrence of the unrecorded logical sector<br>
20 	in that the size of replacement management information list can be reduced.<br>
By maintaining the replacement management information ( 7) in the replacement management information list<br>
25 	1000F, it is possible to recognize the distribution of the defective clusters on the information recording medium 100. The distribution of the defective clusters can be used to optimize the reproduction process. Such an optimization is made, for example, by reading data in advance without reading<br>
30    data from the defective sectors.<br>
(Embodiment 4)<br><br>
P38153<br>
115<br>
The procedure of the data recording according to the present embodiment will be described.<br>
Figure 27 shows an exemplary data structure of the <br>
5 	information recording medium 100 before performing the data recording according to the present embodiment. In Figure 27, each symbol of triangle indicates a boarder between the ECC clusters. Hereinafter, even in other figures, each symbol of triangle has the same meaning. <br>
10<br>
In the state shown in Figure 27, it is assumed that<br>
the host apparatus 305 outputs a recording instruction for<br>
data "Dl" 4622 and data "El" 4623 to the drive apparatus<br>
310. In this case, the procedure of the recording process<br>
15    will be described.<br>
The data recording for data "Dl" 4622 is determined as the pseudo-overwrite recording at the location of PSN=a0 in the recorded area 4600, for example. <br>
20		Prior to outputting the recording instruction, the host apparatus 305 outputs a request for the logical NWA to the drive apparatus 310.<br>
2 5	Upon the receipt of the request for the logical NWA,<br>
the drive apparatus 310 determines NWA 4611A from LRA 4610A and returns the logical NWA corresponding to the NWA 4611A back to the host apparatus 305.<br>
30	The host apparatus 305 outputs a recording in-<br>
struction for recording data "Dl" 4622 at the location of LSN=A0 corresponding to PSN=a0 to the drive apparatus 310. and then outputs a recording instruction for recording data<br><br>
P38153<br>
116	<br>
"El" 4623 at the location of LSN=A2 corresponding to NWA 4611A (PSN=a2) to the drive apparatus 310.<br>
Figure 28 shows a recording result after the drive<br>
5   apparatus 310 performs a recording process for data "Dl"<br>
4622 and a recording process for data "El" 4623 in accordance<br>
with the order of the recording instructions as instructed<br>
by the host apparatus 305.<br>
10	In this case, the data recording for data "Dl" 4622<br>
is determined as the pseudo-overwrite recording for the recorded area 4600. As a result, data "Dl" 4622 is recorded at the location of NWA 4611A (PSN=a2) instead of the location of PSN=a0.  Then, the NWA 4611A is updated to the NWA 4611B<br>
15    (PSN=a3).<br>
As a result of this replacement recording, data "Dl" 4622 is recorded at the location of PSN=a2. As a result, data "El" 4623 is recorded at the location of NWA 4611B (PSN=a3)<br>
20    instead of the location of PSN=a2.<br>
Thus, although the host apparatus 305 outputs a<br>
recording instruction for recording data "El" 4623 at the<br>
location of LSN=A2 corresponding to NWA 4611A (PSN=a2) as<br>
25    described above, data "El" 4623 is recorded at the location<br>
of PSN=a3 which is deferent from the location as instructed.<br>
In this case, the replacement management information  1010 for data "Dl" 4622 is generated, and the replacement<br>
30    management information 1010 for data "El" 4623 is also<br>
generated.  This causes a problem that the size of the<br>
replacement management information list 1000 is increased.<br><br>
P38153<br>
This problem is caused by the drive apparatus 310 performing the replacement recording which is not expected by the host apparatus 305.<br>
5	After performing the replacement recording by the<br>
drive apparatus 310, it is necessary to perform further replacement recording as the host apparatus 305 outputs a recording instruction. This results in increasing the size of the replacement management information list 1000.<br>
10<br>
Hereinafter, a method according to the present embodiment will be described. In this method, the replacement management information 1010 for data "El" 4623 is not generated during the recording process.<br>
15<br>
In the present embodiment, in the state shown in Figure 27, the host apparatus 305 first outputs a recording instruction for the appending recording. Then, the host apparatus 305 outputs a recording instruction for the<br>
20   	pseudo-overwrite recording after outputting the recording instruction for the appending recording.<br>
Figure 29 shows a recording result after the drive apparatus 310 performs recording processes in accordance<br>
25   with the order of the recording instructions as instructed by the host apparatus 305.<br>
The file system operating on the host apparatus 305<br>
can determine the order of the recording instructions, since<br>
30    it manages updating all existing files and creating new files .<br>
In Figure 29, data "El" 4623B is recorded at the location of NWA 4611A (PSN=a2), and data "D1" 4622B is recorded<br><br>
P38153 118<br>
at the location of PSN=a4.<br>
The host apparatus 305 outputs a recording instruction for recording data "El" 4623B at the location of<br>
5 	NWA 4611A (PSN=a2) as described above. In the present embodiment, data "El" 4623B is recorded at the location of PSN=a2 which is the same as the location as instructed. This data recording is not a replacement recording.<br>
10	Thus, the replacement management information 1010<br>
for data "El" 4623B is not generated. As a result, it is possible to avoid increasing the size of the replacement management information list 1000.<br>
15	In either case shown in Figure 28 or the case shown<br>
in Figure 29, the same number of the replacement management information 1010 is required in order to record data "Dl" 4622. Although the recording location (i.e. replacement location) of data "Dl" 4622 are different from each other<br>
20 	in Figures 28 and 29, the required number of the replacement management information 1010 is maintained.<br>
As described above, when the host apparatus 305 instructs the drive apparatus 310 to perform both of the<br>
25 	pseudo-overwrite recording and the appending recording, the host apparatus 305 outputs a recording instruction for the appending recording to the drive apparatus 310 prior to outputting a recording instruction for the pseudo-overwrite recording to the drive apparatus 310.  This makes it possible<br>
30 	to avoid generating the replacement management information 1010, thereby reducing the size of the replacement management information list 1000.<br><br>
P38153 119<br>
(Embodiment 5)<br>
Herein, it is assumed the host apparatus 305 divides data having a size into a plurality of portions, such that<br>
5 	each of the plurality of portions has a size of one ECC cluster. It is also assumed that the host apparatus 305 sequentially outputs a recording instruction for each portion of the data as a recording unit to the drive apparatus 310.<br>
10	The drive apparatus 310 records the respective<br>
portions of the data contiguously. It is assumed that a defective cluster including the recording location is detected, and a cluster which is adjacent to the defective cluster is used as a replacement cluster in order to replace<br>
15    the defective cluster with the replacement cluster.<br>
In this case, the replacement recording is required<br>
for each recording unit after the recording location.  In<br>
the replacement recording, each cluster is replaced by an<br>
20   adjacent cluster which is located in a direction along which<br>
the PSNs increase.<br>
In this case, the replacement management information is required for each recording unit. Accordingly, when the <br>
25 	size of data to be recorded is very large, the large number of replacement management information is required, thereby increasing the size of the replacement management information list 1000.<br>
30	Hereinafter, a method according to the present<br>
embodiment will be described with reference to Figure 30. This method is effective to reduce the size of the replacement management information list 1000.<br><br>
P38153<br>
120<br>
In Figure 30, a replacement recording is performed in accordance with the recording instruction from the host apparatus 305.  In the replacement recording, it is assumed <br>
5   	that the original location is original cluster 5700.<br>
The replacement location of the replacement recording is determined in the following manner.<br>
10	In Figure 30, the replacement cluster may be allocated<br>
in one of the unrecorded area 5601A (in track #N 5602) , the unrecorded area 5612 (In track #N+1 5610), the unrecorded area 5622 (in track #N+2 5620) and the unrecorded area 5632 (in track #N+3 5630).  Each of these unrecorded areas is a<br>
15    candidate area for the replacement cluster.<br>
Herein, a distance between the location of the original cluster 5700 (e.g. the location of the first physical sector in the original cluster 5700) and the location of<br>
20 	the candidate area for the replacement cluster (e.g. the location of the NWA in the open track) is evaluated. The respective distances with respect to the respective candidate areas for the replacement cluster are D13, D12, D10 and D11, as shown in Figure 30.<br>
25<br>
It is assumed that the respective distances satisfy the relationship of D13 &gt; D12 &gt; D11 &gt; D10.<br>
By selecting the unrecorded area 5622 which has a<br>
30    minimum distance D10 as an area for the replacement cluster,<br>
it is possible to minimize a distance between the original<br>
cluster and the replacement cluster. As a result, it is<br>
possible to minimize an access time in the data reproduction.<br><br>
P38153<br>
However, the unrecorded, area 5622 is included in the same track #N+2 5620 as the original cluster 5700. Accordingly, when the unrecorded area 5622 is selected as an<br>
5 	area for the replacement cluster, it may cause a problem that the size of the replacement management information list 1000 is increased in the case where the drive apparatus 310 sequentially receives a plurality of recording instructions from the host apparatus 305 as described above. <br>
10<br>
According to the present embodiment, an unrecorded area which has a minimum distance from the original cluster is selected as an area for the replacement cluster. However,<br>
during the selection process, an unrecorded area included<br>
15   in the same track as the original cluster is excluded from the selection.<br>
In Figure 30, the unrecorded area 5622 which has a minimum distance D10 is excluded from the selection. The<br>
20   unrecorded area 5632 which has the next minimum distance D11 is selected as an area for the replacement cluster.<br>
Thus, upon receipt of the recording instruction for<br>
the original cluster 5700 from the host apparatus 305, the<br>
25   drive apparatus 310 allocates the replacement cluster 5710<br>
at the location of NWA in the unrecorded area 5632 and records<br>
data in the replacement cluster 5710.<br>
The drive apparatus 310 generates the replacement <br>
30   management information which maps the original cluster 5700 to the replacement cluster 5710 and records the replacement management information.<br><br>
P38153<br>
As described in steps S107 and S112 (Figure 8A), when the drive control section 311 according to the present invention performs the pseudo- overwrite recording, it controls the recording/reproduction section 314 to record<br>
5 	data at a specific location in the user data area 108, which is other than the location indicated by the physical address corresponding to the logical address included in the received recording instruction.<br>
10	In the present embodiment, the specific location is<br>
the NWA within an open track which is different from the track determined in step S104 (Figure 8A).<br>
Further, the NWA within the open track indicates a <br>
15   location which is the closest to the location indicated by the physical address corresponding to the logical address included in the recording instruction.<br>
According to the procedure of the recording process , <br>
20 	even if the host apparatus 305 further outputs a recording instruction to the drive apparatus 310, the data recording for the unrecorded area 5622 does not cause any replacement recording. The addition of the replacement management information is not required. <br>
25<br>
A distance between the original location and the<br>
replacement location becomes minimum, except for a case where<br>
the original location and the replacement location are<br>
included in the same track.  As a result, it is possible to<br>
30   reduce an access time in the data reproduction.<br>
The drive apparatus 310 may determine the location of the replacement cluster by evaluating a distance between<br><br>
P38153<br>
123<br>
the original cluster and an unrecorded area which has PSNs<br>
greater than the PSNs of the original cluster. In the<br>
write-once recording mediums, a sequential recording is performed in a direction along which the PSNs increase.<br>
5 	Accordingly, it is possible to efficiently access data by replacing the original cluster with the replacement cluster which has PSNs greater than the PSNs of the original cluster.<br>
In this case, if there is no remaining unrecorded<br>
10 	area which has PSNs greater than the PSNs of the original cluster, then the drive apparatus 310 may determine the location of the replacement cluster by evaluating a distance between the original cluster and an unrecorded area which has PSNs smaller than the PSNs of the original cluster.<br>
15<br>
When there are a plurality of unrecorded areas which have the same distance from the original cluster, it is desirable to select one of the plurality of unrecorded areas , which has PSNs greater than the PSNs of the original cluster.<br>
20 	In the write-once recording mediums, a sequential recording is performed in a direction along which the PSNs increase. Accordingly, it is possible to efficiently access data by replacing the original cluster with the replacement cluster which has PSNs greater than the PSNs of the original cluster.<br>
25<br>
The distance between the original location and the replacement location may be determined from a difference between a PSN indicating the original location and a PSN indicating the replacement location. Alternatively, the<br>
30 	distance may be determined from a physical distance between the original location and the replacement location. This is because the difference between the PSNs does not necessarily correspond to the physical distance, since the<br><br>
P38153 124<br>
PSNs increase from the inner side to the outer side in a spiral manner in the information recording medium 100. For example, with respect to ECC clusters which are adjacent to each other in a radius direction, even if the physical 5 distance is close to zero, the difference between the PSNs does not become minimum.<br>
(Embodiment 6)<br>
10	In the present embodiment of the invention, a data<br>
structure and a method for reproducing data efficiently from the information recording medium 100 will be described. The replacement recording is performed for the information recording medium 100.<br>
15<br>
Figure 34 shows a data structure of disc structure information 6100 according to the present embodiment of the invention. The disc structure information 6100 is an alternative example of the disc structure information 1100.<br>
20<br>
In the disc structure information 6100, replacement recording control information 6000 is newly defined.<br>
Figure 35A shows a data structure of the replacement<br>
25   recording control information 6000.   The replacement<br>
recording control information 6000 includes a data length<br>
6001 and a replacement recording control information entry<br>
#1 and the like.<br>
30	The data length 6001 indicates a data length of the<br>
entire replacement recording control information 6000 or the total number of the replacement recording control information entries included in the replacement recording<br><br>
P38153 125<br>
control information 6000.<br>
Each replacement recording control information<br>
entry is related to each track on the information recording<br>
5    medium 100.  For example, such a relation is made by<br>
conforming the order of the replacement recording control<br>
information entries in the list to the track number.<br><br>
Each replacement recording control information<br>
10   entry includes information indicating whether or not the<br>
replacement management information list 1000 must be referred<br>
to in order to reproduce a data from a corresponding track.<br>
For example, when there is no physical cluster (or <br>
15 	a physical sector) on track #1 which is referred to by the replacement management information included in the replacement management information list 1000, a predetermined value (e.g. " 1" ) indicating the state is set to the replacement recording control information entry #1. <br>
20<br>
When there is a physical cluster (or a physical sector) on track #1 which is referred to by the replacement management information included in the replacement management information list 1000, or it is unknown whether or<br>
25 	not there is a physical cluster on track #1 which is referred to by the replacement management information, a predetermined value (e.g. " 0 " ) indicating the state is set to the replacement recording control information entry #1.<br>
30	When data is reproduced from a specific track on the<br>
information recording medium 100, the replacement recording control information entry corresponding to the specific track is referred to. When it is determined that there is no<br><br>
P38153<br>
physical cluster on the specific track which is referred to by the replacement management information, a process for retrieving the replacement information list can be omitted during the subsequent reproduction process. This makes it<br>
5   	possible to improve a reproduction performance.<br>
When there is physical cluster on the specific track which is referred to by the replacement management information or it is unknown whether or not there is physical<br>
10 	cluster on the specific track which is referred to by the replacement management information, a process for retrieving the replacement information list is performed to reproduce data, like other embodiments described above.<br>
15<br>
Figure 35B shows a data structure of the track management information 6210. The track management information 6210 has a function which is similar to the replacement recording control information 6000 shown in Figure 35A.<br>
20		In the track management information 6210, replacement   recording control information 6214 is newly defined.<br>
25	The replacement recording control information 6214<br>
includes information indicating whether or not there is physical cluster on a corresponding track which is referred to by the replacement management information. This information has a function which is similar to the replacement<br>
30    recording control information entry shown in Figure 35A.<br>
By using the track management information 6210, it is possible to omit a process for retrieving the replacement<br><br>
P38153<br>
127<br>
information list in a similar manner described above. This makes it possible to improve a reproduction performance.<br>
(Embodiment 7)<br>
5<br>
In the present embodiment, a procedure of data recording will be further described.<br>
Herein, a procedure of data recording in which <br>
10  specific track in the user data area for allocating the replacement cluster will be described.<br>
Further,  the track management information for managing a track used for allocating the replacement cluster<br>
15   will be described.<br>
It is described a case where a closed track is used for allocating the replacement cluster.<br>
20	As described above, a closed track is a track whose<br>
track number is not included in the header information 201. An addition of a new data to the closed track is inhibited.<br>
In the present embodiment, it is possible to allocate <br>
25    a replacement cluster in an unrecorded area of the closed track.<br>
Figure 36A shows an exemplary data structure on the information recording medium 100 before a recording process<br>
30   according to the present embodiment is performed.<br>
In this example, track #M 7000 is a closed track. Data "A" 7001 is recorded in track #M 7000, for example.<br><br>
P38153<br>
Track #M 7000 includes an unrecorded area 7002.  However,<br>
it is impossible to perform appending recording of a new<br>
data in the unrecorded area 7002.<br>
5	Track #N 7010 is an open track. Track #N 7010 includes<br>
an unrecorded area 7012. It is possible to perform appending recording of a new data in the unrecorded area 7012.<br>
In the state shown in Figure 36A, it is assumed that<br>
10    the host apparatus 305 outputs a recording instruction to the drive apparatus 310 to pseudo-overwrite data "Al" 7020 on data "A" 7001.<br>
According to the procedure of data recording<br>
15   described above, the data "Al" 7020 is recorded at a location<br>
indicated by the NWA 7014A in the track #N 7010, for example,<br>
and the replacement management information corresponding<br>
to the recording is provided.<br>
20	However, in the present embodiment, as shown in Figure<br>
37A, the data "Al" 7020 is recorded at a location of PSN=a2 indicated by the NWA 7004A in an unrecorded area of track #M 7000 (i.e. closed track).<br>
25	Then, replacement management information 7030<br>
having an original location of PSN=al and a replacement location of PSN=a2 is provided as the replacement management information corresponding to this pseudo-overwrite recording, as shown in the replacement management information<br>
30    list shown in Figure 37B.<br>
Further, it is possible to provide replacement management information 7031 having an original location of<br><br>
P38153 129<br>
PSN=a2 and a replacement location of PSN=0, like the embodiments described above.<br>
The LRA 7003A is updated to the LRA 7003B. 5<br>
By performing such a pseudo-overwrite recording,<br>
while maintaining a function of the closed track that the<br>
recording of a new data is prohibited, it is possible to<br>
use an unrecorded area in the closed track as an area for<br>
10    a replacement cluster.<br>
As a result, the data area can be utilized effectively without any loss in the write-once information recording medium having a track structure. <br>
15<br>
Further, when it is desired that only data for replacement clusters is recorded in a specific area on the information recording medium 100, the specific area may be set as a closed track according to the present embodiment.<br>
20 	Thus, the specific area in which data for replacement clusters can be recorded while inhibiting the recording of a new data from the host apparatus 305 can be realized.<br>
Such an area can be used, for example, as an area 25   for recording only data after update when metadata file 440 <br>
is updated using the pseudo-overwrite recording.<br>
In the state shown in Figure 37A, it is possible to reproduce data by referring to the replacement management<br>
30   information 7030, according to a procedure similar to the   procedure in other embodiments described above.<br>
Figure 38A shows another exemplary data structure<br><br>
P38153<br>
on the information recording medium 100 before a recording process according to the present embodiment is performed.<br>
In this example, track #M 7100 is a closed track. <br>
5   	In track #M 7100, data is recorded up to a location indicated by the LRA 7103A.  However, it is impossible to perform appending recording of a new data in track #M 7100.<br>
Track #N 7110 is an open track.  Data "B" 7111 is<br>
10   recorded in track #N 7110.  It is possible to perform appending recording of a new data in track #N 7110.<br>
In the state shown in Figure 38A, it is assumed that the host apparatus 305 outputs a recording instruction to <br>
15   the drive apparatus 310 to pseudo-overwrite data "Bl" 7120 on data "B" 7111.<br>
According to the procedure of data recording<br>
described above, the data "Bl" 7120 is recorded at a location<br>
20    indicated by the NWA 7114A in the track #N 7110, for example,<br>
and the replacement management information corresponding<br>
to the recording is provided.<br>
However, in the present embodiment, as shown in Figure<br>
25    39A, the data "Bl" 7120 is recorded at a location of PSN=b2 indicated by the NWA 7104A in an unrecorded area of track #M 7100 (i.e. closed track).<br>
Then,  replacement management information 7130<br>
30   having an original location of PSN=b1 and a replacement location of PSN=b2 is provided as the replacement management information corresponding to this pseudo-overwrite recording, as shown in the replacement management information<br><br>
P38153<br>
131<br>
list shown in Figure 39B.<br>
Further, it is possible to provide replacement management information 7131 having an original location of<br>
5    PSN=b2 and a replacement location of PSN=0, like the embodiments described above.<br>
The LRA 7103A is updated to the LRA 7103B. On the other hand, the LRA 7113A in the track #N 7110 is not updated.<br>
10<br>
By performing such a pseudo-overwrite recording, it is possible to utilize the data area effectively without any loss. It is further possible not to provide replacement management information when a new data is recorded in the<br>
15 	track #N 7110. As a result, it is possible to restrict the size of the replacement management information list.<br>
In view of such an effect, when there are a plurality of unrecorded areas on the information recording medium 100, <br>
20   it is possible to use an unrecorded area in a closed track with higher priority.<br>
In the state shown in Figure 39A, it is possible to reproduce data by referring to the replacement management<br>
25   information 7130, according to a procedure similar to the procedure in other embodiments described above.<br>
When a replacement recording is performed for a closed track, it is possible to use track management information<br>
30   7210 as shown in Figure 40.<br>
In the track management information 7210, track type information 7250 and last replacement recorded address<br><br>
P38153<br>
132<br>
information 7251 are newly defined, compared to the track management information 210. The track type information 7250 is described later.<br>
5	The last replacement recorded address information<br>
7251 is described below.<br>
As described above, according to the present<br>
embodiment, data for a replacement cluster is recorded in<br>
10   a closed track and the LRA in the closed track is updated.<br>
When the last replacement recorded address information 7251 is used, after a track is closed, the LRA in the closed track is not updated.  Instead, the last<br>
15   replacement recorded address information 7251 is updated.<br>
At the time immediately after a track is closed, the LRA in the closed track and the last replacement recorded address information 7251 indicate the same location. Each<br>
20 	time data for a replacement cluster is recorded in the closed track, the last replacement recorded address information 7251 is updated.<br>
The next replacement recording for the closed track <br>
25    is performed from a location indicated by the last replacement recorded address information 7251.<br>
Thus , by independently managing the LRA in the closed track and the last replacement recorded address information<br>
30   7251, it is possible to manage the last recorded address before and after the track is closed.<br>
In order to facilitate the management of the closed<br><br>
P38153 -133-<br>
tracks available for replacement recording, it is possible<br>
to newly provide a list of the track number of the closed<br>
tracks in the header information 201.<br>
5	This list is independent of a list of the track number<br>
of the open tracks included in the header information 201.<br>
Further, it is possible to hold information indicating a replacement cluster at which data is recorded<br>
10    after a track is closed.<br>
For example, it is possible to provide a new flag Flag 4 in the replacement management information 1010B described above . In this case, if data is recorded in a track<br>
15 	when the track is open, then a value of "0" is set to Flag 4 (i.e. Flag4 = 0). If data is recorded in a track when the track is closed, then a value of "1" is set to Flag4 (i.e. Flag4 = l).<br>
20	In the replacement management information 730 and<br>
780, a value of "1" is set to Flag4.<br>
There exists an area for storing attribute information in each ECC cluster. In the area for storing the<br>
25 	attribute information, it is possible to hold information (e.g. information similar to Flag4 described above) indicating a replacement cluster at which data is recorded after a track is closed.<br>
30	Next, it is described a case where a dedicated track<br>
in the user data area is used for allocating the replacement cluster.<br><br>
P38153 134<br>
Figure 41A shows an exemplary data structure on the information recording medium 100 before a recording process<br>
according to the present embodiment is performed.<br>
5	Herein, track #M 7300 is a track, like other<br>
embodiments described above. For example, data "A" 7301 is recorded in track #M 7300. Hereinafter, such a track is referred to as a user data track.<br>
10	Track #N 7310 is a track which is specific in the<br>
present embodiment. Track #N 7310 includes an extended spare area 7312.<br>
Track #N 7310 is a dedicated track for recording data<br>
15 	for replacement clusters, unlike the conventional user data track. The dedicated track is defined as a specific area in the user data area 108, wherein the specific area has a function similar to the spare area 106 or 107 . Hereinafter, such a track is referred to as an extended spare track. <br>
20<br>
Figure 42A shows an exemplary data structure on the information recording medium 100 after pesto-overwriting data "Al" 7320 on data "A" 7301 shown in Figure 41A.<br>
25	As shown in Figure 42A, data "Al" 7310 is recorded<br>
in track #N 7310. Then, replacement management information 7330 having an original location of PSN=al and a replacement location of PSN=a2 is generated as shown in Figure 42B.<br>
30	The LRA in the track #N 7310 is managed by the track<br>
management information, like other tracks. The LRA 7312A is updated to the LRA 7302B.<br><br>
P38153 135<br>
Figure 43 shows an exemplary data structure of track management information 7410 according to the present embodiment.<br>
5	In the track management information 7410, track type<br>
information 7750 is newly defined, compared to the track management information 210.<br>
The track type information 7750 includes information<br>
10 	identifying a user data track and an extended spare track described above. For example, if the track is a user data track, then a value of "0" is set to the information. If the track is an extended spare track, then a value of "1" is set to the information.<br>
15<br>
It is possible to further provide a flag indicating the presence/absence of an unrecorded area in the extended spare area 7310 and the like, compared to the track management information 210A.<br>
20<br>
In the state shown in Figure 42A, it is possible to reproduce data by referring to the replacement management information 7330, according to a procedure similar to the procedure in other embodiments described above.<br>
25<br>
As described above, by defining an extended spare track as a recording location of the replacement cluster, it is possible to perform a replacement recording within the user data area.  Further, it is possible to locate<br>
30   	replacement clusters in a specific area in a concentrated manner, thereby performing data access at higher speed.<br>
The user data track and the extended spare track can<br><br>
P38153<br>
be managed by the same session management information 200. Alternatively, it is possible to provide new session management information for managing the extended spare track only. <br>
5<br>
In order to facilitate the management of the extended spare area, it is possible to add information to the spare area information 1105 or the spare area management information 1108 in the disc structure information 1100.<br>
10<br>
It is possible to add information for managing the extended spare area to information for managing the spare area 106.<br>
15	For example, the information for managing the<br>
extended spare area may include a flag indicating the presence/absence of the extended spare area, a size of the extended spare area, a flag indicating the presence/absence of an unrecorded area in the extended spare area, information<br>
20	indicating a location at which data is to be recorded next in the extended spare area, and the like.<br>
Conventionally, it is only possible to add a new track to a track located at the end of the user data area. However,<br>
25 	it may be possible to add the extended spare track within an open track having an unrecorded area. This makes it possible to improve flexibility for allocating the extended spare area.<br>
30	Since the extended spare area has a similar function<br>
as the spare area, it is possible to use the extended spare area as a temporal disc management information area for recording the disc management information such as the latest<br><br>
P38153<br>
disc structure information 1110, the session management information 200 and the replacement management information list 1000. Since the session management information 200 and the replacement management information list 1000 are data<br>
5 	having a variable length, it is possible to use the extended spare area when an unrecorded area in the temporal disc management information area provided in the lead-in area 101, the inner spare area 106 or the outer spare area 107 is insufficient. In this case, it is preferable to record <br>
10 	a recording location of the temporal disc management information in the lead-in area 101, for example.<br>
(Embodiment 8)<br>
15	With reference to Figure 43, track type information<br>
7750 in the track management information 7410 will be described.<br>
The track type information 7750 includes information<br>
20 	for identifying a track available as a recording location of the replacement cluster. For example, if the track is available, then a value of "0" is set to the information. If the track is not available, then a value of "1" is set to the information. <br>
25<br>
The non-available track is, for example, a closed track having no unrecorded area, or any track which cannot<br>
be used as a replacement location for some reason regardless of the presence/absence of the unrecorded area. <br>
30<br>
It may be possible to set an open track as the non-available track.<br><br>
P38153 138<br>
By referring to the track type information 7750, the drive apparatus 310 can easily recognize a track available as a replacement location.<br>
5	Figure 44 shows an exemplary data structure of track<br>
management information 8210 according to the present embodiment.<br>
In the track management information 8210, re-<br>
10    placement control information 8001 is newly defined, compared<br>
to the track management information 210.<br>
The replacement control information 8001 provides   information for controlling a replacement location with<br>
15    respect to the tracks managed by the track management information 8210.<br>
Specifically, the replacement control information 8001 makes it possible to specify a spear area, the same<br>
20	 track, a different track and the like as a replacement location The values (e.g. "0", "1" and "2") are assigned to the respective replacement locations . The replacement location can be specified by selectively setting the value to the replacement control information 8001.<br>
25<br>
By referring to the replacement control information 8001, the drive apparatus 310 determines a recording location of the replacement cluster in a replacement recording in which an original cluster in a track is specified.<br>
30<br>
When the replacement control information 8001 indicates a spare area as a replacement location, data for the replacement cluster is recorded in the spare area.<br><br>
P38153<br>
Similarly, the replacement control information 8001 indicates a different track as a replacement location, data is recorded in an unrecorded area in a track which is different from the original track.<br>
5<br>
As described above, by providing information for controlling a replacement location such as the track type information 7750 or the replacement control information 8001 in the track management information, it is possible to realize<br>
10 	an excellent implementation which can be reflected by the intent of the information recording/reproduction apparatus or a user with respect to the replacement recording.<br>
INDUSTRIAL APPLICABILITY<br>
15<br>
The present invention is useful, since it provides a drive apparatus and the like capable of utilizing the user data area without any loss in the pseudo-overwrite recording for the write-once optical disc.<br>
20<br><br>
P38153 140<br>
CLAIMS<br>
1. A drive apparatus for performing a sequential recording<br>
for a write-once recording medium, wherein<br>
5		the write-once recording medium includes a data area<br>
 and a disc management information area,<br>
disc management information for managing the<br>
write-once recording medium is recorded in the disc<br>
management information area,<br>
10		a plurality of physical addresses are assigned to<br>
the data area,<br>
a plurality of logical addresses are assigned to the user data area,<br>
at least one sequential recording area is allocated <br>
15   to the user data area,<br>
the disc management information includes sequential recording area management information for managing the at least one sequential recording area,<br>
the sequential recording area management infor-<br>
20   mation includes a last recorded address, the last recorded<br>
address being a physical address indicating a location at<br>
which data is last recorded in a sequential recording area,<br>
the  disc  management  information  includes  replacement management information list including at least <br>
25   one replacement management information,<br>
the at least one replacement management information<br>
maps a physical address indicating an original location in<br>
the user data area to another physical address indicating<br>
a replacement location,<br>
30		the drive apparatus comprising:<br>
a recording/reproduction section for performing a recording operation or a reproduction operation for the write-once recording medium; and<br><br>
P38153 141<br>
a drive control section for controlling the recording/reproduction section,<br>
wherein<br>
the drive control section performs a process <br>
5    including:<br>
reading the disc management information from the disc management information area;<br>
determining a primary logical address-physical address mapping indicating a corresponding relationship<br>
10 	between the plurality of logical addresses and the plurality of physical addresses based on the disc management information;<br>
receiving a recording instruction including a logical address indicating a location at which data is to<br>
15   be recorded;<br>
translating the logical address included in the recording instruction into a physical address in accordance with the primary logical address-physical address mapping;<br>
determining a sequential recording area of the at<br>
20   least one sequential recording area based on the physical<br>
address corresponding to the logical address included in<br>
the recording instruction and the sequential recording area<br>
management information;<br>
 determining a physical address indicating a  location<br>
25    at which data can be recorded next in the determined sequential recording area as a next writable address, based on the last recorded address in the determined sequential recording area;<br>
comparing the physical address corresponding to the logical address included in the recording instruction with<br>
30    the next writable address;<br>
when the physical address corresponding to the logical address included in the recording instruction is smaller than the next writable address, performing a process<br><br>
P38153<br>
including:<br>
controlling the recording/ reproduction section to record the data at a specific location in the user data area, the specific location being a location other <br>
5  than the location indicated by the physical address corresponding to the logical address included in the recording instruction;<br>
determining whether or not replacement management information including a replacement physical <br>
10 	address is found in the replacement management information list, the replacement physical address matching the physical address corresponding to the logical address included in the recording instruction,<br>
 when the replacement management information <br>
15 	is not found, as a first time pseudo-overwrite recording for a location indicated by the physical address corresponding to the logical address included in the recording instruction, performing a process including:<br>
generating new replacement man-<br>
20   agement information for mapping the physical address<br>
corresponding to the logical address included in the<br>
recording instruction to a physical address indicating the<br>
specific location,<br>
updating  the  replacement  man-<br>
25   agement information list by adding the new replacement management information to the replacement management information list or<br>
when the replacement management information is found, as a second time or more pseudo-overwrite recording<br>
30   for a location indicated by the physical address corresponding to the logical address included in the recording instruction, performing a process including:<br>
updating  the  replacement man-<br><br>
P38153<br>
agement information list by changing a replacement address of the found replacement management information into a<br>
physical address indicating the specific location,<br>
generating new disc management information <br>
5     including the updated replacement management information list and the last recorded address updated by the recording of the data; and<br>
controlling  the recording/reproduction  section to record the new disc management information in <br>
10   the disc management information area.<br>
2. A drive apparatus according to claim 1, wherein the<br>
write-once recording medium includes a plurality of ECC<br>
clusters,<br>
15	each of the plurality of ECC clusters includes a<br>
plurality of sectors,<br>
  the plurality of physical addresses are assigned to the plurality of sectors, respectively, and<br>
the next writable address is a physical address for<br>
20    a first sector included in an ECC cluster subsequent to an ECC including the last recorded address.<br><br><br>
Dated this 19th day of December, 2006<br><br>
144<br>
ABSTRACT<br>
A drive apparatus of the present invention includes a recording/reproduction section and a drive control section <br>
5 	The drive control section performs a process inclduing: determining whether or not replacement management information including a replacement physical address is found in the replacement management information list, the replacement physical address matching the physical address<br>
10 	corresponding to the logical address included in the recording instruction, when the replacement management information is not found, as a first time pseudo-overwrite recording for a location indicated by the physical address<br>
corresponding to the logical address included in the <br>
15 	recording instruction, performing a process; and when the replacement management information is found, as a second time or more pseudo-overwrite recording for a location indicated by the physical address corresponding to the logical address included in the recording instruction, <br>
20   performing a process.<br></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUFCU1RSQUNUKDIzLTctMjAxMikucGRm" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-ABSTRACT(23-7-2012).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUFCU1RSQUNUKDctMTAtMjAxMykucGRm" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-ABSTRACT(7-10-2013).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1tdW1ucC0yMDA2LWFic3RyYWN0LmRvYw==" target="_blank" style="word-wrap:break-word;">1598-mumnp-2006-abstract.doc</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1tdW1ucC0yMDA2LWFic3RyYWN0LnBkZg==" target="_blank" style="word-wrap:break-word;">1598-mumnp-2006-abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUNMQUlNUyhBTUVOREVEKS0oMjMtNy0yMDEyKS5wZGY=" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-CLAIMS(AMENDED)-(23-7-2012).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUNMQUlNUyhBTUVOREVEKS0oNy0xMC0yMDEzKS5wZGY=" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-CLAIMS(AMENDED)-(7-10-2013).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUNMQUlNUyhDT01QTEVURSktKCgyMS0xMi0yMDA2KS5wZGY=" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-CLAIMS(COMPLETE)-((21-12-2006).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUNMQUlNUyhNQVJLRUQgQ09QWSktKDIzLTctMjAxMikucGRm" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-CLAIMS(MARKED COPY)-(23-7-2012).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUNMQUlNUyhNQVJLRUQgQ09QWSktKDctMTAtMjAxMykucGRm" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-CLAIMS(MARKED COPY)-(7-10-2013).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1tdW1ucC0yMDA2LWNsYWltcy5kb2M=" target="_blank" style="word-wrap:break-word;">1598-mumnp-2006-claims.doc</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1tdW1ucC0yMDA2LWNsYWltcy5wZGY=" target="_blank" style="word-wrap:break-word;">1598-mumnp-2006-claims.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUNPUlJFU1BPTkRFTkNFKDE1LTEtMjAwOSkucGRm" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-CORRESPONDENCE(15-1-2009).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUNPUlJFU1BPTkRFTkNFKDE1LTctMjAxMykucGRm" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-CORRESPONDENCE(15-7-2013).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUNPUlJFU1BPTkRFTkNFKDE3LTgtMjAxMikucGRm" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-CORRESPONDENCE(17-8-2012).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUNPUlJFU1BPTkRFTkNFKDE5LTUtMjAwOCkucGRm" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-CORRESPONDENCE(19-5-2008).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUNPUlJFU1BPTkRFTkNFKDIwLTktMjAxMykucGRm" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-CORRESPONDENCE(20-9-2013).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1tdW1ucC0yMDA2LWNvcnJlc3BvbmRlbmNlLXJlY2VpdmVkLnBkZg==" target="_blank" style="word-wrap:break-word;">1598-mumnp-2006-correspondence-received.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LURFQ0xBUkFUSU9OIEJZIFRIRSBUUkFOU0xBVE9SKDE1LTEtMjAwOSkucGRm" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-DECLARATION BY THE TRANSLATOR(15-1-2009).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1tdW1ucC0yMDA2LWRlc2NyaXB0aW9uIChjb21wbGV0ZSkucGRm" target="_blank" style="word-wrap:break-word;">1598-mumnp-2006-description (complete).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LURFU0NSSVBUSU9OKENPTVBMRVRFKS0oKDIxLTEyLTIwMDYpLnBkZg==" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-DESCRIPTION(COMPLETE)-((21-12-2006).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LURSQVdJTkcoMjMtNy0yMDEyKS5wZGY=" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-DRAWING(23-7-2012).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1tdW1ucC0yMDA2LWRyYXdpbmdzLnBkZg==" target="_blank" style="word-wrap:break-word;">1598-mumnp-2006-drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUVOR0xJU0ggVFJBTlNMQVRJT04oMjMtNy0yMDEyKS5wZGY=" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-ENGLISH TRANSLATION(23-7-2012).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUVQIERPQ1VNRU5UKDIzLTctMjAxMikucGRm" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-EP DOCUMENT(23-7-2012).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUZPUk0gMSgxNy04LTIwMTIpLnBkZg==" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-FORM 1(17-8-2012).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUZPUk0gMSgyMy03LTIwMTIpLnBkZg==" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-FORM 1(23-7-2012).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUZPUk0gMSg3LTEwLTIwMTMpLnBkZg==" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-FORM 1(7-10-2013).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1tdW1ucC0yMDA2LWZvcm0gMTMoMTUtMS0yMDA5KS5wZGY=" target="_blank" style="word-wrap:break-word;">1598-mumnp-2006-form 13(15-1-2009).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUZPUk0gMTMoMTctOC0yMDEyKS5wZGY=" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-FORM 13(17-8-2012).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUZPUk0gMTgoMTktNS0yMDA4KS5wZGY=" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-FORM 18(19-5-2008).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUZPUk0gMihDT01QTEVURSktKDIxLTEyLTIwMDYpLnBkZg==" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-FORM 2(COMPLETE)-(21-12-2006).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUZPUk0gMihUSVRMRSBQQUdFKS0oMjMtNy0yMDEyKS5wZGY=" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-FORM 2(TITLE PAGE)-(23-7-2012).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUZPUk0gMihUSVRMRSBQQUdFKS0oQ09NUExFVEUpLSgyMS0xMi0yMDA2KS5wZGY=" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-FORM 2(TITLE PAGE)-(COMPLETE)-(21-12-2006).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUZPUk0gMjYoMTUtMS0yMDA5KS5wZGY=" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-FORM 26(15-1-2009).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUZPUk0gMjYoMjAtOS0yMDEzKS5wZGY=" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-FORM 26(20-9-2013).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUZPUk0gMjYoNC02LTIwMDcpLnBkZg==" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-FORM 26(4-6-2007).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUZPUk0gMjYoNy0xMC0yMDEzKS5wZGY=" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-FORM 26(7-10-2013).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUZPUk0gMygyMy03LTIwMTIpLnBkZg==" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-FORM 3(23-7-2012).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUZPUk0gMyg3LTEwLTIwMTMpLnBkZg==" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-FORM 3(7-10-2013).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUZPUk0gNSgyMy03LTIwMTIpLnBkZg==" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-FORM 5(23-7-2012).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1tdW1ucC0yMDA2LWZvcm0tMS5wZGY=" target="_blank" style="word-wrap:break-word;">1598-mumnp-2006-form-1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1tdW1ucC0yMDA2LWZvcm0tMi5kb2M=" target="_blank" style="word-wrap:break-word;">1598-mumnp-2006-form-2.doc</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1tdW1ucC0yMDA2LWZvcm0tMi5wZGY=" target="_blank" style="word-wrap:break-word;">1598-mumnp-2006-form-2.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1tdW1ucC0yMDA2LWZvcm0tMy5wZGY=" target="_blank" style="word-wrap:break-word;">1598-mumnp-2006-form-3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1tdW1ucC0yMDA2LWZvcm0tNS5wZGY=" target="_blank" style="word-wrap:break-word;">1598-mumnp-2006-form-5.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1tdW1ucC0yMDA2LWZvcm0tcGN0LWliLTMwMS5wZGY=" target="_blank" style="word-wrap:break-word;">1598-mumnp-2006-form-pct-ib-301.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1tdW1ucC0yMDA2LWZvcm0tcGN0LWliLTMwNC5wZGY=" target="_blank" style="word-wrap:break-word;">1598-mumnp-2006-form-pct-ib-304.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1tdW1ucC0yMDA2LWZvcm0tcGN0LWliLTMwOC5wZGY=" target="_blank" style="word-wrap:break-word;">1598-mumnp-2006-form-pct-ib-308.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LUpBUEFORVNFIERPQ1VNRU5UKDIzLTctMjAxMikucGRm" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-JAPANESE DOCUMENT(23-7-2012).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LVBFVElUSU9OIFVOREVSIFJVTEUgMTM3KDIzLTctMjAxMikucGRm" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-PETITION UNDER RULE 137(23-7-2012).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LVJFUExZIFRPIEVYQU1JTkFUSU9OIFJFUE9SVCgyMy03LTIwMTIpLnBkZg==" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-REPLY TO EXAMINATION REPORT(23-7-2012).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LVJFUExZIFRPIEhFQVJJTkcoNy0xMC0yMDEzKS5wZGY=" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-REPLY TO HEARING(7-10-2013).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LVNQRUNJRklDQVRJT04oQU1FTkRFRCktKDctMTAtMjAxMykucGRm" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-SPECIFICATION(AMENDED)-(7-10-2013).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTU5OC1NVU1OUC0yMDA2LVVTIERPQ1VNRU5UKDIzLTctMjAxMikucGRm" target="_blank" style="word-wrap:break-word;">1598-MUMNP-2006-US DOCUMENT(23-7-2012).pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="257581-a-bio-fuel-cell.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="257583-amidobetaines-for-oral-care-applications.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>257582</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>1598/MUMNP/2006</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>42/2013</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>18-Oct-2013</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>17-Oct-2013</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>21-Dec-2006</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>PANASONIC CORPORATION</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>1006, Oaza Kadoma. Kadoma-shi. Osaka, 5718501. Japan.</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>NAKAMURA, TADASHI</td>
											<td>MATSUSHITA ELECTRIC INDUSTRIAL CO.,LTD. 1006, OAZA KADOMA, KADOMA-SHI, OAKA 571-8501</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>G11B20/12</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/JP2005/010889</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2005-06-14</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>2004-177664</td>
									<td>2004-06-15</td>
								    <td>Japan</td>
								</tr>
								<tr>
									<td>2</td>
									<td>2004-177666</td>
									<td>2004-06-15</td>
								    <td>Japan</td>
								</tr>
								<tr>
									<td>3</td>
									<td>2004-177663</td>
									<td>2004-06-15</td>
								    <td>Japan</td>
								</tr>
								<tr>
									<td>4</td>
									<td>2004-255440</td>
									<td>2004-09-02</td>
								    <td>Japan</td>
								</tr>
								<tr>
									<td>5</td>
									<td>2004-177661</td>
									<td>2004-06-15</td>
								    <td>Japan</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/257582-a-drive-apparatus-for-performing-a-sequential-recording-for-a-write-once-recording-medium by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 08:01:59 GMT -->
</html>
