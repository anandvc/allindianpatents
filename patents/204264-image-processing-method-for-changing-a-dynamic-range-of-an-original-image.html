<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/204264-image-processing-method-for-changing-a-dynamic-range-of-an-original-image by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 06:30:41 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 204264:IMAGE PROCESSING METHOD FOR CHANGING A DYNAMIC RANGE OF AN ORIGINAL IMAGE</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">IMAGE PROCESSING METHOD FOR CHANGING A DYNAMIC RANGE OF AN ORIGINAL IMAGE</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>There are provided an image processing apparatus and method. In this apparatus and method, high-frequency components are converted by multiple-frequency transformation in accordance with tone conversion used to change the dynamic range, thereby obtaining a high-quality image. For example, an original image undergoes tone conversion on the basis of a tone conversion curve, and the converted image then undergoes discrete wavelet transformation. After that, subbands obtained by discrete wavelet transformation undergo a conversion process in correspondence with the slope of the tone conversion curve.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td> <br><br>
DESCRIPTION IMAGE PROCESSING DEVICE, IMAGE PROCESSING METHOD,<br>
RECORDING MEDIUM AND PROGRAM<br>
TECHNICAL FIELD<br>
The present invention relates to an image processing apparatus, image processing method, storage medium, and program and, more particularly, to an image processing apparatus, image processing method, storage medium, and program for changing the dynamic range of image data.<br>
BACKGROUND ART<br>
For example, an X-ray chest image has a very broad range of pixel values since it is made up of an image region of lungs through which X-rays are readily transmitted, and an image region of a mediastinal part through which X-rays are hardly transmitted.  For this reason, it has been considered to be difficult to obtain an X-ray chest image that allows to-simultaneously observe both the lungs and mediastinal part,<br>
As a method of avoiding this problem, a method described in SPIE Vol. 626 Medicine XIV/PACS IV (1986) is known.  This method is described using constants A, B, and C (for example, A = 3, B = 0.7) by:<br>
SD    =    A[Sora    -    Sus]     +    B[Sus]     +    C	...   (1)<br><br>
where So is the pixel value of an image after processing, Sorg is the pixel value (input pixel value) of an original image (input image), and Sus is the pixel value of a low-frequency image of the original image.<br>
This method can change weighting coefficients for high-frequency components (first term) and low-frequency components (second term).  For example, when A = 3 and B = 0.7, the effect of emphasizing the high-frequency components and compressing the overall dynamic range can be obtained.  Five radiologists evaluated that this method is effective for diagnosis compared to an image without any processing.<br>
Japanese Patent No. 2509503 describes a method which is described by:<br>
SD =    Sorg + F[G(PX,  Py)]	... (2)<br>
where SD is the pixel value after processing, Sorg is the original pixel value (input pixel value), Py is the average profile of a plurality of Y-profiles of an original image, and Px is the average profile of a plurality of X-profiles.<br>
The characteristics of the function F(x) will be explained below.  If "x &gt; Dth", F(x) becomes "0",  If "0 
F(x) = E - (E/Dth)x, when 0 
= 0, when x &gt; Dth	... (3)<br><br>
Py = (ΣPyi)/n	... (4)<br>
Px = (ΣPxi)/n	... (5)<br>
where (i = 1 to n), and Pyi and Pxi are profiles.  For example, G(Px, Py) is given by:<br>
G(Px, Py) = max(Px, Py)	...(6)<br>
In this method, of the pixel value (density value) range of the original image, the pixel value (density value) range in which the pixel values of a low-frequency image are equal to or smaller than Dth is compressed.<br>
As a method similar to the method of Japanese Patent No. 2509503, a method described in "Anan et. al,, Japanese Journal of Radiological Technology, Vol. 45, No. 8, August 1989, p. 1030", and Japanese Patent No. 2663189 is known.  Using the monotone decreasing function f(x), this method is described by:<br>
SD    —   sorg    +    f (Sus)	...   (7)<br>
Sus    =   ΣSorg/M,	...  (8)<br>
where SD is the pixel value after processing, Sorg is the original pixel value, and Sus is the average pixel value upon calculating a moving average using a mask size M X M pixels in the original image.<br>
In this method, the low-frequency image generation method is different from that in the method given by equation (2) .  In the method given by equation (2), a low-frequency image is generated based on one-dimensional data, while in this method, a<br><br>
low-frequency image is generated based on two-dimensional data.  In this method as well, of the pixel value (density value) range of the original image, the pixel value (density value) range in which the pixel values of a low-frequency image are equal to or smaller than Dth is compressed.<br>
The aforementioned dynamic range compression method can be expressed using a function fl() of converting (compressing) a low-frequency image by:<br>
SD = fl(Sas)  +  (Sorg - Sus)	. • . (9)<br>
Note that the variable of a function may be omitted for the sake of simplicity in this specification.<br>
The dynamic range compression method given by equation (9) will., be explained below.  Figs. 1 and 2 are views for explaining the principle of that method. The uppermost view in Fig. 1 shows the profile of an edge portion of an original image, the middle view shows the profile of a smoothed image of that original image, and the lowermost view shows the profile of a high-frequency image generated by subtracting the smoothed image from the original image.  In Fig. 2, the uppermost view shows the profile of an image obtained by multiplying by 1/2 the absolute values of the smoothed image in the middle view of Fig. 1, the middle view shows the same profile as  that of the high-frequency image in Fig. 1, and the lowermost view shows the profile of an image obtained by adding the<br><br>
high-frequency image in the interrupt view to the image in the uppermost view obtained by converting the values of the smoothed image. A process for obtaining an image, the dynamic range of  which is compressed, like the image shown in the lowermost view in Fig. 2,   is called a dynamic range compression process.<br>
In recent years, multiple-frequency processes (to be also referred to d^s  multiple-frequency transformation processes hereinafter) using Laplacian pyramid transformation and wavelet transformation have been developed.  In these multiple-frequency processes, a frequency process (a process for emphasizing or suppressing specific spatial frequency components) of an image is implemented by converting Laplacian coefficients or wavelet coefficients obtained by decomposing an image into a plurality of frequency components.<br>
DISCLOSURE OF INVENTION<br>
When the frequency process of an image is implemented using the aforementi(3ned multiple-frequency transformation process, it is rational and preferable to also implement a dynamic range change process using the multiple-frequency transformation process.<br>
It is an object of the present invention to obtain a high-quality output image by exploiting a tone conversion process and multiple-frequency<br><br>
transformation process, to implement a dynamic range change process using the multiple-frequency transformation process, or to obtain a high-quality output image, the dynamic range or predetermined pixel value range (partial pixel value range) of which has been changed using the tone conversion process and multiple-frequency transformation process.<br>
According to the first aspect of the present invention, there is provided an image processing apparatus comprising tone conversion means for executing tone conversion of an image, and component conversion means for converting frequency components of a plurality of frequency bands of the image or an image after that image has undergone tone conversion by the tone conversion means, on the basis of tone conversion characteristics of the tone conversion means,<br>
According to the second aspect of the present invention, there is provided an image processing apparatus comprising tone conversion means for executing tone conversion of an image, frequency transformation means for decomposing the image that has undergone tone conversion by the tone conversion means into frequency components of a plurality of frequency bands, and component conversion means for converting the frequency components of the plurality of frequency bands obtained by the frequency transformation means.<br><br>
on the basis of tone conversion characteristics of the tone conversion means.<br>
According to the third aspect of the present invention, there is provided an image processing apparatus comprising first frequency transformation means for decomposing an image into first frequency components of a plurality of frequency bands, tone conversion means for executing tone conversion of the image, second frequency transformation means for decomposing the image that has undergone tone conversion by the tone conversion means into second frequency components of a plurality of frequency bands, and component conversion means for converting the second frequency components of the plurality of frequency bands by adding frequency components, which are obtained by converting the first frequency components of the plurality of frequency bands on the basis of tone conversion characteristics of the tone conversion means, to the second frequency components of the plurality of frequency bands.<br>
According to the fourth aspect of the present invention, there is provided an image processing apparatus comprising tone conversion means for executing tone conversion of an image, frequency transformation means for decomposing the image into frequency components of a plurality of frequency bands, component conversion means for converting the frequency<br><br>
components of a plurality of frequency bands obtained by the frequency transformation means, on the basis of tone conversion characteristics of the tone conversion means, inverse frequency transformation means for generating an image by compositing the frequency components converted by the component conversion means, and addition means for adding the image generated by the inverse frequency transformation means and the image that has undergone tone conversion by the tone conversion means.<br>
According to the fifth aspect of the present invention, there is provided an image processing apparatus comprising frequency transformation means for decomposing an image into frequency components of a plurality of frequency bands, component conversion means for converting the frequency components of the plurality of frequency bands obtained by the frequency transformation means, on the basis of predetermined tone conversion characteristics, inverse frequency transformation means for generating an image by compositing the frequency components converted by the component conversion means, and tone conversion means for executing tone conversion of the image generated by the inverse frequency transformation means, on the basis of the predetermined tone conversion characteristics.<br><br>
According to the sixth aspect of the present invention, there is provided an image processing method comprising the tone conversion step of executing tone conversion of an image, and the component conversion step of converting frequency components of a plurality of frequency bands of the image or an image after that image has undergone tone conversion in the tone conversion step, on the basis of tone conversion characteristics of the tone conversion step.<br>
According to the seventh aspect of the present invention, there is provided an image processing method comprising the tone conversion step of executing tone conversion of an image, the frequency transformation step of decomposing the image that has undergone tone conversion in the tone conversion step into frequency components of a plurality of frequency bands, and the component conversion step of converting the frequency components of the plurality of frequency bands obtained in the frequency transformation step, on the basis of tone conversion characteristics of the tone conversion step.<br>
According to the eighth aspect of the present invention, there is provided an image processing method comprising the first frequency transformation step of decomposing an image into first frequency components of a plurality of frequency bands, the tone conversion step of executing tone conversion of the image, the<br><br>
second frequency transformation step of decomposing the image that has undergone tone conversion in the tone conversion step into second frequency components of a plurality of frequency bands, and the component conversion step of converting the first frequency components of the plurality of second frequency bands by adding frequency components, which are obtained by converting the first frequency components of the plurality of frequency bands on the basis of tone conversion characteristics of the tone conversion step, to the second frequency components of the plurality of frequency bands.<br>
According to the ninth aspect of the present invention, there is provided an image processing method comprising the tone conversion step of executing tone conversion of an image, the frequency transformation step of decomposing the image into frequency components of a plurality of frequency bands, the component conversion step of converting frequency components of the plurality of frequency bands obtained in the frequency transformation step, on the basis of tone conversion characteristics of the tone conversion step, the inverse frequency transformation step of generating an image by compositing the frequency components converted in the component conversion step, and the addition step of adding the image generated in the inverse frequency transformation step and the image<br><br>
that has undergone tone conversion in the tone conversion step.<br>
According to the 10th aspect of the present invention, there is provided an image processing method comprising the frequency transformation step of decomposing an image into frequency components of a plurality of frequency bands, the component conversion step of converting the frequency components of the plurality of frequency bands obtained in the frequency transformation step, on the basis of predetermined tone conversion characteristics, the inverse frequency transformation step of generating an image by compositing the frequency components converted in the component conversion step, and the tone conversion step of executing tone conversion of the image generated in the inverse frequency transformation step, on the basis, of the predetermined tone conversion characteristics,<br>
The above and other objects, effects, and features of the present invention will become apparent from the description of embodiments to be described hereinafter with reference to the accompanying drawings.<br>
BRIEF DESCRIPTION OF DRAWINGS<br>
Fig. 1 is a chart for explaining prior art of dynamic range compression;<br>
Fig. 2 is a chart for explaining prior art of dynamic- range compression;<br><br>
Fig. 3 is a block diagram of an image processing<br>
apparatus according to Embodiment 1;<br>
Fig. 4 is a flow chart showing the processing<br>
sequence of the image processing apparatus according to<br>
Embodiment 1;<br>
Fig. 5 shows an example of a tone conversion<br>
curve used to change the dynamic ranger-Figs . 6A to 6C are explanatory views of discrete<br>
wavelet transformation and inverse discrete wavelet<br>
transformations-Fig. 7 shows a frequency coefficient conversion<br>
curve;<br>
Fig. 8 shows a frequency coefficient conversion<br>
curved-Fig. 9 is a flow chart showing the processing<br>
sequence of the image processing apparatus according to<br>
Embodiment 2;<br>
Fig. 10 is a flow chart showing the processing<br>
sequence of the image processing apparatus according to<br>
Embodiment 3;<br>
Fig. 11 is a block diagram of an image processing<br>
apparatus according to Embodiment 4;<br>
Fig. 12 is a flow chart showing the processing<br>
sequence of the image processing apparatus according to<br>
Embodiment 4; and<br>
Fig. 13 shows a curve used to convert frequency<br>
coefficients.<br><br>
BEST MODE OF CARRYING OUT THE INVENTION<br>
(Embodiment 1)<br>
Fig. 3 shows an X-ray photographing apparatus 100 according to Embodiment 1.  The X-ray photographing apparatus 100 has a function of executing processes for respective frequency bands of a taken image, and comprises a pre-processing circuit 106, CPU 108, main memory 109, control panel 110, image display 111, and image processing circuit 112, which exchange data via a CPU bus 107.<br>
The X-ray photographing apparatus 100 also comprises a data acquisition circuit 105 connected to the pre-processing circuit 106, and a two-dimensional X-ray sensor 104 and X-ray generation circuit 101, which are connected to the data acquisition circuit 105, and these circuits are also connected to the CPU bus 107.<br>
In the aforementioned X-ray photographing apparatus 100, the main memory 109 stores various data and the like required for the processing by the CPU 108, and includes a work memory for the CPU 108.<br>
The CPU 108 executes operation control and the like of the overall apparatus in accordance with operations at the control panel 110, As a result, the X-ray photographing apparatus 100 operates as follows.<br><br>
The X-ray generation circuit 101 emits an X-ray beam 102 toward an object 103 to be examined.  The X-ray beam 102 emitted by the X-ray generation circuit 101 is transmitted through the object 103 to be examined while being attenuated, and reaches the two-dimensional X-ray sensor 104,  The two-dimensional X-ray sensor 104 detects an X-ray image. Assume that the X-ray image is, for example, a human body image or the like in this embodiment.<br>
The data acquisition circuit 105 converts X-ray image information (electrical signal) output from the two-dimensional X-ray sensor 104 into a predetermined electrical signal, and supplies that signal to the pre-processing circuit 106.  The pre-processing circuit 106 executes pre-processes such as offset correction, gain correction, and the like for the signal (X-ray image signal) from the data acquisition circuit 105. The X-ray image signal that has undergone the pre-processes by the pre-processing circuit is transferred as an original image to the main memory 109 and image processing circuit 112 via the CPU bus 107 under the control of the CPU 108.<br>
Reference numeral 112 denotes a block diagram showing the arrangement of the image processing circuit In the image processing circuit 112, reference numeral 113 denotes a tone conversion circuit for performing tone conversion of the original image; 114, a discrete<br><br>
wavelet transformation circuit for computing the discrete wavelet transforms (to be referred to as   DWTs hereinafter) of the original image that has undergone the tone conversion by the tone conversion circuit 113 to obtain image components (wavelet transform coefficients) of respective freguency bands; 115, a component conversion circuit for converting the image components of the respective freguency bands obtained by the discrete wavelet transformation circuit 114; and 116, an inverse DWT circuit for computing the inverse discrete wavelet transforms (to be referred to as inverse DWTs hereinafter) on the basis of the image components converted by the component conversion circuit 115.<br>
Fig. 4 is a flow chart showing the flow of processes in the image processing circuit 112, Fig. 5 shows an example of a tone conversion curve used to change the dynamic range of image data by the tone conversion circuit 113, Fig. 6A is a circuit diagram showing the arrangement of the DWT circuit 114, Fig. 6B shows an example of the format of transform coefficient groups of two levels obtained by a two-dimensional transformation process, and Fig. 6C is a circuit diagram showing the arrangement of the inverse DWT circuit 116.  Figs. 7 and 8 show examples of function forms used to change image components (DWT coefficients).<br><br>
The processing in Embodiment 1 will be explained below along with the flow of processes shown in Fig. 4.<br>
An original image that has undergone the pre-processes in the pre-processing circuit 106 is transferred to the image processing circuit 112 via the CPU bus 107.<br>
In the image processing circuit 112, the tone conversion circuit converts an original image Org(x, y) into f(Org(x, y) using a tone conversion curve f() (s201).  In this specification, a "curve" may be used synonymously with a "function".  Note that x and y are the coordinates on the original image. As the tone conversion curve f(), for example, a curve form shown in Fig. 5 is used.  For example, solid line 1 is a  -function with slope = 1.  That is, input and output values are not changed (input and output values are equal to each other), and no dynamic range compression effect is expected. Broken line 2 indicates a function form for compressing the dynamic range on the low pixel value side, and broken line 3 indicates a function form for expanding the dynamic range on the low pixel value side.  Likewise, broken line 4 expands the dynamic range on the high pixel value side, and broken line 5 indicates a function form for compressing the dynamic range on the high pixel value side.<br>
In practice, these curve forms are preferably formed to be differential continuous (differentiable<br><br>
and continuous functions).  This is because a false edge may be generated when the tone conversion curve includes an undifferentiable or discontinuous point.<br>
The DWT circuit (discrete wavelet transformation circuit) 114 executes a two-dimensional discrete wavelet transformation process of the image f(Org{x, y) after tone conversion, and calculates and outputs image components (to be also referred to as transform coefficients or frequency coefficients hereinafter). The image data stored in the main memory 109 is sequentially read out and undergoes the transformation process by the DWT circuit 114, and is written in the main memory 109 again.  In the DWT circuit 114 of this embodiment, an input image signal is separated into odd and even address signals by a combination of a delay element and down samplers, and undergoes filter processes of two filters p and u.  In Fig. 6A, s and d represent low- and high-pass coefficients upon decomposing a linear image signal to one level, and are respectively computed by:<br>
d(n) = X(2*n+l)-floor((x(2*n)+x(2*n+2))/2)...(11) s(n) - x(2*n)+floor((d(n-l)+d(n))/4)      ...(12) where x(n) is an image signal to be transformed. With the above process, a linear discrete wavelet transformation process is done for an image signal. Since two-dimensional discrete wavelet transformation is implemented by sequentially executing linear<br><br>
discrete wavelet transformation in the horizontal and vertical directions of an image and its details are known to those who are skilled in the art, a description thereof will be omitted.  Fig. 6B shows an example of the format of transform coefficient groups of two levels obtained by the two-dimensional discrete wavelet transformation process. An image signal is decomposed into image components HHl, HLl, LHl,.,., LL in different frequency bands (s202) .  In Fig. 6B, each of HHl, HLl, LHl,,.., LL (to be referred to as subbands hereinafter) indicates an image component for each frequency band.<br>
The component conversion circuit converts image component hn(x, y) of each subband (S203) by:<br>
h2n(x, y) = (l/fWOrg(x, y) ) ) xhn(x, y)  ,..(13) where h2n(x, y) is the converted image component, and n is the subband category.<br>
With this process, image components after the tone conversion process, which become f* () times (f'() is the slope of the tone conversion curve f() in Org(x, y) corresponding to hn(x, y)) of those of the original image Org(x, y) by the tone conversion process, can be converted into values nearly equal to those of the original image Org(x, y).  Note that the image components of the LL subband as the low-frequency component of the lowermost layer are not changed. Hence, the dynamic range of the overall image is<br><br>
changed, but image components corresponding to high-frequency components can maintain values nearly equal to those of the original image. Note that the right-hand side of equation (13) may be multiplied by a predetermined constant.  In this case, the high-frequency components of an image can be adjusted (emphasized or suppressed) while changing the dynamic range.<br>
Also, the right-hand side of equation (13) may be multiplied by a predetermined function having a curve form which depends on the pixel values of the original image Org(x, y) or its smoothed image.  Such function has a curve form that assumes a small value when the pixel value of the original image Org(x, y) or its smoothed image is equal to or lower than a predetermined pixel value, or assumes a large value when the pixel value is higher than the predetermined pixel value.  In such case, for example, the absolute values of high-frequency components in a low pixel value region can be suppressed, and noise components can be made less conspicuous.<br>
The image, the dynamic range of which has been changed by the tone conversion process, does not suffer any artifacts such as overshoot and the like.  However, the process given by equation (13) can amplify high-frequency components by changing them, but<br><br>
artifacts such as overshoot and the like may be generated.<br>
To prevent generation of such artifacts, in place of equation (13), it is effective to change high-frequency components by:<br>
h2n(x, y) = hn(x, y) + (l/fV(Org(x, y)) - 1)<br>
X fn(hn(x, y))	,.. (14)<br>
Note that the function fn() has a curve form shown in Fig. 7 or 8.  In Figs, 7 and 8, the abscissa plots the input coefficients, and the ordinate plots the output coefficients.  Figs. 7 and 8 show conversion curves when the frequency coefficients are +, and the same conversion is made even when the frequency coefficients are -.  That is. Figs. 7 and 8 show only the first quadrant of an odd function.  In this specification, all functions used to convert frequency coefficients (high-frequency components or high-frequency coefficients) are odd functions, and only their first quadrants are shown.  These curves are differential continuous (differentiable and continuous functions), and can prevent generation of any false edges.  Image components generated at an edge have values larger than normal components, and these curve forms set image components corresponding to edge components to be 0 or suppress them. As a result, in equation (14), when an image component is large, fn (hn(x, y)) becomes 0 or a suppressed value, and h2n (x.<br><br>
y) becomes nearly equal to hn (x, y) or a suppressed value (a value smaller than an image component of the original image). On the other hand, when an image component has a normal value, h2n(x, y) given by equation (14) becomes the same value as equation (13).<br>
In this way, the dynamic range is changed, and effective image components (those equal to or lower than the predetermined value) of the high-frequency components become equal to those of the image before tone conversion.  Since image components (those higher than the predetermined value) that cause overshoot of the high-frequency components are not added, i.e., changed, or are added or changed while being suppressed, overshoot or the like can be prevented or suppressed. By setting the slope of the function form fn() to be equal to or larger than 1 (or larger than 1) within the range where the input value is equal to or smaller than the predetermined value, high-frequency components can be emphasized while suppressing overshoot.  Hence, the dynamic range and high-frequency components can be simultaneously changed while suppressing overshoot and the like.<br>
The inverse DWT circuit 116 computes the inverse discrete wavelet transforms of image components (transform coefficients) converted by the component conversion circuit 115 as follows (s204).  The converted image components stored in the main memory<br><br>
109 are sequentially read out and undergo the inverse transformation process by the inverse discrete wavelet transformation circuit 116, and are written in the main memory 109 again. Assume that the arrangement of the inverse discrete wavelet transformation of the inverse DWT circuit 116 in this embodiment is as shown in Fig. 6C.  Input image components undergo filter processes using two filters u and p, and are added to each other after being up-sampled, thus outputting an image signal x' . These processes are described by:<br>
x' (2*n)=s' (n)-floor((d' (n-l)+d' (n))/4)    ... (15)<br>
X* (2*n + l)=d' (n)-ffloor ( (x' (2*n) +x' (2*n+2) ) /2)<br>
... (16)<br>
With the above process", linear inverse discrete wavelet transformation of transform coefficients is done.  Since two-dimensional inverse discrete wavelet transformation is implemented by sequentially executing linear inverse transformation in the horizontal and vertical directions of an image and its details are known to those who are skilled in the art, a description thereof will be omitted.<br>
As described above, since the dynamic range change process is implemented by exploiting the multiple-frequency transformation process, and high-frequency components are adjusted in correspondence with tone conversion used to change the dynamic range, a high-quality output image, the dynamic<br><br>
range of which has been changed, can be obtained. Also, the dynamic range of an image can be changed, and high-frequency components can be changed at the same time, while suppressing artifacts such as overshoot and the like.  In this manner, a dynamic range change process such as dynamic range compression or the like and a sharpening process for each frequency band by changing frequency components for each frequency band can be simultaneously executed.<br>
(Embodiment 2)<br>
Embodiment 2 will be described below along with the flow of processes shown in Fig. 9. A description of the same processes as   those in Embodiment 1 will be omitted.<br>
The DWT circuit 114 executes a DWT process of an original image Org(x, y). Let horgn(x, y) be each image component obtained by that process (s601) .  The tone conversion circuit 113 executes a tone conversion process of the original image Org(x, y) using a tone conversion curve f() (s602). The DWT circuit 114 executes a DWT process of the image f(Org(x, y) ) that has undergone the tone conversion process to obtain image components hn(x, y) {s603) . Note that n indicates the subband category and x and y are the coordinates as in Embodiment 1.<br><br>
The component conversion circuit 115 adds image component horgn(x, y) to the image component hn(x, y) to obtain a new image component h2n(x, y) (s604) by:<br>
h2n(x, y) = hn(x, y) + (1 - f'(Org(x, y) ) )<br>
X horgn(x, y)	... (17)<br>
Note that the image components of the LL subband as the low-frequency component of the lowermost layer are not changed.  In this manner, the magnitudes of high-frequency components of the image, the dynamic range of which has been changed can be maintained to be nearly equal to those of high-frequency components of the original image.  In this case, since the high-frequency components are added using those of the original image, the magnitudes of the high-frequency components can accurately come closer to those of the high-frequency components of the original image.  Note that the second term of the right-hand side of equation (17) may be multiplied by a predetermined constant.  In this case, the high-frequency components of the image can be adjusted (emphasized or suppressed) while changing the dynamic range.<br>
Note that equation (18) may be used in place of equation (17) to obtain the same effect:<br>
h2n(x, y) = horgn(x, y)	... (18)<br>
Also, the right-hand side of equation (17) may be multiplied by a predetermined function having a curve form which depends on the pixel values of the original<br><br>
image Org (x, y) or its smoothed image.  Such function has a curve form that assumes a small value when the pixel value of the original image Org(x, y) or its smoothed image is equal to or lower than a predetermined pixel value, or assumes a large value when the pixel value is higher than the predetermined pixel value.<br>
The image, the entire dynamic range of which has been changed by the tone conversion process, does not suffer any artifacts such as overshoot and the like. However, the process given by equation (17) can amplify high-frequency components by adding those of the original image, but simultaneously adds components of the original image which may cause artifacts such as overshoot and the like.  Hence, overshoot may occur.<br>
To prevent this, in place of equation (17), it is effective to change high-frequency components by:<br>
h2n(x, y) = hn(x, y) + (1 - f(Org(x, y)))<br>
X fn(horgn(x, y))	...(19)<br>
Note that the function fn() has a curve form shown in Fig. 7 or 8.  Image components generated at an edge have values larger than normal components, and these curve forms set image components corresponding to edge components to 0 or suppress them. As a result, in equation (19), when an image component is large, fn(horgn(x, y)) becomes 0 or a suppressed value, and h2n(x, y) becomes nearly equal to hn(x, y) or a<br><br>
suppressed value smaller than horgn(x, y).  On the other hand, when an image component has a normal value, h2n (x, y) becomes the same value as equation (17) .<br>
In this way, the dynamic range is changed, and<br>
)  effective image components (those equal to or lower than the predetermined value) of the high-frequency components become nearly equal to those of the image before tone conversion.  Since image components (those higher than the predetermined value) that cause<br>
I  overshoot of the high-frequency components are not added, i.e., changed, or are added or changed while being suppressed, overshoot or the like can be prevented or suppressed.  By setting the slope of the function form fn() to be equal to or larger than 1 (or larger than 1) within the range where the input value is equal to or smaller than the predetermined value, high-frequency components can be emphasized while suppressing overshoot. Hence, the dynamic range and high-frequency components can be changed at the same time while suppressing overshoot and the like.<br>
The inverse DWT circuit 116 executes an inverse DWT process based on the image components changed by the component change circuit 115 (S605).<br>
In Embodiment 2, since the dynamic range change process is implemented by exploiting the multiple-frequency process, and high-frequency components are adjusted in correspondence with tone<br><br>
conversion used to change the dynamic range, a high-quality image, the dynamic range of which has been changed, can be obtained.  Furthermore, since high-frequency components of the original image are used as those to be added, high-frequency components of the processed image can accurately come closer to those of the original image. Also, the dynamic range and high-frequency components can be changed at the same time while suppressing artifacts such as overshoot and the like.  In this manner, a dynamic range change process such as dynamic range compression or the like and a sharpening process for each frequency band by changing frequency components for each frequency band can be simultaneously executed to obtain a high-quality output image.<br>
(Embodiment 3)<br>
Embodiment 3 will be described along with the flow of processes shown in Fig. 10. A description of the same processes as those in Embodiment 1 will be omitted.<br>
The tone conversion circuit 113 executes a tone conversion process of an original image Org(x, y) using a tone conversion curve f() to obtain a processed image f(Org(x, y) (s701).  The DWT circuit 114 then executes a DWT process of the original image to obtain image components hn(x, y) (s702).  Note that n indicates the<br><br>
subband category and x and y are the coordinates as in Embodiment 1.<br>
The component conversion circuit 115 converts each image component hn(x, y) by:<br>
h2n(x, y) = (1 - f'(Org(x, y))) x hn(x, y)<br>
.,. (20) to obtain a new image component h2n(x, y) (s703).<br>
Furthermore, the values of the lowest frequency component LL are set to be all Os (zeros).<br>
In this way, upon restoring an image from h2n(x, y), an image Hr(x, y) consisting of only high-frequency components depending on the slope of the tone conversion curve can be obtained.  Note that the right-hand side of equation (20) may be multiplied by a predetermined constant.  In this case, the high-frequency components of the image can be adjusted (emphasized or suppressed) while changing the dynamic range.<br>
Also, the right-hand side of equation (20) may be multiplied by a predetermined function having a curve form which depends on the pixel values of the original image Org(x, y) or its smoothed image.  Such function has a curve form that assumes a small value when the pixel value of the original image Org(x, y) or its smoothed image is equal to or lower than a predetermined pixel value, or assumes a large value<br><br>
when the pixel value is higher than the predetermined pixel value.<br>
The inverse DWT circuit 116 computes the inverse DWTs based on the components converted by the component conversion circuit 115 to obtain a restored image Hr(x, y) (s704).  The image f(Org(x, y) obtained by the tone conversion circuit 113 is added to the image Hr(x, y) obtained by the inverse DWT circuit 116 by:<br>
Prc(x, y) - f(Org(x, y)) + Hr(x, y)      ...(21) to obtain a processed image Prc(x, y) (s705).<br>
The image, the dynamic range of which has been . changed by the tone conversion process, does not suffer any artifacts such as overshopt and the like,  However, the high-frequency components obtained by equation (20) contain components of the original image which may cause artifacts such as overshoot and the like. Therefore, an image obtained by inversely transforming such image components contains components which may cause overshoot, and if that image is added, overshoot may occur.<br>
To prevent this, in place of equation (20), it is effective to change high-frequency components by:<br>
h2n(x, y) = (1 - f'(Org(x, y))) x fn(hn(x, y))<br>
... (22)<br>
Note that the function fn() has a curve form shown in Fig. 7 or 8.  In image components (high-frequency components), those generated at an edge<br><br>
have values larger than normal components, and these curve forms set image components corresponding to edge components to 0 or suppress them.  As a result, in equation (22), when an image component is large, since fn(hn(x, y)) becomes 0 or a suppressed value, h2n(x, y) also becomes 0 or a suppressed value.  On the other hand, when an image component has a normal value, h2n(x, y) becomes the same value as equation (20).<br>
By adding the image obtained by computing the inverse DWTs of the image components given by equation (20) or (22) to the image that has undergone the tone conversion, an image, the dynamic range of which has been changed, but the high-frequency components of which have magnitudes nearly equal to those of the original image, can be obtained.<br>
Furthermore, since the image components are changed in correspondence with the magnitudes of image components as in equation (22), effective image components (those equal to or lower than the predetermined value) of the high-frequency components become nearly equal to those of the image before tone conversion.  Since image components (those higher than the predetermined value) that cause overshoot of the high-frequency components are not added, i.e., changed, or are added or changed while being suppressed, overshoot or the like can be prevented or suppressed. By setting the slope of the function form fn() to be<br><br>
equal to or larger than 1 (or larger than 1) within the range where the input value is equal to or smaller than the predetermined value, high-frequency components can be emphasized while suppressing overshoot.  Hence, the dynamic range and high-frequency components can be changed at the same time while suppressing overshoot and the like.<br>
In Embodiment 3, since the dynamic range change process is implemented by exploiting the multiple-frequency process, and high-frequency components are adjusted in correspondence with tone, conversion used to change the dynamic range, a high-quality image, the dynamic range of which has been changed, can be obtained.  Furthermore, since high-frequency components of the original image are used as those to be added, high-frequency components of the processed image can accurately come closer to those of the original image. Also, since the DWT process need be done only once, the computation time can be shortened.  Moreover, the dynamic range and high-frequency components can be changed at the same time while suppressing artifacts such as overshoot and the like.  In this manner, a dynamic range change process such as dynamic range compression or the like and a sharpening process for each frequency band by changing frequency components for each frequency band<br><br>
can be simultaneously executed to obtain a high-quality output image.<br>
(Embodiment 4)<br>
Embodiment 4 relates to an image process for obtaining the effects of the dynamic range change and frequency processes while preserving the edge structure Fig. 11 is a block diagram showing the arrangement of Embodiment 4, and a description of the same processes as in Embodiment 1 will be omitted.<br>
Referring to Fig. 11, reference numeral 112 denotes an image processing circuit; 2101, a frequency band decomposing circuit for decomposing an original " image into a plurality of frequency bands by wavelet transformation, Laplacian pyramid transformation, or the like to obtain frequency coefficients; 2102, a coefficient conversion circuit for converting the coefficients on the basis of the slope of a tone conversion curve used later to change the dynamic range; 2103, an inverse conversion circuit for inversely converting the coefficients obtained by conversion by the coefficient conversion circuit 2102; and 2104, a tone conversion circuit for changing the dynamic range of the image, obtained by inverse conversion by the inverse conversion circuit 2103.<br>
Fig. 12 is a flow chart showing the flow of processes of the image processing circuit 112 according to Embodiment 4 of the present invention.  Fig. 13<br><br>
shows an example of the coefficient conversion curve used in the coefficient conversion circuit 2102.  In Fig. 13, the abscissa plots input coefficients, and the ordinate plots output coefficients.<br>
Embodiment 4 will be described below along with the flow of processes shown in Fig. 12,  The frequency band decomposing circuit 2101 executes a two-dimensional discrete wavelet transformation process of an original image f(x, y), and outputs frequency coefficients (s2201).  The frequency coefficient decomposing method may be any method of wavelet transformation, Laplacian pyramid transformation, and the like.  In this embodiment, the image is decomposed into frequency coefficients HHl, HLl, LHl, .. ., LL for respective frequency bands using two-dimensional discrete wavelet transformation.<br>
The coefficient conversion circuit 2102 converts the frequency coefficients in accordance with a tone conversion curve (e.g., a conversion curve shown in Fig. 5) F() used in the tone conversion circuit 2104 (s2202)-  In this case, only coefficients in a region 2301 equal to or lower than a predetermined absolute value (threshold value) are converted, and those higher than the predetermined absolute value remain unchanged, as shown in Fig. 13.  This predetermined absolute value is determined by experiments depending on the magnitudes of coefficients with respect to the edge of<br><br>
an image.  The edge structure can be preserved when coefficients higher than the predetermined absolute value remain unchanged, and artifacts such as overshoot and the like can be suppressed in a reconstructed image<br>
Assume that hn(x, y) are frequency coefficients of n levels, i.e., coefficients of a region 2301 equal to or lower than a predetermined absolute value, and h2n(x, y) are coefficient values after hn(x, y) have undergone coefficient conversion by:<br>
h2n(x, y) =f5(f(x, y)) x (l/F'x, y)).xhn(x, y)<br>
. .. (23)<br>
Note that the function f5() has a curve form which depends on the pixel values of the original image f(x, y) or its smoothed image, for example, a curve form that assumes a small value when the pixel value of the original image f(x, y) or its smoothed imag'e is equal to or lower than a predetermined pixel value, or assumes a large value when the pixel value is higher than the predetermined pixel value.  Note that a conversion curve F2() in Fig. 13 expresses the above process, and the coefficients of the region 2301 are not always linearly converted but are converted based on equation (23).  Therefore, the conversion curve F2() can also be expressed by:<br>
F2(hn(x, y)) = h2n(x, y)<br>
= f5(f(x, y)) X (1/FMx, y)) xhn(x, y) , when hn(x, y) 
 <br>
= hn(x, y), when hn(x, y) &gt; predetermined<br>
threshold value	. . . (23) '<br>
The inverse conversion circuit 2103 inversely converts h2n (x, y) (inverse DWT) (S2203) .  A restored image f2 (x, y) is then obtained.  The tone conversion circuit 2104 executes tone conversion of the restored image f2(x, y) by:<br>
f3(x, y) = F(f2(x, y) )	... (24)<br>
to obtain an image f3(x, y), the dynamic range of which has been changed (s2204).<br>
As described above, according to Embodiment 4, since the frequency coefficients are changed in advance on the basis of a curve form of tone conversion used to change the dynamic range, the magnitudes of high-frequency components in an image, the dynamic range of which has been changed, can be maintained nearly equal to those of high-frequency components of the original image. Since coefficient values within the predetermined absolute value range are not changed, the edge structure can be preserved, and overshoot and the like can be suppressed even in an image which has undergone the frequency process and dynamic range change process.<br>
In Fig, 13, the conversion function F2() has an undifferentiable and discontinuous point, but no artifacts such as false edges or the like appear in the inversely converted image. This is because no<br><br>
structure which is visually recognized as a continuous boundary such as a line or the like appears on the inversely converted image since coefficients having the predetermined absolute value (those corresponding to the undifferentiable and discontinuous point of the conversion curve) are randomly distributed in the coefficient domain. That is, the wavelet coefficients are frequency coefficients, and a predetermined image domain is restored by the inverse wavelet transformation process in correspondence with the magnitudes of frequency components.  Note that frequency coefficients of the predetermined absolute value may often be arranged continuously in correspondence with the edge portion of an image in the coefficient domain.  In such case, since a continuous structure in the coefficient domain, which appears after coefficient conversion using a discontinuous function like the conversion function F2(), appears as a continuous structure along the edge portion even on the restored image, it is not recognized as a false edge.<br>
Since the original image is decomposed into multiple-frequency coefficients, a noise suppression process, a sharpening process, or a hybrid process with other processes can be easily done.  For example, in the noise suppression process or the like, an analysis process or the like based on coefficients upon<br><br>
decomposing the original image into multiple-frequency coefficients is done, and predetermined frequency coefficients are converted based on the analysis result or the like.<br>
(Another Embodiment)<br>
The scope of the present invention includes a case wherein the functions of the embodiments are implemented by supplying a program code of software that implements the functions of the embodiments to a computer (or a CPU or MPU) in an apparatus or system connected to various devices, and making the computer in the system or apparatus operate the various devices in accordance with the stored program, so as to operate the various devices for the purpose of implementing the functions of' the embodiments.<br>
In this casBr   the program code itself read out from the storage medium implements the functions of the embodiments, and the program code itself, and means for supplying the program code to the computer (i.e., a storage medium which stores the program code) constitutes the present invention,<br>
As the storage medium for storing such program code, for example, a floppy disk, hard disk, optical disk, magneto-optical disk, CD-ROM, magnetic tape, nonvolatile memory card, ROM, and the like may be used.<br>
The program code also constitutes the present invention not only when the functions of the<br><br>
embodiments are implemented by executing the supplied program code by the computer but also when the functions of the embodiments are implemented by collaboration of the program code and an OS (operating system) or another application software running on the computer.<br>
Furthermore, the program code constitutes the present invention when the functions of the embodiments are implemented by some or all of actual processes executed by a CPU or the like arranged in a function extension board or a function extension unit, which is inserted in or connected to the computer, after the supplied program code is written in a memory of the extension board or unit.<br>
As described above, according to the above embodiments, since tone conversion and conversion of frequency components based on it are made using the tone conversion process and multiple-frequency transformation process, a high-quality output image can be obtained-<br>
When the dynamic range or predetermined pixel value range of an image is changed by tone conversion, and high-frequency components are converted based on the slope of the tone conversion curve, a high-quality output image, the dynamic range or predetermined pixel value range of which has been changed, can be obtained.<br><br><br>
CLAIMS<br>
1.	An image processing apparatus characterized by<br>
comprising:<br>
tone conversion means for executing tone conversion of an image; and<br>
component conversion means for converting frequency components of a plurality of frequency bands of the image or an image after that image has undergone tone conversion by said tone conversion means, on the basis of tone conversion characteristics of said tone conversion means.<br>
2.	The apparatus according to claim 1, characterized in that said component conversion means converts the frequency components on the basis of a' slope of a tone conversion curve of said tone conversion means.<br>
3.	The apparatus according to claim 1 or 2, characterized in that said component conversion means does not convert predetermined low-frequency components, or sets the predetermined low-frequency components to be zero.<br>
4.	The apparatus according to any one of claims 1 to 3, characterized in that said component conversion means comprises frequency transformation means for decomposing an image into frequency components of a plurality of frequency bands, and inverse frequency transformation means for generating an image by<br><br>
compositing frequency components of a plurality of frequency bands of an image.<br>
5.	The apparatus according to any one of claims 1 to 4, characterized in that said component conversion means executes a discrete wavelet transformation process for an image, and converts components of predetermined subbands except for an LL subband obtained by the discrete wavelet transformation process, on the basis of a slope of a tone conversion curve of said tone conversion means.<br>
6.	The apparatus according to claim 5, characterized in that said component conversion means does not convert components of the LL subband or sets the" components of the LL subband to be zero,<br>
7.	The apparatus according to any one of claims 1 to 6,   characterized in that said component conversion means converts the frequency components on the basis of pixel values of the image or a smoothed image thereof.<br>
8 -    An image processing apparatus characterized by comprising:<br>
tone conversion means for executing tone conversion of an image;<br>
frequency transformation means for decomposing an image that has undergone tone conversion by said tone conversion means into frequency components of a plurality of frequency bands; and<br><br>
component conversion means for converting the frequency components of the plurality of frequency bands obtained by said frequency transformation means, on the basis of tone conversion characteristics of said tone conversion means.<br>
9.	The apparatus according to claim 8, characterized in that said component conversion means converts the frequency components on the basis of a slope of a tone conversion curve of said tone conversion means.<br>
10.	The apparatus according to claim 8 or 9, characterized in that said component conversion means does not convert predetermined low-frequency components<br>
11.	The apparatus according to any one of claims 8 to<br>
10,	characterized by further comprising inverse<br>
frequency transformation means for generating an image<br>
by compositing the frequency components -<br>
12.	The apparatus according to any one of claims 8 to<br>
11,	characterized in that said frequency transformation<br>
means executes a discrete wavelet transformation<br>
process, and said component conversion means converts<br>
components of predetermined subbands except for an LL<br>
subband obtained by the discrete wavelet transformation<br>
process, on the basis of a slope of a tone conversion<br>
curve of said tone conversion means.<br>
13.	The apparatus according to claim 12,<br>
characterized in that said component conversion means<br>
does not convert components of the LL subband.<br><br>
14.	The apparatus according to any one of claims 8 to 13, characterized in that said component conversion means converts the frequency components on the basis of pixel values of the image or a smoothed image thereof.<br>
15.	An image processing apparatus characterized by comprising:<br>
first frequency transformation means for decomposing an image into first frequency components of a plurality of frequency bands;<br>
tone conversion means for executing tone conversion of the image;<br>
second frequency transformation means for decomposing the image that has undergone tone conversion by said tone'conversion means into second frequency components of a plurality of frequency bands; and<br>
component conversion means, for converting the second frequency components of the plurality of frequency bands by adding frequency components, which are obtained by converting the first frequency components of the plurality of frequency bands on the basis of tone conversion characteristics of said tone conversion means, to the second frequency components of the plurality of frequency bands.<br>
16.	The apparatus according to claim 15,<br>
characterized in that said component conversion means<br>
converts the first frequency components of the<br><br>
plurality of frequency bands on the basis of a slope of a tone conversion curve of said tone conversion means.<br>
17.	The apparatus according to claim 15 or 16, characterized in that said component conversion means does not convert predetermined low-frequency components of the second frequency,components of the plurality of frequency bands,<br>
18.	The apparatus according to any one of claims 15 to 17, characterized by further comprising inverse frequency transformation means for generating an image by compositing the second frequency components of the plurality of frequency bands converted by said component conversion means.<br>
19.	The apparatus according to any one of claims 15 to 18, characterized in that said first and second frequency transformation means execute a discrete wavelet transformation process, and said component conversion means converts components of predetermined subbands except for an LL subband obtained by the discrete wavelet transformation process of said first frequency transformation means, on the basis of a slope of a tone conversion curve of said tone conversion means.<br>
20.	The apparatus according to claim 19, characterized in that said component conversion means does not convert components of the LL subband obtained<br><br>
by the discrete wavelet transformation process of said second frequency transformation means,<br>
21.	The apparatus according to any one of claims 15 to 20, characterized in that said component conversion means converts the first frequency components of the plurality of frequency bands on the basis of pixel values of the image or a smoothed image thereof.<br>
22.	An image processing apparatus characterized by comprising:<br>
tone conversion means for executing tone<br>
conversion of an images-frequency transformation means for decomposing<br>
the image into frequency components of a plurality of<br>
frequency bands;<br>
component conversion means for converting the<br>
frequency components of a plurality of frequency bands<br>
obtained by said frequency transformation means, on the<br>
basis of tone conversion characteristics of said tone<br>
conversion means;<br>
inverse frequency transformation means for<br>
generating an image by compositing the frequency.<br>
components converted by said component conversion<br>
means; and<br>
addition means for adding the image generated by<br>
said inverse frequency transformation means and the<br>
image that has undergone tone conversion by said tone<br>
conversion means.<br><br>
23.	The apparatus according to claim 22, characterized in that said component conversion means converts the frequency components on the basis of a slope of a tone conversion curve of said tone conversion means,<br>
24.	The apparatus according to claim 22 or 23, characterized in that said component conversion means sets predetermined low-frequency components to be zero.<br>
25.	The apparatus according to any one of claims 22 to 24, characterized in that said frequency transformation means executes a discrete wavelet transformation process, and said component conversion means converts-components of predetermined subbands except for an LL subband obtained by the discrete wavelet transformation process, on the basis of a slope of a tone conversion curve of said tone conversion means.<br>
26.	The apparatus according to claim 25, characterized in that said component conversion means sets components of the LL subband to be zero.<br>
27 .   The apparatus according to any one  of  claims 22 to 2 6, characterized in that sa:id component conversion means converts the frequency components on the basis of pixel values of the image or a smoothed image thereof. 28.   An image processing apparatus characterized by comprising:<br><br>
frequency transformation means for decomposing an image into frequency components of a plurality of frequency bands;<br>
component conversion means for converting the frequency components of the plurality of frequency bands obtained by said frequency transformation means, on the basis of predetermined tone conversion characteristics;<br>
inverse frequency transformation means for generating an image by compositing the frequency components converted by said component conversion means; and<br>
tone conversion means for executing tone conversion of the image generated by said inverse frequency transformation means, on the basis of the predetermined tone conversion characteristics.<br>
29.	The apparatus according to claim 28, characterized in that said component conversion means converts the frequency components on the basis of a slope of a tone conversion curve of said tone conversion means.<br>
30.	The apparatus according to claim 28 or 29, characterized in that said component conversion means does not convert predetermined low-frequency components<br>
31.	The apparatus according to any one of claims 28 to 30, characterized in that said frequency transformation means executes a discrete wavelet<br><br>
transformation process, and said component conversion means converts components of    predetermined subbands except for an LL subband obtained by the discrete wavelet transformation process,   on the basis of. a. slope of a tone conversion curve of said tone conversion means.<br>
32 .   The apparatus according to claim 31, characterized in that said component conversion means does not convert components of the LL subband.<br>
33.	The apparatus according to any one of claims 2 8 to 32, characterized in that said component conversion means converts the frequency components on the basis of pixel values of the image or a smoothed image thereof.<br>
34.	An image processing method characterized by comprising:<br>
a tone conversion step of executing tone conversion of an image; and<br>
a component conversion step of converting frequency components of a plurality of frequency bands of the image or an image after that image has undergone tone conversion in the tone conversion step, on the basis of tone conversion characteristics of the tone conversion step.<br>
35.	An image processing method characterized by<br>
comprising:<br>
a tone conversion step of executing tone conversion of an image;<br><br>
a frequency transformation step of decomposing the image that has undergone tone conversion in the tone conversion step into frequency components of a plurality of frequency bands; and<br>
a component conversion step of converting the frequency components of the plurality of frequency bands obtained in the frequency transformation step, on the basis of tone conversion characteristics of the tone conversion step.<br>
36.   An image processing method characterized by comprising:<br>
a first frequency transformation step of decomposing an image into first frequency components of a plurality of frequency bands;<br>
a tone conversion step of executing tone conversion of the image;<br>
a second frequency transformation step of decomposing the image that has undergone tone conversion in the tone conversion step into second frequency components of a plurality of frequency bands; and<br>
a component conversion step of converting the second frequency components of the plurality of frequency bands by adding frequency components, which are obtained by converting the first frequency components of the plurality of frequency bands on the basis of tone conversion characteristics of the tone<br><br>
conversion step, to the second frequency components of the plurality of frequency bands.<br>
37,	An image processing method characterized by<br>
comprising:<br>
a tone conversion step of executing tone conversion of an image;<br>
a frequency transformation step of decomposing the image into frequency components of a plurality of frequency bands;<br>
a component conversion step of converting frequency components of the plurality of frequency bands obtained in the frequency transformation step^ on the basis of tone conversion characteristics of,the tone conversion step;<br>
an inverse frequency transformation step of generating an image by compositing the frequency components converted in the component conversion step; and<br>
an addition step of adding the image generated in the inverse frequency transformation step and the image that has undergone tone conversion in the tone conversion step.<br>
38.	An image processing method characterized by<br>
comprising:<br>
a frequency transformation step of decomposing an image into frequency components of a plurality of frequency bands;<br><br>
a component conversion step of converting the frequency components of the plurality of frequency bands obtained in the frequency transformation step, on the basis of predetermined tone conversion characteristics;<br>
an inverse frequency transformation step of generating an image by compositing the frequency components converted in the component conversion step; and<br>
a tone conversion step of executing tone conversion of the image generated in the inverse frequency transformation step, on the basis of the predetermined tone conversion characteristics.<br>
39.	A computer-readable storage medium that stores a program for making a computer implement functions of an image processing apparatus cited in any one of claims 1 to 33.<br>
40.	A computer-readable storage medium that stores a program for making a computer execute processing steps of an image processing method cited in any one of claims 34 to 38.<br>
41.	A program for making a computer implement functions of an image processing apparatus cited in any one of claims 1 to 33.<br>
42.	A program for making a computer execute processing steps of an image processing method cited in any one of claims 34 to 38.<br><br>
43.	An image processing apparatus substantially as herein described<br>
with reference to the accompanying drawings.<br>
44.	A  computer readable  storage  medium substantially  as   herein<br>
described with reference to the accompanying drawings.<br>
Dated this 29 day of May 2003<br><br></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODM3LWNoZW5wLTIwMDMtYWJzdHJhY3QucGRm" target="_blank" style="word-wrap:break-word;">837-chenp-2003-abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODM3LWNoZW5wLTIwMDMtY2xhaW1zIGR1cGxpY2F0ZS5wZGY=" target="_blank" style="word-wrap:break-word;">837-chenp-2003-claims duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODM3LWNoZW5wLTIwMDMtY2xhaW1zIG9yaWdpbmFsLnBkZg==" target="_blank" style="word-wrap:break-word;">837-chenp-2003-claims original.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODM3LWNoZW5wLTIwMDMtY29ycmVzcG9uZG5lY2Utb3RoZXJzLnBkZg==" target="_blank" style="word-wrap:break-word;">837-chenp-2003-correspondnece-others.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODM3LWNoZW5wLTIwMDMtY29ycmVzcG9uZG5lY2UtcG8ucGRm" target="_blank" style="word-wrap:break-word;">837-chenp-2003-correspondnece-po.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODM3LWNoZW5wLTIwMDMtZGVzY3JpcHRpb24oY29tcGxldGUpIGR1cGxpY2F0ZS5wZGY=" target="_blank" style="word-wrap:break-word;">837-chenp-2003-description(complete) duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODM3LWNoZW5wLTIwMDMtZGVzY3JpcHRpb24oY29tcGxldGUpIG9yaWdpbmFsLnBkZg==" target="_blank" style="word-wrap:break-word;">837-chenp-2003-description(complete) original.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODM3LWNoZW5wLTIwMDMtZHJhd2luZ3MucGRm" target="_blank" style="word-wrap:break-word;">837-chenp-2003-drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODM3LWNoZW5wLTIwMDMtZm9ybSAxLnBkZg==" target="_blank" style="word-wrap:break-word;">837-chenp-2003-form 1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODM3LWNoZW5wLTIwMDMtZm9ybSAxOS5wZGY=" target="_blank" style="word-wrap:break-word;">837-chenp-2003-form 19.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODM3LWNoZW5wLTIwMDMtZm9ybSAyNi5wZGY=" target="_blank" style="word-wrap:break-word;">837-chenp-2003-form 26.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODM3LWNoZW5wLTIwMDMtZm9ybSAzLnBkZg==" target="_blank" style="word-wrap:break-word;">837-chenp-2003-form 3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODM3LWNoZW5wLTIwMDMtZm9ybSA1LnBkZg==" target="_blank" style="word-wrap:break-word;">837-chenp-2003-form 5.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=ODM3LWNoZW5wLTIwMDMtcGN0LnBkZg==" target="_blank" style="word-wrap:break-word;">837-chenp-2003-pct.pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="204263-a-method-for-determining-a-flow-rate-of-a-material-and-a-meter-electronics-for-a-coriolis-flowmeter.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="204265-a-process-for-the-separation-and-purification-of-epothilones-from-a-resin.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>204264</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>837/CHENP/2003</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>26/2007</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>29-Jun-2007</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>13-Feb-2007</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>29-May-2003</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>SHRI. CANON KABUSHIKI KAISHA</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>3-30-2, Shimomaruko, Ohta-ku, Tokyo 146-8501</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>SHINBATA, Hiroyuki</td>
											<td>6-11-6-602, Motoimaizumi, Utsunomiya-shi, Tochigi 321-0954</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>G06T5/10</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/JP01/10387</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2001-11-28</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>2001-105846</td>
									<td>2001-04-04</td>
								    <td>Japan</td>
								</tr>
								<tr>
									<td>2</td>
									<td>2000-365328</td>
									<td>2000-11-30</td>
								    <td>Japan</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/204264-image-processing-method-for-changing-a-dynamic-range-of-an-original-image by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 06:30:42 GMT -->
</html>
