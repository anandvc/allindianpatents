<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/230745-position-location-with-low-tolerance-oscillator by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 11:33:05 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 230745:POSITION LOCATION WITH LOW TOLERANCE OSCILLATOR</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">POSITION LOCATION WITH LOW TOLERANCE OSCILLATOR</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>ABSTRACT POSITION LOCATION WITH LOW TOLERANCE OSCILLATOR The present invention relates to a novel and improved method and apparatus for performing a position location in wireless communication system. On embodiment of the invention comprises a method of performing position location in a wireless subscriber unit having a local oscillator, comprising the steps of receiving a position location request, acquiring a timing signal when a sufficient period of time has elapsed since the local oscillator has been corrected and correcting the local oscillator using a correction signal using a correction signal based on the timing signal, substantially freezing the correction signal, performing a position location procedure using the local oscillator with the correction signal applied, and ending said position location procedure. (Figure 6) 24</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td> <br><br>
The present invention relates to position location. More particularly, the present invention relates to a novel and improved method and apparatus for performing position location in wireless communications system.<br>
II. Description of the Related Art<br>
Both government regulation and consumer demand have driven the demand for position location functionality in cellular telephones. The global positioning system (GPS) is currently available for performing position location using a GPS receiver in conjunction with a set of earth orbiting satellites. It is therefore desirable to introduce GPS functionality into a cellular telephone.<br>
Cellular telephones, however, are extremely sensitive to cost, weight and power consumption considerations. Thus, simply adding additional circuitry for performing GPS location is an unsatisfactory solution for providing position location iunctionality in a cellular telephone. Thus, the present invention is directed to providing GPS functionality in a cellular telephone system with a minimum of additional hardware, cost and power consumption,<br>
SUMMARY OF THE INVENTION<br>
The present invention is a novel and improved method and apparatus for performing position location in wireless communications system. One embodiment of the invention comprises a method of performing position location in a wireless subscriber unit having a local oscillator, including the steps of receiving a position location request, acquiring a timing signal when a sufficient period of time has elapsed since the local oscillator has been corrected and correcting said local oscillator using a correction signal based on said timing signal, substantially freezing the correction signal, performing a position location procedure using the local oscillator with the correction signal applied, and ending said position location procedure.<br>
BRIEF DESCRIPTION OF THE DRAWINGS<br>
2<br><br>
The features, objects, and advantages of the present invention will become more apparent from the detailed description set forth below when taken in conjunction with the drawings in which like reference characters identify correspondingly throughout and wherein:<br>
Fig. 1 is a block diagram of the Global Positioning System (GPS) waveform generator;<br>
Fig. 2 is a highly simplified block diagram of a cellular telephone system configured in accordance with the use of present invention;<br>
Fig. 3 is a block diagram of a receiver configured in accordance with one embodiment of the invention;<br>
Fig. 4 is another block diagram of the receiver depicted in Fig. 3;<br>
Fig. 5 is a receiver configured in accordance with an alternative embodiment of the invention;<br>
Fig.6 is a flow chart of the steps performed during a position location operation;<br>
Fig. 7 is a block diagram of a DSP configured in accordance with one embodiment of the invention;<br>
Fig.8 is a flow chart illustrating the steps performed during a search performed in accordance with one embodiment of the invention;<br>
Fig. 9 is a time line illustrating the phases over which fine and coarse searches are performed in one embodiment of the invention;<br>
Fig. 10 is a time line of the search process when performed in accordance with one embodiment of the invention;<br>
Fig. ii is a diagram of search space.<br>
Fig. 12 is a block diagram of a receiver in accordance with another embodiment of the invention.<br><br>
DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS<br>
A novel and improved method and apparatus for performing position location in wireless communications system is described. The exemplary embodiment is described in the context of the digital cellular telephone system. While use within this context is advantageous, different embodiments of the invention may be incorporated in different environments or configurations. In general, the various systems described herein may be formed using software controlled processors, integrated circuits, or discreel logic, however, implementation in an integrated circuit is preferred. The data, instructions, commands, information, signals, symbols and chips that may be referenced throughout the application are advantageously represented by voltages, currents, electromagnetic waves, magnetic fields or particles, optical fields or particles, or a combinadon thereof Additionally, the blocks shown in each block diagram may represent hardware or method steps.<br>
Fig. 1 is a block diagram of the Global Positioning System (GPS) waveform generator. The circle with a plus sign designates modulo-2 addition. In general, the GPS constellation consists of 24 satellites: 21 space vehicles (SVs) used for navigation and 3 spares. Each SV contains a clock that is synchronized to GPS time by monitoring ground stations. To determine a position and time, a GPS receiver processes the signals received from several satellites. At least 4 satellites must be used to solve for the 4 unknowns (x, y, z, lime).<br>
Each SV transmits 2 microwave carriers: the 1575.42 MHz LI carrier, which carries the signals used for Standard Positioning Service (SPS), and the 1227.60 MHz L2 carrier, which carries signals needed for Precise Positioning Service (PPS). PPS is used by governmental agencies and allows a higher degree of accuracy in positioning.<br><br>
The LI carrier is modulated by the Coarse Acquisition (C/A) code, a 1023-chip pseudorandom code transmitted at L023 Mcps that is used for civil position location services. (The Coarse Acquisition code should not be confused with the coarse and fine acquisitions described herein, which both involve the use of the C/A codes,) Each satellite has its own C/A code that repeats every2mus. The P code, which is used for PPS, is a 10.23 MHz code that is 267 days in length. The P code appears on both carriers but is 90 degrees out of phase with the C/A code on the LI carrier. The 50Hz navigation message, which is exclusive-ORed with both the C/A code and P code before carrier modulation, provides system information such as satellite orbits and clock corrections.<br>
The LI carrier is modulated by the Coarse Acquisition (CJA) code, a 1023-chip pseudorandom code transmitted atl. 023 Mcps that is used for civil position location services. Each satellite has its own C/A code that repeats every Ims. The P code, which is used for PPS, is a 10.23 MHz code that is 267 days in length. The P code appears on both carriers but is 90 degrees out of phase with the C/A code on the LI carrier. TheSOHz navigation message, which is exclusive-ORed with both the C/A code and P code before carrier modulation, provides system information such as satellite orbits and clock corrections.<br>
The LI carrier is modulated by the Coarse Acquisition (C/A) code, a 1023-chip pseudorandom code transmitted at 1.023 Mcps that is used for civil position location services. Each satellite has its own C/A code that repeats every 1ms. The P code, which is used for PPS, is a 10.23 MHz code that is 267 days in length. The P code appears on both carriers but is 90 degrees out of phase with the C/A code on the LI carrier. TheSOHz navigation message, which is exclusive-ORed with both the C/A code and P code before carrier modulation, provides system information such as satellite orbits and clock corrections.<br><br>
Each satellite has a different C/A code that belongs to a family of codes called Gold codes. Gold codes are used because the cross-correlation between them are small. The C/A code is generated using two 10-stage shift registers as shown below in figure 1,4-2. The Gl generator uses the polynomial l+X'^+X'", while the G2 generator uses the polynomial 1+X^+X^+XVX^+X^+X'°. The C/A code is generated by exclusive ORing the output of the Gl shift register with 2 bits of the G2 shift register.<br>
Fig. 2 is a highly simplified block diagram of a cellular telephone system configured in accordance with the use of present invention. Mobile telephones 10 are located among base stations 12, which are coupled to base station controller (BSC) 14. Mobile switching center MSC 16 connects BSC 14 to the public switch telephone network (PSTN). During operation, some mobile telephones are conducting telephone calls by interfacing with base stations 12 while others are in standby mode.<br>
As described in copending US patent application serial no. 09/040,051 entitled "SYSTEM AND METHOD FOR DETERMINING THE POSITION OF A WIRELESS CDMA TRANCEIVER" assigned to the assignee of the present invention and incorporated herein by reference, position location is facilitated by the transmission of a position request message containing "aiding information" that allows the mobile telephone to quickly acquire the GPS signal. This information includes the ID number of the SV (SV ID), the estimated code phase, the search window size around the estimate code phase, and the estimated frequency Doppler. Using this information, the mobile unit can acquire the GPS signals and determine its location more quickly.<br>
In response to the aiding message, the mobile unit tunes to the GPS frequency and begins correlating the received signal with its locally generated C/A sequences for the SVs indicated by the base station. It uses the aiding information to narrow the search space and compensate for<br><br>
Doppler effects, and obtains pseudo-ranges for each satellite using time correlation. Note that these pseudo-ranges are based on mobile unit time (referenced from the CDMA receiver's combiner system time counter), which is a delayed version of GPS time.<br>
Once this information is calculated, the mobile unit sends the pseudo-ranges for each satellite (preferably to 1/8 chip resolution) and the time the measurements were taken to the base station. The mobile unit then retunes to CDMA to continue the call.<br>
Upon, receipt of the information, the BSC uses the one-way delay estimate to converts the pseudo-ranges from mobile unit time to base station time and computes the estimated position of the mobile unit by solving for the intersection of several spheres.<br>
Another parameter provided by the aiding message is the frequency Doppler or Doppler offset. The Doppler effect manifests as an apparent change in the frequency of a received signal due to a relative velocity between the transmitter and receiver. The effect of the Doppler on the carrier is referred to as frequency Doppler, while the effect on the baseband signal is referred to as code Doppler.<br>
In the GPS case, frequency Doppler changes the received carrier frequency so the effect is the same as demodulating with a carrier offset. Since the base station's GPS receiver is actively tracking the desired satellite, h knows the frequency Doppler due to satellite movement. Moreover, the satelHte is so far away from the base station and the mobile unh that the Doppler seen by the mobile unit is effectively the same as the Doppler seen by the base station. In one embodiment of the invention, to correct for the frequency Doppler value, the mobile unit uses a rotator in the receiver. The frequency Doppler ranges from -4500Hz to +4500Hz, and the rate of change is on the order of 1 Hz/s.<br><br>
The effect of the code Doppler is to change the 1.023 Mhz chip rate, which effectively compresses or expands the width of the received C/A code chips. In one embodiment of the invention, the mobile unit correct for code Doppier by multipiying the frequency Doppler by the ratio 1.023/1575.42.<br>
The mobile unit can then correct for code Doppler over time by slewing (introducing delay into) the phase of the received IQ samples in 1/16 chip increments as necessary.<br>
Fig. 3 is a block diagram of the receiver portion of a cellular telephone (wireless subscriber unit) configured in accordance with one embodiment of the invention. The received waveform 100 is modeled as the C/A signal c (n) modulated with a carrier at frequency wc +wd, where wc is the nominal carrier frequency 1575.42 MHz, and wd is the Doppler frequency created by satellite movement. The Doppler frequency ranges from 0 when the satellite is directly overhead, to about 4.5kHz in the worst case. The receiver analog section can be modeled as demodulation with a carrier at frequency wr and random phase 0, followed by low pass filtering.<br>
The resulting baseband signal is passed through an A/D converter (not shown) to produce digital I and Q samples, which are stored so that they may be repeatedly searched. The samples are generated at two times the C/A code chip rate (chipx2) which is a lower resolution than necessary to perform the fine search algorithm, but which allows 18 ms of sample data to be stored in a reasonable amount of memory. In general, it is desirable to perform the searching over something greater than 10ms in order to allow acquisition in most environmental conditions, with 18ms being a preferred integration period. These environmental conditions include being inside or not having a direct view to the satellite.<br>
During operation, the samples are first rotated by rotator 102 to correct for the Doppler frequency offset. The rotated I imd Q samples are<br><br>
correlated with various offsets of the satellite's C/A sequence and the resulting products are coherently integrated over Nc chips by integrators 104.<br>
The coherent integration sums are squared and added together to remove the effect of the unknown phase offsetO. To augment the hypothesis test for a particular offset, several coherent intervals are non-coherently combined.<br>
This despreading is performed repeatedly at various time offsets to find the time offset of the satellite signal. Rotator 102 removes the frequency Doppler created by satellite movement. It uses the Doppler frequency specified by the base station (preferably quantized tolOHz intervals) and rotates the I and Q samples to remove the frequency offset.<br>
In one embodiment of the invention, the rotation is continuous only over the coherent integration window. That is, the rotator stops in between coherent integration periods of, for example, 1 ms. Any resulting phase difference is eliminated by the square and sum.<br>
Fig. 4 is another block diagram of a receiver configured in accordance with one embodiment of the invention, where the rotator portion of the receiver is depicted in greater detail.<br>
Fig. 5 is a receiver configured in accordance with an alternative embodiment of the invention. This internal embodiment of the invention takes advantage of the ability to stop the rotator between coherent integration periods by rotating the locally generated C/A sequence instead of the input samples.<br>
As shown, the C/A sequence c (n) are rotated by application to the sinusoids sin (WdnTc) and cos (WdnTc) and then stored. The rotation of the C/A sequence only needs to be done once for each satellite. Thus, rotating die C/A sequence reduces the amount of computation required. It<br><br>
also saves memory in the DSP used to perform this computation in one embodiment of the invention.<br>
Another significant impairment that degrades the performance of the position location algorithm is the frequency error in the mobile units internal clock. It is this frequency error which drives the use of short coherent integration times on the order of 1 ms. It is preferable to perform coherent integration over longer time periods.<br>
In an exemplary configurations, the mobile's free running (internal) local oscillator clock is a 19.68MHz crystal that has a frequency tolerance of+/-5ppm. This can cause large errors on the order of+/-7500 Hz. This clock is used to generate the carriers used for demodulation of the GPS signals, so the clock error will add to the signal acquisition time. Because the time available to search is very small, error of this magnitude due to the frequency tolerance are not tolerable and must be greatly reduced.<br>
To allow longer coherent integration times, in one embodiment of the invention, the CDMA receiver corrects for local oscillator error by using timing acquired from the CDMA pilot, or any other source of timing information available, such as a signal from among a set of GSM downlink channels including, but not limited to, the assigned traffic channel midamble and/or GSM frequency correction control channel. This produces a control signal that is used to tune the local oscillator clock to 19.68MHz as closely as possible. The control signal applied to the local oscillator clock is frozen when the RF unit switches from CDMA to GPS.<br>
Even after the correction is performed using the timing information from the bases station (or other source), however, some additional clock error remains. In one embodiment of the invention, the resulting frequency uncertainty after correction is+/-100Hz. This remaining error still reduces the performance of the receiver, and in general prevents longer coherent integration times. In one embodiment of the invention, the remaining error<br>
10<br><br>
simply avoided by performing non-coherent integration for duration of more thanlms which reduces performance.<br>
As also shown in Fig. 1, the 50Hz NAV/system data is also modulated onto the LI carrier. If a data transition (0 to 1 or 1 to 0) occurs between the two halves of a coherent integration window, the resulting coherent integration sum will be zero because the two halves will cancel each other out. This effectively reduces the number of non-coherent accumulations by one in the worst case. Although the data boundaries of all the satellites are synchronized, they do not arrive at the mobile unit simultaneously because of the differences in path delay. This path delay effectively randomizes the received data phase.<br>
In one embodiment of the invention, the problem of different data phases on different signals is to include the data phase in the aiding information sent from the base station to the mobile unit. Since the base station is demodulating the 50Hz data, it knows when the data transitions occur for each satellite. By using knowledge of the one-way delay, the base station can encode the data phase in, for example, 5 bits (per satellite) by indicating which one millisecond interval (out of 20) the data transition occurs on.<br>
If the coherent integration window straddles the 50Hz data boundary the coherent integration is divided into two (2) sections. One section preceding the data boundary and one section following the data boundary. For example, if Enl is the coherent integration sum over the window preceding the data botmdary the first half of this window and En2 is the coherent integration sum over the window following the data boundary, the mobile unit then selects the maximum (in magnitude) of (Enl + En2) (in case the data stayed the same) and (Enl-En2) (in case the data changed) to account for the phase change. The mobile unit also has the option of<br>
11<br><br>
performing non-coherent combining of the two halves over this data window or avoiding this data window completely.<br>
In an alternative embodiment of the invention, the mobile unit attempts to find the data transitions without the aiding information from the base station by comparing the magnitude squared of the sum and difference in I ms coherent integration.<br>
In one embodiment of the invention, a firmware-based DSP (Digital Signal Processor) approach is used to perform the GPS processing. The DSP receives I and Q samples at a chipx2 (2.046 MHz) or chipxS (8.184 MHz) rate, and stores a snapshot of 4-bit I and Q samples in its internal RAM.<br>
In the exemplary embodiment, the DSP generates the C/A sequence, performs rotation to eliminate frequency Doppler, and correlates over the search window provided by the base station for each of the satellites. The DSP performs coherent integration and non-coherent combining and stews an IQ sample decimator as necessary to compensate for code Doppler.<br>
To save computation and memory, the initial search is performed using - chip resolution and a finer search to obtainl/8 chip (higher) resolution is performed around the best index (or indexes). System time is maintained by counting hardware-generated Iras interrupts (derived from local oscillator).<br>
Additionally, in one embodiment of the invention, the fine search is performed by accumulating the chipxS samples (higher resolution) over the duration of one chip at various chipxS offsets. The correlation codes are applied to the accumulated values yielding correlation values that vary with the particular chipxS offset. This allows the code offset to be determined with chipxS resolution.<br>
Fig. 6 is a flow chart illustrating the steps performed to correct for the   local   oscillator  error  during  a  position  location  procedure  when<br>
12<br><br>
performed in accordance with one embodiment of the invention. At step 500, it is determined whether the local oscillator has been corrected recently. If not, then a timing signal is acquired from the base station, such as a pilot signal or a signal from among a set of GSM downlink channels including, but not limited to, the assigned traffic channel mid-amble and/or GSM frequency correction control channel. The error of the local oscillator is determined by comparing the timing signal at step 502 to the LO and a generating a correction signal based on that error.<br>
The flow then leads to step 504, where the correction signal is frozen at the current value. At step 506, enters GPS mode and performs the position location using the corrected clock. Once the position location has been performed, the mobile unit leaves GPS mode at step 508.<br>
Fig. 7 is an illustration of a DSP receiver system configured in accordance with one embodiment of the invention. The DSP performs the entire searching operation with minimal additional hardware. DSP core 308, modem 306, interface unit 300, ROM 302 and Memory (RAM) 304 are coupled via bus 306. Interface unit 300 receives RF samples from an RF unit (not shown) and provides the samples to RAM 304. The RF samples can be stored at coarse resolution or fine resolution. The DSP core 308 processes the samples stored in memory using instruction stored in ROM 302 as well as in memory 304. Memory 304 may have multiple "banks" some of which store samples and some of which store instructions. Modem 700 performs CDMA processing during normal mode.<br>
Fig. 8 is a flow chart of the steps performed during a position location operation. A position location operation begins when the aiding messaging is received, and the RF systems is switched to GPS frequencies at step 600. When the RF is switched to receive GPS, the frequency tracking loop is fixed. The DSP receives aiding information from the phone microprocessor and sorts the satellites by Doppler magnitude.<br>
13<br><br>
At step 602, the coarse search data is stored within the DSP RAM. The DSP receives a few hundred microseconds of input data to set an Rx AGC. The DSP records the system time and begins storing anlSms window (DSP memory limitation) of chipx2 IQ data in its internal RAM. A contiguous window of data is used to mitigate the effects of code Doppler.<br>
Once the data is stored, a coarse search is performed at step 604. The DSP begins the coarse (chipx2 resolution) search. For each satellite, the DSP generates the C/A code, rotates the code based on the frequency Doppler, and correlates over the search window specified by the base station, via repeated appUcation of the C/A code to the stored coarse search data. Satellites are processed over the samelSms data window and the best chipx2 hypothesis that exceeds a threshold is obtained for each satellite. Although a 2ms coherent integradon time (with 9 non-coherent integrations) is used in one embodiment of the invention, longer coherent integration times can be used (for examplelSms), although preferably where additional adjustments are made as described below.<br>
Once the coarse search is performed, a fine search js conducted, at step 606. Before beginning the fine search, the DSP computes the rotated C/A code for each of the satellites. This allows the DSP to process the fine search in real-time. In performing the fine (chipxS resolution) search, the satellites are processed one at a time over different data.<br>
The DSP first slews the decimator to compensate for code Doppler for the given satelihe (s). It also resets the Rx AGC value while waiting for the nextlms boundary before storing alms coherent integration window of chipxS samples.<br>
The DSP processes 5 contiguous chipxS resolution hypotheses on this 1ms coherent integration window, where the center hypothesis is the best hypothesis obtained in the coarse search. After processing the next Ims<br>
14<br><br>
window, the results are combined coherently and tliis 2ms sum is combined non-coherently for all No iterations.<br>
This step (starting from slewing the decimator) is repeated on the same data for the next satellite until all the satellites have been processed. If the code Doppler for 2 satellites is similar in magnitude, it may be possible to process both satellites over the same data to reduce the number of required data sets. In the worst ease,8 sets of 2*Nndata windows of ImS are used for the fine search.<br>
Finally, at step 608, the results are reported to the microprocessor and the vocoder process is restarted within the DSP so that the call can continue. The DSP reports pseudoranges to the microprocessor, which forwards them to the base station. After the microprocessor redownloads the vocoder program code into the DSP memory, the DSP clears its data memory and restarts the vocoder.<br>
Fig. 9 is a diagram illustrating the fine search performed after the coarse search. After isolating the best chipx2 phase in the coarse search, the DSP performs a fine search around this phase to gain chipxS resolution.<br>
The 5 phases to compare in the fine search are shown enclosed by a rectangle. The best chipx2 phase is evaluated again so that comparisons can be made over the same set of data. This also allows the coarse search and fine search to use different integration times. The fine search is performed separately for each satellite because each satellite may have a different value for code Doppler.<br>
Fig. 10 provides a time line of the search process when performed in accordance with one embodiment of the invention. The overall processing time (coarse + fine search) is performed in about 1.324 seconds in one embodiment of the invention, which does interrupt the call, but still allows the call to continue once the search is performed. The total search time of 1.324 seconds is an upper bound, because it assumes that the DSP needs to<br>
15<br><br>
search all8 satellites and each satellite has a search window of68 chips. The probabihty that the entire 1.324 seconds will be necessary is small, however, due to the geometry of the satellite orbits.<br>
During the first 18ms 80, IQ sample data is collected at the GPS frequency. During the period 82, a coarse search is performed internally which could last up to 1.13 seconds, but which will probably terminate early when the satellite signals are identified. Once the coarse search is performed, the C/A codes are computed during time period 84, which takes 24 ms. During time periods 86 the slew value is adjusted for code Doppler and the Rx AGC is further adjusted. During time periods 88, fine searches are performed on the IQ data samples, with continuous adjustment performed during time periods 86. The use ofl 8 ms integration times allows code Doppler to be neglected because the received C/A code phase will be shifted by less than 1/16 of a chip. Up to eight sequences of adjustments and fine searches are performed for the up to eight satellites, at which time the position location procedure is complete.<br>
Additionally, in some embodiments of the invention, the phone continues to transmit reverse link frames to the base station while the position location procedure is performed. These frames may contain null information simply to allow the base station to remain synchronized with the subscriber unit, or the frames may contain additional information such as power confrol commands or information request. The transmission of these frames is preferably performed when GPS samples are not being gathered when the RF circuitry is available, or while the GPS samples are gathered if sufficient RF circuitry is available.<br>
Although the use of ISnis integrafion time avoids the effects of code Doppler, the transmission of data over the GPS signals at 50Hz rate can cause problems if a data change occurs within thelSms processing span (as described above). The data change causes the phase of the signal to shift.<br>
16<br><br><br><br>
As also noted above, there is always some unknown frequency offset of the local oscillator in the mobile unit. It is this unknown frequency offset that prevents longer coherent despreading and integration from being performed. Longer coherent would improve processing if the effects of the unknown frequency offset could be reduced.<br>
In one embodiment of the invention, this unknown frequency offset is accounted for by expanding the search space to 2 dimensions to include frequency searches. For each hypothesis, several frequency searches are performed, where each frequency search assiunes the frequency offset is a known value. By spacing the frequency offsets, one can reduce the frequency imcertainty to an arbitrarily small value at the expense of added computation and memory. For example, if 5 frequency hypotheses are used, the resulting search space is shown in Fig. 10.<br>
For a +/-100Hz frequency uncertainty, which is the typically operating specification of a mobile unit, this configuration reduces the maximum frequency offset to 20Hz (one hypothesis must be within 20Hz of the actual frequency offset). With a 20ms coherent integration time, the loss in Ec/Nt with a 20H;^ frequency offset is 2.42 dB. By doubling the number of frequency hypotheses to 10, the frequency uncertainty can be reduced to lOHz, which causes an Ec/Nt loss of 58dB. However, adding additional hypotheses widens the search space, which increases both the computation and memory requirements.<br>
One embodiment of the invention computes the frequency hypothesis by lumping the frequency offset in with the frequency Doppler, and computing a new rotated FN code for each frequency hypothesis. However, this makes the number of frequency hypotheses a multiplicative factor in the total computation: 5 frequency hypotheses would mean 5 times as much computation.<br>
18<br><br>
Alternatively, since the frequency uncertainty is small compared to the frequency Doppler, the rotation phase can be considered to be constant over alms interval (8% of a period for an 80Hz hypothesis) in another embodiment of the invention. Therefore, by dividing the coherent integration interval up intolms subintervals, the integration sums of the subintervals are rotated to reduce the added computations needed to compute the frequency searches by three orders of magnitude. The result is that longer coherent despreading can be performed, and performance improved.<br>
Fig. 12. is a block diagram of a receiver configured in accordance with the use of longer coherent despreading approach. The first set of multipliers 50 compensates for the frequency Doppler by correlating the IQ samples with a rotated C/A code. This is equivalent to rotating the IQ samples before correlation with the unmodified C/A code. Since the frequency Doppler can be as large as4500Hz, the rotation is applied to every chip. After coherently integrating over alms interval (1023 chips) using accumulators 52, the second set of multipliers 54 rotates the Ims integration sums (I[ and LQ) to implement the frequency hypothesis. The rotated sums are then added over the whole coherent integration interval.<br>
Recall that the frequency Doppler rotation was only computed on 1023 chips to save memory and computation. For coherent integration times longer than 1ms, each coherent integration sum are muhiplied by a phase offset to make the phase of the rotation continuous over time. To show this mathematically, the 1ms coherent integration sum with frequency Doppler rotation can be expressed as:<br>
1023<br>
■^1 - £[^(")+JQ{"M"y"'""" with S,=Re{S,} and So=Im{S,}<br>
where I (n) and Q (n) are the input samples received on the I and Q channels respectively, c (n) is the unrotated C/A code,Wd is the frequency<br>
19<br><br><br><br>
In the exemplary embodiment of the invention, the fine search is performed in similar manner the coarse search with 2 differences. First, the integration intervals are always added coherently instead of squaring and adding noncoherently. Second, the rotation to remove the frequency uncertainty (which should be known after the coarse search) is combined with the frequency Doppler phase offset and used to rotate the 1ms coherent integration intervals before adding them together.<br>
In an alternative embodiment of the invention, the coherent integration window of chipx2 data is integrated for integration times longer thanlSms. This embodiment is useful were additional memory is available. For coherent integradons longer thanlSms, the 50Hz data boundaries are treated the same as with shorter integration periods. The base station indicates where the boundaries are for each satellite and the DSP decides whether to add or subtract the sum of 201ms coherent integration intervals to or from its running sum.<br>
However, because the product of the frequency uncertainty and the integration time constant affects the loss in Ec/Nt, the frequency uncertainty must be reduced to very small levels for long coherent integration intervals. Since a 20ms integration with a 20Hz frequency uncertainty resulted in a loss in Ec/Nt of 2.42 dB, maintaining the same loss with an integration time of 400ms requires that the frequency uncertainty be reduced to IHz. To correct for this problem, the frequency uncertainty is reduced down tolHz in a hierarchical manner. For example, a first frequency search reduces the uncertainty fromlOOHz to 20Hz, a second search reduces the uncertainty to 4 Hz, and a third search reduces the uncertainty to IHz. The frequency search will also compensate for errors in the frequency Doppler obtained from the base station.<br>
Additionally, to perform longer integrations only satellites with similar Doppler are searched over the same data for long integration times,<br>
21<br><br>
since the code Doppler is different for each sateilite. The DSP computes how long it takes to slip 1/16 of a chip and slews the decimator as it collects a coherent integration data window. Additionally, multiple data windows are taken in this embodiment.<br>
Thus, a method and apparatus for performing position location in wireless communications system has been described. The previous description of the preferred embodiments is provided to enable any person skilled in the art to make or use the present invention. The various modifications to these embodiments will be readily apparent to those skilled in the art, and the generic principles defined herein may be applied to other embodiments without the use of the inventive faculty. Thus, the present invention is not intended to be limited to the embodiments shown herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein.<br>
22<br><br><br><br><br><br>
WE CLAIM:<br>
1.	A method of performing position location in a wireless subscriber unit having a local oscillator, comprising the steps of: receiving a position location request; acquiring a timing signal a period of time after the local oscillator had been corrected and correcting said local oscillator using a correction signal based on said timing signal; substantially freezing the correction signal; performing a position location procedure using the local oscillator with the correction signal applied; and ending the position location procedure, wherein said timing signal is a signal from among a set of GSM downlink channels of a GSM wireless communication system.<br>
2.	The  method as  claimed in claim  1,  wherein the  set of GSM downlink channels has an assigned traffic channel mid-amble.<br>
3.	The method as claimed in claim 2, wherein the set of GSM downlink channels comprises a GSM frequency correction control channel.<br>
4.	The method as claimed in claim 1, wherein the set of GSM downlink channels comprises a GSM frequency correction control channel.<br>
Dated   this   31    day     of    July	2003<br>
(IVAN BERNARD FULLER) OF DePENNING &amp; DePENNING AGENT FOR THE APPLICANTS<br>
23<br></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE4OS1jaGVucC0yMDAzIGFic3RyYWN0LmpwZw==" target="_blank" style="word-wrap:break-word;">1189-chenp-2003 abstract.jpg</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE4OS1jaGVucC0yMDAzIGFic3RyYWN0LnBkZg==" target="_blank" style="word-wrap:break-word;">1189-chenp-2003 abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE4OS1jaGVucC0yMDAzIGNsYWltcy1kdXBsaWNhdGUucGRm" target="_blank" style="word-wrap:break-word;">1189-chenp-2003 claims-duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE4OS1jaGVucC0yMDAzIGNsYWltcy5wZGY=" target="_blank" style="word-wrap:break-word;">1189-chenp-2003 claims.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE4OS1jaGVucC0yMDAzIGNvcnJlc3BvbmRlbmNlLW90aGVycy5wZGY=" target="_blank" style="word-wrap:break-word;">1189-chenp-2003 correspondence-others.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE4OS1jaGVucC0yMDAzIGNvcnJlc3BvbmRlbmNlLXBvLnBkZg==" target="_blank" style="word-wrap:break-word;">1189-chenp-2003 correspondence-po.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE4OS1jaGVucC0yMDAzIGRlc2NyaXB0aW9uIChjb21wbGV0ZSktZHVwbGljYXRlLnBkZg==" target="_blank" style="word-wrap:break-word;">1189-chenp-2003 description (complete)-duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE4OS1jaGVucC0yMDAzIGRlc2NyaXB0aW9uIChjb21wbGV0ZSkucGRm" target="_blank" style="word-wrap:break-word;">1189-chenp-2003 description (complete).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE4OS1jaGVucC0yMDAzIGRyYXdpbmdzLWR1cGxpY2F0ZS5wZGY=" target="_blank" style="word-wrap:break-word;">1189-chenp-2003 drawings-duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE4OS1jaGVucC0yMDAzIGRyYXdpbmdzLnBkZg==" target="_blank" style="word-wrap:break-word;">1189-chenp-2003 drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE4OS1jaGVucC0yMDAzIGZvcm0tMS5wZGY=" target="_blank" style="word-wrap:break-word;">1189-chenp-2003 form-1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE4OS1jaGVucC0yMDAzIGZvcm0tMTMucGRm" target="_blank" style="word-wrap:break-word;">1189-chenp-2003 form-13.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE4OS1jaGVucC0yMDAzIGZvcm0tMTgucGRm" target="_blank" style="word-wrap:break-word;">1189-chenp-2003 form-18.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE4OS1jaGVucC0yMDAzIGZvcm0tMjYucGRm" target="_blank" style="word-wrap:break-word;">1189-chenp-2003 form-26.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE4OS1jaGVucC0yMDAzIGZvcm0tMy5wZGY=" target="_blank" style="word-wrap:break-word;">1189-chenp-2003 form-3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE4OS1jaGVucC0yMDAzIGZvcm0tNS5wZGY=" target="_blank" style="word-wrap:break-word;">1189-chenp-2003 form-5.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE4OS1jaGVucC0yMDAzIHBjdC5wZGY=" target="_blank" style="word-wrap:break-word;">1189-chenp-2003 pct.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTE4OS1jaGVucC0yMDAzIHBldGl0aW9uLnBkZg==" target="_blank" style="word-wrap:break-word;">1189-chenp-2003 petition.pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="230744-compositions-comprising-cyclohexamantane.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="230746-device-for-collecting-yarns-for-producing-conical-reels.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>230745</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>1189/CHENP/2003</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>13/2009</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>27-Mar-2009</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>27-Feb-2009</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>31-Jul-2003</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>QUALCOMM INCORPORATED</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>5775 MOREHOUSE DRIVE, SAN DIEGO, CALIFORNIA 92121-1714,</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>SIH, GILBERT C</td>
											<td>7804 PIPIT PLACE, SAN DIEGO, CALIFORNIA 92129,</td>
										</tr>
										<tr>
											<td>2</td>
											<td>ZOU, QIUZHEN</td>
											<td>11507 WESTVIEW PARKWAY, SAN DIEGO, CALIFORNIA 92126,</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>G01S5/14</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/US02/04992</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2002-01-31</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>09/775,895</td>
									<td>2001-02-01</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/230745-position-location-with-low-tolerance-oscillator by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 11:33:06 GMT -->
</html>
