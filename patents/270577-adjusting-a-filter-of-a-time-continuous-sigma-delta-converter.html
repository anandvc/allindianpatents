<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/270577-adjusting-a-filter-of-a-time-continuous-sigma-delta-converter by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 04:06:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 270577:ADJUSTING A FILTER OF A TIME-CONTINUOUS SIGMA-DELTA CONVERTER</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">ADJUSTING A FILTER OF A TIME-CONTINUOUS SIGMA-DELTA CONVERTER</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>This invention relates to adjusting a filter (110; 112) of a time-continuous Sigma-Delta converter (100) arranged to convert an analog input signal (Sm) to a digital output signal (Sout). A control signal (Sdet) indicative of a gain of the filter is provided, and the gain of the filter is adjusted in dependence of the control signal. The control signal (Sdet) is provided from the digital output signal of the Sigma-Delta converter. In this way the performance of the Sigma-Delta converter can be improved in a simple way that requires no or few additional analog components, and the Sigma-Delta converter itself is used to adjust its performance. Using a signal from the digital domain of the Sigma-Delta converter is advantageous in that it is typically easier, faster and more precise to process signals in the digital domain.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>Technical Field of the Invention<br>
The invention relates to a method of adjusting a filter of a time-continuous Sigma-Delta<br>
converter arranged to convert an analog input signal to a digital output signal, comprising<br>
the steps of generating a control signal indicative of a gain of said filter; and adjusting the<br>
gain of said filter in dependence of said control signal. The invention further relates to an<br>
arrangement for converting an analog input signal to a digital output signal, a device for<br>
generating a control signal indicative of a gain of a filter in a time-continuous Sigma-Delta<br>
converter and to a corresponding computer program and computer readable medium.<br>
Description of Related Art<br>
In recent years Sigma-Delta converters have been used successfully in analog-to-digital<br>
(AD) converters.<br>
Conventional Nyquist-rate converters are built around a quantizer with a relatively fine<br>
resolution typically specified by the number of bits with which the signal is represented,<br>
e.g. 8 bits, 12 bits or 16 bits. For example, an AD converter that encodes an analog input<br>
to one of 256 discrete values has a resolution of 8 bits, since 28 = 256.<br>
However, due to the fine-resolution quantizer conventional converters are relatively com-<br>
plex in structure compared to a Sigma-Delta converter. Further improvements of the con-<br>
ventional converter are cumbersome in that, on the one hand, further improvements of the<br>
fine resolution of the conventional converters will cause a dramatic increase in the com-<br>
plexity of the converter. Additionally, expensive matching or trimming of components is<br>
required. On the other hand, an increased sampling frequency will in general add extra<br>
costs to the manufacture of the converter. Conventional Nyquist-rate converters sample an<br>
input signal at the Nyquist frequency, however, over-sampling of typically two to 16 times<br>
may be applied.<br>
Sigma-Delta converters are less complex in their basic structure than the conventional<br>
converters. They are built around a quantizer with a relatively coarse resolution corre-<br>
sponding to typically 1 to 5 bits. This low resolution quantizer can be operated at a greater<br>
sampling frequency than the fine resolution quantizer, but at the cost of a larger quantiza-<br>
tion error i.e. the difference between the input signal and the output signal.<br><br>
To compensate for the larger quantization error, the Sigma-Delta converter is configured<br>
with a feedback loop that effectively results in that quantization noise is shaped in the fre-<br>
quency domain to regions outside the frequency band of interest where the desired signal<br>
is located. This is one of the key features of Sigma-Delta converters and is broadly recog-<br>
nized and well understood by the persons skilled in the art of Sigma-Delta converter de-<br>
sign. Generally, the Sigma-Delta converter provides lower distortion and lower cost when<br>
compared to conventional converters.<br>
The continuous development of CMOS process technology that may be used in Sigma-<br>
Delta converters renders increased speed at the expense of decreased maximum supply<br>
voltage possible. As far as AD converters are concerned, this means that Sigma-Delta<br>
converters have become a more viable choice over traditional Nyquist-rate (NR) convert-<br>
ers.<br>
Sigma-Delta converters can be time-discrete Sigma-Delta converters (TD-SDC) or time-<br>
continuous Sigma-Delta converters (TC-SDC). The latter provide inherent anti-aliasing,<br>
which is not the case for time-discrete Sigma-Delta converters (TD-SDC). Furthermore,<br>
the theoretical limit on the clock frequency of a time-continuous Sigma-Delta converter is<br>
much higher than that of a time-discrete Sigma-Delta converter. The invention presented<br>
below applies to time-continuous Sigma-Delta converters.<br>
The described Sigma-Delta converters are typically used in receivers for radio signals,<br>
such as OFDM (orthogonal frequency division multiplex) signals, and applications may<br>
include mobile phone systems, TV broadcast systems, etc. Specifically, DVB-T (digital<br>
video broadcasting terrestrial), DAB (digital audio broadcasting) and WLAN (Wireless<br>
Local Area Network) can be mentioned.<br>
The analog integrators/filters in time-discrete Sigma-Delta converters are accurate as their<br>
behaviour is controlled by capacitor ratios and clock frequency. The latter is always very<br>
accurate and the former is accurate to within 1% or even less (assuming that the Sigma-<br>
Delta converter is fabricated on a single chip). This is far better than required not to jeop-<br>
ardize the performance in terms of dynamic range and stability. However, for time-<br>
continuous Sigma-Delta converters the behaviour of the integrators/filters, e.g. the gain-<br>
bandwidth product (GBP) of an integrator, depends on the absolute accuracy of resistors<br>
and capacitors in the integrators/filters, both of which are very inaccurate. Typically, the<br><br>
values of such components may vary ±50%. If the gain-bandwidth product of an integrator<br>
also varies with ±50% or more (as it relies on two independent types of components), the<br>
Sigma-Delta converter may fail to function completely or at least perform far below opti-<br>
mal performance with respect to dynamic range and maximum stable amplitude.<br>
All in all, time-continuous Sigma-Delta converters provide several advantages over time-<br>
discrete Sigma-Delta converters as discussed above. However, a major drawback is the<br>
sensitivity with respect to variability of parameters of the integrators/filters, which might<br>
significantly reduce the performance of the Sigma-Delta converter or even make it non-<br>
functional.<br>
A possible solution to this problem could be based on techniques used for tuning of analog<br>
filters, where an oscillator based on the same critical components as in the filter is tuned to<br>
a predefined frequency using a phase locked loop. The tuning of the components in the<br>
oscillator could then be copied to the components of the filter. This solution however re-<br>
quires a design that uses many analog components and thus consumes a large chip area.<br>
Therefore, it is an object of the invention to provide a method of adjusting an integra-<br>
tor/filter of a time-continuous Sigma-Delta converter, which reduces the sensitivity with<br>
respect to variability of parameters of the integrators/filter and thus improves the perform-<br>
ance and stability of time-continuous Sigma-Delta converters without consuming too<br>
much chip area for analog components.<br>
Summary<br>
According to the invention the object is achieved in that the method comprises the step of<br>
generating a control signal from the digital output signal of the Sigma-Delta converter. By<br>
controlling the filter of the time-continuous Sigma-Delta converter by a signal provided<br>
from the Sigma-Delta converter's own digital output signal, the performance of the Sigma-<br>
Delta converter can be improved in a simple way that requires no or few additional analog<br>
components, and the Sigma-Delta converter itself is used to adjust its performance. Using<br>
a signal from the digital domain of the Sigma-Delta converter to provide the control signal<br>
is advantageous in that it is typically easier, faster and more precise to process signals in<br>
the digital domain. Moreover, the Sigma-Delta converter is already arranged to generate<br>
the analog-to-digital converted output signal; therefore no additional processing power or<br>
circuitry is necessary in the Sigma-Delta converter to provide the control signal.<br><br>
According to an aspect of the invention, the step of generating a control signal further<br>
comprises the step of counting consecutive equal samples in the output signal from said<br>
Sigma-Delta converter. In one embodiment, this step further comprises the steps of detect-<br>
ing the number (hold length count HLC) of times a specific number (hold length) of con-<br>
secutive equal samples in the output signal from said Sigma-Delta converter is counted<br>
during a given measurement interval; and providing said detected number of times as the<br>
control signal indicative of the gain of said filter. Thus, instead of measuring the gain of<br>
the filter(s) of the Sigma-Delta converter directly, the digital output from the Sigma-Delta<br>
converter is analysed by recording the hold length count for a specific hold length. For a<br>
given Sigma-Delta converter topology and measurement interval an optimal filter gain<br>
corresponds to a given optimal hold length count (HLCo), i.e. the number of events where<br>
a certain hold length is recorded over the measurement interval. If the hold length count<br>
deviates more than a predefined value from HLCo, the gain of the filter can be adjusted<br>
accordingly.<br>
According to yet another aspect of the invention, the specific number of consecutive equal<br>
samples in the output signal from said Sigma-Delta converter equals one. Typically, the<br>
hold length count for hold lengths 1, 2, 3 and 4 can be used, because these values of the<br>
hold length have been shown to provide a useful sensitivity in the region of the optimal<br>
gain for the filters in a second order Sigma-Delta converter. However, the hold length<br>
count for hold length HL=1 appears to be the best measure to estimate the gain deviation.<br>
The reasons for this are firstly that the hold length count for hold length HL=1 is a mono-<br>
tonic function of gain deviation and secondly that it provides the highest sensitivity around<br>
the optimal gain.<br>
According to another aspect of the invention, the method further comprises the step of<br>
adding a DC component to the analog input signal prior to its conversion in the Sigma-<br>
Delta converter. The addition of a DC signal (or a known varying signal) to the signal in-<br>
put to the Sigma-Delta converter has turned out to improve the behaviour of the hold<br>
length count, especially at small input signal levels. The level of the DC signal or the<br>
known varying signal is not critical as long as it is set within the range for which the hold<br>
length count is independent of input signal level.<br><br>
In one embodiment, the step of adjusting the gain of the filter comprises the steps of com-<br>
paring said control signal with a reference value; and adjusting the gain of the filter by a<br>
predefined change of gain, such that said gain is increased by said predefined change of<br>
gain if the control signal exceeds the reference value and is otherwise decreased by said<br>
predefined change of gain. This provides a method of adjusting the gain of the filter of the<br>
Sigma-Delta converter by very simple means.<br>
Alternatively, the step of adjusting the gain of said filter may comprise the steps of calcu-<br>
lating a difference between said control signal and a reference value; calculating a gain<br>
error by multiplying said difference by a first factor derived from a relation between said<br>
control signal and the gain of said filter; calculating a new gain value by subtracting said<br>
gain error multiplied by a second factor from a previous gain value, where said second<br>
factor is less than or equal to one; and adjusting the gain of said filter to said new gain<br>
value. In this way the gain of the filter of the Sigma-Delta converter can be adjusted in an<br>
optimal way.<br>
According to yet another aspect of the invention, wherein the Sigma-Delta converter com-<br>
prises multiple filters, the method may further comprise the step of adjusting the gain of<br>
each filter in dependence of said control signal. Thus each filter in the Sigma-Delta con-<br>
verter may be adjusted with the same amount of tuning. This is advantageous, in that the<br>
relative error between component values, viz. the mismatch, is always very small and<br>
therefore the integrators/filters within a Sigma-Delta converter can be adjusted by the<br>
same amount, i.e. by means of the same correction signal. Moreover, if a chip comprises<br>
more than one Sigma-Delta converter residing thereon, it can be advantageous to adjust<br>
the filters in all Sigma-Delta converters by means of the same correction signal.<br>
When the Sigma-Delta converter and other building blocks are integrated on a common<br>
chip, the method may further comprise the step of adjusting at least one of said other<br>
building blocks in dependence of said control signal. Components, such as resistors, ca-<br>
pacitors, and gain stages, causing component value spread in the filters of the Sigma-Delta<br>
converter are typically also used in other building blocks like analog filters and oscillators,<br>
and therefore the correction applied to the Sigma-Delta converter can also be applied to<br>
other building blocks when the components in these other building blocks track those in<br>
the Sigma-Delta converter, which is usually the case when these blocks are integrated on<br>
the same chip.<br><br>
the filter(s) of the Sigma-Delta converter directly, the arrangement is adapted to analyse<br>
the digital output from the Sigma-Delta converter by recording the hold length count for a<br>
specific hold length. For a given Sigma-Delta converter topology and measurement inter-<br>
val an optimal filter gain corresponds to a given optimal hold length count (HLCo), i.e. the<br>
number of events where a certain hold length is recorded over the measurement interval. If<br>
the hold length count deviates more than a predefined value from HLCo, the gain of the<br>
filter can be adjusted accordingly.<br>
According to yet another aspect of the invention, the specific number of consecutive equal<br>
samples in the output signal from said Sigma-Delta converter equals one. Typically, the<br>
hold length count for hold lengths 1, 2, 3 and 4 can be used, because these values of the<br>
hold length have shown to provide a useful sensitivity in the region of the optimal gain for<br>
the filters in a second order Sigma-Delta converter. However, the hold length count for<br>
hold length HL=1 appears to be the best measure to estimate the gain deviation. The rea-<br>
sons for this are firstly that the hold length count for hold length HL=1 is a monotonic<br>
function of gain deviation and secondly that it provides the highest sensitivity around the<br>
optimal gain.<br>
According to another aspect of the invention, the arrangement further comprises means for<br>
adding a DC component to said analog input signal prior to its conversion in the Sigma-<br>
Delta converter. The addition of a DC signal (or a known varying signal) to the signal in-<br>
put to the Sigma-Delta converter has turned out to improve the behaviour of the hold<br>
length count, especially at small input signal levels. The level of the DC signal or the<br>
known varying signal is not critical as long as it is set within the range for which the hold<br>
length count is independent of input signal level.<br>
In one embodiment, the means for adjusting the gain of said filter is arranged to compare<br>
said control signal with a reference value; and adjust the gain of said filter by a predefined<br>
change of gain, such that said gain is increased by said predefined change of gain if said<br>
control signal exceeds said reference value and is otherwise decreased by said predefined<br>
change of gain. This provides a very simple arrangement for adjusting the gain of the filter<br>
of the Sigma-Delta converter.<br>
Alternatively, the means for adjusting the gain of said filter is arranged to calculate a dif-<br>
ference between said control signal and a reference value; calculate a gain error by multi-<br><br>
plying said difference by a first factor derived from a relation between said control signal<br>
and the gain of said filter; calculate a new gain value by subtracting said gain error multi-<br>
plied by a second factor from a previous gain value, where said second factor is less than<br>
or equal to one; and adjust the gain of said filter to said new gain value. In this way the<br>
gain of the filter of the Sigma-Delta converter can be adjusted in an optimal way.<br>
According to yet another aspect of the invention, wherein the Sigma-Delta converter com-<br>
prises multiple filters, the arrangement may further be adapted to adjust the gain of each<br>
filter in dependence of said control signal. Thus each filter in the Sigma-Delta converter<br>
may be adjusted with the same amount of tuning. This is advantageous, in that the relative<br>
error between component values, viz. the mismatch, is always very small and therefore the<br>
integrators/filters within a Sigma-Delta converter can be adjusted by the same amount, i.e.<br>
by means of the same correction signal. Moreover, if a chip comprises more than one<br>
Sigma-Delta converter residing thereon, it can be advantageous to adjust the filters in all<br>
Sigma-Delta converters by means of the same correction signal.<br>
When the Sigma-Delta converter and other building blocks are integrated on a common<br>
chip, the arrangement may further be adapted to adjust at least one of said other building<br>
blocks in dependence of said control signal. Components, such as resistors, capacitors, and<br>
gain stages, causing component value spread in the filters of the Sigma-Delta converter are<br>
typically also used in other building blocks like analog filters and oscillators, and therefore<br>
the correction applied to the Sigma-Delta converter can also be applied to other building<br>
blocks when the components in these other building blocks track those in the Sigma-Delta<br>
converter, which is usually the case when these blocks are integrated on the same chip.<br>
According to further aspects of the invention, the means for adjusting the gain of said filter<br>
may be arranged to adjust the gain at power-on of said Sigma-Delta converter and/or at<br>
predefined time instances, where the adjustment does not interfere with normal operation<br>
of said Sigma-Delta converter. Hereby, it can be ensured that the adjusting of the gain of<br>
the filter(s) in the Sigma-Delta converter will not interfere with the normal operation of<br>
the Sigma-Delta converter where signals are converted. The creation of the correction sig-<br>
nal and thus the adjustment of the gain of the filter(s) in the Sigma-Delta converter are<br>
applied until the measured hold length count is in a predetermined range.<br><br>
The arrangement may further comprise circuitry for receiving radio signals. These radio<br>
signals can be OFDM (orthogonal frequency division multiplex) signals, and applications<br>
may include mobile phone systems, TV broadcast systems, etc. Specifically, DVB-T (digi-<br>
tal video broadcasting terrestrial), DAB (digital audio broadcasting) and WLAN (Wireless<br>
Local Area Network) can be mentioned.<br>
The invention also relates to a a wireless communications device comprising the arrange-<br>
ment for converting an analog input signal to a digital output signal as described above.<br>
As mentioned, the invention also relates to a device for generating a control signal indica-<br>
tive of a gain of a filter in a time-continuous Sigma-Delta converter, wherein the device<br>
comprises processing means arranged to generate said control signal; and wherein the de-<br>
vice is adapted to provide said control signal to means for adjusting the gain of said filter.<br>
When the device is adapted to receive a digital output signal of said Sigma-Delta converter<br>
and generate said control signal from the received digital output signal, the performance of<br>
the Sigma-Delta converter can be improved in a simple way that requires no or few addi-<br>
tional analog components, and the Sigma-Delta converter itself can be used to adjust its<br>
performance. Using a signal from the digital domain of the Sigma-Delta converter to pro-<br>
vide the control signal is advantageous in that it is typically easier, faster and more precise<br>
to process signals in the digital domain. Moreover, the Sigma-Delta converter is already<br>
arranged to generate the analog-to-digital converted output signal; therefore no additional<br>
processing power or circuitry is necessary in the Sigma-Delta converter to provide the<br>
control signal.<br>
According to an aspect of the invention, the device further comprises means for counting<br>
consecutive equal samples in the output signal from said Sigma-Delta converter. In one<br>
embodiment, the device further comprises means for detecting the number (hold length<br>
count HLC) of times a specific number (hold length) of consecutive equal samples in the<br>
output signal from said Sigma-Delta converter is counted during a given measurement<br>
interval and providing said detected number of times as the control signal indicative of the<br>
gain of said filter. Thus, instead of measuring the gain of the filter(s) of the Sigma-Delta<br>
converter directly, the arrangement is adapted to analyse the digital output from the<br>
Sigma-Delta converter by recording the hold length count for a specific hold length. For a<br>
given Sigma-Delta converter topology aind measurement interval an optimal filter gain<br>
corresponds to a given optimal hold length count (HLCo), i.e. the number of events where<br><br>
a certain hold length is recorded over the measurement interval. If the hold length count<br>
deviates more than a predefined value from HLCo, the gain of the filter can be adjusted<br>
accordingly.<br>
According to yet another aspect of the invention, the specific number of consecutive equal<br>
samples in the output signal from said Sigma-Delta converter equals one. Typically, the<br>
hold length count for hold lengths 1, 2, 3 and 4 can be used, because these values of the<br>
hold length have shown to provide a useful sensitivity in the region of the optimal gain for<br>
the filters in a second order Sigma-Delta converter. However, the hold length count for<br>
hold length HL=1 appears to be the best measure to estimate the gain deviation. The rea-<br>
sons for this are firstly that the hold length count for hold length HL=1 is a monotonic<br>
function of gain deviation and secondly that it provides the highest sensitivity around the<br>
optimal gain.<br>
The invention also relates to a computer program and a computer readable medium with<br>
program code means for performing the method described above.<br>
Brief Description of the Drawings<br>
The invention will now be described more fully below with reference to the drawings, in<br>
which<br>
Fig. 1 shows a second-order sigma-delta converter;<br>
Fig. 2 is a plot of the signal-to-noise ratio (SNR) as a function of OFDM input signal<br>
level;<br>
Fig. 3 is a plot of the hold length count HLC for various hold lengths as a function of input<br>
signal level;<br>
Fig. 4 is a plot of the HLC for HL = 1 as a function of input signal level;<br>
Fig. 5 is a plot of the HLC for hold lengths 1, 2 and 3 as a function of integrator gain de-<br>
viation for an input signal level at -40dB;<br><br><br>
Figs. 6 to 8 are plots corresponding to Fig. 3 to 5, respectively, but with a DC signal added<br>
to the input signal;<br>
Fig. 9 is a schematic diagram of a time-continuous Sigma-Delta converter and means for<br>
HLC detection;<br>
Fig. 10 is a schematic diagram similar to that of Fig. 9, but with a DC signal added to the<br>
input of the Sigma-Delta converter;<br>
Fig. 11 is a flow chart of a method of adjusting the gain of the filter in a Sigma-Delta con-<br>
verter, based on HLC detection;<br>
Fig. 12 is a flow chart of an alternative method of adjusting the gain of the filter in a<br>
Sigma-Delta converter, based on HLC detection; and<br>
Fig. 13 is a schematic diagram of a time-continuous Sigma-Delta converter in combination<br>
with means for HLC detection and means for creating a correction signal.<br>
Detailed Description of Embodiments<br>
An example of a known, low-pass second order Sigma-Delta converter (SDC) 100 with<br>
time-continuous integrators will be described with reference to Fig. 1. It should be noted,<br>
that the order of the Sigma-Delta converter indicates the number of integrators in the con-<br>
verter.<br>
The Sigma-Delta converter 100 shown in Fig. 1 is an example of a basic textbook configu-<br>
ration and it should be noted that the invention is not limited to this specific structure, but<br>
can be used with any type of time-continuous Sigma-Delta converter with respect to archi-<br>
tecture, order, filter characteristics, etc.<br>
In Fig. 1, it is seen that the Sigma-Delta converter 100 comprises two filters 110, 112 in<br>
the form of integrators, an analog-to-digital converter (ADC) 120 and a digital-to-analog<br>
converter (DAC) 130. The output of the integrator 112 is connected to the input of the<br>
analog-to-digital converter 120. Moreover, the Sigma-Delta converter 100 comprises two<br>
adders 106, 108, where the input signal Sjn to the Sigma-Delta converter 100 is input to the<br>
adder 106, the output of which is the input to the integrator 110. The other adder 108 is<br><br>
connected between the two integrators 110, 112. The output signal Sout from the AD con-<br>
verter 120 is output from the Sigma-Delta converter, but also input to the DA converter<br>
130 of the Sigma-Delta converter to provide a feedback signal to the Sigma-Delta con-<br>
verter. The output from the DA converter 130 is input to two feedback coefficient blocks<br>
140 and 142 providing feedback coefficients c1 and c2, respectively. The feedback coeffi-<br>
cients are set to c1 = c2 =1 in the described examples. The outputs from the feedback coef-<br>
ficient blocks, 140 and 142, are input to the adders 106 and 108. In the example shown,<br>
the integrators 110, 112 in Fig. 1 both have a unity gain at the clock frequency divided by<br>
2π. Furthermore, it is assumed that there is no delay in the AD converter and the DA con-<br>
verter, and that the output of the AD converter is defined by two states [0, 1], while the<br>
DA converter maps these states to two output values [-1, +1], thus providing a single bit<br>
resolution of the converter.<br>
To demonstrate the behaviour of the Sigma-Delta converter, MATLAB (a well known<br>
mathematical program in the form of a commercial "Matrix Laboratory" package which<br>
operates as an interactive programming environment) system-level simulations have been<br>
carried out based on an OFDM (orthogonal frequency division multiplex) signal that re-<br>
sembles that of a DVB-T (digital video broadcasting - terrestrial) signal with 8192 carriers<br>
of which 6817 carriers are active (non-zero) and modulated using 64QAM (Quadrature<br>
Amplitude Modulation). The 8192 carrier positions correspond to a 9.14MHz bandwidth<br>
and the sampling frequency of the Sigma-Delta converter is 64 times this frequency, i.e.<br>
approximately 585MHz. The Sigma-Delta converter operates on a baseband component of<br>
this signal, i.e. either the I or Q path, and the baseband bandwidth is 9.14/2 = 4.57 MHz<br>
(based on all carrier positions, including non-active carrier positions). However, the nature<br>
of the signal used here only serves as an example.<br>
Fig. 2 shows the signal-to-noise ratio (SNR) for the output signal of the Sigma-Delta con-<br>
verter as a function of input RMS (root mean square) level of the total signal given in dB,<br>
where OdB input corresponds to unity magnitude. The numeric examples given in this<br>
specification are all related to the OFDM signal; however, it should be noted that the prin-<br>
ciples of the invention can be applied to any type of signal.<br>
From Fig. 2 it can be seen that the signal-to-noise ratio increases in a roughly linear fash-<br>
ion up to a certain point where it quickly drops to OdB. This is a typical behaviour for<br>
Sigma-Delta converters. When the signal reaches levels close to or beyond the DAC out-<br><br>
put level that is fed back to the first adder in the Sigma-Delta converter, the Sigma-Delta<br>
converter cannot track the input signal anymore. This leads to the Sigma-Delta converter<br>
becoming overloaded and unstable and possibly the integrators will saturate as well (as-<br>
sumed to have a maximum allowed signal swing in a real implementation). In short, the<br>
Sigma-Delta converter will fail completely. The input level, for which this occurs, depends<br>
on the characteristics of the input signal. For example, the Sigma-Delta converter would<br>
be able to operate for higher input levels (several dB) if the input signal would be a single<br>
sinusoid or a single modulated carrier such as a WCDMA signal as the amplitude distribu-<br>
tion for such a signal is rather compact with a small peak-to-average ratio (PAR) value.<br>
The early drop for the OFDM signal at about -10dB is caused by the large PAR value for<br>
this type of signal. Every now and then large pulses appear in the OFDM signal that can<br>
be very much larger than the RMS level and these can extend beyond the stable input sig-<br>
nal range of the Sigma-Delta converter. The result shown in Fig. 2 is based on a single-bit<br>
configuration of the AD and DA converters, i.e. the output signal of the Sigma-Delta con-<br>
verter is a series of individual 1 s and Os.<br>
In contrast to time-discrete Sigma-Delta converters, the behaviour of the integrators/filters<br>
for time-continuous Sigma-Delta converters, e.g. the gain-bandwidth product (GBP) of an<br>
integrator, depends on the absolute accuracy of resistors and capacitors both of which are<br>
very inaccurate. In a typical process the values of such components may vary ±50%. If the<br>
GBP of an integrator varies with same amount or more (as it relies on two independent<br>
types of components) the Sigma-Delta converter may fail to function completely or at least<br>
perform far below optimal performance with respect to dynamic range and maximum sta-<br>
ble amplitude.<br>
The present invention addresses the need to tune the gain in the analogue integrators/filters<br>
of a time-continuous Sigma-Delta converter to reach optimal performance and avoid in-<br>
stability. The gain of the integrator/filters is not measured directly. Instead the digital out-<br>
put stream of the Sigma-Delta converter is analysed, e.g. by recording the hold length<br>
count (HLC) for various hold lengths, where hold length (HL) is defined as the number of<br>
clock cycles that the Sigma-Delta converter does not change the output signal. For a given<br>
Sigma-Delta converter topology and measurement interval the optimal integrator/filter<br>
gain corresponds to a given optimal hold length count (HLC0), i.e. the number of events<br>
where a certain hold length is recorded over the measurement interval. For example, for<br><br>
HL=1, if the HLC is larger than HLC0 the integrator gain is too small, and correspond-<br>
ingly, if the HLC is less than HLC0 the integrator gain is too large. Thus, this deviation<br>
can be used to guide the tuning of the integrator/filter gain.<br>
Fig. 3 is a plot of the hold length count HLC for various hold lengths as a function of input<br>
signal level with a logarithmic scale for the hold length count. The invention is based on<br>
storing, over a given measurement interval, the number of occurrences where the Sigma-<br>
Delta converter keeps the output constant over a given number of samples. For example,<br>
the number of occurrences where the Sigma-Delta converter produce a constant output<br>
over say three clock cycles (the hold length, HL) before the output is changed is recorded<br>
over a sufficiently long measurement interval. As will be shown below the number of such<br>
occurrences, i.e. the hold length count HLC, is an accurate, indirect measure of the gain in<br>
the integrators/filters given that the input signal strength is not too large or too small.<br>
In Fig. 3 the HLC is shown for various HL as a function of input signal level with a loga-<br>
rithmic scale for HLC. The measurement interval is one OFDM symbol corresponding to<br>
512 k samples from the Sigma-Delta converter. For each hold length there are three curves<br>
representing the hold length count for three cases; nominal filter gain G=G0, high filter<br>
gain G=1.1G0, and low filter gain G = 0.9<g0. in the above g denotes gain of each></g0.>
filter in the Sigma-Delta converter and G0 denotes the optimal gain of each filter. It should<br>
be noted, that if the Sigma-Delta converter comprises more than one filter, the errors of the<br>
filters typically track each other. Thus, if a first filter needs to be corrected by e.g. 20%,<br>
this correction would also apply for all other filters in the Sigma-Delta converter.<br>
From Fig. 3 it can be seen that for hold lengths HL=1, 2 and 3 it is difficult to distinguish<br>
the three curves for each hold length from each other on a logarithmic scale. Moreover, it<br>
can be seen that the three curves all appear to be virtually independent of the input signal<br>
level. For HL higher than 3, the hold length count HLC not only varies with gain but also<br>
with the input signal level. Therefore, it would be advantageous for the configuration used<br>
in the example, to employ the hold length counts for HL=1, 2 or 3 as a measure to detect<br>
gain error.<br>
It should be noted that the frequency dependent gain or transfer function H(f) of a filter in<br>
a Sigma-Delta converter can be defined by the product of the frequency independent gain<br>
G and the frequency dependent transfer function H0(f) of the filter, i.e.:<br><br><br>
where H(f) denotes the actual, transfer function of the filter as a function of the frequency<br>
f; H0(f) denotes the optimal transfer function of the filter for the fluency f, and G de-<br>
notes the frequency independent gain of the filter.<br>
fa the case where the filter is an integrator, the relationship between the gain and transfer<br>
function of the integrator can be defined as:<br><br>
where Hint(f) denotes the transfer function of the integrator as a function of the frequency.<br>
For the Sigma-Delta converter used throughout this example (see Fig. I), the optimal gain<br>
G0 should equal the clock frequency of the Sigma-Delta converter, i.e. fclock, that translates<br>
to a transfer function magnitude of l/(2π) at the clock frequency-<br>
Fig. 4 is a plot of the hold length count HLC, in which a linear scale is used for HLC, for<br>
HL = 1 as a function of input signal level. Again, the three curves correspond to a Sigma-<br>
Delta converter with an excess gain of 10%, a Sigma-Delta converter with a gain 10%<br>
below the optimal and a Sigma-Delta converter with optimal gain, respectively. From Fig.<br>
4 it can be seen that HLC is independent of the input signal level up to about -20dB. For<br>
low input levels, i.e. below approximately -65dB, the HLC becomes inaccurate. Increasing<br>
the measurement interval, however, would improve the accuracy.<br>
Fig. 5 is a plot of the HLC for hold lengths 1, 2 and 3 as a function of gain deviation from<br>
the optimal integrator/filter gain. The plot is made for an input signal level at -40dB. From<br>
Fig. 5 it can be seen that the hold length count (HLC) is an accurate, indirect measure of<br>
the gain in the integrators/filters. The wording "indirect" is used in that the HLC is not<br>
proportional to the gain error, as it can be seen from Fig, 5. From Fig. 5 it can moreover be<br>
seen that HLC for a hold length of 1 appear to be the best measure to estimate the gain<br>
deviation. This is due to the facts that the HLC is a monotonic function of the gain devia-<br>
tion for the hold length of 1 and that the curve for the hold length of 1 provides the highest<br>
sensitivity around the optimal gain G0, i.e. for the normalized integrator gain value of 1 in<br><br>
Fig. 5. However, it can be seen from Fig. 5 that also the hold lengths 2 and 3 could be used<br>
for providing an estimate of the gain deviation.<br>
From Figs. 3 and 4 it can be seen that the HLC is fluctuating for small input signal levels.<br>
Thus, the HLC is not as useful a measure of the gain for these small input signal levels as<br>
for input signal levels above approximately -65dB. However, it has turned out that if a DC<br>
signal or a known varying signal is added to the signal input to the Sigma-Delta converter<br>
in addition to the actual signal, the behaviour is improved substantially for these low input<br>
signal levels. This can be seen from Figs. 6 to 8, which are plots corresponding to Fig. 3 to<br>
5, respectively, but with a DC signal added to the input signal. The DC signal in the ex-<br>
ample shown in the Figures is set to -30dB or 0.0316. However, the level of the DC signal<br>
is not critical if it is set within the range for which the HLC is independent of the input<br>
signal level. When comparing Fig. 7 and the corresponding Fig. 4 (without the DC signal),<br>
it can be seen that actual HLC levels are not affected by the introduction of the DC signal.<br>
From Fig. 7 it can be seen that for all input levels shown, the HLC is quite stable; there-<br>
fore, HLC can be employed as a useful measure of the gain for all input levels shown,<br>
when a DC signal or a known varying signal is added to the input signal.<br>
From Fig. 6 it can be seen that the HLC for the hold lengths 1, 2 and 3 is more stable for<br>
smaller input levels when a DC signal has been added to the input signal to the Sigma-<br>
Delta converter compared with Fig. 3. Moreover, it can be seen that the HLC for the hold<br>
length of 4 is considerable more stable in Fig. 6 than in Fig. 3. Thus, with the addition of<br>
the DC signal, the hold length of 4 could be useful for providing information on the opti-<br>
mal gain of the filter/integrator in the Sigma-Delta converter. This conclusion is also ap-<br>
parent from Fig. 8, which shows HLC for the hold lengths 1, 2, 3 and 4, where a DC signal<br>
has been added to the signal input to the Sigma-Delta converter.<br>
From Figs. 6 to 8 it can be seen that it is advantageous if a DC signal or a known varying<br>
signal, or possibly both, is added to the signal input to the Sigma-Delta converter during<br>
adjustment of the gain of the filter(s) in the Sigma-Delta converter. However, it should be<br>
noted that the total level at the input of the Sigma-Delta converter should lie within the<br>
range where the HLC is accurate and substantially independent of the input signal level for<br>
the HLC to provide an accurate estimate of the gain of the filter(s) in the Sigma-Delta<br>
converter.<br><br>
Fig. 9 is a schematic diagram of a circuit 200 comprising a time-continuous Sigma-Delta<br>
converter 100, e.g. the Sigma-Delta converter 100 in Fig. 1 or a Sigma-Delta converter of<br>
another order and/or configuration, and additional means 250 for registering the hold<br>
length count HLC. The means 250 comprises the means 210, 220, 230, 232, 240, 241, 242<br>
connected downstream of the Sigma-Delta converter 100.<br>
The output sample from the Sigma-Delta converter 100 (in Fig. 9) at one time instance is<br>
compared, by subtraction in an adder 220, with the previous sample, which has been de-<br>
layed one clock period by use of a one-clock-period delay element (T) 210. Hereby, a<br>
change in the Sigma-Delta converter output, Sout, can be detected.<br>
A counter 242 is used to measure the HLC of a selected or desired hold length HLd. When<br>
a change of output from the Sigma-Delta converter is detected this counter should be in-<br>
cremented by 1 if the most recent HL is equal to the desired hold length, HLd.<br>
A counter 240 is used to measure the hold length, HL. Thus, this counter should start<br>
counting from 1 (one) and be incremented by 1 for every sample that is the same as its<br>
previous sample. When a change of Sigma-Delta converter output is detected the counter<br>
240 contains the most recent hold length.<br>
Block 230 generates an active signal whenever the current sample and its previous sample<br>
are identical. This signal is used to increment the counter 240 by 1.<br>
Block 232 generates an active signal whenever the current sample and its previous sample<br>
are different. This signal is used to trigger a comparison in block 241 of the output of the<br>
counter 240 and the desired hold length, HLd. If they are the same, block 241 generates an<br>
active signal that is used to increment the counter 242 by 1. The signal from 232 is also<br>
used to reset the counter 240 to 1 (one) as a change of the output from the Sigma-Delta<br>
converter means that a new HL should be measured.<br>
The output from the counter 242 is the measured hold length count HLCm (measured over<br>
a predetermined number of clock periods), which also forms a control signal that can be<br>
input to means for adjusting the gain of the filter(s) in the Sigma-Delta converter, e.g. a<br>
means 350 for creating a correction signal, as shown in Fig. 13. The means 350 could be<br><br>
implemented using a CPU with memory or other digital and or analog processing unit with<br>
memory.<br>
It should be noted that although Fig. 9 and the description thereof indicate the use of an<br>
adder 220, where one of the input signals is subtracted from the other input signal, other<br>
means for comparing two single bits for equality exist. One example could be to use an<br>
XOR gate that would result in an output of "1" only when the two inputs are different, i.e.<br>
when the Sigma-Delta converter changes its output stage. Other alternatives are conceiv-<br>
able, too.<br>
As mentioned above, the performance of the circuit can be improved by adding a DC sig-<br>
nal or a known varying signal to the input signal Sin to the Sigma-Delta converter 100. Fig.<br>
10 shows an example of how this can be done. In an adder 260 the signal Sadd, which can<br>
be either a DC signal, a known varying signal or a combination thereof, is added to the<br>
input signal Sin, and the combined signal is fed to the input of the Sigma-Delta converter<br>
100. The remaining part of the circuit is identical to that of Fig. 9.<br>
The HLC measure can be used to control the gain of the integrators/filters in the Sigma-<br>
Delta converter. Two techniques will be discussed below to serve as examples of how the<br>
gain can be tuned. These examples do not exclude the use of other methods for optimisa-<br>
tion of the integrator/filter gain. Such methods can be based on well-established computer<br>
algorithms or control theory suitable for either analog or digital implementation or both.<br>
In the first example the gain tuning strives towards the optimal gain by very simple means.<br>
In Fig. 11 a flow chart is outlined for HL=1. Based on whether the measured HLC (HLCm)<br>
is larger or smaller compared with the optimal HLC (HLCo), the gain is increased or de-<br>
creased, respectively, with a fixed AG and this term could be defined in e.g. linear magni-<br>
tude, linear power or dB. The magnitude of ΔG should be chosen large enough to be able<br>
to reach the optimal HLC (HLCo) within a predefined amount of time. At the same time it<br>
should be sufficiently small to reach as close to the optimal gain as desired.<br>
Thus Fig. 11 shows a flow chart illustrating the steps of a method 500 of adjusting the gain<br>
of a filter in a Sigma-Delta converter, based on HLC detection for the hold length HL=1<br>
and a fixed AG. The flow is started in step 510 and continues to step 520, in which the<br><br>
Hold Length Count (HLC) is measured, providing the value HLCm as illustrated in Fig. 9<br>
as a control signal, which below will also be designated as Sdet.<br>
As mentioned below, a termination condition for the gain tuning procedure is needed, and<br>
therefore in step 530 the value HLCm is compared with an optimal hold length count HLCo<br>
by finding the absolute value of the difference between HLCm and the optimal value HLCo<br>
and comparing this difference with a predefined measure Δ. If it is determined in step 530<br>
that the difference is less than A, the flow continues to step 560, where it ends.<br>
If the termination condition is not fulfilled, the flow continues to step 540, in which it is<br>
determined whether the measured HLCm is greater than the optimal value HLCo. In the<br>
affirmative case, the flow continues to step 551, where the gain of the filter(s) in the<br>
Sigma-Delta converter is increased by a predetermined value ΔG. Alternatively, if it is<br>
determined in step 540 that the measured HLCm is less than the optimal value HLCo, the<br>
flow continues to step 552, where the gain of the filter(s) in the Sigma-Delta converter is<br>
decreased by the predetermined value ΔG. The optimal hold length count HLCo is prefera-<br>
bly determined by means of a pre-simulation of a Sigma-Delta converter using nomi-<br>
nal/optimal gain values.<br>
From step 551 as well as from step 552 the flow returns to step 520, so that the flow is<br>
continued until it is determined in step 530 that the absolute value of the difference be-<br>
tween the measured hold length count HLCm and the optimal hold length count HLCo is<br>
less than the predefined measure Δ.<br>
The method described above and illustrated in Fig. 11 serves as a simple but descriptive<br>
example of how the gain can be adjusted based on the measured hold length count and the<br>
optimal hold length count. In a more general context, the problem is a straightforward op-<br>
timisation problem for which there are numerous established methods within the field of<br>
optimisation theory and methods, from very simple to very complex. Such methods can be<br>
used within the scope of this invention to provide both faster and more accurate adjust-<br>
ment of the gain. These optimisation methods often involve changing the step size ΔG.<br>
Step 520 of the method of Fig. 11 is typically carried out in the means 250 for detecting<br>
HLC, e.g. the block 250 in Figs. 9, 10 and 13. Steps 540, 551 and 552 are typically carried<br>
out in means 350 for adjusting the gain of a filter in the Sigma-Delta converter as shown in<br><br>
Fig. 13. Thus a control signal Sdet, which is the measured hold length count HLCm, is out-<br>
put from the means 250 for detecting HLC to the means 350 for adjusting the gain of the<br>
filter (gain tuning control), so that the means 350 on the basis of this signal, Sdet, can pro-<br>
vide a correction signal Scorr to be input to the filter(s) of the Sigma-Delta converter for<br>
adjusting the gain thereof.<br>
As for the measurement interval over which each HLC measurement is taking place, it<br>
should be sufficiently long to obtain an accurate estimate. In particular this applies to the<br>
case when there is a random input signal that could result in large variations of HLC, if the<br>
measurement interval is too small. Figs. 4 and 7 demonstrate this very well. The kinks in<br>
the curves are due to the fact that the measurement interval is only one OFDM symbol for<br>
each configuration. Using more symbols the curves would become much smoother. Typi-<br>
cally adjustment of the gain of the filters in the Sigma-Delta converter will take place at<br>
power-on of the Sigma-Delta converter and/or at predefined time instances when the ad-<br>
justment will not interfere with normal operation of the Sigma-Delta converter when sig-<br>
nals are converted.<br>
Thus a termination condition is required for the gain tuning and this is also shown in Fig.<br>
11. The gain tuning function is terminated when the measured HLCm is sufficiently close<br>
to the optimal HLCo, i.e. when the difference is within the range [-Δ,+Δ].<br>
When AG is fixed, it is preferably set to a value slightly less than the maximum allowed<br>
gain error. Thereby it can be assured that the flow chart in Fig. 11 can reach termination.<br>
However, choosing a significantly smaller value will provide a more stable gain tuning if<br>
the measured HLC is noisy (e.g. due to a small measurement time that makes the HLC<br>
measurement less accurate). The maximum allowed gain error can be found for a specific<br>
Sigma-Delta converter by simulating the signal-to-noise ratio SNR as a function of the<br>
gain error. Based on the maximum degradation of SNR with respect to gain error the span<br>
on acceptable gain error is found.<br>
The method 500 provides a very simple tuning of the gain of the filter(s) in a Sigma-Delta<br>
converter, as it only relies on the difference/discrepancy between optimal and measured<br>
HLC, and based on this the gain of the filter(s) in the Sigma-Delta converter is changed by<br>
a fixed step.<br><br>
In the second example the gain step can be varied based on the difference between the<br>
desired gain and estimated gain (based on HLC measurement). A flow chart 600 illustrat-<br>
ing gain tuning control based on detection of hold length count for HL=1 and using a vari-<br>
able AG is shown in Fig. 12. The process in the flow chart 600 starts in step 610 and con-<br>
tinues in step 620 by measuring HLC for HL=1. In step 630 the difference ΔHLC between<br>
the measured hold length count HLCm and the desired or optimal hold length count HLCo<br>
is calculated. As this is a measure of the distance to the optimal hold length count and in-<br>
directly also to the optimal gain, this value may be used to calculate the gain error Ge as<br>
Ge=k1 x ΔHLC in step 640. The factor k1 is the reciprocal of the derivative δHLC(G)/δG,<br>
i.e. k1=1/δHLC(G)/δG), A ratio ΔHLC/ΔG could also be used to calculate k1. A rough<br>
estimate can be found from a plot like that in Fig. 8 for the specific Sigma-Delta converter<br>
and hold length considered. Thus such a plot must be generated from calculation, simula-<br>
tion and/or measurements. It can be assumed that the actual gain is in the vicinity of the<br>
optimal gain and therefore k1 could be calculated at this point (G=Go).<br>
In step 650 it is checked if the magnitude of the estimated gain error Ge is smaller than the<br>
maximum allowed gain error Ge,max. If this is the case, the gain tuning flow can be termi-<br>
nated in step 670. If, however, the gain error is larger than Ge,max, the gain needs to be ad-<br>
justed. The gain can be adjusted directly by Ge as this is the estimated gain error. How-<br>
ever, if the measurement of HLC is noisy due to limited measurement time or other rea-<br>
sons, a smoother but slower gain tuning progress is obtained if the gain is adjusted by k2 x<br>
Ge where k2
the old value and k2 x Ge.<br>
These two examples are just very simple optimisation schemes to find the solution for the<br>
equation HLCm(G)-HLC0=0, i.e. find the gain G that satisfies the equation. For anyone<br>
skilled in the art of optimisation it is readily seen that different and/or more advanced<br>
methods can be applied to solve this equation based on requirements to speed, complexity,<br>
robustness, and accuracy.<br>
As mentioned, the two flow charts of Figs. 11 and 2 are both based on detection of the<br>
hold length count for the hold length HL=1. It can be seen from Figs. 5 and 8 that the<br>
slopes of the graphs for e.g. HL=1 and HL=3 are different around the point, where the<br>
normaliged gain equals one, i.e. G=G0. This means that when HLCm &gt; HLCo the gain has<br>
to be increased for HL=1 (as shown in the flow chart of Fig. 11), while it would have to be<br><br>
decreased for HL=3 due to the different slope. For the flow chart of Fig. 12, this difference<br>
is taken into account by the calculation of the factor k1.<br>
Fig. 13 is a schematic diagram of a circuit 300 with means 250 for detecting HLC and<br>
means 350 for creating a correction signal adapted to adjust the gain of the filter(s) of the<br>
Sigma-Delta converter 100.<br>
The circuit 300 in Fig. 13 comprising a time-continuous Sigma-Delta converter 100, e.g.<br>
the Sigma-Delta converter 100 in Fig. 1, and additional means 400 for adjusting the gain<br>
of the filters 110, 112 in the Sigma-Delta converter. The means 400 comprises means 250<br>
for detecting HLC and means 350 for creating a correction signal adapted to adjust the<br>
gain of the filters 110, 112 of the Sigma-Delta converter. From Fig. 13 it can be seen that<br>
the digital output Sout from the Sigma-Delta converter 100 is input to the means 250 for<br>
detecting HLC. The means 250 for detecting HLC provides a signal, Sdet, which equals the<br>
measured hold length count HLCm. This signal is input to the means 350 for creating a<br>
correction signal Scorr. This correction signal is subsequently input to the filters 110, 112 of<br>
the Sigma-Delta converter 100 for adjusting the gain thereof.<br>
In the circuit of Fig. 13, the same signal Scorr is input to both filters 110, 112 of the Sigma-<br>
Delta converter 100, as it is a reasonable assumption that the relative difference between<br>
component values of different integrators/filters within a Sigma-Delta converter is always<br>
very small. Generally, it can be assumed that the integrators/filters within a Sigma-Delta<br>
converter or several Sigma-Delta converters residing on the same chip track each other<br>
very well as the relative error between component values (mismatch) is always very small.<br>
Thus, the gain of all integrators/filters can be tuned with the same amount. As mentioned,<br>
the correction of the gain of the integrators/filters of a Sigma-Delta converter is required<br>
because of component value spread in e.g. resistors, capacitors, and gain stages. Typically,<br>
however, such components are also used in other building blocks like analog filters and<br>
oscillators, and therefore it can be concluded that the correction applied to the Sigma-<br>
Delta converter can also be applied to other building blocks when the components in these<br>
other building blocks track those in the Sigma-Delta converter, which is usually the case<br>
when these blocks are integrated on the same chip.<br>
The actual gain tuning of the integrators can be solved in many ways depending on the<br>
circuit topology that is used to implement the integrator. Basically, it may involve varying<br><br>
one or more components within the integrator, including resistors, capacitors, and trans-<br>
conductance amplifiers. These can be varied in a continuous fashion or in discrete steps.<br>
It should be recognized that the examples described above and shown in the figures are<br>
based on a second order Sigma-Delta converter and that other Sigma-Delta converter solu-<br>
tions with e.g. different order, architecture, low-pass or band-pass type, filter coefficient<br>
etc. will be possible, too. It should be stressed that each Sigma-Delta converter solution<br>
with respect to order, architecture, etc., will have a unique HLCo and this value can be<br>
obtained from a simulation of the specific Sigma-Delta converter solution. Which hold<br>
length to use for gain error detection, where non-ideal effects are accounted for, may vary<br>
as well as what the optimal hold length count will be for that particular hold length. Also,<br>
the relation between HLC and the input power may differ. Finally, errors introduced in a<br>
real implementation including delay in the AD or DA converter, non-linearities, mismatch<br>
between signals path, etc., may also affect relations between the quantities defined.<br>
Although a preferred embodiment of the present invention has been described and shown,<br>
the invention is not restricted to it, but may also be embodied in other ways within the<br>
scope of the subject-matter defined in the following claims.<br><br>
WE CLAIM :<br>
1.	A method of adjusting a filter (110; 112) of a time-continuous Sigma-Delta converter<br>
(100) arranged to convert an analog input signal (Sin) to a digital output signal (Sout),<br>
characterized in that the method comprises the steps of:<br>
•	generating from the digital output signal (Sout) of said Sigma-Delta converter (100)<br>
a control signal (Sdet; HLCm) indicative of a gain of said filter (110; 112); and<br>
•	adjusting the gain of said filter (110; 112) in dependence on said control signal<br>
(Sdet; HLCm).<br><br>
2.	A method according to claim 1, characterized in that the step of<br>
generating a control signal (Sdet; HLCm) further comprises the step of counting consecutive<br>
equal samples in the output signal (Sout) from said Sigma-Delta converter (100).<br>
3.	A method according to claim 2, c h a r a c t e r i z e d in that the step of<br>
generating a control signal further comprises the steps of:<br><br>
•	detecting the number (HLC) of times a specific number (HLd) of consecutive equal<br>
samples in the output signal (Sout) from said Sigma-Delta converter (100) is<br>
counted during a given measurement interval; and<br>
•	providing said detected number (HLC) of times as the control signal (Sdet; HLCm)<br>
indicative of the gain of said filter (110; 112).<br><br>
4.	A method according to claim 3, c h a r a c t e r i z e d in that said specific<br>
number (HLd) of consecutive equal samples in the output signal (Sout) from said Sigma-<br>
Delta converter (100) equals one.<br>
5.	A method according to any one of claim 1 to 4, characterized in<br>
that the method further comprises the step of adding a DC component (Sadd) to said analog<br>
input signal (Sin) prior to its conversion in the Sigma-Delta converter (100).<br>
6.	A method according to claim 4, characterized in that the step of<br>
adjusting the gain of said filter (110; 112) comprises the steps of:<br><br>
•	comparing said control signal (Sdet; HLCm) with a reference value (HLCo); and<br>
•	adjusting the gain of said filter (110; 112) by a predefined change of gain (ΔG),<br>
such that said gain is increased by said predefined change of gain (ΔG) if said con-<br><br>
trol signal exceeds said reference value and is otherwise decreased by said prede-<br>
fined change of gain (ΔG).<br>
7.	A method according to any one of claims 1 to 5, characterized in<br>
that the step of adjusting the gain of said filter (110; 112) comprises the steps of:<br>
•	calculating a difference (ΔHLC) between said control signal (Sdet; HLCm) and a<br>
reference value (HLCo);<br>
•	calculating a gain error (Ge) by multiplying said difference (ΔHLC) by a first fac-<br>
tor (k1) derived from a relation between said control signal (Sdet; HLCm) and the<br>
gain of said filter (110; 112);<br>
•	calculating a new gain value (Gnew) by subtracting said gain error (Gc) multiplied<br>
by a second factor (k2) from a previous gain value (Gold), where said second factor<br>
(k2) is less than or equal to one; and<br>
•	adjusting the gain of said filter (110; 112) to said new gain value (Gnew).<br><br>
8.	A method according to any one of claim 1 to 7, wherein said Sigma-Delta converter<br>
(100) comprises multiple filters (110, 112), characterized in that the<br>
method further comprises the step of adjusting the gain of each filter (110; 112) in de-<br>
pendence on said control signal (Sdet).<br>
9.	A method according to any one of claim 1 to 8, wherein said Sigma-Delta converter<br>
(100) and other building blocks are integrated on a common chip, c h a r a c -<br>
t e r i z e d in that the method further comprises the step of adjusting at least one of<br>
said other building blocks in dependence of said control signal (Sdet; HLCm).<br><br>
10.	A method according to any one of claims 1 to 9, c h a r a c t e r i z e d in<br>
that the step of adjusting the gain of said filter (110; 112) is performed at power-on of said<br>
Sigma-Delta converter (100).<br>
11.	A method according to any one of claims 1 to 10, c h a r a c t e r i z e d<br>
in that the step of adjusting the gain of said filter (110; 112) is performed at predefined<br>
time instances, when the step of adjusting does not interfere with normal operation of said<br>
Sigma-Delta converter (100).<br><br>
12.	An arrangement (200; 300) for converting an analog input signal (Sin) to a digital out-<br>
put signal (Sout), comprising a time-continuous Sigma-Delta converter (100) having a filter<br>
(110; 112), characterized in that the arrangement further comprises:<br>
•	means (250) for generating from the digital output signal (Sout) of said Sigma-Delta<br>
converter (100) a control signal (Sdet; HLCm) indicative of a gain of said filter (110;<br>
112); and<br>
•	means (350) for adjusting the gain of said filter (110; 112) in dependence of said<br>
control signal (Sdet; HLCm).<br><br>
13.	An arrangement (200; 300) according to claim 12, c h a r a c t e r i z e d<br>
in that said time-continuous Sigma-Delta converter (100) comprises a single-bit analog-to-<br>
digital converter (120).<br>
14.	An arrangement (200; 300) according to claim 12 or 13, c h a r a c t e r -<br>
i z e d in that the means (250) for generating a control signal (Sdet; HLCm) further<br>
comprises means (240) for counting consecutive equal samples in the output signal (Sout)<br>
from said Sigma-Delta converter (100).<br>
15.	An arrangement (200; 300) according to claim 14, c h a r a c t e r i z e d<br>
in that the means (250) for generating a control signal further comprises means (241, 242)<br>
for detecting the number (HLC) of times a specific number (HLd) of consecutive equal<br>
samples in the output signal (Sout) from said Sigma-Delta converter (100) is counted dur-<br>
ing a given measurement interval and providing said detected number (HLC) of times as<br>
the control signal (Sdet) indicative of the gain of said filter (110; 112).<br>
16.	An arrangement (200; 300) according to claim 15, characterized<br>
in that said specific number (HLd) of consecutive equal samples in the output signal (Sout)<br>
from said Sigma-Delta converter (100) equals one.<br>
17.	An arrangement (200; 300) according to any one of claim 12 to 16, c h a r -<br>
a c t e r i z e d in that the arrangement further comprises means (260) for adding a<br>
DC component (Sadd) to said analog input signal (Sin) prior to its conversion in the Sigma-<br>
Delta converter (100).<br><br>
18.	An arrangement (200; 300) according to claim 16, c h a r a c t e r i z e d<br>
in that the means (350) for adjusting the gain of said filter (110; 112) is arranged to:<br>
•	compare said control signal (Sdet; HLCm) with a reference value (HLCo); and<br>
•	adjust the gain of said filter (110; 112) by a predefined change of gain (ΔG), such<br>
that said gain is increased by said predefined change of gain (ΔG) if said control<br>
signal exceeds said reference value and is otherwise decreased by said predefined<br>
change of gain (ΔG).<br>
19.	An arrangement (200; 300) according to any one of claims 12 to 17, c h a r a c t e r i z e d in that the means (350) for adjusting the gain of said filter (110;<br>
112) is arranged to:<br>
•	calculate a difference (ΔHLC) between said control signal (Sdet; HLCm) and a ref-<br>
erence value (HLCo);<br>
•	calculate a gain error (Ge) by multiplying said difference (ΔHLC) by a first factor<br>
(k1) derived from a relation between said control signal (Sdet; HLCm) and the gain<br>
of said filter (110; 112);<br>
•	calculate a new gain value (Gnew) by subtracting said gain error (Ge) multiplied by<br>
a second factor (k2) from a previous gain value (Gold), where said second factor<br>
(k2) is less than or equal to one; and<br>
•	adjust the gain of said filter (110; 112) to said new gain value (Gnew).<br><br>
20.	An arrangement (200; 300) according to any one of claim 12 to 19, wherein said<br>
Sigma-Delta converter (100) comprises multiple filters (110, 112), c h a r a c -<br>
t e r i z e d in that the arrangement is further adapted to adjust the gain of each filter<br>
(110; 112) in dependence of said control signal (Sdet; HLCm).<br>
21.	An arrangement (200; 300) according to any one of claim 12 to 20, wherein said<br>
Sigma-Delta converter (100) and other building blocks are integrated on a common chip,<br>
characterized in that the arrangement is further adapted to adjust at<br>
least one of said other building blocks in dependence of said control signal (Sdet; HLCm).<br>
22.	An arrangement (200; 300) according to any one of claims 12 to 21, c h a r -<br>
a c t e r i z e d in that the means (350) for adjusting the gain of said filter (110;<br>
112) is arranged to adjust the gain at power-on of said Sigma-Delta converter (100).<br><br>
23.	An arrangement (200; 300) according to any one of claims 12 to 22, c h a r -<br>
a c t e r i z e d in that the means (350) for adjusting the gain of said filter (110;<br>
112) is arranged to adjust the gain at predefined time instances, when the adjustment does<br>
not interfere with normal operation of said Sigma-Delta converter (100).<br>
24.	A wireless communications device comprising the arrangement of any one of claims<br>
12 to 23 for converting an analog input signal to a digital output signal.<br>
25.	A device (250) for generating a control signal (Sdet; HLCm) and providing said control<br>
signal (Sdet; HLCm) to means (350) for adjusting a gain of a filter (110; 112) in a time-<br>
continuous Sigma-Delta converter (100), c h a r a c t e r i z e d in that the<br>
device comprises processing means (240, 241, 242) arranged to generate said control sig-<br>
nal (Sdet; HLCm); and the device is adapted to receive a digital output signal (Sout) of said<br>
Sigma-Delta converter (100) and generate said control signal (Sdet; HLCm) from the re-<br>
ceived digital output signal (Sout).<br>
26.	A device according to claim 25, c h a r a c t e r i z e d in that the device<br>
further comprises means (240) for counting consecutive equal samples in the output signal<br>
(Sout) from said Sigma-Delta converter (100).<br>
27.	A device according to claim 26, c h a r a c t e r i z e d in that the device<br>
further comprises means (241, 242) for detecting the number (HLC) of times a specific<br>
number (HLd) of consecutive equal samples in the output signal (Sout) from said Sigma-<br>
Delta converter (100) is counted during a given measurement interval and providing said<br>
detected number (HLC) of times as the control signal (Sdet; HLCm) indicative of the gain<br>
of said filter (110; 112).<br>
28.	A device according to claim 27, c h a r a c t e r i z e d in that said spe-<br>
cific number (HLd) of consecutive equal samples in the output signal (Sout) from said<br>
Sigma-Delta converter (100) equals one.<br>
29.	A computer program comprising program code means for performing the steps of any<br>
one of the claims 1 to 11 when said computer program is run on a computer.<br><br>
30. A computer readable medium having stored thereon program code means for perform-<br>
ing the method of any one of the claims 1 to 11 when said program code means is run on a<br>
computer.<br><br>
This invention relates to adjusting a filter (110; 112) of a time-continuous Sigma-Delta<br>
converter (100) arranged to convert an analog input signal (Sm) to a digital output signal<br>
(Sout). A control signal (Sdet) indicative of a gain of the filter is provided, and the gain of<br>
the filter is adjusted in dependence of the control signal. The control signal (Sdet) is provided<br>
from the digital output signal of the Sigma-Delta converter. In this way the performance<br>
of the Sigma-Delta converter can be improved in a simple way that requires no or<br>
few additional analog components, and the Sigma-Delta converter itself is used to adjust<br>
its performance. Using a signal from the digital domain of the Sigma-Delta converter is<br>
advantageous in that it is typically easier, faster and more precise to process signals in the<br>
digital domain.</td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=1pcZyN8yLeHFkxk+vMMGqA==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==" target="_blank" style="word-wrap:break-word;">http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=1pcZyN8yLeHFkxk+vMMGqA==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==</a></p>
		<br>
		<div class="pull-left">
			<a href="270576-method-for-producing-a-device-comprising-a-transponder-antenna-connected-to-contact-pins-and-device-obtained.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="270578-a-method-and-an-apparatus-for-processing-traffic-information.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>270577</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>2883/KOLNP/2008</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>01/2016</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>01-Jan-2016</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>31-Dec-2015</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>16-Jul-2008</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>TELEFONAKTIEBOLAGET LM ERICSSON (PUBL)</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>S-164 83 STOCKHOLM</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>SUNDSTRÖM, LARS</td>
											<td>SÅNGAREVÄGEN 18G, S-224 71 LUND</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>H03M 3/00</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/EP2006/011589</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2006-12-02</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>60/754,276</td>
									<td>2005-12-29</td>
								    <td>EUROPEAN UNION</td>
								</tr>
								<tr>
									<td>2</td>
									<td>05388114.0</td>
									<td>2005-12-22</td>
								    <td>EUROPEAN UNION</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/270577-adjusting-a-filter-of-a-time-continuous-sigma-delta-converter by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 04:06:38 GMT -->
</html>
