<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/198866-echo-suppressor-and-non-linear-processor-of-echo-canceller by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 05:59:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 198866:ECHO SUPPRESSOR AND NON-LINEAR PROCESSOR OF ECHO CANCELLER</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">ECHO SUPPRESSOR AND NON-LINEAR PROCESSOR OF ECHO CANCELLER</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>ABSTRACT The invention relates to an acoustic echo suppressor and a non-linear processor for an echo canceller in a 4-wire data transmission network. An echo canceller is typically controlled by comparing the power levels (PWR|N, &#x27; PS|N) of the near-end and far-end signals (RIN, 8IN). The transfer function of an acoustic echo path is usually very non uniform. According to the invention, the spectrum of the far-end signal (R|N) is treated, before the signal power level is calculated, with a weighted filter (21), which models the effect of the transfer function of acoustic echo. As a result, the double talk dynamics is improved, since high-energy vowels of far-end speech, which normally cause low-energy vowels of near-end speech to be clipped in an echo suppressor, will be attenuated.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td> <br><br>
ECHO SUPPRESSOR AND NON-LINEAR PROCESSOR OF ECHO CANCELLER<br>
FIELD OF THE INVENTION<br>
The invention relates to an echo suppressor and a non linear processor for an echo canceller in a 4-wire data transmission network.<br>
BACKGROUND OF THE INVENTION<br>
In bidirectional data transmission networks, such as telephone networks, echo occurs on end-to-end connections, as the talking party's voice is reflected from certain network elements. The echo is disturbing if there is delay on the end-to-end connection. The delay is usually either propagation delay or delay caused by digital signal processing.<br>
Echo is divided into two categories: acoustic echo between the earpiece and microphone of a telephone, and electric echo caused in the transmission systems of the transmission and reception directions of a connection.<br>
One of the main reasons behind electric echo is hybrid circuits (2-wire-4-wire converters) in terminal exchanges or remote subscriber stages of a fixed network. The subscriber lines of a fixed network are usually 2-wire lines for economic reasons, whereas connections between exchanges are 4-wire connections<br>
In this application, the end of a transmission connection to which the talking party's own voice returns as an echo is referred to as the far end, whereas the end of the connection from which the echo is reflected back is referred to as the near end.<br>
An echo canceller or an echo suppressor has conventionally been used to obviate problems caused by echo. An echo canceller is a device for processing a signal, such as a speech signal. It estimates the echo and reduces the echo by subtracting the echo estimate from a signal returning from the echo path (from the near end). In echo estimation, the impulse response of the echo path is usually modelled by an adaptive filter. In addition, a non-linear processor (NLP) is often used in echo cancellers for removing residual echo resulting from adaptive filtering.<br>
An echo suppressor is based on comparison between the power levels of a signal supplied to the echo path and a signal returning therefrom. If the ratio of the power level of the signal returning from the echo path to the power level of the signal supplied to the echo path is lower than a pre-<br><br>
determined ratio, the transmission connection returning from the echo path will be disconnected, whereby the echo is not allowed to pass through. Otherwise it is interpreted that either near-end speech or double talk (simultaneous near-end and far-end speech) is in question, in which case the connection naturally cannot be disconnected. The non-linear processor (NLP) or center clipper used for eliminating residual echo in echo cancellers is also a certain kind of echo suppressor.<br>
At present, mainly echo cancellers are used for eliminating echo, since echo suppressors cause the following problems. As the reference ratio for the signals of the near and far end must be selected according to the worst echo situation (usually -6 dB), low-level near-end speech does not pass through an echo suppressor during double talk. Even if the average speech levels of the near and far end were equal, near-end speech is clipped occasionally during double talk, depending on the ratio between the signal levels. Another problem is echo during double talk. During double talk, near-end speech passes through the echo suppressor, and so does echo of far-end speech when summed to the near-end speech. The echo of double talk can be reduced by attenuating the near-end signal and possibly even the far-end signal in the echo suppressor during double talk. However, the attenuation cannot be too high, since it has a disturbing "pumping" effect on the strength of the speech.<br>
Although echo cancellers are technically better than echo suppressors, there are situations in which it is justified to use an echo suppressor. In practice, the adaptive filter of an echo canceller should be implemented digitally, which may be too expensive in a purely analogue data transmission system, particularly in terminals. Even in digital data transmission systems, the adaptive filter requires either a specific ASIC or a signal processor, the prices and current consumption of which may be too high for portable terminals, for example.<br>
It is justifiable to use an echo suppressor in a data transmission network, i.e. not in a terminal, if the adaptive filter of an echo canceller is not sufficiently efficient. An adaptive filter removes echo poorly if the echo path is non-linear, i.e. if the non-linear distortion ratio of returning echo is poor. Non-linearity is caused, for instance, by speech coding of low transmission rate. Speech coding can be used on both fixed and wireless transmission connections.<br><br>
The object of the present invention is to improve the double talk dynamics of an echo suppressor.<br>
The invention relates to an echo suppressor for eliminating acoustic echo, said echo suppressor comprising means for determining properties of far-end and near-end signals, means for enabling or disabling transmission of a near-end signal to the far end, depending on said properties of the far end and near end, and means for treating the spectrum of a far-end signal, before said properties are determined, in a manner which models the effect of the amplitude response of the transfer flinction of acoustic echo.<br>
The invention also relates to a non-linear processor for an echo canceller, comprising means for determining the signal power levels for the far end and near end, means for activating or deactivating the non-linear processor according to the properties of the far-end and near-end signals and means for treating the spectrum of a far-end signal before said properties are determined in a manner which models the effect of the amplitude response of the transfer function of acoustic echo on residual echo, wherein said near-end signal power level is the power level of the residual echo of the echo canceller.<br><br>
One of the properties of acoustic echo is that the amplitude response of its transfer function (the frequency response difference between the echo supplied to the echo path and the echo returning therefrom) is very uneven. Particularly the amplitude response of the acoustic connection between the earpiece and microphone of a terminal is extremely uneven in the frequency domain: the amplitude response typically comprises a peak in the frequency range of about 1.5 to 3.0 kHz. The echo return loss ERL is thus clearly a function of frequency, i.e. ERL on the echo path is considerably lower at the peak than for instance at lower frequencies.<br>
The invention utilizes this property in the control of an echo suppressor. As stated above, the control of an echo suppressor is based on<br><br>
the comparison between certain properties, such as power levels, of the near-end and far-end signals. According to the invention, the spectrum of the far-end signal is treated before the signal power level is determined in a manner which models the effect of the amplitude response of the transfer function of acoustic echo. The spectrum may be treated, for example, with a weighted filter whose amplitude response in the frequency domain is optimized to substantially correspond to the amplitude response of the transfer function of acoustic echo. In other words, the weighted filter aims at modelling echo return loss ERL as a function of frequency. If the near-end signal power level is lower than the frequency weighted far-end signal power level, the near-end signal is interpreted as acoustic echo, and the signal returning from the near end is not allowed to pass through the echo suppressor. If the near-end signal power level is higher than the frequency weighted far-end signal power level, the near-end signal is interpreted either as near-end speech or as double talk, and the near-end signal is allowed to pass through the echo suppressor.<br>
The invention improves the double talk dynamics of an echo suppressor by the following mechanism. In a conventional echo suppressor based on unweighted power level comparison, high-energy vowels from the far end clip low-energy consonants, and partly also low-level vowels, from the near end with a high probability during double talk. The weighted filter of the invention, which is typically of high-pass or band-pass type, reduces the energy of the high-energy vowels of far-end speech in relation to the low-energy consonants. This is because the energy of vowels lies mainly in frequencies below 1 kHz, whereas the energy of consonants is distributed fairly evenly over the entire speech-frequency range. The energy of vowels of a far-end signal treated with a weighted filter is thus lower than in the known echo suppressors. Vowels of near-end speech are thus not clipped, and in addition, consonants are less likely to be clipped during double talk than in the known echo suppressors. Only high-energy consonants of the far end can clip low-energy consonants of near-end speech. Since consonants are short as compared with vowels, any clipping times of consonants of near-end speech are short and hardly deteriorate the near-end talk noticeably.<br>
BRIEF DESCRIPTION OF THE DRAWINGS<br>
In the following, the invention will be described by means of preferred embodiments with reference to the accompanying drawings, in which<br><br>
Figure 1 is a general view of the operational environment of an echo suppressor of the invention,<br>
Figure 2 is a general block diagram of the echo suppressor of the invention,<br>
Figure 3 is a flow chart illustrating the control of the echo suppressor of the Invention,<br>
Figure 4 shows a weighted digital filter of the invention.<br>
Figure 5 shows a weighted adaptive filter of the invention.<br>
Figure 6 is a flow chart illustrating the control of an adaptive filter, based on the fast Fourier transform (FFT),<br>
Figures 7 and 8 are block diagrams illustrating a weighted filter based on the bandsplitting principle, and a control unit.<br>
Figure 9 shows an echo canceller in which the present invention is applied for controlling a non-linear processor.<br>
Figure 10 is a flow chart illustrating the control of a non-linear processor in accordance with the invention.<br>
PREFERRED EMBODIMENTS OF THE INVENTION<br>
The present invention can be applied in any telecommunication system or terminal for controlling an acoustic echo suppressor. In order that the echo suppressor of the invention could operate appropriately, it is essential, however, that the echo path is a purely 4-wire connection: echo reflected from the near end is thus connected only acoustically, for instance from the earpiece or loudspeaker to the microphone of a terminal. Therefore the echo path must not comprise a 2-4-wire hybrid. The reason for this is that the frequency response of electric echo formed in a 2-4-wire hybrid is rather uniform.<br>
Figure 1 is a general view of the operational environment of the invention. The following abbreviations will be used for the inputs and outputs of the echo suppressor. In the transmission direction from the far end, the input is called R|N (Receive in) and the output RQUT (Receive out). In the transmission direction from the near end, the input is called S|N (Send in) and the output SouT (Send out).<br>
The microphone 6 of the far end converts an acoustic signal, i.e. far-end speech, into an electric signal, which is transmitted through a transmission connection T2 to an echo suppressor 1. The type of the transmission link T2 is irrelevant to the invention. It may be, for example, a 2-<br><br>
wire and/or a 4-wire connection; the transmission technology may be either analogue and/or digital; and the transmission connection may be physically a fixed cable connection and/or a radio path.<br>
A signal from the far end is received at the input R|N of the echo suppressor and supplied from the output RQUT through a transmission path T1 further to the near end. The near end comprises a terminal or some other unit in which the far-end signal is converted into an acoustic speech signal either in a loudspeaker or in an earpiece 4. Part of the far-end speech is coupled acoustically from the loudspeaker or earpiece 4 to the microphone 5 of the near-end terminal as acoustic echo. A signal from the near end is supplied through the transmission connection T1 to the input S|N of the echo suppressor 1. From the output SQUT of the echo suppressor 1, a signal is transmitted through the transmission connection T2 to the far end; the transmitted signal is either the original near-end signal or comfort noise, as will be described more closely below. If the signal transmitted to the far end is the original near-end signal, it may contain the acoustic far-end echo described above; the far-end subscriber hears this echo from the earpiece or loudspeaker 7 as a disturbing echo of his own speech. The total delay of the transmission connections T1 and T2 multiplied by two determines when the speech of the far-end subscriber returns back as an echo.<br>
According to the invention, the transmission connection T1 between the near-end terminal and the echo suppressor is always a 4-wire connection. Physically the transmission connection T1 may be a fixed cable and/or a radio path. Either analogue and/or digital transmission technology may be used.<br>
The echo suppressor 1 may be provided in the near-end terminal, in which case the delay of the transmission connection T1 is insignificant. The transmission connection T1 thus does not comprise any actual transmission system.<br>
If the echo suppressor is positioned apart from the terminal in the network infrastructure, the T1 comprises an actual transmission system, and the delay of the T1 may be significant. The terminal may be, for example, a terminal of a digital mobile communication system, and the echo suppressor may be provided In a speech transcoder of a mobile communication network. In this case, the T1 comprises, for example, a bidirectional radio connection, speech coding, and transmission systems between the network elements of the mobile communication network. Such a location of an echo suppressor is<br><br>
disclosed   in   the   Applicant's   co-pending   International   PCT   Application W096/42142.<br>
Figure 2 is a general block diagram of an echo suppressor of one embodiment of the invention, and Figure 3 is a flow chart illustrating the operation of the echo suppressor. The echo suppressor 1 comprises the same ports R|N, ROUT. S.N and SQUT. which were shown in Figure 1. The port R|N is directly connected to the port RQUT- The port S|N is connected to the input of a selector 26, and the port SQUT to the output of the selector 26. The selector 26 either enables or disables the propagation of a near-end signal to the output port SQUT according to a control signal received from a comparator unit 24. A comfort noise generator 27 is typically connected to the other input of the selector 26 in such a manner that the selector 26 switches either a near-end signal from the port S|N or the output CN of the comfort noise generator 27 to the port SQUT according to the control signal CONTROL received from the comparator 24 (steps 306 and 307 in Figure 3). In its simplest form, the selector 26 may be a change-over switch.<br>
The port R|N is also connected to the input of a weighted filter 21, preferably through a fixed attenuator 20. The attenuator 20 reduces the power level of the signal R|N to a level which is suitable for subsequent signal processing. In practice, the value of the attenuator 20 is selected according to the lowest allowable echo return loss (ERL). The weighted filter 21 treats the signal R,N in accordance with the invention (step 301 in Figure 3). The output WR|N of the weighted filter 21 is connected to the signal power calculation unit 22, which determines the power or level of the signal received from the far end at the port R,N (step 302). The unit 22 may be implemented in many ways known per se. It is typically a rectifier and an integrator (analogue implementation) which integrates the signal level over a certain integration time. When the signal to be measured is digital, e.g. a PCM (pulse code modulated) signal, the unit 22 is typically implemented as digital calculation, e.g. in the signal processor. It should be noted, however, that the way the power calculation unit is implemented is irrelevant to the invention. The output PWR|N of the unit 22, which represents the frequency weighted power level of the far-end signal, is connected to the input of the comparator unit 24, in the embodiment of Figure 1 through the delay 23 (step 303). In this case, the input of the comparator 24 comprises a delayed measurement result PWR|N+DLY.<br><br>
The port S|N is connected to the signal power calculation unit 25, which determines the power or level of the signal received from the near end to the port S|N (step 304). The unit 25 may be implemented in the same way as the signal power calculation unit 22. The output PS|N of the unit 25, which represents the power level of a near-end signal is connected to the other input of the comparator unit 24.<br>
The comparator unit 24 compares the outputs PWR|N+DLY and PSi^ of the units 22 and 25, i.e. the power levels of the far-end and near-end signals (step 305), and controls the selector 26 on the basis of the comparison (steps 306 and 307), as will be described below. In its simplest form, the comparator 26 may be a differential amplifier circuit (analogue implementation) or a binary/decimal comparator. The output CONTROL of the comparator 24 is connected to the control input of the selector 26. Although power levels of the signals R|N and 8,^ were used for the control in the example described above, the control may also be based on other properties of these signals, such as cross-correlation. The delay unit 23 is necessary if delay occurs on the transmission connection T1 in Figure 1. The delay DLY of the delay unit 23 is preferably set to be approximately the same as the total delay caused by the n in both transmission directions (i.e. bidirectional delay); this is to ensure that the power level of a far-end signal supplied to the echo path at a specific Tioment is compared with the power level of the returning echo only when its Dwn echo has propagated through the echo path. If the delay of T1 is short [e.g. the echo suppressor is provided in the terminal), the delay unit 23 is not 'equired.<br>
The generator 27 is employed for generating comfort noise CN, since experience has shown that a listener is greatly disturbed when the Dackground noise behind the speech suddenly disappears. This would happen 2ach time that the selector 26 disconnects the signal path from the port S|N to :he port SQUT- OnÂ® way of avoiding the disturbance is to generate artificial loise, when the echo suppressor clips the actual near-end signal. This noise nay be random noise or comfort noise, which tends to resemble actual Dackground noise in the near end. Some ways of generating comfort noise are described in the Applicant's co-pending International PCT Application I/V096/42142. However, the generation of noise is not relevant to the invention and may also be omitted from an echo suppressor.<br><br>
As stated above, it is an essential feature of the invention is that the spectrum of the far-end signal is treated, before the power level is calculated, in a manner which simulates the effect of the amplitude response of the transfer function of an acoustic echo path. In the embodiment of Figure 2 this is performed with a weighted filter 21. The weighted filter 21 aims at modelling acoustic echo return loss ERL as a function of frequency. Since there is typically a peak at the frequency range of about 1.5 to 3.0 kHz in the amplitude response of the acoustic connection between the earpiece and microphone of a terminal, the echo return loss is considerably lower at the peak than for instance at lower frequencies. An optimal weighted filter is therefore typically a high-pass or band-pass filter.<br>
The weighted filter 21 may be fixed or adaptive. The transfer function of a fixed weighted filter 21 may be, for example, the average of the transfer functions of the acoustic echoes occurring in the telephone network, whereby its amplitude response is of high-pass type. The steepness, cut-off frequency and the attenuations of the pass band and stop band are determined according to the "worst" terminal having the lowest echo return loss ERL. The terminals having the next lowest ERLs are, however, taken into account if their ERLs at certain frequencies are lower than those of the "worst" terminal. An example of implementation of a fixed weighted filter is a digital elliptic IIR (Infinite Impulse Response) high-pass filter of the third degree whose transfer function is:<br>
bo+biZ'^+bzr^+baZ"^<br>
H(z) =	<br>
1+ai2"^+a2Z"^+a3Z"^<br>
Figure 4 shows a block diagram of a direct IIR type filter which satisfies the equation given above.<br>
For an adaptive weighted filter 21 the optimal transfer function may be obtained on a call-by-call basis. In this case, the average double talk dynamics can be further increased, since the transfer function of the weighted filter does not have to be selected according to the lowest ERL, as in the case of a fixed weighted filter.<br>
In its simplest form, the adaptive weighted filter comprises a fixed frequency response, i.e. a fixed filter 61, and adaptive further attenuation (e.g.<br><br>
an adaptive attenuator tJU Derore the filter bl), as illustrated m Figure 5. In this case, the adaptive attenuator 60 replaces the fixed attenuator 20. The filter 61 nnay be, for example, the filter of Figure 4. The control FREQRES of the attenuator 60 is obtained from the control 28 of the filter (Figure 2).<br>
The best result can naturally be obtained if the weighted filter 21 is adaptive in the frequency domain. In this case, the acoustic echo path is modelled in the frequency domain, and the weighted filter 21 is adjusted to correspond to the echo path model call-specifically. The weighted filter 21 can be adjusted either once, at the beginning of the call, or continuously so that any changes in the properties of the echo path during the call are taken into account.<br>
Both the far-end speech signal and the echo of the speech returning from the near end can be used for modelling acoustic echo. This requires means for identifying double talk and background noise in the near end. Such methods are known in echo cancelling technology. Alternatively, an echo suppressor may, for example, send a test signal through the port RQUT to the echo path at the beginning of a call. The acoustic echo of the test signal is received at the port 8,^. On the basis of the test signal and the received echo of the test signal, it is possible to determine the echo return loss, the transfer function of the echo path and/or the delay of the echo path according to principles well known in the art. Figure 2 shows the control unit 28 of the adaptive weighted filter 21; the control unit 28 may perform the operations described above. When the transfer function of the acoustic echo path has been calculated/defined, the control unit 28 sets the transfer function of the weighted filter accordingly. In this case, the fixed attenuator 20 of Figure 2 is not required. If the control unit 28 also calculates the delay of the echo path, the delay of the delay unit 23 can also be adjusted adaptively.<br>
In digital technology, the fast Fourier transform FFT, for example, can be used for determining the frequency response difference between the near-end and far-end signals. On the basis of this, the tap coefficients of a digital weighted filter can be set to be optimal for the call in question.<br>
In the flow chart of Figure 6, it is checked at first whether double talk is occurring (step 700). If so, the echo suppressor is naturally not activated, but the process returns to the beginning. If not, step 701 is proceeded to in order to check the speech activity of the far end. If there is no speech activity, echo suppression is not needed, and the process returns to<br><br>
the beginning. Otherwise the cross-correlation of the far and near end is calculated in step 702, and it is checked in step 703 whether the cross-correlation contains a distinct maximum value, i.e. an echo point. If not, the process returns to the beginning. Othenwise the delay DLY of the echo path is calculated in step 704 by means of cross-correlation; the delay is also obtained from the maximum echo point. The fast Fourier transform FFTRIN of the far-end signal R|N, delayed by the delay DLY, is calculated in step 705. The fast Fourier transform FFTgiN of the near-end signal S|N is calculated in step 706. In step 703, the echo return loss in the frequency domain is calculated: FFTRIN/FFTSIN- On the basis of the calculated echo return loss, the tap coefficients of the digital weighted filter 21 are adjusted in step 708, and the delay DLY of the delay member 23 is set in step 709. Thereafter the echo suppressor is activated in step 800.<br>
Figure 7 shows an adaptive weighted filter 21 which is based on the bandsplitting filter principle. A far-end signal R|N is splitted by a bandsplitting filter 210 into N frequency bands FI...FN. Each signal F^.-.F^ is attenuated by a separate adjustable attenuator 211I...211N, the attenuation of which is set according to the attenuation values ATTI...ATTN obtained from the control 28 of the filter. Each sub-band FI...FN of the signal R|N is thus adjusted separately according to the frequency response of the echo path. The outputs of the attenuators 211 are supplied to a summer 212, in which the sub-bands FI...FN are summed to obtain a signal WR|N treated with a weighted filter. The signal WR|N is supplied to the signal power calculation unit 22.<br>
Figure 8 illustrates the control 28 of the weighted filter 21 of Figure 7, based on the bandsplitting filter principle.<br>
A far-end signal R|N is divided by a bandsplitting filter 280 into N frequency bands FI...FN. The signal power level of each frequency band FI...FN is calculated in blocks 282,...282^, whereafter the calculated power levels are delayed by the delay DLY in delay blocks 283I...283N. From the delay units 283I...283N, the power level values PRINI...PRINN are supplied to the corresponding divider units 285I...285N. In the same way, a near-end signal S|N is divided by a bandsplitting filter 281 into N bands FI...FN. In blocks 284I...284N, signal power levels PSINI...PSINN are calculated for the frequency bands and supplied to the corresponding dividers 285I...285N. Each divider 285 calculates the corresponding far-end and near-end signal power level<br><br>
ratio. This ratio forms the attenuation value ATTI...ATTN, which is supplied to the corresponding adjustable attenuator 211I...211M in the weighted filter 21.<br>
The delay of the echo path, i.e. the echo point, may be obtained by means of the cross-correlation between the near and far-end signals, for example, as illustrated in the flow chart of Figure 6.<br>
The echo suppressor of the invention operates, in principle, as follows. It can be assumed that the weighted filter 21 is fixed or that it has been set, at the beginning of a call, to be optimal by modelling the echo path. A far-end signal R|N is weighted by the weighted filter 21, whereafter the power level of the frequency weighted far-end signal is calculated in a power calculation unit 22. The calculated power level is forwarded to a delay unit 23. The delay unit 23 delays the supply of the power level information to a comparator 24 so long that the far-end signal propagates through the port RQUT and the transmission connection T1 to the near-end terminal, part of it is connected acoustically from the earpiece 4 to the microphone 5, and returns as an acoustic echo to the port S|N of the echo suppressor 1. The power level of the signal received from the near end is calculated in a calculating unit 25 and supplied to the comparator 24 substantially at the same time that the delay circuit 23 supplies the weighted far-end signal power level. If the near-end signal power level is lower than the frequency weighted far-end signal power level, the comparator 24 interprets the near-end signal as an acoustic echo and controls a selector 26 in such a manner that a comfort noise generator 27 is connected to the output port SQUT- 'n other words, the near-end signal is prevented from propagating to the output SQUT and replaced with comfort noise. If the near-end signal power level is higher than the frequency weighted far-end signal power level, the signal at the port S|N is interpreted as near-end speech or double talk, and the comparator 24 controls the selector 26 in such a manner that the near-end speech is connected from the port 8,^ to the port SQUT-<br>
The present invention can also be applied in an echo canceller provided with a non-linear processor (NLP). The operation of the NLP is comparable to an echo suppressor. The invention is particularly advantageous in a distributed echo cancelling solution, in which an adaptive filter is located in a terminal and an NLP in a network element. In this case, it is not possible to utilize the echo estimate of the echo canceller for calculating the far-end power level; thus a weighted filter is the only solution for modelling the amplitude<br><br>
response of the echo path. A distributed echo cancelling system is disclosed in the Applicant's co-pending International PCT Application W096/42142.<br>
Figure 9 illustrates an echo canceller, and the flow chart of Figure 10 illustrates the control of an NLP in accordance with the invention. The echo canceller comprises an adaptive digital filter 33, which on the basis of the signals  forms an echo estimate EEST, which a subtracter 31 subtracts from the signal  The NLP 32 is provided after the subtracter and is controlled substantially in the same way as the selector 26 in Figure 2. The structure and operation of units 21, 22, 23, 24, 25, 27 and 28 in Figure 3 are substantially the same as in Figure 2. The difference is mainly that, instead of near-end signal power level, the power calculation unit 25 calculates the power level PLRES of the residual echo LRES of the adaptive echo canceller. Since the power level of the echo signal is lower after the adaptive echo canceller (subtracter 31) than that of the near-end signal power level at the port S|N, the reference ratio for the near and far-end signal power levels can be reduced without that the residual echo is allowed to pass through the NLP 32. This also improves the double talk dynamics. The double talk dynamics is also improved by the weighted filter 21 of the invention. A condition for the application of the invention in an echo canceller is, however, that the spectrum of the residual echo of the adaptive echo canceller is high-pass filtered in the frequency domain as compared with the spectrum of the far-end signal. In theory, the residual echo of an adaptive echo canceller is noise with a uniform spectrum, but in practice, the residual signal of an acoustic echo is high-pass filtered as a result of the non-linearity of the acoustic echo path and the calculation inaccuracy of the filter 33.<br>
Although the invention has been described above with reference to specific embodiments, it will be understood, however, that the specification is only exemplary, and the embodiments described can be modified without departing from the spirit and scope of the invention as described in the appended claims.<br><br><br>
"WE CLAIM :<br>
1.	An echo suppressor for eliminating acoustic echo said echo suppressor        <br>
comprising means (22, 25) for determining properties of far-end and<br>
near-end signals, means (24, 26) for enabling or disabling transmission of<br>
a near-end signal to the far end, depending on said properties of the far end and near end, and means (21) for treating the spectrum of a far-end signal, before said properties are determined, in a maimer which models the effect of the amplitude response of the transfer function of acoustic echo.<br>
2.	An echo suppressor according to claim 1, wherein said means for enabling or disabling the transmission of a near-end signal to the far end comprises a selector (26) for selecting a near-end signal or a noise signal as the signal to be transmitted to the far-end, and control means (24) for controlling the selector (26) according to the signal power levels of the far end and near end.<br>
3.	An echo suppressor according to claim 2, comprising a noise generator (27) for generating a noise signal.<br>
4.	An echo suppressor according to any one of the preceding claims, wherein said means for treating the spectrum of a far-end signal comprise a weighted filter (21) whose amplitude response in frequency domain substantially corresponds to the amplitude response of the transfer function of the acoustic echo.<br><br>
5.	An echo suppressor according to any one of the preceding claims,      wherein the weighted filter (21) is fixed or adaptive.<br>
6.	An echo suppressor according to any one of the preceding claims, wherein the weighted filter (21) is a high-pass, band-pass or weighted bandsplitting filter.<br>
7.	An echo suppressor according to claim 1, wherein a delay element (23) is provided between the control means (24) and the means (22) for determining the far-end signal power level, the delay of the delay element being substantially equal to the delay of the echo path.<br>
8.	An echo suppressor according to any one of the preceding claims, wherein the near-end signal contains residual echo of an echo canceller provided in the near end.<br>
9.	A non-linear processor for an echo canceller, comprising means (22, 25) for determining the signal power levels for the far end and near end, means (24, 32) for activating or deactivating the non-linear processor according to the properties of the far-end and near-end signals and means (21) for treating the spectrum of a far-end signal before said properties are determined in a manner which models the effect of the amplitude response of the transfer function of acoustic echo on residual echo, wherein said near-end signal power level is the power level of the residual echo of the echo canceller.<br><br>
10. A non-linear processor according to claim 9, wherein the echo canceller is provided in a near-end terminal and the non-linear processor is remote from the echo canceller in the telecommunication network.<br>
11.	A non-linear processor   according to claim 9, wherein said properties<br>
include the signal power levels of the far end and near end.<br>
12.	An echo suppressor for eliminating acoustic echo substantially as herein<br>
described with reference to the accompanying drawings.<br>
13.	A non-linear processor for an echo canceller substantially as herein<br>
described with reference to the accompanying drawings.<br><br><br></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTI3NS1tYXMtMTk5NyBhYnN0cmFjdCBkdXBsaWNhdGUucGRm" target="_blank" style="word-wrap:break-word;">1275-mas-1997 abstract duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTI3NS1tYXMtMTk5NyBhYnN0cmFjdC5wZGY=" target="_blank" style="word-wrap:break-word;">1275-mas-1997 abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTI3NS1tYXMtMTk5NyBjbGFpbXMgZHVwbGljYXRlLnBkZg==" target="_blank" style="word-wrap:break-word;">1275-mas-1997 claims duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTI3NS1tYXMtMTk5NyBjbGFpbXMucGRm" target="_blank" style="word-wrap:break-word;">1275-mas-1997 claims.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTI3NS1tYXMtMTk5NyBjb3JyZXNwb25kZW5jZSBvdGhlcnMucGRm" target="_blank" style="word-wrap:break-word;">1275-mas-1997 correspondence others.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTI3NS1tYXMtMTk5NyBjb3JyZXNwb25kZW5jZSBwby5wZGY=" target="_blank" style="word-wrap:break-word;">1275-mas-1997 correspondence po.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTI3NS1tYXMtMTk5NyBkZXNjcmlwdGlvbiAoY29tcGxldGUpIGR1cGxpY2F0ZS5wZGY=" target="_blank" style="word-wrap:break-word;">1275-mas-1997 description (complete) duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTI3NS1tYXMtMTk5NyBkZXNjcmlwdGlvbiAoY29tcGxldGUpLnBkZg==" target="_blank" style="word-wrap:break-word;">1275-mas-1997 description (complete).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTI3NS1tYXMtMTk5NyBkcmF3aW5ncyBkdXBsaWNhdGUucGRm" target="_blank" style="word-wrap:break-word;">1275-mas-1997 drawings duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTI3NS1tYXMtMTk5NyBkcmF3aW5ncy5wZGY=" target="_blank" style="word-wrap:break-word;">1275-mas-1997 drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTI3NS1tYXMtMTk5NyBmb3JtLTE5LnBkZg==" target="_blank" style="word-wrap:break-word;">1275-mas-1997 form-19.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTI3NS1tYXMtMTk5NyBmb3JtLTIucGRm" target="_blank" style="word-wrap:break-word;">1275-mas-1997 form-2.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTI3NS1tYXMtMTk5NyBmb3JtLTI2LnBkZg==" target="_blank" style="word-wrap:break-word;">1275-mas-1997 form-26.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTI3NS1tYXMtMTk5NyBmb3JtLTQucGRm" target="_blank" style="word-wrap:break-word;">1275-mas-1997 form-4.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTI3NS1tYXMtMTk5NyBmb3JtLTYucGRm" target="_blank" style="word-wrap:break-word;">1275-mas-1997 form-6.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTI3NS1tYXMtMTk5NyBvdGhlcnMucGRm" target="_blank" style="word-wrap:break-word;">1275-mas-1997 others.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MTI3NS1tYXMtMTk5NyBwZXRpdGlvbi5wZGY=" target="_blank" style="word-wrap:break-word;">1275-mas-1997 petition.pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="198864-a-method-of-producing-a-dry-gypsum-based-composition.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="198867-elastomeric-element-valve.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>198866</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>1275/MAS/1997</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>23/2006</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>09-Jun-2006</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>24-Feb-2006</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>12-Jun-1997</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>M/S. NOKIA TELECOMMUNICATIONS OY</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>KEILALAHDENTIE 4, FIN 02150 ESPOO</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>OLLI KIRLA</td>
											<td>JUHANA-HERTTUANTIE 5 A 28 FIN-00600 HELSINKI, FINLAND</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>H04M9/08</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>N/A</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td></td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>962562</td>
									<td>1996-06-19</td>
								    <td>Finland</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/198866-echo-suppressor-and-non-linear-processor-of-echo-canceller by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 05:59:29 GMT -->
</html>
