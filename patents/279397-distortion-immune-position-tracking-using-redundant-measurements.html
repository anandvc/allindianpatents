<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/279397-distortion-immune-position-tracking-using-redundant-measurements by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 01:11:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 279397:DISTORTION-IMMUNE POSITION TRACKING USING REDUNDANT MEASUREMENTS</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">DISTORTION-IMMUNE POSITION TRACKING USING REDUNDANT MEASUREMENTS</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>A method for tracking a position of an object includes using a field sensor associated with the object to measure field strengths of magnetic fields generated by two or more field generators, wherein a measurement of at least one of the field strengths is subject to a distortion. Rotation-invariant location coordinates of the object are calculated responsively to the measured field strengths. Corrected location coordinates of the object are determined by applying to the rotation- invariant location coordinates a coordinate correcting function so as to adjust a relative contribution of each of the measured field strengths to the corrected location coordinates responsively to the distortion in the measured field strengths.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>DISTORTION-IMMUNE POSITION TRACKING USING REDUNDANT<br>
MEASUREMENTS<br>
FIELD OF THE INVENTION<br>
The present invention relates generally to magnetic<br>
position tracking systems, and particularly to methods<br>
and systems for performing accurate position measurements<br>
in the presence of field-distorting objects.<br>
BACKGROUND OF THE INVENTION<br>
Various methods and systems are known in the art for<br>
tracking the coordinates of objects involved in medical<br>
procedures. Some of these systems use magnetic field<br>
measurements. For example, U.S. Patents 5,391,199 and<br>
5,443,489, whose disclosures are incorporated herein by<br>
reference, describe systems in which the coordinates of<br>
an intrabody probe are determined using one or more field<br>
transducers. Such systems are used for generating<br>
location information regarding a medical probe or<br>
catheter. A sensor, such as a coil, is placed in the<br>
probe and generates signals in response to externally-<br>
applied magnetic fields. The magnetic fields are<br>
generated by magnetic field transducers, such as radiator<br>
coils, fixed to an external reference frame in known,<br>
mutually-spaced locations.<br>
Additional methods and systems that relate to<br>
magnetic position tracking are also described, for<br>
example, in PCT Patent Publication WO 96/057 68, U.S.<br>
Patents 6, 690,963, 6,239,724, 6,618,612 and 6,332,08 9,<br>
and U.S. Patent Application Publications 2002/0065455 Al,<br>
2003/0120150 Al and 2004/0068178 Al, whose disclosures<br>
are  all   incorporated  herein  by  reference.   These<br>
BIO5136USNP<br>
 <br>
publications describe methods and systems that track the<br>
position of intrabody objects such as cardiac catheters,<br>
orthopedic implants and medical tools used in different<br>
medical procedures.<br>
It is well known in the art that the presence of<br>
metallic, paramagnetic or ferromagnetic objects within<br>
the magnetic field of a magnetic position tracking system<br>
often distorts the system's measurements. The distortion<br>
is sometimes caused by eddy currents that are induced in<br>
such objects by the system's magnetic field, as well as<br>
by other effects.<br>
Various methods and systems have been described in<br>
the art for performing position tracking in the presence<br>
of such interference. For example, U.S. Patent 6,147,480,<br>
whose disclosure is incorporated herein by reference,<br>
describes a method in which the signals induced in the<br>
tracked object are first detected in the absence of any<br>
articles that could cause parasitic signal components.<br>
Baseline phases of the signals are determined. When an<br>
article that generates parasitic magnetic fields is<br>
introduced into the vicinity of the tracked object, the<br>
phase shift of the induced signals due to the parasitic<br>
components is detected. The measured phase shifts are<br>
used to indicate that the position of the object may be<br>
inaccurate. The phase shifts are also used for analyzing<br>
the signals so as to remove at least a portion of the<br>
parasitic signal components.<br>
2<br>
BIO5136USNP<br>
 <br>
SUMMARY OF THE INVENTION<br>
Embodiments  of  the  present  invention	provide<br>
improved methods  and  systems  for performing	magnetic<br>
position  tracking  measurements  in  the  presence  of<br>
metallic,  paramagnetic  and/or  ferromagnetic objects<br>
{collectively referred to as field-distorting objects)<br>
using redundant measurements.<br>
The system comprises two or more field generators<br>
that generate magnetic fields in the vicinity of the<br>
tracked object. The magnetic fields are sensed by a<br>
position sensor associated with the object and converted<br>
to position signals that are used to calculate the<br>
position (location and orientation) coordinates of the<br>
object. The system performs redundant field strength<br>
measurements and exploits the redundant information to<br>
reduce the measurement errors caused by the presence of<br>
field-distorting objects.<br>
The redundant measurements comprise field strength<br>
measurements of magnetic fields generated by different<br>
field generators and sensed by field sensors in the<br>
position sensor. In an exemplary embodiment described<br>
herein, nine field generators and three field sensing<br>
coils are used to obtain 27 different field strength<br>
measurements. The 27 measurements are used to calculate<br>
the six location and orientation coordinates of the<br>
tracked object, thus containing a significant amount of<br>
redundant information.<br>
In some embodiments, a rotation-invariant coordinate<br>
correcting  function is applied to the measured field<br>
3<br>
BIO5136USNP<br>
 <br>
strengths to produce a distortion-corrected location<br>
coordinate of the tracked object. As will be shown<br>
hereinbelow, the coordinate correcting function exploits<br>
the redundant location information so as to reduce the<br>
distortion level in the corrected location coordinate.<br>
The coordinate correcting function can be viewed as<br>
adjusting the relative contributions of the measured<br>
field strengths to the corrected location coordinates<br>
responsively to the respective level of the distortion<br>
present in each of the measured field strengths. A<br>
disclosed clustering process further improves the<br>
accuracy of the coordinate correcting function by<br>
defining different coordinate correcting functions for<br>
different locations.<br>
In some embodiments, the orientation coordinates of<br>
the tracked object are calculated following the location<br>
calculation. Other disclosed methods improve the accuracy<br>
of the orientation calculation in the presence of<br>
distortion, and compensate for non-concentricity of the<br>
field sensors of the position sensor.<br>
In some embodiments, the redundant field strength<br>
measurements are used to identify one or more system<br>
elements, such as field generators and/or field sensing<br>
elements of the position sensor, which contribute<br>
significant distortion. Field measurements associated<br>
with these system elements are disregarded when<br>
performing the position calculation. In some embodiments,<br>
a distortion-contributing element may be deactivated.<br>
4<br>
BIO5136USNP<br>
 <br>
There is therefore provided, in accordance with an<br>
embodiment of the present invention, a method for<br>
tracking a position of an object, including:<br>
using a field sensor associated with the object to<br>
measure field strengths of magnetic fields generated by<br>
two or more field generators, wherein a measurement of at<br>
least one of the field strengths is subject to a<br>
distortion;<br>
calculating rotation-invariant location coordinates<br>
of the object responsively to the measured field<br>
strengths; and<br>
determining corrected location coordinates of the<br>
object by applying to the rotation-invariant location<br>
coordinates a coordinate correcting function so as to<br>
adjust a relative contribution of each of the measured<br>
field strengths to the corrected location coordinates<br>
responsively to the distortion in the measured field<br>
strengths.<br>
In some embodiments, the method includes inserting<br>
the object into an organ of a patient, and determining<br>
the corrected location coordinates of the object includes<br>
tracking the position of the object inside the organ.<br>
In an embodiment, the distortion is caused by a<br>
field-distorting object subjected to at least some of the<br>
magnetic fields, wherein the object comprises at least<br>
one material selected from a group consisting of<br>
metallic, paramagnetic and ferromagnetic materials.<br>
In a disclosed embodiment, the method includes<br>
performing  calibration  measurements  of  the  magnetic<br>
5<br>
BIO5136USNP<br>
 <br>
fields at respective known coordinates relative to the<br>
two or more field generators, and deriving the coordinate<br>
correcting function responsively to the calibration<br>
measurements. In another embodiment, the distortion is<br>
caused by a movable field-distorting object, and<br>
performing the calibration measurements includes<br>
performing the measurements at different locations of the<br>
field-distorting object. Additionally or alternatively,<br>
deriving the coordinate correcting function includes<br>
applying a fitting process to a dependence of the<br>
calibration measurements on the known coordinates.<br>
In yet another embodiment, applying the coordinate<br>
correcting  function  includes  applying  a  polynomial<br>
function having coefficients including exponents of at<br>
least some of the rotation-invariant location<br>
coordinates.<br>
In still another embodiment, applying the coordinate<br>
correcting function includes identifying a distortion-<br>
contributing element responsively to the measured field<br>
strengths, and producing the coordinate correcting<br>
function so as to disregard the measured field strengths<br>
that are associated with the distortion-contributing<br>
element.<br>
In some embodiments, the field sensor includes one<br>
or more field sensing elements, and identifying the<br>
distortion-contributing element includes determining that<br>
one or more of the field sensing elements and the field<br>
generators are contributing to the distortion.<br>
6<br>
BIO5136USNP<br>
 <br>
In an embodiment, the method includes calculating<br>
angular orientation coordinates of the object.<br>
In another embodiment, the field sensor is used<br>
within a working volume associated with the two or more<br>
field generators, and determining the corrected location<br>
coordinates includes:<br>
dividing the working volume into two or more<br>
clusters;<br>
defining for each of the two or more clusters<br>
respective two or more cluster coordinate correcting<br>
functions; and<br>
applying to each of the rotation-invariant location<br>
coordinates one of the cluster coordinate correcting<br>
functions responsively to a cluster in which the<br>
rotation-invariant location coordinate falls.<br>
Applying the cluster coordinate correcting functions<br>
may include applying a weighting function so as to<br>
smoothen a transition between neighboring clusters.<br>
In yet another embodiment, the method includes<br>
measuring the field strengths using two or more field<br>
sensors having non-concentric locations, and compensating<br>
for inaccuracies caused by the non-concentric locations<br>
in the corrected location coordinates.<br>
There is additionally provided, in accordance with<br>
an embodiment of the present invention, a method for<br>
tracking a position of an object, including:<br>
using a field sensor associated with the object to<br>
perform measurements  of  field  strengths  of  magnetic<br>
7<br>
BIO5136USNP<br>
 <br>
fields generated by two or more field generators so as to<br>
provide redundant location information, wherein at least<br>
some of the field strength measurements are subject to a<br>
distortion; and<br>
determining location coordinates of the object<br>
relative to the two or more field generators by applying<br>
to the measurements a coordinate correcting function that<br>
exploits the redundant location information so as to<br>
reduce an impact of the distortion on the location<br>
coordinates.<br>
There is also provided, in accordance with an<br>
embodiment of the present invention, a method for<br>
tracking a position of an object, including:<br>
using a field sensor, which includes one or more<br>
field sensing elements associated with the object, to<br>
measure field strengths of magnetic fields generated by<br>
two or more' field generators, wherein a measurement of at<br>
least one of the field strengths is subject to a<br>
distortion;<br>
identifying, responsively to the measured field<br>
strengths, at least one distortion-contributing system<br>
element, which is selected from a group consisting of the<br>
one or more field sensing elements and the two or more<br>
field generators; and<br>
determining the position of the object relative to<br>
the two or more field generators responsively to the<br>
measured field strengths while disregarding field<br>
measurements associated with the distortion-contributing<br>
system element.<br>
8<br>
BIO5136USNP<br>
 <br>
In an embodiment, the method includes inserting the<br>
object into an organ of a patient, and determining the<br>
position of the object includes tracking the position of<br>
the object inside the organ. In another embodiment, the<br>
two or more field generators are associated with the<br>
object, and the field sensor is located externally to the<br>
organ. In yet another embodiment, identifying the<br>
distortion-contributing system element includes accepting<br>
an a-priori indication selected from a group consisting<br>
of a characteristic direction of the distortion and an<br>
identity of the distortion-contributing system element.<br>
In still another embodiment, identifying the<br>
distortion-contributing system element includes sensing a<br>
presence of the distortion in the field measurements<br>
associated with the distortion-contributing system<br>
element. In an embodiment, the distortion-contributing<br>
system element includes a pair of one of the field<br>
sensing elements and one of the field generators. In<br>
another embodiment, disregarding the field measurements<br>
associated with the distortion-contributing system<br>
element includes deactivating the distortion-contributing<br>
system element.<br>
There is further provide, in accordance with an<br>
embodiment of the present invention, a system for<br>
tracking a position of an object, including:<br>
two or more field generators, which are arranged to<br>
generate respective magnetic fields in a vicinity of the<br>
object;<br>
a field sensor associated with the object, which is<br>
arranged to measure  field strengths  of the magnetic<br>
9<br>
BIO5136USNP<br>
 <br>
fields, wherein a measurement of at least one of the<br>
field strengths is subject to a distortion; and<br>
a processor, which is arranged to calculate<br>
rotation-invariant location coordinates of the object<br>
responsively to the measured field strengths, and to<br>
determine corrected location coordinates of the object by<br>
applying to the rotation-invariant location coordinates a<br>
coordinate correcting function so as to adjust a relative<br>
contribution of each of the measured field strengths to<br>
the corrected location coordinates responsively to the<br>
distortion in the measured field strengths.<br>
There is additionally provided, in accordance with<br>
an embodiment of the present invention, a system for<br>
tracking a position of an object, including:<br>
two or more field generators, which are arranged to<br>
generate respective magnetic fields in a vicinity of the<br>
object;<br>
a field sensor associated with the object, which is<br>
arranged to perform measurements of field strengths of<br>
the magnetic fields so as to provide redundant location<br>
information, wherein at least some of the field strength<br>
measurements are subject to a distortion; and<br>
a processor, which is arranged to determine location<br>
coordinates of the object relative to the two or more<br>
field generators by applying to the measurements a<br>
coordinate correcting function that exploits the<br>
redundant location information so as to reduce an impact<br>
of the distortion on the location coordinates.<br>
10<br>
BIO5136USNP<br>
 <br>
There is also provided, in accordance with an<br>
embodiment of the present invention, a system for<br>
tracking a position of an object, including:<br>
two or more field generators, which are arranged to<br>
generate respective magnetic fields in a vicinity of the<br>
object;<br>
a field sensor, which is associated with the object<br>
and includes one or more field sensing elements, which is<br>
arranged to measure field strengths of the magnetic<br>
fields, wherein a measurement of at least one of the<br>
field strengths is subject to a distortion; and<br>
a processor, which is arranged to identify<br>
responsively to the measured field strengths a<br>
distortion-contributing system element, which is selected<br>
from a group consisting of the one or more field sensing<br>
elements and the two or more field generators, and to<br>
determine the position of the object relative to the two<br>
or more field generators while disregarding field<br>
measurements associated with the distortion-contributing<br>
system element.<br>
There is further provided, in accordance with an<br>
embodiment of the present invention, a computer software<br>
product used in a system for tracking a position of an<br>
object, the product including a computer-readable medium,<br>
in which program instructions are stored, which<br>
instructions, when read by the computer, cause the<br>
computer to control two or more field generators so as to<br>
generate magnetic fields in a vicinity of the object, to<br>
accept measurements of field strengths of the magnetic<br>
fields performed by a field sensor associated with the<br>
object,  wherein a measurement of at least one of the<br>
11<br>
BIO5136USNP<br>
 <br>
field strengths is subject to a distortion, to calculate<br>
rotation-invariant location coordinates of the object<br>
responsively to the measured field strengths, and to<br>
determine corrected location coordinates of the object by<br>
applying to the rotation-invariant location coordinates a<br>
coordinate correcting function so as to adjust a relative<br>
contribution  of each of the measured field strengths to<br>
the corrected location coordinates responsively to the<br>
distortion in the measured field strengths.<br>
There is also provided, in accordance with an<br>
embodiment of the present invention, a computer software<br>
product used in a system for tracking a position of an<br>
object, the product including a computer-readable medium,<br>
in which program instructions are stored, which<br>
instructions, when read by the computer, cause the<br>
computer to control two or more field generators so as to<br>
generate magnetic fields in a vicinity of the object, to<br>
accept measurements of field strengths of the magnetic<br>
fields performed by a field sensor associated with the<br>
object, the measurements including redundant location<br>
information, wherein at least some of the measurements<br>
are subject to a distortion, and to determine location<br>
coordinates of the object relative to the two or more<br>
field generators by applying to the measurements a<br>
coordinate correcting function that exploits the<br>
redundant location information so as to reduce an impact<br>
of the distortion on the location coordinates.<br>
There is additionally provided, in accordance with<br>
an embodiment of the present invention, a computer<br>
software product used in a system for tracking a position<br>
12<br>
BIO5136USNP<br>
 <br>
of an object, the product including a computer-readable<br>
medium, in which program instructions are stored, which<br>
instructions, when read by the computer, cause the<br>
computer to control two or more field generators so as to<br>
generate magnetic fields in a vicinity of the object, to<br>
accept measurements of field strengths of the magnetic<br>
fields performed by a field sensor, which is associated<br>
with the object and includes one or more field sensing<br>
elements, wherein a measurement of at least one of the<br>
field strengths is subject to a distortion, to identify<br>
responsively to the measured field strengths a<br>
distortion-contributing system element, which is selected<br>
from a group consisting of the two or more field<br>
generators and the one or more field sensing elements,<br>
and to determine the position of the object relative to<br>
the two or more field generators while disregarding field<br>
measurements associated with the distortion-contributing<br>
system element.<br>
The present invention will be more fully understood<br>
from the following detailed description of the<br>
embodiments thereof, taken together with the drawings in<br>
which:<br>
BRIEF DESCRIPTION OF THE DRAWINGS<br>
Fig. 1 is a schematic, pictorial illustration of a<br>
system for position tracking and steering of intrabody<br>
objects, in accordance with an embodiment of the present<br>
invention;<br>
Fig. 2 is a schematic, pictorial illustration of a<br>
location pad, in accordance with an embodiment of the<br>
present invention;<br>
13<br>
BIO5136USNP<br>
 <br>
Fig. 3 is a schematic, pictorial illustration of a<br>
catheter, in accordance with an embodiment of the present<br>
invention;<br>
Fig. A is a flow chart that schematically<br>
illustrates a method for position tracking in the<br>
presence of field distortion, in accordance with an<br>
embodiment of the present invention; and<br>
Fig. 5 is a flow chart that schematically<br>
illustrates a method for position tracking in the<br>
presence of field distortion, in accordance with another<br>
embodiment of the present invention.<br>
DETAILED DESCRIPTION OF EMBODIMENTS<br>
SYSTEM DESCRIPTION<br>
Fig. 1 is a schematic, pictorial illustration of a<br>
system 20 for position tracking and steering of intrabody<br>
objects, in accordance with an embodiment of the present<br>
invention. System 20 tracks and steers an intrabody<br>
object, such as a cardiac catheter 24, which is inserted<br>
into an organ, such as a heart 28 of a patient. System 20<br>
also measures, tracks and displays the position (i.e.,<br>
the location and orientation) of catheter 24. In some<br>
embodiments, the catheter position is registered with a<br>
three-dimensional model of the heart or parts thereof.<br>
The catheter position with respect to the heart is<br>
displayed to a physician on a display 30. The physician<br>
uses an operator console 31 to steer the catheter and to<br>
view its position during the medical procedure.<br>
System 20 can be used for performing a variety of<br>
intra-cardiac surgical and diagnostic procedures in which<br>
14<br>
BIO5136USNP<br>
 <br>
navigation and steering of the catheter is performed<br>
automatically or semi-automatically by the system, and<br>
not manually by the physician. The catheter steering<br>
functions of system 20 can be implemented, for example,<br>
by using the Niobe® magnetic navigation system produced<br>
by Stereotaxis, Inc. (St. Louis, Missouri). Details<br>
regarding this system are available at<br>
www.stereotaxis.com. Methods for magnetic catheter<br>
navigation are also described, for example, in U.S.<br>
Patents 5,654,864 and 6,755,816, whose disclosures are<br>
incorporated herein by reference.<br>
System 20 positions, orients and steers catheter 24<br>
by applying a magnetic field, referred to herein as a<br>
steering field, in a working volume that includes the<br>
catheter. An internal magnet is fitted into the distal<br>
tip of catheter 24. ("Catheter 24 is shown in detail in<br>
Fig. 3 below.) The steering field steers (i.e., rotates<br>
and moves) the internal magnet, thus steering the distal<br>
tip of catheter 24.<br>
The steering field is generated by a pair of<br>
external magnets 36, typically positioned on either side<br>
of the patient. In some embodiments, magnets 36 comprise<br>
electro-magnets that generate the steering field<br>
responsively to suitable steering control signals<br>
generated by console 31. In some embodiments, the<br>
steering field is rotated or otherwise controlled by<br>
physically moving (e.g., rotating) external magnets 36 or<br>
parts thereof. The difficulties that arise from having<br>
large metallic objects whose position may very over time,<br>
15<br>
BIO5136USNP<br>
 <br>
such as magnets 36, in close proximity to the working<br>
volume will be discussed hereinbelow.<br>
System 20 measures and tracks the location and<br>
orientation of catheter 24 during the medical procedure.<br>
For this purpose, the system comprises a location pad 40.<br>
Fig. 2 is a schematic, pictorial illustration of<br>
location pad 40, in accordance with an embodiment of the<br>
present invention. Location pad 40 comprises field<br>
generators, such as field generating coils 44. Coils 44<br>
are positioned at fixed, known locations and orientations<br>
in the vicinity of the working volume. In the exemplary<br>
configuration of Figs. 1 and 2, location pad 40 is placed<br>
horizontally under the bed on which the patient lies. Pad<br>
40 in this example has a triangular shape and comprises<br>
three tri-coils 42. Each tri-coil 42 comprises three<br>
field generating coils 44. Thus, in the present example,<br>
location pad 40 comprises a total of nine field<br>
generating coils. The three coils 44 in each tri-coil 42<br>
are oriented in mutually-orthogonal planes. In<br>
alternative embodiments, location pad 40 may comprise any<br>
number of field generators arranged in any suitable<br>
geometrical configuration.<br>
Referring to Fig. I, console 31 comprises a signal<br>
generator 4 6, which generates drive signals that drive<br>
coils 44. In the embodiments shown in Figs. 1 and 2, nine<br>
drive signals are generated. Each coil 44 generates a<br>
magnetic field, referred to herein as a tracking field,<br>
responsively to the respective drive signal driving it.<br>
The tracking fields comprise alternating current  (AC)<br>
16<br>
BIO5136USNP<br>
 <br>
fields. Typically, the frequencies of the drive signals<br>
generated by signal generator 46 (and consequently the<br>
frequencies of the respective tracking fields) are in the<br>
range of several hundred Hz to several KHz, although<br>
other frequency ranges can be used as well.<br>
A position sensor fitted into the distal tip of<br>
catheter 24 senses the tracking fields generated by coils<br>
44 and produces respective position signals, which are<br>
indicative of the location and orientation of the sensor<br>
with respect to the field generating coils. The position<br>
signals are sent to console 31, typically along a cable<br>
running through catheter 24 to the console. Console 31<br>
comprises a tracking processor 48, which calculates the<br>
location and orientation of catheter 24 responsively to<br>
the position signals. Processor 48 displays the location<br>
and orientation of the catheter, typically expressed as a<br>
six-dimensional coordinate, to the physician using<br>
display 30.<br>
Processor 48 also controls and manages the operation<br>
of signal generator 46. In some embodiments, field<br>
generating coils 44 are driven by drive signals having<br>
different frequencies, so as to differentiate between<br>
their magnetic fields. Alternatively, the field<br>
generating coils can be driven sequentially so that the<br>
position sensor measures the tracking field originating<br>
from a single coil 44 at any given time. In these<br>
embodiments, processor 48 alternates the operation of<br>
each coil 44 and associates the position signals received<br>
from the catheter with the appropriate field generating<br>
coil.<br>
17<br>
BIO5136USNP<br>
 <br>
Typically, tracking processor 48 is implemented<br>
using a general-purpose computer, which is programmed in<br>
software to carry out the functions described herein. The<br>
software may be downloaded to the computer in electronic<br>
form, over a network, for example, or it may<br>
alternatively be supplied to the computer on tangible<br>
media, such as CD-ROM. The tracking processor may be<br>
integrated with other computing functions of console 31.<br>
Fig. 3 is a schematic, pictorial illustration of the<br>
distal tip of catheter 24, in accordance with an<br>
embodiment of the present invention. Catheter 24<br>
comprises an internal magnet 32 and a position sensor 52,<br>
as described above. Catheter 24 may also comprise one or<br>
more electrodes 56, such as ablation electrodes and<br>
electrodes for sensing local electrical potentials.<br>
Position sensor 52 comprises field sensing elements, such<br>
as field sensing coils 60. In some embodiments, position<br>
sensor 52 comprises three field sensing coils 60 oriented<br>
in three mutually-orthogonal planes. Each coil 60 senses<br>
one of the three orthogonal components of the AC tracking<br>
field and produces a respective position signal<br>
responsively to the sensed component. Sensor 52 and<br>
electrodes 56 are typically connected to console 31 via<br>
cables 64 running through the catheter.<br>
It is well known in the art that metallic,<br>
paramagnetic and ferromagnetic objects (collectively<br>
referred to herein as field-distorting objects) placed in<br>
an AC magnetic field cause distortion of the field in<br>
their vicinity. For example, when a metallic object is<br>
subjected to an AC magnetic field,  eddy currents are<br>
18<br>
BIO5136USNP<br>
 <br>
induced in the object, which in turn produce parasitic<br>
magnetic fields that distort the AC magnetic field.<br>
Ferromagnetic objects distort the magnetic field by<br>
attracting and changing the density and orientation of<br>
the field lines.<br>
In the context of a magnetic position tracking<br>
system, when a field-distorting object is present in the<br>
vicinity of position sensor 52, the tracking field sensed<br>
by sensor 52 is distorted, causing erroneous position<br>
measurements. The severity of the distortion generally<br>
depends on the amount of field-distorting material<br>
present, to its proximity to the position sensor and to<br>
the field generating coils, and/or to the angle in which<br>
the tracking field impinges on the field-distorting<br>
object. In the system of Fig. 1, for example, external<br>
magnets 36 typically contain a large mass of field-<br>
distorting material and are located in close proximity to<br>
the working volume. As such, external magnets 36 may<br>
cause a significant distortion of the tracking field<br>
sensed by the position sensor.<br>
The methods and systems described hereinbelow are<br>
mainly concerned with performing accurate position<br>
tracking measurements in the presence of severe<br>
distortion of the tracking magnetic field. The catheter<br>
steering system of Fig. 1 is described purely as an<br>
exemplary application, in which objects located in or<br>
near the working volume of the position tracking system<br>
cause a severe, time varying distortion of the tracking<br>
field. However, embodiments of the present invention are<br>
in no way limited to magnetic steering applications. The<br>
19<br>
BIO5136USNP<br>
 <br>
methods and systems described herein can be used in any<br>
other suitable position tracking application for reducing<br>
such distortion effects. For example, the methods and<br>
systems described herein can be used to reduce field<br>
distortion effects caused by object such as C-arm<br>
fluoroscopes and magnetic resonance imaging (MRI)<br>
equipment.<br>
In alternative embodiments, system 20 can be used to<br>
track various types of intrabody objects, such as<br>
catheters, endoscopes and orthopedic implants, as well as<br>
for tracking position sensors coupled to medical and<br>
surgical tools and instruments.<br>
DISTORTION REDUCTION METHOD USING REDUNDANT MEASUREMENT<br>
INFORMATION<br>
As noted above, system 20 comprises nine field<br>
generating coils 4 4 that generate nine respective<br>
tracking fields. Each of these fields is sensed by three<br>
field sensing coils 60. Thus, the system performs a total<br>
of 27 field projection measurements in order to calculate<br>
the six location and orientation coordinates of catheter<br>
24. It is evident that the 27 measurements contain a<br>
significant amount of redundant information. This<br>
redundant information can be used to improve the immunity<br>
of the system to distortions caused by field-distorting<br>
objects, such as external magnets 36.<br>
The 27 field measurements can be viewed as vectors<br>
in a 27-dimensional vector space. Each dimension of this<br>
vector space corresponds to a pair of {field generating<br>
coil  44,  field  sensing  coil  60} .  Because  of  the<br>
20<br>
BIO5136USNP<br>
 <br>
redundancy in the measurements, it is often possible to<br>
determine a lower dimensionality sub-space of this vector<br>
space that is invariant or nearly invariant to the field<br>
distortions. The position tracking method described in<br>
Fig. 4 below uses the redundant information present in<br>
the field measurements to improve the accuracy of the<br>
position measurements in the presence of such field<br>
distortions.<br>
In principle, the method first calculates three<br>
location vectors that define the location of position<br>
sensor 52 relative to the three tri-coils 42,<br>
respectively. These location vectors are invariant to the<br>
angular orientation of the position sensor and are<br>
referred to as rotation invariants. The location vectors<br>
are orientation-invariant since, as will be shown below,<br>
they are calculated based on measured field intensity and<br>
not based on the projection of the field strength onto<br>
the field sensing coils.<br>
The location vectors (rotation invariants) are<br>
corrected by coordinate correcting functions, which<br>
exploit the redundant measurement information to improve<br>
field distortion immunity. The orientation coordinates of<br>
the position sensor are then calculated to complete the<br>
six-dimensional location and orientation coordinate of<br>
the sensor. In some embodiments, the method of Fig. 4<br>
also comprises calibration and clustering steps, as well<br>
as a process for compensating for the non-concentricity<br>
of coils 60 of position sensor 52.<br>
21<br>
BIO5136USNP<br>
 <br>
<br>
 <br>
Although the method of Fig. 4 below refers to a<br>
location pad comprising nine field generating coils<br>
arranged in three mutually-orthogonal groups in tri-coils<br>
42 and to a position sensor comprising three mutually-<br>
orthogonal field sensing coils, this configuration is an<br>
exemplary configuration chosen purely for the sake of<br>
conceptual clarity. In alternative embodiments, location<br>
pad 40 and position sensor 52 may comprise any number of<br>
coils 44 and coils 60 arranged in any suitable<br>
geometrical configuration.<br>
Fig. 4 is a flow chart that schematically<br>
illustrates a method for position tracking in the<br>
presence of field distortion, in accordance with an<br>
embodiment of the present invention. The method begins by<br>
mapping and calibrating the tracking fields generated by<br>
location pad 40, at a calibration step 100.<br>
Typically, the calibration process of step 100 is<br>
performed during the production of location pad 40, and<br>
the calibration results are stored in a suitable memory<br>
device coupled to the location pad- Calibration setups<br>
that can be used for this purpose and some associated<br>
calibration procedures are described, for example, in<br>
U.S. Patent 6,335,617, whose disclosure is incorporated<br>
herein by reference.<br>
In the calibration process, a calibrating sensor<br>
similar to position sensor 52 is scanned through multiple<br>
locations in the three-dimensional working volume around<br>
pad 40. At each location of the calibrating sensor, each<br>
of the nine field generating coils 44 in pad 40 is driven<br>
22<br>
BIO5136USNP<br>
 <br>
to generate a respective tracking field, and the three<br>
field sensing coils 60 of the calibrating sensor measure<br>
this tracking field. The. sensed field strengths<br>
associated with each location are recorded.<br>
In some embodiments, the calibration process<br>
comprises performing multiple field measurements at each<br>
location of the calibrating sensor. Typically, some of<br>
these measurements comprise free-space measurements<br>
(i.e., measurements taken when the working volume and its<br>
vicinity are free of field-distorting objects). Other<br>
measurements are taken in the presence of field-<br>
distorting objects, in the same positions they are<br>
expected to have during the system operation. For<br>
example, when the field-distorting objects comprise<br>
external magnets 36 that are physically moved to steer<br>
catheter 24, field measurements are performed while the<br>
magnets are moved through their entire expected motion<br>
range. Other field-distorting objects that may be<br>
included in the calibration include, for example, a<br>
fluoroscope used to irradiate the patient, as well as the<br>
bed the patient lies on.<br>
The calibration setup performs the field<br>
measurements and records the measurement results along<br>
with the associated known locations of the calibrating<br>
sensor. In some embodiments, the calibration procedure is<br>
carried out by a robot or other automatic calibration<br>
setup that moves the calibration sensor across the<br>
working volume around pad 40.<br>
23<br>
 <br>
In some embodiments, every pad 40 being produced is<br>
calibrated using the calibration procedure described<br>
herein. Alternatively, such as when the production<br>
process of pads 40 is sufficiently repeatable, the full<br>
calibration procedure may be performed only on a single<br>
location pad or a sample of pads and the results used to<br>
calibrate the remaining pads. Further alternatively, a<br>
sample of pads may be subjected to the full calibration<br>
procedure. For the remaining pads, only differential<br>
results, indicating the field strength differences<br>
between free-space measurements and distorted<br>
measurements, are recorded.<br>
In some cases, the material composition, mechanical<br>
structure and/or location of the field-distorting objects<br>
is known. In such cases, the interference caused by these<br>
objects can be modeled, and the model used as part of the<br>
calibration measurements. In some cases, when multiple<br>
field-distorting objects are present, calibration<br>
measurements may be performed for each object separately.<br>
The individual calibration measurements can then be<br>
combined. Further additionally or alternatively, any<br>
other suitable method of obtaining a set of calibration<br>
measurements can be used.<br>
The multiple field projection measurements, each<br>
associated with a known location of the calibrating<br>
sensor, are used to derive three rotation-invariant<br>
coordinate correcting functions. The correcting functions<br>
will later be applied during normal system operation. The<br>
functions accept as input a set of raw field<br>
measurements, as measured by position sensor 52. These<br>
24<br>
 <br>
raw measurements may be distorted due to the presence of<br>
field-distorting objects. The three functions produce<br>
three respective corrected location coordinates of<br>
position sensor 52 with respect to location pad 40. In<br>
some embodiments, the correcting functions compensate for<br>
distortion from field-distorting objects, as well as for<br>
errors due to the fact that the tracking fields generated<br>
by coils 44 deviate from ideal dipole fields. Modeling<br>
the tracking fields as dipole fields is, however, not<br>
mandatory.<br>
In some embodiments, the coordinate correcting<br>
functions are determined using a fitting process. The<br>
fitting process determines the functions that best fit<br>
the location coordinates measured during calibration step<br>
100 above to the known location coordinates of the<br>
calibrating sensor. Any suitable fitting method known in<br>
the art can be used for this purpose, such as, for<br>
example, polynomial regression methods.<br>
Thus, the fitting process effectively causes the<br>
coordinate correcting functions to adjust the relative<br>
contribution of each raw location coordinate to the<br>
corrected location coordinate responsively to the level<br>
of distortion contained in the raw measurements. Raw<br>
location coordinates having low distortion content are<br>
likely to be emphasized, or given more weight, by the<br>
fitting process. Raw location coordinates having high<br>
distortion content are likely to be given less weight, or<br>
even ignored.<br>
25<br>
 <br>
The coordinate correcting functions can thus be<br>
viewed as transforming the raw field measurements into a<br>
sub-space that is as invariant as possible to the<br>
distortion. Since the fitting process takes into<br>
consideration the bulk of calibration measurements, the<br>
sub-space is invariant to the distortion caused in<br>
different field-distorting object geometries.<br>
In some embodiments, the coordinate correcting<br>
function can disregard field measurements associated with<br>
one or more distortion-contributing system elements that<br>
contribute a significant amount of distortion to the<br>
calculation. Distortion-contributing elements may<br>
comprise field generating coils 44, field sensing coils<br>
60 and/or pairs of {coil 44, coil 60} . In these<br>
embodiments, the function may ignore the measurements<br>
related to the distortion-contributing elements, for<br>
example by setting appropriate coefficients of the<br>
coordinate correcting function to zero or otherwise<br>
shaping the function to be insensitive to these elements.<br>
In some embodiments, the distortion-contributing elements<br>
can be switched off or otherwise deactivated.<br>
The raw location coordinates are expressed as three<br>
vectors denoted rtc, wherein tc=1...3 indicates an index of<br>
the  tri-coil  42  used in the measurement.  Vector  rtc<br>
comprises three location coordinates {xtc,Ytc,Ztc}<br>
indicating the location coordinates of the position<br>
sensor, as calculated responsively to the tracking fields<br>
generated by tri-coil tc. By convention, rtc is expressed<br>
relative to a reference frame of location pad 40. An<br>
26<br>
 <br>
exemplary  mathematical  procedure  for  calculating  rtc<br>
based on the measured field strengths, assuming an ideal<br>
dipole field, is given in step 102 further below.<br>
In some embodiments, the three coordinate correcting<br>
functions comprise polynomial functions. In the<br>
description that follows, each function comprises a<br>
third-order polynomial of the location coordinates that<br>
does not contain any cross-terms (i.e., the polynomial<br>
may contain x, x2,x3,y, y2,y3,z, z2  and z3  terms but<br>
not, for example, xy2 , xyz or y2 z terms) . The input to<br>
the coordinate correcting functions can thus be expressed<br>
as a 28-dimensional vector denoted In, which is defined<br>
as	In={l,r1,r2,r3,r12 ,r22 ,r32 ,r13 ,r23 ,r33 }<br>
= {l,Xl,y1,Zl,X2,y2,Z2,X3,Y3,Z3,Xl2 'Yl2 Zl2 X22 Y22 Z22 X32 Y<br>
32  ,z32  ,x13  Y13   ,z13   ,x23  ,Y23  Z23  X33  'Y33  'Z33  )        wherein        the<br>
first "1" term serves as an offset. The three coordinate<br>
correcting functions have the form<br>
 <br>
wherein  xcor  yCOR and zcor  respectively  denote  the<br>
distortion-corrected x, y and z location coordinates of<br>
position sensor 52,  with respect to location pad 40.<br>
Coefficients  a...a28,  b1-b28  and  71-728  denote  the<br>
27<br>
 <br>
coefficients of the polynomial functions. In the present<br>
example, The fitting process described above comprises<br>
fitting the values of the polynomial coefficients.<br>
The three sets of coefficients can be arranged in a<br>
coefficient matrix denoted Lcoeff, defined as<br>
 <br>
Using this representation, the corrected location<br>
coordinates of the position sensor are given by<br>
[3] rcor = {xcor' Ycor' zcor' = In Lcoeff<br>
In order to further clarify the effectiveness of the<br>
coordinate correcting functions, consider a particular<br>
location of the calibration sensor. During the<br>
calibration process of step 100, multiple field strength<br>
measurements are performed at this particular location,<br>
both in free space and in the presence of distortion from<br>
different field-distorting objects, as expected to occur<br>
during the normal operation of the system. The coordinate<br>
correcting functions replace these multiple measurements<br>
with a single corrected value, which best fits the known<br>
location coordinate of the calibrating sensor.<br>
The coordinate correcting functions effectively<br>
exploit the redundant information contained in the 27 raw<br>
location measurements to improve distortion immunity. For<br>
example, since the intensity of a magnetic field decays<br>
rapidly   with   distance   {proportionally   to   1/r3 ),<br>
measurements  performed  using  a  tri-coil  42  that  is<br>
28<br>
 <br>
further away from the field-distorting object will<br>
typically produce measurements containing less<br>
distortion. In such cases, the fitting process will<br>
typically give a higher weight to the measurements<br>
associated  with  this  lower  distortion  tri-coil  when<br>
calculating coefficients a1, bi and gi of the coordinate<br>
correcting functions.<br>
As another example, in many cases, the field<br>
distortion is highly sensitive to the angle in which of<br>
the magnetic field impinges on the field-distorting<br>
object. Since the three field generating coils 44 in each<br>
tri-coil 42 are mutually-orthogonal, there will typically<br>
exist at least one coil 44 whose tracking field generates<br>
little or no distortion. Again, the fitting process used<br>
to calculate coefficients OCI, Bi and gi will typically<br>
give a higher weight to the measurements associated with<br>
this lower distortion coil 44.<br>
In summary, calibration step 100 comprises mapping<br>
the working volume around location pad 40, followed by<br>
derivation of coordinate correcting functions that will<br>
later on translate measured raw location coordinates to<br>
distortion-corrected location coordinates of position<br>
sensor 52.<br>
Steps 102-110 below are. carried out by tracking<br>
processor 48 during the normal operation of system 20,<br>
whenever a position tracking measurement is desired.<br>
Processor 48 calculates the rotation-invariant location<br>
coordinates rtc (also referred to as the raw location<br>
29<br>
 <br>
coordinates), at an invariant calculation step 102. As<br>
noted above, the calculation that follows assumes that<br>
the tracking fields generated by coils 44 are ideal<br>
dipole fields.<br>
For each tri-coil 42 having an index tc=1...3,<br>
processor 48 calculates a field intensity matrix denoted<br>
MtM, which is defined as<br>
 <br>
wherein Utc is a 3-by-3 matrix containing the field<br>
strengths of the tracking fields generated by the three<br>
field generating coils 44 of tri-coil tc, as measured by<br>
the three field sensing coils 60 of position sensor 52.<br>
Each matrix element (Utc)ij denotes the field strength<br>
generated by the jth field generating coil 44 in tri-coil<br>
tc, as sensed by the i  field sensing coil 60 of sensor<br>
52. Matrix Mtc is a 3-by-3 matrix comprising the inverse<br>
of the magnetic moment matrix of tri-coil tc. The<br>
operator ()  denotes matrix transposition.<br>
Processor 48 now calculates |r| , which denotes the<br>
radius-vector, or magnitude, of location vector rtC |r|<br>
 <br>
The direction of vector rtc is approximated by the<br>
direction of the eigenvector of matrix MtM corresponding<br>
to the largest eigenvalue. In order to determine this<br>
eigenvector,  processor  48  applies  a  singular  value<br>
30<br>
 <br>
decomposition (SVD) process, as is known in the art, to<br>
matrix MtM:<br>
[5]  [U,W, ut] = SVD(MtM)<br>
wherein u denotes the eigenvectors and w denotes the<br>
eigenvalues of matrix MtM.<br>
Let u (1) denote the eigenvector corresponding to the<br>
largest eigenvalue. In order to resolve ambiguity, the z-<br>
axis component of u(l) (by convention, the third<br>
component of the eigenvector) is forced to be positive by<br>
selecting the mirror image of the vector u(l) if<br>
necessary. In other words, IF u (1).{0,0,l}
u(1) . Finally, the raw location coordinate vector rtc is<br>
estimated by<br>
[6]  rtc = ||r||  u(1) + ctc<br>
wherein ctc denotes the location coordinate vector of<br>
tri-coil tc in the coordinate system of location pad 40.<br>
Tracking processor 48 typically repeats the process<br>
of step 102 for all three tri-coils 42 of pad 40. The<br>
output of step 102 is three vectors rtc tc=1...3, giving<br>
the raw location coordinates of position sensor 52<br>
relative to tri-coils 42. As noted above, the raw<br>
location coordinates are uncorrected and may contain<br>
distortion caused by field-distorting objects.<br>
Processor 48 now calculates the distortion-corrected<br>
location  coordinates  of  sensor  52,  at  a  corrected<br>
coordinate calculation step 104. Processor 48 uses the<br>
coordinate correcting functions calculated at calibration<br>
31<br>
 <br>
step  100  above  for  this  purpose.  In  the exemplary<br>
embodiment  described  above,  in  which  the functions<br>
comprise third-order polynomials,  the three coordinate<br>
correcting functions are expressed in terms  of matrix<br>
Lcoeff,  as  defined  in  equation  [2]  above.  In  this<br>
embodiment, vector rcor denoting the distortion-corrected<br>
location coordinates of sensor 52 is given by<br>
[7]  rcor = In • Lcoeff<br>
wherein In denotes the input vector of raw location<br>
coordinates and their exponents, as described above. In<br>
alternative embodiments,  vector rcor is calculated by<br>
applying the coordinate correction functions to the<br>
measured raw location coordinates.<br>
In some embodiments, tracking processor 48 applies a<br>
clustering process to the location measurements, at a<br>
clustering step 106. The accuracy of the coordinate<br>
correcting functions can often be improved by dividing<br>
the working volume into two or more sub-volumes, referred<br>
to . as clusters, and defining different coordinate<br>
correcting functions for each cluster.<br>
Let N denote the number of clusters. In embodiments<br>
in  which  the  coordinate  correcting  functions  are<br>
expressed in terms of matrix Lcoeff, for example,<br>
processor 48 calculates for each cluster c (c=l...N) a<br>
cluster coefficient matrix denoted LCoeff-c at calibration<br>
step 100 above. At step 104 above, processor 48<br>
determines the cluster to which each raw location<br>
coordinate   measurement   belongs,   and   applies   the<br>
32<br>
 <br>
appropriate cluster coefficient matrix to produce the<br>
distortion-corrected location coordinates.<br>
In some embodiments, the transitions between<br>
neighboring clusters are smoothed using a weighting<br>
function. In these embodiments, a prototype coordinate<br>
denoted pc is defined for each cluster c, typically<br>
located in the center of the cluster. Processor 48<br>
calculates a weighted corrected coordinate denoted rw by<br>
summing the corrected location coordinates calculated<br>
using the coordinate correcting functions of each<br>
cluster, weighted by the distance of the raw coordinate r<br>
from the prototype coordinate pc of the cluster:<br>
 <br>
wherein a and t are constants used to appropriately shape<br>
the weighting function.<br>
In some embodiments, processor 48 verifies that the<br>
raw location coordinate being processed is indeed located<br>
inside the working volume mapped at step 100 above. This<br>
validity check is sometimes desirable in order to ensure<br>
that the coordinate correcting functions being used are<br>
indeed valid for the coordinate in question. In some<br>
embodiments, if the raw location coordinate is found to<br>
be  outside  the  mapped  working  volume,  processor  4 8<br>
33<br>
 <br>
notifies the physician of the situation, such as by<br>
displaying the coordinate using a different color or icon<br>
or by presenting an alert message. In some embodiments,<br>
the raw coordinate is displayed without applying<br>
correction. Alternatively, the measurement may be<br>
discarded.<br>
For example, in some embodiments, processor 48<br>
produces a validity matrix denoted V during calibration<br>
step 100. Matrix V comprises a three-dimensional bit<br>
matrix, in which each bit corresponds to a three-<br>
dimensional voxel (i.e., a unit volume, the three-<br>
dimensional equivalent of a pixel) in the working volume<br>
having a resolution denoted d. Each bit of matrix V is<br>
set if the corresponding voxel coordinate is within the<br>
mapped working volume, otherwise the bit is reset.<br>
In order to preserve memory space, matrix V can be<br>
represented as a two-dimensional array of 32-bit words.<br>
The two indices of the array correspond to the x and y<br>
coordinates of the voxel, and each bit in the indexed 32-<br>
bit word corresponds to the z-axis coordinate of the<br>
voxel. The following pseudo-code shows an exemplary<br>
method for indexing matrix V in order to verify whether a<br>
coordinate {x,y,zj is located within the valid working<br>
volume:<br>
{xlnx,ylnx,zlnxj = round[ ({x,y,z}-{xo,yo,zo})/d] ;<br>
xlnx = Max [MinX,Min [MaxX,xInx] ;<br>
ylnx = Max[MinY,Min [MaxY,xIny] ;<br>
zlnx = Max[MinZ,Min[MaxZ,xInz];<br>
valid = bitSet[V (xlnx,ylnx),zlnx];<br>
34<br>
 <br>
wherein roundfx] denotes the integer closest to x, and<br>
{xoryo,zo} denote the corner coordinates of the mapped<br>
working volume. {xlnx,ylnx,zlnx} denote indices to matrix<br>
V. MinX, MaxX, MinY, MaxY, MinZ, MaxZ denote range limits<br>
of the x, y and z coordinates, respectively. If the<br>
extracted valid bit is set, processor 48 concludes that<br>
coordinate {x,y,z} is located within the mapped working<br>
volume, and vice versa.<br>
In some embodiments, two or more validity matrices<br>
may be defined. For example, the boundary, or outskirts,<br>
of the working volume may be mapped separately and<br>
defined using a second validity matrix.<br>
At this stage, processor 48 has calculated a<br>
distortion-corrected location coordinate of position<br>
sensor 52, typically expressed as a three-dimensional<br>
coordinate. In order to obtain the complete six-<br>
dimensional coordinate of the position sensor, processor<br>
48 now calculates the angular orientation coordinates of<br>
the position sensor, at an orientation calculation step<br>
108.<br>
In some embodiments, the orientation coordinates are<br>
calculated using the relation<br>
Mtc = R  Btc<br>
wherein Mtc denotes the inverse moment matrix described<br>
above, R denotes a rotation matrix representing the<br>
angular orientation of sensor 52 with respect to the<br>
coordinate system of location pad 40, and Btc denotes the<br>
measured magnetic field at coils 60 of sensor 52.<br>
35<br>
 <br>
 <br>
The measurements of Btc may contain distortion from<br>
field-distorting objects, which may in turn affect the<br>
estimation accuracy of matrix R. The estimation accuracy<br>
may be improved by applying a symmetrical decomposition<br>
 <br>
 <br>
process to R2. For example, let R2  = Rt R. Processor 48<br>
applies a SVD process to R2 :<br>
Processor  48   calculates  an  improved  accuracy<br>
rotation matrix denoted %, which is given by:<br>
[13] R = R-S-1<br>
Having calculated the distortion-corrected location<br>
and orientation coordinates, processor 4 8 now has the<br>
full six-dimensional coordinates of position sensor 52.<br>
36<br>
 <br>
Until now it was assumed that field sensing coils 60<br>
of position sensor 52 are concentric, i.e., have<br>
identical location coordinates. In some cases, however,<br>
sensor 52 is constructed so that coils 60 are not<br>
concentric. This non-concentricity introduces an<br>
additional inaccuracy into the distortion-corrected<br>
coordinates. In some embodiments, tracking processor 48<br>
compensates for the inaccuracies caused by the non-<br>
concentricity of the field sensing coils, at a non-<br>
concentricity compensation step 110.<br>
For example, processor 48 may apply an iterative<br>
compensation process to compensate for such inaccuracies.<br>
Consider the tracking field denoted MEtcco, which is<br>
generated by a coil co of tri-coil tc and measured by a'<br>
non-concentric position sensor 52. Let vector r denote<br>
the location coordinate of one of coils 60 of the sensor,<br>
used as a reference coordinate, with respect to tri-coil<br>
tc.  Let rc1  and rc2  denote two vectors defining the<br>
location offsets of the other two field sensing coils<br>
with respect to the first (reference) coil. The tracking<br>
field generated by coil co of tri-coil tc in sensor 52 is<br>
given by:<br>
 <br>
wherein the second line of the field vector corresponds<br>
to the reference coil. % denotes the improved accuracy<br>
rotation matrix defined by equation [13] above.<br>
37<br>
 <br>
Processor 48 improves the estimation of MEtc co by<br>
iteratively  repeating  steps  104-108  above.  At  each<br>
iteration step i+1, the measured field is given by<br>
 <br>
In some embodiments, processor 48 performs a<br>
predetermined number of iteration steps. Alternatively, a<br>
convergence threshold th is defined, and the iterative<br>
process is repeated until<br>
[16]<br>
 <br>
DISTORTION REDUCTION METHOD USING DIRECTIONAL SELECTION<br>
As noted above, in some cases the distortion<br>
introduced into a particular field strength measurement<br>
is highly dependent on the mutual location and/or<br>
orientation of the field generating coil used, the field<br>
sensing coil used and the field-distorting object causing<br>
the distortion. Therefore, when redundant field<br>
measurements are performed using multiple field<br>
generating coils 44 and field sensing coils 60 having<br>
different locations and orientations, it is often<br>
possible to identify one or more coil 44 and/or coil 60<br>
that are dominant contributors of distortion. Discarding<br>
the measurements related to these distortion-contributing<br>
38<br>
 <br>
system elements may significantly reduce the total amount<br>
of distortion in the position calculation.<br>
Fig 5 is a flow chart that schematically<br>
illustrates a method for position tracking in the<br>
presence of field distortion, based on recognizing and<br>
eliminating distortion-contributing elements, in<br>
accordance with another embodiment of the present<br>
invention. The method of Fig. 5 refers to a single<br>
position tracking calculation, at a single position of<br>
catheter 24 in the patient's body. This method can be<br>
applied, of course, at multiple positions distributed<br>
throughout the working volume of a position tracking<br>
system.<br>
The method begins with system 20 performing<br>
redundant field measurements, at a measurement step 120.<br>
Typically, multiple field strength measurements are taken<br>
using different pairs of {field generating coil 44, field<br>
sensing coil 60}. As noted above, the exemplary system<br>
configuration of Figs. 1 and 2 comprises a total of 27<br>
coil pairs, resulting in a maximum number of 27 redundant<br>
field measurements.<br>
Tracking processor 48 now identifies one or more<br>
distortion-contributing measurements out of the redundant<br>
field measurements, at an identification step 122. The<br>
distortion-contributing measurements are characterized by<br>
a high level of distortion. In some embodiments,<br>
processor 48 may automatically detect and quantify the<br>
level of distortion in the redundant field measurements.<br>
Any suitable method may be used for this purpose, such<br>
39<br>
 <br>
as, for example, methods described in U.S. Patent<br>
6,147,480 cited above. Using the distortion-contributing<br>
measurements, processor 48 identifies one or more<br>
distortion-contributing system elements, which may<br>
comprise field generating coils 44, field sensing coils<br>
60 and/or pairs of {coil 44, coil 60} that are associated<br>
with the distortion-contributing measurements.<br>
Additionally or alternatively, the characteristic<br>
direction of the distortion may be indicated to processor<br>
48 a-priori. In some cases, the known direction of<br>
distortion indicates to the processor which of coils 44<br>
and/or coils 60 is particularly susceptible to the<br>
distortion, and is therefore likely to comprise a<br>
distortion-contributing element. Further alternatively,<br>
the identity of a particular coil 44, coil 60 and/or pair<br>
{coil 44, coil 60} that produces (or is likely to<br>
produce) distortion-contributing measurements can be<br>
indicated to the processor a-priori.<br>
Tracking processor 4 8 calculates the position<br>
coordinates of position sensor 52 (and of catheter 24)<br>
while disregarding the measurements associated with the<br>
distortion-contributing elements, at a position<br>
calculation step 124. In some embodiments, the<br>
measurements associated with a distortion-contributing<br>
element are ignored or discarded from the position<br>
calculation. Alternatively, a particular distortion-<br>
contributing element can be switched off or otherwise<br>
deactivated.<br>
40<br>
 <br>
Processor 48 may use any suitable position tracking<br>
method for calculating the position of sensor 52 (and of<br>
catheter 24) in conjunction with the method of Fig. 5,<br>
such as the method of Fig. 4 hereinabove, as well as<br>
methods described in some of the publications cited<br>
above.<br>
In some embodiments, the method shown in Fig. 5<br>
above can be similarly used in system configurations in<br>
which the tracking fields are generated by catheter 24<br>
and sensed by externally-located position sensors. In<br>
these embodiments, signal generator 4 6 produces drive<br>
signals that drive the field generators in catheter 24 to<br>
produce the tracking fields. The external position<br>
sensors sense the tracking fields. The sensed fields are<br>
then used, in accordance with the appropriate method, to<br>
determine a distortion-free position of catheter 24.<br>
Although the embodiments described herein mainly<br>
refer to improving the distortion immunity of medical<br>
position tracking and steering systems, these methods and<br>
systems can be used in additional applications, such as<br>
for reducing the distortion caused by the operating room<br>
table, fluoroscopy equipment, MRI equipment and/or any<br>
other field-distorting object.<br>
It will thus be appreciated that the embodiments<br>
described above are cited by way of example, and that the<br>
present invention is not limited to what has been<br>
particularly shown and described hereinabove. Rather, the<br>
scope of the present invention includes both combinations<br>
and sub-combinations of the various features described<br>
41<br>
 <br>
hereinabove, as well as variations and modifications<br>
thereof which would occur to persons skilled in the art<br>
upon reading the foregoing description and which are not<br>
disclosed in the prior art.<br>
42<br>
 <br>
CLAIMS<br>
1.	A method for tracking a position of an object,<br>
comprising:<br>
using a field sensor associated with the object to<br>
measure field strengths of magnetic fields generated by<br>
two or more field generators, wherein a measurement of at<br>
least one of the field strengths is subject to a<br>
distortion;<br>
calculating rotation-invariant location coordinates<br>
of the object responsively to the measured field<br>
strengths; and<br>
determining corrected location coordinates of the<br>
object by applying to the rotation-invariant location<br>
coordinates a coordinate correcting function so as to<br>
adjust a relative contribution of each of the measured<br>
field strengths to the corrected location coordinates<br>
responsively to the distortion in the measured field<br>
strengths.<br>
2.	The method according to claim 1,  and comprising<br>
inserting the object into an organ of a patient, wherein<br>
determining the corrected location coordinates of the<br>
object comprises tracking the position of the object<br>
inside the organ.<br>
3.	The  method  according  to  claim  1,  wherein  the<br>
distortion  is  caused  by  a  field-distorting  object<br>
subjected to at  least  some  of  the magnetic  fields,<br>
wherein  the  object  comprises  at  least  one  material<br>
selected   from   a   group   consisting   of   metallic,<br>
paramagnetic and ferromagnetic materials.<br>
43<br>
 <br>
4.	The method according to claim 1,  and comprising<br>
performing  calibration  measurements  of  the  magnetic<br>
fields at respective known coordinates relative to the<br>
two or more field generators, and deriving the coordinate<br>
correcting  function  responsively  to  the  calibration<br>
measurements.<br>
5.	The  method  according  to  claim  4,  wherein  the<br>
distortion  is  caused  by  a  movable  field-distorting<br>
object,   and   wherein   performing   the   calibration<br>
measurements  comprises performing the measurements  at<br>
different locations of the field-distorting object.<br>
6.	The method according to claim 4, wherein deriving<br>
the coordinate correcting function comprises applying a<br>
fitting  process  to  a  dependence  of  the  calibration<br>
measurements on the known coordinates.<br>
7.	The method according to claim 1, wherein applying<br>
the coordinate correcting function comprises applying a<br>
polynomial   function  having  coefficients  comprising<br>
exponents  of at least  some of the  rotation-invariant<br>
location coordinates.<br>
8.	The method according to claim 1, wherein applying<br>
the coordinate correcting function comprises identifying<br>
a  distortion-contributing  element  responsively  to the<br>
measured field strengths,  and producing the coordinate<br>
correcting function so as to disregard the measured field<br>
44<br>
 <br>
strengths  that  are  associated  with  the  distortion-<br>
contributing element.<br>
9.	The method according to claim 8, wherein the field<br>
sensor comprises one or more field sensing elements, and<br>
wherein identifying the distortion-contributing element<br>
comprises determining that one or more of the field<br>
sensing   elements   and  the   field  generators   are<br>
contributing to the distortion.<br>
10.	The method according to claim 1,  and comprising<br>
calculating  angular  orientation  coordinates  of  the<br>
object.<br>
11.	The method according to claim 1, wherein the field<br>
sensor is used within a working volume associated with<br>
the two or more field generators, and wherein determining<br>
the corrected location coordinates comprises:<br>
dividing the working volume into two or more<br>
clusters;<br>
defining for each of the two or more clusters<br>
respective two or more cluster coordinate correcting<br>
functions; and<br>
applying to each of the rotation-invariant location<br>
coordinates one of the cluster coordinate correcting<br>
functions responsively to a cluster in which the<br>
rotation-invariant location coordinate falls.<br>
12.'  The method according to claim 11, wherein applying<br>
the  cluster  coordinate  correcting  functions  comprises<br>
45<br>
 <br>
applying  a  weighting  function  so  as  to  smoothen  a<br>
transition between neighboring clusters.<br>
13.	The method according to claim 1,  and comprising<br>
measuring the field strengths using two or more field<br>
sensors having non-concentric locations, and compensating<br>
for inaccuracies caused by the non-concentric locations<br>
in the corrected location coordinates.<br>
14.	A method for tracking a position of an object,<br>
comprising:<br>
using a field sensor associated with the object to<br>
perform measurements of field strengths of magnetic<br>
fields generated by two or more field generators so as to<br>
provide redundant location information, wherein at least<br>
some of the field strength measurements are subject to a<br>
distortion; and<br>
determining location coordinates of the object<br>
relative to the two or more field generators by applying<br>
to the measurements a coordinate correcting function that<br>
exploits the redundant location information so as to<br>
reduce an impact of the distortion on the location<br>
coordinates.<br>
15.	A method  for tracking a position of an object,<br>
comprising:<br>
using a field sensor, which comprises one or more<br>
field sensing elements associated with the object, to<br>
measure field strengths of magnetic fields generated by<br>
two or more field generators, wherein a measurement of at<br>
46<br>
 <br>
least one of the field strengths is subject to a<br>
distortion;<br>
identifying, responsively to the measured field<br>
strengths, at least one distortion-contributing system<br>
element, which is selected from a group consisting of the<br>
one or more field sensing elements and of the two or more<br>
field generators; and<br>
determining the position of the object relative to<br>
the two or more field generators responsively to the<br>
measured field strengths while disregarding field<br>
measurements associated with the distortion-contributing<br>
system element.<br>
16.	The method according to claim 15,  and comprising<br>
inserting the object into an organ of a patient, wherein<br>
determining the position of the object comprises tracking<br>
the position of the object inside the organ.<br>
17.	The method according to claim 16, wherein the two or<br>
more field generators are associated with the object, and<br>
wherein the field sensor is located externally to the<br>
organ.<br>
18.	The  method  according  to  claim  15,   wherein<br>
identifying the distortion-contributing  system element<br>
comprises accepting an a-priori indication selected from<br>
a group consisting of a characteristic direction of the<br>
distortion and an identity of the distortion-contributing<br>
system element.<br>
47<br>
 <br>
19.	The   method   according   to   claim   15,   wherein<br>
identifying  the  distortion-contributing  system element<br>
comprises sensing a presence of the distortion in the<br>
field  measurements  associated  with  the  distortion-<br>
contributing system element.<br>
20.	The  method  according  to  claim  15,  wherein  the<br>
distortion-contributing system element comprises a pair<br>
of one of the field sensing elements and one of the field<br>
generators.<br>
21.	The   method   according   to   claim   15,   wherein<br>
disregarding the field measurements associated with the<br>
distortion-contributing    system    element    comprises<br>
deactivating the distortion-contributing system element.<br>
22.	A system for tracking a position of an object,<br>
comprising:<br>
two or more field generators, which are arranged to<br>
generate respective magnetic fields in a vicinity of the<br>
object;<br>
a field sensor associated with the object, which is<br>
arranged to measure field, strengths of the magnetic<br>
fields, wherein a measurement of at least one of the<br>
field strengths is subject to a distortion; and<br>
a processor, which is arranged to calculate<br>
rotation-invariant location coordinates of the object<br>
responsively to the measured field strengths, and to<br>
determine corrected location coordinates of the object by<br>
applying to the rotation-invariant location coordinates a<br>
coordinate correcting function so as to adjust a relative<br>
48<br>
 <br>
contribution of each of the measured field strengths to<br>
the corrected location coordinates responsively to the<br>
distortion in the measured field strengths.<br>
23.	The system according to claim 22, wherein the object<br>
is adapted to be inserted into an organ of a patient, and<br>
wherein the processor is arranged to track the position<br>
of the object inside the organ.<br>
24.	The  system  according  to  claim  22,  wherein  the<br>
distortion  is  caused  by  a  field-distorting  object<br>
subjected  to  at  least  some  of  the  magnetic  fields,<br>
wherein  the  object  comprises  at  least  one  material<br>
selected   from   a   group   consisting   of   metallic,<br>
paramagnetic and ferromagnetic materials.<br>
25.	The  system  according  to  claim  22,  wherein  the<br>
coordinate   correcting   function   is   determined  by<br>
performing  calibration  measurements  of  the  magnetic<br>
fields at respective known coordinates relative to the<br>
two or more field generators, and deriving the coordinate<br>
correcting  function  responsively  to  the  calibration<br>
measurements.<br>
26.	The  system  according  to  claim  25,  wherein  the<br>
distortion  is  caused  by  a  movable  field-distorting<br>
object, and wherein the calibration measurements comprise<br>
measurements taken at different locations of the field-<br>
distorting object.<br>
49<br>
 <br>
27.	The  system  according  to  claim  25,  wherein  the<br>
processor is arranged to apply a fitting process to a<br>
dependence of the calibration measurements on the known<br>
coordinates, so as to derive the coordinate correcting<br>
function.<br>
28.	The  system  according  to  claim  22,  wherein  the<br>
coordinate  correcting  function comprises  a polynomial<br>
function having coefficients comprising exponents of at<br>
least   some   of   the   rotation-invariant   location<br>
coordinates.<br>
29.	The  system  according  to  claim  22,  wherein  the<br>
processor  is  arranged  to  identify  a  distortion-<br>
contributing element responsively to the measured field<br>
strengths,  and  to  produce  the  coordinate  correcting<br>
function so as to disregard the measured field strengths<br>
that  are  associated  with  the  distortion^contributing<br>
element.<br>
30.	The system according to claim 29, wherein the field<br>
sensor comprises one or more field sensing elements, and<br>
wherein the processor is arranged to identify that at<br>
least one element selected from a group consisting of the<br>
field  sensing  elements  and  the  field  generators  is<br>
contributing to the distortion, so as to identify the<br>
distortion-contributing system element.<br>
50<br>
 <br>
31.	The  system  according  to  claim  22,  wherein  the<br>
processor  is  further  arranged  to  calculate  angular<br>
orientation coordinates of the object.<br>
32.	The system according to claim 22, wherein the field<br>
sensor is used within a working volume associated with<br>
the  two  or  more  field  generators,  and  wherein  the<br>
processor is arranged to divide the working volume into<br>
two or more clusters, to define for each of the two or<br>
more clusters respective two or more cluster coordinate<br>
correcting  functions,  and  to  apply  to  each  of  the<br>
rotation-invariant  location  coordinates  one  of  the<br>
cluster coordinate correcting functions responsively to a<br>
cluster   in  which   the   rotation-invariant   location<br>
coordinate falls.<br>
33.	The  system  according  to  claim  32,  wherein  the<br>
processor  is  further  arranged  to  apply  a  weighting<br>
function  so  as  to  smoothen  a  transition  between<br>
neighboring clusters.<br>
34.	The system according to claim 22, and comprising two<br>
or more field sensors having non-concentric locations,<br>
wherein the processor  is  arranged to compensate  for<br>
inaccuracies caused by the non-concentric locations in<br>
the corrected location coordinates.<br>
35.	A system for tracking a position of an object,<br>
comprising:<br>
51<br>
 <br>
two or more field generators, which are arranged to<br>
generate respective magnetic fields in a vicinity of the<br>
object;<br>
a field sensor associated with the object, which is<br>
arranged to perform measurements of field strengths of<br>
the magnetic fields so as to provide redundant location<br>
information, wherein at least some of the field strength<br>
measurements are subject to a distortion; and<br>
a processor, which is arranged to determine location<br>
coordinates of the object relative to the two or more<br>
field generators by applying to the measurements a<br>
coordinate correcting function that exploits the<br>
redundant location information so as to reduce an impact<br>
of the distortion on the location coordinates.<br>
36. A system for tracking a position of an object,<br>
comprising:<br>
two or more field generators, which are arranged to<br>
generate respective magnetic fields in a vicinity of the<br>
object;<br>
a field sensor, which is associated with the object<br>
and comprises one or more field sensing elements, which<br>
is arranged to measure field strengths of the magnetic<br>
fields, wherein a measurement of at least one of the<br>
field strengths is subject to a distortion; and<br>
a processor, which is arranged to identify<br>
responsively to the measured field strengths a<br>
distortion-contributing system element, which is selected<br>
from a group consisting of the one or more field sensing<br>
elements and the two or more field generators, and to<br>
determine the position of the object relative to the two<br>
or  more  field  generators  while  disregarding  field<br>
52<br>
 <br>
measurements associated with the distortion-contributing<br>
system element.<br>
37.	The system according to claim 36, wherein the object<br>
is adapted to be inserted into an organ of a patient, and<br>
wherein the processor is arranged to track the position<br>
of the object inside the organ.<br>
38.	The system according to claim 36, wherein the two or<br>
more field generators are associated with the object, and<br>
wherein the field sensor is located externally to the<br>
organ.<br>
39.	The  system  according  to  claim  36,  wherein  the<br>
processor is arranged to accept an a-priori indication<br>
selected from a group consisting of a characteristic<br>
direction  of  the  distortion and an  identity of the<br>
distortion-contributing system element.<br>
40.	The  system according  to  claim  36,  wherein  the<br>
processor  is  arranged  to  identify  the  distortion-<br>
contributing system element by sensing a presence of the<br>
distortion in the field measurements associated with the<br>
distortion-contributing system element.<br>
41.	The  system  according  to  claim  36,  wherein  the<br>
distortion-contributing system element comprises a pair<br>
of one of the field sensing elements and one of the field<br>
generators.<br>
53<br>
 <br>
42.	The  system  according  to  claim  36,  wherein  the<br>
processor  is  arranged  to  deactivate  the  distortion-<br>
contributing system element.<br>
43.	A computer software product used in a system for<br>
tracking a position of an object, the product comprising<br>
a computer-readable medium, in which program instructions<br>
are  stored,  which  instructions,  when  read  by  the<br>
computer, cause the computer to control two or more field<br>
generators  so  as  to  generate magnetic  fields  in  a<br>
vicinity of the object, to accept measurements of field<br>
strengths of the magnetic fields performed by a field<br>
sensor associated with the object, wherein a measurement<br>
of at least one of the field strengths is subject to a<br>
distortion,  to  calculate  rotation-invariant  location<br>
coordinates of the object responsively to the measured<br>
field strengths,  and to determine  corrected location<br>
coordinates of the object by applying to the rotation-<br>
invariant location coordinates a coordinate correcting<br>
function so as to adjust a relative contribution of each<br>
of the measured field strengths to the corrected location<br>
coordinates  responsively  to  the  distortion  in  the<br>
measured field strengths.<br>
44.	A computer software product used in a system for<br>
tracking a position of an object, the product comprising<br>
a computer-readable medium, in which program instructions<br>
are  stored,  which  instructions,  when  read  by  the<br>
computer, cause the computer to control two or more field<br>
generators  so  as  to  generate  magnetic  fields  in  a<br>
vicinity of the object, to accept measurements of field<br>
54<br>
 <br>
strengths of the magnetic fields performed by a field<br>
sensor associated with the object, the measurements<br>
comprising redundant location information, wherein at<br>
least some of the measurements are subject to a<br>
distortion, and to determine location coordinates of the<br>
object relative to the two or more field generators by<br>
applying to the measurements a coordinate correcting<br>
function that exploits the redundant location information<br>
so as to reduce an impact of the distortion on the<br>
location coordinates.<br>
45. A computer software product used in a system for<br>
tracking a position of an object, the product comprising<br>
a computer-readable medium, in which program instructions<br>
are stored, which instructions, when read by the<br>
computer, cause the computer to control two or more field<br>
generators. so as to generate magnetic fields in a<br>
vicinity of the object, to accept measurements of field<br>
strengths of the magnetic fields performed by a field<br>
sensor, which is associated with the object and comprises<br>
one or more field sensing elements, wherein a measurement<br>
of at least one of the field strengths is subject to a<br>
distortion, to identify responsively to the measured<br>
field strengths a distortion-contributing system element,<br>
which is selected from a group consisting of the two or<br>
more field generators and the one or more field sensing<br>
elements, and to determine the position of the object<br>
relative to the two or more field generators while<br>
disregarding field measurements associated with the<br>
distortion-contributing system element.<br>
 <br>
A method for tracking a position of an object<br>
includes using a field sensor associated with the object<br>
to measure field strengths of magnetic fields generated<br>
by two or more field generators, wherein a measurement of<br>
at least one of the field strengths is subject to a<br>
distortion. Rotation-invariant location coordinates of<br>
the object are calculated responsively to the measured<br>
field strengths. Corrected location coordinates of the<br>
object are determined by applying to the rotation-<br>
invariant location coordinates a coordinate correcting<br>
function so as to adjust a relative contribution of each<br>
of the measured field strengths to the corrected location<br>
coordinates responsively to the distortion in the<br>
measured field strengths.</td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=H1Yum7ZtVhn//bVnMZb3dg==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==" target="_blank" style="word-wrap:break-word;">http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=H1Yum7ZtVhn//bVnMZb3dg==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==</a></p>
		<br>
		<div class="pull-left">
			<a href="279396-adjuvant-compositions-comprising-a-non-ionic-isotonicity-agent.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="279398-effect-pigments-based-on-artificially-produced-substrates-with-a-narrow-size-distribution.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>279397</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>974/KOL/2007</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>04/2017</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>27-Jan-2017</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>19-Jan-2017</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>09-Jul-2007</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>BIOSENSE WEBSTER, INC.</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>3333 DIAMOND CANYON ROAD, DIAMOND BAR CA</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>ASSAF GOVARI</td>
											<td>VITZO 1, HAIFA 34400</td>
										</tr>
										<tr>
											<td>2</td>
											<td>MEIR BAR-TAL</td>
											<td>ACHIRTA 17, ZICHRON YA&#x27;ACOV 30900</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>G01R 19/00</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>N/A</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td></td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>11/462,733</td>
									<td>2006-08-07</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/279397-distortion-immune-position-tracking-using-redundant-measurements by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 01:11:14 GMT -->
</html>
