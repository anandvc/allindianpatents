<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/271738-method-and-apparatus-to-control-logic-valves-for-hydraulic-flow-control-in-an-electro-mechanical-transmission by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 00:41:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 271738:METHOD AND APPARATUS TO CONTROL LOGIC VALVES FOR HYDRAULIC FLOW CONTROL IN AN ELECTRO-MECHANICAL TRANSMISSION</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">METHOD AND APPARATUS TO CONTROL LOGIC VALVES FOR HYDRAULIC FLOW CONTROL IN AN ELECTRO-MECHANICAL TRANSMISSION</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>A method for controlling an electro-mechanical transmission includes monitoring a current hydraulic circuit oil temperature, monitoring a current state of flow management valves, monitoring a command for cooling of electric machines, monitoring a desired transmission operating range state, utilizing a state machine to determine a sequence for controlling positions of the flow management valves to achieve the desired transmission operating range state based upon the monitored properties.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>P002979-PTH-RRM<br>
METHOD AND APPARATUS TO CONTROL LOGIC VALVES FOR<br>
HYDRAULIC FLOW CONTROL IN AN ELECTRO-MECHANICAL<br>
TRANSMISSION<br>
CROSS REFERENCE TO RELATED APPLICATIONS<br>
[0001]     This application claims the benefit of U.S. Provisional Application<br>
No. 60/982,765 filed on October 26,2007 which is hereby incorporated herein<br>
by reference.<br>
TECHNICAL FIELD<br>
[0002]   This disclosure pertains to control systems for electro-mechanical<br>
transmissions.<br>
BACKGROUND<br>
[0003]   The statements in this section merely provide background<br>
information related to the present disclosure and may not constitute prior art.<br>
[0004]   Known powertrain architectures include torque-generative devices,<br>
including internal combustion engines and electric machines, which transmit<br>
torque through a transmission device to an output member. One exemplary<br>
powertrain includes a two-mode, compound-split, electro-mechanical<br>
transmission which utilizes an input member for receiving motive torque from<br>
a prime mover power source, preferably an internal combustion engine, and an<br>
output member. The output member can be operatively connected to a<br>
driveline for a motor vehicle for transmitting tractive torque thereto. Electric<br><br>
machines, operative as motors or generators, generate a torque input to the<br>
transmission, independently of a torque input from the internal combustion<br>
engine. The electric machines may transform vehicle kinetic energy,<br>
transmitted through the vehicle driveline, to electrical energy that is storable in<br>
an electrical energy storage device. A control system monitors various inputs<br>
from the vehicle and the operator and provides operational control of the<br>
powertrain, including controlling transmission operating state and gear<br>
shifting, controlling the torque-generative devices, and regulating the electrical<br>
power interchange among the electrical energy storage device and the electric<br>
machines to manage outputs of the transmission, including torque and<br>
rotational speed.<br>
[0005]   Operation of the above devices within a hybrid powertrain vehicle<br>
require management of numerous torque bearing shafts or devices<br>
representing connections to the above mentioned engine, electrical machines,<br>
and driveline. Input torque from the engine and input torque from the electric<br>
machine or electric machines can be applied individually or cooperatively to<br>
provide output torque. Various control schemes and operational connections<br>
between the various aforementioned components of the hybrid drive system<br>
are known, and the control system must be able to engage to and disengage the<br>
various components from the transmission in order to perform the functions of<br>
the hybrid powertrain system. Engagement and disengagement are known to<br>
be accomplished within the transmission by employing selectively operable<br>
clutches.<br>
[0006]   Clutches are devices well known in the art for engaging and<br>
disengaging shafts including the management of rotational velocity and torque<br><br>
differences between the shafts. Clutches are known in a variety of designs and<br>
control methods. One known type of clutch is a mechanical clutch operating<br>
by separating or joining two connective surfaces, for instance, clutch plates,<br>
operating, when joined, to apply frictional torque to each other. One control<br>
method for operating such a mechanical clutch includes applying a hydraulic<br>
control system implementing fluidic pressures transmitted through hydraulic<br>
lines to exert or release clamping force between the two connective surfaces.<br>
Operated thusly, the clutch is not operated in a binary manner, but rather is<br>
capable of a range of engagement states, from fully disengaged, to<br>
synchronized but not engaged, to engaged but with only minimal clamping<br>
force, to engaged with some maximum clamping force. The clamping force<br>
available to be applied to the clutch determines how much reactive torque the<br>
clutch can carry before the clutch slips.<br>
[0007]   The hydraulic control system, as described above, utilizes lines<br>
charged with hydraulic oil to selectively activate clutches within the<br>
transmission. However, the hydraulic control system is also known to perform<br>
a number of other functions in a hybrid powertrain. For example, an electric<br>
machine utilized within a hybrid powertrain generates heat. Known<br>
embodiments utilize hydraulic oil from the hydraulic control system in a<br>
continuous flow to cool the electric machine in a base machine cooling<br>
function. Other known embodiments additionally are known to react to higher<br>
electric machine temperatures with a selectable or temperature driven active<br>
machine cooling function, providing additional cooling in the high<br>
temperature condition. Additionally, known embodiments utilize hydraulic oil<br><br>
to lubricate mechanical devices, such as bearings. Also, hydraulic circuits are<br>
known to include some level of internal leakage.<br>
[0008]   Hydraulic oil is known to be pressurized within a hydraulic control<br>
system with a pump. The pump is preferably mechanically driven. In<br>
addition to this first main hydraulic pump, hydraulic control systems are<br>
known to also include an auxiliary hydraulic pump, preferably powered<br>
electrically and used when the mechanically driven pump is unavailable. The<br>
internal impelling mechanism of a pump rotates or operates at some speed,<br>
drawing hydraulic oil from a return line and pressurizing the hydraulic control<br>
system. The supply of hydraulic flow by the pump or pumps is affected by the<br>
speed of the pumps, the back pressure exerted by the hydraulic line pressure<br>
(PLINE). and the temperature of the hydraulic oil (TOIL,)-<br>
[0009]   Selective application of a flow of hydraulic fluid to functions served<br>
by the hydraulic control system requires valves or switches to apply or release<br>
the flow to the functions. Hydraulic valves are known in a variety of<br>
configurations in the art. Two known configurations include an electrically-<br>
actuated pressure control solenoid (PCS), wherein a valve internal to the PCS<br>
is translated, rotated, or otherwise moved by electromagnetic-mechanical<br>
means and is capable of a plurality or linearly variable actuation providing<br>
some fraction of a supplied line pressure; and a hydraulically-actuated flow<br>
management valve, wherein a valve internal to the flow management valve is<br>
translated, rotated, or otherwise moved by selective application of a command<br>
pressure and actuates between distinct states, for example, between two<br>
positions.<br><br>
[0010]    Utilizing a series of PCS valves and flow management valves to<br>
control a powertrain through complex operations can be difficult. A separate<br>
switch can be assigned to each individual function served by the hydraulic<br>
control system. However, such a system can be cost prohibitive and create<br>
increasing warranty concerns. Multi-level control systems are known,<br>
wherein a first set of valves controls flow to a second set of valves, and the<br>
multiplicity of settings between the different levels of valves can serve<br>
multiple functions with fewer physical valves. However, this coordinated<br>
valve action requires careful control, as a delay in actuation of a valve or some<br>
other malfunction can create unexpected or undesirable results in the operation<br>
of the powertrain.<br>
[0011]   A method to control multi-level hydraulic control valves within a<br>
transmission, insuring timely and accurate control of the functions served by<br>
the valves, would be beneficial.<br>
SUMMARY<br>
[0012]    A method for controlling an electro-mechanical transmission<br>
comprising first and second electric machines and a hydraulic circuit having a<br>
plurality of flow management valves and pressure control solenoids operative<br>
to actuate a plurality of clutches and a plurality of pressure monitoring devices<br>
adapted to monitor the hydraulic circuit the transmission operative in fixed<br>
gear and continuously variable operating range states through selective<br>
actuation of the clutches includes monitoring a current hydraulic circuit oil<br>
temperature, monitoring a current state of the flow management valves,<br>
monitoring a command for cooling of the electric machines, monitoring a<br><br>
desired transmission operating range state, utilizing a state machine to<br>
determine a sequence for controlling positions of the flow management valves<br>
to achieve the desired transmission operating range state based upon the<br>
current hydraulic circuit oil temperature, the current state of the flow<br>
management valves, the command for cooling of the electric machines, and<br>
the desired transmission operating range state, and controlling the flow<br>
management valves based upon the sequence.<br>
BRIEF DESCRIPTION OF THE DRAWINGS<br>
[0013]   One or more embodiments will now be described, by way of<br>
example, with reference to the accompanying drawings, in which:<br>
[0014]   FIG. 1 is a schematic diagram of an exemplary powertrain, in<br>
accordance with the present disclosure;<br>
[0015]   FIG. 2 is a schematic diagram of an exemplary architecture for a<br>
control system and powertrain, in accordance with the present disclosure;<br>
[0016]   FIG. 3 is a schematic diagram of a hydraulic circuit, in accordance<br>
with the present disclosure;<br>
[0017]   FIG. 4 graphically illustrates an exemplary state machine, in<br>
accordance with the present disclosure;<br>
[0018]   FIG. 5 graphically illustrates an exemplary state machine describing<br>
operation of an X-valve and a Y-valve, in accordance with the present<br>
disclosure;<br>
[0019]   FIG. 6 graphically illustrates exemplary operation of a powertrain<br>
through various operating range states, information necessary to the<br><br>
configuration of the state machine of FIG. 5, in accordance with the present<br>
disclosure;<br>
[0020]   FIG. 7 is an exemplary state machine further describing permissible<br>
shifts between range states in an exemplary transmission, in accordance with<br>
the present disclosure;<br>
[0021]   FIG. 8 graphically illustrates a PCS mute function, in accordance<br>
with the present disclosure; and<br>
[0022]   FIGS. 9 and 10 schematically depict an exemplary valve sequencing<br>
control modules, monitoring inputs related to control of a hydraulic control<br>
system and issuing commands to hydraulic control valves, in accordance with<br>
the present disclosure;<br>
[0023]   FIG. 9 depicts an XY command logic module, receiving inputs<br>
related to the requirements of functions served by the hydraulic control system<br>
and generating a desired XY output, describing a desired XY state or a<br>
configuration of an X-valve and a Y-valve which would best serve the input<br>
requirements, in accordance with the present disclosure; and<br>
[0024]   FIG. 10 depicts a state machine module, receiving inputs regarding<br>
current valve settings, desired valve settings, and the desired operating range<br>
state and outputting X-valve and Y-valve commands, in accordance with the<br>
present disclosure.<br>
DETAILED DESCRIPTION<br>
[0025]   Referring now to the drawings, wherein the showings are for the<br>
purpose of illustrating certain exemplary embodiments only and not for the<br>
purpose of limiting the same, FIGS. 1 and 2 depict an exemplary electro-<br><br>
mechanical hybrid powertrain. The exemplary electro-mechanical hybrid<br>
powertrain in accordance with the present disclosure is depicted in FIG. 1,<br>
comprising a two-mode, compound-split, electro-mechanical hybrid<br>
transmission 10 operatively connected to an engine 14 and first and second<br>
electric machines ('MG-A') 56 and ('MG-B') 72.  The engine 14 and first and<br>
second electric machines 56 and 72 each generate power which can be<br>
transmitted to the transmission 10. The power generated by the engine 14 and<br>
the first and second electric machines 56 and 72 and transmitted to the<br>
transmission 10 is described in terms of input torques, referred to herein as Tb<br>
TA, and TB respectively, and speed, referred to herein as N1, NA,and NB,<br>
respectively.<br>
[0026]   The exemplary engine 14 comprises a multi-cylinder internal<br>
combustion engine selectively operative in several states to transmit torque to<br>
the transmission 10 via an input shaft 12, and can be either a spark-ignition or<br>
a compression-ignition engine. The engine 14 includes a crankshaft (not<br>
shown) operatively coupled to the input shaft 12 of the transmission 10. A<br>
rotational speed sensor 11 monitors rotational speed of the input shaft 12.<br>
Power output from the engine 14, comprising rotational speed and output<br>
torque, can differ from the input speed, Ni, and the input torque, Ti, to the<br>
transmission 10 due to placement of torque-consuming components on the<br>
input shaft 12 between the engine 14 and the transmission 10, e.g., a hydraulic<br>
pump (not shown) and/or a torque management device (not shown).<br>
[0027]   The exemplary transmission 10 comprises three planetary-gear sets<br>
24, 26 and 28, and four selectively engageable torque-transmitting devices,<br>
i.e., clutches Cl 70, C2 62, C3 73, and C4 75. As used herein, clutches refer<br><br>
to any type of friction torque transfer device including single or compound<br>
plate clutches or packs, band clutches, and brakes, for example. A hydraulic<br>
control circuit 42, preferably controlled by a transmission control module<br>
(hereafter TCM') 17, is operative to control clutch states. Clutches C2 62 and<br>
C4 75 preferably comprise hydraulically-applied rotating friction clutches.<br>
Clutches Cl 70 and C3 73 preferably comprise hydraulically-controlled<br>
stationary devices that can be selectively grounded to a transmission case 68.<br>
Each of the clutches Cl 70, C2 62, C3 73, and C4 75 is preferably<br>
hydraulically applied, selectively receiving pressurized hydraulic fluid via the<br>
hydraulic control circuit 42.<br>
[0028]   The first and second electric machines 56 and 72 preferably comprise<br>
three-phase AC machines, each including a stator (not shown) and a rotor (not<br>
shown), and respective resolvers 80 and 82. The motor stator for each<br>
machine is grounded to an outer portion of the transmission case 68, and<br>
includes a stator core with coiled electrical windings extending therefrom.<br>
The rotor for the First electric machine 56 is supported on a hub plate gear that<br>
is operatively attached to shaft 60 via the second planetary gear set 26. The<br>
rotor for the second electric machine 72 is fixedly attached to a sleeve shaft<br>
hub 66.<br>
[0029]   Each of the resolvers 80 and 82 preferably comprises a variable<br>
reluctance device including a resolver stator (not shown) and a resolver rotor<br>
(not shown). The resolvers 80 and 82 are appropriately positioned and<br>
assembled on respective ones of the first and second electric machines 56 and<br>
72. Stators of respective ones of the resolvers 80 and 82 are operatively<br>
connected to one of the stators for the first and second electric machines 56<br><br>
and 72. The resolver rotors are operatively connected to the rotor for the<br>
corresponding first and second electric machines 56 and 72. Each of the<br>
resolvers 80 and 82 is signally and operatively connected to a transmission<br>
power inverter control module (hereafter 'TPIM') 19, and each senses and<br>
monitors rotational position of the resolver rotor relative to the resolver stator,<br>
thus monitoring rotational position of respective ones of first and second<br>
electric machines 56 and 72. Additionally, the signals output from the<br>
resolvers 80 and 82 are interpreted to provide the rotational speeds for first<br>
and second electric machines 56 and 72, i.e., NAand NB, respectively.<br>
[0030]   The transmission 10 includes an output member 64, e.g. a shaft,<br>
which is operably connected to a drivel ine 90 for a vehicle (not shown), to<br>
provide output power, e.g., to vehicle wheels 93, one of which is shown in<br>
FIG. 1. The output power is characterized in terms of an output rotational<br>
speed, No and an output torque, To. A transmission output speed sensor 84<br>
monitors rotational speed and rotational direction of the output member 64.<br>
Each of the vehicle wheels 93, is preferably equipped with a sensor 94 adapted<br>
to monitor wheel speed, VSS-WHL, the output of which is monitored by a<br>
control module of a distributed control module system described with respect<br>
to FIG. 2, to determine vehicle speed, and absolute and relative wheel speeds<br>
for braking control, traction control, and vehicle acceleration management.<br>
[0031]   The input torques from the engine 14 and the first and second electric<br>
machines 56 and 72 (Ti, TA, and TB respectively) are generated as a result of<br>
energy conversion from fuel or electrical potential stored in an electrical<br>
energy storage device (hereafter 'ESD') 74. The ESD 74 is high voltage DC-<br>
coupled to the TPIM 19 via DC transfer conductors 27. The transfer<br><br>
conductors 27 include a contactor switch 38. When the contactor switch 38 is<br>
closed, under normal operation, electric current can flow between the ESD 74<br>
and the TPIM 19. When the contactor switch 38 is opened electric current<br>
flow between the ESD 74 and the TPIM 19 is interrupted. The TPIM 19<br>
transmits electrical power to and from the first electric machine 56 by transfer<br>
conductors 29, and the TPIM 19 similarly transmits electrical power to and<br>
from the second electric machine 72 by transfer conductors 31, in response to<br>
torque commands for the first and second electric machines 56 and 72 to<br>
achieve the input torques TA and TB. Electrical current is transmitted to and<br>
from the ESD 74 in accordance with whether the ESD 74 is being charged or<br>
discharged.<br>
[0032]   The TPIM 19 includes the pair of power inverters (not shown) and<br>
respective motor control modules (not shown) configured to receive the torque<br>
commands and control inverter states therefrom for providing motor drive or<br>
regeneration functionality to achieve the input torques TA and TB- The power<br>
inverters comprise known complementary three-phase power electronics<br>
devices, and each includes a plurality of insulated gate bipolar transistors (not<br>
shown) for converting DC power from the ESD 74 to AC power for powering<br>
respective ones of the first and second electric machines 56 and 72, by<br>
switching at high frequencies. The insulated gate bipolar transistors form a<br>
switch mode power supply configured to receive control commands. There is<br>
typically one pair of insulated gate bipolar transistors for each phase of each of<br>
the three-phase electric machines. States of the insulated gate bipolar<br>
transistors are controlled to provide motor drive mechanical power generation<br>
or electric power regeneration functionality. The three-phase inverters receive<br><br>
or supply DC electric power via DC transfer conductors 27 and transform it to<br>
or from three-phase AC power, which is conducted to or from the first and<br>
second electric machines 56 and 72 for operation as motors or generators via<br>
transfer conductors 29 and 31 respectively.<br>
[0033]   FIG. 2 is a schematic block diagram of the distributed control module<br>
system. The elements described hereinafter comprise a subset of an overall<br>
vehicle control architecture, and provide coordinated system control of the<br>
exemplary powertrain described in FIG. 1. The distributed control module<br>
system synthesizes pertinent information and inputs, and executes algorithms<br>
to control various actuators to achieve control objectives, including objectives<br>
related to fuel economy, emissions, performance, drivability, and protection of<br>
hardware, including batteries of ESD 74 and the first and second electric<br>
machines 56 and 72. The distributed control module system includes an<br>
engine control module (hereafter 'ECM') 23, the TCM 17, a battery pack<br>
control module (hereafter 'BPCM') 21, and the TPIM 19. A hybrid control<br>
module (hereafter 'HCP') 5 provides supervisory control and coordination of<br>
the ECM 23, the TCM 17, the BPCM 21, and the TPIM 19. A user interface<br>
('UI') 13 is operatively connected to a plurality of devices through which a<br>
vehicle operator controls or directs operation of the electro-mechanical hybrid<br>
powertrain. The devices include an accelerator pedal 113 ('AP') from which<br>
an operator torque request is determined, an operator brake pedal 112 ('BP'), a<br>
transmission gear selector 114 ('PRNDL'), and a vehicle speed cruise control<br>
(not shown). The transmission gear selector 114 may have a discrete number<br>
of operator-selectable positions, including the rotational direction of the output<br>
member 64 to enable one of a forward and a reverse direction.<br><br>
[0034]   The aforementioned control modules communicate with other control<br>
modules, sensors, and actuators via a local area network (hereafter 'LAN') bus<br>
6. The LAN bus 6 allows for structured communication of states of operating<br>
parameters and actuator command signals between the various control<br>
modules. The specific communication protocol utilized is application-specific.<br>
The LAN bus 6 and appropriate protocols provide for robust messaging and<br>
multi-control module interfacing between the aforementioned control<br>
modules, and other control modules providing functionality such as antilock<br>
braking, traction control, and vehicle stability. Multiple communications<br>
buses may be used to improve communications speed and provide some level<br>
of signal redundancy and integrity. Communication between individual<br>
control modules can also be effected using a direct link, e.g., a serial<br>
peripheral interface ('SPI') bus (not shown).<br>
[0035]   The HCP 5 provides supervisory control of the powertrain, serving to<br>
coordinate operation of the ECM 23, TCM 17, TPIM 19, and BPCM 21.<br>
Based upon various input signals from the user interface 13 and the<br>
powertrain, including the ESD 74, the HCP 5 generates various commands,<br>
including: the operator torque request ('TOREQ'). a commanded output torque<br>
('TCMD') to the driveline 90, an engine input torque command, clutch torques<br>
for the torque-transfer clutches C1 70, C2 62, C3 73, C4 75 of the<br>
transmission 10; and the torque commands for the first and second electric<br>
machines 56 and 72, respectively. The TCM 17 is operatively connected to the<br>
hydraulic control circuit 42 and provides various functions including<br>
monitoring various pressure sensing devices (not shown) and generating and<br>
communicating control signals to various solenoids (not shown) thereby<br><br>
controlling pressure switches and control valves contained within the<br>
hydraulic control circuit 42.<br>
[0036]    The ECM 23 is operatively connected to the engine 14, and functions<br>
to acquire data from sensors and control actuators of the engine 14 over a<br>
plurality of discrete lines, shown for simplicity as an aggregate bi-directional<br>
interface cable 35. The ECM 23 receives the engine input torque command<br>
from the HCP 5. The ECM 23 determines the actual engine input torque, Ti,<br>
provided to the transmission 10 at that point in time based upon monitored<br>
engine speed and load, which is communicated to the HCP 5. The ECM 23<br>
monitors input from the rotational speed sensor 11 to determine the engine<br>
input speed to the input shaft 12, which translates to the transmission input<br>
speed, Ni. The ECM 23 monitors inputs from sensors (not shown) to<br>
determine states of other engine operating parameters including, e.g., a<br>
manifold pressure, engine coolant temperature, ambient air temperature, and<br>
ambient pressure. The engine load can be determined, for example, from the<br>
manifold pressure, or alternatively, from monitoring operator input to the<br>
accelerator pedal 113. The ECM 23 generates and communicates command<br>
signals to control engine actuators, including, e.g., fuel injectors, ignition<br>
modules, and throttle control modules, none of which are shown.<br>
[0037]   The TCM 17 is operatively connected to the transmission 10 and<br>
monitors inputs from sensors (not shown) to determine states of transmission<br>
operating parameters. The TCM 17 generates and communicates command<br>
signals to control the transmission 10, including controlling the hydraulic<br>
control circuit 42. Inputs from the TCM 17 to the HCP 5 include estimated<br>
clutch torques for each of the clutches, i.e., Cl 70, C2 62, C3 73, and C4 75,<br><br>
and rotational output speed, No, of the output member 64. Other actuators and<br>
sensors may be used to provide additional information from the TCM 17 to the<br>
HCP 5 for control purposes. The TCM 17 monitors inputs from pressure<br>
switches (not shown) and selectively actuates pressure control solenoids (not<br>
shown) and shift solenoids (not shown) of the hydraulic control circuit 42 to<br>
selectively actuate the various clutches Cl 70, C2 62, C3 73, and C4 75 to<br>
achieve various transmission operating range states, as described hereinbelow.<br>
[0038]   The BPCM 21 is signally connected to sensors (not shown) to<br>
monitor the ESD 74, including states of electrical current and voltage<br>
parameters, to provide information indicative of parametric states of the<br>
batteries of the ESD 74 to the HCP 5. The parametric states of the batteries<br>
preferably include battery state-of-charge, battery voltage, battery temperature,<br>
and available battery power, referred to as a range PBAT_MINto PBAT_MAX-<br>
[0039]   Each of the control modules ECM 23, TCM 17, TPIM 19 and BPCM<br>
21 is preferably a general-purpose digital computer comprising a<br>
microprocessor or central processing unit, storage mediums comprising read<br>
only memory ('ROM'), random access memory ('RAM'), electrically<br>
programmable read only memory ('EPROM'), a high speed clock, analog to<br>
digital ('A/D') and digital to analog ('D/A') circuitry, and input/output<br>
circuitry and devices ('I/O') and appropriate signal conditioning and buffer<br>
circuitry. Each of the control modules has a set of control algorithms,<br>
comprising resident program instructions and calibrations stored in one of the<br>
storage mediums and executed to provide the respective functions of each<br>
computer. Information transfer between the control modules is preferably<br>
accomplished using the LAN bus 6 and SPI buses. The control algorithms are<br><br>
executed during preset loop cycles such that each algorithm is executed at<br>
least once each loop cycle. Algorithms stored in the non-volatile memory<br>
devices are executed by one of the central processing units to monitor inputs<br>
from the sensing devices and execute control and diagnostic routines to<br>
control operation of the actuators, using preset calibrations. Loop cycles are<br>
executed at regular intervals, for example each 3.125, 6.25, 12.5, 25 and 100<br>
milliseconds during ongoing operation of the powertrain. Alternatively,<br>
algorithms may be executed in response to the occurrence of an event.<br>
[0040]   The exemplary powertrain selectively operates in one of several<br>
operating range states that can be described in terms of an engine state<br>
comprising one of an engine on state ('ON') and an engine off state ('OFF'),<br>
and a transmission state comprising a plurality of fixed gears and continuously<br>
variable operating modes, described with reference to Table 1, below.<br>
Table 1<br><br>
Description	Engine	Transmission Operating	Applied<br>
	State	Range State	Clutches<br>
MIJEngOff	OFF	EVT Mode I	C170<br>
MI_Eng_On	ON	EVT Mode I	C170<br>
FG1	ON	Fixed Gear Ratio 1	Cl 70   C4 75<br>
FG2	ON	Fixed Gear Ratio 2	C170   C2 62<br>
MII_Eng_Off	OFF	EVT Mode II	C2 62<br>
MII_Eng_On	ON	EVT Mode II	C2 62<br>
FG3	ON	Fixed Gear Ratio 3	C2 62   C4 75<br>
FG4	ON	Fixed Gear Ratio 4	C2 62   C3 73<br>
[0041]   Each of the transmission operating range states is described in the<br>
table and indicates which of the specific clutches Cl 70, C2 62, C3 73, and C4<br><br>
75 are applied for each of the operating range states. A first continuously<br>
variable mode, i.e., EVT Mode I, or MI, is selected by applying clutch Cl 70<br>
only in order to "ground" the outer gear member of the third planetary gear set<br>
28. The engine state can be one of ON (;MI_Eng_On') or OFF<br>
('MIEngOff). A second continuously variable mode, i.e., EVT Mode II, or<br>
Mil, is selected by applying clutch C2 62 only to connect the shaft 60 to the<br>
carrier of the third planetary gear set 28. The engine state can be one of ON<br>
('MII_Eng_On') or OFF ('MlI_Eng_Off). For purposes of this description,<br>
when the engine state is OFF, the engine input speed is equal to zero<br>
revolutions per minute ('RPM'), i.e., the engine crankshaft is not rotating.  A<br>
fixed gear operation provides a fixed ratio operation of input-to-output speed<br>
of the transmission 10, i.e., N1/No, is achieved. A first fixed gear operation<br>
('FG1') is selected by applying clutches Cl 70 and C4 75. A second fixed<br>
gear operation ('FG2') is selected by applying clutches Cl 70 and C2 62. A<br>
third fixed gear operation ('FG3') is selected by applying clutches C2 62 and<br>
C4 75. A fourth fixed gear operation ('FG4') is selected by applying clutches<br>
C2 62 and C3 73. The fixed ratio operation of input-to-output speed increases<br>
with increased fixed gear operation due to decreased gear ratios in the<br>
planetary gears 24, 26, and 28. The rotational speeds of the first and second<br>
electric machines 56 and 72, NAand NB respectively, are dependent on internal<br>
rotation of the mechanism as defined by the clutching and are proportional to<br>
the input speed measured at the input shaft 12.<br>
[0042] In response to operator input via the accelerator pedal 113 and brake<br>
pedal 112 as captured by the user interface 13, the HCP 5 and one or more of<br>
the other control modules determine the commanded output torque, TCMD,<br><br>
intended to meet the operator torque request, TOREQ, to be executed at the<br>
output member 64 and transmitted to the driveline 90. Final vehicle<br>
acceleration is affected by other factors including, e.g., road load, road grade,<br>
and vehicle mass. The operating range state is determined for the transmission<br>
10 based upon a variety of operating characteristics of the powertrain. This<br>
includes the operator torque request, communicated through the accelerator<br>
pedal 113 and brake pedal 112 to the user interface 13 as previously described.<br>
The operating range state may be predicated on a powertrain torque demand<br>
caused by a command to operate the first and second electric machines 56 and<br>
72 in an electrical energy generating mode or in a torque generating mode.<br>
The operating range state can be determined by an optimization algorithm or<br>
routine which determines optimum system efficiency based upon operator<br>
demand for power, battery state of charge, and energy efficiencies of the<br>
engine 14 and the first and second electric machines 56 and 72. The control<br>
system manages torque inputs from the engine 14 and the first and second<br>
electric machines 56 and 72 based upon an outcome of the executed<br>
optimization routine, and system efficiencies are optimized thereby, to manage<br>
fuel economy and battery charging. Furthermore, operation can be determined<br>
based upon a fault in a component or system. The HCP 5 monitors the torque-<br>
generative devices, and determines the power output from the transmission 10<br>
required to achieve the desired output torque to meet the operator torque<br>
request. As should be apparent from the description above, the ESD 74 and<br>
the first and second electric machines 56 and 72 are electrically-operatively<br>
coupled for power flow therebetween. Furthermore, the engine 14, the first<br>
and second electric machines 56 and 72, and the electro-mechanical<br><br>
transmission 10 are mechanically-operatively coupled to transmit power<br>
therebetween to generate a power flow to the output member 64.<br>
[0043]    FIG. 3 depicts a schematic diagram of the hydraulic control circuit 42<br>
for controlling flow of hydraulic fluid in the exemplary transmission. A main<br>
hydraulic pump 88 is driven off the input shaft 12 from the engine 14, and an<br>
auxiliary pump 110 controlled by the TPIM 19 to provide pressurized fluid to<br>
the hydraulic control circuit 42 through valve 140. The auxiliary pump 110<br>
preferably comprises an electrically-powered pump of an appropriate size and<br>
capacity to provide sufficient flow of pressurized hydraulic fluid into the<br>
hydraulic control circuit 42 when operational. The hydraulic control circuit 42<br>
selectively distributes hydraulic pressure to a plurality of devices, including<br>
the torque-transfer clutches Cl 70, C2 62, C3 73, and C4 75, active cooling<br>
circuits for the first and second electric machines 56 and 72 (not shown), and a<br>
base cooling circuit for cooling and lubricating the transmission 10 via<br>
passages 142, 144 (not depicted in detail). As previously stated, the TCM 17<br>
actuates the various clutches to achieve one of the transmission operating<br>
range states through selective actuation of hydraulic circuit flow control<br>
devices comprising electrically-actuated variable pressure control solenoids<br>
PCS1 108, PCS2 114, PCS3 112, PCS4 116 and solenoid-controlled<br>
hydraulically-actuated flow management valves, X-valve 119 and Y-valve<br>
121. The hydraulic control circuit 42 is fluidly connected to pressure switches<br>
PS1, PS2, PS3, and PS4 via passages 122,124,126, and 128, respectively.<br>
The pressure control solenoid PCS1 108 has a control position of normally<br>
high and is operative to modulate the magnitude of fluidic pressure in the<br>
hydraulic circuit through fluidfc interaction with controllable pressure<br><br>
regulator 107 and spool valve 109. The controllable pressure regulator 107<br>
and spool valve 109 interact with PCS1 108 to control hydraulic pressure in<br>
the hydraulic control circuit 42 over a range of pressures and may provide<br>
additional functionality for the hydraulic control circuit 42. Pressure control<br>
solenoid PCS3 112 has a control position of normally high, and is fluidly<br>
connected to spool valve 113 and operative to effect flow therethrough when<br>
actuated. Spool valve 113 is fluidly connected to pressure switch PS3 via<br>
passage 126. Pressure control solenoid PCS2 114 has a control position of<br>
normally high, and is fluidly connected to spool valve 115 and operative to<br>
effect flow therethrough when actuated. Spool valve 115 is fluidly connected<br>
to pressure switch PS2 via passage 124. Pressure control solenoid PCS4 116<br>
has a control position of normally low, and is fluidly connected to spool valve<br>
117 and operative to effect flow therethrough when actuated. Spool valve 117<br>
is fluidly connected to pressure switch PS4 via passage 128.<br>
[0044]   The X-Valve 119 and Y-Valve 121 each comprise flow management<br>
valves controlled by solenoids 118, 120, respectively, in the exemplary<br>
system, and have control states of High (T) and Low ('0'). The control states<br>
refer to positions of each valve to which control flow to different devices in<br>
the hydraulic control circuit 42 and the transmission 10. The X-valve 119 is<br>
operative to direct pressurized fluid to clutches C3 73 and C4 75 and cooling<br>
systems for stators of the first and second electric machines 56 and 72 via<br>
fluidic passages 136,138,144, 142 respectively, depending upon the source of<br>
the fluidic input, as is described hereinafter. The Y-valve 121 is operative to<br>
direct pressurized fluid to clutches Cl 70 and C2 62 via fluidic passages 132<br>
and 134 respectively, depending upon the source of the fluidic input, as is<br><br>
described hereinafter. The Y-valve 121 is fluidly connected to pressure switch<br>
PS1 via passage 122.<br>
[0045]   The hydraulic control circuit 42 includes a base cooling circuit for<br>
providing hydraulic fluid to cool the stators of the first and second electric<br>
machines 56 and 72. The base cooling circuit includes fluid conduits from the<br>
valve 140 flowing directly to a flow restrictor which leads to fluidic passage<br>
144 leading to the base cooling circuit for the stator of the first electric<br>
machine 56, and to a flow restrictor which leads to fluidic passage 142 leading<br>
to the base cooling circuit for the stator of the second electric machine 72.<br>
Active cooling of stators for the first and second electric machines 56 and 72<br>
is effected by selective actuation of pressure control solenoids PCS2 114,<br>
PCS3 112 and PCS4 116 and solenoid-controlled flow management valves X-<br>
valve 119 and Y-valve 121, which leads to flow of hydraulic fluid around the<br>
selected stator and permits heat to be transferred therebetween, primarily<br>
through conduction.<br>
[0046]   An exemplary logic table to accomplish control of the exemplary<br>
hydraulic control circuit 42 to control operation of the transmission 10 in one<br>
of the transmission operating range states is provided with reference to Table<br>
2, below.<br><br>
Table 2<br><br>
	X-	Y-	PCS1	PCS2	PCS3	PCS4<br>
	Valve	Valve				<br>
	Logic	Logic				<br>
Transmis	No	C2	Normal	Normal	Normal	Normal<br>
-sion	Latch	Latch	High	High	High	Low<br>
Operating						<br>
Range						<br>
State						<br>
EVT	0	0	Line	MG-B	Cl	MG-A<br>
Model			Modul-	Stator		Stator<br>
			ation	Cool		Cool<br>
EVT	0	1	Line	C2	MG-B	MG-A<br>
Mode II			Modul-		Stator	Stator<br>
			ation		Cool	Cool<br>
Low	1	0	Line	C2	Cl	C4<br>
Range			Modul-			<br>
			ation			<br>
High	1	1	Line	C2	C3	C4<br>
Range			Modul-			<br>
			ation			<br>
[0047]   A Low Range is defined as a transmission operating range state<br>
comprising one of the first and second continuously variable modes and the<br>
first, second, and third fixed gear operations. A High Range is defined as a<br>
transmission operating range state comprising one of the second continuously<br>
variable mode and the third and fourth fixed gear operations. Selective control<br>
of the X-valve 119 and the Y-valve 121 and actuation of the solenoids PCS2<br>
112, PCS3 114, PCS4 116 facilitate flow of hydraulic fluid to actuate clutches<br>
Cl 70, C2 63, C3 73, and C4 75, and provide cooling for the stators the first<br>
and second electric machines 56 and 72.<br>
[0048]   In operation, a transmission operating range state, i.e. one of the fixed<br>
gear and continuously variable mode operations, is selected for the exemplary<br><br>
transmission 10 based upon a variety of operating characteristics of the<br>
powertrain. This includes the operator torque request, typically communicated<br>
through inputs to the UI 13 as previously described. Additionally, a demand<br>
for output torque is predicated on external conditions, including, e.g., road<br>
grade, road surface conditions, or wind load.   The operating range state may<br>
be predicated on a powertrain torque demand caused by a control module<br>
command to operate of the electrical machines in an electrical energy<br>
generating mode or in a torque generating mode. The operating range state<br>
can be determined by an optimization algorithm or routine operable to<br>
determine an optimum system efficiency based upon the operator torque<br>
request, battery state of charge, and energy efficiencies of the engine 14 and<br>
the first and second electric machines 56 and 72. The control system manages<br>
the input torques from the engine 14 and the first and second electric machines<br>
56 and 72 based upon an outcome of the executed optimization routine, and<br>
system optimization occurs to improve fuel economy and manage battery<br>
charging. Furthermore, the operation can be determined based upon a fault in<br>
a component or system.<br>
[0049]   As described above and as described for the exemplary powertrain,<br>
for instance, in the functionality described in Table 2, a layer of flow<br>
management valves, the aforementioned exemplary X-valve and Y-valve, and<br>
a layer of PCS valves, PCS 1 through PCS4, can be used to control a feed of<br>
pressurized hydraulic flow to functions served by the hydraulic control<br>
system. While such a configuration has benefits in efficiency, precise control<br>
of the combinations of valves is critical to insuring proper operation of the<br>
controlled powertrain.<br><br>
[0050]   A finite state machine or a state machine is a method utilized in<br>
software and control applications, describing a decision making process in a<br>
complex system. State machines are used to emulate a system that can at<br>
anytime be described by being in a particular setting or state. Systems with<br>
discreet resting states and defined paths or decisions between the states can be<br>
described well by a state machine. Systems that operate in scalars or in non-<br>
discreet zones are not well described by a state machine. Transitions between<br>
resting states, if also performed in definable, discreet procedures can be<br>
defined as transitory states. FIG. 4 graphically illustrates an exemplary state<br>
machine, in accordance with the present disclosure. Six states are defined,<br>
including three resting states, resting states A, B, and C, and three transitory<br>
states, transitory states A-B, B-C, and C-A. The exemplary system described<br>
by the state machine can only exist in one of the six defined states. In addition<br>
to describing the six potential states that the system can exist in, the state<br>
machine can also describe the actions possible at any given state, as described<br>
by the arrows between the states. If the system is operating at resting state B,<br>
the system can take an action to go to transitory state A-B or to transitory state<br>
B-C. If the system is operating at transitory state C-A, the only action that the<br>
system can take is to go to resting state A. Operated in this way, a state<br>
machine can be used to describe systems operating in a series of discreet<br>
states, defining the status of the system and actions that the system may take.<br>
[0051]   A PCS valve can be operated in discreet states and discreet transition<br>
states. As described in Table 2 and in accompanying description, each PCS is<br>
said to be in a high state or a low state. Responding to commands, each PCS<br>
undergoes a discreet transition state from the high state to the low state or the<br><br>
reverse. Even when a PCS valve operates at some middle position, control of<br>
the valve can actuate the valve to the middle position as a semi-discreet state.<br>
Similarly, the X-valve and Y-valve is described in Table 2 as existing in a 0<br>
state or a 1 state, describing each valve operating in discreet binary states.<br>
[0052]   Methods are known whereby transmission valves can be operated at<br>
intermediate states or states existing between the states at the ends of valve<br>
travel. An exemplary usage of such an intermediate state includes a PCS<br>
valve utilized to fill a clutch having a partial flow intermediate state enabling<br>
selection of a touching state in the clutch, wherein the clutch only receives<br>
partial line pressure to a calibrated level such that the engagement of the<br>
clutch stops short of fully compressing the clutch connective surfaces.  One<br>
exemplary valve configuration allowing intermediate states includes direct<br>
control of an electrically-actuated valve, with a servo or similar mechanism<br>
utilizing feedback control well known in the art to drive the valve to a certain<br>
position based upon a command. Another exemplary valve configuration that<br>
allows such operation includes a flow management valve with a pressure<br>
feedback loop. According to normal hydraulically-actuated valve operation, a<br>
command pressure is applied to the valve, opening the valve such that full<br>
PLINE is applied to the clutch and the clutch pressure rises. However, the<br>
clutch pressure or some derivative thereof, manipulated by a restriction orifice<br>
or other means, is fed back and drives the valve to a particular position. Such<br>
a configuration is beneficial because it is directly controlled by clutch pressure<br>
and does not depend upon sensors and proper calibration of a control system.<br>
Such intermediate states can still be discreet and can still be modeled by state<br>
machines.<br><br>
[0053]   A method is disclosed to control a group of hydraulic valves using a<br>
state machine. As described above, hydraulic valves within a hydraulic<br>
control system control the functions served by the hydraulic control system.<br>
An exemplary control system making decisions regarding valve settings<br>
monitors requirements of the functions served, determines a priority among<br>
the requirements, determines a desired valve configuration to enable activation<br>
of the functions according to the determined priority, monitors a current valve<br>
configuration, and executes allowable or preferred valve transitions to reach<br>
the desired valve configuration.<br>
[0054]   Describing any system through a state machine requires an<br>
understanding of all possible states and transitions. FIG. 5 graphically<br>
illustrates an exemplary state machine describing operation of an X-valve and<br>
a Y-valve, according to the present disclosure. The X-valve, with two<br>
possible resting states, and the Y-valve, with two possible resting states, define<br>
four resting states in FIG. 5: state 310 wherein EVT Mode I only operation is<br>
enabled; state 320 wherein EVT Mode II only operation is enabled; state 330<br>
defined in Table 2 as a high range; and state 340 defined in Table 2 as a low<br>
range. Each depicted state defines available or enabled clutches which can be<br>
engaged under the given X-valve and Y-valve configuration. State 310 allows<br>
for transmission of torque from the engine, the electric machines, or both with<br>
only clutch Cl engaged. As will be appreciated from FIG. 1, operation of the<br>
exemplary transmission including the planetary gear set with only clutch Cl<br>
engaged, the system is operable in EVT Mode I. As described in Table 2,<br>
state 310 also includes hydraulic flow to active cooling circuits to the two<br>
electric machines, allowing for robust operation of the powertrain under<br><br>
electrical power with full ability to manage heat in the electric machines.<br>
State 320 allows for transmission of torque from the engine, the electric<br>
machines, or both with only clutch C2 engaged. As will be appreciated from<br>
FIG. 1, operation of the exemplary transmission including the planetary gear<br>
set with only clutch C2 engaged, the system is operable in EVT Mode II.<br>
Similarly to state 310, state 320 also includes hydraulic flow to active cooling<br>
circuits to the two electric machines, allowing for robust operation of the<br>
powertrain under electrical power with full ability to manage heat in the<br>
electric machines. State 330 allows for transmission of torque from the<br>
engine, the electric machines, or both with any of clutches C2, C3, and C4<br>
engaged. Operation with any of these clutches allows for operation in EVT<br>
Mode II with only clutch C2 engaged or in a third fixed gear or a fourth fixed<br>
gear with a combination of clutches engaged (reference Table 1, above). State<br>
340 allows for transmission of torque from the engine, the electric machines,<br>
or both with any of clutches Cl, C2, and C4 engaged. Operation with any of<br>
these clutches allows for operation in EVT Modes I or II or in a first, second,<br>
or third fixed gear.<br>
[0055]   Four transitory states are additionally defined in FIG. 5: states 315,<br>
325, 335, and 345, defining permissible transitions between the resting states.<br>
In the exemplary embodiment of FIG. 5, and keeping in mind that the system<br>
being modeled is always in one of the eight defined states, the four transitory<br>
states are defined by either the X-valve or Y-valve being in transition.<br>
Operation of the powertrain through the transitory state is defined primarily by<br>
the valve not being transitioned, as this valve dictates which clutches can<br>
remain engaged through the transition. No transitory state changing both the<br><br>
X-valve and Y-valve is permitted. As described above, the system is always<br>
in one of the eight defined states, and the hydraulic flow through the system in<br>
a transition wherein both valves were changed would depend upon which<br>
valve changed first and would lead to unpredictable and potential harmful<br>
results. As a result, stable control of the system requires that only one valve<br>
be changed at a time. During transitory states 325, 335, and 345, the valve not<br>
transitioning enables at least one clutch to be engaged throughout the<br>
transition, thereby enabling transmission of torque through the transmission<br>
throughout operation in the transitory state. Only transitory state 315<br>
transitions from state 310 wherein only clutch C1 is enable to state 320<br>
wherein only clutch C2 is enabled. Because no clutch is operable in the<br>
transitory state, state 315 takes place only in a neutral range state with no<br>
torque being transmitted through the transmission.<br>
[0056]   A state machine modeling operation of a hydraulic control system<br>
and the valves therein is useful to compare various potential valve transition<br>
paths and select preferred valve transitions based upon the effects of the<br>
transitions to drivability, time to complete the shift, fuel efficiency, and other<br>
relevant factors.<br>
[0057J   FIG. 5 illustrates states in which the exemplary transmission can exist<br>
and be transitioned through as a function of an X-valve and a Y-valve.<br>
Functions enabled by the various states are not randomly assigned, but rather<br>
fit into an overall control strategy for the powertrain. FIG. 6 graphically<br>
illustrates exemplary operation of a powertrain through various operating<br>
range states, information necessary to the configuration of the state machine of<br>
FIG. 5, in accordance with the present disclosure. N1 is plotted against No,<br><br>
and the labeled lines and regions describe the relationship of N1 to No based<br>
upon the operating range state of the transmission. Lines GR1 through GR4<br>
describe the fixed gear ratios for each of the respective fixed gear states, where<br>
the slope of the line describes the ratio achieved of N1 to No. The two cross-<br>
hatched sections describe the zones in which EVT Mode I and II are enabled.<br>
FIG. 6 also describes transitions possible between the various operating range<br>
states through engagement and disengagement of various clutches,<br>
relationships made more apparent through examination of Table 1, above. For<br>
example, as described above, EVT Mode I is operable with only clutch Cl<br>
engaged, and EVT Mode II is operable with only clutch C2 engaged. The<br>
second fixed gear (FG2) is operable with clutches Cl and C2 engaged.<br>
Returning to FIG. 6, the line representing the gear ratio of FG2 is located on<br>
the boundary between EVT Modes I and II. An exemplary method to<br>
transition between EVT Mode I and EVT Mode II is to transition through<br>
FG2. Any shift through neutral, wherein clutch Cl is disengaged prior to<br>
clutch C2 being engaged, causes an interruption in To, and, therefore, a shift<br>
through FG2 wherein C2 is engaged and then Cl is disengaged is preferred.<br>
Similarly, a shift between gears, for example, from FG 4 with clutches C2 and<br>
C3 engaged to FG3 with clutches C2 and C4 engaged, in order to avoid<br>
interruption in To, is preferably transitioned through EVT Mode II with clutch<br>
C2 engaged. In this way, transitions between operating range states are<br>
configured, with clutch transitions including preferential transitions enabled<br>
through selective clutch control design.<br>
[0058]   Arrangement of preferred clutch transitions is evident in the<br>
exemplary valve configuration described in FIG. 5. Operating range states<br><br>
located proximately to each other in FIG. 6 are grouped together in states 330<br>
and 340, and transition between the two only requires a single transition<br>
through transitory state 335. Transition from operation in state 340<br>
corresponding to a section of FIG. 6 to state 310 wherein active cooling of the<br>
electric machines is enabled only requires a single transition through transitory<br>
state 345. Where possible, transition through transitory state 315, with a<br>
corresponding shift through neutral, is preferably avoided. For example, with<br>
the system operating in state 310 and perceiving a need to go to state 330, a<br>
transition through state 340 is preferred to a transition through state 320 in<br>
order to avoid the shift through neutral in transitory state 315 and associated<br>
impact to drivability caused by the torque interruption.<br>
[0059]   FIG. 5 describes through a state machine transitions that are possible<br>
in an X-valve and Y-valve control configuration. FIG. 6 describes operating<br>
range state behaviors and implies structure to shifts between the range states.<br>
FIG. 7 is an exemplary state machine further describing permissible shifts<br>
between range states in an exemplary transmission, in accordance with the<br>
present disclosure. Actuation of multiple levels of valves to engage and<br>
disengage various clutches, combined with a limited number of valid<br>
operating range state clutch combinations and other vehicle operability<br>
requirements, creates priorities and prohibitions in shifts to operating range<br>
states. For example, a powertrain operating in FGI can transition to either<br>
FG2 or EVT Mode I with the engine on. This transition is possible because,<br>
within the low range described by state 340 in FIG. 5, clutches Cl and C4<br>
engaged in FGI can be transitioned to sole activation of Cl consistent with<br>
EVT Mode I engine on or to FG2 by deactivating clutch C4 and activating<br><br>
clutch C2. However, from FG1, with clutches Cl and C4 engaged, a direct<br>
transition to FG3, with clutches C2 and C4 engaged, cannot be made.<br>
Clutches Cl and C2 cannot be transitioned, because clutch C4 engaged by<br>
itself is not a valid operating range state. Instead, a transition to FG2 must<br>
first be made, and then a transition to FG3 can be made. Such operating range<br>
state relationships stem from and are interdependent with any valve logic<br>
strategy such as the behavior described in FIG. 5. FIG. 7 presents an<br>
incomplete state machine describing operating ranges states and permissible<br>
transitions between range states for the purposes of illustration. It will be<br>
appreciated that additional permissible transitions exist within the exemplary<br>
transmission, but were not needed to describe the relationships illustrated in<br>
FIG. 7.<br>
[0060]   As described above, multi-layered hydraulic valve designs utilized to<br>
control a transmission are efficient, allowing a reduction in the number of<br>
physical valves utilized, but careful control of the valves controlling the<br>
transmission must be kept to avoid logic errors in the hydraulic control.<br>
Different methods are known for transitioning between valve settings and<br>
through sequences of valve changes. Known strategies utilize sensors to<br>
directly sense shift changes and timing strategies to anticipate behaviors of a<br>
transmission through commanded shifts. However, use of multi-layer valve<br>
strategies in combination with multiple clutch planetary gear sets, as described<br>
above, creates increased dependence on precise actuation of hydraulic valves.<br>
A momentary overlap of unintended valve settings can cause unintentional<br>
clutch actuation and adverse effects to the powertrain. Use of a state machine<br>
such as the exemplary embodiment described in FIG. 5 to control valve<br><br>
changes avoids incorrect assumptions and allows error-proofing methods to<br>
implemented, insuring that unintended clutch activation or deactivation do not<br>
occur. For example, changes in X-valve and Y-valve settings, in order to<br>
account for slow valve actuation, can include a PCS mute function. FIG. 8<br>
graphically illustrates a PCS mute function, in accordance with the present<br>
disclosure. Due to a change in inputs, an X-valve command is initiated to<br>
change X-valve state. In order to mute any unintended or accidental effects of<br>
hydraulic flow to functions served by the hydraulic control system, at the time<br>
the command to the X-valve is initiated, a mute function is imposed upon PCS<br>
command allowed such that the PCS must return to a default position. A PCS<br>
deactivation delay is allowed to expire in order to insure that the PCS valves<br>
have time to return to their default positions. The PCS deactivation delay can<br>
be a function of a number of variables, including affects of TOIL, for example,<br>
on viscosity of the hydraulic oil. Once the PCS deactivation delay has<br>
expired, the X-valve can be allowed to change state. Again, a delay is<br>
implemented to account for the time required for the X-valve to change state.<br>
This delay, an X-valve activation delay, can be a function of a number of<br>
variables including TOIL- Once the X-valve activation delay expires, the mute<br>
function upon the PCS command allowed is removed, and the PCS command,<br>
depending upon valve function, can return to normal levels.<br>
[0061]   While systems employing multi-layered valve strategies, depending<br>
upon relative timing of different valve for proper function, can benefit from<br>
the methods described herein, it will be appreciated that benefits can be<br>
derived using a state machine to control any hydraulic control system<br>
employing valves utilizing discreet valve states. For example, if the above<br><br>
system utilized a different valve for each clutch and each additional function<br>
served by the hydraulic control system, a state machine could still insure that a<br>
delayed valve did not cause a logic error in clutch control. Similarly, a state<br>
machine in such a system could serve as a fool-proofing method to prioritize<br>
active cooling of an electric machine versus clutch operation.<br>
[0062]   FIGS. 9 and 10 schematically depict an exemplary valve sequencing<br>
control modules, monitoring inputs related to control of a hydraulic control<br>
system and issuing commands to hydraulic control valves, in accordance with<br>
the present disclosure. FIG. 9 depicts an XY command logic module,<br>
receiving inputs related to the requirements of functions served by the<br>
hydraulic control system and generating a desired XY output, describing a<br>
desired XY state or a configuration of an X-valve and a Y-valve which would<br>
best serve the input requirements. Inputs described in the exemplary<br>
embodiment of FIG. 9 include desired active motor cooling, TOIL, and<br>
desired operating range state. Other exemplary inputs could include<br>
lubrication requirements, depending upon the configuration of the system. XY<br>
command logic module includes algorithms prioritizing inputs and<br>
determining which competing functions are more important to serve. For<br>
example, the algorithm can determine that particular clutch functions to<br>
accomplish a desired operating range state are more important than current<br>
needs for active motor cooling. FIG. 10 depicts a state machine module,<br>
receiving inputs regarding current valve settings, desired valve settings, and<br>
the desired operating range state and outputting X-valve and Y-valve<br>
commands. The state machine module employs analytical methods and<br>
algorithms programmed in accordance with methods described within this<br><br>
disclosure to determine appropriate X-valve and Y-valve resting states and<br>
transition states to affect desired control to the hydraulic control system.<br>
Although not shown, it should be appreciated that in addition to the desired<br>
valve settings and desired operating range states, a number of other inputs can<br>
be used to factor and limit decisions made by the state machine, including<br>
physical limits and properties and diagnostic mode settings. Diagnostic faults,<br>
for example indications of a stuck X-valve or Y-valve, can create an<br>
appropriate reaction, for example, freezing the state machine in the current<br>
state, or a remedial transition, for example, moving to a state generating a<br>
pressure pulse attempting to unfreeze a valve. As a result of all inputs, state<br>
machine module processes available information and either directly issues<br>
commands to the X-valve and Y-valve or signals appropriate instructions to a<br>
valve command module. The modules described above explain different<br>
functional characteristics of the control functions utilized; however, it will be<br>
understood that the modules can be incorporated in different unitary physical<br>
devices, in a single physical device, a module can itself span a number of<br>
physical devices; or both modules can be combined into a hydraulic control<br>
system control module.<br>
[0063]   It is understood that modifications are allowable within the scope of<br>
the disclosure. The disclosure has been described with specific reference to<br>
the preferred embodiments and modifications thereto. Further modifications<br>
and alterations may occur to others upon reading and understanding the<br>
specification. It is intended to include all such modifications and alterations<br>
insofar as they come within the scope of the disclosure.<br><br>
CLAIMS<br>
1.     Method for controlling an electro-mechanical transmission comprising <br>
first and second electric machines and a hydraulic circuit having a<br>
plurality of flow management valves and pressure control solenoids<br>
operative to actuate a plurality of clutches and a plurality of pressure<br>
monitoring devices adapted to monitor said hydraulic circuit, said<br>
transmission operative in fixed gear and continuously variable operating<br>
range states through selective actuation of said clutches, the method<br>
comprising:<br>
monitoring a current hydraulic circuit oil temperature;<br>
monitoring a current state of said flow management valves;<br>
monitoring a command for cooling of said electric machines;<br>
monitoring a desired transmission operating range state;<br>
utilizing a state machine to determine a sequence for controlling<br>
positions of said flow management valves to achieve said desired<br>
transmission operating range state based upon said current hydraulic<br>
circuit oil temperature, said current state of said flow management<br>
valves, said command for cooling of said electric machines, and said<br>
desired transmission operating range state; and<br>
controlling said flow management valves based upon said sequence.<br>
2.     The method of claim 1, wherein the utilizing said state machine to<br>
determine said sequence comprises:<br>
determining a desired state of said flow management valves; and<br><br>
applying valve logic-based rules to determine said sequence for<br>
controlling positions of said flow management valves based upon<br>
said desired state of said flow management valves.<br>
3.	The method of claim 2, wherein the applying valve logic-based rules<br>
comprises:<br>
comparing said desired state of said flow management valves to said<br>
current state of said flow management valves;<br>
identifying possible transitions to actuate said flow management valves<br>
from said current state of said flow management valves to said<br>
desired state of said flow management valves; and<br>
prioritizing said possible transitions based upon said valve logic-based<br>
rules comprising<br>
evaluating permissible clutch transitions,<br>
evaluating effects to drivability, and<br>
balancing said command for cooling of said electric machines<br>
4.	The method of claim 3, wherein the prioritizing said possible transitions<br>
further comprises evaluating diagnostic faults.<br>
5.	The method of claim 3,<br>
wherein said flow management valves and said pressure control<br>
solenoids interact to form a multi-layered control system, and<br><br>
wherein said prioritizing said possible transitions further comprises<br>
evaluating interaction between layers of said multi-layered control<br>
system.<br>
6.	The method of claim 5, wherein said flow management valves combine<br>
to exclusively control one of said layers of said multi-layered control<br>
system; and wherein controlling said flow management valves based<br>
upon said sequence comprises actuating one of said flow management<br>
valves at a time.<br>
7.	The method of claim 5, further comprising utilizing a mute function<br>
upon one layer of said multi-layered control system during said<br>
controlling said flow management valves based upon said sequence.<br>
8.	Apparatus for controlling an electro-mechanical transmission comprising<br>
first and second electric machines and a plurality of hydraulically-<br>
actuated clutches, said transmission operative in fixed gear and<br>
continuously variable operating range states through selective actuation<br>
of said clutches, said apparatus comprising:<br>
a hydraulic control system selectively directing a hydraulic flow to<br>
functions including actuation of said clutches, said hydraulic control<br>
system comprising flow management valves; and<br>
a hydraulic control system control module, including logic operations<br>
comprising<br>
monitoring requirements of said functions,<br><br>
monitoring a desired transmission operating range state,<br>
determining a desired valve configuration of said flow management<br>
valves based upon said requirements and said desired<br>
transmission operating range state,<br>
monitoring a current valve configuration of said flow management<br>
valves, and<br>
executing preferred valve transitions to reach said desired valve<br>
configuration based upon a state machine algorithm modeling<br>
potential valve transition paths between said current valve<br>
configuration and said desired valve configuration.<br>
9.	The apparatus of claim 8,<br>
wherein said hydraulic control system further comprises pressure control<br>
solenoids;<br>
wherein said hydraulic control system includes two layers of control<br>
devices comprising<br>
a first layer comprising said flow management valves,<br>
a second layer comprising said pressure control solenoids; and<br>
wherein said modeling by said state machine algorithm includes<br>
interactions between said first layer and said second layer.<br>
10.	The apparatus of claim 9, wherein said logic operation further comprise,<br>
during transitions in said first layer, muting related operations of said<br>
second layer.<br><br>
A method for controlling an electro-mechanical transmission includes monitoring a current hydraulic circuit oil temperature, monitoring a current state of flow management valves, monitoring a command for cooling of electric machines, monitoring a desired transmission operating range state, utilizing a state machine to determine a sequence for controlling positions of the flow management valves to achieve the desired transmission operating<br>
range state based upon the monitored properties.</td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=nqT0KYl3kd2t0z+vXPnisg==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==" target="_blank" style="word-wrap:break-word;">http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=nqT0KYl3kd2t0z+vXPnisg==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==</a></p>
		<br>
		<div class="pull-left">
			<a href="271737-a-method-for-the-preparation-of-an-anallergic-probiotic-bacterial-culture.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="271739-fuel-supply-device.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>271738</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>1806/KOL/2008</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>10/2016</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>04-Mar-2016</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>02-Mar-2016</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>23-Oct-2008</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>DAIMLER AG</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>70546 STUTTGART, GERMANY</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>ALI K NAQVI</td>
											<td>921 DACEA CT. WHITE LAKE, MICHIGAN 48386</td>
										</tr>
										<tr>
											<td>2</td>
											<td>JY-JEN F. SAH</td>
											<td>1915 BLOOMFIELD OAKS DRIVE, WEST BLOOMFIELD, MICHIGAN 48324</td>
										</tr>
										<tr>
											<td>3</td>
											<td>MICHAEL D. FOSTER</td>
											<td>3700 SUMTER WAY, CARMEL, INDIANA 46032</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>B60W10/00</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>N/A</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td></td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>60/982765</td>
									<td>2007-10-26</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/271738-method-and-apparatus-to-control-logic-valves-for-hydraulic-flow-control-in-an-electro-mechanical-transmission by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 00:41:29 GMT -->
</html>
