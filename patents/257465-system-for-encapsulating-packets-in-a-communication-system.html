<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/257465-system-for-encapsulating-packets-in-a-communication-system by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 08:19:33 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 257465:&quot;SYSTEM FOR ENCAPSULATING PACKETS IN A COMMUNICATION SYSTEM&quot;</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">&quot;SYSTEM FOR ENCAPSULATING PACKETS IN A COMMUNICATION SYSTEM&quot;</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>Encapsulating packets includes receiving packets at a queue of an encapsulator. The following operations are repeated until certain criteria are satisfied. A number of packets are accumulated at the queue. A current encapsulation efficiency associated with the accumulated packets is determined. A next encapsulation efficiency associated with the accumulated packets and a predicted next packet is determined. If the current encapsulation efficiency satisfies an encapsulation efficiency threshold and if the current encapsulation efficiency is greater than the next encapsulation efficiency, the accumulated packets are encapsulated. Otherwise, the packets continue to be accumulated at the queue.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>TECHNICAL FIELD OF THE INVENTION<br>
This invention relates generally to the field of data communication and more specifically to a method and system for encapsulating variable-size packets.<br>
BACKGROUND OF THE INVENTION<br>
Encapsulating packets in a communication system may involve the use of multiple queues for buffering packets waiting to be encapsulated. Packets at different queues, however, may experience different waiting times prior to encapsulation, also known as packet delay variation. Packet delay variation may introduce unwanted jitter into the communication system. Moreover, encapsulation according to known techniques may result in sub-optimal bandwidth usage of a communications channel. Furthermore, packets associated with Internet Protocol (IP) traffic may involve datagrams of variable size, which may affect encapsulation for optimal bandwidth usage. Consequently, encapsulating packets while controlling jitter and enhancing bandwidth utilization has posed challenges.<br>
SUMMARY OF THE INVENTION<br>
In accordance with the present invention disadvantages and  problems associated with previous techniques for encapsulation of variable-size packets in data communication may be reduced or eliminated.<br>
According to one embodiment encapsulating packets includes receiving packets at a queue of an encapsulator. The following operations are repeated until certain criteria are satisfied. A number of packets are accumulated at the queue. A current encapsulation efficiency associated with the accumulated packets is determined. A next encapsulation efficiency associated with the accumulated packets and a predicted size and arrival time of the next packet is determined. If the current encapsulation efficiency satisfies an encapsulation efficiency threshold and if the current encapsulation efficiency is greater than the next encapsulation efficiency, the accumulated packets are encapsulated.<br>
Certain embodiments of the invention may provide one or more technical advantages. A technical advantage of one embodiment may be that the size of an encapsulation section is adjusted in response to a current encapsulation efficiency and a predicted jitter in an effort to control jitter while maintaining efficiency. If the accumulated packets satisfy an encapsulation efficiency threshold, the packets may be<br>
encapsulated to maintain efficiency while controlling delay jitter. Another technical advantage of an embodiment may be that a delay associated with receiving predicted packets may be determined and if the delay satisfies a jitter requirement, the accumulated packets may be encapsulated to control jitter. Yet another technical advantage of an embodiment may be that encapsulation sections packets may be formed into cells to improve jitter. The encapsulation sections may be formed into cells so that wasted, or additional, capacity in the cells is avoided.<br>
Certain embodiments of the invention may include none, some, or all of the above technical advantages. One or more other technical advantages may be readily apparent to one skilled in the art from the figures, descriptions, and claims included herein.<br>
BRIEF DESCRIPTION OF THE DRAWINGS<br>
For a more complete understanding of the present invention and its features and advantages, reference is now made to the following description, taken in conjunction with the accompanying drawings, in which:<br>
FIGURE 1 illustrates an embodiment of a system for encapsulating packets to form encapsulation sections;<br>
FIGURE 2 illustrates an embodiment of the formation of ceils from encapsulation sections;<br>
FIGURE 3 illustrates an embodiment of a cell flow;<br>
FIGURE 4 is a flowchart illustrating a method for encapsulating packets;<br>
FIGURE 5 illustrates another embodiment of the formation of cells from encapsulation sections; and<br>
FIGURE 6 illustrates another embodiment of a cell flow.<br>
DETAILED DESCRIPTION OF THE DRAWINGS<br>
FIGURE 1 illustrates a system 10 for encapsulating packets to form encapsulation sections. System 10 adjusts the size of the sections in order to achieve a high encapsulation efficiency while ensuring satisfaction of a jitter requirement. In general, encapsulating a large section increases jitter. However, encapsulating a small section, while reducing jitter, results in lower efficiency. System 10 predicts jitter and efficiency, and adjusts the size of the encapsulation sections to reduce jitter while maintaining efficiency.<br>
System 10 receives packets from real-time flows 15 and non-real-time flows 20, encapsulates the received packets to form encapsulation sections, forms the encapsulation sections into cells, and transmits the cells to a receiver 70. Packets may be associated with datagrams of different sizes or variable-size packets. For example, a packet may comprise an IP packet or datagram, which may be of any suitable size. Cells may generally be associated with fixed-size packet of data. For example, a cell may comprise a moving pictures experts group-2 packet (MPEG-2 packet). Any other suitable packet of fixed or variable size may be formed into cells without deviating from the concept of this invention.<br>
Real-time flows 15 transmit real time traffic, and non-real-time flows 20 transmit non-real-time traffic. According to one embodiment, real-time flows 15 may comprise any delay-sensitive traffic, for example, voice data such as voice over IP (VOIP) or video on demand (VOD) data. Non-real-time flows 20 may include any delay-tolerant traffic, for example, IP data. Flows that transmit other types of delay-sensitive traffic such as voice traffic or other real-time traffic may be used in place of or in addition to real-time flows 15.<br>
System 10 may receive any suitable type of traffic, for example, moving pictures experts grcup-2 (MPSG-2) or MPEG-4 video traffic, voice over Internet protocol (VOIP), or Internet protocol (IP) packet traffic. The traffic may be classified according to jitter tolerance. According to one embodiment, traffic that is jitter tolerant comprises non-realtime traffic, and traffic that is not jitter tolerant comprises real-time traffic. Jitter tolerant traffic, however, may comprise any traffic that is jitter tolerant according to any suitable definition of "jitter tolerant," and jitter intolerant traffic may comprise any traffic that is not jitter tolerant. For example, jitter intolerant traffic may include voice traffic.<br>
System 10 includes real-time per-flow queues 40, non-real-time per-flow queues 30, and a processor 80.  Real-time per-flow queues 40 buffer real-time traffic from real-<br>
time flows 15, and non-real-time per-flow queues 30 buffer non-real-time traffic from non-real-time flows 20. Each real-time per-flow queue 40a may receive from real-time flows 15 a real-time flow 15a corresponding to the real-time per-flow queue 40a. Similarly, each non-real-time per-flow queue 30a receives a non-real-time flow 20a associated with the non-real-time per-flow queue 30a. As used in this document, "each" refers to each member of a set or eash member of a subset of the set. Any number nv of real-time flows 15 may be used and any suitable number nd of non-real-time flows 20 may be used. Similarly, any suitable number of real-time per-flow queues 40nv and non-realtime per-flow queues 30nd may be used. According to one embodiment, queues that queue other types of traffic such as voice traffic or other real-time traffic may be used in place of or in addition to real-time per-flow queues 40 or non-real-time per-flow queues 30.<br>
Processor 80 manages the encapsulation process that starts when an incoming packet is received at a real-time per-flow queue 40. Processor 80 determines if the packets accumulated at the real-time per-flow queue 40 form an encapsulation section of a maximum section size. If the packets do not form an encapsulation section of a maximum section size, processor 80 determines if a current encapsulation efficiency of the accumulated packets satisfies an encapsulation efficiency threshold. Processor 80 may predict a next packet size to determine if the current encapsulation efficiency would improve by waiting for the next pscket. Processor 80 may also predict a next packet arrival time to determine whether a jitter requirement would be violated by waiting for the next packet. The processor 80 may adjust the size of sections to be encapsulated at the corresponding real-time per-flow queues 40, and may also adjust the number of cells formed from the encapsulated sections. In addition, processor 80 may adjust the number nf packets received from non-real-iime per-flow queues 30 that are encapsulated to form sections and cells.<br>
Encapsulation sections from queues 40 and 30 are formed into cells. Cells of realtime encapsulation sections are copied into common real-time buffer 50, and cells of non-real-time encapsulation sections are copied into common non-real time buffer 55. The cells of an encapsulation section may be copied sequentially into real-time buffer 50 or non-real time buffer 55 such that the cells are not interleaved by cells of another encapsulation section. Real-time buffer 50 and non-real time buffer 55 may process the cells according to a first-in-first-out procedure.   According to one embodiment, buffers<br>
that buffer other types of traffic such as voice traffic or other real-time traffic may be used in place of or in addition to real-time buffer 50 or non-real time buffer 55.<br>
System 10 may also include a scheduler 60 that outputs real-time cells from realtime buffer 50 and non-real-time cells from non-real time buffer 55. Cells received at the real-time buffer 50 and non-real time buffer 55 may be handled by the scheduler 60 in order of priority. For example, real-time cells associated with the real-time buffer 50 may be assigned higher priority than non-real-time cells associated with the non-real time buffer 55 such that non-real-time cells from non-real time buffer 55 are transmitted only if real-time buffer 50 is empty. Accordingly, non-real time buffer 55 may be sufficiently large to store delayed non-real-time encapsulation sections. The scheduler 60 may further transmit the cells from the real-time buffer 50 and non-real time buffer 55 to a receiver 70. Any other suitable priority-scheduling schemes may be used to arbitrate between the realtime buffers and the non-real-time buffers.<br>
To summarize, system 10 encapsulates packets to form encapsulation sections. The number of packets to be encapsulated at each real-time per-flow queue 40 is adjusted in response to an encapsulation efficiency threshold and a jitter requirement, with the goal of reducing jitter while maintaining efficiency. Encapsulation sections are formed into cells. One embodiment of the formation of cells from encapsulation sections is to be described with reference to FIGURE 2. A cell flow may be transmitted to receiver 70. One embodiment of a cell flow is described with reference to FIGURE 3. A method for determining when to encapsulate packets is described with reference to FIGURE 4. Another embodiment of the formation of cells from encapsulation sections is described with reference to FIGURE 5. Another embodiment of a cell flow is described with reference to FIGURE 6.<br>
FIGURE 2 illustrates an embodiment of the formation of cells 250 from encapsulation section 200. According to one embodiment, encapsulation section 200 may comprise a Multi-Protocol Encapsulation (MPE) section. Encapsulation section 200 includes a section header 210, section data 212, and a section footer 214. Section header 210 may include, for example, digital video broadcasting (DVB) Multi-Protoco! Encapsulation (MPE) header data. Section header 210 may also include, for example, Digital Storage Media Command and Control (DSM-CC) header data. Section data 212 includes packets 216. According to one embodiment, each packet 216 may comprise an IP packet or datagram.   Section footer 214 may include, for example, error correction<br>
codes.  According to one embodiment, datagram sizes are variable, while section header 210 has, for example, 20 bytes, and section footer 214 has, for example, 4 bytes.<br>
According to one embodiment, encapsulation section 200 may be formed into cells 250. Each cell 250 includes a cell header 220, a payload 240, and a cell footer 230. Cell header 220 may include, for example, MPEG-2 packet header data. Cell footer 230 may include, for example, MPEG-2 packet footer data. Payload 240 may include MPEG-2 packets which have, according to one embodiment, 184 bytes.<br>
According to one embodiment, an encapsulation section 200 may be formed into one or more sequential cells 250. In the illustrated example, a cell 250a may be loaded with a first portion of section 200, a next cell 250b may be loaded with a continuing portion of section 200, and a cell 250c may be loaded with a last portion of section 200. In general, cells 250 may be formed sequentially until the encapsulation section 200 has been fragmented into one or more celis 250. According to one embodiment, a cell 250 loaded with a last portion of an encapsulation section 200 may include additional capacity 280. In the illustrated example, a last portion 245 of encapsulation section 200, comprising a section data 216c and section footers 214, is loaded into the payload qf cell 250c to form a loaded portion of the payload 240c. The last portion 245 does not fill the capacity of the payload, so cell 250c has additional capacity 280. However, cells 250 may be formed in any other suitable manner. For example, another embodiment of forming cells 250 is described with reference to FIGURES 5 and 6.<br>
FIGURE 3 illustrates an embodiment of a cell flow 300 resulting from the formation cf cell? 250 as described with reference to FIGURE 2. In general, the cell flow 300 may include cells 250 ordered sequentially, consecutively, successively, serially, or in any similar manner therewith. According to one embodiment, each cell 250 may include, for example, IP cells or datagrams 240. In the illustrated example, a last portion of cell 250c associated with datagram 240c may be followed by a first portion of a cell 250d associated with datagram 240d. According to one embodiment, a cell 250c may include additional capacity 280. Additional capacity 280 may result from the formation of cells as illustrated in FIGURE 2. In the illustrated example, a cell flow 300 containing additional capacity 280 may contribute to a delay 350. Delay 350 or jitter experienced in a cell flow 300 may be calculated as the time lapsed between a last IP datagram 240c and next IP datagram 240d. Cell flow 300 may be formed in any other suitable manner, for example, with the exclusion of additional capacity 280 as described with reference to FIGURES 5 and 6.<br>
FIGURE 4 is a flowchart illustrating an embodiment of a method for encapsulating IP packets.  The following parameters may be used to perform calculations described in<br>
the examples illustrated with reference to FIGURE 4.<br>
(Formula Removed)  In the illustrated method, packets are received at the per-flow queues 40 and 30 from real-time flows 15 and non-real-time flows 20. As an example, a packet of real-time flow 15a is received by real-time per-fiow queue 40a. In describing the embodiment of FIGURE 4, the term "per-flow queue" refers to a real-time per-flow queue 40 or a non-real-time per-flow queue 30.<br>
The method begins at step 400, where a per-flow queue receives a packet. The method then proceeds to step 402, where the size of an encapsulation section including the received packet is compared to a maximum number of bytes Qmax of an encapsulation section. The size of an encapsulation section describes the combined sizes of the one or more packets stored at the per-flow queue. According to one embodiment, the maximum number of bytes Qmax may be 4080 bytes. If the size of the encapsulation section exceeds the maximum number of bytes Qmax associated with the per-flow queue, the method proceeds to step 416 to encapsulate the packet.<br>
If the size of the encapsulation section does not satisfy the maximum number of bytes Qmax associated with the per-flow queue, the method proceeds to step 404 to determine if a current encapsulation efficiency () of the one or more packets accumulated at the per-flow queue satisfies a first threshold. In general, step 404 determines if a current encapsulation efficiency ) satisfies a real-time encapsulation efficiency threshold  n  or a non-real time encapsulation efficiency threshold  m.<br>
According to one embodiment, the current encapsulation efficiency may be defined as, for example, the ratio of a number λ of payload bytes associated with an encapsulation section comprising one or more packets accumulated in the per-flow queue to the total number of bytes of the encapsulation section. According to one embodiment, the payload bytes refer to the IP-traffic bytes that generate an encapsulation section. Accordingly, the current encapsulation efficiency may be described by Equation (1):<br>
(Equation Removed)	(1)<br>
where [.] is the ceiling function. Referring to Equation (1), the larger the value of the number % of payload bytes, the higher the current encapsulation efficiency ()-However, the trend may not be monotonic due to padding of unused bytes in a cell. For example,   the   optimal   efficiency   opt,   for   one   embodiment,   is   achieved   when<br>
number = Sopt = 4024bytes, as described by Equation (2):<br>
(Equation Removed)	(2)<br>
According to one embodiment, real-time encapsulation efficiency threshold „and non-real time encapsulation efficiency threshold  nn  are predetermined encapsulation<br>
efficiency thresholds associated with a corresponding real-time or non-real-time per-flow queue, respectively. An encapsulation efficiency threshold may describe a minimum acceptable encapsulation efficiency. For example, the value of threshold rl may be set approximately at 80%. To summarize step 404, a current encapsulation efficiency ) for packets received at the per-flow queue is obtained from Equation (1). The current encapsulation efficiency  () is compared with an encapsulation efficiency threshold to<br>
determine if the encapsulation efficiency threshold has been satisfied. If the current encapsulation efficiency does not satisfy the encapsulation efficiency threshold at step 404, the method proceeds to step 420 to wait for the next packet.<br>
If the current encapsulation efficiency satisfies the encapsulation efficiency threshold at step 404, the method proceeds to steps 406 and 408 to predict a next encapsulation efficiency and a next packet arrival time. According to one embodiment, a next encapsulation efficiency may be associated with one or more packets including a<br>
predicted next packet accumulated at a per-flow queue. In the illustrated example, predicting the next encapsulation efficiency comprises predicting a next packet size. The next packet arrival time is calculated to predict delay.<br>
According to one embodiment, steps 406 and 408 are calculated, for example, using a recursion procedure. According to another embodiment, predicting a next packet size and predicting a next packet arrival time may be obtained by an iterative procedure or any other procedure suitable to generate the predicted values of a next packet size and a next packet arrival time.<br>
For example, steps 406 and 408 may be performed in the following manner. A predicted next packet size Si(j}, used to calculate a next encapsulation efficiency at step 406, may be associated with the size of bytes of the jth packet of the ith flow. Similarly, a predicted next packet arrival time T/j) is associated with the Jth packet arrival time of the ith queue flow. The exponentially weighted moving averages (EMWAs) of Tj(j) and Si(j) may be defined as µmier(i,j) and nsize (ij) given by Equations (3) and (4), respectively:<br>
(Equation Removed)	(3)<br>
(Equation Removed)	(4)<br>
where ffimer andffiize are forgetting factors that determine the degree of adaptiveness in the estimation of the moving average.<br>
According to one embodiment, the next encapsulation efficiency calculated at step 406 and the prediction of next packer arrival time calculated at step 408, may include modeling a sequence according to an autoregressive model. In the illustrated example, an arrival time sequence may be modeled by defining (τt(j) = Tt(j) - µin,er(i, j)) and a packet size sequence may be modeled by defining (st(j) =St(j) - µsize (ij)), where τj(j) and st(j) are normalized, zero-mean, packet inter-anival times and sizes, respectively. Thus, according to one embodiment, for each i, the sequences τ :j'=l,2,...) and (stf) :j—1,2,...) may be obtained according to an autoregressive model of order one (AR(1)) with time-varying coefficients as described by Equations (5) and (6):<br>
(Equation Removed)	(5)<br>
(Equation Removed)	(6)<br>
where a.j(k) and P(k) are time-varying coefficients, {e(j) : j = 1,2,...} is a sequence of independent identically distributed zero-mean random variables of the noise processes, and σ, and ξ are variance-related coefficients of the noise processes. The modeling of a sequence may be performed using any autoregressive techniques.<br>
As discussed previously, the predicted size of the next packet Si(j) and predicted next packet arrival time T(j) are determined at steps 406 and 408, respectively. For an ith per-flow queue flow, where i - 1,2,..., nv, and j packets, where j=\, 2,..., m, and m is the index of the most recent packet to arrive at the encapsulator, the predicted values of Tt(j) and Si(j) for j &gt; m during the r-step of a recursion procedure are described respectively by Equations (7) and (8):<br>
(Equation Removed)	(7)<br>
(Equation Removed)	(8)<br>
where the adjusted coefficients a, (m) and P,(m) are obtained by minimizing the mean-square error as described by Equations (9) and (10):<br>
(Equation Removed) 9,10<br>
As previously described, the illustrated method may use a recursion procedure. According to one embodiment, the adjusted coefficient α(m) may be generated recursively each time a next packet arrival time needs to be predicted. To predict a next packet arrival time called for at step 408, a value for α,(m) may be determined using recursive variables Y((k) and Zi(k) as defined by Equations (11) and (12):<br>
(Equation Removed)11,12<br>
where the r-step prediction may be obtained using the following procedure once the mth measurement for the last arrival time is available:<br>
For all i= 1,..., nVf do<br>
(Initialization) After the arrival of the first packet, do<br>
t(\;r) = juinter(hl) = Tl(1)<br>
Zr,=o<br>
Z,.=0 (Recursion) For each subsequent cell arrival, jn, do<br>
Update EMWA: µinter(i,m)=ff inter µ inter(i,m-1)+(1-ffinter)T{m)<br>
Zi = Zi + Ti2(m--\) αi(m) = Y,IZi<br>
T, (m;r) = (α, (m))' (T) (m) - µjnt cr (i, m)) + µte er (i, m)<br>
End-recursion End-for<br>
The prediction of the next encapsulation efficiency at step 406 may be determined using a similar recursion procedure. Once the prediction of next encapsulation efficiency is determined, the method proceeds to step 410 to determine if the predicted next encapsulation efficiency exceeds the current encapsulation efficiency previously determined at step 404 by Equation (1). If the next encapsulation efficiency is lower than the current encapsulation efficiency, the method proceeds to step 416 to encapsulate the packets accumulated at the per-flow queue.<br>
If the next encapsulation efficiency is higher than the current encapsulation efficiency, the method proceeds to step 412 to determine the expected delay associated with receiving the next packet. In the illustrated method, the expected delay may be defined as the absolute value of the difference between the delay of the first packet at the encapsulator and the delay of the next packet. According to one embodiment, when a first packet arrives at the encapsulator, the time of arrival of the first packet is noted until the value is updated with the time of arrival of a subsequent or next packet. The time of arrival of the first bit of the Ath packet in the ith flow queue may be represented by t(i)start (k) where k=1,2,..., and i-1,2,..., nv. The times of arrival and departure for the first bit of a first packet may be represented by t(i)starti and t0Jrfinish,l   Similarly, the times of<br>
arrival and departure for the first bit of a second packet may be represented by ftstart,2 and ft finish,2 The expected delay dj may be defined by Equation (13):<br>
(Equation Removed) In the worst case, the computation of dt may be performed after each packet arrives at the per-flow queue.<br>
To initialize the process of determining delay d, at step 412, t(i&gt;star,j = t(i)fmiSh,1 - 0 and t(iKAaru2 = t(i)st-rt,i- Subsequently, when an encapsulation section is formed, the value of t(i)start,i is updated and used to update t('fi„jSh,i as described by Equation (14):<br>
(Equation Removed)<br>
where S is the current number of bytes in the per-flow queue, S^}mM is the size of the<br>
most recent packet to arrive from the /th per-flow queue,  is the peak rate in bits per second of the /th flow, Rencap is the rate of the encapsulator in bps, and QRT is the number of encapsulated cells in the real-time per-flow queue 40 at the time of computing ft finish,1-According to one embodiment, time ft finish, 1 may be generated by, for example, using expression t(I)slart 1 +(8S('JCurretmRi), if it is computed at or after the last bit of the first packet arrives. After the encapsulation section including the first packet is formed, the value of time ftstart,2 is updated.<br>
Determining the delay dj of Equation (13) at step 412 may require the prediction of time ftfmishj- The predicted value of time ftfmishj may be referred to as ifnl:sha and described by Equation (15):<br>
(Equation Removed)<br>
where:<br>
(Equation Removed)<br>
and QpredRT(t) is the predicted number of cells at the real-time buffer 50 after t seconds from the current time taimill{Qpred(0) -= QRr). The predicted packet arrival time T(i)next, and the predicted packet size S(i)nest of Equation (16) may be obtained from Equations (7) and (8) as previously described.<br>
To generate predicted time t(j)finish,2 in accordance with Equation (15), the predicted<br>
number of cells at the real-time bufler 50 QpredRT (W(,)) may be obtained from Equation<br>
(Equation Removed) 17<br>
where S(j)llott(W(i)) is described as the number of additional bytes that could accumulate at queuey as denned by Equations (18) through (22):<br>
(Equation Removed) <br>
(18) where the recursion variable r* is the largest integer that satisfies Equation (19):<br>
(Equation Removed)and where m(j)last is the index of the most recent packet to arrive at the jth queue.<br>
According to one embodiment, the recursion variable r* may be, for example, the largest integer that satisfies Equation (20):<br>
(Equation Removed)for any positive real value number t. Thus, using Equation (7) to obtain predicted time Tj(m(j)last) and manipulating the result into Equation (20), a recursion function r(t) may be obtained as described by Equation (21):<br>
(Equation Removed)<br>
Finally, once the recursion junction r(t) is generated from Equation (21), for example, by using an iterative process, recursion variable r* may be obtained by substituting time t in Equation (21) with W0) +tcurrent -t^(j)(mj(j)last) so that a solution for<br>
S(i)tol(W(i)) may be obtained from Equation (22):<br>
(Equation Removed)where ßj = ßj (m(j)last) and Sj =Sj.(m(j)last). Thus, using Equation (22) to obtain S(j)lot(W(i)) for each j=l,2,...,nv, a value for the predicted number of cells at the real-time buffer 50 QpredRT'(W')) may be obtained from Equation (17) and therefore a delay d, in accordance with Equation (13) may be obtained.<br>
The method proceeds to step 414 to determine if the delay associated with waiting for a next packet is within jitter bounds. The jitter bounds may comprise a predetermined maximum jitter requirement that functions as a delay threshold for evaluating a delay. According to one embodiment, the maximum jitter requirement is, for example, in the range of 25 to 35 milliseconds such as approximately 30 milliseconds. The delay obtained in step 412 is compared with the jitter requirement. A delay is within jitter bounds when the delay is lower than the jitter requirement. If the delay is within jitter bounds, that is, the delay is lower than the jitter requirement, the method proceeds to step 420 to wait and accumulate the next packet expected at the queue. If the delay is not within jitter bounds, that is, the delay is equal to or greater than the jitter requirement, the method proceeds to encapsulation of the accumulated packets in the per-flow queue under step 416 and to subsequently form cells from the encapsulation section at step 418. Cells may be formed in any suitable manner. For example, cells may be formed according to the procedure described with reference to FIGURE 2. After forming the cell, the method terminates.<br>
To summarize, if the packets accumulated satisfy the encapsulation efficiency threshold, the predicted jitter is evaluated to determine if the accumulated packets are encapsulated. If the predicted jitter is low, more packets will be accumulated. If the predicted jitter is too high, then the accumulated packets are encapsulated. The method may include more, fewer, or different steps. The steps of the method may be performed in<br>
any suitable order.   For example, the prediction of the arrival time at step 408 may be performed after the determination at step 410.<br>
FIGURE 5 illustrates another embodiment of the formation of cells 550 from encapsulation sections 500. According to one embodiment, encapsulation section 500 may comprise a Muiii-Proiocoi Encapsulation (MPfi) section. Each encapsulation section 500 includes a section header 210, section data 215 and 218, and a section footer 214. Section header 210 may include, for example, digital video broadcasting (DVB) Multi-Protocol Encapsulation (MPE) header data. According to one embodiment, section header 210 may also include, for example, Digital Storage Media Command and Control (DSM-CC) header data. Encapsulation section 500a comprises section data 218 and encapsulation section 500b comprises section data 215, where each section data 218 and 215 comprises packets. According to one embodiment, each packet 218 and 215 may comprise an IP packet or datagram. Section footer 214 may include, for example, error correction codes. Datagram sizes may be variable, while section header 210 has, for example, 20 bytes, and section footer 214 has, for example, four bytes.<br>
Encapsulation section 500 may be formed into cells 550. Each cell 550 includes a cell header 220, a payload 540, and a cell footer 230. Cell header 220 may include, for example, MPEG-2 packet header data. Cell footer 230 may include, for example, MPEG-2 packet footer data. Payload 540 may include MPEG-2 packets, which have, according to one embodiment, 184 bytes.<br>
According to one embodiment, one or more encapsulation sections 500 may be formed into one or more sequential cells 550. In the illustrated example, a cell 550a may be loaded with a first portion of encapsulation section 500a, a next cell 550b may be loaded with a next portion of encapsulation section 500a, while another cell 550c may be loaded with a last portion of section 500a. In general, cells may be formed sequentially until an encapsulation section 500 has been formed into one or more cells. In the illustrated example, the last portion 580 of encapsulation section 500a may be loaded into a payload 540c of a cell 550c, and a first portion 585 of a next encapsulation section 500b is loaded into the payload 540c of cell 550c, so that a condition of having additional capacity 280 as described by FICURE 2 is substantially avoided.<br>
FIGURE 6 illustrates another embodiment of a cell flow 600 resulting from the formation of cells 550 described with reference to FIGURE 5. In general, the cell flow 600 may include packets 212 and 235 ordered sequentially, consecutively, successively, serially, or in any similar manner therewith.  According to one embodiment, packets 212<br>
and 215 may include, for example, IP packets or datagrams. In the illustrated example, the cell flow 600 may iaclude cell footer 610 and cell header 620 that may cause a delay 350. The delay may result substantially from cell footer 61.0 and cell header 620 or may include any other suitable content. According to one embodiment, a cell flow 600 may be obtained to improve a delay or jitter. In the illustrated example, there may be a smaller delay 350 at a ceil flow 600 described by FIGURE 6 compared to the delay 350 described by FIGURE 3, where an additional capacity 280 contributes to the content of the delay in the embodiment shown in FIGURE 3. A cell flow 600 as described by FIGURE 6 may therefore improve the delay 350 associated with receiving packets 212 and 215 when, for example, an additional capacity as described by FIGURE 3 has been substantially avoided.<br>
Certain embodiments of the invention may provide one or more technical advantages. A technical advantage of one embodiment may be that the size of an encapsulation section is adjusted in response to a current encapsulation efficiency and a predicted jitter in an effort to control jitter while maintaining efficiency. If the packets accumulated do not satisfy a predicted encapsulation efficiency threshold, the packets are encapsulated to maintain efficiency. Another technical advantage of an example may be that a delay associated with receiving predicted packets may be determined and if the delay satisfies a jitter requirement, the accumulated packets may be encapsulated to control jitter. Another technical advantage of an example may be that encapsulation sections packets may be formed into cells to improve jitter. The encapsulation sections may be formed into cells so that additional capacity in the cells is avoided.<br>
Although an embodiment of the invention and its advantages are described in detail, a person skilled in the art could make various alterations, additions, and omissions without departing from the spirit and scope of the present invention as defined by the appended claims.<br><br><br><br><br>
WE CLAIM:<br>
1.   A system (10) for encapsulating packets, comprising of:<br>
means for receiving a plurality of packets (216) in a queue and a processor (80)<br>
coupled to the queue (30, 40) to:<br>
repeat the following for each packet (216) of a subset of the plurality of packets (216) until the subset of the plurality of packets (216) is encapsulated into an encapsulation section (200):<br>
means for accumulating a packet (216) at the queue (30, 40); means for determining a current encapsulation efficiency associated with one or more packets (216) accumulated at the queue (30, 40)<br>
means for predicting a next encapsulation efficiency associated with the one or more packets (216) accumulated at the queue (30, 40) and with a predicted next packet (216) by;<br>
means for predicting a next packet size; and<br>
means for calculating the next encapsulation efficiency in accordance with the next packet size; means for encapsulating the one or more packets (216) accumulated at the queue<br>
into the encapsulation section(200) if the current encapsulation efficiency is greater<br>
than the next encapsulation efficiency.<br>
at least one buffer (50, 55) to receive a plurality of cells (250) from the queue (30,<br>
40), the at least one buffer (50, 55) comprising at least one real-time buffer (50)<br>
associated with a first priority; and<br>
a scheduler (60) to control a flow of the plurality of cells (250) from the at least one buffer (50, 55), the scheduler (60) being operable to grant priority to the plurality of cells (250) received from the at least one buffer (50, 55).<br>
2.	The system as claimed in claim 1, wherein the encapsulation efficiency<br>
threshold comprises a minimum encapsulation efficiency.<br>
3. The system as claimed in claim 1, wherein the current encapsulation efficiency comprises a ratio of a number of payload bytes associated with a predicted encapsulation section (200) comprising the one or more packets (216) accumulated at the queue (30, 40) to a total number of bytes of the predicted encapsulation section (200) comprising the one or more packets (216).<br>
4.	The system as claimed in claim 1, wherein the jitter requirement comprises<br>
a maximum jitter requirement.<br></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjYxOC1kZWxucC0yMDA1LWFic3RyYWN0LnBkZg==" target="_blank" style="word-wrap:break-word;">2618-delnp-2005-abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjYxOC1ERUxOUC0yMDA1LUNsYWltcy5wZGY=" target="_blank" style="word-wrap:break-word;">2618-DELNP-2005-Claims.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjYxOC1kZWxucC0yMDA1LWNvbXBsZXRlIHNwZWNpZmljYXRpb24gKGFzLGZpbGVzKS5wZGY=" target="_blank" style="word-wrap:break-word;">2618-delnp-2005-complete specification (as,files).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjYxOC1kZWxucC0yMDA1LWNvbXBsZXRlIHNwZWNpZmljYXRpb24gKGdyYW50ZWQpLnBkZg==" target="_blank" style="word-wrap:break-word;">2618-delnp-2005-complete specification (granted).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjYxOC1kZWxucC0yMDA1LWNvcnJlc3BvbmRlbmNlLW90aGVycy5wZGY=" target="_blank" style="word-wrap:break-word;">2618-delnp-2005-correspondence-others.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjYxOC1kZWxucC0yMDA1LWNvcnJlc3BvbmRlbmNlLXBvLnBkZg==" target="_blank" style="word-wrap:break-word;">2618-delnp-2005-correspondence-po.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjYxOC1ERUxOUC0yMDA1LURlc2NyaXB0aW9uIChDb21wbGV0ZSkucGRm" target="_blank" style="word-wrap:break-word;">2618-DELNP-2005-Description (Complete).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjYxOC1ERUxOUC0yMDA1LURyYXdpbmdzLnBkZg==" target="_blank" style="word-wrap:break-word;">2618-DELNP-2005-Drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjYxOC1kZWxucC0yMDA1LWZvcm0tMS5wZGY=" target="_blank" style="word-wrap:break-word;">2618-delnp-2005-form-1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjYxOC1kZWxucC0yMDA1LWZvcm0tMTgucGRm" target="_blank" style="word-wrap:break-word;">2618-delnp-2005-form-18.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjYxOC1ERUxOUC0yMDA1LUZvcm0tMi5wZGY=" target="_blank" style="word-wrap:break-word;">2618-DELNP-2005-Form-2.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjYxOC1kZWxucC0yMDA1LWZvcm0tMy5wZGY=" target="_blank" style="word-wrap:break-word;">2618-delnp-2005-form-3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjYxOC1kZWxucC0yMDA1LWZvcm0tNS5wZGY=" target="_blank" style="word-wrap:break-word;">2618-delnp-2005-form-5.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjYxOC1kZWxucC0yMDA1LWdwYS5wZGY=" target="_blank" style="word-wrap:break-word;">2618-delnp-2005-gpa.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MjYxOC1kZWxucC0yMDA1LXBjdC0yMTAucGRm" target="_blank" style="word-wrap:break-word;">2618-delnp-2005-pct-210.pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="257464-isolated-double-stranded-ribonucleic-acid-dsrna.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="257466-responsive-coated-particles.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>257465</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>2618/DELNP/2005</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>41/2013</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>11-Oct-2013</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>05-Oct-2013</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>15-Jun-2005</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>RAYTHEON COMAPNY</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>870 WINTER STREET WALTHAM, MASSACHUSETTS 02451 U.S.A.</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>ROSENGARD, PHILIP I</td>
											<td>20986 FLATBOAT COURT, STERLING, VIRGINIA 20165-7443 U.S.A</td>
										</tr>
										<tr>
											<td>2</td>
											<td>KRUNZ, MARWAN M</td>
											<td>6601 EAST GHOST FLOWER DRIVE, TUCSON, ZRIZONA 85750 U.S.A.</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>H04L 12/46</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/US2003/030957</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2003-10-01</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>10/322,120</td>
									<td>2002-12-17</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/257465-system-for-encapsulating-packets-in-a-communication-system by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 08:19:34 GMT -->
</html>
