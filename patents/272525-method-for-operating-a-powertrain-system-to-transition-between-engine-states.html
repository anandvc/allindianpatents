<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/272525-method-for-operating-a-powertrain-system-to-transition-between-engine-states by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 04 Apr 2024 23:55:41 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 272525:METHOD FOR OPERATING A POWERTRAIN SYSTEM TO TRANSITION BETWEEN ENGINE STATES</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">METHOD FOR OPERATING A POWERTRAIN SYSTEM TO TRANSITION BETWEEN ENGINE STATES</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>A powertrain system includes a multi-cylinder engine coupled to a hybrid transmission. The engine is selectively operative in one of a plurality of main engine states to transfer engine torque to the hybrid transmission. A method for operating a powertrain system includes monitoring an operator torque request, determining a preferred main engine state and a preferred engine torque associated with the preferred engine state, determining an engine state transition path from a present main engine state to the preferred main engine state including an engine transition state, and executing the engine state transition path between the present main engine state and the preferred main engine state and adjusting engine torque to the preferred engine torque.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>METHOD FOR OPERATING A POWERTRAIN SYSTEM TO<br>
TRANSITION BETWEEN ENGINE STATES<br>
CROSS REFERENCE TO RELATED APPLICATION<br>
[0001] This application claims the benefit of U.S. Provisional Application<br>
No. 60/984,970 filed on 11/02/2007 which is hereby incorporated herein by<br>
reference.<br>
TECHNICAL FIELD<br>
[0002] This disclosure pertains to control systems for hybrid powertrain<br>
systems.<br>
BACKGROUND<br>
[0003] The statements in this section merely provide background<br>
information related to the present disclosure and may not constitute prior art.<br>
[0004] Known hybrid powertrain architectures can include multiple torque-<br>
generative devices, including internal combustion engines and non-<br>
combustion torque machines, e.g., electric machines, which transmit torque<br>
through a transmission device to an output member. One exemplary hybrid<br>
powertrain includes a two-mode, compound-split, electro-mechanical<br>
transmission which utilizes an input member for receiving tractive torque from<br>
a prime mover power source, preferably an internal combustion engine, and an<br>
output member. The output member can be operatively connected to a<br><br>
driveline for a motor vehicle for transmitting tractive torque thereto.<br>
Machines, operative as motors or generators, can generate torque inputs to the<br>
transmission independently of a torque input from the internal combustion<br>
engine. The Machines may transform vehicle kinetic energy transmitted<br>
through the vehicle driveline to energy that is storable in an energy storage<br>
device. A control system monitors various inputs from the vehicle and the<br>
operator and provides operational control of the hybrid powertrain, including<br>
controlling transmission operating range state and gear shifting, controlling the<br>
torque-generative devices, and regulating the power interchange among the<br>
energy storage device and the machines to manage outputs of the transmission,<br>
including torque and rotational speed.<br>
SUMMARY<br>
[0005] A powertrain system includes a multi-cylinder engine coupled to a<br>
hybrid transmission. The engine is selectively operative in one of a plurality of<br>
main engine states to transfer engine torque to the hybrid transmission. A<br>
method for operating a powertrain system includes monitoring an operator<br>
torque request, determining a preferred main engine state and a preferred<br>
engine torque associated with the preferred engine state, determining an<br>
engine state transition path from a present main engine state to the preferred<br>
main engine state including an engine transition state, and executing the<br>
engine state transition path between the present main engine state and the<br>
preferred main engine state and adjusting engine torque to the preferred engine<br>
torque.<br><br>
BRIEF DESCRIPTION OF THE DRAWINGS<br>
[0006] One or more embodiments will now be described, by way of<br>
example, with reference to the accompanying drawings, in which:<br>
[0007] Fig. 1 is a schematic diagram of an exemplary hybrid powertrain, in<br>
accordance with the present disclosure;<br>
[0008] Fig. 2 is a schematic diagram of an exemplary architecture for a<br>
control system and hybrid powertrain, in accordance with the present<br>
disclosure;<br>
[0009] Figs. 3, 4 and 5 are schematic flow diagrams of a control scheme, in<br>
accordance with the present disclosure;<br>
[0010] Fig. 6 is a process flow diagram of a state machine in accordance<br>
with the present disclosure; and<br>
[0011] Fig. 7 is a graphical representation of engine states and engine torque<br>
in according with the present disclosure.<br>
DETAILED DESCRIPTION<br>
[0012] Referring now to the drawings, wherein the showings are for the<br>
purpose of illustrating certain exemplary embodiments only and not for the<br>
purpose of limiting the same, Figs. 1 and 2 depict an exemplary hybrid<br>
powertrain. The exemplary hybrid powertrain in accordance with the present<br>
disclosure is depicted in Fig. 1, comprising a two-mode, compound-split,<br>
electro-mechanical hybrid transmission 10 operatively connected to an engine<br>
14 and first and second electric machines ('MG-A') 56 and ('MG-B') 72. The<br>
engine 14 and first and second electric machines 56 and 72 each generate<br>
power which can be transferred to the transmission 10. The power generated<br><br>
by the engine 14 and the first and second electric machines 56 and 72 and<br>
transferred to the transmission 10 is described in terms of input and motor<br>
torques, referred to herein as TI, TA, and TB respectively, and speed, referred<br>
to herein as NI, NA, and NB, respectively.<br>
[0013] The exemplary engine 14 comprises a multi-cylinder internal<br>
combustion engine selectively operative in several states to transfer torque to<br>
the transmission 10 via an input shaft 12, and can be either a spark-ignition or<br>
a compression-ignition engine. The engine 14 includes a crankshaft (not<br>
shown) operatively coupled to the input shaft 12 of the transmission 10. A<br>
rotational speed sensor 11 monitors rotational speed of the input shaft 12.<br>
Power output from the engine 14, comprising rotational speed and engine<br>
torque, can differ from the input speed NI and the input torque TI to the<br>
transmission 10 due to placement of torque-consuming components on the<br>
input shaft 12 between the engine 14 and the transmission 10, e.g., a hydraulic<br>
pump (not shown) and/or a torque management device (not shown).<br>
[0014] The exemplary transmission 10 comprises three planetary-gear sets<br>
24, 26 and 28, and four selectively engageable torque-transferring devices, i.e.,<br>
clutches C1 70, C2 62, C3 73, and C4 75. As used herein, clutches refer to<br>
any type of friction torque transfer device including single or compound plate<br>
clutches or packs, band clutches, and brakes, for example. A hydraulic control<br>
circuit 42, preferably controlled by a transmission control module (hereafter<br>
'TCM') 17, is operative to control clutch states. Clutches C2 62 and C4 75<br>
preferably comprise hydraulically-applied rotating friction clutches. Clutches<br>
C1 70 and C3 73 preferably comprise hydraulically-controlled stationary<br>
devices that can be selectively grounded to a transmission case 68. Each of<br><br>
the clutches C1 70, C2 62, C3 73, and C4 75 is preferably hydraulically<br>
applied, selectively receiving pressurized hydraulic fluid via the hydraulic<br>
control circuit 42.<br>
[0015] The first and second electric machines 56 and 72 preferably comprise<br>
three-phase AC machines, each including a stator (not shown) and a rotor (not<br>
shown), and respective resolvers 80 and 82. The motor stator for each<br>
machine is grounded to an outer portion of the transmission case 68, and<br>
includes a stator core with coiled electrical windings extending therefrom.<br>
The rotor for the first electric machine 56 is supported on a hub plate gear that<br>
is operatively attached to shaft 60 via the second planetary gear set 26. The<br>
rotor for the second electric machine 72 is fixedly attached to a sleeve shaft<br>
hub 66.<br>
[0016] Each of the resolvers 80 and 82 preferably comprises a variable<br>
reluctance device including a resolver stator (not shown) and a resolver rotor<br>
(not shown). The resolvers 80 and 82 are appropriately positioned and<br>
assembled on respective ones of the first and second electric machines 56 and<br>
72. Stators of respective ones of the resolvers 80 and 82 are operatively<br>
connected to one of the stators for the first and second electric machines 56<br>
and 72. The resolver rotors are operatively connected to the rotor for the<br>
corresponding first and second electric machines 56 and 72. Each of the<br>
resolvers 80 and 82 is signally and operatively connected to a transmission<br>
power inverter control module (hereafter 'TPIM') 19, and each senses and<br>
monitors rotational position of the resolver rotor relative to the resolver stator,<br>
thus monitoring rotational position of respective ones of first and second<br>
electric machines 56 and 72. Additionally, the signals output from the<br><br>
resolvers 80 and 82 are interpreted to provide the rotational speeds for first<br>
and second electric machines 56 and 72, i.e., NAand NB, respectively.<br>
[0017] The transmission 10 includes an output member 64, e.g. a shaft,<br>
which is operably connected to a driveline 90 for a vehicle (not shown), to<br>
provide output power to the driveline 90 that is transferred to vehicle wheels<br>
93, one of which is shown in Fig. 1. The output power at the output member<br>
64 is characterized in terms of an output rotational speed NO and an output<br>
torque TO. A transmission output speed sensor 84 monitors rotational speed<br>
and rotational direction of the output member 64. Each of the vehicle wheels<br>
93 is preferably equipped with a sensor 94 adapted to monitor wheel speed,<br>
the output of which is monitored by a control module of a distributed control<br>
module system described with respect to Fig. 2, to determine vehicle speed,<br>
and absolute and relative wheel speeds for braking control, traction control,<br>
and vehicle acceleration management.<br>
[0018] The input torque from the engine 14 and the motor torques from the<br>
first and second electric machines 56 and 72 (TI, TA, and TB respectively) are<br>
generated as a result of energy conversion from fuel or electrical potential<br>
stored in an electrical energy storage device (hereafter 'ESD') 74. The ESD<br>
74 is high voltage DC-coupled to the TPIM 19 via DC transfer conductors 27.<br>
The transfer conductors 27 include a contactor switch 38. When the contactor<br>
switch 38 is closed, under normal operation, electric current can flow between<br>
the ESD 74 and the TPIM 19. When the contactor switch 38 is opened electric<br>
current flow between the ESD 74 and the TPIM 19 is interrupted. The TPIM<br>
19 transmits electrical power to and from the first electric machine 56 by<br>
transfer conductors 29, and the TPIM 19 similarly transmits electrical power<br><br>
to and from the second electric machine 72 by transfer conductors 31 to meet<br>
the torque commands for the first and second electric machines 56 and 72 in<br>
response to the motor torques TA and TB. Electrical current is transmitted to<br>
and from the ESD 74 in accordance with whether the ESD 74 is being charged<br>
or discharged.<br>
[0019] The TPIM 19 includes the pair of power inverters (not shown) and<br>
respective motor control modules (not shown) configured to receive the torque<br>
commands and control inverter states therefrom for providing motor drive or<br>
regeneration functionality to meet the commanded motor torques TA and TB.<br>
The power inverters comprise known complementary three-phase power<br>
electronics devices, and each includes a plurality of insulated gate bipolar<br>
transistors (not shown) for converting DC power from the ESD 74 to AC<br>
power for powering respective ones of the first and second electric machines<br>
56 and 72, by switching at high frequencies. The insulated gate bipolar<br>
transistors form a switch mode power supply configured to receive control<br>
commands. There is typically one pair of insulated gate bipolar transistors for<br>
each phase of each of the three-phase electric machines. States of the<br>
insulated gate bipolar transistors are controlled to provide motor drive<br>
mechanical power generation or electric power regeneration functionality.<br>
The three-phase inverters receive or supply DC electric power via DC transfer<br>
conductors 27 and transform it to or from three-phase AC power, which is<br>
conducted to or from the first and second electric machines 56 and 72 for<br>
operation as motors or generators via transfer conductors 29 and 31<br>
respectively.<br><br>
[0020] Fig. 2 is a schematic block diagram of the distributed control module<br>
system. The elements described hereinafter comprise a subset of an overall<br>
vehicle control architecture, and provide coordinated system control of the<br>
exemplary hybrid powertrain described in Fig. 1. The distributed control<br>
module system synthesizes pertinent information and inputs, and executes<br>
algorithms to control various actuators to meet control objectives, including<br>
objectives related to fuel economy, emissions, performance, drivability. and<br>
protection of hardware, including batteries of ESD 74 and the first and second<br>
electric machines 56 and 72. The distributed control module system includes<br>
an engine control module (hereafter 'ECM') 23, the TCM 17, a battery pack<br>
control module (hereafter 'BPCM') 21, and the TPIM 19. A hybrid control<br>
module (hereafter 'HCP') 5 provides supervisory control and coordination of<br>
the ECM 23, the TCM 17, the BPCM 21, and the TPIM 19. A user interface<br>
('UI') 13 is operatively connected to a plurality of devices through which a<br>
vehicle operator controls or directs operation of the electro-mechanical hybrid<br>
powertrain. The devices include an accelerator pedal 113 ('AP'), an operator<br>
brake pedal 112 ('BP'), a transmission gear selector 114 ('PRNDL'), and a<br>
vehicle speed cruise control (not shown). The transmission gear selector 114<br>
may have a discrete number of operator-selectable positions, including the<br>
rotational direction of the output member 64 to enable one of a forward and a<br>
reverse direction.<br>
[0021] The aforementioned control modules communicate with other control<br>
modules, sensors, and actuators via a local area network (hereafter 'LAN') bus<br>
6. The LAN bus 6 allows for structured communication of states of operating<br>
parameters and actuator command signals between the various control<br><br>
modules. The specific communication protocol utilized is application-specific.<br>
The LAN bus 6 and appropriate protocols provide for robust messaging and<br>
multi-control module interfacing between the aforementioned control<br>
modules, and other control modules providing functionality including e.g.,<br>
antilock braking, traction control, and vehicle stability. Multiple<br>
communications buses may be used to improve communications speed and<br>
provide some level of signal redundancy and integrity. Communication<br>
between individual control modules can also be effected using a direct link,<br>
e.g., a serial peripheral interface ('SPI') bus (not shown).<br>
[0022] The HCP 5 provides supervisory control of the hybrid powertrain,<br>
serving to coordinate operation of the ECM 23, TCM 17, TPIM 19, and<br>
BPCM 21. Based upon various input signals from the user interface 13 and<br>
the hybrid powertrain, including the ESD 74, the HCP 5 determines an<br>
operator torque request, an output torque command, an engine input torque<br>
command, clutch torque(s) for the applied torque-transfer clutches C1 70, C2<br>
62, C3 73, C4 75 of the transmission 10, and the motor torques TA and TB for<br>
the first and second electric machines 56 and 72.<br>
[0023] The ECM 23 is operatively connected to the engine 14, and functions<br>
to acquire data from sensors and control actuators of the engine 14 over a<br>
plurality of discrete lines, shown for simplicity as an aggregate bi-directional<br>
interface cable 35. The ECM 23 receives the engine input torque command<br>
from the HCP 5. The ECM 23 determines the actual engine input torque, TI,<br>
provided to the transmission 10 at that point in time based upon monitored<br>
engine speed and load, which is communicated to the HCP 5. The ECM 23<br>
monitors input from the rotational speed sensor 11 to determine the engine<br><br>
input speed to the input shaft 12, which translates to the transmission input<br>
speed, NI. The ECM 23 monitors inputs from sensors (not shown) to<br>
determine states of other engine operating parameters including, e.g., a<br>
manifold pressure, engine coolant temperature, ambient air temperature, and<br>
ambient pressure. The engine load can be determined, for example, from the<br>
manifold pressure, or alternatively, from monitoring operator input to the<br>
accelerator pedal 113. The ECM 23 generates and communicates command<br>
signals to control engine actuators, including, e.g., fuel injectors, ignition<br>
modules, and throttle control modules, none of which are shown.<br>
[0024] The TCM 17 is operatively connected to the transmission 10 and<br>
monitors inputs from sensors (not shown) to determine states of transmission<br>
operating parameters. The TCM 17 generates and communicates command<br>
signals to control the transmission 10, including controlling the hydraulic<br>
control circuit 42. Inputs from the TCM 17 to the HCP 5 include estimated<br>
clutch torques for each of the clutches, i.e., C1 70, C2 62, C3 73, and C4 75,<br>
and rotational output speed, No, of the output member 64. Other actuators and<br>
sensors may be used to provide additional information from the TCM 17 to the<br>
HCP 5 for control purposes. The TCM 17 monitors inputs from pressure<br>
switches (not shown) and selectively actuates pressure control solenoids (not<br>
shown) and shift solenoids (not shown) of the hydraulic control circuit 42 to<br>
selectively actuate the various clutches C1 70, C2 62, C3 73, and C4 75 to<br>
achieve various transmission operating range states, as described hereinbelow.<br>
[0025] The BPCM 21 is signally connected to sensors (not shown) to<br>
monitor the ESD 74, including states of electrical current and voltage<br>
parameters, to provide information indicative of parametric states of the<br><br>
batteries of the ESD 74 to the HCP 5. The parametric states of the batteries<br>
preferably include battery state-of-charge, battery voltage, battery temperature,<br>
and available battery power, referred to as a range PBAT_MINto PBAT MAX.<br>
[0026] A brake control module (hereafter 'BrCM') 22 is operatively<br>
connected to friction brakes (not shown) on each of the vehicle wheels 93.<br>
The BrCM 22 monitors the operator input to the brake pedal 112 and<br>
generates control signals to control the friction brakes and sends a control<br>
signal to the HCP 5 to operate the first and second electric machines 56 and 72<br>
based thereon.<br>
[0027] Each of the control modules ECM 23, TCM 17, TPIM 19, BPCM 21,<br>
and BrCM 22 is preferably a general-purpose digital computer comprising a<br>
microprocessor or central processing unit, storage mediums comprising read<br>
only memory ('ROM'), random access memory ('RAM'), electrically<br>
programmable read only memory ('EPROM'), a high speed clock, analog to<br>
digital ('A/D') and digital to analog ('D/A') circuitry, and input/output<br>
circuitry and devices ('I/O') and appropriate signal conditioning and buffer<br>
circuitry. Each of the control modules has a set of control algorithms,<br>
comprising resident program instructions and calibrations stored in one of the<br>
storage mediums and executed to provide the respective functions of each<br>
computer. Information transfer between the control modules is preferably<br>
accomplished using the LAN bus 6 and SPI buses. The control algorithms are<br>
executed during preset loop cycles such that each algorithm is executed at<br>
least once each loop cycle. Algorithms stored in the non-volatile memory<br>
devices are executed by one of the central processing units to monitor inputs<br>
from the sensing devices and execute control and diagnostic routines to<br><br>
control operation of the actuators, using preset calibrations. Loop cycles are<br>
executed at regular intervals, for example each 3.125, 6.25, 12.5, 25 and 100<br>
milliseconds during ongoing operation of the hybrid powertrain.<br>
Alternatively, algorithms may be executed in response to the occurrence of an<br>
event.<br>
[0028] The exemplary hybrid powertrain selectively operates in one of<br>
several states that can be described in terms of engine states comprising one of<br>
an engine-on state ('ON') and an engine-off state ('OFF'), and transmission<br>
operating range states comprising a plurality of fixed gears and continuously<br>
variable operating modes, described with reference to Table 1, below.<br><br>
[0029] Each of the transmission operating range states is described in the<br>
table and indicates which of the specific clutches C1 70, C2 62, C3 73, and C4<br>
75 are applied for each of the operating range states. A first continuously<br><br>
variable mode, i.e., EVT Mode 1, or Ml, is selected by applying clutch C1 70<br>
only in order to "ground" the outer gear member of the third planetary gear set<br>
28. The engine state can be one of ON ('MI_Eng_On') or OFF<br>
('MI_Eng_Off). A second continuously variable mode, i.e., EVT Mode 2, or<br>
M2, is selected by applying clutch C2 62 only to connect the shaft 60 to the<br>
carrier of the third planetary gear set 28. The engine state can be one of ON<br>
('M2_Eng_On') or OFF ('M2_Eng_Off). For purposes of this description,<br>
when the engine state is OFF, the engine input speed is equal to zero<br>
revolutions per minute ('RPM'), i.e., the engine crankshaft is not rotating. A<br>
fixed gear operation provides a fixed ratio operation of input-to-output speed<br>
of the transmission 10, i.e., NI/NO. A first fixed gear operation ('GI') is<br>
selected by applying clutches C1 70 and C4 75. A second fixed gear operation<br>
('G2') is selected by applying clutches C1 70 and C2 62. A third fixed gear<br>
operation ('G3') is selected by applying clutches C2 62 and C4 75. A fourth<br>
fixed gear operation ('G4') is selected by applying clutches C2 62 and C3 73.<br>
The fixed ratio operation of input-to-output speed increases with increased<br>
fixed gear operation due to decreased gear ratios in the planetary gears 24, 26,<br>
and 28. The rotational speeds of the first and second electric machines 56 and<br>
72, NA and NB respectively, are dependent on internal rotation of the<br>
mechanism as defined by the clutching and are proportional to the input speed<br>
measured at the input shaft 12.<br>
[0030] In response to operator input via the accelerator pedal 113 and brake<br>
pedal 112 as captured by the user interface 13, the HCP 5 and one or more of<br>
the other control modules determine torque commands to control the torque<br>
generative devices comprising the engine 14 and the first and second electric<br><br>
machines 56 and 72 to meet the operator torque request at the output member<br>
64 and transferred to the driveline 90. Based upon input signals from the user<br>
interface 13 and the hybrid powertrain including the ESD 74, the HCP 5<br>
determines the operator torque request, a commanded output torque from the<br>
transmission 10 to the driveline 90, an input torque from the engine 14, clutch<br>
torques for the torque-transfer clutches C1 70, C2 62, C3 73, C4 75 of the<br>
transmission 10; and the motor torques for the first and second electric<br>
machines 56 and 72, respectively, as is described hereinbelow.<br>
[0031] Final vehicle acceleration can be affected by other factors including,<br>
e.g., road load, road grade, and vehicle mass. The engine state and the<br>
transmission operating range state are determined based upon a variety of<br>
operating characteristics of the hybrid powertrain. This includes the operator<br>
torque request communicated through the accelerator pedal 113 and brake<br>
pedal 112 to the user interface 13 as previously described. The transmission<br>
operating range state and the engine state may be predicated on a hybrid<br>
powertrain torque demand caused by a command to operate the first and<br>
second electric machines 56 and 72 in an electrical energy generating mode or<br>
in a torque generating mode. The transmission operating range state and the<br>
engine state can be determined by an optimization algorithm or routine which<br>
determines optimum system efficiency based upon operator demand for<br>
power, battery state of charge, and energy efficiencies of the engine 14 and the<br>
first and second electric machines 56 and 72. The control system manages<br>
torque inputs from the engine 14 and the first and second electric machines 56<br>
and 72 based upon an outcome of the executed optimization routine, and<br>
system efficiencies are optimized thereby, to manage fuel economy and<br><br>
battery charging. Furthermore, operation can be determined based upon a<br>
fault in a component or system. The HCP 5 monitors the torque-generative<br>
devices, and determines the power output from the transmission 10 at output<br>
member 64 that is required to meet the operator torque request while meeting<br>
other powertrain operating demands, e.g., charging the ESD 74. As should be<br>
apparent from the description above, the ESD 74 and the first and second<br>
electric machines 56 and 72 are electrically-operatively coupled for power<br>
flow therebetween. Furthermore, the engine 14, the first and second electric<br>
machines 56 and 72, and the electro-mechanical transmission 10 are<br>
mechanically-operatively coupled to transfer power therebetween to generate a<br>
power flow to the output member 64.<br>
[0032] Fig. 3 shows a control system architecture for controlling and<br>
managing signal flow in a hybrid powertrain system having multiple torque<br>
generative devices, described hereinbeiow with reference to the hybrid<br>
powertrain system of Figs. 1 and 2, and residing in the aforementioned control<br>
modules in the form of executable algorithms and calibrations. The control<br>
system architecture is applicable to alternative hybrid powertrain systems<br>
having multiple torque generative devices, including, e.g., a hybrid powertrain<br>
system having an engine and a single electric machine, a hybrid powertrain<br>
system having an engine and multiple electric machines. Alternatively, the<br>
hybrid powertrain system can utilize non-electric torque-generative machines<br>
and energy storage systems, e.g., hydraulic-mechanical hybrid transmissions<br>
(not shown).<br>
[0033] The control system architecture shows signal flow of a plurality of<br>
inputs to a strategic optimization control scheme ('Strategic Control') 310,<br><br>
which determines a preferred input speed ('Ni_Des') and a preferred operating<br>
range state ('Hybrid Range State Des') based upon the output speed and the<br>
operator torque request, and optimized based upon other operating parameters<br>
of the hybrid powertrain, including battery power limits and response limits of<br>
the engine 14, transmission 10, and first and second electric machines 56 and<br>
72. The strategic optimization control scheme 310 is preferably executed by<br>
the HCP 5 during each 100 ms loop cycle and each 25 ms loop cycle.<br>
[0034] The outputs of the strategic optimization control scheme 310 are used<br>
in a shift execution and engine start/stop control scheme ('Shift Execution and<br>
Engine Start/Stop') 320 to command changes in the operation of the<br>
transmission 10 ('Transmission Commands') including changing the operating<br>
range state. This includes commanding execution of a change in the operating<br>
range state if the preferred operating range state is different from the present<br>
operating range state by commanding changes in application of one or more of<br>
the clutches C1 70, C2 62, C3 73, and C4 75 and other commands. The<br>
present operating range state ('Hybrid Range State Actual') and an input speed<br>
profile ('Ni_Prof) can be determined. The input speed profile is an estimate<br>
of an upcoming time-rate change in the input speed and preferably comprises a<br>
scalar parametric value that is a targeted input speed for the forthcoming loop<br>
cycle, based upon the engine operating commands and the operator torque<br>
request during a transition in the operating range state of the transmission.<br>
[0035] A tactical control scheme ('Tactical Control and Operation') 330 is<br>
repeatedly executed during one of the control loop cycles to determine engine<br>
commands ('Engine Commands') for operating the engine 14, including a<br>
preferred input torque from the engine 14 to the transmission 10 based upon<br><br>
the output speed, the input speed, and the operator torque request and the<br>
present operating range state for the transmission. The engine commands also<br>
include engine states including one of an all-cylinder state and a cylinder<br>
deactivation state wherein a portion of the engine cylinders are deactivated<br>
and unfueled, and engine states including one of a fueled state and a fuel<br>
cutoff state.<br>
[0036] A clutch torque ('Tcl') for each of the clutches C1 70, C2 62, C3 73,<br>
and C4 75 is estimated in the TCM 17, including the presently applied<br>
clutches and the non-applied clutches, and a present engine input torque ('Ti')<br>
reacting with the input member 12 is determined in the ECM 23. A motor<br>
torque control scheme ('Output and Motor Torque Determination') 340 is<br>
executed to determine the preferred output torque from the powertrain<br>
('To_cmd'), which includes motor torque commands ('TA', 'TB') for<br>
controlling the first and second electric machines 56 and 72 in this<br>
embodiment. The preferred output torque is based upon the estimated clutch<br>
torque(s) for each of the clutches, the present input torque from the engine 14,<br>
the present operating range state, the input speed, the operator torque request,<br>
and the input speed profile. The first and second electric machines 56 and 72<br>
are controlled through the TPIM 19 to meet the preferred motor torque<br>
commands based upon the preferred output torque. The motor torque control<br>
scheme 340 includes algorithmic code which is regularly executed during the<br>
6.25 ms and 12.5 ms loop cycles to determine the preferred motor torque<br>
commands.<br>
[0037] The hybrid powertrain is controlled to transfer the output torque to<br>
the output member 64 and thence to the driveline 90 to generate tractive<br><br>
torque at wheel(s) 93 to forwardly propel the vehicle in response to the<br>
operator input to the accelerator pedal 113 when the operator selected position<br>
of the transmission gear selector 114 commands operation of the vehicle in the<br>
forward direction. Similarly, the hybrid powertrain is controlled to transfer<br>
the output torque to the output member 64 and thence to the drive line 90 to<br>
generate tractive torque at wheel(s) 93 to propel the vehicle in a reverse<br>
direction in response to the operator input to the accelerator pedal 113 when<br>
the operator selected position of the transmission gear selector 114 commands<br>
operation of the vehicle in the reverse direction. Preferably, propelling the<br>
vehicle results in vehicle acceleration so long as the output torque is sufficient<br>
to overcome external loads on the vehicle, e.g., due to road grade,<br>
aerodynamic loads, and other loads.<br>
[0038] The BrCM 22 commands the friction brakes on the wheels 93 to<br>
apply braking force and generates a command for the transmission 10 to create<br>
a negative output torque which reacts with the driveline 90 in response to a net<br>
operator input to the brake pedal 112 and the accelerator pedal 113.<br>
Preferably the applied braking force and the negative output torque can<br>
decelerate and stop the vehicle so long as they are sufficient to overcome<br>
vehicle kinetic power at wheel(s) 93. The negative output torque reacts with<br>
the driveline 90, thus transferring torque to the electro-mechanical<br>
transmission 10 and the engine 14. The negative output torque reacted<br>
through the electro-mechanical transmission 10 can be transferred to the first<br>
and second electric machines 56 and 72 to generate electric power for storage<br>
in the ESD 74.<br><br>
[0039] The operator inputs to the accelerator pedal 113 and the brake pedal<br>
112 comprise individually determinable operator torque request inputs<br>
including an immediate accelerator output torque request ('Output Torque<br>
Request Accel Immed'), a predicted accelerator output torque request ('Output<br>
Torque Request Accel Prdtd'), an immediate brake output torque request<br>
('Output Torque Request Brake Immed'), a predicted brake output torque<br>
request ('Output Torque Request Brake Prdtd') and an axle torque response<br>
type ('Axle Torque Response Type'). As used herein, the term 'accelerator'<br>
refers to an operator request for forward propulsion preferably resulting in<br>
increasing vehicle speed over the present vehicle speed, when the operator<br>
selected position of the transmission gear selector 114 commands operation of<br>
the vehicle in the forward direction. The terms 'deceleration' and 'brake'<br>
refer to an operator request preferably resulting in decreasing vehicle speed<br>
from the present vehicle speed. The immediate accelerator output torque<br>
request, the predicted accelerator output torque request, the immediate brake<br>
output torque request, the predicted brake output torque request, and the axle<br>
torque response type are individual inputs to the control system including to<br>
the tactical control scheme 330.<br>
[0040] The immediate accelerator output torque request is determined based<br>
upon a presently occurring operator input to the accelerator pedal 113, and<br>
comprises a request to generate an immediate output torque at the output<br>
member 64 preferably to accelerate the vehicle. The immediate accelerator<br>
output torque request is unshaped, but can be shaped by events that affect<br>
vehicle operation outside the powertrain control. Such events include vehicle<br>
level interruptions in the powertrain control for antilock braking, traction<br><br>
control and vehicle stability control, which can be used to unshape or rate-<br>
limit the immediate accelerator output torque request.<br>
[0041] The predicted accelerator output torque request is determined based<br>
upon the operator input to the accelerator pedal 113 and comprises an<br>
optimum or preferred output torque at the output member 64. The predicted<br>
accelerator output torque request is preferably equal to the immediate<br>
accelerator output torque request during normal operating conditions, e.g.,<br>
when any one of antilock braking, traction control, or vehicle stability is not<br>
being commanded. When any one of antilock braking, traction control or<br>
vehicle stability is being commanded the predicted accelerator output torque<br>
request remains the preferred output torque with the immediate accelerator<br>
output torque request being decreased in response to output torque commands<br>
related to the antilock braking, traction control, or vehicle stability control.<br>
[0042] Blended brake torque includes a combination of the friction braking<br>
torque generated at the wheels 93 and the output torque generated at the output<br>
member 64 which reacts with the driveline 90 to decelerate the vehicle in<br>
response to the operator input to the brake pedal 112.<br>
[0043] The immediate brake output torque request is determined based upon<br>
a presently occurring operator input to the brake pedal 112, and comprises a<br>
request to generate an immediate output torque at the output member 64 to<br>
effect a reactive torque with the driveline 90 which preferably decelerates the<br>
vehicle. The immediate brake output torque request is determined based upon<br>
the operator input to the brake pedal 112 and the control signal to control the<br>
friction brakes to generate friction braking torque.<br><br>
[0044] The predicted brake output torque request comprises an optimum or<br>
preferred brake output torque at the output member 64 in response to an<br>
operator input to the brake pedal 112 subject to a maximum brake output<br>
torque generated at the output member 64 allowable regardless of the operator<br>
input to the brake pedal 112. In one embodiment the maximum brake output<br>
torque generated at the output member 64 is limited to -0.2g. The predicted<br>
brake output torque request can be phased out to zero when vehicle speed<br>
approaches zero regardless of the operator input to the brake pedal 112. As<br>
desired by a user, there can be operating conditions under which the predicted<br>
brake output torque request is set to zero, e.g., when the operator setting to the<br>
transmission gear selector 114 is set to a reverse gear, and when a transfer case<br>
(not shown) is set to a four-wheel drive low range. The operating conditions<br>
whereat the predicted brake output torque request is set to zero are those in<br>
which blended braking is not preferred due to vehicle operating factors.<br>
[0045] The axle torque response type comprises an input state for shaping<br>
and rate-limiting the output torque response through the first and second<br>
electric machines 56 and 72. The input state for the axle torque response type<br>
can be an active state, preferably comprising one of a pleasability limited state<br>
a maximum range state, and an inactive state. When the commanded axle<br>
torque response type is the active state, the output torque command is the<br>
immediate output torque. Preferably the torque response for this response type<br>
is as fast as possible.<br>
[0046] The predicted accelerator output torque request and the predicted<br>
brake output torque request are input to the strategic optimization control<br>
scheme ('Strategic Control') 310. The strategic optimization control scheme<br><br>
310 determines a desired operating range state for the transmission 10<br>
('Hybrid Range State Des') and a desired input speed from the engine 14 to<br>
the transmission 10 ('Ni Des'), which comprise inputs to the shift execution<br>
and engine start/stop control scheme ('Shift Execution and Engine Start/Stop')<br>
320.<br>
[0047] A change in the input torque from the engine 14 which reacts with the<br>
input member from the transmission 10 can be effected by changing mass of<br>
intake air to the engine 14 by controlling position of an engine throttle<br>
utilizing an electronic throttle control system (not shown), including opening<br>
the engine throttle to increase engine torque and closing the engine throttle to<br>
decrease engine torque. Changes in the input torque from the engine 14 can<br>
be effected by adjusting ignition timing, including retarding spark timing from<br>
a mean-best-torque spark timing to decrease engine torque. The engine state<br>
can be changed between the engine-off state and the engine-on state to effect a<br>
change in the input torque. The engine state can be changed between the all-<br>
cylinder state and the cylinder deactivation state, wherein a portion of the<br>
engine cylinders are unfueled. The engine state can be changed by selectively<br>
operating the engine 14 in one of the fueled state and the fuel cutoff state<br>
wherein the engine is rotating and unfueled. Executing a shift in the<br>
transmission 10 from a first operating range state to a second operating range<br>
state can be commanded and achieved by selectively applying and<br>
deactivating the clutches C1 70, C2 62, C3 73, and C4 75.<br>
[0048] Fig. 4 details the tactical control scheme ('Tactical Control and<br>
Operation') 330 for controlling operation of the engine 14, described with<br>
reference to the hybrid powertrain system of Figs. 1 and 2 and the control<br><br>
system architecture of Fig. 3. The tactical control scheme 330 includes a<br>
tactical optimization control path 350 and a system constraints control path<br>
360 which are preferably executed concurrently. The outputs of the tactical<br>
optimization control path 350 are input to an engine state control scheme 370.<br>
The outputs of the engine state control scheme 370 and the system constraints<br>
control path 360 are input to an engine response type determination scheme<br>
('Engine Response Type Determination') 380 for controlling the engine state,<br>
the immediate engine torque request and the predicted engine torque request.<br>
[0049] The operating point of the engine 14 is described in terms of the input<br>
torque and input speed that can be achieved by controlling mass of intake air<br>
to the engine 14 when the engine 14 comprises a spark-ignition engine by<br>
controlling position of an engine throttle (not shown) utilizing an electronic<br>
throttle control device (not shown). This includes opening the throttle to<br>
increase the engine input speed and torque output and closing the throttle to<br>
decrease the engine input speed and torque. The engine operating point can be<br>
achieved by adjusting ignition timing, generally by retarding spark timing<br>
from a mean-best-torque spark timing to decrease engine torque.<br>
[0050] When the engine 14 comprises a compression-ignition engine, the<br>
operating point of the engine 14 can be achieved by controlling the mass of<br>
injected fuel, and adjusted by retarding injection timing from a mean-best-<br>
torque injection timing to decrease engine torque.<br>
[0051] The engine operating point can be achieved by changing the engine<br>
state between the engine-off state and the engine-on state. The engine<br>
operating point can be achieved by controlling the engine state between the<br>
all-cylinder state and the cylinder deactivation state, wherein a portion of the<br><br>
engine cylinders are unfueled and the engine valves are deactivated. The<br>
engine state can include the fuel cutoff state wherein the engine is rotating and<br>
unfueled to effect engine braking.<br>
[0052] The tactical optimization control path 350 acts on substantially steady<br>
state inputs to select a preferred engine state and determine a preferred input<br>
torque from the engine 14 to the transmission 10. The inputs originate in the<br>
shift execution and engine state control scheme 320. The tactical optimization<br>
control path 350 includes an optimization scheme ('Tactical Optimization')<br>
354 to determine preferred input torques for operating the engine 14 in the all-<br>
cylinder state ('Input Torque Full'), in the cylinder deactivation state ('Input<br>
Torque Deac'), the all-cylinder state with fuel cutoff ('Input Torque Full<br>
FCO'), in the cylinder deactivation state with fuel cutoff ('Input Torque Deac<br>
FCO'), and a preferred engine state ('Preferred Engine State'). Inputs to the<br>
optimization scheme 354 include a lead operating range state of the<br>
transmission 10 ('Lead Hybrid Range State') a predicted lead input<br>
acceleration profile ('Lead Input Acceleration Profile Predicted '), a predicted<br>
range of clutch reactive torques ('Predicted Clutch Reactive Torque<br>
Min/Max') for each presently applied clutch, predicted battery power limits<br>
('Predicted Battery Power Limits') and predicted output torque requests for<br>
acceleration ('Output Torque Request Accel Prdtd') and braking ('Output<br>
Torque Request Brake Prdtd'). The predicted output torque requests for<br>
acceleration and braking are combined and shaped with the axle torque<br>
response type through a predicted output torque shaping filter 352 to yield a<br>
predicted net output torque request ('To Net Prdtd') and a predicted<br>
accelerator output torque request ('To Accel Prdtd'), which are inputs to the<br><br>
optimization scheme 354. The lead operating range state of the transmission<br>
10 comprises a time-shifted lead of the operating range state of the<br>
transmission 10 to accommodate a response time lag between a commanded<br>
change in the operating range state and a measured change in the operating<br>
range state. The predicted lead input acceleration profile comprises a time-<br>
shifted lead of the predicted input acceleration profile of the input member 12<br>
to accommodate a response time lag between a commanded change in the<br>
predicted input acceleration profile and a measured change in the predicted<br>
input acceleration profile. The optimization scheme 354 determines costs for<br>
operating the engine 14 in the engine states, which comprise operating the<br>
engine fueled and in the all-cylinder state ('PCOST FULL FUEL'), operating the<br>
engine unfueled and in the all-cylinder state ('PCOST FULL FCO'), operating the<br>
engine fueled and in cylinder deactivation state ('PCOST DEAC FUEL'), and<br>
operating the engine unfueled and in the cylinder deactivation state ( 'PCOST<br>
DEAC FCO')- The aforementioned costs for operating the engine 14 are input to<br>
a stabilization analysis scheme ('Stabilization and Arbitration') 356 along with<br>
the actual engine state ('Actual Engine State') and an allowable or permissible<br>
engine state ('Engine State Allowed') to select one of the engine states as the<br>
preferred engine state ('Preferred Engine State').<br>
[0053] The preferred input torques for operating the engine 14 in the all-<br>
cylinder state and in the cylinder deactivation state with and without fuel<br>
cutoff are input to an engine torque conversion calculator ('Engine Torque<br>
Conversion') 355 and converted to preferred engine torques in the all-cylinder<br>
state and in the cylinder deactivation state ('Engine Torque Full') and<br>
('Engine Torque Deac') and with fuel cutoff in the all-cylinder state and in the<br><br>
cylinder deactivation state ('Engine Torque Full FCO') and ('Engine Torque<br>
Deac FCO') respectively, by taking into account parasitic and other loads<br>
introduced between the engine 14 and the transmission 10. The preferred<br>
engine torques for operation in the all-cylinder state and in the cylinder<br>
deactivation state and the preferred engine state comprise inputs to the engine<br>
state control scheme 370.<br>
[0054] The costs for operating the engine 14 include operating costs which<br>
are generally determined based upon factors that include vehicle driveability,<br>
fuel economy, emissions, and battery usage. Costs are assigned and<br>
associated with fuel and electrical power consumption and are associated with<br>
a specific operating points of the hybrid powertrain. Lower operating costs<br>
are generally associated with lower fuel consumption at high conversion<br>
efficiencies, lower battery power usage, and lower emissions for each engine<br>
speed/load operating point, and take into account the present state of the<br>
engine 14.<br>
[0055] The preferred engine state and the preferred engine torques in the all-<br>
cylinder state and in the cylinder deactivation state are input to the engine state<br>
control scheme 370, which includes an engine state machine ('Engine State<br>
Machine') 372. The engine state machine 372 determines a target engine<br>
torque ('Target Engine Torque') and a target engine state ('Target Engine<br>
State') based upon the preferred engine torques and the preferred engine state.<br>
The target engine torque and the target engine state are input to a transition<br>
filter ('Transition Filtering') 374 which monitors any commanded transition in<br>
the engine state and filters the target engine torque to provide a filtered target<br>
engine torque ('Filtered Target Engine Torque'). The engine state machine<br><br>
372 outputs a command that indicates selection of one of the cylinder<br>
deactivation state and the all-cylinder state ('DEAC Selected') and indicates<br>
selection of one of the engine-on state and the deceleration fuel cutoff state<br>
('FCO Selected').<br>
[0056] The selection of one of the cylinder deactivation state and the all-<br>
cylinder state and the selection of one of the engine-on state and the<br>
deceleration fuel cutoff state, the filtered target engine torque, and the<br>
minimum and maximum engine torques are input to the engine response type<br>
determination scheme 380.<br>
[0057] The system constraints control path 360 determines constraints on the<br>
input torque, comprising minimum and maximum input torques ('Input<br>
Torque Hybrid Minimum' and 'Input Torque Hybrid Maximum') that can be<br>
reacted by the transmission 10. The minimum and maximum input torques are<br>
determined based upon constraints to the transmission 10 and the first and<br>
second electric machines 56 and 72, including clutch torques and battery<br>
power limits, which affect the capacity of the transmission 10 to react input<br>
torque during the current loop cycle. Inputs to the system constraints control<br>
path 360 include the immediate output torque request as measured by the<br>
accelerator pedal 113 ('Output Torque Request Accel Immed') and the<br>
immediate output torque request as measured by the brake pedal 112 ('Output<br>
Torque Request Brake Immed') which are combined and shaped with the axle<br>
torque response type through an immediate output torque shaping filter<br>
('Immediate Output Torque Shaping') 362 to yield a net immediate output<br>
torque ('To Net Immed') and an immediate accelerator output torque ('To<br>
Accel Immed'). The net immediate output torque and the immediate<br><br>
accelerator output torque are inputs to a constraints scheme ('Output and Input<br>
Torque Constraints') 364. Other inputs to the constraints scheme 364 include<br>
the lead operating range state of the transmission 10, an immediate lead input<br>
acceleration profile ('Lead Input Acceleration Profile Immed'), a lead<br>
immediate clutch reactive torque range ('Lead Immediate Clutch Reactive<br>
Torque Min/Max') for each presently applied clutch, and the available battery<br>
power ('Battery Power Limits') comprising the range PBAT_MIN to PBAT MAX.<br>
The immediate lead input acceleration profile comprises a time-shifted lead of<br>
the immediate input acceleration profile of the input member 12 to<br>
accommodate a response time lag between a commanded change in the<br>
immediate input acceleration profile and a measured change in the immediate<br>
input acceleration profile. The lead immediate clutch reactive torque range<br>
comprises a time-shifted lead of the immediate clutch reactive torque range of<br>
the clutches to accommodate a response time lag between a commanded<br>
change in the immediate clutch torque range and a measured change in the<br>
immediate clutch reactive torque range. The constraints scheme 364<br>
determines an output torque range for the transmission 10, and then<br>
determines the minimum and maximum allowable input torques ('Input<br>
Torque Hybrid Minimum' and 'Input Torque Hybrid Maximum' respectively)<br>
that can be reacted by the transmission 10 based upon the aforementioned<br>
inputs. The minimum and maximum allowable input torques can change<br>
during ongoing operation, due to changes in the aforementioned inputs,<br>
including increasing energy recovery through electric power regeneration<br>
through the transmission 14 and first and second electric machines 56 and 72.<br><br>
[0058] The minimum and maximum allowable input torques are input to the<br>
engine torque conversion calculator 355 and converted to minimum and<br>
maximum engine torques ('Engine Torque Hybrid Minimum' and 'Engine<br>
Torque Hybrid Maximum' respectively), by taking into account parasitic and<br>
other loads introduced between the engine 14 and the transmission 10.<br>
[0059] The filtered target engine torque, the output of the engine state<br>
machine 372 and the minimum and maximum engine torques are input to the<br>
engine response type determination scheme 380, which inputs the engine<br>
commands to the ECM 23 for controlling the engine state, the immediate<br>
engine torque request and the predicted engine torque request. The engine<br>
commands include an immediate engine torque request ('Engine Torque<br>
Request Immed') and a predicted engine torque request ('Engine Torque<br>
Request Prdtd') that can be determined based upon the filtered target engine<br>
torque. Other commands control the engine state to one of the engine fueled<br>
state and the deceleration fuel cutoff state ('FCO Request') and to one of the<br>
cylinder deactivation state and the all-cylinder state ('DEAC Request').<br>
Another output comprises an engine response type ('Engine Response Type').<br>
When the filtered target engine torque is within the range between the<br>
minimum and maximum engine torques, the engine response type is inactive.<br>
When the filtered target engine torque is outside the constraints of the<br>
minimum and maximum engine torques ('Engine Torque Hybrid Minimum')<br>
and ('Engine Torque Hybrid Maximum') the engine response type is active,<br>
indicating a need for an immediate change in the engine torque, e.g., through<br>
engine spark control and retard to change the engine torque and the input<br><br>
torque to fall within the constraints of the minimum and maximum engine<br>
torques.<br>
[0060] Fig. 5 depicts the engine state control scheme 370 including the<br>
engine state machine 372 and the transition filter 374. The preferred engine<br>
state ('Preferred Engine State') is input to the engine state machine 372. The<br>
engine state machine 372 selects and outputs a target engine state ('Target<br>
Engine State') and a target engine torque ('Target Engine Torque') based on<br>
the preferred engine state.<br>
[0061] Fig. 6 shows permissible states of an exemplary state machine<br>
including a plurality of main states ('State 0', 'State 1', 'State 2'. and 'State<br>
3') and a plurality of transition states (T4, T5, T6, T7, T8, T9, T12, and T13).<br>
In the embodiment the main states and transition states preferably correspond<br>
to engine states. As applied to the embodiment described herein, the main<br>
states include a first main state corresponding to engine operation in the<br>
fueled, all-cylinder engine state (hereafter 'State 0'), a second main state<br>
corresponding to engine operation in the all-cylinder engine state with fuel<br>
cutoff (hereafter, 'State 1'), a third main state corresponding to the cylinder<br>
deactivation engine state (hereafter, 'State 2'), and a fourth main state<br>
corresponding to the engine in the cylinder deactivation engine state with fuel<br>
cutoff (hereafter, 'State 3'). Other inputs to the engine state machine 372<br>
include the engine torques from the optimization scheme 354 for each of the<br>
engine states converted from the corresponding input torques for each of the<br>
main states. The engine state machine 372 inputs the preferred engine torque<br>
corresponding to state 0 ('Engine Torque Full'), the engine torque<br>
corresponding to state 1 ('Engine Torque Full FCO'), the preferred engine<br><br>
torque corresponding to state 2 ('Engine Torque Deac'), and the engine torque<br>
corresponding to state 3 ('Engine Torque Deac FCO'). The engine state<br>
machine 372 further inputs state enablement information ('Enable Bits'), the<br>
present or actual engine state ('Actual Engine State') and the state of the<br>
transition ('Transition Completed').<br>
[0062] The transition filter 374 generates a signal comprising the state of the<br>
transition to indicate whether specific engine states are enabled, thus<br>
permitting transition thereto. The transition filter 374 includes information<br>
indicating whether the transition to the target engine state can be completed.<br>
[0063] The engine state machine 372 determines and outputs the target<br>
engine state ('Target Engine State') and sends signals indicating selection of<br>
the cylinder deactivation state ('DEAC Selected') and indicating selection of<br>
the fuel cutoff state ('FCO Selected'). Further, the engine state machine 372<br>
determines and outputs the target engine torque ('Target Engine Torque')<br>
comprising the engine torque corresponding to the target engine state. This<br>
includes an upcoming transition engine state and a corresponding transition<br>
engine torque following a transition path determined by the state machine.<br>
[0064] The engine state machine 372 includes the transition paths, e.g., as<br>
shown in Fig. 6, for controlling transitions between the main states including<br>
the transition states between the main states. The transition paths include a<br>
transition path from the fueled, all-cylinder state to the fueled, cylinder<br>
deactivation state (hereafter "state T4"), a transition path from the fueled,<br>
cylinder deactivation state to the fueled, all-cylinder state (hereafter "state<br>
T5"), a transition path from the fueled, all-cylinder state to the fuel-cutoff, all-<br>
cylinder state (hereafter "state T6"), a transition path from the fuel-cutoff, all-<br><br>
cylinder state to the fueled, all-cylinder state (hereafter "state T7"), a transition<br>
path from the fueled, cylinder deactivation state to the fuel-cutoff cylinder<br>
deactivation state (hereafter "state T8"), a transition path from the fuel-cutoff,<br>
cylinder deactivation state to the fueled, cylinder deactivation state (hereafter<br>
"state T9"), a transition path from state T8 to the fuel-cutoff, all-cylinder state<br>
(hereafter "state T12"), and a transition path from state T6 to the fuel-cutoff,<br>
cylinder deactivation state (hereafter "state T13").<br>
[0065] The engine state machine 372 selects a preferred transition path based<br>
on the present engine state and the target engine state. If the enablement<br>
information indicates that one of the transition states of the preferred transition<br>
path is not available, the engine state machine 372 can determine an alternate<br>
transition path. For example, the engine state machine 372 can determine a<br>
preferred transition path between state 3 and state 0 comprising transitioning<br>
from state 3 to state T9, then to state 2, then to state T5, and then to state 0.<br>
However, if the enablement information indicates that cylinder deactivation is<br>
unavailable, the engine state machine 372 can determine an alternate transition<br>
path comprising transitioning from state 3 to state T5, then to state 0.<br>
[0066] The engine state machine 372 continuously monitors the preferred<br>
engine state when in a transition state, and can thereby determine a transition<br>
path that connects directly between two transition states. For example, if the<br>
engine state machine 372 detects a change in the preferred engine state to state<br>
0 when the state is the transition state T4, the engine state machine determines<br>
a transition path to transition from state T4 to state T5, and from state T5 to<br>
state 0.<br><br>
[0067] The transition filter 374 includes a first order, low pass filter to<br>
determine and manage the engine torque during an engine state transition.<br>
The filter can be described by Eq. 1:<br><br>
wherein y is the filtered target engine torque,<br>
u is the target engine torque<br>
t is elapsed time<br>
dT is a sample time, and<br>
T is a filter time constant.<br>
[0068] The filter time constant T is determined utilizing the state of the state<br>
machine 372, the target engine torque, the preferred engine state, the filtered<br>
target engine torque and the actual engine state. By utilizing inputs to<br>
determine the filter time constant T, a low pass filter of transition filter 374<br>
provides a change in the input torque over a minimum transition time without<br>
causing sudden undesired torque changes when transitioning between states.<br>
[0069] An incremental change in the engine torque can be described as y(t) -<br>
y(t-l) for the low pass filter according to Eq. 1, shown in Eq. 2:<br><br>
[0070] To account for a decrease in the incremental change in the engine<br>
torque as the filtered target engine torque y(t - 1) approaches the target engine<br><br>
torque u(t), the low pass filter deviates from a standard low pass filter by<br>
providing a minimum incremental change in the engine torque. This minimum<br>
incremental change causes a transition from a low pass filter response to a<br>
ramp as y(t) approaches u(t), resulting in shorter transition times.<br>
[0071] The transition filter 374 adjusts incrementally to the target engine<br>
torque and outputs the filtered target engine torque for controlling operation of<br>
the engine 14. The main state enablement information comprising 'Transition<br>
Complete' indicates that the filtered target engine torque substantially<br>
coincides with the target engine torque and that therefore a transition from the<br>
present engine state to the target engine state can take place. While the engine<br>
state machine 372 is in one of the transition states T4, T5, T6, T7, T8, T9,<br>
T12, T13, the selections of the target engine state and of the target engine<br>
torque are coordinated.<br>
[0072] When the engine state machine 372 is one of the transition states T4<br>
and T13, the transition filter 374 incrementally adjusts the engine torque to the<br>
preferred engine torque of states 2 and 3, respectively, prior to transitioning<br>
the engine from the all-cylinder state to the cylinder deactivation state. When<br>
the state machine 372 is in one of the transition states T5 and T12, the state<br>
machine 372 first transitions the target engine state from the cylinder<br>
deactivation state to the all-cylinder state and then adjusts the engine torque to<br>
the preferred engine torque of main states 0 and 1 respectively.<br>
[0073] When the engine state machine 372 is in one of the transition states<br>
T6 and T8, the transition filter 374 incrementally adjusts filtered target engine<br>
torque to the preferred engine torque of states 1 and 3 respectively prior to<br>
transitioning the engine from the fueled engine state to the fuel cutoff state.<br><br>
When the state machine is in one of the transition states T7 and T9, the state<br>
machine 372 first transitions the target engine state from the fuel cutoff state<br>
to the fueled state and then adjusts the filtered target engine torque to the<br>
preferred engine torque of the main states 0 and 2 respectively.<br>
[0074] Fig. 7 shows exemplary data comprising engine state and engine<br>
torque for the system described herein, depicting engine state transitions and<br>
corresponding engine torque. A first graph 600 depicts the state 602 output<br>
from by the state machine 372 and an engine state 604 being one of the all-<br>
cylinder state and the cylinder deactivation state over a time period 605. Fig.<br>
7 shows graph 620 depicting the target engine torque 622 output from the state<br>
machine 372 and the filtered target engine torque 624 output from the<br>
transition filter 372 over the time period 605 corresponding to the state 602.<br>
[0075] The engine state machine 372 determines a state 602 comprising state<br>
T4 in response to a commanded change in the preferred engine state from state<br>
0 to state 2. The state 602 transitions from main state 0 to state T4. The<br>
filtered torque 622 is incrementally adjusted using Eqs. 1-2 above to transition<br>
from the target engine torque 620 of the preferred engine torque of main state<br>
0 to the target engine torque 620 of the preferred engine torque of main state 2.<br>
When the filtered target engine torque 622 meets the preferred engine torque<br>
of state 2, the transition to main state enablement information signals the<br>
engine state machine 372 to transition to state 2. Due to the delays in the<br>
communication between the HCP 5 and the ECM 23 and due to delays in<br>
changing the operation state of the engine 14, the actual cylinder deactivation<br>
can be delayed 100-200 milliseconds after transitioning into main state 2 and<br><br>
the output of the cylinder deactivation state command by the engine state<br>
machine 372.<br>
[0076] When the engine state machine 372 subsequently determines a state<br>
602 equal to state T5 (not shown) in response to a change in the preferred<br>
engine state from state 2 to state 0. The state 602 transitions from state 2 to<br>
state T5. In state T5, the transition from cylinder deactivation state to all<br>
cylinder state is commanded and achieved after a delay of 100-200<br>
milliseconds. The filtered torque 622 is incrementally adjusted using Eqs. 1-2<br>
above to transition between the target engine torque 620 of the preferred<br>
engine torque of state 2 and the target engine torque 620 of the preferred<br>
torque of state 0. When the filtered target engine torque 622 substantially<br>
coincides with the preferred engine torque for state 0, the transition to main<br>
state enablement information signals the engine state machine 372 to transition<br>
from T5 to state 0.<br>
[0077] The disclosure has described certain preferred embodiments and<br>
modifications thereto. Further modifications and alterations may occur to<br>
others upon reading and understanding the specification. Therefore, it is<br>
intended that the disclosure not be limited to the particular embodiment(s)<br>
disclosed as the best mode contemplated for carrying out this disclosure, but<br>
that the disclosure will include all embodiments falling within the scope of the<br>
appended claims.<br><br>
CLAIMS<br>
1.	Method for operating a powertrain system comprising a multi-cylinder<br>
engine coupled to a hybrid transmission, the engine selectively operative<br>
in one of a plurality of main engine states to transfer engine torque to the<br>
hybrid transmission, the method comprising:<br>
monitoring an operator torque request;<br>
determining a preferred main engine state and a preferred engine torque<br>
associated with the preferred engine state;<br>
determining an engine state transition path from a present main engine<br>
state to the preferred main engine state including an engine transition<br>
state; and<br>
executing the engine state transition path between the present main<br>
engine state and the preferred main engine state and adjusting engine<br>
torque to the preferred engine torque.<br>
2.	The method of claim 1, further comprising transitioning the engine to the<br>
preferred main engine state subsequent to adjusting the engine torque to<br>
the preferred engine torque associated with the preferred main engine<br>
state.<br>
3.	The method of claim 1, wherein the engine transition states comprise one<br>
of a fueled to fuel cutoff transition state and a fuel cutoff to fueled<br>
transition state.<br><br>
4.	The method of claim 1, wherein the engine transition states comprise one<br>
of a cylinder deactivation to all-cylinder transition state and an all-<br>
cylinder to cylinder deactivation transition state.<br>
5.	The method of claim 1, wherein the main engine states include a fueled,<br>
all-cylinder engine state, a fuel cutoff, all-cylinder engine state, a fueled,<br>
cylinder deactivation engine state, and a fuel cutoff, cylinder<br>
deactivation engine state.<br>
6.	The method of claim 5, further comprising transitioning the main engine<br>
state from the fueled, all cylinder engine state to the fueled, cylinder<br>
deactivation engine state, comprising:<br>
transitioning the engine torque from the preferred engine torque in the<br>
fueled, all-cylinder engine state to the preferred engine torque in the<br>
fueled, cylinder deactivation state, and then<br>
deactivating a portion of the engine cylinders.<br>
7.	The method of claim 5, further comprising transitioning the main engine<br>
state from the fueled, cylinder deactivation engine state to the fueled, all<br>
cylinder engine state, comprising:<br>
activating deactivated engine cylinders; and then<br>
transitioning engine torque from a preferred engine torque in the fueled,<br>
cylinder deactivation state to a preferred engine torque in the fueled,<br>
all-cylinder state.<br><br>
8.	The method of claim 5, further comprising transitioning the main engine<br>
state from the fueled, all cylinder engine state to the unfueled, all<br>
cylinder engine state, comprising:<br>
transitioning engine torque from a preferred engine torque in the fueled,<br>
all-cylinder state to an engine torque in the fuel cutoff, all-cylinder<br>
state; and then,<br>
deactivating engine fueling.<br>
9.	The method of claim 5, further comprising transitioning the main engine<br>
state from the unfueled, all cylinder state engine state to the fueled, all<br>
cylinder engine state, comprising:<br>
activating engine fueling; and<br>
subsequently transitioning engine torque from an engine torque in the<br>
unfueled, all-cylinder engine state to a preferred engine torque in the<br>
fueled, all-cylinder engine state.<br>
10.	The method of claim 1, further comprising:<br>
determining a target engine torque based on the preferred engine torque<br>
associated with the preferred main engine state;<br>
filtering the target engine torque; and<br>
controlling the engine torque based on the filtered target engine torque.<br><br>
11.	The method of claim 10, further comprising transitioning from filtering<br>
the target engine torque to ramping the target engine torque and<br>
controlling the engine torque based on the ramped target engine torque.<br>
12.	The method of claim 11, wherein filtering the target engine torque<br>
comprises a utilizing filtering time constant determined based on at least<br>
one of the state of the state machine, the target engine torque, the<br>
preferred engine state, an actual engine state, and the filtered target<br>
engine torque.<br>
13.	Method for operating a powertrain system comprising an engine coupled<br>
to a hybrid transmission, the engine selectively operative in one of a<br>
plurality of engine states to transfer engine torque to the hybrid<br>
transmission, the method comprising:<br>
operating the engine in a first preferred engine state and at a first<br>
operating torque corresponding to the first preferred engine state;<br>
determining an operator torque request;<br>
determining a second preferred engine state based on the operator torque<br>
request; and<br>
transitioning the engine from the first preferred engine state to the<br>
second preferred engine state comprising<br>
determining states of a state machine comprising main engine states<br>
and transition engine states for transitioning to the second<br>
preferred engine state, and<br>
adjusting engine torque based on the engine state.<br><br>
14.	The method of claim 13, further comprising:<br>
selecting the first preferred engine state when transitioning the engine to<br>
the second preferred engine state, and<br>
transitioning the engine to the first preferred engine state.<br>
15.	The method of claim 13, further comprising operating the engine in the<br>
second preferred engine state when the engine torque is adjusted to the<br>
preferred engine torque associated with the second preferred engine<br>
state.<br>
16.	The method of claim 13, wherein the main states correspond to one of a<br>
fueled, all-cylinder engine state, an unfueled, all-cylinder engine state, a<br>
fueled, cylinder deactivation engine state, and an unfueled, cylinder<br>
deactivation engine state.<br>
17.	Method for operating a powertrain system comprising an engine coupled<br>
to a hybrid transmission, the engine selectively operative in one of a<br>
plurality of engine states to transfer engine torque to the hybrid<br>
transmission, the method comprising:<br>
operating an engine in a first engine state and at a first operating torque<br>
corresponding to the first engine state;<br>
determining a present operator torque request;<br>
determining a preferred engine state and a preferred engine torque<br>
corresponding to the preferred engine state; and<br><br>
determining a preferred transition path for transitioning the engine from<br>
the first engine state and the preferred engine state.<br>
18.	The method of claim 17, further comprising determining preferred<br>
engine torques corresponding to each of the engine states based upon<br>
operating costs related to operating the powertrain system in response to<br>
the operator torque request.<br>
19.	The method of claim 18, further comprising transitioning the engine to<br>
the preferred engine state subsequent to adjusting the engine torque to<br>
the preferred engine torque associated with the preferred engine state.<br><br>
A powertrain system includes a multi-cylinder engine coupled to a<br>
hybrid transmission. The engine is selectively operative in one of a plurality of<br>
main engine states to transfer engine torque to the hybrid transmission. A<br>
method for operating a powertrain system includes monitoring an operator<br>
torque request, determining a preferred main engine state and a preferred<br>
engine torque associated with the preferred engine state, determining an<br>
engine state transition path from a present main engine state to the preferred<br>
main engine state including an engine transition state, and executing the<br>
engine state transition path between the present main engine state and the<br>
preferred main engine state and adjusting engine torque to the preferred engine<br>
torque.</td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=wMQTXxMiP17/l3zMIAl0ng==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==" target="_blank" style="word-wrap:break-word;">http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=wMQTXxMiP17/l3zMIAl0ng==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==</a></p>
		<br>
		<div class="pull-left">
			<a href="272524-a-protective-block-for-electrical-function.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="272526-a-process-of-producing-distilled-fatty-acids-and-a-system-therefore.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>272525</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>1866/KOL/2008</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>15/2016</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>08-Apr-2016</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>06-Apr-2016</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>31-Oct-2008</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>BAYERISCHE MOTOREN WERKE AKTIENGESELLSCHAFT</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>PETUELRING 130,80788 MUNCHEN</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>WILFRED BRUNSSEN</td>
											<td>3670 FIELDCREST LN. YPSILANTI, MI. 48197</td>
										</tr>
										<tr>
											<td>2</td>
											<td>ANTHONY H. HEAP</td>
											<td>2969 LESLIE PARK CIRCLE ANN ARBOR, MICHIGAN 48105</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>B60K6/48; B60K6/547; B60W10/06</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>N/A</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td></td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>60/984,970</td>
									<td>2007-11-02</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/272525-method-for-operating-a-powertrain-system-to-transition-between-engine-states by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 04 Apr 2024 23:55:42 GMT -->
</html>
