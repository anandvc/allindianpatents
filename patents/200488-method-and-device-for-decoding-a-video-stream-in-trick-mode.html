<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/200488-method-and-device-for-decoding-a-video-stream-in-trick-mode by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 03:55:39 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 200488:METHOD AND DEVICE FOR DECODING A VIDEO STREAM IN TRICK MODE</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">METHOD AND DEVICE FOR DECODING A VIDEO STREAM IN TRICK MODE</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>The invention concerns a method for decoding compressed video pictures in a video decoding device comprising a random access source of coded video pictures, a video decoder and a plurality of reconstruction buffers for storing decoded pictures. The method comprises the steps of establishing an order of decoding pictures and of commanding said video decoder to decode a picture upon availability of a reconstruction buffer. The invention also concerns a device for implementing the inventive method.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>Method and device for decoding a video stream in trick mode<br>
In a system where an MPEG video stream is stored in a storage device (for example a Hard Disk Drive -HDD- integrated into a digital video decoder set top box) and can be read back and presented with the use of an MPEG decoder, the possibility of trickmode play such as reverse playback at different speeds is naturally expected by the user.<br>
The presentation of an MPEG encoded video sequence in the reverse direction is a difficult problem considering that in an MPEG stream structure, a video access unit, corresponding to data representing one coded picture, may depend on previously transmitted pictures. Indeed, video access units are sent in an order which facilitates their decoding for display in forward direction. Thus, three reconstruction buffers are sufficient to decode the stream ip this direction.<br>
When playback in the reverse direction is required, be it at the normal rate or at an accelerated rate, one solution consists in decoding all pictures corresponding a group of pictures (generally 12 pictures) before displaying any picture from this group of pictures. The last picture (in forward direction display order) of such a group may indeed depend on the first picture of the group, which is an intra type picture. Only some of these decoded pictures may be displayed, depending on the playback speed.<br>
Usual video decoders carry out one picture decoding per display period (e.g. 40 ms). This is not adapted to trickmode playback.<br>
The object of the invention is a method for decoding compressed video pictures in a video decoding device comprising a random access source of coded video pictures, a video decoder and a plurality of reconstruction buffers for storing decoded pictures, characterized by the steps of:<br>
o	establishing an order of decoding pictures according to a display<br>
mode;<br>
o	commanding said video decoder in an asynchronous manner to<br>
decode a picture upon availability of a reconstruction buffer. As soon as a<br>
reconstruction buffer becomes available, the next picture in line is decoded. The<br>
decoder does not decode one picture per display period   but anticipates the<br>
decoding of pictures in a predefined order. In particular in case of reverse<br><br>
2<br>
trickmode replay, this is important since a given picture may in some cases depend on four or more pictures which all need to be decoded in advance.<br>
According to an embodiment, the method moreover comprises the following steps:<br>
o	locking access to a reconstruction buffer containing a picture to be<br>
displayed until display of said picture;<br>
o	commanding the decoding of a further picture upon availability of<br>
an unlocked reconstruction buffer.<br>
The decoding is thus controlled by the display process: it is this process which unlocks access to reconstruction buffers and thus controls when the next picture is decoded.<br>
According to an embodiment, the step of establishing an order for decoding pictures comprises the steps of:<br>
o	determining a list of pictures to be displayed among pictures in<br>
said stream<br>
o	recursively determining chains of predictors for said pictures to be<br>
displayed, and inserting said predictors in said list of pictures to be displayed in<br>
the order required for decoding predictors before pictures depending on said<br>
predictors.<br>
According to an embodiment, the compressed video stream comprises pictures in the order of decoding, and the method further comprises the steps of determining for a bi-directional picture a nearest and a farthest predictor, where said nearest predictor is the picture appearing in the stream closest to said bi-directional picture, said farthest predictor being decoded prior to said nearest predictor.<br>
According to an embodiment, the step of determining an order of decoding pictures comprises the steps of:<br>
o	loading predetermined information descriptive of the contents of<br>
the video stream, and<br>
o	deriving said order of decoding pictures from said information as a<br>
function of a selected display mode.<br><br>
3<br>
According to an embodiment, the method moreover comprises the step of selecting a reconstruction buffer among available reconstruction buffers for storage of a decoded picture, said selection being carried out so as to select the available reconstruction buffer in which no decoded picture to be displayed has been stored for the longest time.<br>
According to an embodiment, the method further comprises the step of attributing a counter to each reconstruction buffer, of incrementing each counter every time a picture is displayed, of resetting a counter when a picture of its associated buffer is displayed and of attributing the buffer with the highest counter value to a picture to be decoded.<br>
According to the preferred embodiment, the method is carried out using only three reconstruction buffers, but is not necessarily limited to that number.<br>
According to an embodiment, the method further comprises the steps of verifying prior to the decoding of a picture, whether said picture is already present in one of the reconstruction buffers, and of avoiding a second decoding of said picture in this case.<br>
Another object of the invention is a video decoding device characterized by<br>
o	a random access source of a compressed video stream including<br>
coded pictures;<br>
o	means for selecting pictures to be decoded;<br>
o	a plurality of reconstruction buffers for storing decoded pictures;<br>
o	a video decoder for decoding coded pictures;<br>
o	means   for   monitoring   the   availability   for   write   access   of<br>
reconstruction buffers and for controlling said video decoder to decode a<br>
selected   picture   upon   availability  of a   reconstruction   buffer,   wherein   the<br>
availability of a reconstruction buffer is determined by the status of the display<br>
of a picture contained in said reconstruction buffer.<br>
The random access source may also be an intermediate storage area, connected to a sequential source.<br><br>
4<br>
The inventive method and device enable playback of a recorded video stream in reverse direction at different speeds using only three reconstruction buffers.<br>
in order to decode a selected picture, the inventive method determines and decodes, using a recursive process, the predictor pictures of a picture to be displayed.<br>
Advantageously, predetermined trickmode information describing the recorded stream is used to determine predictor pictures. This trickmode information may take the form of a linked list of picture descriptors describing their type and the location of relevant data in the recorded stream.<br>
A specific buffer allocation mechanism is used in order to determine which reconstruction buffer is to be used for which picture.<br>
Write access to a buffer containing a picture to be displayed is disabled until this picture has been displayed.<br>
Other characteristics and advantages of the invention will appear through the description of a non-limiting embodiment of the invention. The following drawings itflusfrate the embodiment:<br>
A.<br>
Figure 1 is a block diagram of a digital television receiver/decoder.<br>
Figure 2 is a diagram of the software model of the part of the software of the receiver of figure 1 corresponding to the operation of the trickmode system.<br>
Figure 3 is a flowchart of the overall video decoding and display process.<br>
Figure 4 is a diagram of the effect of the 'decode picture1 command.<br>
Figure 5 is a flowchart describing the decoding process of a picture depending on its type (I, P, or B).<br>
Figure 6 is a flowchart of the empty buffer selection process according to the embodiment.<br>
Figure 7 is a table indicating the buffer occupancy and decoder and display activity for an example of reverse playback.<br>
1. Complete System Overview<br>
The digital television receiver/decoder 1 of figure 1 comprises a Forward Error Correction circuit 2 fed by a tuner and analog/digital converter<br><br>
5<br>
(not shown). The corrected digital signal is fed to a Transport Stream demultiplexer and filter 4. This demultiplexer and filter 4 is connected to the central communication bus 11 of the receiver 1. Its role is to select certain Transport Stream (TS) packets in the incoming data stream and to dispatch them to different applications of the receiver. For that purpose, it comprises filters programmed by a microprocessor 10.<br>
For the purpose of recording MPEG streams, the receiver comprises a hard disk drive 12 linked to the bus 11 through an interface 13, for example and EIDE interface. A memory 5 comprises several buffers and areas used to store and retrieve information from the hard disk.<br>
The memory 5 comprises circular buffers 15 to 23. A Write FIFO 15 is used to store, in order of arrival from demultiplexer and filter 4, TS packets for recording on the hard disk 12. A Read FIFO 16 is used to store TS packets read from the hard disk. FIFOs 15 and 16 are used to record or read a substream of the received data stream, disregarding the nature of the content of the TS packets. For recording, all TS packets corresponding to programmed criteria are filtered and written to Write FIFO 15 before transfer to hard disk 12. This mode is called the Transport Stream level recording mode, and will be the mode used in the rest of this description.<br>
For the sake of completeness, it is mentioned that recording can also be achieved at the Packetized Elementary Stream (PES) level. FIFOs 18 to 23 are used for that purpose. Memory 5 also holds a trickmode buffer 17. This buffer is used by the Stream Parser 3 and the microprocessor during recording to generate trickmode information, which is then recorded on the hard disk. This buffer is also used during reproduction to store trickmode information read from the hard disk.<br>
Further details of these two modes can be found in the already mentioned European patent application.<br>
For the purpose of decoding a stream, the receiver 1 also comprises respective audio and video decoders 8 and 9, connected to the central bus 11 either through a Transport Stream demultiplexer and a PES parser 6, or directly through PES parser 6. Depending on the recording mode, the TS layer may or may not have been previously removed. Reference 14 indicates the video processing circuitry required to generate displayable analog video signals.<br>
Compressed data destined to the video decoder 9 is stored in an input bit buffer 25, from where it is read as appropriate by the decoder 9.<br><br>
6<br>
Reconstructed pictures are stored in a reconstruction memory 26, which is accessed by the decoder for both reading and writing. The reconstruction memory according to the invention has three buffers (A, B, C), each corresponding to one decoded picture.<br>
Receiver 1 also comprises a reprogrammable non-volatile memory 24, which holds the receiver's operating system, device drivers and other software modules. The receiver's software is executed by the microprocessor.<br>
For the purpose of the present description, trickmode information contains for each video access unit stored on the disk and in the order of recording, the type of picture (I, P or B) and the location of the relevant picture, group of picture and sequence information on the hard disk required to decode a picture. Trickmode information is segmented into three different types of tables: A time index table, a video unit description table and several video description units (VDUs), each VDU describing the content of a certain number of successive groups of pictures.<br>
An example of such trickmode information is described in the European patent application entitled "Method and device for decoding a digital video stream in a digital video system using dummy header insertion" filed in the name of THOMSON multimedia on April 5, 2000.<br>
Figure 2 is a diagram of the software model of the receiver 1 according to the present embodiment. It comprises the following elements:<br>
(a) Overall trickmode Control:<br>
This software module is in charge of the overall control of the decoding process. According to the trickmode (Backward/Forward, Slow/Fast), this module specifies which picture must be transmitted, decoded, or displayed.<br>
As an example, if the chosen trickmode is fast backward reproduction at X times the regular speed, this module determines, using the temporal index table and the VDUs, which picture has to be displayed, the type of this picture (I, B, P) and, in case of a P or B type picture, the other pictures (predictors) which need to be decoded beforehand. This process is carried out recursively, because the decoding of predictors may itself require other predictors.<br><br>
7<br>
Trickmode information is requested by the Overall Trickmode Control from the Trickmode Information Access Manager (see below).<br>
Based on the recursive decoding algorithm, the Overall Trickmode Control instructs the Stream Access Manager (see below) to transfer specific video access units to the MPEG Video Decoder's input buffer.<br>
The Overall Trickmode Control Module maintains a virtual image of the reproduction buffer occupancy at any step.<br>
To decode a picture in a specific one of the three reproduction buffers, it runs the reconstruction buffer selection process described later in relation with the flowcharts of figures 5 and 6, and notifies the Decoding Manager before transferring the compressed picture.<br>
(b)	Trickmode Information Access Manager:<br>
The Overall Trickmode Control module needs trickmode information regarding the recorded stream. This information is stored on the hard disk drive 12. The Trickmode Information Access Manager is in charge of collecting the information from the hard disk drive and to supply it to the Overall Trickmode Control.<br>
(c)	Stream Access Manager:<br>
Each single picture that must be decoded (whether subsequently to be displayed or not) must be transmitted to the video decoder 9. All the necessary information to access the compressed content is supplied in the trickmode information tables. The Stream Access Manager is in charge of transferring the picture data identified by the Overall Trickmode Control from memory 5, to the video decoder, transferring only relevant information among that read from the hard disk drive by the Streaming Driver. For each picture to be decoded, the Stream Access Manager will be notified by the Overall Trickmode Control.<br>
(d)	Streaming Driver:<br>
The Streaming Driver is in charge of sorting out the video content to be delivered to memory 5 for processing by the Stream Access manager. Typically, the Streaming Driver will load one or several blocks from the hard<br><br>
8<br>
disk drive containing the relevant data and other data. In the case where trickmode information is inserted along with the stream, the Streaming Driver is also in charge of extracting the trickmode information and of storing it in buffer<br>
17.<br>
(e)	Video Decoding Manager:<br>
The video decoder notifies the Video Decoding Manager when it receives and identifies a new video access unit. The Video Decoding Manager has previously received through a queue from the Overall Control a complete command ordering and specifying the decoding and/or the display of this particular picture. Based on this command, the Video Decoding Manager programs the decoding of the newly detected picture and, if the picture must be displayed, notifies the Display Manager through a queue that this picture is to be displayed and how it must be displayed ( Top or Bottom field first, forward or backward ).<br>
A software descriptor of each reconstruction buffer reflects the state of each buffer. These descriptors are shared by the Video Decoding Manager and the Display Manager. Before programming a decoding, the Video Decoding manager tests if the reconstruction buffer that must receive this picture is available. If it is not, then the Video Decoding Manager waits for the Display Manager to release the buffer. Then, the decoding in this buffer can be programmed and the buffer access can be locked again.<br>
(f)	Display Manager:<br>
If a picture must be displayed once decoded, then the Display Manager is notified by the Video Decoding manager. The Display Manager also unlocks locked reconstruction buffers, freeing them for the decoding of further pictures, once they are not needed for display any more.<br>
The video decoder 9 is able to provide an AP! (application programmable interface) allowing certain types of controls and operations regarding the decoding and eventual display of individual pictures. In particular, the  decoder  can   be  instructed  to  decode  an   individual  picture  and   to<br><br>
9<br>
subsequently display it at a given time and for a certain number of frame intervals or not to display it at all.<br>
The picture display is a synchronous process. For a 50Hz system, the Display Manager checks every 40ms which picture is to be displayed. In other words, it identifies the reconstruction buffer containing the picture to be displayed.<br>
If the notification queue of the Display Manager filled by the Video Decoding Manager is empty, then no picture is available for display. The last picture displayed will then be repeated, until a new picture is to be displayed.<br>
Typically, the display process is the slowest process in the chain. All other processes will follow the rhythm imposed by the display.<br>
As the decoding process is asynchronous and can be very fast, when a picture to be displayed is decoded, its reconstruction buffer is locked to avoid any overwriting by subsequent pictures before it has been actually displayed. Only the Display Manager is allowed to unlock a buffer when the picture is displayed and when a new picture reconstruction can start in the same buffer. The Video Decoding Manager waits for the Display Manager to display pictures and release buffers, in order to decode new pictures as requested by the Overall Trickmode Control.<br>
The generation of decoding requests by the Overall Trickmode Control and the feeding of the decoder by the Stream Access Manager are also typically faster than the decoding process.<br>
As it is of no use to order new picture decoding if the video decoder's bit-buffer is full and can't be fed with more compressed data, the Overall Trickmode Control and coded picture supply by the Stream Access Manager are synchronized. The Overall Trickmode Control requests the transmission of a new picture when necessary and waits for the transmission to be completed before issuing another request. The completion of the transmission is notified to the Overall Trickmode Control process by the Stream Access Manager.<br>
The Stream Access Manager and the Overall Control wait for the video decoder to retrieve data from the bit buffer, and the video decoder, under the control of the Video Decoding Manager, waits for the Display Manager to release buffers. The whole system will finally follow the display rhythm.<br><br>
10<br>
To be presented on the display, an MPEG picture must have been previously decoded. The video process can be split into a series of successive operations. Figure 3 is an overview of the overall video process for a given picture. Several such processes may run in parallel at different stages of execution. A first operation consists in identifying the next picture to be displayed. This of course depends on the type of trickmode. Once this picture is determined, it has to be decoded. This operation may involve the recursive decoding of other pictures. It also depends on the availability of one or more free reconstruction buffers. The last operation consists in displaying the decoded picture.<br>
The trickmode information according to the present embodiment is a data structure comprising linked items. It is made of Picture descriptors linked with each other according to their order in the stream. The reader is reminded that the stream as received (and in this case as recorded) contains pictures in decoding order, not display order. Each Picture descriptor gives details about a picture in the MPEG coded stream as well as enough information to locate the compressed material of the picture on the storage unit. Each picture in the stream is identified with a particular Picture ID. In figures 3 and 4, UN" is such a picture ID and a function 'Next(N)1 returns a picture ID. The Next(N) function's processing is based on an analysts of the trickmode Information, given the type of trickmode to be displayed.<br>
In forward mode, Next(N) returns the ID of following picture to be displayed according to normal display order (i.e. in respect to the temporal reference). In backward mode, Next(N) returns the ID of the previous picture according to normal display order.<br>
For fast operation (forward or backward), pictures must be skipped, so Next(N) returns IDs of non-consecutive pictures.<br>
The Next(N) function is implemented by the Overall Trickmode Control module which, knowing N, uses the trickmode tables defined in the already mentioned patent application to access all data required to decode a picture.<br>
Slow motion trickmodes (forward or backward) are under the control of the Display Manager as this trickmode simply implies a display rate lower than one picture per 40ms.<br><br>
11<br>
Figure 4 illustrates the DecodePicture command principle. The reconstruction buffers' current state is represented to the left of the diagram. The buffers each contain certain pictures (X, Y, Z). The DecodePicture process ensures that if applied to a picture N, one of the buffers will in the end contain this requested picture, whatever the content of the other two buffers.<br>
As already said, an MPEG picture may depend on other pictures and its decoding may require the availability of already reconstructed pictures. An MPEG coded stream always contains a number of entry points under the form of Intra pictures. None of the pictures following such an entry point may depend on pictures preceding the entry point. The DVB standard specifies that these entry points shall occur at least every 0.5 s. Open Groups of Pictures are a particular case.<br>
The DecodePicture command is implemented in a recursive way as illustrated by the flowchart of figure 5. If the decoding of a picture requires the presence of one or two previously decoded pictures, these latter pictures are decoded first.<br>
If the target picture (PicID) does not yet exist in the reconstruction buffers, then it needs to be decoded. If the picture identified by PicID is of "P" or "B" type, then its decoding may require the presence of forward and backward predictors. This information is available in the trickmode tables.<br>
The rule that gives the predictors on which a picture to be decoded depends on is simple: going through the stream backwards (i.e. towards video access units previously recorded), the first "P" type or "I" type picture encountered is the predictor for the current picture. This picture can be found using the trickmode information. This predictor is called "NearestID" in figure 5.<br>
If the picture identified by PicID is a "P" type picture, NearestID is a Forward Predictor in the sense that the NearestID picture is located, in the time scale and display order, before the picture identified by PicID.<br>
If the picture identified by PicID is a "B" type picture, NearestID is a Backward Predictor. Then the Forward Predictor is found by looking further backwards for the next "I" or "P" type picture. This Forward predictor is called "FarthestiD" in figure 5.<br><br>
12<br>
!n order to decode a picture, if the reconstructed predictors do not exist in the reconstruction buffers, they have to be built. In this case, the DecodePicture command is recursively repeated for these pictures.<br>
Preceding the reconstruction of a B Picture, up to two predictors may have to be decoded, unless already decoded and present in the reconstruction buffer. As can be seen in figure 5, FarthestlD is decoded first, followed by NearestlD. Since NearestID may also depend on FarthestlD, the latter is decoded first: the process is thus optimized and a double decoding of the picture corresponding to FarthestlD is avoided. For example, if a B picture is predicted from two P pictures, the second P picture in time depends on the first P picture.<br>
Once FarthestlD is built into a reconstruction buffer, the buffer is locked to prevent the reconstruction process of NearestID to overwrite FarthestlD, which is kept as a temporary result.<br>
Whatever the selected playback mode, only three reconstruction buffers are used, as will now be explained:<br>
Decoding an Intra picture requires only one free buffer, since no predictor is required. Decoding a Predictive picture requires one predictor: one or two buffers may have to be used, depending on whether the decoded predictor of the Predictive picture is already present in another buffer or not, i.e. whether a recursive decoding has to be carried out or not.<br>
Among one of the three buffers, one contains the picture currently displayed. Thus two buffers are available for decoding further pictures -supposing they do not contain a picture to be displayed after the current picture - and thus any I or P picture may be decoded without disturbing the display of the current picture.<br>
B pictures on the other hand require two predictors. In closed Groups of Pictures, one of the two predictors ('Nearest Predictor') will depend on the other ('Farthest Predictor1). By decoding first the farthest predictor, followed by the nearest predictor, only two buffers are required to decode both predictors. In open Groups of Pictures, both predictors may be independent, but since these predictors comprise an I picture from the current Group of Pictures and a P (or I) picture from the previous Group of Pictures, only two buffers are required as along as the P or I picture of the previous Group of Pictures is decoded first.<br><br>
13<br>
When the picture currently displayed is not one of the predictors for the next picture to be displayed, then assuming this next picture is of the B type, it has to be reconstructed in the buffer containing the picture currently displayed. In currently available decoders, it is often possible to start overwriting a displayed picture before it has been totally displayed. Overwriting may start for instance 20ms after the start of the display. If a picture is displayed for several frame periods, the overwriting may of course be made during the last frame period.<br>
It thus appears that when the decoding order is properly chosen, only three reconstruction buffers are required.<br>
When ail necessary predictors have been decoded, an available reconstruction buffer must be chosen to receive the new picture to be decoded and displayed. In some cases, there may be no choice, such as in the case of decoding a B picture: all three buffers need to be used, one for the forward predictor, one for the backward predictor and one for the B picture itself.<br>
In other cases, a buffer out of two or three must be chosen.<br>
The allocation of the three reconstruction buffers between display and decoding is critical for the performance of the overall system. Indeed, when the proper buffer is not chosen, an additional delay may be introduced for decoding a given picture. Depending on the processing power of the video decoder, it may then happen that a picture is not fully decoded before it is to be displayed.<br>
The inventors have determined that in order to avoid decoding delays, the buffer to be chosen for a picture to be displayed is the free buffer that was released by the display process the longest time ago.<br>
To implement this allocation method, a counter is associated with each buffer model element. When a picture to be displayed is reconstructed in a buffer, the counter of this buffer is reset and counters of other buffers are incremented. According to the present embodiment, the buffer allocated to a new picture is the buffer that has the highest counter value.<br>
Figure 6 is a flowchart of the buffer allocation process. It consists in cycling through all buffers, discarding those locked because containing a predictor, and selecting among the unlocked ones (if any) the one having the greatest counter value.<br><br>
14<br>
As described above, the picture reordering and buffer allocation problem is solved with the use of a virtual model as the following data structures, one for each of the three reconstruction buffers:<br>
typedef u_int8 PiclDJ; typedef struct {<br>
PiclDJ	picIDJ; <defines the picid of></defines>
stored<br>
picture&gt;<br>
Boolean	isFree_b; <defines free></defines>
status&gt;<br>
U_int8	dispfayCounter__ui8;   <counter of time></counter>
the buffer has been free of a displayed picture&gt;<br>
} Buffer J;<br>
Bufferj DecoderState_t[ BUFFER_COUNT ];<br>
An example of the decoding process in reverse playback will now be described in relation with figure 7. This example concerns the case of open Groups of Pictures. Consider that the video stream has the following structure:<br>
... P111 -B'9-B' 10-I2-B0-B1-P5-B3-B4-P8-B6-B7-P11-B9-B10-l"2-B"00-B"1...<br>
where I, P and B respectively designate Intra, Predictive and Bidirectional pictures, the number associated with each letter designating the normal order of display in the Group of Pictures. The time axis runs from left to right, i.e. the 'prime' Group of Pictures is normally displayed first.<br>
The predictors of each picture are indicated in Table 1.<br><br>
15<br><br>
! Picture<br>
i	Nearest Predictor	Farthest Predictor<br>
B"1	i"2	P11<br>
B"0	f"2	P11<br>
l"2		<br>
B10	P11	P8<br>
B9	P11	P8<br>
P11	P8	<br>
B7	P8	P5<br>
B6	P8	P5<br>
P8	P5	<br>
B4	P5	12<br>
B3	P5	12<br>
P5	12	<br>
B1	!2	P'11<br>
BO	12	P'11<br>
12		<br>
B'1O	P'11	P'8<br>
B'9	P'11	P'8<br>
P'11	P'8	<br>
Table 1<br>
Figure 7 indicates the content of each of the buffers A, B and C. The 'Frame Period1 column counts the 40ms display periods (whatever its thickness on the figure). The period '0' corresponds to the display period of P11. The 'Displ. Picture1 column indicates which picture is displayed during the associated frame period. The 'Decoding per Fr. period1 indicates the number of pictures decoded during a given 40ms period. Grey areas indicate when the content of a given buffer is displayed.<br>
For the sake of simplicity, frame periods, decoding periods and buffer occupancy periods are aligned. This is not necessarily so in reality. First, the time required to decode a picture depends on the picture. Second, a picture may start to be displayed before it is fully decoded. For example, if it is indicated that a picture B"1 is decoded while at the same time being displayed, this<br><br>
16<br>
means that the display starts at the earliest 20ms after the decoding of the picture.<br>
Let us suppose the pictures P11 to BO are to be displayed in this order.<br>
Figure 7 lists in the order of decoding all the pictures (whether to be displayed or not) determined by the recursive process described above.<br>
P11 depends on P8, depending in turn on P5, depending in turn on 12. Consequently, 12 is decoded in buffer A during period -4, P5 during period -3, P8 also during period -3. During period -4, picture B"3 is displayed, while during period -3, picture l"2 is displayed. As can be seen, during period -3, three pictures need to be decoded. The fourth picture required, 12, is decoded during the previous period, since buffer A is available. During that same period, buffers B and C are not available, because buffer B contains the displayed picture B"3 and buffer C is locked because containing the next picture to be displayed, l"2. As can be seen, the decoding of a picture is limited by the availability of unlocked buffers, and pictures are decoded in the order in which they are required as soon as possible.<br>
Since we use open Groups of Pictures in this example, P11 is not decoded to be displayed at this point, but to serve as predictor for pictures B"1 and B"0. The other predictor of these two pictures is l"2, already present in buffer C at this point. B"1 and B"0 can thus be decoded and displayed immediately (i.e. 20 ms after decoding has started).<br>
P11 is then to be displayed. Since it is already present in buffer B, no new decoding has to be carried out for this picture and it can be immediately displayed.<br>
At the end of period -1, the buffer C becomes available because B"0 has been decoded and its predictors, stored in buffers B and C, become useless. Thus 12 is decoded, as a first step towards decoding B10, depending on 12, P5, P8 and P11. Decoding of the other pictures follows a similar pattern.<br><br>
17<br>
WE CLAIM<br>
1. Method for decoding compressed video pictures in a video decoding device comprising a random access source of coded video pictures, a video decoder and a plurality of reconstruction buffers for storing decoded pictures, characterized by the steps of:<br>
establishing an order of decoding pictures;<br>
commanding said video decoder to decode a picture upon availability of a reconstruction buffer.<br>
2. Method according to claim 1, comprising the steps of: locking access to a reconstruction buffer containing a picture to be<br>
displayed until display of said picture;<br>
commanding the decoding of a further picture upon availability of an<br>
unlocked reconstruction buffer.<br>
3.	Method according to one of the claims 1 to 2, wherein said step of<br>
establishing an order for decoding pictures comprises the steps of:<br>
determining a list of pictures to be displayed among pictures in said stream;<br>
recursively determining chains of predictors for said pictures to be displayed, and inserting said predictors in said list of pictures to be displayed in the order required for decoding predictors before pictures depending on said predictors.<br>
4.	Method according to one of the claims 1 to 3, wherein said<br>
compressed video stream comprises pictures in the order of decoding, further<br>
comprising the steps of determining for a bidirectional picture a nearest and a<br>
farthest predictor, where said nearest predictor is the picture appearing in the<br>
stream closest to said  bi-directional  picture,  said farthest predictor being<br>
decoded prior to said nearest predictor.<br>
5.	Method according to one of the claims 1 to 4, wherein said step of<br>
determining an order of decoding pictures comprises the steps of:<br><br>
18<br>
loading predetermined information descriptive of the contents of the video stream, and<br>
deriving said order of decoding pictures from said information as a function of a selected display mode.<br>
6.	Method according to one of the claims 1 to 5, further comprising<br>
the step of selecting a reconstruction buffer among available reconstruction<br>
buffers for storage of a decoded picture, said selection being carried out so as<br>
to select the available reconstruction buffer in which no decoded picture to be<br>
displayed has been stored for the longest time.<br>
7.	Method  according to claim 6, further comprising the step of<br>
attributing a counter to each reconstruction buffer, of incrementing each counter<br>
every time a picture is displayed, of resetting a counter when a picture of its<br>
associated buffer is displayed and of attributing the buffer with the highest<br>
counter value to a picture to be decoded.<br>
8.	Method according to one of the claims 1 to 7, carried out using<br>
only three reconstruction buffers.<br>
9.	Method according to one of the claims 1 to 8, further comprising<br>
the steps of verifying prior to deciding the decoding of a picture, whether said<br>
picture is already present in one of the reconstruction buffers, and of avoiding a<br>
second decoding of said picture in this case.<br>
10.	Video decoding device characterized by<br>
a random access source (12, 13) of a compressed video stream including coded pictures;<br>
means (10) for selecting pictures to be decoded;<br>
a plurality of reconstruction buffers (A, B, C) for storing decoded pictures;<br>
a video decoder (9) for decoding coded pictures;<br><br><br>
means (10) for monitoring the availability for write access of reconstruction buffers and for controlling said video decoder to decode a selected picture upon availability of a reconstruction buffer, wherein the availability of a reconstruction buffer is determined by the status of the display of a picture contained in said reconstruction buffer.<br>
The invention concerns a method for decoding compressed video pictures in a video decoding device comprising a random access source of coded video pictures, a video decoder and a plurality of reconstruction buffers for storing decoded pictures.<br>
The method comprises the steps of establishing an order of decoding pictures and of commanding said video decoder to decode a picture upon availability of a reconstruction buffer.<br>
The invention also concerns a device for implementing the inventive method.<br></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDAwMjQ4LWNhbC0yMDAxIGFic3RyYWN0LnBkZg==" target="_blank" style="word-wrap:break-word;">000248-cal-2001 abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDAwMjQ4LWNhbC0yMDAxIGNsYWltcy5wZGY=" target="_blank" style="word-wrap:break-word;">000248-cal-2001 claims.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDAwMjQ4LWNhbC0yMDAxIGNvcnJlc3BvbmRlbmNlLnBkZg==" target="_blank" style="word-wrap:break-word;">000248-cal-2001 correspondence.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDAwMjQ4LWNhbC0yMDAxIGRlc2NyaXB0aW9uIChjb21wbGV0ZSkucGRm" target="_blank" style="word-wrap:break-word;">000248-cal-2001 description (complete).pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDAwMjQ4LWNhbC0yMDAxIGRyYXdpbmdzLnBkZg==" target="_blank" style="word-wrap:break-word;">000248-cal-2001 drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDAwMjQ4LWNhbC0yMDAxIGZvcm0tMS5wZGY=" target="_blank" style="word-wrap:break-word;">000248-cal-2001 form-1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDAwMjQ4LWNhbC0yMDAxIGZvcm0tMTgucGRm" target="_blank" style="word-wrap:break-word;">000248-cal-2001 form-18.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDAwMjQ4LWNhbC0yMDAxIGZvcm0tMi5wZGY=" target="_blank" style="word-wrap:break-word;">000248-cal-2001 form-2.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDAwMjQ4LWNhbC0yMDAxIGZvcm0tMjYucGRm" target="_blank" style="word-wrap:break-word;">000248-cal-2001 form-26.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDAwMjQ4LWNhbC0yMDAxIGZvcm0tMy5wZGY=" target="_blank" style="word-wrap:break-word;">000248-cal-2001 form-3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDAwMjQ4LWNhbC0yMDAxIGZvcm0tNS5wZGY=" target="_blank" style="word-wrap:break-word;">000248-cal-2001 form-5.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDAwMjQ4LWNhbC0yMDAxIGxldHRlcnMgcGF0ZW50LnBkZg==" target="_blank" style="word-wrap:break-word;">000248-cal-2001 letters patent.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDAwMjQ4LWNhbC0yMDAxIHByaW9yaXR5IGRvY3VtZW50LnBkZg==" target="_blank" style="word-wrap:break-word;">000248-cal-2001 priority document.pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="200487-thermal-imaging-system.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="200489-heat-recovery-steam-generator.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>200488</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>248/CAL/2001</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>07/2007</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>16-Feb-2007</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>16-Feb-2007</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>26-Apr-2001</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>THOMSON MULTIMEDIA</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>46 QUAI A.LE GALLO, F-92100 BOULOGNE-BILLANCOURT</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>ABELARD FRANCK</td>
											<td>20 RUE CHATEAUBRIAND, F-35220 CHATEAUBOURG</td>
										</tr>
										<tr>
											<td>2</td>
											<td>VERDIER ALAIN</td>
											<td>6 ALLEE JACQUES CARTIER F-35770 VERN SUR SEICHE</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>H04 N 5/783</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>N/A</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td></td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>00401381.9</td>
									<td>2000-05-19</td>
								    <td>EPO</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/200488-method-and-device-for-decoding-a-video-stream-in-trick-mode by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 03:55:40 GMT -->
</html>
