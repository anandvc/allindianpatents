<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/225260-a-server-apparatus-for-receiving-and-transmitting-packetized-multi-media-data-over-an-asychronous-network by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 04 Apr 2024 22:48:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 225260:A SERVER APPARATUS FOR RECEIVING AND TRANSMITTING PACKETIZED MULTI-MEDIA DATA OVER AN ASYCHRONOUS NETWORK</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">A SERVER APPARATUS FOR RECEIVING AND TRANSMITTING PACKETIZED MULTI-MEDIA DATA OVER AN ASYCHRONOUS NETWORK</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>A method and an apparatus using a system level clocking scheme to remove jitter from multi-meclla packet distributed over an asychronous network. The present Invention overcomes the problems associated with jitter introduced in an asychronous network by using various time stamps to synchronize a client device dock to a headend clock and to control the data flow in the client device to match rate that the data is received by a broadband receiver coupled to the headend. The present invention allows the client device to synchronize to a selected one of a plurality of headend dock by Including a dock adjustment factor along with the time stamps. The time stamps are added at the physical layer so that the time stamps correspond to the time the data packets are placed onto and received from the asychronous network.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>Multi-Media Jitter Removal in an Asynchronous Digital Home Network<br>
The present invention relates to an asynchronous communications network,<br>
and in particular, to an asynchronous multi-media digital home network having a<br>
system level clocking scheme to remove jitter from multi-media data packets.<br>
Recent advances in digital communications technology have increased the<br>
viability of digital home networks ("DHN"), which can allow various devices in a home<br>
to communicate with each other. In particular, the growing availability of broadband<br>
access has made it desirable to be able to tie in various devices in a home to a single<br>
gateway device that is coupled to a broadband network, or a plurality of networks, for<br>
centralized access and distribution of multi-media information. In such a digital home<br>
network, the gateway device accesses and buffers multi-media content and<br>
distributes the content over the network as requested by various client devices<br>
coupled to the network.<br>
Ethernet is a common option for implementing a LAN. Ethernet is an<br>
asynchronous collision detect network. HPNA is also an asynchronous collision<br>
detect network and some power line based networks are often asynchronous collision<br>
detect networks. However, difficulties may arise when such networks are used to<br>
distribute multi-media content.<br>
Fig. 1 is a system diagram illustrating a multimedia network. System 100<br>
comprises a plurality of devices 108-113 coupled to media server 103 via one of a<br>
plurality of communications networks 105-107. In system 100, media server 103<br>
receives multi-media content via satellite dish 102, buffers the content, and<br>
distributes the content as requested from the various devices coupled to the network.<br>
Media server 103 may also be coupled to receive multi-media content via any one of<br>
plurality of known digital media access methods, including, cable, and DSL. The<br>
transfer of data over the selected network is generally achieved by using large buffers<br>
or by allowing a client device to throttle data.<br>
In this regard, there are a number of problems associated with taking a live<br>
broadcast and distributing it on an asynchronous digital home network. In a live<br>
broadcast signal, the data is pushed to the client device, and the client device does<br>
not have any control over the incoming data stream. In order to ensure that the<br>
networked client device can decode and display all of the audio and video data<br>
delivered to it at the correct frame rate, and without repeated or dropped frames, it is<br>
in general required that the networked client device be clock synchronized to the<br>
headend clock. The most widely accepted method for clock synchronization in a<br>
broadcast A/V network relies on delivering counter samples taken at the broadcast<br>
site to the receiver with a fixed delay from the time of broadcast till the time of receipt.<br>
The counter at the broadcast site is incremented by the broadcast site's reference<br>
clock. At the instant those clock samples arrive in the receiver, a counter clocked by<br>
a voltage controlled oscillator (VCXO) is sampled. The value of the counter and the<br>
time stamp received from the broadcast site are compared and if the difference<br>
between the samples of the local counter and the clock samples taken at the<br>
broadcast site varies over time, the voltage applied to the local VCXO is adjusted to<br>
try to frequency lock the local clock to the broadcast site's reference clock.<br>
On an asynchronous collision detect network, such as an Ethernet network,<br>
the delay from the time a packet is constructed and placed in a transmit buffer until<br>
the time the packet is received by a network connected device is not always constant.<br>
In such networks, multiple devices colliding on a network can cause variable packet<br>
and unpredictable delays in the reception of a packet. In this environment it is not<br>
possible to use the method described above to frequency lock the clock at the<br>
networked receiver to a clock at the networked transmitter due to the variable and<br>
unpredictable delays. Using such a method to attempt to lock the receiver clock to<br>
the transmitter clock may produce significant jitter in the receiver clock. Depending<br>
upon the magnitude of the jitter in the receiver's clock, it may not be possible to<br>
produce an NTSC compliant color burst for video display. In addition, this jitter will at<br>
a minimum require the audio and video compressed data buffers to be larger than<br>
necessary and at worst cause the buffers to underflow or overflow. The side effects<br>
would include video freezing, possible audio chirps and the display colors changing<br>
dynamically due to the variations in the color burst.<br>
Some networks, such as 1394 networks, provide isochronous capability that<br>
can eliminate this problem. Additionally, various methods, such as SRTS, have also<br>
been developed for ATM networks to address these timing issues. The SRTS<br>
method assumes that the transmitting device and the receiving device both have<br>
access to a network clock for the synchronization. However, such methods may not<br>
be completely suitable for correcting jitter in an asynchronous collision detect<br>
network, such as an Ethernet network. Therefore, what is desired is a system and a<br>
method for synchronizing the clocks and controlling the data flow in an asynchronous<br>
network, and in particular, in an asynchronous collision detect network to overcome<br>
the above-noted problems. Furthermore, what is needed is a system and a method<br>
for synchronizing the clocks and controlling the data flow in an asynchronous<br>
network, wherein the broadband receiver is able to receive signals from one of a<br>
plurality of headend networks and each headend has its own system clock.<br>
The present invention overcomes the jitter problems discussed above, and in<br>
particular, provides a system and a method for distributing multi-media content over<br>
an asynchronous network, wherein the receiver is able to receive inputs from multiple<br>
headend networks. More specifically, the present invention uses time stamps and<br>
clock adjustment factors to minimize and reduce the jitter effects caused by software<br>
processing and collisions on an asynchronous home network. A set of time stamps<br>
are used to perform synchronization of the clock in the client device to the headend<br>
clock and another set of time stamps are used to control data flow in the client<br>
device.<br>
One set of time stamps is added for flow control. When a packet arrives from<br>
a broadband network, a sample of a local counter in the server is latched into a<br>
register. The local counter is clocked with a system clock of the server. The server<br>
attaches the sampled counter value to the received transport packets. Once a<br>
packet is time stamped, the server may place the packet in a transmit buffer. This<br>
time stamp indicates the moment at which the data was received from the broadband<br>
connection and placed into a buffer, and as such, can be used by the client device to<br>
remove the data from a receive buffer at the exact same rate as it entered the buffer.<br>
Another set of time stamps, along with a clock adjustment factor, are used for<br>
synchronizing the client device clock with the head end clock. Each headend<br>
transmits synchronizing information, SCR, along with the multi-media data. When the<br>
server detects a SCR, the server runs an algorithm to calculate a normalization, or<br>
scaling factor, to be applied to the time stamps. The local clock of the server is not<br>
adjusted. The normalization allows the server's local clock to be expressed in terms<br>
of the headend clock. The adjustment factor is applied to the broadband receiver's<br>
time stamps to express them in terms of the headend clock. At the moment a frame<br>
of data is being placed onto the network, a local counter running on the system clock<br>
is sampled. A time stamp based on the sampled clock is placed in the data frame in<br>
real-time at the physical layer of the network so that there is a fixed and constant<br>
. amount of time from the sampling of the local counter and the sampled count value<br>
being placed onto the network. If a collision condition occurs, the time stamp is<br>
updated when the data is retransmitted. At the moment the new data frame is<br>
received in the physical layer of a client device, a sample of a local counter running<br>
on the client's local clock is latched into a register. This "receive-time" time stamp is<br>
then attached to the received frame of data and passed onto successive layers of the<br>
client's network protocol hardware and software. After the client data is passed<br>
through the communication protocols, the data is ready to be used by the client.<br>
The client device uses the time stamps attached at the physical layer of the<br>
server's network interface and the clock adjustment factor, along with the time<br>
stamps that were attached when the data was received by the client device, to lock<br>
the client's local system clock to the headend system clock.<br>
The time stamps attached to the data when the data arrived at the server from<br>
the broadband network, along with the clock adjustment factor, may then be used to<br>
determine the exact time when each data packet should be extracted from the client's<br>
buffer and passed on to the audio/video subsystems in the client. In this way the<br>
packet arrival timing at the server is exactly matched at the input to the A/V<br>
subsystem in the client device.<br>
The invention is described with reference to the accompanying drawings, wherein.<br>
Fig. 1 shows an asynchronous multi-media network including a media server<br>
coupled to a plurality of client devices;<br>
Fig. 2 is a block diagram illustrating the elements of an asynchronous multi-<br>
media network including time stamps placed into the data at various points of the<br>
network according to the present invention;<br>
Fig. 3 shows format of a data frame including the time stamps and clock<br>
adjustment factor utilized in the asynchronous multi-media network according to the<br>
present invention;<br>
Fig. 4 is a block diagram illustrating the element of a broadband receiver<br>
adapted to receive satellite signals;<br>
Fig. 5 is a block diagram illustrating the elements of the PCI DBS tuner board<br>
illustrated in Fig. 4;<br>
Fig. 6 is a block diagram illustrating the elements of the client device illustrated<br>
in Fig. 2;<br>
Fig. 7 is a block diagram illustrating the elements of the transport formatter<br>
board illustrated in Fig. 6;<br>
Fig. 8 is a block diagram illustrating the elements of the client video decoder<br>
illustrated in Fig. 6;<br>
Fig. 9 is a block diagram illustrating the time stamping board used in the<br>
asynchronous multi-media network according to the present invention;<br>
Fig. 10 is a block diagram illustrating the time stamp controller in the time<br>
stamping board shown in Fig. 9;<br>
Fig. 11 is a block diagram illustrating the receiver unit in the time stamp<br>
controller shown in Fig. 10; and<br>
Fig. 12 is a block diagram illustrating the transmitting unit in the time stamp<br>
controller shown in Fig. 10.<br>
Fig. 2 illustrates a digital home network utilizing the time stamps according to<br>
the present invention. The broadband input signal is provided by a headend (not<br>
shown) and received by broadband receiver/multi-media server 202. Server 202 may<br>
be configured to receive the input from one of a plurality of broadband sources, such<br>
as, satellite, cable or DSL, as indicated by input Sys 1, Sys 2... Sys n. This input<br>
signal may be in the form of transport packets, which include System Clock Recovery<br>
(SCRs) information used by server 202 to correlate its local system clock to the<br>
particular head end system clock. The SCRs are used to mange buffer levels and to<br>
derive video timing and color burst signals in an integrated receiver decoder (IRD). It<br>
is important to note that the SCR information and packet timing relationships must be<br>
maintained throughout system 200, from entry into the network to the point of final<br>
presentation, in order for system 200 to operate properly.<br>
In accordance with the present invention, in order to ensure that the exact<br>
arrival time of packets at the client device may be reproduced, each packet arriving<br>
from the broadband network is stamped with a time stamp, T1, when server 202<br>
receives the packet. Time stamp T1 is a sample of a local counter that is clocked<br>
with a local system clock of server 202. Time stamp T1 and the packet are stored<br>
together in buffer 205 prior to being broadcast together over the DHN.<br>
At some later point in time, a group of transport packets, along with header<br>
information, is assembled to form a data frame for transmission on the network DHN.<br>
The data frame includes portions where various time stamps and a clock adjustment<br>
factor may be placed. The moment the data frame starts to be placed onto the<br>
network, local counter in server 202, running on the local system time clock, is<br>
sampled to generate a counter sample time stamp T2. Time stamp T2 is placed in<br>
the outgoing data frame such that the time from sampling the counter value to the<br>
time the counter value enters the network is fixed and constant. It is important that<br>
this time is fixed and constant, and for this reason the counter sampling and time<br>
stamp placement is performed in the physical layer hardware of the network<br>
interface. Since the propagation delay from server 202 to client device 204 over the<br>
network is fixed and constant, the overall propagation delay from sampling T2 until<br>
the packet containing time stamp T2 arrives at client device 204 is also fixed and<br>
constant. Additionally, in a system where the symbol times may change, the present<br>
invention is able to provide the necessary synchronization as long as the propagation<br>
time in the network remains constant.<br>
In the present invention, the system clock of server 202 is not changed.<br>
Instead, a clock adjustment factor is calculated and placed in the data frames to allow<br>
the time stamps to be used to frequency lock a client device clock to the particular<br>
headend clock. A suitable normalization factor may be, for example, clock adjust =<br>
SCR(0) - SCR(1) - [local clock (0) - local clock (1 )]/(SCR(0)-SCR(1)). In this manner,<br>
the client device is able to frequency lock to any one of a plurality of network<br>
headends. Time stamp T2 and the clock adjustment factor are included in portions<br>
306 and 305 in data frame 300 as shown in Fig. 3.<br>
If a collision event occurs, time stamp T2 is updated the next time server 202<br>
attempts to place the data frame onto the asynchronous network. It is important to<br>
note that the time stamp T2 is based on the local clock of server 202, which is not<br>
adjusted.<br>
At the moment the data frame arrives at client device 204, a local counter of<br>
client device 204, running on the client system clock, is sampled to generate a time<br>
stamp T3. This counter value is compared to the adjusted time stamp T2 in the<br>
arriving data frame to ensure that the difference between the client clock and the<br>
headend clock is not changing. If this difference is changing over time, the client<br>
device will modify the voltage on its local VCXO to move its local system clock into<br>
frequency lock with the headend clock. For example,<br>
error = (T2(0) - T2(1))*((clock adjust (0) + clock adjust (1))/2)-(T3(0)-T3(1)),<br>
where (clock adjust (0) + clock adjust (1 ))/2 is the median clock adjust error, and error<br>
is how far off the client clock is from the headend clock.<br>
Thus, time stamps T2 and T3, along with the adjustment factor, are used to<br>
frequency lock the system clocks of the headend and client device 204 together.<br>
Time stamps T2 and T3 may be discarded after they are used in client device 204 for<br>
synchronization. At this point, data frames that encapsulate transport packets and<br>
their associated time stamps T1 and the clock adjustment factor may be stored in<br>
buffer 203 in client device 204.<br>
The next step is to remove data from the buffer of client device 204 at a rate<br>
that exactly matches the rate at which the packets arrived at the input of server 202.<br>
When client device 204 has accumulated enough data in a receive buffer to absorb a<br>
reasonable amount of network jitter client device 204 starts extracting data from the<br>
receive buffer, and making that data available to the decoders within client device<br>
204. A local counter, which is based on the client clock is initialized with the count<br>
value stored with the first transport packet to be extracted from memory. The counter<br>
is clocked with the client's system clock, which is locked to the headend clock, so the<br>
subsequent packets may be extracted from memory when their stored time stamp<br>
value matches the counter value. In this manner, the rate of removal from the<br>
receive buffer of client device 204 matches the rate at which the data was received at<br>
server 202. The format of the data frame and placement of the time stamps T1, T2,<br>
T3 and the clock adjustment factor within the data frame are shown in fig. 3, wherein<br>
the time stamps T1 are generated as the packetized data is received and time<br>
8<br>
stamps T2 are placed into the data frames as the frames are placed on the network<br>
DHN.<br>
The format of the data packets and the placement of the times stamps into the<br>
data frames in an Ethernet environment are further described below. The Ethernet<br>
packets in the present embodiment use the UDP/IP protocols, but it is to be<br>
understood that other suitable protocols, such as TCP, or "raw" Ethernet may be<br>
used to implement the time stamping features of the present invention. In<br>
accordance with the present invention, the IP header utilizes an IP option identifying<br>
the data frames that need to have a time stamp placed therein. The time stamps are<br>
placed in the data frames following the UDP header. There is a unique location in the<br>
extended UDP header for the outgoing and incoming packets.<br>
The clock synchronization time stamps T2 and T3 and the clock adjustment<br>
factor are placed after the UDP header. Time stamp T2 is a 32-bit time stamp and is<br>
applied when the IP packet has an option 25 set. The time stamp is placed into the<br>
data frame at the physical network layer. Although the present embodiment utilizes<br>
option 25 to indicate the presence of time stamps in the frame, it is to be understood<br>
that other suitable method for indicating time stamps, such as designating specific IP<br>
address and port number may be utilized.<br>
Time stamp T3 is also a 32-bit time stamp and is applied when an IP packet<br>
with option 25 is detected. This time stamp is also placed into the data frame at the<br>
physical network layer.<br>
The data flow control time stamps T1 are placed into the data stream when the<br>
data is received from a broadband network. Time stamps T1 are generated using a<br>
local counter in server 202. By placing a time stamp T1 on each transport packet as<br>
the packet arrives at server 202, client device 204 can reproduce the same bit rate as<br>
the rate received at server 202. Data flow control time stamps T1 are in the UDP<br>
payload. Table 1 shows the data format used in the exemplary embodiment of the<br>
present invention.<br>
Once the data frame has been time stamped, the UDP checksum is checked.<br>
If the checksum is not zero, the old checksum is replaced with a newly created<br>
checksum. After resolving the UDP checksum, a new CRC is calculated and<br>
replaces the old CRC value in the MAC layer. If at any point of the packet<br>
interrogation it is determined that the data frame is not a valid time stamp frame, the<br>
frame is passed through with no alterations to the data.<br>
The time stamp value is generated from an external system clock. The<br>
external clock drives a 32-bit counter. A snapshot of the counter is taken when a<br>
data frame is placed onto the network. On an incoming packet, a snapshot of a<br>
counter in the client device is taken. If it is a valid time stamped packet, the snapshot<br>
of the counter is placed into the payload portion of the data frame. The 32-bit counter<br>
is a free running rollover counter synchronous to the external system clock.<br>
The following describes the search sequence to determine whether a<br>
particular data frame needs a time stamp, and if so, where the time stamp data is<br>
placed. The first test is to validate the MAC frame. Validating the MAC frame<br>
requires the CRC to be calculated and compared. If the CRC test fails, the frame is<br>
allowed to pass through without any modifications to ensure that a valid CRC is not<br>
added to a data frame that was received with an invalid CRC. If the CRC test is<br>
passed, a second test is conducted to find an Internet Protocol (IP) in the MAC<br>
frame. Twenty octets into the MAC frame, from the 802.3 specification section 3.2.6,<br>
Length/Type, is the Length/Type field. From ITEF RFC 1700 EtherTypes table, an<br>
Internet IP (Ipv4) is 0x800 (Hexadecimal). If the value is not 0x800, the packet is<br>
passed through. If the Length/Type is 0x800, another test is conducted to determine<br>
the size of the IP header and whether it contains an UDP packet. The contents of a<br>
MAC frame are specified in IEEE 802.3, section 3.1.1.<br>
If the MAC frame contains an IP packet, the next test determines the size and<br>
the option settings. First, in order to determine the size, the second nibble of the IP<br>
packet, which is the Header Length, is examined. The Header Length is the number<br>
of 32-bit words that make up the IP header. Without options, the IP header is<br>
normally 20 bytes, so the Header Length is 5. The IP Header options have a 20<br>
decimal offset from the start of the IP Header.<br>
The steps to determine whether the packet is a valid time stamp packet is now<br>
described. If any of the steps fail, the packet is passed through without any<br>
modifications. First, the header length field is examined to determine whether it is<br>
greater than 5. If so, the 1st IP option located 20 bytes from the beginning of the IP<br>
Header is checked against 0x99040000. The format of the option is shown in Table 2<br>
below:<br>
If the IP options include the designated time stamping option described above, the<br>
present system places a time stamp into the data frame. The time stamps are placed<br>
in the UDP payload portion that follows the IP header, and in particular, at the<br>
beginning of the payload portion. The UDP header is 8 bytes long. The first 32 bit<br>
word of the UDP payload is reserved for time stamp T3, and the second 32 bit word<br>
of the UDP payload is reserved for T2.<br>
A significant aspect of the present invention is that the time stamps and the<br>
CRC are generated and placed into the data frames at the physical layer. As such,<br>
the time stamps and CRC are placed into the data frames as the data frames are<br>
actually being placed onto the network or are received from the network. This allows<br>
the time stamps to accurately reflect the time the data enters the network and the<br>
time the data is received from the network.<br>
The elements of a system for implementing the time stamping described<br>
above is now described in further detail with respect to a DBS receiver. However, it<br>
is to be understood that similar time stamping may be performed for multi-media data<br>
received on other types of broadband networks, such as DSL or cable.<br>
As shown in Figure 4, server 202 consists of three functional blocks connected<br>
by a bus. The satellite signal is received by server 202 through PCI DBS tuner 402.<br>
Host controller 406 reads the transport packets from the satellite signal out of PCI<br>
DBS tuner 402 via PCI bus interface 405. Host controller 406 then processes the<br>
data and sends the processed data out to time stamp board 404 via well-known<br>
protocols, including UDP. Also, PCI DBS tuner 402 and time stamp board 404 have<br>
a common clock between them. The clock is generated on PCI DBS tuner 402, and<br>
used as the time reference for time stamp board 404.<br>
In operation, host controller 406 reads the transport packets out of the FIFO<br>
memory of PCI DBS tuner 402. The packets are then processed according to the<br>
network protocol software and the network frames are then written into the Ethernet<br>
MAC of time stamp board 404. The MAC waits for the Ethernet Network to become<br>
available, and then sends the data through a time stamp controller to an Ethernet<br>
PHY. When a video network packet is detected by the time stamp controller, a time<br>
stamp is added to that packet. The time stamp T2 is a sample of a counter in the<br>
time stamp controller that is clocked by a clock in server 202. In server 202, the<br>
clock source for the time stamp controller is a VCXO in PCI DBS tuner 402.<br>
Figure 5 shows a block diagram of PCI DBS tuner 402. PCI DBS tuner 402<br>
performs several functions. First, PCI DBS tuner 402 ensures that the correct<br>
satellite transponder is selected, tuned, and demodulated. This is accomplished by<br>
satellite tuner 502 and demodulator 504. These devices perform the well-known<br>
conversion of a satellite signal into a digital transport stream.<br>
Second, PCI DBS tuner 402 filters the packets of the transport stream. Tuner<br>
controller 506 contains logic to filter out only the transport packets requested by host<br>
controller 406. The transport packets are then stored in FIFO buffer 512. Host<br>
controller 506 can then read the packets out of FIFO buffer 512 via PCI bus interface<br>
405. In order to facilitate the PCI bus interface, a PCI bridge chip 508 is used.<br>
Additionally, time stamps T1 can be added to each transport packet using the<br>
system clock from VCXO 510. Time stamp T1 is based on a sample of the local<br>
counter at the moment the packet is received at tuner 402.<br>
The elements of network client 204 are shown in Figure 6. Data arrives at the<br>
client's time stamp board 602, and time stamp T3 is added to the data frame at the<br>
moment of arrival. The packets are processed by client controller 608, which is<br>
connected to time stamp board 602 via PCI bus 605. The transport packets are<br>
extracted from the network frames, and are then written to transport formatter board<br>
604. The output of transport formatter 604 is a serial transport stream that may be<br>
used by decoder 606. The output of decoder 606 is connected to a television or<br>
other display device. Figure 8 shows the elements of decoder 606.<br>
Client controller 608 is responsible for executing a clock recovery algorithm.<br>
The data frame departure times T2 from server 202, adjusted by the clock adjustment<br>
factor, are compared to the arrival times T3 at client 204. In this manner, client<br>
controller 608 can determine whether decoder VCXO 812 is faster or slower than the<br>
headend clock. Client controller 608 sends commands to decoder controller 810 to<br>
speed up or slow down decoder VCXO 812 through a low speed serial (RS-232)<br>
connection.<br>
The time stamp board of the client device is similar to the time stamp board of<br>
the server device except that the recovered clock source in the client device is<br>
derived from the clock of decoder 606.<br>
The elements of transport formatter 604 are shown in Fig. 7. Transport<br>
formatter 604 is connected to client controller 608 via PCI bus 702. A PCI bus<br>
interface converts the PCI bus to a standard local bus, which is connected to<br>
transport formatter controller 704. Transport formatter controller 704 outputs a serial<br>
transport stream at TTL logic levels. High speed serial converter 706 circuit converts<br>
those signals to low voltage differential signals, which are passed to decoder 606.<br>
Transport formatter controller 704 has two modes of operation. The first is<br>
flow control mode in which transport packets are forwarded to decoder 606 according<br>
to the optional time stamps added by tuner controller 506 of PCI DBS tuner 402. In<br>
this manner, the relative transport packet departure times from transport formatter<br>
604 match the transport packet arrival times at tuner controller 506. This has the<br>
effect of making the packet timing at the input of decoder 606 appear to be<br>
connected directly to tuner 502 and demodulator 504 of PCI DBS tuner 402.<br>
The second mode of operation allows the data to flow immediately from<br>
transport formatter controller 704 to decoder 606. In this mode, decoder 606 is<br>
required to buffer the data internally. This requires decoder 606 to contain more<br>
memory than the first mode.<br>
Data arrives from transport formatter 604 into high speed serial interface 802<br>
of decoder 606. Transport processor 804 sorts the incoming transport packets and<br>
puts them into the correct buffer (video, audio, program guide, other data, etc.). The<br>
video and audio data are decompressed in the video/audio decoder 806. After that,<br>
decompressed digital data is converted to analog NTSC signals via NTSC<br>
encoder/audio DAC 808.<br>
The time stamping board used in implementing the present time stamping<br>
method is now further described. Although, described with reference to the time<br>
stamping board associated with server 202, as noted above, the time stamping board<br>
associated with client 204 is similar. Time stamping board 404 is a PCI Ethernet NIC<br>
that can support both 10Mb/s and 100 Mb/s data rates. It is capable of resetting the<br>
UDP check sum and placing 32-bit time stamps in the data frames, as well as<br>
recalculating the CRC for the designated data frames. The external interfaces allow<br>
board 404 to be integrated into PC PCI or embedded PCI architectures. An external<br>
clock interface is provided to generate time stamp values.<br>
Fig. 9 illustrates a block diagram of time stamping board 404. The time<br>
stamping board comprises an input jack 904, for example RJ45, coupled to Ethernet<br>
network 902. Input jack 904 is coupled to 10/100 Base-TX Phy transformer 906.<br>
Transformer 906 is coupled to physical layer device 908, which is a full feature<br>
physical layer device with integrated PMD sublayers to support both 10BASE-T and<br>
100BASE-X Ethernet protocols. Suitable physical layer device 908 includes, but is<br>
not limited to DP83843VJE manufactured by National Semiconductor Corporation.<br>
Physical layer device 908 is coupled to bus buffer 912, which translates the voltage<br>
levels between physical layer device 908 and time stamp controller 916. Bus buffer<br>
912 is a low voltage CMOS Octal Bus buffer. It is ideal for low power and high-speed<br>
3.3V applications and can be interfaced to 5V-signal environment for both inputs and<br>
outputs. Bus buffer 912 is coupled to time stamp controller 916, which controls and<br>
performs much of the time stamping functions, including, resetting the UDP check<br>
sum, placing the time stamps and recalculating the new CRC for the valid data<br>
frames in both the receive and transmit directions.<br>
Time stamp controller 916 is coupled to configuration device 918, which stores<br>
and loads the program to operate time stamp controller 916. Time stamp controller<br>
916 is also coupled to Ethernet MAC unit 914, which is a LAN controller for both<br>
10Mb/s and 100Mb/s data rates. Ethernet MAC 914 provides a direct interface to the<br>
peripheral component interconnect (PCI) local bus or the CardBus.<br>
Time stamp controller 916 provides the MM interfaces to the PHY and the<br>
MAC. As shown in Fig. 10, controller 916 consists of receiver unit 1002 and<br>
transmitter unit 1004. The two units are implemented separately, but share the same<br>
external system clock and the reset signal.<br>
As shown in Fig. 11, receiver unit 1002 comprises receiver controller 1102,<br>
time stamp generator 1114, shift register 1112, verify CRC module 1110, calculate<br>
newCRC module 1106, 3:1 MUX 1108 and 4:1 MUX1104. Receiver controller 1102<br>
detects the status of data stream to enable the 3:1 MUX and the 4:1 MUX for<br>
appropriate out put data (receive data, reset UDP check sum, time stamp, new CRC).<br>
Calculate new CRC module 1106 calculates the CRC check sum for the<br>
modified data stream (Ethernet packet which has time stamp and reset UDP check<br>
sum), this new CRC will be placed into the modified data stream before it arrives at<br>
the MAC. The difference of receiver unit 1002 to transmitter unit 1004 is that receiver<br>
unit 1002 included verify CRC module 1110. It is necessary to verify the CRC on<br>
packets that are received, due to the fact that this data may have been corrupted on<br>
the medium. If the CRC is not correct, this indicates that the data has indeed<br>
become corrupted. Instead of adding a new, correct CRC to the data, the data is<br>
allowed to pass through to the MAC with an incorrect CRC.<br>
Controller 1102 synchronizes and controls the operations of all modules and<br>
components. Two clocks are used: a receive clock and an external system clock.<br>
The time stamp is generated by the external clock and latched into the receive clock<br>
domain at the start of every packet. Data is received from the PHY and the<br>
appropriate data (receive data, reset UDP check sum, time stamp, new CRC) is<br>
transmitted to the MAC in accordance with IEEE 802.3.<br>
When the data is received, the time stamp T3 is placed in the appropriate area<br>
and a new CRC is calculated and replaces the old CRC value in the MAC layer.<br>
Again, a significant aspect of the present invention is that the time stamps and the<br>
CRC are generated and placed in the data frames at the physical layer as the data<br>
frame is received from the network. As such, the time stamps and the CRC, which<br>
reflect the actual time the data frames are received from the network, are quickly and<br>
efficiently placed in the data frames as they move to the MAC layer. If at any point of<br>
the packet interrogation it is determined that the data frame is not a valid time stamp<br>
frame or there are errors while receiving, the data frame is allowed to pass through<br>
with no alterations to the data.<br>
As shown in Fig. 12, transmitter unit 1202 comprises transmitter controller<br>
1202, time stamp generator 1210, shift register 1208, calculate new CRC module<br>
1206, 3:1 MUX 1212 and 4:1 MUX 1204. Transmitter controller 1202 also controls<br>
the operations of all modules and components for each appropriate process. Two<br>
clocks are used: a transmit clock and an external system clock. The time stamps are<br>
generated by the external clock and latched into the receive clock domain at the start<br>
of every packet. Here again, the time stamps are generated and placed into the data<br>
frames at the physical layer.<br>
While this invention has been described as having a preferred design, the<br>
present invention can be further modified within the spirit and scope of this<br>
disclosure. For example, the time stamping features may be implemented in other<br>
asynchronous networks, including, but not limited to, HPNA, PLC, and certain<br>
wireless networks, for example IEEE 802.11b. This application is therefore intended<br>
to cover any variations, uses, or adaptations of the invention using its general<br>
principles. Further, this application is intended to cover such departures from the<br>
present disclosure as come within known or customary practice in the art to which<br>
this invention pertains and which fall within the limits of the appended claims.<br>
WE CLAIM : CLAIMS<br>
1. A server apparatus for receiving packetized multi-media data and transmitting<br>
the packetized multi-media data over an asynchronous network, the apparatus<br>
comprising:<br>
an inputfor receiving packetized multi-media data from a selected one of a<br>
plurality of signal sources, the packetized multi-media data including synchronizing<br>
information associated with the selected signal source;<br>
a clock;<br>
a controller, coupled to the input and the clock, for generating a clock<br>
adjustment factor for correlating the clock to a clock associated with the selected<br>
signal source in response to the synchronizing information, the controller generating<br>
data frames having the packetized multi-media data and the clock adjustment factor<br>
included therein;<br>
an output, coupled to the asynchronous network, for transmitting the data<br>
frames to a client device;<br>
a time stamping device, coupled to the controller, the clock and the output, for<br>
placing a synchronizing time stamp in the each data frame, the synchronizing time<br>
stamp being indicative of the time the respective data frame is placed onto the<br>
asynchronous network, whereby the synchronizing time stamp and the clock<br>
adjustment factor may be used by a client device for synchronizing a clock<br>
associated with the client device with the clock associated with the selected signal<br>
source.<br><br>
2. The server apparatus as claimed in claim 1, wherein the controller generates<br>
data flow time stamps in response to the receipt of the packetized multi-media data,<br>
each data flow time stamp being indicative of a time a respective multi-media data<br>
packet is received at the input, the data frame including the packetized multi-media<br>
and associated data flow time stamps, wherein the data flow time stamps and the<br>
clock adjustment factor may be used by the client device to control the data flow rate<br>
in the client device to correspond to a rate that the packetized multi-media data is<br>
received at the input.<br><br>
3. The server apparatus as claimed in claim 2, wherein the data frame comprises<br>
a data frame header, time stamp data portion for accepting synchronizing time<br>
stamps, a clock adjustment portion for accepting the clock adjustment factor, and a<br>
data portion for accepting packetized multi-media data and their corresponding data<br>
flow time stamps.<br><br>
4. The server apparatu as claimed in claim 3, wherein the time stamp data<br>
portion includes a first time stamp data portion for accepting the synchronizing time<br>
stamp and a second time stamp data portion for accepting a secohd synchronizing<br>
time stamp added by the client device.<br><br>
5. The server apparatus as claimed in claim 2, wherein the asynchronous network<br>
is an Ethernet network.<br><br>
6. The server apparatus as claimed in claim 2, wherein the asynchronous network<br>
is an HPNA network.<br><br>
7. The server apparatus as claimed in claim 2, wherein the asynchronous network<br>
is a PLC network.<br><br>
8. The server apparatus as claimed in-claim 2, wherein the asynchronous network<br>
is a wireless network.<br>
9. A method for transmitting packetized multi-media data over an asynchronous<br>
network, the method comprising:<br>
receiving the packetized multi-media data from a selected one of a<br>
plurality of signal sources, the packetized multi-media data having synchronizing<br>
information associated with the selected signal source;<br>
generating a clock adjustment factor for correlating a server clock to a<br>
clock associated with the selected signal source in response to the synchronizing<br>
information;<br>
generating data frames having the packetized multi-media data and the<br>
clock adjustment factor included therein;<br>
placing the data frames on the asynchronous network to transmit the<br>
data frames to a client device, wherein a synchronizing time stamp is generated and<br>
placed in each data frame, each synchronizing time stamp being indicative of the<br>
time the respective data frame is place in the asynchronous network, wherein the<br>
synchronizing time stamps and the clock adjustment factor may be used by the client<br>
devices to synchronize a clock associated with the client device to the clock<br>
associated with the selected signal source.<br>
10. The method as claimed in claim 9, further comprising the steps of generating<br>
data flow time stamps upon receipt of the packetized multi-media data, each data<br>
flow time stamp being indicative of a time a corresponding multi-media data packet is<br>
received, and the step of generating data frames includes generating data frames<br>
having the packetized multi-media data and the data flow time stamps included<br>
therein, whereby the client device can control the data flow rate in the client device to<br>
correspond to the rate the packetized multi-media data is received in response to the<br>
data flow time stamps and the clock adjustment factor.<br>
11. An apparatus for processing packetized multi-media data received over an<br>
asynchronous network, the packetized multi-media data comprising data frames<br>
having synchronizing time stamps indicative of the time respective data frames are<br>
placed on the asynchronous network, and a clock adjustment factor that correlates a<br>
server clock with a clock associated with the signal source, the apparatus comprising;<br>
an input, coupled to the asynchronous network, for receiving the data frames<br>
transmitted by the server device operatively coupled to a selected one of a plurality of<br>
signal sources;<br>
a time stamp device, coupled to the input, for generating a second<br>
synchronizing time stamp indicative of the time the data frame is received at the<br>
input;<br>
a clock;<br>
a controller, coupled to the clock and the time stamp device, for synchronizing<br>
the clock to a clock associated with the selected one of a plurality of signal sources in<br>
response to the synchronizing time stamps, the clock adjustment factor and the<br>
second synchronizing time stamps.<br><br>
12. The apparatus as claimed in claim 11, wherein the data frames further include<br>
data flow time stamps associated with the packetized multi-media data, the data flow<br>
time stamps being indicative of the time each multi-media data packet is received by<br>
the server, and further comprising a buffer for storing the packetized multi-media<br>
data, and a decoder, wherein the controller controls the rate that the packetized multi-<br>
media data is transferred to the decoder to correspond to the rate that the packetized<br>
multi-media data is received at the server in response to the data flow time stamps<br>
and the clock adjustment factor.<br><br>
13. The apparatus as claimed in claim 12, wherein the controller generates an error<br>
signal indicative of the difference between the clock and the clock associated with the<br>
signal source in response to the synchronizing time stamps, the clock adjustment<br>
factors, and the second synchronizing time stamps, and frequency locks the clock to<br>
the signal source clock in response to the error signal.<br><br>
14. The apparatus as claimed in claim 12, wherein the asynchronous network is an<br>
Ethernet network.<br><br>
15. The apparatus as claimed in claim 12, wherein the asynchronous network is an<br>
HPNA network.<br><br>
16. The apparatus as claimed in claim 12, wherein the asynchronous network is a<br>
PLC network.<br><br>
17. The apparatus as claimed in claim 12, wherein the asynchronous network is a<br>
wireless network.<br>
18. A method for controlling a client device in response to the receipt of data<br>
frames received over an asynchronous network, each data frames including<br>
packetized multi-media data, a synchronizing time stamp indicative of the time the<br>
data frame is placed on the asynchronous network, and a clock adjustment factor<br>
indicative of a correlation between a sever clock and a signal source clock, the<br>
method comprising;<br>
receiving the data frames transmitted by a server device;<br>
generating second synchronizing time stamps upon receipt of the data frames,<br>
each second time stamp being indicative of the time a respective data frame is<br>
received over the asynchronous network; and<br>
synchronizing a clock in the client device to the signal source clock in<br>
response to the synchronizing time stamps, the clock adjustment factor and the<br>
second synchronizing time stamps.<br><br>
19. The method as claimed in claim 18, wherein the synchronizing step includes<br>
generating an error signal indicative of the difference between the client device clock<br>
and the signal source clock in response to the synchronizing time stamps, the clock<br>
adjustment factors, and the second synchronizing time stamps, and frequency<br>
locking the client device clock to the signal source clock in response to the error<br>
signal.<br><br>
20. The method as claimed in claim 18, wherein the data frames further include<br>
data flow time stamps, each data flow time stamp being indicative of a time a<br>
corresponding multi-media data packet is received by the server device, further<br>
comprising the step of:<br>
controlling the rate at which the packetized multi-media data is transferred<br>
from a buffer to a decoder to correspond to the rate at which the packetized multi-<br>
media data is received at the server device in response to the data flow time stamps<br>
and the clock adjustment factor.<br>
A method and an apparatus using a system level clocking scheme<br>
to remove jitter from multi-meclla packet distributed over an<br>
asychronous network. The present Invention overcomes the<br>
problems associated with jitter introduced in an asychronous<br>
network by using various time stamps to synchronize a client<br>
device dock to a headend clock and to control the data flow in the<br>
client device to match rate that the data is received by a<br>
broadband receiver coupled to the headend. The present invention<br>
allows the client device to synchronize to a selected one of a<br>
plurality of headend dock by Including a dock adjustment factor<br>
along with the time stamps. The time stamps are added at the<br>
physical layer so that the time stamps correspond to the time the<br>
data packets are placed onto and received from the asychronous<br>
network.</td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
		<br>
		<div class="pull-left">
			<a href="225259-a-fuel-saving-device.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="225261-method-of-producing-bristles-for-applying-media-bristles-produced-thereby-and-brushes-comprising-such-bristles.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>225260</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>IN/PCT/2002/01530/KOL</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>45/2008</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>07-Nov-2008</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>05-Nov-2008</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>16-Dec-2002</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>THOMSON LICENSING, S.A.</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>46 QUAI ALPHONSE LE GALLO, F-92648 BOULOGNE, CEDEX</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>JONES, THOMAS, HERBERT</td>
											<td>442 EAST WOOD, WESTFIELD,IN 46074</td>
										</tr>
										<tr>
											<td>2</td>
											<td>LOCKRIDGE, TERRY,WAYNE</td>
											<td>10350 RUCKLE STREET, INDIANAPOLIS, IN 46280</td>
										</tr>
										<tr>
											<td>3</td>
											<td>HORLANDER,THOMAS, EDWARD</td>
											<td>6234 HAVERFORD AVENUE, INDIANAPOLIS,IN 46220</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>H04L 12/00</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/US01/20748</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2001-06-29</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>60/220,940</td>
									<td>2000-07-26</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/225260-a-server-apparatus-for-receiving-and-transmitting-packetized-multi-media-data-over-an-asychronous-network by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 04 Apr 2024 22:48:28 GMT -->
</html>
