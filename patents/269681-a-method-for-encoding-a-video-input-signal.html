<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/269681-a-method-for-encoding-a-video-input-signal by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 06:48:20 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 269681:&quot;A METHOD FOR ENCODING A VIDEO INPUT SIGNAL&quot;</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">&quot;A METHOD FOR ENCODING A VIDEO INPUT SIGNAL&quot;</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>A motion compensation module can be used in a video encoder for encoding a video input signal that includes a sequence of images that are segmented into a plurality of macroblocks. The motion compensation module includes a motion search module, that generates a motion search motion vector for a plurality of subblocks for a plurality of partitionings of a macroblock of a plurality of macroblocks. A motion refinement module generates a refined motion vector for the plurality of subblocks for the plurality of partitionings of the macroblock of the plurality of macroblocks, based on the motion search motion vector for each of the plurality of subblocks of the macroblock of the plurality of macroblocks. The motion refinement module can operate in a plurality of selected modes including a first mode corresponding to a first sub-pixel resolution and a second mode corresponding to a second sub-pixel resolution.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>MOTION REFINEMENT ENGINE FOR USE IN VIDEO ENCODING IN<br>
ACCORDANCE WITH A PLURALITY OF SUB-PIXEL RESOLUTIONS AND<br>
METHODS FOR USE THEREWITH<br>
TECHNICAL FIELD OF THE INVENTION<br>
The present invention relates to encoding used in devices such as video<br>
encoders/codecs.<br>
DESCRIPTION OF RELATED ART<br>
Video encoding has become an important issue for modern video processing<br>
devices. Robust encoding algorithms allow video signals to be transmitted with reduced<br>
bandwidth and stored in less memory. However, the accuracy of these encoding methods<br>
face the scrutiny of users that are becoming accustomed to greater resolution and higher<br>
picture quality. Standards have been promulgated for many encoding methods including<br>
the H.264 standard that is also referred to as MPEG-4, part 10 or Advanced Video<br>
Coding, (AVC). While this standard sets forth many powerful techniques, further<br>
improvements are possible to improve the performance and speed of implementation of<br>
such methods.<br>
Further limitations and disadvantages of conventional and traditional approaches<br>
will become apparent to one of ordinary skill in the art through comparison of such<br>
systems with the present invention.<br>
BRIEF DESCRIPTION OF THE SEVERAL VIEWS OF THE DRAWINGS<br>
FIGs. 1-3 present pictorial diagram representations of a various video processing<br>
devices in accordance with embodiments of the present invention.<br>
FIG. 4 presents a block diagram representation of a video processing device 125<br>
in accordance with an embodiment of the present invention.<br>
1A<br><br>
FIG. 5 presents a block diagram representation of a video encoder 102 that<br>
includes motion search module 204, motion refinement module 206 and mode decision<br>
module 212 in accordance with an embodiment of the present invention.<br>
FIG. 6 presents a graphical representation of the relationship between example top<br>
frame and bottom frame macroblocks (250, 252) and example top field and bottom field<br>
macroblocks (254, 256) in accordance with an embodiment of the present invention.<br>
FIG. 7 presents a graphical representation that shows example macroblock<br>
partitioning in accordance with an embodiment of the present invention.<br>
FIG. 8 presents a graphical representation of a plurality of macroblocks of a video<br>
input signal that shows an example of the neighboring macroblocks used in motion<br>
compensation or encoding of a particular macroblock.<br>
FIG. 9 presents a block diagram representation of a video encoder 102 that<br>
includes motion refinement engine 175 in accordance with an embodiment of the present<br>
invention.<br>
FIG. 10 presents a pictorial representation of pixels and sub-pixel resolution<br>
values in accordance with an embodiment of the present invention.<br>
FIG. 11 presents a flowchart representation of a method in accordance with an<br>
embodiment of the present invention.<br>
FIG. 12 presents a flowchart representation of a method in accordance with an<br>
embodiment of the present invention.<br>
FIG. 13 presents a flowchart representation of a method in accordance with an<br>
embodiment of the present invention.<br>
FIG. 14 presents a flowchart representation of a method in accordance with an<br>
embodiment of the present invention.<br>
FIG. 15 presents a flowchart representation of a method in accordance with an<br>
embodiment of the present invention.<br>
FIG. 16 presents a flowchart representation of a method in accordance with an<br>
embodiment of the present invention.<br>
FIG. 17 presents a flowchart representation of a method in accordance with an<br>
embodiment of the present invention.<br>
?<br><br>
FIG. 18 presents a flowchart representation of a method in accordance with an<br>
embodiment of the present invention.<br>
FIG. 19 presents a flowchart representation of a method in accordance with an<br>
embodiment of the present invention.<br>
FIG. 20 presents a flowchart representation of a method in accordance with an<br>
embodiment of the present invention.<br>
FIG. 21 presents a flowchart representation of a method in accordance with an<br>
embodiment of the present invention.<br>
DETAILED DESCRIPTION OF THE INVENTION INCLUDING THE PRESENTLY<br>
PREFERRED EMBODIMENTS<br>
FIGs. 1-3 present pictorial diagram representations of a various video processing<br>
devices in accordance with embodiments of the present invention. In particular, set top<br>
box 10 with built-in digital video recorder functionality or a stand alone digital video<br>
recorder, computer 20 and portable computer 30 illustrate electronic devices that<br>
incorporate a video processing device 125 that includes one or more features or functions<br>
of the present invention. While these particular devices are illustrated, video processing<br>
device 125 includes any device that is capable of encoding video content in accordance<br>
with the methods and systems described in conjunction with FIGs. 4-19 and the appended<br>
claims.<br>
FIG. 4 presents a block diagram representation of a video processing device 125<br>
in accordance with an embodiment of the present invention. In particular, video<br>
processing device 125 includes a receiving module 100, such as a television receiver,<br>
cable television receiver, satellite broadcast receiver, broadband modem, 3G transceiver<br>
or other information receiver or transceiver that is capable of receiving a received signal<br>
98 and extracting one or more video signals 110 via time division demultiplexing,<br>
frequency division demultiplexing or other demultiplexing technique. Video encoding<br><br>
module 102 is coupled to the receiving module 100 to encode or transcode the video<br>
signal in a format corresponding to video display device 104.<br>
In an embodiment, of the present invention, the received signal 98 is a broadcast<br>
video signal, such as a television signal, high definition televisions signal, enhanced high<br>
definition television signal or other broadcast video signal that has been transmitted over<br>
a wireless medium, either directly or through one or more satellites or other relay stations<br>
or through a cable network, optical network or other transmission network. In addition,<br>
received signal 98 can be generated from a stored video file, played back from a<br>
recording medium such as a magnetic tape, magnetic disk or optical disk, and can include<br>
a streaming video signal that is transmitted over a public or private network such as a<br>
local area network, wide area network, metropolitan area network or the Internet.<br>
Video signal 110 can include an analog video signal that is formatted in any of a<br>
number of video formats including National Television Systems Committee (NTSC),<br>
Phase Alternating Line (PAL) or Seqaeniiel Couleur Avec Memoire (SECAM).<br>
Processed video signal includes 112 a digital video codec standard such as H.264,<br>
MPEG-4 Part 10 Advanced Video Coding (AVC) or other digital format such as a<br>
Motion Picture Experts Group (MPEG) format (such as MPEG1, MPEG2 or MPEG4),<br>
Quicktime format, Real Media format, Windows Media Video (WMV) or Audio Video<br>
Interleave (AVI), or another digital video format, either standard or proprietary.<br>
Video display devices 104 can include a television, monitor, computer, handheld<br>
device or other video display device that creates an optical image stream either directly or<br>
indirectly, such as by projection, based on decoding the processed video signal 112 either<br>
as a streaming video signal or by playback of a stored digital video file.<br>
Video encoder 102 includes a motion compensation module 150 that operates in<br>
accordance with the present invention and, in particular, includes many optional<br>
functions and features described in conjunction with FIGs. 5-19 that follow.<br>
4<br><br>
FIG. 5 presents a block diagram representation of a video encoder 102 that<br>
includes motion search module 204, motion refinement module 206 and mode decision<br>
module 212 in accordance with an embodiment of the present invention. In particular,<br>
video encoder 102 operates in accordance with many of the functions and features of the<br>
H.264 standard, the MPEG-4 standard, VC-1 (SMPTE standard 421M) or other standard,<br>
to encode a video input signal 110 that is converted to a digital format via a signal<br>
interface 198.<br>
The video encoder 102 includes a processing module 200 that can be<br>
implemented using a single processing device or a plurality of processing devices. Such<br>
a processing device may be a microprocessor, co-processors, a micro-controller, digital<br>
signal processor, microcomputer, central processing unit, field programmable gate array,<br>
programmable logic device, state machine, logic circuitry, analog circuitry, digital<br>
circuitry, and/or any device that manipulates signals (analog and/or digital) based on<br>
operational instructions that are stored in a memory, such as memory module 202.<br>
Memory module 202 may be a single memory device or a plurality of memory devices.<br>
Such a memory device can include a hard disk drive or other disk drive, read-only<br>
memory, random access memory, volatile memory, non-volatile memory, static memory,<br>
dynamic memory, flash memory, cache memory, and/or any device that stores digital<br>
information. Note that when the processing module implements one or more of its<br>
functions via a state machine, analog circuitry, digital circuitry, and/or logic circuitry, the<br>
memory storing the corresponding operational instructions may be embedded within, or<br>
external to, the circuitry comprising the state machine, analog circuitry, digital circuitry,<br>
and/or logic circuitry.<br>
Processing module 200, and memory module 202 are coupled, via bus 220, to the<br>
signal interface 198 and a plurality of other modules, such as motion search module 204,<br>
motion refinement module 206, direct mode module 208, intra-prediction module 210,<br>
mode decision module 212, reconstruction module 214, entropy coding module 216,<br>
neighbor management module 218, forward transform and quantization module 220 and<br>
deblocking filter module 222. The modules of video encoder 102 can be implemented in<br>
5<br><br>
software, firmware or hardware, depending on the particular implementation of<br>
processing module 200. It should also be noted that the software implementations of the<br>
present invention can be stored on a tangible storage medium such as a magnetic or<br>
optical disk, read-only-memory or random access memory and also be produced as an<br>
article of manufacture. While a particular bus architecture is shown, alternative<br>
architectures using direct connectivity between one or more modules and/or additional<br>
busses can likewise be implemented in accordance with the present invention.<br>
Motion compensation module 150 includes a motion search module 204 that<br>
processes pictures from the video input signal 110 based on a segmentation into<br>
macroblocks of pixel values, such as of 16 pixels by 16 pixels size, from the columns and<br>
rows of a frame and/or field of the video input signal 110. In an embodiment of the<br>
present invention, the motion search module determines, for each macroblock or<br>
macroblock pair of a field and/or frame of the video signal one or more motion vectors<br>
(depending on the partitioning of the macroblock into subblocks as described further in<br>
conjunction with FIG. 7) that represents the displacement of the macroblock (or<br>
subblock) from a reference frame or reference field of the video signal to a current frame<br>
or field. In operation, the motion search module operates within a search range to locate<br>
a macroblock (or subblock) in the current frame or field to an integer pixel level accuracy<br>
such as to a resolution of 1-pixel. Candidate locations are evaluated based on a cost<br>
formulation to determine the location and corresponding motion vector that have a most<br>
favorable (such as lowest) cost.<br>
In an embodiment of the present invention, a cost formulation is based on the<br>
sum of the Sum of Absolute Difference (SAD) between the reference macroblock and<br>
candidate macroblock pixel values and a weighted rate term that represents the number of<br>
bits required to be spent on coding the difference between the candidate motion vector<br>
and either a predicted motion vector (PMV) that is based on the neighboring macroblock<br>
to the right of the current macroblock and on motion vectors from neighboring current<br>
macroblocks of a prior row of the video input signal or an estimated predicted motion<br>
vector that is determined based on motion vectors from neighboring current macroblocks<br>
6<br><br>
of a prior row of the video input signal. In addition, the cost calculation avoids the use of<br>
neighboring subblocks within the current macroblock. In this fashion, motion search<br>
module 204 is able to operate on a macroblock to contemporaneously determine the<br>
motion search motion vector for each subblock of the macroblock.<br>
A motion refinement module 206 generates a refined motion vector for each<br>
macroblock of the plurality of macroblocks, based on the motion search motion vector.<br>
In an embodiment of the present invention, the motion refinement module determines, for<br>
each macroblock or macroblock pair of a field and/or frame of the video input signal 110,<br>
a refined motion vector that represents the displacement of the macroblock from a<br>
reference frame or reference field of the video signal to a current frame or field. In<br>
operation, the motion refinement module refines the location of the macroblock in the<br>
current frame or field to a greater pixel level accuracy such as to a resolution of 1/4-pixel.<br>
Candidate locations are also evaluated based on a cost formulation to determine the<br>
location and refined motion vector that have a most favorable (such as lowest) cost. As<br>
in the case with the motion search module, a cost formulation is based on the a sum of the<br>
Sum of Absolute Difference (SAD) between the reference macroblock and candidate<br>
macroblock pixel values and a weighted rate term that represents the number of bits<br>
required to be spent on coding the difference between the candidate motion vector and<br>
either a predicted motion vector (PMV) that is based on the neighboring macroblock to<br>
the right of the current macroblock and on motion vectors from neighboring current<br>
macroblocks of a prior row of the video input signal or an estimated predicted motion<br>
vector that is determined based on motion vectors from neighboring current macroblocks<br>
of a prior row of the video input signal. In addition, the cost calculation avoids the use of<br>
neighboring subblocks within the current macroblock. In this fashion, motion refinement<br>
module 206 is able to operate on a macroblock to contemporaneously determine the<br>
motion search motion vector for each subblock of the macroblock.<br>
In addition motion search module 202 or motion refinement module 204 is<br>
operable to determine a skip mode cost of the P Slices of video input signal 110 by<br>
evaluating a cost associated with a stationary motion vector, and by skipping portions of<br>
7<br><br>
motion search and/or motion refinement if the skip mode cost compares favorably to a<br>
skip mode threshold.<br>
It should be noted that when estimated predicted motion vectors are used, the cost<br>
formulation avoids the use of motion vectors from the current row and both the motion<br>
search module 204 and the motion refinement module 206 can operate in a pipelined<br>
fashion and in parallel on an entire row of video input signal 110, to contemporaneously<br>
determine the refined motion vector for each macroblock in the row.<br>
A direct mode module 208 generates a direct mode motion vector for each<br>
macroblock of the plurality of macroblocks, based on a plurality of macroblocks that<br>
neighbor the macroblock of pixels. In an embodiment of the present invention, the direct<br>
mode module 208 operates to determine the direct mode motion vector and the cost<br>
associated with the direct mode motion vector based on the cost for the direct mode<br>
motion vectors for the B slices of video input signal 110, such as in a fashion defined by<br>
the 11.264 standard.<br>
While the prior modules have focused on inter-prediction of the motion vector,<br>
intra-prediction module 210 generates a best intra prediction mode for each macroblock<br>
of the plurality of macroblocks. In particular, intra-prediction module 210 operates in a<br>
fashion such as defined by the H.264 standard to evaluate a plurality of intra prediction<br>
modes, based on motion vectors determined from neighboring macroblocks to determine<br>
the best intra prediction mode and the associated cost.<br>
A mode decision module 212 determines a final motion vector for each<br>
macroblock of the plurality of macroblocks based on costs associated with the refined<br>
motion vector, the direct mode motion vector, and the best intra prediction mode, and in<br>
particular, die method that yields the most favorable (lowest) cost, or otherwise an<br>
acceptable cost. A reconstruction module 214 completes the motion compensation by<br>
generating residual luma and/or chroma pixel values corresponding to the final motion<br>
vector for each macroblock of the plurality of macroblocks.<br>
8<br><br>
A forward transform and quantization module 220 of video encoder 102 generates<br>
processed video signal 112 by transforming coding and quantizing the residual pixel<br>
values into quantized transformed coefficients that can be further coded, such as by<br>
entropy coding in entropy coding module 216, filtered by de-blocking filter module 222<br>
and transmitted and/or stored as the processed video signal 112.<br>
As discussed above, many of the modules of motion compensation module 150<br>
operate based on motion vectors determined for neighboring macroblocks. Neighbor<br>
management module 218 generates and stores neighbor data for at least one macroblock<br>
of the plurality of macroblocks for retrieval by at least one of the motion search module<br>
204, the motion refinement module 206, the direct mode module 208, intra-prediction<br>
module 210, entropy coding module 216 and deblocking filter module 222, when<br>
operating on at least one neighboring macroblock of the plurality of macroblocks. As the<br>
motion vector (or the plurality of motion vectors in the case of macroblock partitioning,<br>
discussed further in conjunction with FIGs. 7 and 8) and the other encoding data are<br>
finalized, neighboring data is stored for use in the processing of neighboring macroblocks<br>
that have yet to be processed, yet that will require the use of such data. In addition,<br>
neighboring data is also stored for the processing of future pictures, such as future frames<br>
and/or fields of video input signal 110.<br>
In an embodiment of the present invention, a data structure, such as a linked list,<br>
array or one or more registers are used to associate and store neighbor data for each<br>
macroblock. Neighbor data includes motion vectors, reference indices, quantization<br>
parameters, coded-block patterns, macroblock types, intra/inter prediction module types<br>
neighboring pixel values and or other data from neighboring macroblocks and/or<br>
subblocks used to by one or more of the modules or procedures of the present invention<br>
to calculate results for a current macroblock. For example, in order to determine the<br>
predicated motion vector for the motion search module 204 and motion refinement<br>
module 206, both the motion vectors and reference index of neighbors are required. In<br>
addition to these data, the direct mode module 208 requires the motion vectors of the co-<br>
9<br><br>
located macroblock of previous reference pictures. The deblocking filter module 222<br>
operates according to a set of filtering strengths determined by using the neighbors'<br>
motion vectors, quantization parameters, reference index, and coded-block-patterns, etc.<br>
For entropy coding in entropy coding module 216, the motion vector differences<br>
(MVD), macroblock types, quantization parameter delta, inter predication type, etc. are<br>
required.<br>
Consider the example where a particular macroblock MB(x,y) requires neighbor<br>
data from macroblocks MB(x-l, y-1), MB(x, y-1), MB (x+l,y-l) and MB(x-l,y). In<br>
prior art codecs, the preparation of the neighbor data needs to calculate the location of the<br>
relevant neighbor sub-blocks. However, the calculation is not as straightforward as it<br>
was in conventional video coding standards. For example, in H.264 coding, the support<br>
of multiple partition types make the size and shape for the subblocks vary significantly.<br>
Furthermore, the support of the macroblock adaptive frame and field (MBAFF)<br>
coding allows the macroblocks to be either in frame or in field mode. For each mode, one<br>
neighbor derivation method is defined in H.264. So the calculation needs to consider<br>
each mode accordingly. In addition, in order to get all of the neighbor data required, the<br>
derivation needs to be invoked four times since there are four neighbors involved —<br>
MB(x-l, y-1), MB(x, y-1), MB(x+l, y-1), and MB(x-l, y). So the encoding of the<br>
current macroblock MB(x, y) cannot start not until the location of the four neighbors has<br>
been determined and their data have been fetched from memory.<br>
The present invention avoids the above problems. In particular when each<br>
macroblock is processed and final motion vectors and encoded data are determined,<br>
neighbor data is stored in data structures for each neighboring macroblock that will need<br>
this data. Since the neighbor data is prepared in advance, the current macroblock<br>
MB(x,y) can start right away when it is ready to be processed. The burden of pinpointing<br>
neighbors is virtually re-allocated to its preceding macroblocks. The encoding of<br>
macroblocks can be therefore be more streamline and faster. In other words, when the<br>
final motion vectors are determined for MB(x-l,y-l), neighbor data is stored for each<br>
neighboring macroblock that is yet to be processed, including MB(x,y) and also other<br>
10<br><br>
neighboring macroblocks such as MB(x, y-1), MB(x-2,y) MB(x-l,y). Similarly, when<br>
the final motion vectors are determined for MB(x,y-l), MB (x+l,y-l) and MB(x-l,y)<br>
neighbor data is stored for each neighboring macroblock corresponding to each of these<br>
macroblocks that are yet to be processed, including MB(x,y). In this fashion, when<br>
MB(x,y) is ready to be processed, the neighbor data is already stored in a data structure<br>
that corresponds to this macroblock for fast retrieval.<br>
The motion compensation can then proceed using the retrieved data. In particular,<br>
the motion search module 204 and/or the motion refinement module, can generate at least<br>
one predicted motion vector (such as a standard PMV or estimated predicted motion<br>
vector) for each macroblock of the plurality of macroblocks using retrieved neighbor<br>
data. Further, the direct mode module 208 can generate at least one direct mode motion<br>
vector for each macroblock of the plurality of macroblocks using retrieved neighbor data<br>
and the intra-prediction module 210 can generates the best intra prediction mode for each<br>
macroblock of the plurality of macroblocks using retrieved neighbor data, and the coding<br>
module 216 can use retrieved neighbor data in entropy coding, each as set forth in the<br>
H.264 standard, the MPEG-4 standard, VC-1 (SMPTE standard 421M) or by other<br>
standard or other means.<br>
While not expressly shown, video encoder 102 can include a memory cache, a<br>
memory management module, a comb filter or other video filter, and/or other module to<br>
support the encoding of video input signal 110 into processed video signal 112.<br>
FIG. 6 presents a graphical representation of the relationship between example top<br>
frame and bottom frame macroblocks (250, 252) and example top field and bottom field<br>
macroblocks (254, 256) in accordance with an embodiment of the present invention. In<br>
this embodiment, motion search module 204 generates a motion search motion vector for<br>
each macroblock of a plurality of macroblocks by contemporaneously evaluating a<br>
macroblock pair that includes a top frame macroblock 250 and bottom frame macroblock<br>
252 from a frame of the video input signal 110 and a top field macroblock 254 and a<br>
bottom field macroblock 256 from corresponding fields of the video input signal 110.<br>
11<br><br>
Considering the example shown, each of the macroblocks are 16 pixels by 16<br>
pixels in size. Motion search is performed in full pixel resolution, or other resolution,<br>
either coarser or finer, by comparing a candidate frame macroblock pair of a current<br>
frame that includes top frame macroblock 250 and bottom frame macroblock 252 to the<br>
macroblock pair of a reference frame. In addition, lines of a first parity (such as odd<br>
lines) from the candidate frame macroblock pair are grouped to form top field<br>
macroblock 254. Similarly, lines of a second parity (such as even lines) from the<br>
candidate frame macroblock pair are grouped to form bottom field macroblock 256.<br>
Motion search module 204 calculates a cost associated a plurality of lines, and generates<br>
a cost associated with the top frame macroblock 250 based on a cost accumulated for a<br>
plurality of top lines of the plurality of lines, generates a cost associated with the bottom<br>
frame macroblock 252 based on a cost accumulated for a plurality of bottom lines of the<br>
plurality of lines, generates a cost associated with the top field macroblock 254 based on<br>
a cost accumulated for a plurality of first-parity lines of the plurality of lines compared<br>
with either a top or bottom field reference, and generates a cost associated with the<br>
bottom field macroblock 256 based on a cost accumulated for a plurality of second-parity<br>
lines of the plurality of lines, also based on either a top or bottom field reference. In this<br>
fashion, six costs can be generated contemporaneously for the macroblock pair: top frame<br>
compared with top frame of the reference; bottom frame compared with the bottom frame<br>
of the reference; top field compared with top field of the reference; bottom field<br>
compared with the bottom field of the reference; top field compared with bottom field of<br>
the reference; and bottom field compared with the top field of the reference.<br>
Each of these costs can be generated based on the sum of the absolute differences<br>
(SAD) of the pixel values of the current frame or field with the reference frame or field.<br>
The SADs can be calculated contemporaneously, in a single pass, based on the<br>
accumulation for each line. The overall SAD for a particular macroblock (top or bottom,<br>
frame or field) can be determined by totaling the SADs for the lines that make up that<br>
particular macroblock. Alternatively, the SADs can be calculated in a single pass, based<br>
on the smaller segments such as 4x1 segments that can be accumulated into subblocks,<br>
12<br><br>
that in turn can be accumulated into overall macroblock totals. This alternative<br>
arrangement particularly lends itself to motion search modules that operate based on the<br>
partitioning of macroblocks into smaller subblocks, as will be discussed further in<br>
conjunction with-FIG. 7. -  - --	...<br>
The motion search module 204 is particularly well adapted to operation in<br>
conjunction with macroblock adaptive frame and field processing. Frame mode costs for<br>
the current macroblock pair can be generated as discussed above. In addition, motion<br>
search module 204 optionally generates a field decision based on accumulated<br>
differences, such as SAD, between the current bottom field macroblock and a bottom<br>
field macroblock reference, the current bottom field macroblock and a top field<br>
macroblock reference, the current top field macroblock and the bottom field macroblock<br>
reference, and the current top field macroblock and the top field macroblock reference.<br>
The field decision includes determining which combination (top/top, bottom/bottom) or<br>
(top/bottom, bottom/top) yields a lower cost. Similarly, motion search module 204 can<br>
optionally choose either frame mode or field mode for a particular macroblock pair,<br>
based on whether the frame mode cost compares more favorably (e.g. are lower) or less<br>
favorably (e.g. higher) to the field mode cost, based on the field mode decision. In<br>
addition, other modules of motion compensation module 150 that operate on both frames<br>
and field can operate can similarly operate.<br>
In particular, the neighbor management module 218 generates neighbor data that<br>
includes frame below neighbor data for retrieval by a neighboring macroblock in a row<br>
below the at least one macroblock when processing in frame mode and field below<br>
neighbor data for retrieval by the neighboring macroblock in a row below the at least one<br>
macroblock when processing in field mode. In addition, the neighbor data includes frame<br>
right neighbor data for retrieval by a neighboring macroblock to the right of the at least<br>
one macroblock when processing in field mode and field right neighbor data for retrieval<br>
by the neighboring macroblock to the right of the at least one macroblock when<br>
processing in field mode. In this fashion, the motion search module and other modules of<br>
motion compensation module 150 that operate using neighbor data and that can operate<br>
13<br><br>
in either a frame or field mode can directly access either the frame mode neighbor data<br>
for frame mode neighbors above the macroblock of interest, the field mode neighbor data<br>
for field mode neighbors above the macroblock of interest, the frame mode neighbor data<br>
for the frame mode neighbor to the left of the macroblock of interest and/or the field<br>
mode neighbor data for the field mode neighbor to the left of the macroblock of interest.<br>
As before, this information is stored in the processing of the prior macroblocks, whether<br>
the macroblocks themselves were processed in frame or in field mode, and can be<br>
accessed in the processing of the macroblock of interest by retrieval directly from<br>
memory and without a look-up table or further processing.<br>
FIG. 7 presents a graphical representation of example partitionings of a<br>
macroblock of a video input signal into a plurality of subblocks. In particular, while the<br>
modules described in conjunction with FIG. 5 above can operate on macroblocks having<br>
a size such as 16 pixels x 16 pixels, such as in accordance with the H.264 standard,<br>
macroblocks can be partitioned into subblocks of smaller size, as small as 4 pixels on a<br>
side with the functions and features described in conjunction with the macroblocks<br>
applying to each subblock with individual pixel locations indicated by dots. For<br>
example, motion search module 204 can generate separate motion search motion vectors<br>
for each subblock of each macroblock, etc.<br>
Macroblock 302 represents an example of partitioning into subblocks in<br>
accordance with the H.264 standard. Macroblocks 300, 304 and 306 represent examples<br>
of other possible partitioning into subblocks. In particular, macroblock 300 is a 16x16<br>
macroblock that is partitioned into an 8x16 subblock and two 8x8 subblocks.<br>
Macroblock 302 is a 16x16 macroblock that is partitioned into three 8x8 subblocks and<br>
four 4x4 subblocks. Macroblock 304 is a 16x16 macroblock that is partitioned into an<br>
8x16 subblock, an 8x8 subblock and two 4x8 subblocks. Macroblock 306 is a 16x16<br>
macroblock that is partitioned into an 8x8 subblock, three 4x8 subblocks, two 8x4<br>
subblocks, and two 4x4 subblocks. The partitioning of the macroblocks into smaller<br>
subblocks increases the complexity of the motion compensation by requiring various<br>
compensation methods, such as the motion search to determine, not only the motion<br>
14<br><br>
search motion vectors for each subblock, but the best motion vectors over the set of all<br>
possible partitions of a particular macroblock. The result however can yield more<br>
accurate motion compensation and reduced compression artifacts in the decoded video<br>
image.<br>
FIG. 8 presents a graphical representation of a plurality of macroblocks of a video<br>
input signal that shows an example of the neighboring macroblocks used in motion<br>
compensation or encoding of a particular macroblock. Three macroblocks MB n-1, MB<br>
n and MB n+1 are show for three rows, row i-1, row i and row i+1 of a video input signal<br>
in either frame or field mode. The dots representing individual pixel locations have been<br>
omitted for clarity.<br>
Consider for example, that video encoder 102 is operating on macroblock MB(n,<br>
i). Consider further, that the motion refinement module 206, motion search module 204,<br>
direct mode module 208, the intra-prediction module 210 and coding module 216 may<br>
need the final motion vectors determined for 4x4 subblock DO from MB(n-l, i-1),<br>
subblock B0 from MB(n, i-1), subblock CO from MB (n+1, i-1), along with subblock A0<br>
from MB(n-l, i). When MB(n-l, i-1) is processed, the motion vector for DO is stored in<br>
a data structure associated with MB(n, i), along with the other neighbor data for other<br>
neighbors such as MB(n, i-1), MB(n-2, i) and MB(n-l, i). When MB(n, i-1) is processed,<br>
the motion vector for B0 is stored in a data structure associated with MB(n, i) along with<br>
the other neighbor data for other neighbors. When MB(n+l, i-1) is processed, the<br>
motion vector for CO is stored in a data structure associated with MB(n, i) along with the<br>
other neighbor data for other neighbors. And when MB(n-l, i) is processed, the motion<br>
vector for DO is stored in a data structure associated with MB(n, i) along with the other<br>
neighbor data for other neighbors. In this fashion, when MB (n, i) is processed, any of<br>
the necessary neighbor data can be easily retrieved from the data structure.<br>
While the above discussion relates to the processing in either frame of field mode,<br>
as discussed in conjunction with FIG. 6, both frame and field mode neighbor data can be<br>
stored for later retrieval, as needed, in the processing of neighboring macroblocks.<br>
15<br><br>
Further, while the above discussion focuses on individual macroblocks, neighbor data<br>
based on the processing or macroblock pairs can also be stored, with, for instance,<br>
neighbor data used by the bottom macroblock that is derived from the top macroblock<br>
within the macroblock pair being generated directly in the processing of the macroblock<br>
pair.<br>
FIG. 9 presents a block diagram representation of a video encoder 102 that<br>
includes motion refinement engine 175 in accordance with an embodiment of the present<br>
invention. In addition to modules referred to by common reference numerals that have<br>
been previously described, motion refinement engine 175 includes a shared memory 205<br>
that can be implemented separately from, or part of, memory module 202. In addition,<br>
motion refinement engine 175 can be implemented in a special purpose hardware<br>
configuration that has a very generic design capable of handling sub-pixel search using<br>
different reference pictures ~ either frame or field and either forward in time, backward<br>
in time or a blend between forward and backward. Motion refinement engine 175 can<br>
operate in a plurality of compression modes to support a plurality of different<br>
compression algorithms such as H.264, MPEG-4, VC-1, etc. in an optimized and single<br>
framework. Reconstruction can be performed for chroma only, luma only or both<br>
chroma and luma.<br>
For example, the capabilities these compression modes can include:<br>
H.264:<br>
1.	Motion search and refinement on all large partitions into subblocks of size<br>
(16x16), (16x8), (8x16) and (8x8) for forward/backward and blended directions<br>
when MBAFF is ON. This also includes field and frame MB types.<br>
2.	Motion search and refinement on all partitions into subblocks of size (16x16),<br>
(16x8), (8x16) and (8x8), and subpartitions into subblocks of size (8x8), (8x4),<br>
(4x8), and (4x4) for forward/backward and blended directions when MBAFF is<br>
OFF.<br>
3.	Computation of direct mode and/or skip mode cost for MBAFF ON and OFF.<br>
16<br><br>
4.	Mode decision is based on all the above partitions for MBAFF ON and OFF. The<br>
chroma reconstruction for the corresponding partitions is implicitly performed<br>
when the luma motion reconstruction is invoked.<br>
5.	Motion refinement and compensation include quarter pixel accurate final motion<br>
vectors using the 6 tap filter algorithms of the H.264 standard.<br>
VC-1:<br>
1.	Motion search and refinement for both 16x16 and 8x8 partitions for both field and<br>
frame cases for forward, backward and blended directions.<br>
2.	Mode decision is based on each of the partitions above. This involves the luma<br>
and corresponding chroma reconstruction.<br>
3.	Motion refinement and compensation include bilinear half pixel accurate final<br>
motion vectors of the VC-1 standard.<br>
MPEG-4:<br>
1.	Motion search and refinement for both 16x16 and 8x8 partitions for both field and<br>
frame cases for forward, backward and blended directions.<br>
2.	Mode decision is based on all of the partitions above. Reconstruction involves the<br>
luma only.<br>
3.	Motion refinement and compensation include bilinear half pixel accurate MVs of<br>
the VC-1 standard.<br>
Further, motion refinement engine 175 can operate in two basic modes of<br>
operation (1) where the operations of motion refinement module 206 are triggered by<br>
and/or directed by software/firmware algorithms included in memory module 202 and<br>
executed by processing module 200; and (2) where operations of motion refinement<br>
module 206 are triggered by the motion search module 204, with little or no<br>
software/firmware intervention. The first mode operates in accordance with one or more<br>
standards, possibly modified as described herein. The second mode of operation can be<br>
dynamically controlled and executed more quickly, in an automated fashion and without<br>
a loss of quality.<br>
17<br><br>
Shared memory 205 can be individually, independently and contemporaneously<br>
accessed by motion search module 204 and motion refinement module 206 to facilitate<br>
either the first or second mode of operation. In particular, shared memory 205 includes a<br>
portion of memory, such as a cost table that stores results (such as -motion vectors and<br>
costs) that result from the computations performed by motion search module 204. This<br>
cost table can include a plurality of fixed locations in shared memory where these<br>
computations are stored for later retrieval by motion refinement module 206, particularly<br>
for use in the second mode of operation. In addition, to the cost table, the shared memory<br>
205 can also store additional information, such as a hint table, that tells the motion<br>
refinement module 206 and the firmware of the decisions it makes for use in either mode,<br>
again based on the computations performed by motion search module 204. Examples<br>
include: identifying which partitions are good, others that are not as good and/or can be<br>
discarded; identifying either frame mode or field mode as being better and by how much;<br>
and identifying which direction, amongst forward, backward and blended is good and by<br>
how much, etc.<br>
The motion search module may terminate its computations early based on the<br>
results it obtains. In any case, motion search can trigger the beginning of motion<br>
refinement directly by a trigger signal sent from the motion search module 204 to the<br>
motion refinement module 206. Motion refinement module 206 can, based on the data<br>
stored in the hint table and/or the cost table, have the option to refine only particular<br>
partitions, a particular mode (frame or field), and/or a particular direction (forward,<br>
backward or blended) that either the motion search module 204 or the motion refinement<br>
module 206 determines to be good based on a cost threshold or other performance<br>
criteria. In the alternative, the motion refinement module can proceed directly based on<br>
software/firmware algorithms in a more uniform approach. In this fashion, motion<br>
refinement engine 175 can dynamically and selectively operate so as to complete the<br>
motion search and motion refinement, pipelined and in parallel, such that the refinement<br>
is performed for selected partitions, all the subblocks for a single partition, group of<br>
partitions or an entire MB/MB pair on both a frame and field basis, on only frame or field<br>
18<br><br>
mode basis, and for forward, backward and blended directions of for only a particular<br>
direction, based on the computations performed by the motion search module 204.<br>
In operation, motion search module 204 contemporaneously generates a motion<br>
search motion vector for a plurality of subblocks for a plurality of partitionings of a<br>
macroblock of a plurality of MB/MB pairs. Motion refinement module 206, when<br>
enabled, contemporaneously generates a refined motion vector for the plurality of<br>
subblocks for the plurality of partitionings of the MB/MB pairs of the plurality of<br>
macroblocks, based on the motion search motion vector for each of the plurality of<br>
subblocks of the macroblock of the plurality of macroblocks. Mode decision module<br>
selects a selected partitioning of the plurality of partitionings, based on costs associated<br>
with the refined motion vector for each of the plurality of subblocks of the plurality of<br>
partitionings, of the macroblock of the plurality of macroblocks, and determines a final<br>
motion vector for each of the plurality of subblocks corresponding to the selected<br>
partitioning of the macroblock of the plurality of macroblocks. Reconstruction module<br>
214 generates residual pixel values, for chroma and/or luma, corresponding to a final<br>
motion vector for the plurality of subblocks of the macroblock of the plurality of<br>
macroblocks.<br>
Further, the motion search module 204 and the motion refinement module 206<br>
can operate in a plurality of other selected modes including a mode corresponding to a<br>
first compression standard, a mode corresponding to a second compression standard<br>
and/or a mode corresponding to a third compression standard, etc. and wherein the<br>
plurality of partitionings can be based on the selected mode. For instance, in one mode,<br>
the motion search module 204 and the motion refinement module 206 are capable of<br>
operating with macroblock adaptive frame and field (MBAFF) enabled when a MBAFF<br>
signal is asserted and with MBAFF disabled when the MBAFF enable signal is<br>
deasserted, and wherein the plurality of partitionings are based on the MBAFF enable<br>
signal. In an embodiment, when the MBAFF signal is asserted, the plurality of<br>
partitionings of the macroblock partition the macroblock into subblocks having a first<br>
minimum dimension of sizes 16 pixels by 16 pixels, 16 pixels by 8 pixels, 8 pixels by 16<br>
19<br><br>
pixels, and 8 pixels by 8 pixels — having a minimum dimension of 8 pixels. Further,<br>
when the MBAFF signal is deasserted, the plurality of partitionings of the macroblock<br>
partition the macroblock into subblocks having a second minimum dimension of sizes 16<br>
pixels by 16 pixels, 16 pixels by 8 pixels, 8 pixels by 16 pixels, 8 pixels by 8 pixels, 4<br>
pixels by 8 pixels, 8 pixels by 4 pixels, and 4 pixels by 4 pixels -- having a minimum<br>
dimension of 4 pixels. In other modes of operation, the plurality of partitionings of the<br>
macroblock partition the macroblock into subblocks of sizes 16 pixels by 16 pixels, and 8<br>
pixels by 8 pixels. While particular macroblock dimensions are described above, other<br>
dimensions are likewise possible with the broader scope of the present invention.<br>
In addition, to the partitionings of the MB/MB pairs being based on the particular<br>
compression standard employed, motion search module 204 can generate a motion search<br>
motion vector for a plurality of subblocks for a plurality of partitionings of a macroblock<br>
of a plurality of macroblocks and generate a selected group of the plurality of<br>
partitionings based on a group selection signal. Further, motion refinement module 206<br>
can generate the refined motion vector for the plurality of subblocks for the selected<br>
group of the plurality of partitionings of the macroblock of the plurality of macroblocks,<br>
based on the motion search motion vector for each of the plurality of subblocks of the<br>
macroblock of the plurality of macroblocks. In this embodiment, the group selection<br>
signal can be used by the motion search module 204 to selectively apply one or more<br>
thresholds to narrow down the number of partitions considered by motion refinement<br>
module 206 in order to speed up the algorithm.<br>
For example, when the group selection signal has a first value, the motion search<br>
module 204 determines the selected group of the plurality of partitionings by comparing,<br>
for the plurality of partitionings of the macroblock of the plurality of macroblocks, the<br>
accumulated the costs associated with the motion search motion vector for each of the<br>
plurality of subblocks with a first threshold, and assigning the selected group to be a<br>
partitioning with the accumulated cost that compares favorably to the first threshold. In<br>
this mode, if a particular partitioning is found that generates a very good cost, the motion<br>
search module 204 can terminate early for the particular macroblock and motion<br>
20<br><br>
refinement module 206 can operate, not on the entire set of partitionings, but on the<br>
particular partitioning that generates a cost that compares favorably to the first threshold.<br>
Further, when the group selection signal has a second value; the motion search<br>
module 204 determines the selected group of the plurality of partitionings by comparing,<br>
for the plurality of partitionings of the macroblock of the plurality of macroblocks, the<br>
accumulated the costs associated with the motion search motion vector for each of the<br>
plurality of subblocks and assigning the selected group to be the selected partitioning<br>
with the most favorable accumulated cost. Again, motion refinement module 206 can<br>
operate, not on the entire set of partitionings, but on the particular partitioning that<br>
generates the most favorable cost from the motion search.<br>
In addition, when the group selection signal has a third value, the motion search<br>
module 204 determines the selected group of the plurality of partitionings by comparing,<br>
for the plurality of partitionings of the macroblock of the plurality of macroblocks, the<br>
accumulated the costs associated with the motion search motion vector for each of the<br>
plurality of subblocks with a second threshold, and assigning the selected group to be<br>
each of partitionings of the plurality of partitionings with accumulated cost that compares<br>
favorably to the second threshold. In this mode, motion refinement module 206 can<br>
operate, not on the entire set of partitionings, but only on those partitionings that generate<br>
a cost that compares favorably to the second threshold.<br>
As discussed above, the motion search module 204 and motion refinement<br>
module 206 can be pipelined and operate to contemporaneously generate the motion<br>
search motion vector for the plurality of subblocks for a plurality of partitionings of a<br>
macroblock of a plurality of macroblocks, in parallel. In addition, shared memory 205<br>
can be closely coupled to both motion search module 204 and motion refinement module<br>
206 to efficiently store the results for selected group of partitionings from the motion<br>
search module 204 for use by the motion refinement module 206. In particular, motion<br>
search module 204 stores the selected group of partitionings and the corresponding<br>
motion search motion vectors in the shared memory and other results in the cost and hint<br>
21<br><br>
tables. Motion refinement module 206 retrieves the selected group of partitionings and<br>
the corresponding motion search motion vectors from the shared memory. In a particular<br>
embodiment, the motion search module 204 can generate a trigger signal in response to<br>
the storage of the selected group of partitionings of the macroblock and the<br>
corresponding motion search motion vectors and/or other reulsts in the shared memory,<br>
and the motion refinement module 206 can commence the retrieval of the selected group<br>
of partitionings and the corresponding motion search motion vectors and/or other results<br>
from the shared memory in response to the trigger signal.<br>
As discussed above, the motion refinement for a particular macroblock can be<br>
turned off by selectively disabling the motion refinement module for a particular<br>
application, compression standard, or for a particular macroblock, such as when, in a skip<br>
mode where the cost associated with the stationary motion vector compares favorably to<br>
a skip mode cost threshold or if the total cost associated with a particular partitioning<br>
compares favorably to a skip refinement cost threshold, wherein the motion search<br>
motion vector can be used in place of the refined motion vector. In yet another optional<br>
feature, the motion search module 204 generates a motion search motion vector for a<br>
plurality of subblocks for a plurality of partitionings of a macroblock of a plurality of<br>
macroblocks based one or several costs calculations such as on a sum of accumulated<br>
differences (SAD) cost, as previously discussed. However, motion refinement module<br>
206, when enabled, generates a refined motion vector for the plurality of subblocks for<br>
the plurality of partitionings of the macroblock of the plurality of macroblocks, based on<br>
the motion search motion vector for each of the plurality of subblocks of the macroblock<br>
of the plurality of macroblocks based on a sum of accumulated transform differences<br>
(SATD) cost. In this case, the mode decision module 212 must operate on either SAD<br>
costs from the motion search module 204 or based on SATD costs from the motion<br>
refinement module 206.<br>
In particular, mode decision module 212 is coupled to the motion refinement<br>
module 206 and the motion search module 204. When the motion refinement module<br>
206 is enabled for the macroblock of the plurality of macroblocks, the mode decision<br>
22<br><br>
module 212 selects a selected partitioning of the plurality of partitionings, based on<br>
SATD costs associated with the refined motion vector for each of the plurality of<br>
subblocks of the plurality of partitionings of the macroblock of the plurality of<br>
macroblocks. In addition, when the motion refinement module 206 is disabled for the<br>
macroblock of the plurality of macroblocks, mode decision module 212 selects a selected<br>
partitioning of the plurality of partitionings, based on SAD costs associated with the<br>
motion search motion vector for each of the plurality of subblocks of the plurality of<br>
partitionings of the macroblock of the plurality of macroblocks, and that determines a<br>
final motion vector for each of the plurality of subblocks corresponding to the selected<br>
partitioning of the macroblock of the plurality of macroblocks.<br>
Since the motion refinement engine 175 can operate in both a frame or field<br>
mode, mode decision module 212 selects one of a frame mode and a field mode for the<br>
macroblock, based on SATD costs associated with the refined motion vector for each of<br>
the plurality of subblocks of the plurality of partitionings of the macroblock of the<br>
plurality of macroblocks, or based on SAD costs associated with the motion search<br>
motion vector for each of the plurality of subblocks of the plurality of partitionings of the<br>
macroblock of the plurality of macroblocks.<br>
In an embodiment of the present invention, the motion refinement engine 175 is<br>
designed to work through a command FIFO located in the shared memory 205. The<br>
functional flexibilities of the engine are made possible with a highly flexible design of the<br>
command FIFO. The command FIFO has four 32-bit registers, of which one of them is<br>
the trigger for the motion refinement engine 175. It could be programmed so as to<br>
complete the motion refinement/compensation for a single partition, group of partitions<br>
or an entire MB/MB pair, with or without MBAFF, for forward, backward and blended<br>
directions with equal ease. It should be noted that several bits are reserved to support<br>
future features of the present invention.<br>
In a particular embodiment, the structure of the command FIFO is as summarized<br>
in the table below.<br>
23<br><br>
Field Name	Bit<br>
Position	Description<br>
TASK	1:0	0	= Search/refine<br>
1	= Direct<br>
2	= Motion Compensation/Reconstruction<br>
3	= Decode<br>
DIRECTION	4:2	Bit 0 : FWD<br>
Bit 1 : BWD<br>
Bit 2 : Blended<br>
WRITECOST	5	0	= Don't write out Cost<br>
1	= Write out Cost<br>
PARTITIONS	51:6	Which partitions to turn on and off. This is interpreted in<br>
accordance with a MBAFF Flag<br>
TAG	58:52	To tag the Index FIFO entry- 7 bits<br>
DONE	59	Generate Interrupt when finished this entry<br>
PRED D1FF INDEX	63:60	Which predicted and uifierence maex to write to<br>
CURR Y MB INDEX	67:64	Which Current Y MB Index to read from<br>
CURR C MB INDEX	71:68	Which Current C MB Index to read from<br>
FWD INDEX	75:72	FWD Command Table Index to parse through<br>
BWD INDEX	79:76	BWD Command Table Index to parse through<br>
BLEND INDEX	83:80	BLEND Command Table Index to write to<br>
Reserved	84	<br>
THRESHOLDJ2NABLE	85	Perform Refinement only for the partitions indicated by<br>
the threshold table.<br>
BEST_MB_PARTITION	86	Use only the Best Macroblock partition. This will<br>
ignore the PARTITIONS field in this index FIFO entry<br>
Reserved	87	<br>
DIRECTJTOP_FRMJFLD_SEL	89:88	00 : None, 01 : Frame, 10 : Field, 11 : Both<br>
DIRECT BOT FRM FLD SEL	91:90	00 : None, 01 : Frame, 10 : Field, 11 : Both<br>
WRITE PREDPLXELS	93:92	0	= Don't write out Predicted Pixels<br>
1	= Write out Top MB Predicted Pixels<br>
2	= Write out Bottom MB Predicted Pixels<br>
3	= Write out both Top and Bottom MB Predicted Pixels<br>
(turned on for the last entry of motion compensation)<br>
WRITE_DIFF_PIXELS	95:94	0	= Don't Write out Difference Pixels<br>
1	= Write out Top MB Difference Pixels<br>
2	= Write out Bottom MB Difference Pixels<br>
3	= Write out both Top and Bottom MB Predicted Pixels<br>
(Note: In Motion Compensation Mode, this will write<br>
out the Motion Compensation Pixels and will be turned<br>
on for the last entry of motion compensation)<br>
CURR MB X	102:96	Current X coordinate of Macroblock<br>
Reserved	103	<br>
CURR MB Y	110:104	Current Y coordinate of Macroblock<br>
Reserved	111	<br>
LAMBDA	118:112	Portion of weighted for cost<br>
Reserved	121:119	<br>
BWD REF FNDEX	124:122	Backward Reference Index<br>
FWD REF INDEX	127:125	Forward Reference Index<br>
24<br><br>
In addition to the Command FIFO, there are also some slice level registers in the shared<br>
memory that the motion refinement engine 175 uses. These include common video<br>
information like codec used, picture width, picture height, slice type, MBAFF Flag,<br>
SATD/SAD flag and the like. By appropriately programming the above bits, the<br>
following flexibilities/scenarios could be addressed:<br>
1.	The task bits define the operation to be performed by the motion refinement<br>
engine 175. By appropriately combining this with the codec information in the<br>
registers, the motion refinement engine 175 can perform any of the above tasks<br>
for all the codecs as listed earlier.<br>
2.	The direction bits refer to the reference picture that needs to be used and are<br>
particularly useful in coding B Slices. Any combination of these 3 bits could be<br>
set for any of the tasks. By enabling all these 3 bits for refinement, the motion<br>
refinement engine 175 can complete motion refinement for the entire MB in all<br>
three directions in one call. However, the motion refinement engine 175 can also<br>
could select any particular direction and perform refinement only for that (as<br>
might be required in P slices). The command FIFO, thus offers the flexibility to<br>
address both cases of a single, all-directions call or multiple one-direction calls.<br>
3.	The partitions bits are very flexible in their design as they holistically cater to<br>
motion refinement and reconstruction for all partitions and sub partitions. By<br>
effectively combining these bits with the direction bits, the motion refinement<br>
engine 175 can achieve both the extremes i.e. perform refinement for all partitions<br>
for all the directions in one shot or perform refinement/compensation for a select<br>
set of partitions in a particular direction. The partition bits are also dynamically<br>
interpreted differently by the motion refinement engine 175 engine based on the<br>
MBAFF ON flag in the registers. Thus, using an optimized, limited set of bits, the<br>
motion refinement engine 175 can address an exhaustive scenario of partition<br>
combinations. The structure of the partition bii.s for each of these modes is<br>
summarized in the tables that follow for frame (FRM), field (FLD) and direct<br>
mode (DIRECT) results.<br>
25<br><br>
MBAFF ON:<br><br>
Macroblock	Partition	Frm/Fld	Bit<br>
TOP MB	16x16	FRM	0<br><br><br>
	FLD	1<br><br><br>
	DIRECT	-&gt;_<br><br>
	16x8 Top Partition	FRM	3<br><br><br>
	FLD	4<br><br>
	16x8 Bottom Partition	FRM	5<br><br><br>
	FLD	6<br><br>
	8x16 Left Partition	FRM	7<br><br><br>
	FLD	8<br><br>
	8x16 Right Partition	FRM	9<br><br><br>
	FLD	10<br><br>
	8x8 Top Left Partition	FRM	11<br><br><br>
	FLD	12<br><br><br>
		1 T<br>
1 J<br><br>
	8x8 Top Right Partition	FRM	14<br><br><br>
	FLD	15<br><br><br>
	DIRECT	16<br>
	8x8 Bottom Left Partition	FRM	17<br><br>
	FLD	18<br><br><br>
	DIRECT	19<br><br>
	8x8 Bottom Right Partition	FRM	20<br><br>
	FLD	21<br><br>
	DIRECT	22<br>
BOTMB	16x16	FRM	23<br><br><br>
	FLD	24<br><br><br>
	DIRECT	25<br><br>
	16x8 Top Partition	FRM	26<br><br><br>
	FLD	27<br><br>
	16x8 Bottom Partition	FRM	28<br><br><br>
	FLD	29<br><br>
	8x16 Left Partition	FRM	30<br><br><br>
	FLD	31<br><br>
	8x16 Right Partition	FRM	32<br><br><br>
	FLD	33<br><br>
	8x8 Top Left Partition	FRM	34<br><br><br>
	FLD	35<br><br><br>
	DIRECT	36<br><br>
	8x8 Top Right Partition	FRM	37<br><br><br>
	FLD	38<br><br><br>
	DIRECT	39<br><br>
	8x8 Bottom Left Partition	FRM	40<br><br><br>
	FLD	41<br><br><br>
	DIRECT	42<br><br>
	8x8 Bottom Right Partition	FRM	43<br><br><br>
	FLD	44<br><br><br>
	DIRECT	45<br>
26<br><br>
MBAFF OFF:<br><br>
	Partition	Bit<br>
FRAME	16x16	Enable	0<br><br><br>
	DIRECT	1<br><br>
	16x8 Top Partition	?<br><br>
	16x8 Bottom Partition	3<br><br>
	8x16 Left Partition	4<br><br>
	8x16 Right Partition	5<br><br>
	8x8 Top Left Partition	8x8	6<br><br><br>
	8x4	7<br><br><br>
	4x8	8<br><br><br>
	4x4	9<br><br><br>
	DIRECT	10<br><br>
	8x8 Top Right Partition	8x8	11<br><br><br>
	8x4	12<br><br><br>
	4vS	13<br><br><br>
	4x4	14<br><br><br>
	DIRECT	15<br><br>
	8x8 Bottom Left<br>
Partition	8x8	16<br><br><br>
	8x4	17<br><br><br>
	4x8	18<br><br><br>
	4x4	19<br><br><br>
	DIRECT	20<br><br>
	8x8 Bottom Right<br>
Partition	8x8	21<br><br><br>
	8x4	22<br><br><br>
	4x8	23<br><br><br>
	4x4	24<br><br><br>
	DIRECT	25<br><br>
	Reser	ved	45:26<br>
The command FIFO also has early termination strategies, which could be efficiently<br>
used to speed up the motion refinement intelligently. These could be used directly in<br>
conjunction with the motion search module 204 or with the intervention of the<br>
processor 200 to suit the algorithmic needs. These are as follows:<br>
a.	BEST MB PARTITION: This is the super fast mode, which chooses<br>
only the best mode as indicated by the motion search to perform<br>
refinement on. Motion refinement only looks at the particular partition that<br>
are in the in the threshold table that are set based on the motion search<br>
results for the BEST partition only one frame or field.<br>
b.	THRESHOLD ENABLE: This nag is used to enable the usage of the<br>
threshold information in a motion search MS Stats Register. If this bit is<br>
ON, the motion refinement engine 175 performs refinement ONLY for the<br>
modes specified in the threshold portion of the MS Stats Register. This bit<br>
27<br><br>
works as follows. For each of the Top/Bottom, Frame/Field MBs, do the<br>
following:<br>
If any of the partition bits (any of 16x16, 16x8, 8x16, 8x8) are<br>
enabled in the threshold portion of the MS Stats Register (this<br>
means that thresholds have been met for those partitions), do all<br>
those enabled partitions irrespective of the PARTITION bits in the<br>
Command FIFO. For the MBAFF OFF case, when the 8x8 bit is<br>
set, refinement is done ONLY for the best sub partition as<br>
specified in a hint table for each of the 8x8 partitions. Motion<br>
refinement only looks at particular partitions that are in the<br>
threshold table that are set based on the motion search results for<br>
those partitions that meet the threshold.<br>
FIG. 10 presents a pictorial representation of pixels and sub-pixel resolution<br>
values in accordance with an embodiment of the present invention. In this embodiment,<br>
the motion refinement module 206 can operate in a plurality of selected modes including<br>
a first mode corresponding to a first sub-pixel resolution, a second mode corresponding to<br>
a second sub-pixel resolution a third mode corresponding to a full-pixel resolution or<br>
other greater or lesser resolution. The resolution can be controlled based on the desired<br>
speed and/or accuracy of the motion compensation, based on other settings such as the<br>
number of selected partitions, skip mode parameters and other motion search results, and<br>
other variables of motion compensation module 150 or motion refinement engine 175<br>
that have been previously described. In addition, the particular resolution can be chosen<br>
based on the particular compression standard that is used, such as an H.264 standard,<br>
Motion Picture Experts Group (MPEG) standard, Society of Motion Picture and<br>
Television Engineers (SMPTE) standard, etc. For instance, when MPEG2 is<br>
implemented one-half pixel resolution can be employed. When VC1 is implemented,<br>
one-half or one-quarter pixel resolution can be employed. Further, when H.264 is<br>
implemented one-half or one-quarter pixel resolution can be employed. These<br>
resolutions can be preset and employed based on the particular compression standard in<br>
28<br><br>
use. Alternatively, these preset resolutions can be modified based on parameters, such as<br>
the particular parameters described above.<br>
-FIG. 10 represents a portion of a frame or field of a video image where pixels in<br>
row N include a, e, and i, and pixels in row N + 1 are represented by 1', 5' and 9'. In<br>
operation, one-half pixel resolution motion refinement is accomplished by filtering and/or<br>
otherwise interpolating the full pixel values to produce one-half pixel resolution values c,<br>
g, s, u, w, y, 0, 3', 7', j', 1', n\ p' and r. In a mode corresponding to one-half pixel<br>
resolution, only these pixel and sub-pixel values are used. In a mode corresponding to<br>
one-quarter pixel resolution, the other sub-pixel values that are shown can be calculated<br>
by filtering the filtering and/or otherwise interpolating the full pixel values. While one-<br>
quarter pixel resolution is shown, other values with greater or less resolution can likewise<br>
be implemented within the broad scope of the present invention.<br>
In operation, the costs associated with sub-pixel locations are evaluated by motion<br>
refinement module 206 based on costs, such as SAD, SATD costs, or other cost<br>
calculations. In an embodiment of the present invention, motion refinement engine 206<br>
generates a plurality of sub-pixel costs surrounding a first pixel, based on pixels in a row<br>
above the first pixel and a row below the first pixel, and wherein the motion refinement<br>
module stores at least one of the plurality of sub-pixel costs surrounding a selected pixel<br>
for later processing of the cost associated with a second pixel in the row below the first<br>
pixel. In operation, the costs for a particular pixel such as 5' are calculated along with<br>
surrounding sub-pixels u, w, y, 3', 7', 1', n' and p'. Note however, that the processing of<br>
row N would also have used cost calculations for u, w, and y and therefore these results<br>
can be stored and re-used in the processing of row N+l.<br>
In an embodiment of the present invention, the motion refinement engine<br>
generates the plurality of sub-pixel costs surrounding the first pixel in parallel, and in<br>
particular processes an entire row of pixels in one pass. Further, when one-quarter pixel<br>
resolution is implemented, the remaining sub-pixels shown can be generated by filtering<br>
and/or otherwise by interpolation. The best one-quarter pixel cost can be found by<br>
29<br><br>
evaluating the sub-pixels surrounding the best one-half pixel cost in a similar fashion.<br>
Again, calculation from the prior row (or sub-pixel resolution row) can be stored and re-<br>
used to increase the efficiency and speed of refinement.<br>
FIG. 11 presents a flowchart representation of a method in accordance with an<br>
embodiment of the present invention. In particular, a method is presented for use in<br>
conjunction with one or more of the features and functions described in association with<br>
FIGs. 1-10. In step 300, one or more motion search motion vectors are generated for<br>
each macroblock of a plurality of macroblocks by contemporaneously evaluating a top<br>
frame macroblock and bottom frame macroblock from a frame of the video input signal<br>
and a top field macroblock and a bottom field macroblock from corresponding fields of<br>
the video input signal. In step 302, when enabled the step is enabled, a refined motion<br>
vector is generated for each macroblock of the plurality of macroblocks, based on the one<br>
or more motion search motion vectors.<br>
In an embodiment of the present invention, step 300 calculates a cost associated<br>
with the motion search motion vector based on an estimated predicted motion vector that<br>
is based exclusively on neighboring macroblocks from at least one prior row of the video<br>
input signal. The at least one prior row can include a row above a row of the video input<br>
signal that contains the top frame macroblock. In addition, step 300 can evaluates a<br>
plurality of partitions of each macroblock of the plurality of macroblocks into a plurality<br>
of subblocks and wherein the estimated predicted motion vector used to calculate a cost<br>
for one of the plurality of subblocks is used for each of the remaining plurality of<br>
subblocks. Further step 300 can compare the cost associated with the plurality of<br>
partitions of each macroblock to a cost threshold and that terminates the evaluation if the<br>
cost associated with a particular partition of the plurality of partitions compares favorably<br>
to the cost threshold.<br>
In an embodiment of the present invention, step 300 calculates a cost associated a<br>
plurality of lines, and generates a cost associated with the top frame macroblock based on<br>
a cost accumulated for a plurality of top lines of the plurality of lines, generates a cost<br>
30<br><br>
associated with the bottom frame macroblock based on a cost accumulated for a plurality<br>
of bottom lines of the plurality of lines, generates a cost associated with the top field<br>
macroblock based on a cost accumulated for a plurality of first-parity lines of the<br>
plurality of lines, and generates a cost associated with the-bottom field macroblock based<br>
on a cost accumulated for a plurality of second-parity lines of the plurality of lines. In<br>
addition, step 300 can generate a field decision based on accumulated differences<br>
between the bottom field macroblock and a bottom field macroblock reference, the<br>
bottom field macroblock and a top field macroblock reference, the top field macroblock<br>
and the bottom field macroblock reference, and the top field macroblock and the top<br>
field macroblock reference.<br>
In an embodiment of the present invention, step 300 initiates a small search in a<br>
small search region centered on a start motion vector, evaluates a cost associated with a<br>
plurality of candidate motion search motion vectors within the small search region,<br>
compares the cost associated with each with a small search cost threshold and terminates<br>
the evaluation when the cost associated with one of the plurality of candidate motion<br>
search motion vectors within the small search region compares favorably to the small<br>
search cost threshold. In addition, step 300 can generate the motion search vector<br>
compares a cost associated with a stationary motion vector to a stationary cost threshold<br>
and when, for a particular one of the plurality of macroblocks, the cost associated the<br>
stationary motion vector compares favorably to the stationary cost threshold, the step of<br>
generating the motion search module disables the step of generating the refined motion<br>
vector for the particular one of the plurality of macroblocks, and that assigns the<br>
stationary motion vector as the refined motion vector. Further step 300 can initiate a<br>
large search in a large search region, larger than the small search region, centered on the<br>
start motion vector, evaluates a cost associated with a plurality of candidate motion<br>
search motion vectors within the large search region, compares the cost associated with<br>
each with a large search cost threshold and terminates the evaluation when the cost<br>
associated with one of the plurality of candidate motion search motion vectors within the<br>
large search region compares favorably to the large search cost threshold.<br>
31<br><br>
FIG. 12 presents a flowchart representation of a method in accordance with an<br>
embodiment of the present invention. In particular, a method is presented for use in<br>
conjunction with one or more of the features and functions described in association with<br>
FIGs. 1-11. In step 400, one or more motion search motion vectors are generated for<br>
each macroblock of a plurality of macroblocks. In step 402, a refined motion vector is<br>
generated for each macroblock of the plurality of macroblocks, based on the one or more<br>
motion search motion vectors. In step 404, a direct mode motion vector is generated for<br>
each macroblock of the plurality of macroblocks, based on a plurality of macroblocks that<br>
neighbor the macroblock of pixels. In step 406, a best intra prediction mode is generated<br>
for each macroblock of the plurality of macroblocks.<br>
In step 408, a final motion vector is determined for each macroblock of the<br>
plurality of macroblocks based on costs associated with the refined motion vector, the<br>
direct mode motion vector, and the best intra prediction mode. In step 410, residual pixel<br>
values are generated corresponding to the final motion vector for each macroblock of the<br>
plurality of macroblocks. In step 412, neighbor data is generated and stored for at least<br>
one macroblock of the plurality of macroblocks for retrieval by at least one of the steps of<br>
generating a motion search motion vector, generating a refined motion vector, generating<br>
a direct mode motion vector, and generating a best intra prediction mode, when operating<br>
on at least one neighboring macroblock of the plurality of macroblocks.<br>
In an embodiment of the present invention, steps 400, 402, 404 and/or 406 operate<br>
in a macroblock adaptive frame and field mode and analyze each macroblock of a<br>
plurality of macroblocks based on macroblock pairs that include a top frame macroblock<br>
and bottom frame macroblock from a frame of the video input signal and a top field<br>
macroblock and a bottom field macroblock from a corresponding field of the video input<br>
signal. The neighbor data can include frame below neighbor data for retrieval by a<br>
neighboring macroblock in a row below the at least one macroblock when processing in<br>
frame mode and field below neighbor data for retrieval by the neighboring macroblock in<br>
a row below the at least one macroblock when processing in field mode. In addition, the<br>
neighbor data can include frame right neighbor data for retrieval by a neighboring<br>
32<br><br>
macroblock to the right of the at least one macroblock when processing in frame mode<br>
and field right neighbor data for retrieval by the neighboring macroblock to the right of<br>
the at least one macroblock when processing in field mode.<br>
In an embodiment, steps 400 and/or 402 generate at least one predicted motion<br>
vector for each macroblock of the plurality of macroblocks using retrieved neighbor data.<br>
Further, step 404 can generate at least one direct mode motion vector for each<br>
macroblock of the plurality of macroblocks using retrieved neighbor data. Also, step 406<br>
can generate the best intra prediction mode for each macroblock of the plurality of<br>
macroblocks using retrieved neighbor data.<br>
FIG. 13 presents a flowchart representation of a method in accordance with an<br>
embodiment of the present invention. In particular, a method is presented for use in<br>
conjunction with one or more of the features and functions described in association with<br>
FIGs. 1-12. In step 600, a motion search motion vector is contemporaneously generated<br>
for a plurality of subblocks for a plurality of partitionings of a macroblock of a plurality<br>
of macroblocks. In step 602, a refined motion vector is contemporaneously generated for<br>
the plurality of subblocks for the plurality of partitionings of the macroblock of the<br>
plurality of macroblocks, based on the motion search motion vector for each of the<br>
plurality of subblocks of the macroblock of the plurality of macroblocks. In step 604, a<br>
selected partitioning of the plurality of partitionings, is selected based on costs associated<br>
with the refined motion vector for each of the plurality of subblocks of the plurality of<br>
partitionings of the macroblock of the plurality of macroblocks. In step 606, a final<br>
motion vector is determined for each of the plurality of subblocks corresponding to the<br>
selected partitioning of the macroblock of the plurality of macroblocks. In step 608,<br>
residual pixel values are generated corresponding to a final motion vector for the plurality<br>
of subblocks of the macroblock of the plurality of macroblocks.<br>
In an embodiment of the present invention steps 600 and 602 can operate in a<br>
plurality of selected modes including a first mode corresponding to a first compression<br>
standard, a second mode corresponding to a second compression standard and a third<br><br>
mode corresponding to a third compression standard. For example, in the first mode,<br>
steps 600 and 602 are capable of operating with macroblock adaptive frame and field<br>
enabled when a MBAFF signal is asserted and with MBAFF disabled when the MBAFF<br>
enable signal is deasserted, and wherein the plurality of partitionings are based on the<br>
MBAFF enable signal. The first compression standard can includes an H.264 standard,<br>
and when the MBAFF signal is asserted, the plurality of partitionings of the macroblock<br>
partition the macroblock into subblocks having a first minimum dimension. For example,<br>
when the MBAFF signal is asserted, the plurality of partitionings of the macroblock<br>
partition the macroblock into subblocks of sizes 16 pixels by 16 pixels, 16 pixels by 8<br>
pixels, 8 pixels by 16 pixels, and 8 pixels by 8 pixels. In addition, when the MBAFF<br>
signal is deasserted, the plurality of partitionings of the macroblock partition the<br>
macroblock into subblocks having a second minimum dimension that is less than the first<br>
minimum dimension. For example, when the MBAFF signal is deasserted, the plurality<br>
of partitionings of the macroblock partition the macroblock into subblocks of sizes 16<br>
pixels by 16 pixels, 16 pixels by 8 pixels, 8 pixels by 16 pixels, 8 pixels by 8 pixels, 4<br>
pixels by 8 pixels, 8 pixels by 4 pixels, and 4 pixels by 4 pixels.<br>
Further, in the second mode, such as when the second compression standard<br>
includes a Motion Picture Experts Group (MPEG) standard, the plurality of partitionings<br>
of the macroblock partition the macroblock into subblocks of sizes 16 pixels by 16 pixels,<br>
and 8 pixels by 8 pixels. Also, in the third mode, such as when the third compression<br>
standard includes a Society of Motion Picture and Television Engineers (SMPTE)<br>
standard, the plurality of partitionings of the macroblock partition the macroblock into<br>
subblocks of sizes 16 pixels by 16 pixels, and 8 pixels by 8 pixels.<br>
FIG. 14 presents a flowchart representation of a method in accordance with an<br>
embodiment of the present invention. In particular, a method is presented for use in<br>
conjunction with one or more of the features and functions described in association with<br>
FIGs. 1-13. In step 700 a motion search motion vector is generated for a plurality of<br>
subblocks for a plurality of partitionings of a macroblock of a plurality of macroblocks.<br>
In step 704, a selected group of the plurality of partitionings is generated, based on a<br>
34<br><br>
group selection signal. In step 716, a refined motion vector is generated for the plurality<br>
of subblocks for the selected group of the plurality of partitionings of the macroblock of<br>
the plurality of macroblocks, based on the motion search motion vector for each of the<br>
plurality of subblocks of the macroblock of the plurality of macroblocks.<br>
In an embodiment of the present invention, when the group selection signal has a<br>
first value, step 704 determines the selected group of the plurality of partitionings by<br>
comparing, for the plurality of partitionings of the macroblock of the plurality of<br>
macroblocks, the accumulated the costs associated with the motion search motion vector<br>
for each of the plurality of subblocks with a first threshold, and assigning the selected<br>
group to be a partitioning with the accumulated cost that compares favorably to the first<br>
threshold. When the group selection signal has a second value, step 704 determines the<br>
selected group of the plurality of partitionings by comparing, for the plurality of<br>
partitionings of the macroblock of the plurality of macroblocks, the accumulated the costs<br>
associated with the motion search motion vector for each of the plurality of subblocks,<br>
and assigning the selected group to be a selected partitioning with the most favorable<br>
accumulated cost. When the group selection signal has a third value, step 704 determines<br>
the selected group of the plurality of partitionings by comparing, for the plurality of<br>
partitionings of the macroblock of the plurality of macroblocks, the accumulated the costs<br>
associated with the motion search motion vector for each of the plurality of subblocks<br>
with a second threshold, and assigning the selected group to be each of partitionings of<br>
the plurality of partitionings with accumulated cost that compares favorably to the second<br>
threshold.<br>
Optionally, step 700 contemporaneously generates the motion search motion<br>
vector for the plurality of subblocks for a plurality of partitionings of a macroblock of a<br>
plurality of macroblocks and step 716 contemporaneously generates the refined motion<br>
vector for the plurality of subblocks for the selected group of the plurality of partitionings<br>
of the macroblock of the plurality of macroblocks.<br>
35<br><br>
FIG. 15 presents a flowchart representation of a method in accordance with an<br>
embodiment of the present invention. A method is presented for use in conjunction with<br>
one or more of the features and functions described in association with FIGs. 1-13, and in<br>
particular that includes one or more elements of the method of FIG. 14 that are referred to<br>
by common reference numerals. In addition, this method includes step 708 of storing the<br>
selected group of the plurality of partitionings and the corresponding motion search<br>
motion vectors in a shared memory. Also, in step 712 the selected group of the plurality<br>
of partitionings and the corresponding motion search motion vectors are retrieved from<br>
the shared memory.<br>
FIG. 16 presents a flowchart representation of a method in accordance with an<br>
embodiment of the present invention. A method is presented for use in conjunction with<br>
one or more of the features and functions described in association with FIGs. 1-13 and<br>
includes elements of the method of FIGs. 14 and 15 that are referred to by common<br>
reference numerals. In addition, the method includes step 710 that generates a trigger<br>
signal in response to the storage of the selected group of partitionings of the macroblock<br>
and the corresponding motion search motion vectors in the shared memory. In addition,<br>
step 712' includes retrieving the selected group of partitionings and the corresponding<br>
motion search motion vectors from the shared memory is performed in response to the<br>
trigger signal.<br>
FIG. 17 presents a flowchart representation of a method in accordance with an<br>
embodiment of the present invention. A method is presented for use in conjunction with<br>
one or more of the features and functions described in association with FIGs. 1-16. In<br>
particular, a method is presented that can be used as an alternative to the method of claim<br>
13 that includes common elements referred to by common reference numerals. In<br>
addition, the method includes a step 704' of generating a selected group of the plurality<br>
of partitionings.<br>
FIG. 18 presents a flowchart representation of a method in accordance with an<br>
embodiment of the present invention. In particular, a method is presented for use in<br>
36<br><br>
conjunction with one or more of the features and functions described in association with<br>
FIGs. 1-17. In step 800, a motion search motion vector is generated for a plurality of<br>
subblocks for a plurality of partitionings of a macroblock of a plurality of macroblocks<br>
based on a sum of accumulated differences (SAD) cost. In step 802, the. method<br>
determines if refinement is enabled. If so, the method proceeds to step 804 and generates<br>
a refined motion vector for the plurality of subblocks for the plurality of partitionings of<br>
the macroblock of the plurality of macroblocks, based on the motion search motion<br>
vector for each of the plurality of subblocks of the macroblock of the plurality of<br>
macroblocks and based on a sum of accumulated transform differences (SATD) cost. In<br>
step 806, a selected partitioning of the plurality of partitionings is selected, based on<br>
SATD costs associated with the refined motion vector for each of the plurality of<br>
subblocks of the plurality of partitionings of the macroblock of the plurality of<br>
macroblocks, when the step of generating a refined motion vector is enabled for the<br>
macroblock of the plurality of macroblocks.<br>
If refinement is disabled, the method instead proceeds to step 808 where a<br>
selected partitioning of the plurality of partitionings is selected, based on SAD costs<br>
associated with the motion search motion vector for each of the plurality of subblocks of<br>
the plurality of partitionings of the macroblock of the plurality of macroblocks. In either<br>
case the method proceeds to step 810 where a final motion vector is determined for each<br>
of the plurality of subblocks corresponding to the selected partitioning of the macroblock<br>
of the plurality of macroblocks. In step 812, residual pixel values are generated<br>
corresponding to a final motion vector for the plurality of subblocks of the macroblock of<br>
the plurality of macroblocks.<br>
In an embodiment of the present invention, refinement is selectively disabled<br>
based on a particular application, based on the particular compression standard, and/or<br>
based on a comparison of a total cost associated with at least one of the plurality of<br>
partitionings of the macroblock to a skip refinement cost threshold. It should be noted<br>
that refinement can be disabled on a macroblock by macroblock basis.<br>
37<br><br>
In addition, the method can operate in a plurality of selected modes including a<br>
first mode corresponding to a first compression standard, a second mode corresponding<br>
to a second compression standard and a third mode corresponding to a third compression<br>
standard, such as an H.264 standard, a Motion Picture Experts Group (MPEG) standard, a<br>
Society of Motion Picture and Television Engineers (SMPTE) standard or other standard.<br>
FIG. 19 presents a flowchart representation of a method in accordance with an<br>
embodiment of the present invention. In particular, a method is presented for use in<br>
conjunction with the method described in association with FIGs. 18. In step 820, one of a<br>
frame mode and a field mode is selected for the macroblock, based on SATD costs<br>
associated with the refined motion vector for each of the plurality of subblocks of the<br>
plurality of partitionings of the macroblock of the plurality of macroblocks, when the step<br>
of generating a refined motion vector is enabled for the macroblock of the plurality of<br>
macroblocks.<br>
FIG. 20 presents a flowchart representation of a method in accordance with an<br>
embodiment of the present invention. In particular, a method is presented for use in<br>
conjunction with the method described in association with FIGs. 18 and 19. In step 830,<br>
one of the frame mode and the field mode is selected for the macroblock, based on SAD<br>
costs associated with the motion search motion vector for each of the plurality of<br>
subblocks of the plurality of partitionings of the macroblock of the plurality of<br>
macroblocks, when the step of generating a refined motion vector is disabled for the<br>
macroblock of the plurality of macroblocks.<br>
FIG. 21 presents a flowchart representation of a method in accordance with an<br>
embodiment of the present invention. In particular, a method is presented for use in<br>
conjunction with one or more of the features and functions described in association with<br>
FIGs. 1-20. In step 900, a motion search motion vector is generated for a plurality of<br>
subblocks for a plurality of partitionings of a macroblock of a plurality of macroblocks.<br>
In step 902, a refined motion vector is generated for the plurality of subblocks for the<br>
plurality of partitionings of the macroblock of the plurality of macroblocks, based on the<br>
38<br><br>
motion search motion vector for each of the plurality of subblocks of the macroblock of<br>
the plurality of macroblocks, and based on a plurality of selected modes including a first<br>
mode corresponding to a first sub-pixel resolution and a second mode corresponding to a<br>
second sub-pixel resolution. In step 904, a selected partitioning of the plurality of<br>
partitionings is selected, based on costs associated with the refined motion vector for each<br>
of the plurality of subblocks of the plurality of partitionings of the macroblock of the<br>
plurality of macroblocks. In step 906, a final motion vector is determined for each of the<br>
plurality of subblocks corresponding to the selected partitioning of the macroblock of the<br>
plurality of macroblocks. In step 908, residual pixel values are generated corresponding<br>
to a final motion vector for the plurality of subblocks of the macroblock of the plurality<br>
of macroblocks.<br>
In an embodiment of the present invention, the first mode corresponds to a first<br>
compression standard, and the second mode corresponds to a second compression<br>
standard. The first compression standard can include an H.264 standard, the second<br>
compression standard can include a Motion Picture Experts Group (MPEG) standard, or<br>
second compression standard can includes a Society of Motion Picture and Television<br>
Engineers (SMPTE) standard. Further, the plurality of modes include a third mode<br>
corresponding to full-pixel resolution.<br>
In an embodiment, step 902 can generate a plurality of sub-pixel costs<br>
surrounding a first pixel, based on pixels in a row above the first pixel and a row below<br>
the first pixel, and wherein the motion refinement module stores at least one of the<br>
plurality of sub-pixel costs surrounding a selected pixel for later processing of the cost<br>
associated with a second pixel in the row below the first pixel. Further, step 902 can<br>
generates the plurality of sub-pixel costs surrounding the first pixel in parallel. The first<br>
sub-pixel resolution can be substantially one-half pixel resolution and the second sub-<br>
pixel resolution can be substantially one-quarter pixel resolution.<br>
In preferred embodiments, the various circuit components are implemented using<br>
0.35 micron or smaller CMOS technology. Provided however that other circuit<br>
39<br><br>
technologies, both integrated or non-integrated, may be used within the broad scope of<br>
the present invention.<br>
While particular combinations of various functions and features of the present<br>
invention have been expressly described herein, other combinations of these features and<br>
functions are possible that are not limited by the particular examples disclosed herein are<br>
expressly incorporated in within the scope of the present invention.<br>
As one of ordinary skill in the art will appreciate, the term "substantially" or<br>
"approximately", as may be used herein, provides an industry-accepted tolerance to its<br>
corresponding term and/or relativity between items. Such an industry-accepted tolerance<br>
ranges from less than one percent to twenty percent and corresponds to, but is not limited<br>
to, component values, integrated circuit process variations, temperature variations, rise<br>
and fall times, and/or thermal noise. Such relativity between items ranges from a<br>
difference of a few percent to magnitude differences. As one of ordinary skill in the art<br>
will further appreciate, the term "coupled", as may be used herein, includes direct<br>
coupling and indirect coupling via another component, element, circuit, or module where,<br>
for indirect coupling, the intervening component, element, circuit, or module does not<br>
modify the information of a signal but may adjust its current level, voltage level, and/or<br>
power level. As one of ordinary skill in the art will also appreciate, inferred coupling<br>
(i.e., where one element is coupled to another element by inference) includes direct and<br>
indirect coupling between two elements in the same manner as "coupled". As one of<br>
ordinary skill in the art will further appreciate, the term "compares favorably", as may be<br>
used herein, indicates that a comparison between two or more elements, items, signals,<br>
etc., provides a desired relationship. For example, when the desired relationship is that<br>
signal 1 has a greater magnitude than signal 2, a favorable comparison may be achieved<br>
when the magnitude of signal 1 is greater than that of signal 2 or when the magnitude of<br>
signal 2 is less than that of signal 1.<br>
As the term module is used in the description of the various embodiments of the<br>
present invention, a module includes a functional block that is implemented in hardware,<br>
40<br><br>
software, and/or firmware that performs one or module functions such as the processing<br>
of an input signal to produce an output signal. As used herein, a module may contain<br>
submodules that themselves are modules.<br>
Thus, there has been described herein an apparatus and method, as well as several<br>
embodiments including a preferred embodiment, for implementing a video encoder and<br>
motion compensation module and motion refinement engine for use therewith. Various<br>
embodiments of the present invention herein-described have features that distinguish the<br>
present invention from the prior art.<br>
It will be apparent to those skilled in the art that the disclosed invention may be<br>
modified in numerous ways and may assume many embodiments other than the preferred<br>
forms specifically set out and described above. Accordingly, it is intended by the<br>
appended claims to cover all modifications of the invention which fall within the true<br>
spirit and scope of the invention.<br>
41<br><br>
WE CLAIM<br>
What is claimed is:<br>
1.	A motion compensation module for use in a video encoder for encoding a video<br>
input signal that includes a sequence of images that are segmented into a plurality of<br>
macrob locks, the motion compensation module comprising:<br>
a motion search module, that generates a motion search motion vector for a<br>
plurality of subblocks for a plurality of partitionings of a macroblock of a plurality of<br>
macroblocks;<br>
a motion refinement module, coupled to the motion search module, that generates<br>
a refined motion vector for the plurality of subblocks for the plurality of partitionings of<br>
the macroblock of the plurality of macroblocks, based on the motion search motion<br>
vector for each of the plurality of subblocks of the macroblock of the plurality of<br>
macroblocks;<br>
a mode decision module, coupled to the motion refinement module, that selects a<br>
selected partitioning of the plurality of partitionings, based on costs associated with the<br>
refined motion vector for each of the plurality of subblocks of the plurality of<br>
partitionings of the macroblock of the plurality of macroblocks, and that determines a<br>
final motion vector for each of the plurality of subblocks corresponding to the selected<br>
partitioning of the macroblock of the plurality of macroblocks; and<br>
a reconstruction module, coupled to the mode decision module, that generates<br>
residual pixel values corresponding to a final motion vector for the plurality of subblocks<br>
of the macroblock of the plurality of macroblocks;<br>
42<br><br>
wherein the motion refinement module can operate in a plurality of selected<br>
modes including a first mode corresponding to a first sub-pixel resolution and a second<br>
mode corresponding to a second sub-pixel resolution.<br>
2.	The motion compensation module of claim 1 wherein the first mode corresponds<br>
to a first compression standard, and the second mode corresponds to a second<br>
compression standard.<br>
3.	The motion compensation module of claim 2 wherein the first compression<br>
standard includes an H.264 standard.<br>
4.	The motion compensation module of claim 3 wherein the second compression<br>
standard includes a Motion Picture Experts Group (MPEG) standard.<br>
5.	The motion compensation module of claim 3 wherein the second compression<br>
standard includes a Society of Motion Picture and Television Engineers (SMPTE)<br>
standard.<br><br>
6.	The motion compensation module of claim 1 wherein, the plurality of modes<br>
include a third mode corresponding to full-pixel resolution.<br>
7.	The motion compensation module of claim 1 wherein the motion refinement<br>
module generates a plurality of sub-pixel costs surrounding a first pixel, based on pixels<br>
in a row above the first pixel and a row below the first pixel, and wherein the motion<br>
refinement module stores at least one of the plurality of sub-pixel costs surrounding a<br>
selected pixel for later processing of the cost associated with a second pixel in the row<br>
below the first pixel.<br>
8.	The motion compensation module of claim 5 wherein the motion refinement<br>
module generates the plurality of sub-pixel costs surrounding the first pixel in parallel.<br>
43<br><br>
9.	The motion compensation module of claim 6 wherein the first sub-pixel<br>
resolution is substantially one-half pixel resolution.<br>
10.	The motion compensation module of claim 6 wherein the second sub-pixel<br>
resolution is substantially one-quarter pixel resolution.<br>
44<br><br>
11.	A method for use in a video encoder for encoding a video input signal that<br>
includes a sequence of images that are segmented into a plurality of macroblocks, the<br>
method comprising:<br>
generating a motion search motion vector for a plurality of subblocks for a<br>
plurality of partitionings of a macroblock of a plurality of macroblocks;<br>
generating a refined motion vector for the plurality of subblocks for the plurality<br>
of partitionings of the macroblock of the plurality of macroblocks, based on the motion<br>
search motion vector for each of the plurality of subblocks of the macroblock of the<br>
plurality of macroblocks, and based on a plurality of selected modes including a first<br>
mode corresponding to a first sub-pixel resolution and a second mode corresponding to a<br>
second sub-pixel resolution;<br>
selecting a selected partitioning of the plurality of partitionings, based on costs<br>
associated with the refined motion vector for each of the plurality of subblocks of the<br>
plurality of partitionings of the macroblock of the plurality of macroblocks;<br>
determining a final motion vector for each of the plurality of subblocks<br>
corresponding to the selected partitioning of the macroblock of the plurality of<br>
macroblocks; and<br>
generating residual pixel values corresponding to a final motion vector for the<br>
plurality of subblocks of the macroblock of the plurality of macroblocks.<br>
12.	The method of claim 11 wherein the first mode corresponds to a first compression<br>
standard, and the second mode corresponds to a second compression standard.<br>
13.	The method of claim 12 wherein the first compression standard includes an H.264<br>
standard.<br>
45<br><br>
14.	The method of claim 13 wherein the second compression standard includes a<br>
Motion Picture Experts Group (MPEG) standard.<br>
15.	The method of claim 13 wherein the second compression standard includes a<br>
Society of Motion Picture and Television Engineers (SMPTE) standard.<br><br>
16.	The method of claim 1 wherein, the plurality of modes include a third mode<br>
corresponding to full-pixel resolution.<br>
17.	The method of claim 1 wherein the step of generating a refined motion vector<br>
generates a plurality of sub-pixel costs surrounding a first pixel, based on pixels in a row<br>
above the first pixel and a row below the first pixel, and wherein the motion refinement<br>
module stores at least one of the plurality of sub-pixel costs surrounding a selected pixel<br>
for later processing of the cost associated with a second pixel in the row below the first<br>
pixel.<br><br>
18.	The method of claim 17 wherein the step of generating a refined motion vector<br>
generates the plurality of sub-pixel costs surrounding the first pixel in parallel.<br>
19.	The method of claim 18 wherein the first sub-pixel resolution is substantially one-<br>
half pixel resolution.<br>
20.	The method of claim 18 wherein the second sub-pixel resolution is substantially<br>
one-quarter pixel resolution.<br>
46<br><br>
21. A system for encoding a video input signal that includes a sequence of images<br>
that are segmented into a plurality of macroblocks, the system comprising:<br>
a video encoder that generates a processed video signal from video signal, the<br>
video encoder having a motion compensation module that includes:<br>
a motion search module, that generates a motion search motion vector for<br>
a plurality of subblocks for a plurality of partitionings of a macroblock of a<br>
plurality of macroblocks;<br>
a motion refinement module, coupled to the motion search module, that<br>
generates a refined motion vector for the plurality of subblocks for the plurality of<br>
partitionings of the macroblock of the plurality of macroblocks, based on the<br>
motion search motion vector for each of the plurality of subblocks of the<br>
macroblock of the plurality of macroblocks;<br>
a mode decision module, coupled to the motion refinement module, that<br>
selects a selected partitioning of the plurality of partitionings, based on costs<br>
associated with the refined motion vector for each of the plurality of subblocks of<br>
the plurality of partitionings of the macroblock of the plurality of macroblocks,<br>
and that determines a final motion vector for each of the plurality of subblocks<br>
corresponding to the selected partitioning of the macroblock of the plurality of<br>
macroblocks; and<br>
a reconstruction module, coupled to the mode decision module, that<br>
generates residual pixel values corresponding to a final motion vector for the<br>
plurality of subblocks of the macroblock of the plurality of macroblocks;<br>
wherein the motion refinement module can operate in a plurality of<br>
selected modes including a first mode corresponding to a first sub-pixel resolution<br>
and a second mode corresponding to a second sub-pixel resolution.<br>
47<br><br>
22.	The system of claim 21 wherein the first mode corresponds to a first compression<br>
standard, and the second mode corresponds to a second compression standard.<br>
23.	The system of claim 22 wherein the first compression standard includes an H.264<br>
standard.<br>
24.	The system of claim 23 wherein the second compression standard includes a<br>
Motion Picture Experts Group (MPEG) standard.<br>
25.	The system of claim 23 wherein the second compression standard includes a<br>
Society of Motion Picture and Television Engineers (SMPTE) standard.<br><br>
26.	The system of claim 21 wherein, the plurality of modes include a third mode<br>
corresponding to full-pixel resolution.<br>
27.	The system of claim 21 wherein the motion refinement module generates a<br>
plurality of sub-pixel costs surrounding a first pixel, based on pixels in a row above the<br>
first pixel and a row below the first pixel, and wherein the motion refinement module<br>
stores at least one of the plurality of sub-pixel costs surrounding a selected pixel for later<br>
processing of the cost associated with a second pixel in the row below the first pixel.<br>
28.	The system of claim 27 wherein the motion refinement module generates the<br>
plurality of sub-pixel costs surrounding the first pixel in parallel.<br>
29.	The system of claim 21 wherein the first sub-pixel resolution is substantially one-<br>
half pixel resolution.<br>
30.	The system of claim 21 wherein the second sub-pixel resolution is substantially<br>
one-quarter pixel resolution.<br>
48<br><br>
31.	The system of claim 21 further comprising:<br>
a receiving module, coupled to the video encoder, that generates the video signal<br>
from a received signal.<br>
32.	The system of claim 21 further comprising:<br>
a display device, coupled to the video encoder, that renders a video display from<br>
the processed video signal.<br><br><br>
Dated 20th February 2008<br><br>
49<br><br>
A motion compensation module can be used in a video encoder for encoding a<br>
video input signal that includes a sequence of images that are segmented into a plurality<br>
of macroblocks. The motion compensation module includes a motion search module,<br>
that generates a motion search motion vector for a plurality of subblocks for a plurality of<br>
partitionings of a macroblock of a plurality of macroblocks. A motion refinement<br>
module generates a refined motion vector for the plurality of subblocks for the plurality<br>
of partitionings of the macroblock of the plurality of macroblocks, based on the motion<br>
search motion vector for each of the plurality of subblocks of the macroblock of the<br>
plurality of macroblocks. The motion refinement module can operate in a plurality of<br>
selected modes including a first mode corresponding to a first sub-pixel resolution and a<br>
second mode corresponding to a second sub-pixel resolution.<br></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=ORZCyQsgyeD2PLHAyLtjzQ==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==" target="_blank" style="word-wrap:break-word;">http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=ORZCyQsgyeD2PLHAyLtjzQ==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==</a></p>
		<br>
		<div class="pull-left">
			<a href="269680-a-gypsum-wallboard.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="269682-device-for-the-treatment-of-femoral-fractions.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>269681</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>309/KOL/2008</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>45/2015</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>06-Nov-2015</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>30-Oct-2015</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>20-Feb-2008</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>VIXS SYSTEMS, INC.</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>PARKWAY PLACE, 245 CONSUMERS ROAD, SUITE 301, TORONTO, ONTARIO M2J 1R3</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>RAMACHANDRAN AVINASH VILAYANUR</td>
											<td>77 DAVISVILLE AVE., UNIT 2815, TORONTO, ONTARIO M4S 1G4</td>
										</tr>
										<tr>
											<td>2</td>
											<td>HONG EDWARD</td>
											<td>19 JANUS COURT, NORTH YORK, ONTARIO M2H 1S3</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>H04N7/26</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>N/A</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td></td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>11/708654</td>
									<td>2007-02-20</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/269681-a-method-for-encoding-a-video-input-signal by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 06:48:21 GMT -->
</html>
