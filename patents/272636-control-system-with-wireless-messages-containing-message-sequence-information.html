<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/272636-control-system-with-wireless-messages-containing-message-sequence-information by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 00:28:38 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 272636:CONTROL SYSTEM WITH WIRELESS MESSAGES CONTAINING MESSAGE SEQUENCE INFORMATION</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">CONTROL SYSTEM WITH WIRELESS MESSAGES CONTAINING MESSAGE SEQUENCE INFORMATION</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>A control system uses a wireless mesh network to provide communication between a host computer and field devices. The host and the field devices communicate with one another using wireless message containing requests and responses that are routed through the wireless mesh network. The wireless massages include sequence information that allow the receiving device to identify and reject messages that are received out of order.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>CONTROL SYSTEM WITH WIRELESS MESSAGES CONTAINING<br>
MESSAGE SEQUENCE INFORMATION<br>
BACKGROUND OF THE INVENTION<br>
The present invention Telates to wireless networks. In particular,<br>
the invention relates to a wireless mesh network in which process control<br>
messages are communicated between a host and field devices at nodes of the<br>
wireless mesh network.<br>
In many industrial settings, control systems are used to monitor<br>
and control inventories, processes, and the like. Often, such control systems<br>
have a centralized control room with a host computer that communicates with<br>
field devices that are separated or geographically removed from the control<br>
room.<br>
Generally, each field device includes a transducer, which may<br>
generate an output signal based on a physical input or generate a physical output<br>
based on an input signal. Types of transducers used in field devices include<br>
various analytical equipment, pressure sensors, thermistors, thermocouples,<br>
strain gauges, flow sensors, positioners, actuators; solenoids, indicators, and the<br>
like.<br>
Traditionally, analog field devices have been connected to the<br>
process subsystem and the control room by two-wire twisted-pair current loops,<br>
with each device connected to the control room by a single two-wire twisted<br>
pair loop. Typically, a voltage differential is maintained between the two wires<br>
of approximately 20 to 25 volts, and a current between 4 and 20 milliamps (mA)<br>
runs through the loop. An analog field device transmits a signal to the control<br>
room by modulating the current running through the current loop to a current<br>
proportional to the sensed process variable. An analog field device that<br>
performs an action under the control of the control room is controlled by the<br>
magnitude of the current through the loop, which is modulated by the ports of<br>
the process subsystem under the control of the controller.<br>
While historically field devices were capable of performing only<br>
one function, more recently hybrid systems that superimpose digital data on the<br>
current loop have been used in distributed control systems.   The Highway<br><br>
Addressable Remote Transducer (HART) superimposes a digital carrier signal<br>
on the current loop signal. The digital carrier signal can be used to send<br>
secondary and diagnostic information. Examples of information provided over<br>
the carrier signal include secondary process variables, diagnostic information<br>
(such as sensor diagnostics, device diagnostics, wiring diagnostics, process<br>
diagnostics, and the like), operating temperatures, sensor temperature,<br>
calibration data, device ID numbers, configuration information, and so on.<br>
Accordingly, a single field device may have a variety of input and output<br>
variables and may implement a variety of functions.<br>
Another approach uses a digital communication bus to connect<br>
multiple field devices to the host in the control room. Examples of digital<br>
communication protocols used with field devices connected to a digital bus<br>
include Foundation Fieldbus, Profibus, Modbus, and DeviceNet. Two way<br>
digital communication of messages between a host computer and multiple field<br>
devices can be provided over the same two-wire path that supplies power to the<br>
field devices.<br>
Typically, remote applications have been added to a control<br>
system by running very long homerun cables from the control room to the<br>
remote application. If the remote application is, for example, a half of a mile<br>
away, the costs involved in running such a long cable can be high. If multiple<br>
homerun cables have to be run to the remote application, the costs become even<br>
higher. Wireless communication offers a desirable alternative, and wireless<br>
mesh networks have been proposed for use in industrial process control systems.<br>
However, to minimize costs, it is also desirable to maintain existing control<br>
systems and communication protocols, to reduce the costs associated with<br>
changing existing systems to accommodate the wireless communication.<br>
In wireless mesh network systems designed for low power<br>
sensor/actuator-based applications, many devices in the network must be<br>
powered by long-life batteries or by low power energy-scavenging power<br>
sources. Power outlets, such as 120VAC utilities, are typically not located<br>
nearby or may not be allowed into the hazardous areas where the<br>
instrumentation (sensors) and actuators must be located without incurring great<br><br>
installation expense. The need for low installation cost drives the need for<br>
battery-powered devices communicating as part of a wireless mesh network.<br>
Effective utilization of a limited power source, such as a primary cell battery<br>
which cannot be recharged, is vital for a well functioning wireless device.<br>
Batteries are expected to last more than S years and preferably as long as the life<br>
of the product.<br>
In a true wireless mesh network, each node must be capable of<br>
routing messages for itself as well as other nodes in the mesh network. The<br>
concept of messages hopping from node to node through the network is<br>
beneficial because lower power RF radios can be used, and yet the mesh<br>
network can span a significant physical area delivering messages from one end<br>
to the other. High power radios are not needed in a mesh network, in contrast a<br>
point-to-point system which employs remote nodes talking directly to a<br>
centralized base-station.<br>
A mesh network protocol allows for the formation of alternate<br>
paths for messaging between nodes and between nodes and a data collector, or a<br>
bridge or gateway to some higher level higher-speed data bus. Having alternate,<br>
redundant paths for wireless messages enhances data reliability by ensuring<br>
there is at least one alternate path for messages to flow even if another path gets<br>
blocked or degrades due to environmental influences or due to interference.<br>
Some mesh network protocols are deterministically routed such<br>
that every node has an assigned parent and at least one alternate parent In the<br>
hierarchy of the mesh network, much as in a human family, parents have<br>
children, children have grandchildren, and so on. Each node relays the<br>
messages for their descendants through the network to some final destination<br>
such as a gateway. The parenting nodes may be battery-powered pr limited-<br>
energy powered devices. The more descendants a node has, the more traffic it<br>
must route, which in turn directly increases its own power consumption and<br>
diminishes its battery life.<br>
in order to save power, some protocols limit the amount of traffic<br>
any node can handle during any period of time by only turning on the radios of<br>
the nodes for limited amounts of tune to listen for messages.' Thus, to reduce<br><br>
average power, the protocol may allow duty-cycling of the radios between On<br>
and Off states. Some protocols use a global duty cycle to save power such that<br>
the entire network is On and Off at the same time. Other protocols (e.g.<br>
TDMA-based) use a local duty cycle where only the communicating pair of<br>
nodes that are linked together are scheduled to turn On and Off in a<br>
synchronized fashion at predetermined times. Typically, the link is pre-<br>
determined by assigning the pair of nodes a specific time slot for<br>
communications, an RF frequency channel to be used by the radios, who is to be<br>
receiving (Rx), and who is to be transmitting (Tx) at that moment in lime.<br>
Some protocols employ the concept of assigning links to nodes<br>
on a regular repetitive schedule and thereby enable regular delivery of updates<br>
and messages from devices in the network. Some advanced TMDA-bascd<br>
protocols may employ the concept of multiple active schedules, these multiple<br>
schedules running all at the same time or with certain schedules<br>
activated/deactivated by a global network controller as the need arises. For<br>
example, slow active schedules link nodes sending messages with longer<br>
periods of time (long cycle time) between messages to achieve low power<br>
consumption. Fast active schedules link nodes sending messages more rapidly<br>
for betterthroughput and lower latency, but result in higher power consumption<br>
in the nodes. With protocols that allow multiple active schedules, some<br>
schedules could be optimized for upstream traffic, others for downstream traffic<br>
and yet others for network management functions such as device joining and<br>
configuration. Globally activating/deactivating various schedules throughout<br>
the entire network in order to meet different needs at different times provides a<br>
modicum of flexibility for achieving advantageous trade-offs between power<br>
consumption and low latency, but applies the same schedule to all nodes and<br>
thus does not provide local optimization.<br>
In a synchronized system, nodes will have to wait to transmit<br>
until their next predetermined On time before they can pass messages. Waiting<br>
increases latency, which can be very detrimental in many applications if not<br>
bounded and managed properly. If the pair of nodes that are linked together are<br>
not synchronized properly, they will not succeed in passing messages because<br><br>
the radios will be On at the wrong time or in the wrong mode (Rx or Tx) at the<br>
wrong time. If the only active schedule has a long cycle time, the timebetween<br>
scheduled links will be long and latency will suffer. If a fast schedule is<br>
activated, the time between scheduled links will be short but battery life will be<br>
measurably reduced over time.<br>
Some protocols allow running a slow schedule in the background<br>
and globally activating/deactivating an additional fast schedule. Since it takes<br>
time to globally activate a fast schedule throughout the entire network and get<br>
confirmation back from all nodes mat they have heard the global command, the<br>
network or sub-network remains in the less responsive mode during the<br>
transition time. Furthermore, with a globally activated fast schedule, power is<br>
wasted in all the parenting nodes in the network, even those whose descendants<br>
will not benefit from the fast schedule. These unappreciative parent nodes must<br>
listen more often on the global fast active schedule (i.e. turn their radios On to<br>
Rx more often); even though their descendants have nothing extra to send that a<br>
regular active schedule would not suffice in that portion of the network.<br>
Some protocols may limit the number of descendants a node can<br>
have, thereby reducing the load the node must support. Other protocols may<br>
employ a combination of all of these measures to reduce average power<br>
consumption. All of these power-saving measures have the effect of reducing<br>
the availability of the nodes in the network to do the work of passing messages,<br>
thereby increasing the latency of messages delivered through the network.<br>
Duty-cycling the radio increases latency. Hopping messages from node to node<br>
increases latency. Increasing hop depth (hop count) by limiting the number of<br>
descendants increases latency. Running a slow active schedule (long cycle <br>
period) increases latency. Even globally activating a fast active schedule takes<br>
time. It is likely that the value of information diminishes with time, so the<br>
longer the latency, the less valuable the information may be.<br>
BRIEF SUMMARY OF THE INVENTION<br>
A distributed control system includes a wireless network to<br>
provide communication between a host and field devices. The host and the field<br>
devices communicate with messages that are routed through a wireless mesh<br><br>
network. The wireless messages routed between the host and the field devices<br>
over the network include sequence' information, such as a message ID number,<br>
so that the receiving device can identity messages that are received out of order.<br>
BRIEF DESCRIPTION OF THE DRAWINGS<br>
FIG. 1 is a diagram illustrating a control system in which a<br>
wireless mesh network routes wireless messages between a host and field<br>
devices.<br>
FIG. 2 is a block diagram of a portion of the control system of<br>
FIG. 1, including a host computer, a gateway node, and a wireless node with a<br>
field device.<br>
FIG. 3 is a diagram illustrating the format of wireless messages<br>
transmitted by the wireless network.<br>
FIG. 4 shows the format of a control message from a host to a<br>
field device based upon a control system protocol.<br>
FIG. S shows one embodiment of the control message as<br>
modified to form the payload of the wireless message shown in FIG. 3.<br>
FIG. 6 shows another embodiment of the control message as<br>
modified with a trailer to form the payload of the wireless message shown in<br>
FIG. 3.<br>
DETAILED DESCRIPTION<br>
FIG. 1 shows control system 10, which includes host computer<br>
12, highspeed network 14, and wireless mesh network 16, which includes<br>
gateway 18 and wireless nodes 20, 22, 24, 26, 28, and 30. Gateway 18<br>
interfaces mesh network 16 with host computer 12 over highspeed network 14.<br>
Messages may be transmitted from host computer 12 to gateway 18 over<br>
network 14, and are then transmitted to a selected node of mesh network 16<br>
over one of several different paths. Similarly, messages from individual nodes<br>
of mesh network 16 are routed through mesh network 16 from node-to-node<br>
over one of several paths until they arrive at gateway 18 and are then transmitted<br>
to host 12 over highspeed network 14.<br>
Control system 10 can make use of field devices that have been<br>
designed for and used in wired distributed control systems, as well as field<br><br>
devices that are specially designed as wireless transmitters for use in wireless<br>
mesh networks. Nodes 20,22,24,26,28, and 30 show examples of wireless<br>
nodes that include conventional field devices.<br>
Wireless node 20 includes radio 32, wireless device router<br>
(WDR) 34, and field devices FD1 and FD2. Node 20 is an example of a node<br>
having one unique wireless address and two unique field device addresses.<br>
Nodes 22, 24, 26, and 28 are each examples showing nodes<br>
having one unique wireless address and one unique field device address. Node<br>
22 includes radio 36, WDR 38, and field device FD3. Similarly, field device 24<br>
includes radio 40, WDR 42, and field device FD4; node 26 includes radio 44,<br>
WDR 46, and field device FD5, and node 28 includes radio 48, WDR 50, and<br>
field device FD6.<br>
Node 30 has one unique wireless address and three unique field<br>
device addresses. It includes radio 52, WDR 54, and field devices FD7, FD8,<br>
an FD9.<br>
Wireless network 16 is preferably a low power network in which<br>
many of the nodes are powered by long life batteries or low power energy<br>
scavenging power sources. Communication over wireless network 16 may be<br>
provided according to a mesh network configuration, in which messages are<br>
transmitted from node-to-node through network 16. This allows the use of<br>
lower power RF radios, while allowing the network 16 to span a significant<br>
physical area to deliver messages from one end of the network to the other.<br>
In a wired control system, interaction between the host computer<br>
and the field devices occurs using well known control messages according to a<br>
control message protocol such as HART, Foundation Fieldbus, Profibus, or the<br>
like. Field devices capable of use in wired control systems (such as field<br>
devices FD1-FD9 shown in FIG. 1) make use of control messages according to<br>
one of the known control message protocols. Wireless nodes 20-30, which are<br>
part of wireless network 16, cannot directly exchange these well known control<br>
messages with host computer 12 because the wireless communication over<br>
network 16 occurs according to a wireless protocol that is general purpose in<br>
nature.<br><br>
Rather than require host computer 12 and field devices FD1-FD9<br>
to communicate using wireless protocol, a method can be provided to allow<br>
sending and receiving well known field device control messages between host<br>
computer 12 and field devices FD1-FD9 over wireless network 16. The well<br>
known field device control messages are embedded into the general purpose<br>
wireless protocol so mat the control messages can be exchanged between host<br>
computer 12 and field devices FD1-FD9 to achieve control of an interaction<br>
with field devices FD1-FD9. As a result, wireless network 16 and its wireless<br>
communication protocol is essentially transparent to host computer 12 and field<br>
devices FD1-FD9. In the following description, the HART protocol will be<br>
used as an example of a known control message protocol, although the<br>
invention is applicable to other control message protocols (e.g. Foundation<br>
Fieldbus, Profibus, etc.) as well.<br>
A similar issue relates to the addresses used by host computer 12<br>
to direct messages to field devices FD1-FD9. In wired systems, the host<br>
computer addresses each field device with a unique field device address. The<br>
address is defined as part of the particular communication protocol being used,<br>
arid typically forms a part of control messages sent by the host computer to the<br>
field devices.<br>
When a wireless network, such as network 16 shown in FIG. 1 is<br>
used to route messages from the host computer to field devices, the field device<br>
addresses used by the host computer are not compatible with the wireless<br>
addresses used by the communication protocol of the wireless network. In<br>
addition, there can be multiple field devices associated with a single wireless<br>
node, as illustrated by wireless nodes 20 and 30 in FIG. 1. Wireless node 20<br>
includes two field devices, FD1 and FD2, while wireless node 30 is associated<br>
with three field devices, FD7-FD9.<br>
One way to deal with addresses is to require host computer 12 to<br>
use wireless addresses rather than field device addresses. This approach,<br>
however, requires host computer 12 to be programmed differently depending<br>
upon whether it is communicating over wired communication links with field<br>
devices, or whether it is communicating at least in part over a wireless network.<br><br>
In addition, there remains the issue of multiple field devices, which will<br>
typically have different purposes, arid which need to be addressed individually.<br>
An alternative approach uses gateway 18 to translate field device<br>
addresses provided by host computer 16 into corresponding wireless addresses.<br>
A wireless message is sent to the wireless address, and also includes a field<br>
device address so that the node receiving the message can direct the message to<br>
the appropriate field device. By translating field device addressees to<br>
corresponding wireless addresses, host computer 12 can function in its native<br>
field address domain when interacting with field devices. The presence of<br>
wireless network 16 is transparent to host computer 12 and field devices FD1-<br>
FD9.<br>
Still another issue caused by the use of wireless network 16 to<br>
communicate between host computer 12 and field devices FD1-FD9 is the<br>
unavailability of field devices because of power conservation. La a wired<br>
control system, the host computer interacts with field devices as if they were<br>
available on demand. The assumption is that the field devices are always<br>
powered up and available.<br>
In a low power wireless network, this is not the case. To<br>
conserve power, field devices in a low power wireless network are unavailable,<br>
or asleep, most of the time. Periodically, the wireless network goes into a non-<br>
sleep state during which messages can be communicated to and from the field<br>
devices. After a period of time, the wireless network again goes into a low<br>
power sleep state.<br>
If the host computer attempts to communicate during a period<br>
when the wireless network is in a sleep state, or when a particular field device is<br>
in a low power sleep state, the failure of the field device to respond immediately<br>
can be interpreted by the host computer as a communication failure. The host<br>
computer does not determine the particular route that messages take through the<br>
wireless network, and does not control the power up and power down cycles for<br>
wireless communication. As a result, the host computer can interpret a lack of<br>
response of field devices as a device failure, when the lack of response is an<br><br>
inherent result, of the way that communication takes place within a low power<br>
wireless network.<br>
In order to make the presence of wireless network 16 transparent<br>
to host computer 12, gateway 18 decouples transmission of field device<br>
messages between host computer 12 and wireless network 16. Gateway 18<br>
determines the current state of wireless network 16 and tracks its power cycles.<br>
In addition, it maintains information on the response times required for a field<br>
device to be turned on and then be ready to provide a response message to a<br>
control message from host computer 12.<br>
When a message is provided by host computer 12 to gateway 18,<br>
a determination of an expected response time is made based upon the field<br>
device address. That expected response time is provided to host computer 12,<br>
so mat host computer 12 will not treat the absence of a response message prior<br>
to the expected response time elapsing as a communication failure. As a result,<br>
host computer 12 is allowed to treat field devices FD1-FD9 as if they were<br>
available on demand, when in feet wireless network 16 and field devices FD1-<br>
FD9 are not available on demand.<br>
FIG. 2 shows a block diagram of a portion of the control system<br>
10 shown in FIG. 1. FIG. 2, host computer 12, highspeed network 14, gateway<br>
18, and wireless node 22 are shown.<br>
In FIG. 2, host computer 12 is a distributed control system host<br>
running application programs to facilitate sending messages to field devices<br>
FD1-FD9, and receiving and analyzing data contained in messages from field<br>
devices FD1-FD9. Host computer 12 mayuse, for example, AMS (tm) Device<br>
Manager as an application program to allow users to monitor and interact with<br>
field devices FD1-FD9.<br>
Host computer 12 communicates with gateway 18 using<br>
messages in extendable markup language (XML) format. Control messages<br>
intended for field devices FD1-FD9 are presented according to the HART<br>
protocol, and are communicated to gateway 18 in XML format.<br>
In the embodiment shown in FIG. 2, gateway 18 includes<br>
gateway interface 60, mesh manager 62, and radio 64. Gateway interface 60<br><br>
receives the XML document from host computer 12, extracts the HART control -<br>
message, and modifies the control message into a format to be embedded in a<br>
wireless message that will be transmitted over wireless network 16.<br>
Mesh manager 62 forms the wireless message with the HART<br>
control message embedded, and with the wireless address of the node<br>
corresponding to the field device to which the HART message is directed.<br>
Mesh manager 62 may be maintaining, for example, a lookup table that<br>
correlates each field device address with the wireless address of the node at<br>
which the field device corresponding to that field device address is located. In<br>
this example, the field device of interest is device FD3 located at wireless node<br>
22. The wireless message according to the wireless protocol includes the<br>
wireless node address, which is used to route the wireless message through<br>
network 16. The field device address is contained in the HART message<br>
embedded within the wireless message, and is not used for routing the wireless<br>
message through network 16. Instead, the field device address is used once the<br>
wireless message has reached the intended node.<br>
Mesh manager 62 causes radio 64 to transmit the wireless<br>
message, so that it will be transmitted by one or multiple hops within network  .<br>
16 to node 22.<br>
For example, the message to node 22 may be transmitted from gateway 18 to<br>
node 20 and then to node 22, or alternatively from gateway 18 to node 26 and<br>
then to node 22. Other routes are also possible in network 16.<br>
Gateway interface 60 and mesh manager 62 also interact with<br>
host computer 12 to manage the delivery of control messages to field devices as<br>
if wireless network 1.6 were powered on even though it may be powered off (i.e.<br>
sleep mode). Mesh manager 60 determines the correct powered state of wireless<br>
network 16. It also calculates the time of the power cycles in order to determine<br>
the future time when wireless network 16 will change state from power on to<br>
off, or from power off to on. Response time can be affected if a message is sent<br>
while power is on to the wireless network, but a response will not occur until<br>
the next power on cycle. Still another factor is the start-up time of the field<br>
device. Mesh manager 62 or gateway interface 60 may maintain a data base<br><br>
with start-up times for the various field devices.  By knowing field device<br>
address, an expected start-up time can be determined.<br>
Based upon the current power state of wireless network 16, the<br>
amount of time before wireless network will change state, the field device's<br>
start-up time, expected network message routing time, and the potential for a<br>
response to occur in the next power on cycle rather than the current cycle,<br>
estimated times required for the message to be delivered to the field device and<br>
for the response message to return to gateway 18 can be calculated. That<br>
information can then be provided to host computer 12. Since host computer 12<br>
will not expect a response prior to the estimated response time, the failure to<br>
receive a message prior to that time will not be treated by host computer 12 as a<br>
communication failure or field device failure.<br>
Based upon the factors affecting response time, gateway 18 may<br>
also determine thebest strategy to attempt communication with the field device<br>
given the known power cycle of wireless network 16. For example, if a power<br>
cycle is about to change from on to off, a better strategy may be to wait until the<br>
beginning of the next power on cycle to begin routing the message through<br>
wireless network 16.<br>
As shown in FIG. 2, wireless node 22 includes radio 36, wireless<br>
device router (WDR) 38, and field device FD3. In this particular example, field<br>
device FD3 is a standard HART field device, which communicates field data<br>
using the HART control message protocol. Field device FD3 is powered on and<br>
off by, and communicates directly with, WDR 38.<br>
The wireless message transmitted over network 16 is received at<br>
radio 36 of wireless node 22. The wireless message is checked by WDR. 38 to<br>
see whether it is addressed to node 22. Since node 22 is the destination address,<br>
the wireless message is opened, and the embedded HART message is extracted.<br>
WDR 38 determines that the HART message is intended for field device FD3<br>
based uon the field device address contained in the embedded HART message.<br>
For power saving reasons, WDR 38 may be maintaining field<br>
device FD3 in sleep mode until some action is required. Upon receiving the<br>
HART message contained within the wireless message, WDR 38 takes steps to<br><br>
start up field device FD3. This may be a matter ofonly a few seconds, or may<br>
be, for example, a delay on the order of 30 to 60 seconds. "When field device<br>
FD3 is ready to receive the HART message and act upon it, WDR 38 transmits<br>
the HART control message to field device FD3.<br>
The message received by field device FD3 may require providing<br>
a message in response that includes measurement data or other status<br>
information. Field device FD3 takes the necessary action to gather the<br>
measurement data or generate the status information, generates a response<br>
message in the HART control format, and transmits the message to WDR 38.<br>
The HART response message is then modified and embedded into a wireless<br>
responsemessage according to the wireless protocol, and addressed to gateway<br>
18. WDR 38 provides the wireless response message to radio 36 for<br>
transmission onto wireless network 16. The wireless response message is then<br>
transmitted in one or multiple hops to gateway 18, where the HART response<br>
message is extracted from the wireless response message, is formatted in XML,<br>
and is transmitted over high speed network 14 to host computer 12.<br>
FIG. 3 shows a diagram of a typical wireless message sent over<br>
the wireless network shown in FIGS-1 and 2. Wireless message 70 includes<br>
wireless protocol bits 72, payload 74, and wireless protocol bits 76. Protocol<br>
bits 72 and 76 are required for proper routing of wireless message 70 through<br>
mesh network 16 to the desired destination. Payload 74 represents the substance<br>
of the control message being transmitted. In the present invention, the control<br>
message (in the control message protocol used by both host computer 12 and<br>
field devices FD1-FD9) is embedded within wireless message 70 as payload 74.<br>
FIG. 4 shows the format of control message 80 as generated by<br>
host computer 12. In this particular example, control message 80 is configured<br>
using the HART protocol. Control message 80 includes preamble 82, delimiter<br>
84, field device address 86, command 88, byte count 90, data 92, and check byte<br>
94. Control message 80 is modified at gateway interface 60 and then embedded<br>
into wireless message 70 as payload 74.<br>
FIG, 5 shows a first embodiment of the format of payload 74<br>
formed from control message 80. To produce payload 74, interface 60 removes<br><br>
physical layer overhead from control message 80 and adds sequence<br>
information.<br>
As shown by a comparison of FIGS. 4 and 5, the first difference<br>
between payload 74 and control message SO is that preamble 82 has been<br>
removed. Since the control message will be sent over the network using the<br>
wireless protocol, the use of a preamble is unnecessary. Removal of preamble<br>
82 improves efficiency of network 16 by eliminating unnecessary information.<br>
The second difference between payload 74 and control message<br>
80 is the addition of message ID 96, which is a two-byte number that follows<br>
data 92, and precedes check byte 94. The removal of preamble 82 and the<br>
addition of message ID 96 also requires that check byte 94 be recalculated.<br>
The purpose of message ID 96 is for stale message rejection.<br>
This allows the receiver of a message to reject out of order messages. Wireless<br>
mesh, network 16 is designed such that messages can take multiple paths to get<br>
to their destination. The message is passed from one node to another, and it is<br>
possible that the message may be delayed at a particular node. This could be<br>
caused by interference or poor signal quality. If a message is delayed long<br>
enough, host 12 may issue a retry and/or a new message. In that case, it is<br>
possible that one or more messages may arrive at the destination node before the<br>
delayed message is delivered. When the delayed control message is delivered,<br>
message ID 96 can be used to accept or reject the control message.<br>
FIG. 6 shows a second embodiment of the format of payload 74,<br>
in which trailer function code 98 and trailer payload (or message ID) 96 form<br>
trailer frame 100, which is appended to the control message formed by delimiter<br>
84, field device address 86, command 88,byte count 90, data 92 and check byte<br>
94. Trailer 100 is not included in check byte 94, and instead depends on the<br>
wireless network protocol layers for data integrity and reliability.<br>
Trailer 100 contains function code 98 and payload 96 (which<br>
includes the message ID, if any). Function code 98 is an unsigned byte which<br>
defines the content of trailer 100. Undefined payload bytes such as additional<br>
padding bytes will be ignored. Use of trailer 100 only applies to messages<br><br>
between gateway 18 and wireless field devices FD1-FD9. Table 1 shows an<br>
example of function codes defined for trailer 100:<br><br>
Function codes 0-3 are used with, reference to a message ID.<br>
Message IDs are used for stale message rejection on wireless mesh network 16.<br>
This allows the receiver of a message to reject out of order messages.<br>
Additionally, message IDs can be used by gateway 18 to determine whether<br>
published data has arrived out of order.<br>
Rules for generating the Message ID are as follows:<br>
The message ID enumerates a message sequence from a sender to<br>
a receiver. It is a two byte unsigned value which must be unique and increasing<br>
by one with each new message ID.<br>
A new message ID should be generated for every<br>
request/response transaction. Retries of a request from a sender to a receiver<br>
may re-use a message ID provided that there is no more than one request<br>
outstanding from a sender to a receiver. After receiving a valid request message<br>
with a valid message ID, the field device must echo back the received message<br>
ID with the response.<br>
A new message ID should be generated for every publish<br>
message from a device. Publish message IDs are generated independently of<br>
request/response message IDs.<br>
Rules for validating the Message ID are as follows:<br>
The receiver must implement a window for validating message<br>
IDs so that the validity comparison survives a rollover of the message ID<br>
counter. As an example, any messages within a window of 256 previous IDs<br>
could be ignored as out of order by the WDR/field device. But, if message ID is<br><br>
safely outside the window the receiver should accept the message. Any<br>
accepted message will cause the message ID to be cached as the last valid<br>
received message ID.<br>
After a restart, a receiver may accept the first message ID it<br>
receives or else it must initialize its validity-checking in whatever manner the<br>
device application sees fit. A guideline for this initialization would be for a<br>
device to always accept new stateless requests without requiring a device<br>
publish to first reach the gateway.<br>
The receiver of a published message with an invalid (oat of<br>
order) ID may either use or reject the message, depending on the receiver's<br>
application.<br>
Rules for interpreting function codes are as follows:<br>
A sender can send a message without a message ID by either<br>
omitting trailer 100 or by specifying NO MESSAGE ID as the function code. If<br>
a response is generated and the WDR/field device supports trailers, the return<br>
function code should be set to "NO MESSAGE ID".<br>
If a message ID is provided, it must be accepted if the function<br>
code is set to FORCE ACCEPT or CLEAR FORCE ACCEPT WITH FORCE.<br>
A message with a function code of NORMAL ID will be subject to potential<br>
discard via the message ID validation rules.<br>
If gateway 18 has reset, it should make its first request using the<br>
FORCE ACCEPT function code. The will force the receiving field device to<br>
accept the request and the attached message ID. This relieves gateway 18 of<br>
needing to learn the value of the device's valid message ID counter. Gateway IB<br>
should stop using FORCE ACCEPT once it has received a valid response<br>
message with the matching message ID.<br>
Gateway 18 should honor the CLEAR FORCE ACCEPT WITH<br>
FORCE function code as a valid message ID, but a WDR/fleld device should<br>
not send CLEAR FORCE ACCEPT WITH FORCE to gateway 18.<br>
If a WDR/field device in the system has reset, it should send<br>
publish messages with the command set to FORCE ACCEPT. This will force<br>
gateway 18 to accept the published data.<br><br>
If gateway 18 sees the FORCE ACCEPT function code, it may<br>
issue a CLEAR FORCE ACCEPT WITH FORCE in a subsequent message<br>
along with a valid message ID.<br>
On receipt of CLEAR FORCE ACCEPT WITH FORCE, the<br>
WDR/field device should clear the force accept condition and always accept the<br>
message ID provided.<br>
The use of embedded control messages (in a control message<br>
protocol) within wireless messages (in a wireless protocol) enables the host<br>
computer of a distributed control system to interact with field devices through a<br>
wireless communication network. Control messages can be exchanged between<br>
the host computer and the field devices using known control message formats,<br>
such as HART, Fieldbus, or the like, without having to be modified by either the<br>
host computer or the field devices to accommodate transmission of the control<br>
messages over the wireless network. The control message is embedded within<br>
the wireless communication protocol such that the substance of the control<br>
message exchanged between the host computer and the field device is<br>
unmodified as a result of having passed through the wireless network.<br>
Control messages that are too large to be routed through the<br>
wireless communication protocol can be broken into parts and sent as multiple<br>
parts. Each part is embedded in a wireless message, and the multiple parts can<br>
be reassembled into the original control message as the multiple parts exit the<br>
wireless network. By use of a message ID in the embedded control message, the<br>
multiple parts can be reassembled in proper order, even though individual<br>
wireless messages having embedded parts of the original control message may<br>
take different paths through the wireless network.<br>
The translation of field device addresses to corresponding<br>
wireless addresses allows host 12 to function in its native field device address<br>
domain, while interacting with field devices within the wireless address domain.<br>
The use of wireless network 16 to route messages to and from the field devices<br>
is transparent to host 12. The address translation and inclusion of both the<br>
wireless address and the field device address in the wireless message allows<br><br>
multiple field devices associated with a single node (i.e. a single wireless<br>
address) to be addressed individually.<br>
Although embedding the field device address in the payload of<br>
the wireless message as part of the control message is simple and effective, the<br>
field device address could be contained separately in the payload or elsewhere in<br>
the wireless message, if desired.<br>
The presence of wireless network 16 is also made transparent to<br>
host computer 12 by decoupling the transmission of messages to field devices<br>
between host computer 12 and wireless network 16. Gateway 18 monitors the<br>
state of wireless network 16, and factors mat can affect the response time to a<br>
message. By providing an estimated response time to messages being sent by<br>
host computer 12, gateway 18 allows host computer 12 to treat what field<br>
devices FD1-FD9 and wireless network 16 as if they were available on demand,<br>
even though network 16 and field devices FD1-FD9 are often in a low power<br>
sleep state.<br>
Although the present invention has been described with reference<br>
to preferred embodiments, workers skilled in the art will recognize that changes<br>
may be made in form and detail without departing from the spirit and scope of<br>
the invention. For example, control system 10 is illustrated with six nodes and<br>
nine field devices, but other configurations with fewer or greater numbers of<br>
nodes and field devices are equally applicable.<br><br>
CLAIMS:<br>
1.	A system comprising:<br>
a host;<br>
a field device; and<br>
a wireless mesh network for routing wireless messages between the host<br>
and the field device, the wireless messages including message<br>
sequence information.<br>
2.	The system of claim 1, wherein the message sequence information is<br>
embedded as a payload of a wireless message.<br>
3.	The system of claim 1, wherein the message sequence information<br>
includes a message ID number.<br>
4.	The system of claim 3, wherein the message sequence information<br>
includes a function code.<br>
5.	The system of claim 4, wherein the function code and the message ID<br>
number are embedded as a payload of a wireless message.<br>
6.	A system comprising:<br>
a plurality of field devices;<br>
a host for sending control messages to field devices and receiving<br>
response messages from the field devices; and<br>
a wireless network routing wireless messages among a plurality of<br>
nodes, each node including at least one of the plurality of field<br>
devices, wherein the wireless messages include content of a<br>
control message or response message and message sequence<br>
information relating to the control message or response message.<br>
7.	The system of claim 6, wherein the message sequence information is<br>
embedded in the wireless message.<br>
8.	The system of claim 7, wherein the message sequence information<br>
includes a message ID number.<br>
9.	The system of claim 8, wherein the message sequence information<br>
includes a function code associated with the message ID number.<br><br>
10.	A method of sending messages from a host to field devices over a<br>
wireless network having a plurality of nodes, the method comprising:<br>
sending a control message addressed to a field device address from the<br>
host to the wireless network;<br>
sending a wireless message containing content of the control message<br>
and message sequence information through the network to the<br>
node having the corresponding wireless address; and<br>
delivering the content of the control message to the field device if the<br>
message sequence information indicates that the control message<br>
is received in an acceptable order.<br>
11.	The method of claim 10, wherein the wireless message includes the<br>
message sequence information in a payload.<br>
12.	The method of claim 10 and further comprising:<br>
opening the wireless message;<br>
extracting the message sequence information from the wireless<br>
message; and<br>
determining whether to accept the content of the control message based<br>
on the message sequence information.<br>
13.	The method of claim 10, wherein the message sequence information<br>
includes a message ID number.<br>
14.	The method of claim 10, wherein the message sequence information<br>
includes a function code and an associated message ID number.<br>
15.	A method of sending messages between a host and a selected field<br>
device over a wireless mesh network having a plurality of nodes, the method<br>
comprising:<br>
generating at the host a control message to the selected field device;<br>
sending the control message to the wireless network;<br>
sending a wireless message containing content of the control message<br>
and message sequence information through the wireless<br>
network;<br><br>
receiving the wireless message at a node associated with the selected<br>
field device; and<br>
determining whether to deliver the content of the control message to the<br>
selected  field  device based upon the message sequence<br>
information.<br>
16.	The method of claim 15, wherein the message sequence information<br>
includes a message ID number.<br>
17.	The method of claim 16, wherein determining whether to deliver the<br>
content comprises:<br>
opening the wireless message at the node;<br>
extracting the message  sequence information from the  wireless<br>
message; and<br>
determining whether the message ID number is in an acceptable order<br>
with respect to a previously received message ID number.<br>
18.	The method of claim 15 wherein generating the message sequence<br>
information includes a function code and an associated message ID number.<br>
19-       The method of claim 154 and further comprising:<br>
generating a response by the selected field device to the control<br>
message; and<br>
sending the wireless message containing the response and the message<br>
ID number associated with the control message through the<br>
network.<br>
20.       The method of claim 19 and further comprising:<br>
delivering the response from the wireless mesh network to the host.<br><br>
A control system uses a wireless mesh network to provide communication between a host computer and field devices. The host and the field devices communicate with one another using wireless message containing requests and responses that are routed through the wireless mesh network. The wireless massages include sequence information that allow the receiving device to identify and reject messages that are received out of order.</td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=qW5XICHXsmqOXiCzI5hXZw==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==" target="_blank" style="word-wrap:break-word;">http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=qW5XICHXsmqOXiCzI5hXZw==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==</a></p>
		<br>
		<div class="pull-left">
			<a href="272635-fixation-of-a-biological-material.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="272637-carbon-nanosphere-n-4-chloro-3-trifluoromethyl-phenyl-2-ethoxy-6-pentadecylbenzamide-composition-and-a-process-thereof.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>272636</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>3174/KOLNP/2008</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>16/2016</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>15-Apr-2016</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>13-Apr-2016</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>04-Aug-2008</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>FISHER-ROSEMOUNT SYSTEMS, INC.</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>12301 RESEARCH BOULEVARD-LAW DEPARTMENT, RESEARCH PARK PLAZA, BUILDING III AUSTIN, TEXAS</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>LOVEGREN, ERIC, R.</td>
											<td>C/O FISHER-ROSEMOUNT SYSTEMS, INC., 12301 RESEARCH BOULEVARD-LAW DEPARTMENT, RESEARCH PARK PLAZA, BUILDING III, AUSTIN, TEXAS 78759-2369</td>
										</tr>
										<tr>
											<td>2</td>
											<td>SYBESMA, ERIC, W.</td>
											<td>C/O FISHER-ROSEMOUNT SYSTEMS, INC., 12301 RESEARCH BOULEVARD-LAW DEPARTMENT, RESEARCH PARK PLAZA, BUILDING III, AUSTIN, TEXAS 78759-2369</td>
										</tr>
										<tr>
											<td>3</td>
											<td>ORTH, KELLY, M.</td>
											<td>C/O FISHER-ROSEMOUNT SYSTEMS, INC., 12301 RESEARCH BOULEVARD-LAW DEPARTMENT, RESEARCH PARK PLAZA, BUILDING III, AUSTIN, TEXAS 78759-2369</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>H04L 12/56</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/US2007/000694</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2007-01-11</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>60/758167</td>
									<td>2006-01-11</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/272636-control-system-with-wireless-messages-containing-message-sequence-information by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 00:28:39 GMT -->
</html>
