<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/222528-improved-system-and-method-for-implementation-of-an-echo-canceller by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 08:20:57 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 222528:IMPROVED SYSTEM AND METHOD FOR IMPLEMENTATION OF AN ECHO CANCELLER</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">IMPROVED SYSTEM AND METHOD FOR IMPLEMENTATION OF AN ECHO CANCELLER</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>The present invention relates to a system and method for canceling an echo signal An input waveform is provided to an acoustic processor to determine if it comprises information representative of an echo signal, if it does, an output waveform is formed by attenuating a residual waveform with the acoustic processor. The residual waveform is attenuated by an attenuation factor that gradually changes from an initial attenuation value to a final attenuation value. A system and method for adjusting an acoustic signal from a muted state to an unmuted state by varying an attenuation factor applied to an acoustic signal by an acoustic processor. The acoustic signal is provided to an acoustic processor. An output waveform is formed from the acoustic processor by adjusting the attenuation factor from a muted state to a first attenuation value associated with the non-muted state. The output waveform is formed by gradually changing the attenuation factor from the first attenuation value to a second attenuation value. The input waveform is attenuated by a smaller amount when the second attenuation value is applied to the acoustic signal than when the first attenuation value is applied to the acoustic signal.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>Background of the Invention<br>
L        Field of the Invention<br>
The present invention relates generally to echo cancellers. More particularly, the present invention relates to a novel and improved system and method for reducing the chopiness heard in full-duplex systems that use echo cancellers. The teachings of the present invention apply to acoustic echo cancellers, as well as to echo cancellers in networks and other non-acoustic systems. II.       Description of the Related Art<br>
Acoustic echo-cancellers (AEC) are used in teleconferencing and hands-free telephony applications to eliminate acoustic feedback between a loudspeaker and a microphone. In a cellular telephone system where the driver uses a hands-free telephone, acoustic echo cancellers are used in the mobile station to provide full-duplex communications, A block diagram of a traditional acoustic echo canceller is illustrated in FIG. 1.<br>
For reference purposes, the driver is the near-end talker with input speech signal v(n) and the person at the other end of the connection is the far-end talker with input digital speech signal x(n). The speech of the far-end talker is broadcast out of loudspeaker 2 in the mobile telephone. If this speech is picked up by microphone 10, the far-end talker hears an annoying echo of his or her own voice. The output of microphone 10, r(n), is a digital signal. Typically the functions performed by microphone 10 may be accomplished by a<br><br>
microphone, which would convert the audio signal to an analog electrical signal and an analog to digital (A/D) converter. The AEC identifies the impulse response between speaker 2 and microphone 10, generates a replica of the echo using adaptive filter 14, and subtracts it in summer 12 from the microphone output, r(n), to cancel the far-end talker echo y(n). Since the adaptive filter cannot generally remove all of the echo, some form of echo suppression provided by residual echo suppression element 18 (e.g., a non-linear post processor) is typically employed to remove any residual echo.<br>
In FIG. 1, the far end talker echo signal y(n) is illustrated as the output of an acoustic echo path element 4, which is an artifact of the proximity of the loudspeaker 2 and microphone 10. To the far end talker echo signal y{n) is added noise signal w(n) and near-end speech signal v(n), illustrated by sumirung elements 6 and 8 respectively. It should be noted that  elements 6 and 8 and acoustic echo path 4 are artifacts of the mobile environment and are presented for illustrative purposes.<br>
Adaptive filter 14 uses the far-end speech x(n) as a reference signal. If adaptive filter J4 is allowed to adapt in the presence of v(n), the near-end speech will be added to the error signal e(n), which drives the filter tap coefficient adaptation, corrupting the estimate of acoustic echo path 4. It is therefore necessary to disable coefficient adaptation when both talkers are speaking, a condition referred to as doubletalk. During doubletalk, residual echo suppression element 18 must also be disabled to prevent corruption of the near-end speech. A doubletalk detector (not shown) typitally detects the<br><br>
presence of doubletalk and provides control signals to disable adaptive filter 14 and residual echo suppression element 18 when doubletalk is present.<br>
As shown in FIG. 2, in prior art echo cancellation systems, residual echo supression element 18 functions to cancel any residual echo by muting (i.e., gating-off) its output whenever an echo is detected by the adaptive filter 14. This aspect of element 18 is shown in portion "A" of FIG. 2. The upper half of portion "A" of FIG.2 illustrates the detection of an echo condition resulting from acoustic feedback between loudspeaker 2 and a microphone 10 when the word "HELLO" is spoken by a far-end talker. The lower half of portion "A" of FIG, 2 shows that, as soon as the echo is detected at t,, the output of element 18 is muted-off entirely. Thereafter, as soon as the echo ceases to be present at t, the output of element 18 is unmuted.<br>
In addition, in ir\stances where the output of residual echo supression element 18 is muted because adaptive filter 14 has detected an echo and the double-talk detector simultaneouesly detects double-talk, residual echo supression element 18 will unnute its output during the double-talk period. This aspect of element 18 is shown in portion "B" of FIG. 2. The upper half of portion "B" of FIG.2 illustrates the detection of a double-talk condition at t4 at a time when the output of element 18 is being muted as a result of the detection of an echo condition between t3 and t4. The double-talk condition results from simultaneous speech by the far-end and near-end talkers (i.e, the near-end talker is saying "HI" during the time that the far-end talker is saying "HELLO"). The lower half of portion "B" of FIG. 2 shows that, as soon as the double-talk is detected at t4, the output of element 18 is unmuted. Thereafter, as<br><br>
soon as the double-talk condition ceases to be present at t., the output of element 18 is muted again. The output of element 18 remains fully muted until the echo resulting from the word "HELLO" spoken by the far end talker ceases at tg. Aas soon as the echo ceases to be present at t4 the output of element 18 is unmuted.<br>
Portion "C" of FIG. 2 similarly illustrates an example where the output of element 18 remains unmuted when a double-talk condition is detected between t4 and t8. Thereafter, as soon as the double-talk condition ceases to be present at t8, the output of element 18 is muted again because of an ongoing echo condition. The output of element 18 remains fully muted until this echo condition ceases at t4, thereby causing muting of the word "UP" from the near-end talker between % and t,. As soon as the echo ceases to be present at t,, the output of element 18 is unmuted.<br>
Referring still to the prior art system of Figure 1, when the echo component y(n) dominates the near-end speech signal v(n) during particular periods, the near-end speech will be muted out by element 18. This situation can result in an imdesireable chopiness in the audible signal heard by the user. One purpose of the present invention is smooth this chopiness, which can be unpleasant and annoying to the user.<br>
In addition to be annoying to the user, this chopiness often results in the presentation of an imsmooth energy curve to the vocoder used for encoding the near-end speech signal. In applications where variable rate vocoders are used, the chopiness in the energy curve can cause the vocoder to transmit at the full data rate more, often than is necessary, thereby wasting limited system capacity.<br><br>
Thus, it is a further object of the present invention to present a smoother energy curve to the vocoder, thereby improving its performance.<br>
These problems and deficiencies are recognized and solved by the present invention in the manner described below.<br>
Summary of the Invention<br>
One aspect of the present invention is directed to a system and method for canceling an echo signal. This aspect of the invention may be used, for example, for removing an abrupt transition in the audible signal that would otherwise occur when the near-end speech signal is dominated by an echo and the output of the non-linear post-processor is being changed from a non-muted to a muted state. According to this aspect of the invention, an input waveform is provided to an acoustic processor, and a determination is made whether the input waveform includes information representative of an echo signal. If the input waveform includes information representative of an echo signal, an output waveform is formed by attenuating a residual waveform with the acoustic processor. The residual waveform is attenuated by an attenuation factor that gradually changes from an initial attenuation value to a final attenuation value during the attenuation step. This aspect of the invention may also be used, for example, for removing the chopiness in the audible signal that would otherwise occur when the near-end speech is dominated by an echo and the output of the non-linear post-processor is being changed for a non-muted to a muted state.<br><br>
In accordance with a further aspect, the present invention is directed to a system and method for adjusting an acoustic signal from a muted state to an unmuted state by varying an attenuation factor applied to an acoustic signal by an acoustic processor. This aspect of the invention may be used, for example, for removing the chopiness in the audible signal that would otherwise occur when the end of an echo condition is detected and the output of the non-linear post-processor is being changed from a muted to a non-muted state. According to this aspect of the invention, an acoustic signal is provided to an acoustic processor, and an output waveform is formed from the acoustic processor by adjusting the attenuation factor from the muted state to a first attenuation value associated with the non-muted state. After the attenuation factor is adjusted to the first attenuation value, the output waveform is formed by gradually changing the attenuation factor from the first attenuation value to a second attenuation value. The input waveform is attenuated by a smaller amount when the second attenuation value is applied to the acoustic signal than when the first attenuation value is applied to the acoustic signal. This aspect of the invention may also be used, for example, for removing the chopiness in the audible signal that might otherwise result when a mobile phone is operating in AMPS mode and bursty noise is present.<br>
Brief Description of the Drawings<br>
The features, objects and advantages of the present invention will become more apparent from the detailed description set forth below when taken in conjunction with the drawings in which like reference characters<br><br>
identify correspondingly throughout and wherein:<br>
Figure 1 is a block diagram of a prior art acoustic echo canceller.<br>
Figure 2 is a timing diagram showing the operation of the prior art residual echo supression element shown in Figure 1.<br>
Figure 3 is a block diagram of a novel non-linear post processor that functions in accordance with a preferred embodiment of the present invention.<br>
Figure 4 is a flow diagram showing the method of operation of the nonlinear post processor shown in Figure 3.<br>
Figure 5 is a tirrung diagram showing the operation of the non-linear post-processor shown in Figure 3 in instances where echo and double-talk conditions are present.<br>
Figure 6 is a timing diagram showing the operation of the non-linear post-processor of Figure 3 when bursty noise is present at the far-end talker.<br>
Detailed Description of the Preferred Embodiments<br>
Referring now to Figure 3, there is shown a block diagram of an acoustic processor 300 that functions in accordance with a preferred embodiment of the present invention. Acoustic processor 300 is a non-linear post processor that accepts as its input, for example, the error signal e(n) described above in coxmection with Figure 1. Acoustic processor 300 includes a switch 310 for varying the state of the processor between an off state and an up/down state. When acoustic processor 300 is operating in its off state, the input signal e(n) is applied to a muting means 320 which functions to<br><br>
completely gate-off the input signal, thereby producing an output signal at the output of processor 300 that is entirely muted off. When acoustic processor 300 is operating in its up/down state, the input signal e(n) is applied to a variable attentuator 330 which produces an output signal by partially attenuating the input signal. The attenuation factor (k) that is applied to the input signal by the variable attenuator 330 is calculated and adjusted using method 400 shown in Figure 4. As explained more fully below, the variable attenuator 330 has three states, namely UP, DOWN and OFF. These states are alternatively used depending on whether the variable attenuator is ramping-up the attenuation factor (k) being applied to the input signal (k), ramping-down the attenuation factor (k) that is being applying to the input signal e(n), or off.<br>
Referring now to Figure 4, there is shown a flow diagram illustrating a method 400 of operation of the acoustic processor shown in Figure 3. Method 400 is used to control switch 310 (thereby switching the processor between its off and up/down states) and to vary the attenuation factor (k) applied to the input signal by the variable attenuator 330. Method 400 may be implemented in software \ising controller 340 in acoxistic processor 300. Method 400 is particularly well-suited for controlling an acoustic processor used for processing signals sent between a base station and a mobile telephone using CDMA modulation. The use of CDMA techniques in a multiple access communication system is well known and disclosed, for example, in U.S. Pat. No. 4,901,307, entitied "SPREAD SPECTRUM MULTIPLE ACCESS COMMUNICATION SYSTEM USING SATELLITE OR TERRESTRIAL<br><br>
REPEATERS/' assigned to the assignee of the present invention and incorporated by reference herein.<br>
Referring still to Figure 4, in step 402, the system tests whether processor 300 is about to begin attenuating the input signal e(n). Step 402 will determine that attenuation of the input signal e{n) is about to begin, for example, when an echo condition is first detected by adaptive filter 14, when bursty noise is present at the far-end talker or when an echo condition remains present following the end of a double-talk period. If a determination is made in step 402 that the attenuating of the input signal is about to begin, then processing proceeds to step 404 where the state of processor 300 is set to up/down (i.e., switch 310 directs the input signal to variable attenuator 330), the state of variable attenuator is set to UP, and the current value of the attenuation factor (k) applied to the input signal by attenuator 330 is set to 0 db. Next, in step 406, the current value of the attenuation factor (k) is compared to a threshold k„p which is calculated in accordance with equation (1) below:<br><br>
where E represents an energy estimate of the input waveform e(n) over M samples, bnS is a backgroimd noise scale value associated with the uniformly distributed random noise generator used for generating w(n), and Gpred  is the prediction gain of a LPC shaping filter associated with the CDMA modulation used for transmission and reception of the speech signal x(n) between a base station and a mobile station. The constant a is preferably set to 1.0. In alternate embodiments where it is desirable to cause the attenuation of e(n) to ramp-up<br><br>
more quickly, a will preferably be set to a value greater than 1.0. The values bnS and Gpred  are preferably calculated as set forth in U.S. Patent No. 5,646,691, entitled "Noise Replacement Ssytm in an Echo Canceller," incorporated herein by reference.<br>
If in step 406 it is determined that the current value of the attenuation factor (k) is not less than threshold k„, then processing proceeds back to step 402. In cases where a determination was made in the previous iteration of step 402 that the attenuating of the input signal e(n) was about to begin, the current state of variable attenuator 330 will be set to UP, the testing in step 402 will return a NO value and the testing in step 408 (which tests to determine if attenuation of the input signal has just ended) will similarly return a NO value. In such cases, processing thereafter proceeds to step 410 which tests to determine if the current state of the variable attenuator is UP. If the current state of the variable attenuator is UP, then in step 412 the current value of the attenuation factor (k) applied to the input signal is ramped-up. In a preferred embodiment, the attenuation factor is ramped-up an amount equal to -1.5 db / 5 msec interval; however, it will be understood by those skilled in the art that the ramp-up amount applied to k in each iteration of step 412 is a matter of design choice and may be greater or less than -1.5 db per step. Next, in step 406, the current value of the attenuation factor (k) is compared to the threshold k„p. If in step 406 it is determined that the current value of the attenuation factor (k) is not less than threshold kp then the processing loop described above continues to repeat until, as a result of repeated ramping of the value of k in<br><br>
step 412, the current value of the attenuation factor (k) is determined to be less than the threshold kup in step 406.<br>
When the current value of the attenuation factor (k) is determined to be less than the max of the threshold kup or gamma (e.g., gamma = 30dB) in step 406, then in steps 414 and 416, the state of processor 300 is changed from its up/down to its off state (i.e,, switch 310 redirects the input signal from variable attenuator 330 to muting means 320), the current value of the attenuation factor (k) is reset to 0, and the state of variable attenuator 330 is set to OFF.<br>
Thus, in cases where the attenuating of the input signal e(n) is initiated because, for example, an echo condition is first detected by adaptive filter 14, bursty noise is present at the far-end talker or an echo condition remains present following the end of a double-talk period, the attenuation is ramped-up gradually (in a step-wise manner at -1.5 db / 5 n^ec interval) until the current value of the attenuation factor reaches k„p, at which point the input signal is entirely muted. An example of this aspect of the invention is illustrated in Figure 5 which shows the gradual ramping-up of the attenuation factor (k) starting at tj when an echo condition first begins. The gradual ramping-up of the attenuation factor (k) continues from t, until tj, when the value of the attenuation factor (k) reaches k„p. Immediately following t4, the variable attenuator 330 is turned off and the input signal is entirely muted (i.e., gated-off). By gradually ramping-up the attentuation factor (k) prior to gating-off the input signal at t4, the present invention substantially reduces the "chopiness" in the audible signal that is typically heard by users of prior art echo cancellers.<br><br>
the gradual ramping-up of the attenuation factor(k) when an echo condition first begins is also shown as occuring from t2 to t4 in Figure 5.<br>
In Figure 5 there is also shown an example of the operation of the present invention in a case where an echo condition remains present following the end of a double-talk period. In particular, at t4, the double-talk condition resulting from simulltaneous uttering of "HEY" (by the far-end talker) and the beginning of the phrase "WHAT'S UP" by the near-end talker, ceases to exist. However, at this same time, an echo condition remains as a result of, for example, acoustic coupling of speaker 2 and microphone 10. Gradual ramping-up of the attenuation factor (k) starts at t4, when the double-talk period ends and the echo condition remains present. The gradual ramping-up of the attenuation factor (k) continues from t4, until t4, when the value of the attenuation factor (k) reaches kup. Immediately following t4j, the variable attenuator 330 is tvimed off and the input signal is entirely muted (i.e., gated-off). Significantly by gradually ramping-up the attentuation prior to gating-off the input signal at t4^, the present invention permits the portion of the phrase "WHAT'S UP" (from the near-end talker) remaining after cessation of the double-talk period to be transmitted through processor 300, albeit in a partially attenuated form. This result stands in contrast to that achieved by prior art residual echo suppression element 18 (shown in Figure 2) which, in the identical situation, would entirely gate-off the input signal following cessation of the double-talk period (cessation of the double-talk period occurs at t4 in Figure 2) thereby precluding any portion of the phrase "WHAT'S UP" (from the near-end talker) remaining after<br><br><br>
cessation of the double-talk period to be transmitted through to the far-end talker. In addition, by gradually ramping-up the attentuation factor (k) prior to gating-off the input signal at t4, the present invention substantially reduces the "chopiness" in the audible signal that is typically heard by users of prior art echo cancellers.<br>
Referring again to Figure 4, in step 408, the system tests whether processor 300 is about to cease muting the input signal e(n). Step 408 will determine that the attenuation of the input signal e(n) is about to cease, for example, when adaptive filter 14 determines that a previously detected echo condition is no longer present, when previous bursty noise at the far-end talker ceases to be present or when a double-talk period begins during the existence of an echo condition. If a determination is made in step 408 that the attenuating of the input signal is about to cease, then processing proceeds to step 418 where the state of the variable attenuator is changed to DOWN. In step 420, the system tests to deterrrune if the previous state of the variable attenuator 330 was UP. If so, processing proceeds to step 422 where the state of processor 300 is set to up/down (i.e., switch 310 directs the input signal to variable attenuator 330), and the current value of the attenuation factor (k) applied to the input signal by<br><br>
where E represents an energy estimate of the input waveform over M samples, bnS is a background noise scale value for the uniformly distributed random<br><br>
loise generator used for generating w(n), and Gpredis the prediction gain of a LPC shaping filter associated with the CDMA modulation used for transmission and reception of the speech signal x(n) between a base station and a mobile station. The constant B is preferably set to 1.0. In alternate embodiments where it is desirable to cause the attenuation of e{n) to ramp-down more quickly, B will preferably be set to a value greater than 1.0.<br>
Next, processing proceeds back to step 402. In cases where a determination was made in the previous iteration of step 408 that the attenuating of the input signal e(n) was about to cease, the current state of variable attenuator 330 will be set to DOWN, the testing in step 402 will return a NO value and the testing in step 408 will similarly return a NO value. In such cases, processing thereafter proceeds to step 426 which tests to determine if the current state of the variable attenuator is DOWN. If the current state of the variable attenuator is DOWN, then in step 428 the current value of the attenuation factor (k) applied to the input signal is ramped-down. In a preferred embodiment, the attenuation factor is ramped-down an amotmt equal to 1.5 dB / 5 msec interval; however, it will be imderstood by those skilled in the art that the ramp-down amount applied to k in each iteration of step 428 is a nutter of design choice and may be greater or less than 1.5 db per step. Next, in step 430, the current value of the attenuation factor (k) is compared to 0 db. If in step 430 it is determined tiiat the axrrent value of the attenuation factor (k) is less than 0 db, then the processing loop described above continues to repeat until, as a result of repeated ramping of the value of k in step 428, the current<br><br>
value of the attenuation factor (k) is deternuned to be greater than or equal to 0 db in step 430. When the current value of the attenuation factor (k) is determined to be greater than or equal to 0 db in step 430, then in step 416 the state of variable attenuator 330 is set to OFF.<br>
Thus, in cases where the attenuating of the input signal e(n) is terminated because, for example, adaptive filter 14 determines that a previously detected echo condition is no longer present, bursty noise that was previously present at the far-end source ceases to be present or a double-talk period begins during the existence of an echo condition, the attenuation factor is initally set to kdown. Thereafter, the attenuation factor is ramped-down gradually (in a step-wise manner at 1.0 dB / 5 msec interval) until the current value of the attenuation factor reaches 0 dB. An example of this aspect of the invention is illustrated in Figure 5 which shows the setting of the attenuation factor to kdown at t4 when an echo condition first ceases and thereafter the gradual ramping-down of the attenuation factor (k) until t4 when the attenuation factor (k) reaches 0 db. By gradually ramping-down the attentuation factor imtil reaching 0 db at t4, the present invention substantially reduces the "chopiness" in the audible signal that is typically heard by users of prior art echo cancellers. Examples where, upon cessation of an echo condition, the attenuation factor (k) is intially set to kdown and  gradually ramped-down until it reaches 0 db are also shown as occuring from t, to t4, and from t4, to t4, in Figure 5.<br>
In Figure 5 there is also shown an example of the operation of the present invention in a case where a double-talk period begins during the<br><br>
existence of an echo condition. In particular, at L. a double-talk condition begins as a result of the phase "HI" being spoken by the near-end talker while the phrase "HELLO" is being spoken by the far-end talker. However, immeidately preceeding t4 an echo condition already existed as a result of the uttering of the beginning of the phrase "HELLO" by the far-end talker. When the double-talk period first begins during an echo at t7,the attenuation factor (k) is initally set to k down gradually ramped-down until the double-talk period ceases at tg. At tg, a double-talk period has ended and an echo condition reniains present. Normally, as explained above, when an echo condition remains present following a double-talk period gradual ramping-up of the attenuation factor (k) until it reaches k„p begins. However, since at tg the attenuation factor (k) is already less than kp the input signal is simply muted-off at t4.<br>
At the beginning and ends of words, voice segments are typically of low energy but still important for understanding- The smooth transition between states in the present invention allows otherwise imvoiced segments to get through, albeit in an attenuated fashion making the speech more understandable.<br>
Referring now to Figure 6, there is shown an example of the operation of the present invention in a case where bursty noise is present at the far-end talker. As shown in Figure 6, each time a short segment of bursty noise appears at the far-end talker, a condition that is analagous to the echo conditions described above occurs. Thus, at the beginning of each bursty noise segment, the attenuation factor (k) begins ramping-up. However, since each bursty-noise<br><br>
segment is relatively short, the bursty-noise segment ends before the system reaches ku. At the end of each bursty noise segment, the attenuation factor begins ramping-down until it reaches 0 db. Unlike the ramping-down that typically occurs at the end of an echo condition, the ramping-down that occurs at the end of a bursty noise segment does not begin at kdown because, due to the brevity of each bursty noise segment, the attenuation factor (k) usually does not reach kdown during the ramping-up that occurs during the bursty noise segment. This gradual ramping-up and down of the attenuation factor during bursty noise segments stands in contrast to the operation at achieved by prior art residual echo suppression element 18 which, in the identical situation, would entirely gate-off the input signal during each bursty noise segment. By gradually ramping-up and down the attentuation factor (k) for each bursty-noise segment (rather than entirely gating-off the input signal during each such segment), the present invention substantially reduces the "chopiness" in the audible signal that is typically heard by users of prior art echo cancellers.<br>
Although the preferred embodiments of the present invention have been described above in connection with mobile telephones that use CDMA modulation, it will be understood by those skilled in the art that the present invention may be used for implementing an echo canceller in a mobile telephone system that uses alternative modulation techniques such as, for example, time-division multiple-access modulation systems. Moreover, it will be understood by those skilled in the art that the present invention may be used to improve echo cancellation in acoustic systems other than mobile telephone<br><br>
systems, and that the teachings of the present invention may be used in non-acoustic echo cancellers such as those used in network applications.<br>
The previous description of the preferred embodiments is provided to enable any person skilled in the art to make or use the present invention. The various modifications to these embodiments will be readily apparent to those skilled in the art, and the generic principles defined herein may be applied to other embodiments without the use of inventive faculty. Thus, the present invention is not intended to be limited to the methods and apparatuses shown herein but is to be accorded the widest scope consistent with the claims set forth below.<br><br><br>
WE CLAIM :<br>
1.	A method of canceling an echo signal, comprising the steps of:<br>
(A)	providing an input waveform to an acoustic processor;<br>
(B)	determining whether said input waveform comprises information<br>
representative of said echo signal; and<br>
(C)	forming an output waveform by attenuating a residual waveform with said<br>
acoustic processor if said input waveform comprises information representative of<br>
said echo signal, wherein forming the output waveform comprises: calculating an<br>
attenuation threshold as a function of an energy estimate of the input waveform over a<br>
predetermined number of samples, a backgroimd noise value, and a prediction gain for<br>
a filter; comparing the attenuation threshold to said attenuation factor; and adjusting<br>
the attenuation factor in response, wherein said residual waveform is attenuated by an<br>
attenuation factor that gradually changes from an initial attenuation value to a final<br>
attenuation value during said attenuating.<br>
2.	The method as claimed in claim 1, wherein said attenuation factor decreases linearly fr"om said initial attenuation value to said final attenuation value during said attenuation step.<br>
3.	The method as claimed in claim 2, comprising the step of: (D) after said residual waveform is attenuated by said final attenuation amount during said attenuation step, muting said output waveform,<br>
4.	The method as claimed in claim 3, wherein said initial attenuation value is equal to 0 db.<br>
5.	The method as claimed in claim 3, wherein said attenuation factor is decreased<br><br>
from said initial attenuation value to said final attenuation value in equal stepwise increments during said attenuation step.<br>
6.	The method as claimed in claim 5, wherein said attenuation factor is decreased from said initial attenuation value to said final attenuation value at a rate of 1 db every 5 ms during said attenuation step.<br>
7.	The method as claimed in claim 1, wherein said attenuation threshold (Kup) is calculated in accordance with the following equation:<br><br>
wherein E represents an energy estimate of said input waveform over M samples, bnS is a background noise scale value for a uniformly distributed random noise generator, and Gpred is the predication gain of a LPC shaping filter associated with CDMA modulation.<br>
8.	The method as claimed in claim 1, wherein said echo signal is representative of an acoustic echo resulting from coupling of a microphone and a speaker located at a position associated with a far-end talker.<br>
9.	The method as claimed in claim 1, wherein said echo signal corresponds to bursty noise supplied into a transmission channel at a position associated with a far-end talker.<br>
10.	A method for adjusting an acoustic signal from a muted state to an unmuted state by varying an attenuation factor applied to an acoustic signal by an acoustic<br><br>
processor, comprising the steps of:<br>
(A)	providing said acoustic signal to an acoustic processor;<br>
(B)	forming an output waveform from said processor by adjusting said<br>
attenuation factor from the muted state to a first attenuation value associated with said<br>
unmuted state; and<br>
(C )after said attenuation factor is adjusted to said first attenuation value in step (B), forming said output waveform by gradually changing said attenuation factor from said first attenuation value to a second attenuation value, wherein forming the output waveform comprises:<br>
calculating an attenuation threshold as a function of an energy estimate of the input waveform over a predetermined number of samples, a background noise value, and a prediction gain for a filter;<br>
comparing the attenuation threshold to said attenuation factor; and adjusting the attenuation factor in response;<br>
wherein said input waveform is attenuated by a smaller amount when said second attenuation value is applied to said acoustic signal than when said first attenuation value is applied to said acoustic signal.<br>
11.	The method as claimed in claim 10, wherein said attenuation factor is increased from said first attenuation value to said second attenuation value in equal stepwise increments during step (C),<br>
12.	The method as claimed in claim 11, wherein said attenuation factor is increased from said first attenuation value to said second attenuation value at a rate of 1 db every 5 ms during said step (C).<br>
13.	A method of claim 10 wherein said attenuation threshold is equal to 0 db.<br><br>
14.	The method as claimed in claim 12, wherein said second attenuation value<br>
(K.down) is calculated in accordance with the following equation:<br><br>
wherein E represents an energy estimate of said input waveform over M samples, bnS is a background noise scale value for a uniformly distributed random noise generator, and G.pred is the prediction gain of a LPC shaping filter associated with said CDMA modulation.<br>
15.	The method as claimed in claim 10, wherein said echo signal is representative of an acoustic blip occurring at a position associated with a near-end talker.<br>
16.	A system for canceling an echo signal in a code-division-multiple-access modulated signal, comprising:<br>
an acoustic processor (300) configured to receive an input waveform;<br>
an adaptive filter(14) configured to determine whether said input waveform comprises information representative of said echo signal; and<br>
said acoustic processor comprising a variable attenuator (330) configured to form an output waveform by attenuating a residual waveform if said input waveform comprises information representative of said echo signal;<br>
wherein said variable attenuator is configured to attenuatesaid residual waveform by an attenuation factor that gradually changes from an initial attenuation value to a final attenuation value if said input waveform comprises information representative of said echo signal,<br>
wherein said acoustic processor is configured to form an output waveform by:<br>
calculating an attenuation threshold as a function of an energy estimate of the input waveform over a predetermined number of samples, a background noise value, and a prediction gain for a filter;<br><br>
comparing the attenuation threshold to said attenuation factor; and adjusting the attenuation factor in response.<br>
17. A system for adjusting an acoustic signal from a muted state to an unmuted state by varying an attenuation factor applied to an acoustic signal by an acoustic processor, comprising: an acoustic processor configured to receive an acoustic signal; said acoustic processor comprising a variable attenuator that configured to form an output waveform by first adjusting said attenuation factor from the muted state to a first attenuation value associated with said non-muted state and, after said attenuation factor is adjusted to said first attenuation value, forming said output waveform by gradually changing said attenuation factor from said first attenuation value to a second attenuation value; wherein said acoustic processor calculates an attenuation threshold, compares the attenuation threshold to said attenuation factor, and adjusts the attenuation factor in response; wherein the attenuation threshold is a function of an energy estimate of the input waveform over a predetermined number of samples, a background noise value, and a prediction gain for a filter; wherein said input waveform is attenuated by a smaller amount when said second attenuation value is applied to said acoustic signal than when said first attenuation value is applied to said acoustic signal.<br>
Dated     this    26   day    Of   July   2002<br><br></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=YWJzLWluLXBjdC0yMDAyLTExNDYtY2hlLmpwZw==" target="_blank" style="word-wrap:break-word;">abs-in-pct-2002-1146-che.jpg</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDItMTE0Ni1jaGUgYWJzdHJhY3QtZHVwbGljYXRlLmpwZw==" target="_blank" style="word-wrap:break-word;">in-pct-2002-1146-che abstract-duplicate.jpg</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDItMTE0Ni1jaGUgYWJzdHJhY3QtZHVwbGljYXRlLnBkZg==" target="_blank" style="word-wrap:break-word;">in-pct-2002-1146-che abstract-duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDItMTE0Ni1jaGUgY2xhaW1zLWR1cGxpY2F0ZS5wZGY=" target="_blank" style="word-wrap:break-word;">in-pct-2002-1146-che claims-duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDItMTE0Ni1jaGUgZGVzY3JpcHRpb24gKGNvbXBsZXRlKS1kdXBsaWNhdGUucGRm" target="_blank" style="word-wrap:break-word;">in-pct-2002-1146-che description (complete)-duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDItMTE0Ni1jaGUgZHJhd2luZ3MtZHVwbGljYXRlLnBkZg==" target="_blank" style="word-wrap:break-word;">in-pct-2002-1146-che drawings-duplicate.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDItMTE0Ni1jaGUtYWJzdHJhY3QucGRm" target="_blank" style="word-wrap:break-word;">in-pct-2002-1146-che-abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDItMTE0Ni1jaGUtYXNzaWdubWVudC5wZGY=" target="_blank" style="word-wrap:break-word;">in-pct-2002-1146-che-assignment.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDItMTE0Ni1jaGUtY2xhaW1zIC5wZGY=" target="_blank" style="word-wrap:break-word;">in-pct-2002-1146-che-claims .pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDItMTE0Ni1jaGUtY29ycmVzcG9uZGFuY2Ugb3RoZXJzLnBkZg==" target="_blank" style="word-wrap:break-word;">in-pct-2002-1146-che-correspondance others.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDItMTE0Ni1jaGUtY29ycmVzcG9uZGFuY2UgcG8ucGRm" target="_blank" style="word-wrap:break-word;">in-pct-2002-1146-che-correspondance po.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDItMTE0Ni1jaGUtZGVzY3JpcHRpb24gY29tcGxldGUucGRm" target="_blank" style="word-wrap:break-word;">in-pct-2002-1146-che-description complete.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDItMTE0Ni1jaGUtZHJhd2luZ3MucGRm" target="_blank" style="word-wrap:break-word;">in-pct-2002-1146-che-drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDItMTE0Ni1jaGUtZm9ybSAxLnBkZg==" target="_blank" style="word-wrap:break-word;">in-pct-2002-1146-che-form 1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDItMTE0Ni1jaGUtZm9ybSAxOC5wZGY=" target="_blank" style="word-wrap:break-word;">in-pct-2002-1146-che-form 18.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDItMTE0Ni1jaGUtZm9ybSAyNi5wZGY=" target="_blank" style="word-wrap:break-word;">in-pct-2002-1146-che-form 26.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDItMTE0Ni1jaGUtZm9ybSAzLnBkZg==" target="_blank" style="word-wrap:break-word;">in-pct-2002-1146-che-form 3.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDItMTE0Ni1jaGUtZm9ybSA1LnBkZg==" target="_blank" style="word-wrap:break-word;">in-pct-2002-1146-che-form 5.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=aW4tcGN0LTIwMDItMTE0Ni1jaGUtcGN0LnBkZg==" target="_blank" style="word-wrap:break-word;">in-pct-2002-1146-che-pct.pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="222527-a-contact-disc-system-of-a-windscreen-wiper-motor.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="222529-microcapsule-and-process-for-production-thereof.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>222528</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>IN/PCT/2002/1146/CHE</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>47/2008</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>21-Nov-2008</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>14-Aug-2008</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>26-Jul-2002</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>QUALCOMM INCORPORATED</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>5775 Morehouse Drive, San Diego, CALIFORNIA 92121,</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>Samir, K GUPTA</td>
											<td>13593 Tiverton Road, San Diego, CA 92130,</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>H04M 9/08</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>PCT/US01/02749</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td>2001-01-26</td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>09/491,933</td>
									<td>2000-01-27</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/222528-improved-system-and-method-for-implementation-of-an-echo-canceller by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 08:20:58 GMT -->
</html>
