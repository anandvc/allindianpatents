<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/203003-system-and-method-for-providing-layer-2-switching-between-wireless-access-gateway-and-packet-data-gateway-in-a-wlan-3g-interworking-system by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 02:38:01 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 203003:SYSTEM AND METHOD FOR PROVIDING LAYER 2 SWITCHING BETWEEN WIRELESS ACCESS GATEWAY AND PACKET DATA GATEWAY IN A WLAN-3G INTERWORKING SYSTEM</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">SYSTEM AND METHOD FOR PROVIDING LAYER 2 SWITCHING BETWEEN WIRELESS ACCESS GATEWAY AND PACKET DATA GATEWAY IN A WLAN-3G INTERWORKING SYSTEM</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>The present invention is related to the development of Layer2 switching within a WLAN-3G interworking system between WAG and PDG to effectively implement the data connection path between UE to PDG. This invention involves the tunnel establishment mechanism between UE and WAG. This invention solves the problem of per flow based billing, per flow based QOS per flow based traffic management and distributed traffic management system implementation in the WLAN-3G interworking system. The system for the invention comprises of a WLAN-3G capable UE, WLAN network interconnected to a 3G delivery network consisting of AAA-Server, WAG, HSS and PDG and intermediate IP nodes. The method of the invention comprises of mechanisms which solve the problems associated with current art, as mentioned below: Label Path (LP), for Layer2 switching, is established between the WAG and PDG. Using the label mechanism, based on routing information, it would be possible to have traffic management based on per flow basis, based on the load distribution information available with the controlling entity, CE shall assign a best path for both uplink and downlink. This would allow for per flow packet management. Based on location, flow and routing information available at different nodes in the proposed system, method is provided to enable distributed traffic management schemes, rather than concentrating the management decision at PDG as in case of end-to-end tunnel mechanism available in prior art.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td> <br><br>
FIELD OF TECHNOLOGY<br>
This invention relates to the area of switching within a Home PLMN (H-PLMN). Particularly, this invention relates to switching of IP Packets within a WLAN - 3G interworking H-PLMN using IPv4 based backbone. More specifically, this invention provides a system and method to perform Layer2 switching instead of conventional Layer3 switching for the transfer of IP packets within a WLAN-3G interworking system. By incorporating Layer2 switching between Wireless Access Gateway (WAG) and Packet Data Gateway (PDG), this invention provides the ability to provide<br>
•	Per flow based billing;<br>
•	Per flow based QOS control;<br>
•	Per flow based traffic management; and<br>
•	Distributed Traffic management.<br>
DESCRIPTION OF RELATED ART<br>
The 3GPP (http://www.3qpp.org) specification TS23.234, which deals with the ongoing 3GPP work related to WLAN-3G interworking, provides a system description for tunnel establishment mechanism between WLAN-3G UE and PDG over a WLAN 3G interworking system, as depicted in Figure 1.<br>
Depending on internal configuration, the UE initiates W-APN resolution and tunnel establishment with a PDG in PLMN, as illustrated in Figure 2 wherein the:<br>
1. UE performs a DNS query to resolve W-APN. The DNS response will contain one or more IP addresses of equivalent PDG's that support the requested W-APN in the PLMN according to standard DNS procedures. If the PLMN does not support the W-APN, then the DNS query returns a negative response.<br><br>
2. The UE selects a PDG from the list received in step 1, and the establishment of an end-to-end tunnel is performed between the UE and this PDG. The UE includes the W-APN and the user identity in the initial tunnel establishment request. The PDG and WAG exchange information (via the AAA Server and Proxy) in order to establish a filtering policy to allow the forwarding of tunneled packets to the PDG.<br>
LIMITATIONS<br>
Currently in a WLAN-3G interworking system, there is no mechanism for the following features:<br>
1.	Per flow based billing system;<br>
2.	Per flow based Traffic management system;<br>
3.	Distributed traffic management schemes;<br>
4.	Making use of Advantages of Layer2 switching.<br>
OBJECTS OF THE INVENTION<br>
The primary object of the invention is to provide a system and method for providing Layer2 switching in a WLAN-3G interworking system between WAG and the PDG through the IP connected intermediate nodes.<br>
It is another object of the invention to provide the mechanism by which the tunnel is established between UE and WAG.<br>
It is another object of the invention to provide the mechanism by which a label is formed between WAG and PDG based on location of UE, flow type request by UE and the routing information available at a Controlling Entity (CE). The invention also provides a mechanism of distribution of these labels and routing information for all the intermediate nodes in the chosen path between WAG and PDG.<br><br>
It is another object of the invention to provide a mechanism for per flow based billing system, per flow based traffic management system, and distributed traffic management system, by making use of Layer2 switching.<br>
SUMMARY OF THE INVENTION<br>
The present invention is related to a system that allows for Layer2 switching within a WLAN-3G interworking H-PLMN system, to solve the above mentioned problems associated with the current system having the end-to-end tunnel terminating at PDG. This would require the termination of tunnel originated from UE at WAG. From WAG to the selected PDG within the PLMN, the Layer2 switching is proposed to be used.<br>
The system for the invention comprises of a WLAN-3G capable UE, WLAN network interconnected to a 3GPP delivery network consisting of AAA-Server, WAG and PDG and intermediate IP nodes.<br>
The present invention comprises of system and method which would solve the problems associated with current art, as mentioned below.<br>
1. Label Path (LP), for Layer2 switching, is established between the WAG and PDG. Labels are generated by a Controlling Entity (CE), within PLMN, based on user identity (also referred as user-id), flow type requested and the routing information. This controlling entity is a logical functionality which performs the load distribution in the PLMN, and decides the path to be taken by each packet. This entity assigns labels for the uplink and downlink paths. Merely for the sake of discussion, this logical functionality is shown to co-exist with AAA-Server, but as such this functionality can be resident in any component reachable by WAG, PDG and WLAN. In case it does not reside along with AAA-Server; the information of labeling has to be exchanged between AAA-Server and the<br><br>
CE. These labels, as generated by the CE, are applied at the WAG and PDG. The AAA-Server receives the SLA of each user from HSS and filters these SLAs based on the flow and location, and then distributes them to all the nodes on the selected route along with the labels, which makes per flow based billing possible at WAG and PDG.<br>
2.	Using the proposed label mechanism based on routing information, it is possible to perform traffic management on per flow basis, which is not possible in the current system, which comprises of an end-to-end tunnel between UE and PDG, because it does not have a mechanism to identify a flow independently for each user.<br>
3.	Based on the load distribution information available with the controlling entity, CE shall assign a best path for both uplink and downlink. This would allow for per flow packet management. Based on location, flow type and routing information available at different nodes in the proposed system, method is provided to enable distributed traffic management schemes, rather than concentrating traffic management decision at PDG only as is the case with current art.<br>
4 Making use of Layer2 switching, compared to Layer3 switching, enables the system to have better performance, scalability and easy of implementation.<br>
Accordingly the present invention comprises a WLAN-3G interworking system for supporting Layer2 switching between WAG and PDG in a PLMN through the IP connected intermediate nodes wherein the tunnel originating from UE is terminated at WAG.<br>
Accordingly the present invention further comprises a method for supporting Layer2 switching between WAG and PDG in a PLMN through the IP connected intermediate nodes wherein the tunnel is established from UE to WAG, WAG requests the AAA-Server for Label information, AAA-Server requests a logical entity (CE) which is monitoring the network load for assigning a unique label for each UE-IP address and the flow type requested for both uplink and downlink,<br><br>
and AAA-Server distributes this information to all the intermediate and end nodes in the path between WAG and selected PDG and Label Path (LP) is established between the WAG and PDG.<br>
The other objects, features and advantages of the present invention will be apparent from ensuing the detailed description of the invention taken in conjunction with the accompanying drawings.<br>
BRIEF DESCRIPTION OF THE ACCOMPANYING DRAWINGS<br>
Figure 1 illustrates the different network elements of a WLAN-3G interworking system, involved in establishing an End-To-End tunnel between UE and PDG;<br>
Figure 2 illustrates the sequence for UE initiated Tunnel Establishment towards PDG, resulting in an End-To-End tunnel as discussed in current art 3GPP TS 22.234;<br>
Figure 3 illustrates different network elements of a WLAN-3G interworking system, involved in establishing a tunnel between UE and WAG and a Layer2 switching path between WAG and PDG.<br>
Figure 4 is the sequence diagram, where in different network entities of the 3G-WLAN interworked system interact, to enable establishment of a data path between UE and PDG, by establishing a tunnel between UE and WAG and a Layer2 switching path between WAG and the selected PDG.<br>
DETAILED DESCRIPTION OF THE INVENTION<br>
The preferred embodiments of the present invention will now be explained with reference to the accompanying drawings. It should be understood however that the disclosed embodiments are merely exemplary of the invention, which may be<br><br>
embodied in various forms. The following description and drawings are not to be construed as limiting the invention and numerous specific details are described to provide a thorough understanding of the present invention, as the basis for the claims and as a basis for teaching one skilled in the art how to make and/or use the invention. However in certain instances, well-known or conventional details are not described in order not to unnecessarily obscure the present invention in detail.<br>
The present invention provides a system and method for Layer2 switching in a WLAN-3G interworking H-PLMN system for enabling IP packet transfer between UE and external data networks.<br>
The method of the invention comprises of mechanisms of tunnel establishment from UE to WAG, WAG requesting the AAA-Server for Label information, AAA-Server requesting a logical entity (CE) which is monitoring the network load for assigning a unique label for each UE-IP address and the flow type requested for both uplink and downlink paths, and AAA-Server distributing this to all the intermediate and end nodes in the path between WAG and selected PDG. SLA for each user is filtered at the AAA-Server based on the flow-type and the location of UE and is also distributed to all the nodes in the route selected, along with the labels. In Uplink direction, WLAN-UE initiated IP packet reaches the WAG through the tunnel established between UE and WAG. WAG applies label to the IP packet and pushes it through the interworking system, via the IP connected intermediate nodes, till it reaches the PDG. In downlink direction, when an external data packet destined for a particular UE-IP address reaches PDG, a downlink label (which is given by the CE) is applied based on the flow-type and the UE-IP address. The packet traverses through the PLMN up to WAG, using Label switching, where WAG removes the label and tunnels the data packet to the local UE-IP address. This eliminates conventional Layer3 (IP) switching in the PLMN.<br>
The subsequent subsections detail the operations done by individual entities to<br><br>
effect the invention.<br>
1.	A WLAN-3G capable UE wants to connect to external IP network through WLAN-3G interworking system. WLAN UE initiates a Tunnel Establishment Request towards the WAG.<br>
2.	The functions of WAG include:<br><br>
-	Obtaining the UE information from the tunnel establishment request, the AP identity (AP id) through which the request reached WAG.<br>
-	Passing the obtained information to the AAA-Server (to which UE is attached).<br>
-	After the AAA-Server passes on information about the label and routing information for both uplink and downlink directions, the WAG maintains Routing Table (RT)s, for forwarding the packets in both directions.<br>
-	Passing on the IP addresses of UE (dynamic addressing) and PDG-IP address to WLAN UE along with tunnel identifier (tunnel ID) to be used in uplink, in the tunnel establishment response.<br>
-	Routing of packets between UE and PDG using the label switching technique in both directions using the label and routing information available.<br>
3.	The functions of PDG include:<br>
-	Allocation of remote IP address to WLAN UE requesting for tunnel establishment, through AAA-Server, in case of dynamic IP address allocation requested by UE.<br>
-	In uplink direction, removing label from the packet, and raising the packet to Layer3 and pushing it to external IP networks using Layer3 routing.<br>
-	Using the downlink label information and routing information obtained from AAA-Server, route downlink packets to UE based on destination IP address and TOS fields after applying the downlink label.<br><br>
4.  The functions of AAA server include:<br>
-	After receiving the tunnel establishment request forwarded by WAG, selection of PDG from the received W-APN requested by the WLAN-3G UE requesting for tunnel establishment.<br>
-	Forwarding the tunnel establishment request to the selected PDG and obtaining the response along with the UE-IP address in case of dynamic addressing.<br>
-	Interfacing with CE for obtaining individual labels and path information for both uplink and downlink and distributing the Label information to all the IP nodes in the uplink and downlink.<br>
-	Obtaining the SLA for each UE-IP address from the subscription information of the UE and filtering it with the flow-type requested along with the location of the UE. This filtered SLA is forwarded to all the nodes connecting the WAG and the PDG, along with the label information.<br>
5.	The functions of CE include:<br>
-	Upon request from AAA-Server, formation of Unique label corresponding to each UE-IP address, flow-type requested by UE. Separate labels are formed for both uplink and downlink routes to avoid looping.<br>
-	Maintaining/Monitoring the load distribution in the PLMN and provides routing information available for the end-points to be connected (between WAG and the selected PDG) to the requesting entity such as AAA-Server.<br>
-	Distribution of the formed label and routing information for both uplink and downlink for all the connected IP nodes between WAG and selected PDG with the help of AAA-Server.<br>
6.	The functions of UE include:<br>
Identification of WAG using W-APN.<br>
Tunnel establishment towards WAG and passing on the W-APN to WAG, to<br><br>
enable a Iayer2 path between WAG and the PDG corresponding to the W-<br>
APN.<br>
Management of the tunnel and the relation to Application initiating the tunnel<br>
based on location, flow-type using application identifiers (Id's).<br>
Operation of the Invention<br>
The invention is operated as detailed below:<br>
Establishment of Tunnel between UE and WAG and Layer2 switching path between WAG and PDG<br>
1.	In an H-PLMN, when a WLAN-3G capable UE (which is attached to an AAA-Server address) wants to establish a data path to reach a PDG, it obtains the WAG IP address through a DNS resolution for the W-APN to which it wants to establish an IP path.<br>
2.	UE initiates a tunnel establishment request to the AP and also passes the W-APN to which UE wants to establish an IP path and the WAG's IP address.<br>
3.	This request is forwarded by Access Point to the WAG on the specified interface using Diameter protocol along with AP-id, which assists WAG in identifying the location from which UE is trying to access the network.<br>
4.	WAG obtains the location of UE (i.e. from which Access point the request is forwarded). WAG forwards this information along with the W-APN information in a Label initiation request to the AAA-Server to which WLAN UE is attached. This information is carried over the specified interface over Diameter protocol between WAG and AAA-Server.<br><br>
5.	AAA-Server selects PDG based on W-APN resolution. AAA-Server forwards the tunnel establishment request to the selected PDG with the UE-ld and the W-APN. PDG sends a reply to the AAA-Server, along with an allocated IP address in case of dynamic address assignment.<br>
6.	AAA-Server interfaces to a logical entity CE, which is assumed to be monitoring the network routing information between the IP nodes in the PLMN. CE selects the best path between WAG and the selected PDG. Separate paths are selected for uplink and downlink to enable unique label for both directions. CE conveys the label information along with the uplink and downlink Label Path (LP)'s to the AAA-Server.<br>
7.	AAA-Server with help of CE assigns a unique label for each UE-IP address and the flow-type requested, from the common label space available. The number of bytes for each label and the scheme of allocation of bits in each byte of the label can be of any pattern. The scheme should be able to assist in unique labeling and also should make the label space sufficient for accommodating all users of the PLMN. For example, the label may look like a MPLS tag structure, with 20 bits for information and 3 experimental bits, rest for S bit and TTL. In this case, it is a simple assignment of the available label from the label space - (2 20 - 1). In this case, if the experimental bits are also used for the same purpose, total available space would be - (2 23 -1). Separate labels are assigned for uplink and downlink paths as separate paths are selected based on the information at AAA-Server about the loading of the IP nodes.<br>
8.	AAA-Server distributes these labels and the routing information to all the concerned nodes between WAG and the selected PDG. SLA for each user is obtained from HSS and is filtered with the location information and the flow type requested for that UE-IP address. This filtered SLA is also distributed along with the label information to each node in the uplink and downlink paths using the Diameter based protocol.<br><br>
9.	For the WAG, AAA-Server forwards (i) uplink label and next hop IP address in uplink path, (ii) downlink label and next hop address in downlink path (iii) UE and PDG IP addresses and (iv) filtered SLA to be applied, using the specified interface towards AP. AP forwards the response message towards UE using the WLAN specific protocol . WAG forms two routing tables (RT's) one for uplink and one for downlink. Uplink RT contains mapping information between a L3 End Point Identifier (LEID), local IP address of the UE, next hop IP address, the label to be applied, and the interface through which this needs to be sent. Downlink RT consists of the label, the LEID and the local IP address of the UE (to be used while tunneling the packet to UE).<br>
10.	For Intermediate nodes between WAG and PDG in the routing paths selected for both uplink and downlink, AAA-Server forwards (i) uplink label and next hop IP address in uplink path, (ii) downlink label and next hop address in downlink path. Using these, all intermediate nodes form 2 RT's, uplink RT containing a mapping between label and the next hop-IP address and the interface on which this needs to be sent with the same label, downlink RT containing a mapping between label in the incoming packet to that of the interface onto which it needs to be sent with same label to reach the next hop IP address.<br>
11.	For PDG, AAA-Server forwards label information, for each UE-IP address and flow-type of the user for that label, to be used in downlink routing of packets, using the specified interface. PDG applies masking on TOS field of each IP packet received. Based on the flow-type information available in TOS field and the UE-IP address, PDG labels the packets and switch them using Layer2 switching towards WAG.<br>
12.	WAG upon receiving the label information along with IP addresses of UE and PDG from AAA-Server, sends a Tunnel Establishment Response<br><br>
towards the UE, along with a LEID to be used by UE for uplink tunneling, through AP on the specified interface.<br>
13.	UE upon reception of Tunnel Establishment response, obtains the remote<br>
IP address assigned by PDG (incase of dynamic IP address assignment)<br>
and also IP address of the PDG.<br>
14.	Packet transfer between UE and PDG is done through the Layer3 tunnel<br>
between UE and WAG and through Layer2 (label) switching between WAG<br>
and PDG.<br>
Uplink Packet transfer from UE to PDG<br>
For an uplink packet transfer from UE, UE tunnels the packet towards PDG, using local IP addresses of the tunnel between UE and WAG. WAG upon reception of these packets, maps the LEID with the label assigned for uplink, get the IP packet, incorporates this label between Layer3 and Layer2 header and pushes to the next hop's IP address through the interface defined. Intermediate nodes make use of the label to next hop IP address mapping mechanisms to Layer2 forward the packets between nodes till it reaches the final end node, i.e., the PDG. PDG removes the label and switch packets according to Layer3 IP addresses.<br>
Downlink Packet transfer from PDG to UE<br>
To effect downlink packet transfer, the PDG filters out TOS field of each IP Packet received to obtain the flow-type and uses that along with IP address of the destination as the key to find out the label to be applied. The label is incorporated between Layer3 and Layer2 header and pushed into the PLMN. This packet is label switched by all intermediate nodes using the label mapping Routing Table (RT)'s till it reaches WAG. WAG uses the label mapping Routing Table (RT) to obtain the local IP address of the UE and the LEID to be<br><br>
associated with this flow towards the UE. At WAG, the Label is removed, IP packet is extracted and then the WAG tunnels the IP packet towards UE using the local IP address of the UE and LEID.<br>
This mechanism allows for dynamic incorporation of any intermediate nodes in the network, wherein the monitoring CE with the help of AAA-Server updates all the corresponding intermediate nodes connecting the newly added node. Newly added node has to be updated with the labels corresponding to this node and the corresponding next hop IP addresses along with the filtered SLA. This reduces the complexity of addition of a new node and allows for scalable network architecture. If the label structure followed is similar to MPLS, then this would allow an easy incorporation of typical MPLS nodes available into the PLMN, differing only in the label distribution mechanism.<br>
An illustrative Example for the operation of the invention:<br>
Figure 3 shows the system proposed in this invention. The system consists of an interworking 3G-WLAN system. WLAN Access networks are connected to the Home PLMN (H-PLMN) through the WAG. The system shown in Figure 3 consists of PLMN with both 3G domain network entities like HSS, SGSN and GGSN and also the Interworking WLAN entities like AAA server, PDG and WAG. WAG and PDG are connected through intermediate routers (IR). In the proposed system, WAGs, PDGs and IRs are capable of L2 switching and forms the L2 switching domain. The UE transmit and receive the packets through the tunnel initiated towards the WAG. The WAG forwards the packets to the UE through the tunnel and the packets to the PDG through L2 switching. All the intermediate nodes forwards the packet through L2 switching according to the information received from the CE. In our proposed system AAA does the functionality of the CE and distributes the label information to all the nodes in the uplink and down link path and also to the PDG and the WAG. As shown in the Figure, LP1 is the uplink label path and LP2 is the downlink label path.<br><br>
An illustrative example for operating the invention is given here. The message flows/sequence is illustrated in Figure 4. The example shows the CE to co-exist with AAA-Server, though it is not mandatory. The following steps briefly explain the operation of the example for the system shown in Figure 3.<br>
1.	In a H-PLMN, when a WLAN-3G capable UE (which is attached to a AAA-Server address) wants to establish a data path to reach the PDG, it gets the WAG IP address through a DNS resolution for that W-APN (to which it wants to establish an IP path).<br>
2.	UE initiates a Tunnel Establishment Request and sends it to the AP (to which it is associated), with the parameters such as {UE-ld, W-APN, QOS, LEID (d), flow-type, WAG's IP address ..}.<br>
3.	AP forwards the Tunnel Establishment Request along with the AP-id, towards WAG using the specified interface.<br>
4.	WAG finds the AAA-Server serving this UE-ld (to which UE is WLAN attached during registration phase), and sends a Label Initiation Request (LIR) to AAA-Server with parameters {UE-ld, W-APN, QOS, flow-type, AP-id,..}.<br>
5.	Load distribution and Routing Information within PLMN is assumed to be maintained by the logical entity CE, for a given network configuration. CE is assumed to maintain complete hop-to-hop route information between WAG and any given PDG in the PLMN.<br>
AAA-Server finds the PDG from the given APN and initiates a Tunnel Establishment Request towards that PDG, using the specified interface.<br>
6.	For dynamic IP addressing case, PDG allocates WLAN UE's remote IP<br>
address and gives a response to AAA-Server TEResponse along with UE-IP<br><br>
address. For static IP addressing case, TEResponse does not contain UE-IP address .<br>
7.	AAA-Server obtains the routing information (LP's) for uplink and downlink along with the labels (Individual labels for uplink and downlink is assigned, for each flow type requested by UE-IP address) from the CE. AAA-Server now has UE-IP address, PDG-IP address, flow-type, location information of the UE, routing information for uplink and downlink paths (LP's) from WAG to selected PDG and the labels. Separate routes for uplink and downlink are necessary to identify labels in the network, to route unambiguously and to avoid labeling loops.<br>
8.	AAA-Server then forwards the necessary information (Label distribution).to each node in the path of the label. SLA of the user (obtained from the HSS) is filtered with the location of the UE and the flow type requested by the UE and is also passed along with the label information. The individual information passed for each node is described below. In the example considered, it has been assumed that there is one intermediate IP node through which WAG and the selected PDG are connected.<br>
8.1. WAG is informed about label path with {UE-ID address, PDG-IP address, Uplink-Label-lnformation, Downlink-Label-lnfprmation, SLA..} 8.1.1. Uplink-Label-Information has {ul-label, next-hop IP address,..} The uplink RT formed at WAG has the below structure<br><br>
For example, when the WAG receives the tunneled packet from the UE destined to the PDG, the WAG looks into the uplink routing table whether an entry for that<br><br>
UE Local IP address exists. If the WAG found the entry of the UE local IP address in the table, then the WAG applies the filtering policy according to the SLA. Then the WAG does the push operation by inserting the ul-label into the packet and transmits the packet through the interface mentioned in the table.<br>
Downlink-Label-lnformation has {dl-label,..}. using which WAG forms the downlink RT , which has the below structure along with the LEID to be used by UE.<br><br>
For example, when the WAG receives the labeled packet from the intermediate node of the core network, destined to the UE, the WAG looks into the downlink routing table whether an entry for that downlink label exists. If the WAG found the entry of the down link label in the table, then the WAG applies the filtering policy according to the SLA. Then the WAG does the pop operation by the removing the SIM from the network from the packet and transmits the IP packet after checking the UE local IP address matches the RT entry.<br>
8.2. AAA-Server sends information to the intermediate node with {Uplink-Label-lnformation, Downlink-Label-lnformation, SLA..} 8.2.1. Uplink-Label-Information  has {ul-label,   next-hop-IP  address,   ..}. The uplink RT formed at the node has the below structure:<br><br>
The structure contains the uplink label with the corresponding interface connecting the next node and the SLA for the corresponding flow.<br><br>
8.2.2. Downlink-Label-Information has {dl-label, next-hop-IP address,.. The downlink RT formed at the node has the below structure:<br><br>
The structure contains the down link label with the corresponding interface and the SLA of the flow.<br>
8.3. AAA-Server sends information to the selected PDG with<br>
{UE-IP address, Downlink-Label-lnformation, flow-type, SLA..}.<br>
8.3.1. Downlink-Label-Information has {dl-label, next-hop-IP address,...}. PDG uses IP address and flow-type of the label as the filtering attributes to identify a given path towards a UE. The downlink RT formed at the PDG has the below structure;<br><br>
The structure contains the UE IP address and corresponding flow type with the downlink label and SLA.<br>
For uplink path, there is no information required as PDG removes the label and just raises the packet to IP level and forwards based on IP routing table.<br>
9. After Labels are distributed by the AAA-Server, to all nodes connected to the path from the WAG to the selected PDG, WAG sends a Tunnel Establishment Response towards UE through AP. Tunnel Establishment Response contains {QOS(accepted), UE-IP address ( dynamic ), PDG-IP<br><br>
address, LEID( uplink),..}. AP fonA/ards the response message to the UE using the WLAN specific protocol.<br>
10. After tunnel is established, packet transfer happens between UE and WAG using the tunnel mechanism established. Between WAG and PDG, the label switching technique is used.<br>
10.1.	Life cycle of an uplink packet from UE till PDG:<br>
10.1.1.	UE tunnels the IP packet using its local IP address, with LEID of UE to WAG Tunnel.<br>
10.1.2.	WAG refers the uplink-label mapping RT in 8.1.1. , uses UE local IP address and LEID as the key to the RT and affixes a label between L2 and L3 header, and pushes the packet to the interface to be sent to reach next-Hop-IP addresses after applying the filtered SLA.<br>
10.1.3.	Intermediate node upon receiving a packet with a label refers to the uplink-label RT in 8.2.1., using Label as the key to find out to which interface it needs to be pushed through and affixes the same label to push the packet upstream after applying the filtered SLA.<br>
10.1.4.	PDG upon receiving the labeled packet removes the label and route the packet based on L3 addressing.<br>
10.2.	Life cycle of a downlink packet from PDG till UE:<br>
10.2.1.	PDG upon receiving the IP packet uses the TOS field to<br>
extract the flow-type information of the packet.  After flow-type information is derived from TOS field, it along with UE remote IP<br><br>
address is used as the key to the downlink-label RT and affixes the label obtained from the RT between L2 and L3 header and pushes the packet through the interface in the RT in order to reach the next-hop IP address after applying the filtered SLA.<br>
10.2.2.	Intermediate node, upon receiving the packet in downstream, refers to the downlink-label RT, uses label as the key to find the interface through which this packet has to be routed, affixes the same label and sends through the interface, after applying the filtered SLA.<br>
10.2.3.	WAG upon receiving a downlink packet refers to the downlink-label RT, and uses the label as the key to find the local UE IP address and the TE-ID to which the packet is destined. The downlink label is removed and the IP packet is again encapsulated in the tunnel between WAG and UE and pushed through the tunnel.<br>
An application in UE, assumed to be supplying flow-type and managing LEID's for uplink and downlink, appropriately processes the packet and pass it on to the corresponding application.<br>
It will also be obvious to those skilled in the art that other control methods and apparatuses can be derived from the combinations of the various methods and apparatuses of the present invention as taught by the description and the accompanying drawings and these shall also be considered within the scope of the present invention. Further, description of such combinations and variations is therefore omitted above. It should also be noted that the host for storing the applications include but not limited to a microchip, microprocessor, handheld communication device, computer, rendering device or a multi function device.<br>
Although the present invention has been fully described in connection with the<br><br>
preferred embodiments thereof with reference to the accompanying drawings, it is to be noted that various changes and modifications are possible and are apparent to those skilled in the art. Such changes and modifications are to be understood as included within the scope of the present invention as defined by the appended claims unless they depart therefrom.<br><br>
GLOSSARY OF TERMS AND DEFINITONS THEREOF<br>
3GPP: 3rd Generation Partnership Project<br>
AAA: Authentication, Authorization and Accounting<br>
AP: Wireless Local Area Network (WLAN) Access Point<br>
AP-id: Wireless Local Area Network (WLAN) Access Point Identity<br>
APN: Access Point Name<br>
CE: Controlling Entity<br>
DNS: Domain Name Server<br>
H-PLMN: Home Public Land Mobile Network (PLMN)<br>
HSS: Home Subscription Server<br>
L2: Layer 2<br>
L3: Layer 3<br>
LEID: L3 End Point Identifier<br>
LP: Label Path<br>
PDG: Packet Data Gateway<br>
QOS: Quality of Service<br>
RT: Routing Table<br>
SLA: Service Level Agreement<br>
TH: Tunnel Header<br>
TOS: Type of Service<br>
TTL: Time to Live<br>
User terminal: the end user equipment e.g., the Mobile Station (MS) or User<br>
Equipment (UE).<br>
V-PLMN: Visited Public Land Mobile Network<br>
WAG: Wireless Access Gateway<br>
WLAN UE: The WLAN UE is the UE (equipped with UICC card including (U)SIM)<br>
utilized by a 3GPP subscriber to access the WLAN interworking.<br>
WLAN UE's remote IP address: An address used in the data packet encapsulated<br>
by the WLAN UE-initiated tunnel. It represents the identity of the WLAN UE in the<br>
network which the WLAN UE is accessing.<br>
W-APN: WLAN APN<br>
WLAN AN: WLAN Access Network<br><br><br><br><br>
WE CLAIM<br>
1.	A WLAN-3G interworking system for supporting Layer2 switching between WAG and PDG in a PLMN through the IP connected intermediate nodes wherein the tunnel originating from UE is terminated at WAG.<br>
2.	A method for supporting Layer2 switching between WAG and PDG in a PLMN through the IP connected intermediate nodes wherein the tunnel is established from UE to WAG, WAG requests the AAA-Server for Label information, AAA-Server requests a logical entity (CE) which is monitoring the network load for assigning a unique label for each UE-IP address and the flow type requested for both uplink and downlink, and AAA-Server distributes this information to all the intermediate and end nodes in the path between WAG and selected PDG and Label Path (LP) is established between the WAG and PDG.<br>
3.	A method for supporting Layer2 switching between WAG and PDG in a PLMN through the IP connected intermediate nodes as claimed in claim 2, wherein SLA for each user is filtered at AAA-Server based on the flow-type and the location of UE and is also distributed to all the nodes in the route selected, along with the labels.<br>
4.	A method for supporting Layer2 switching between WAG and PDG in a PLMN through the IP connected intermediate nodes as claimed in claim 2, wherein in Uplink, WLAN-UE initiated IP packet reaches WAG through the tunnel established between UE and WAG; WAG applies label to the IP packet and pushes it through the intermediate router to PDG.<br>
5.	A method for supporting Layer2 switching between WAG and PDG in a PLMN through the IP connected intermediate nodes as claimed in claim 2, wherein in downlink, when an external data packet destined for a particular UE-IP address reaches PDG, a downlink label which is given by the CE, is applied based on the flow-type and the UE-IP address; the packet traverses through the PLMN up to WAG, using Label switching, where WAG removes the label and tunnels the data packet to the local UE-IP address thereby eliminating Layer3 (IP) switching in the<br><br>
PLMN.<br>
6.	A method for supporting Layer 2 switching within WLAN-3G interworking PLMN<br>
comprising:<br>
•	Tunnel initiation by the WLAN-UE to WAG;<br>
•	WAG requesting AAA-Server for Label and routing information;<br>
•	AAA-Server with the help of a logical entity CE, forming a unique label for downlink and uplink distribution of these labels and relevant routing information to all the nodes in the path between WAG and PDG;WAG sending Tunnel Initiation Response to UE.<br>
•	Individual nodes like WAG and PDG maintain RT's for mapping labels with routing information;<br>
•	IP Packets to be routed between WAG and PDG, using these mapping RT's, avoiding L3 switching.<br><br>
7.	A method for supporting Layer2 switching between WAG and PDG in a PLMN wherein distributed traffic management on per flow basis label is achieved using the label mechanism, based on routing information in that Label Path is established between the WAG and PDG and Labels are generated by a Controlling Entity (CE), within PLMN, based on user-id, flow type requested and the routing information.<br>
8.	A method for supporting Layer2 switching between WAG and PDG in a PLMN wherein improved per flow packet management is achieved based on the load distribution information available with the controlling entity in that the CE assigns a best path for both uplink and downlink thereby allowing location, flow and routing information available at different nodes in the proposed distributed traffic management system,<br>
9.	A system for supporting Layer2 switching between WAG and PDG in a PLMN substantially as herein described particularly with reference to the drawings.<br>
10.	A method for supporting Layer2 switching between WAG and PDG in a PLMN<br><br>
substantially as herein described particularly with reference to the drawings.<br><br></td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDk5LWNoZS0yMDA0LWFic3RyYWN0LnBkZg==" target="_blank" style="word-wrap:break-word;">099-che-2004-abstract.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDk5LWNoZS0yMDA0LWNsYWltcyBmaWxlZC5wZGY=" target="_blank" style="word-wrap:break-word;">099-che-2004-claims filed.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDk5LWNoZS0yMDA0LWNsYWltcyBncmFudGVkLnBkZg==" target="_blank" style="word-wrap:break-word;">099-che-2004-claims granted.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDk5LWNoZS0yMDA0LWNvcnJlc3BvbmRuZWNlLW90aGVycy5wZGY=" target="_blank" style="word-wrap:break-word;">099-che-2004-correspondnece-others.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDk5LWNoZS0yMDA0LWNvcnJlc3BvbmRuZWNlLXBvLnBkZg==" target="_blank" style="word-wrap:break-word;">099-che-2004-correspondnece-po.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDk5LWNoZS0yMDA0LWRlc2NyaXB0aW9uKGNvbXBsZXRlKSBmaWxlZC5wZGY=" target="_blank" style="word-wrap:break-word;">099-che-2004-description(complete) filed.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDk5LWNoZS0yMDA0LWRlc2NyaXB0aW9uKGNvbXBsZXRlKSBncmFudGVkLnBkZg==" target="_blank" style="word-wrap:break-word;">099-che-2004-description(complete) granted.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDk5LWNoZS0yMDA0LWRyYXdpbmdzLnBkZg==" target="_blank" style="word-wrap:break-word;">099-che-2004-drawings.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDk5LWNoZS0yMDA0LWZvcm0gMS5wZGY=" target="_blank" style="word-wrap:break-word;">099-che-2004-form 1.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDk5LWNoZS0yMDA0LWZvcm0gMTkucGRm" target="_blank" style="word-wrap:break-word;">099-che-2004-form 19.pdf</a></p>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/pdfviewer.aspx?AppNo=MDk5LWNoZS0yMDA0LWZvcm0gMjYucGRm" target="_blank" style="word-wrap:break-word;">099-che-2004-form 26.pdf</a></p>
		<br>
		<div class="pull-left">
			<a href="203002-a-juice-extractor-attachment-for-a-mixie.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="203004-polyvinyl-chloride-pipe-joint-system-with-coupler-and-wire-locking-system.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>203003</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>99/CHE/2004</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>36/2010</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>03-Sep-2010</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>07-Nov-2006</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>09-Feb-2004</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>SAMSUNG INDIA SOFTWARE OPERATIONS PRIVATE LIMITED</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>BAGMANE LAKEVIEW BLOCK &#x27;B&#x27; NO 66/1 BAGMANE TECH PARK C V RAMAN NAGAR BYRASANDRA BANGALORE 560093</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>DR. MANOJ CHOUDHARY</td>
											<td>BAGMANE LAKEVIEW BLOCK &#x27;B&#x27; NO 66/1 BAGMANE TECH PARK C V RAMAN NAGAR BYRASANDRA BANGALORE 560093</td>
										</tr>
										<tr>
											<td>2</td>
											<td>VENKATESWAR JEEDIGUNTA</td>
											<td>BAGMANE LAKEVIEW BLOCK &#x27;B&#x27; NO 66/1 BAGMANE TECH PARK C V RAMAN NAGAR BYRASANDRA BANGALORE 560093</td>
										</tr>
										<tr>
											<td>3</td>
											<td>BALAJI SRINIVAS HOLUR</td>
											<td>BAGMANE LAKEVIEW BLOCK &#x27;B&#x27; NO 66/1 BAGMANE TECH PARK C V RAMAN NAGAR BYRASANDRA BANGALORE 560093</td>
										</tr>
										<tr>
											<td>4</td>
											<td>CHOUDHARY DR. MANOJ</td>
											<td>EMPLOYED AT SAMSUNG ELECTRONICS CO LTD INDIA SOFTWARE OPERATIONS (SISO) J.P. TECHNO PARK 3/1, MILLERS ROAD BANGALORE 560 052</td>
										</tr>
										<tr>
											<td>5</td>
											<td>SONG, DR. OSOK</td>
											<td>EMPLOYED AT SAMSUNG ELECTRONICS CO LTD TELECOMMUNICATIONS R&amp;D CENTER 416 MEETANDONG YEONGTONG-GU SUWON-SI 442-742</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>H04L12/66</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>N/A</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td></td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td></td>
									<td></td>
								    <td>NA</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/203003-system-and-method-for-providing-layer-2-switching-between-wireless-access-gateway-and-packet-data-gateway-in-a-wlan-3g-interworking-system by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Apr 2024 02:38:02 GMT -->
</html>
