<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from www.allindianpatents.com/patents/272007-method-for-controlling-a-powertrain-system-based-on-penalty-costs by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 04 Apr 2024 23:56:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Patents. 272007:METHOD FOR CONTROLLING A POWERTRAIN SYSTEM BASED ON PENALTY COSTS</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="cYcP52B8zyTWKbLwby2YPh9z/gvY/RLjWOwY4YXkiXg=" name="csrf-token" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../assets/application-e80cf34975c5b1730c80b2f7170e7d26.css" media="all" rel="stylesheet" type="text/css" />

  </head>
  <body>

    <div class="navbar navbar-fluid-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">Indian Patents</a>
          <div class="container-fluid nav-collapse">
            <ul class="nav">
              <li><a href="../recently-granted.html">Recently Granted Patents</a></li>
              <li><a href="../recently-published.html">Recently Published Patents</a></li>
            </ul>
            <form id="gform" class="navbar-search pull-right" action="https://www.google.com/search" method="get" target="_blank" onsubmit="document.getElementById('gform').q.value='site:http://www.allindianpatents.com '+document.getElementById('gform').q.value">
                <input type="text" name="q" id="q" class="search-query" placeholder="Search" onclick="this.value=''" autocomplete="off">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">

          <style>
          .allindianpatents-top { width: 320px; height: 50px; }
          @media(min-width: 500px) { .allindianpatents-top { width: 468px; height: 60px; } }
          @media(min-width: 800px) { .allindianpatents-top { width: 728px; height: 90px; } }
          </style>
          <center>
          </center>
          
          <div class="row-fluid">
	<div class="span8">

		<table class="table">
			<tr>
				<th>Title of Invention</th>
				<td><h1 style="font-size:large;">METHOD FOR CONTROLLING A POWERTRAIN SYSTEM BASED ON PENALTY COSTS</h1></td>
			</tr>
			<tr>
				<th>Abstract</th>
				<td>A method for controlling a powertrain system includes monitoring an operator torque request, selecting a candidate powertrain system operating point, and determining a preferred engine torque range, a preferred torque machine torque range, and a preferred energy storage device output power range. The method further includes determining an engine torque, a torque machine torque, and an energy storage device output power based upon the operator torque request and the candidate powertrain system operating point. Power costs for operating the powertrain at the candidate powertrain system operating point are determined based on the determined engine torque, the determined torque machine torque, and the determined energy storage device output power range. Penalty costs are determined relative to the preferred engine torque range, the preferred torque machine torque range, and the preferred energy storage device output power range for operating the powertrain at the candidate powertrain system operating point. And, an operating cost for operating the powertrain at the candidate powertrain system operating point is determined based on the power costs and the penalty costs.</td>
			</tr>
		</table>

					<style>
					.allindianpatents-post-abstract { width: 320px; height: 50px; }
					@media(min-width: 880px) { .allindianpatents-post-abstract { width: 468px; height: 60px; } }
					@media(min-width: 1267px) { .allindianpatents-post-abstract { width: 728px; height: 90px; } }
					</style>
					<center>
					<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
					<!-- AllIndianPatents-post-abstract -->
					<ins class="adsbygoogle allindianpatents-post-abstract"
					     style="display:inline-block"
					     data-ad-client="ca-pub-7914358224572760"
					     data-ad-slot="9152759240"></ins>
					<script>
					(adsbygoogle = window.adsbygoogle || []).push({});
					</script>					
					</center>

		<table class="table">
			<tr>
				<th>Full Text</th>
				<td>METHOD FOR CONTROLLING A POWERTRAIN SYSTEM BASED ON PENALTY COSTS<br>
CROSS REFERENCE TO RELATED APPLICATION<br>
[0001] This application claims the benefit of U.S. Provisional Application<br>
No. 60/985,258 filed on 11/04/2007 which is hereby incorporated herein by<br>
reference.<br>
TECHNICAL FIELD<br>
[0002] This disclosure is related to power actuator control within a<br>
powertrain system.<br>
BACKGROUND<br>
[0003] The statements in this section merely provide background<br>
information related to the present disclosure and may not constitute prior art.<br>
[0004] Known powertrain architectures include torque-generative devices,<br>
including internal combustion engines and electric machines, which transmit<br>
torque through a transmission device to an output member. One exemplary<br>
powertrain includes a two-mode, compound-split, electro-mechanical<br>
transmission which utilizes an input member for receiving motive torque from<br>
a prime mover power source, preferably an internal combustion engine, and an<br>
output member. The output member can be operatively connected to a<br>
driveline for a motor vehicle for transmitting tractive torque thereto. Electric<br>
machines, operative as motors or generators, generate a torque input to the<br>
transmission, independently of a torque input from the internal combustion<br>
<br>
 <br>
engine. The electric machines may transform vehicle kinetic energy,<br>
transmitted through the vehicle driveline, to electrical energy that is storable in<br>
an electrical energy storage device. A control system monitors various inputs<br>
from the vehicle and the operator and provides operational control of the<br>
powertrain, including controlling transmission operating state and gear<br>
shifting, controlling the torque-generative devices, and regulating the electrical<br>
power interchange among the electrical energy storage device and the electric<br>
machines to manage outputs of the transmission, including torque and<br>
rotational speed.<br>
SUMMARY<br>
[0005] A powertrain system includes an engine, a torque machine, a<br>
transmission device and an energy storage device, the transmission device<br>
configured to transfer power among the engine, the torque machine and an<br>
output member to generate an output torque. A method for controlling the<br>
powertrain system includes monitoring an operator torque request, selecting a<br>
candidate powertrain system operating point, and determining a preferred<br>
engine torque range, a preferred torque machine torque range, and a preferred<br>
energy storage device output power range. The method further includes<br>
determining an engine torque, a torque machine torque, and an energy storage<br>
device output power based upon the operator torque request and the candidate<br>
powertrain system operating point. Power costs for operating the powertrain<br>
at the candidate powertrain system operating point are determined based on<br>
the determined engine torque, the determined torque machine torque, and the<br>
determined energy storage device output power range. Penalty costs are<br>
<br>
 <br>
determined relative to the preferred engine torque range, the preferred torque<br>
machine torque range, and the preferred energy storage device output power<br>
range for operating the powertrain at the candidate powertrain system<br>
operating point. And, an operating cost for operating the powertrain at the<br>
candidate powertrain system operating point is determined based on the power<br>
costs and the penalty costs.<br>
BRIEF DESCRIPTION OF THE DRAWINGS<br>
[0006] One or more embodiments will now be described, by way of<br>
example, with reference to the accompanying drawings, in which:<br>
[0007] Fig. 1 is a schematic diagram of an exemplary hybrid powertrain, in<br>
accordance with the present disclosure;<br>
[0008] Fig. 2 is a schematic diagram of an exemplary architecture for a<br>
control system and hybrid powertrain, in accordance with the present<br>
disclosure;<br>
[0009] Figs. 3 - 9 are schematic flow diagrams of a control scheme, in<br>
accordance with the present disclosure;<br>
[0010] Fig. 10 is a schematic power flow diagram, in accordance with the<br>
present disclosure; and<br>
[0011] Fig. 11 depicts a penalty cost determination scheme, in accordance<br>
with the present disclosure.<br>
DETAILED DESCRIPTION<br>
 <br>
[0012] Referring now to the drawings, wherein the showings are for the<br>
purpose of illustrating certain exemplary embodiments only and not for the<br>
purpose of limiting the same, Figs. 1 and 2 depict an exemplary electro-<br>
mechanical hybrid powertrain system. The exemplary electro-mechanical<br>
hybrid powertrain system in accordance with the present disclosure is depicted<br>
in Fig. 1, comprising a two-mode, compound-split, electro-mechanical hybrid<br>
transmission 10 operatively connected to an engine 14 and torque generating<br>
machines comprising first and second electric machines ('MG-A') 56 and<br>
('MG-B') 72. The engine 14 and first and second electric machines 56 and 72<br>
each generate mechanical power which can be transferred to the transmission<br>
10. The power generated by the engine 14 and the first and second electric<br>
machines 56 and 72 and transferred to the transmission 10 is described in<br>
terms of input and motor torques, referred to herein as TI, TA, and TB<br>
respectively, and speed, referred to herein as NI, NA, and NB, respectively.<br>
[0013] The exemplary engine 14 comprises a multi-cylinder internal<br>
combustion engine selectively operative in several states to transfer torque to<br>
the transmission 10 via an input shaft 12, and can be either a spark-ignition or<br>
a compression-ignition engine. The engine 14 includes a crankshaft (not<br>
shown) operatively coupled to the input shaft 12 of the transmission 10. A<br>
rotational speed sensor 11 monitors rotational speed of the input shaft 12.<br>
Power output from the engine 14, comprising rotational speed and engine<br>
torque, can differ from the input speed NI and the input torque TI to the<br>
transmission 10 due to placement of torque-consuming components on the<br>
input shaft 12 between the engine 14 and the transmission 10, e.g.. a hydraulic<br>
pump (not shown) and/or a torque management device (not shown).<br>
<br>
 <br>
[0014] The exemplary transmission 10 comprises three planetary-gear sets<br>
24, 26 and 28, and four selectively engageable torque-transferring devices, i.e.,<br>
clutches C1 70, C2 62, C3 73, and C4 75. As used herein, clutches refer to<br>
any type of friction torque transfer device including single or compound plate<br>
clutches or packs, band clutches, and brakes, for example. A hydraulic control<br>
circuit 42, preferably controlled by a transmission control module (hereafter<br>
TCM') 17, is operative to control clutch states. Clutches C2 62 and C4 75<br>
preferably comprise hydraulically-applied rotating friction clutches. Clutches<br>
C1 70 and C3 73 preferably comprise hydraulically-controlled stationary<br>
devices that can be selectively grounded to a transmission case 68. Each of<br>
the clutches C1 70, C2 62, C3 73, and C4 75 is preferably hydraulically<br>
applied, selectively receiving pressurized hydraulic fluid via the hydraulic<br>
control circuit 42.<br>
[0015] The first and second electric machines 56 and 72 preferably comprise<br>
three-phase AC machines, each including a stator (not shown) and a rotor (not<br>
shown), and respective resolvers 80 and 82. The motor stator for each<br>
machine is grounded to an outer portion of the transmission case 68, and<br>
includes a stator core with coiled electrical windings extending therefrom.<br>
The rotor for the first electric machine 56 is supported on a hub plate gear that<br>
is operatively attached to shaft 60 via the second planetary gear set 26. The<br>
rotor for the second electric machine 72 is fixedly attached to a sleeve shaft<br>
hub 66.<br>
[0016] Each of the resolvers 80 and 82 preferably comprises a variable<br>
reluctance device including a resolver stator (not shown) and a resolver rotor<br>
(not shown). The resolvers 80 and 82 are appropriately positioned and<br>
<br>
 <br>
assembled on respective ones of the first and second electric machines 56 and<br>
72. Stators of respective ones of the resolvers 80 and 82 are operatively<br>
connected to one of the stators for the first and second electric machines 56<br>
and 72. The resolver rotors are operatively connected to the rotor for the<br>
corresponding first and second electric machines 56 and 72. Each of the<br>
resolvers 80 and 82 is signally and operatively connected to a transmission<br>
power inverter control module (hereafter 'TPIM') 19, and each senses and<br>
monitors rotational position of the resolver rotor relative to the resolver stator,<br>
thus monitoring rotational position of respective ones of first and second<br>
electric machines 56 and 72. Additionally, the signals output from the<br>
resolvers 80 and 82 are interpreted to provide the rotational speeds for first<br>
and second electric machines 56 and 72, i.e., NA and NB, respectively.<br>
[0017] The transmission 10 includes an output member 64, e.g. a shaft,<br>
which is operably connected to a driveline 90 for a vehicle (not shown), to<br>
provide output power to the driveline 90 that is transferred to vehicle wheels<br>
93, one of which is shown in Fig. 1. The output power at the output member<br>
64 is characterized in terms of an output rotational speed No and an output<br>
torque To. A transmission output speed sensor 84 monitors rotational speed<br>
and rotational direction of the output member 64. Each of the vehicle wheels<br>
93 is preferably equipped with a friction brake 94 and a sensor (not shown I<br>
adapted to monitor wheel speed, VSS-WHL, the output of which is monitored by<br>
a control module of a distributed control module system described with<br>
respect to Fig. 2, to determine vehicle speed, and absolute and relative wheel<br>
speeds for braking control, traction control, and vehicle acceleration<br>
management.<br>
<br>
 <br>
[0018] The input torque from the engine 14 and the motor torques from the<br>
first and second electric machines 56 and 72 (TI, TA, and TB respectively) are<br>
generated as a result of energy conversion from fuel or electrical potential<br>
stored in an electrical energy storage device (hereafter 'ESD') 74. The ESD<br>
74 is high voltage DC-coupled to the TPIM 19 via DC transfer conductors 27.<br>
The transfer conductors 27 include a contactor switch 38. When the contactor<br>
switch 38 is closed, under normal operation, electric current can flow between<br>
the ESD 74 and the TPIM 19. When the contactor switch 38 is opened electric<br>
current flow between the ESD 74 and the TPIM 19 is interrupted. The TPIM<br>
19 transmits electrical power to and from the first electric machine 56 by<br>
transfer conductors 29, and the TPIM 19 similarly transmits electrical power<br>
to and from the second electric machine 72 by transfer conductors 31 to meet<br>
the torque commands for the first and second electric machines 56 and 72 in<br>
response to the motor torque commands TA and TB- Electrical current is<br>
transmitted to and from the ESD 74 in accordance with whether the ESD 74 is<br>
being charged or discharged.<br>
[0019] The TPIM 19 includes the pair of power inverters (not shown) and<br>
respective motor control modules (not shown) configured to receive the motor<br>
torque commands and control inverter states therefrom for providing motor<br>
drive or regeneration functionality to meet the commanded motor torques TA<br>
and TB. The power inverters comprise known complementary three-phase<br>
power electronics devices, and each includes a plurality of insulated gate<br>
bipolar transistors (not shown) for converting DC power from the ESD 74 to<br>
AC power for powering respective ones of the first and second electric<br>
machines 56 and 72, by switching at high frequencies. The insulated gate<br>
<br>
 <br>
bipolar transistors form a switch mode power supply configured to receive<br>
control commands. There is typically one pair of insulated gate bipolar<br>
transistors for each phase of each of the three-phase electric machines. States<br>
of the insulated gate bipolar transistors are controlled to provide motor drive<br>
mechanical power generation or electric power regeneration functionality.<br>
The three-phase inverters receive or supply DC electric power via DC transfer<br>
conductors 27 and transform it to or from three-phase AC power, which is<br>
conducted to or from the first and second electric machines 56 and 72 for<br>
operation as motors or generators via transfer conductors 29 and 31<br>
respectively.<br>
[0020] Fig. 2 is a schematic block diagram of the distributed control module<br>
system. The elements described hereinafter comprise a subset of an overall<br>
vehicle control architecture, and provide coordinated system control of the<br>
exemplary hybrid powertrain described in Fig. 1. The distributed control<br>
module system synthesizes pertinent information and inputs, and executes<br>
algorithms to control various actuators to meet control objectives, including<br>
objectives related to fuel economy, emissions, performance, drivability, and<br>
protection of hardware, including batteries of ESD 74 and the first and second<br>
electric machines 56 and 72. The distributed control module system includes<br>
an engine control module (hereafter 'ECM') 23, the TCM 17, a battery pack<br>
control module (hereafter 'BPCM') 21, and the TPIM 19. A hybrid control<br>
module (hereafter 'HCP') 5 provides supervisory control and coordination of<br>
the ECM 23, the TCM 17, the BPCM 21, and the TPIM 19. A user interface<br>
('UI') 13 is operatively connected to a plurality of devices through which a<br>
vehicle operator controls or directs operation of the electro-mechanical hybrid<br>
<br>
 <br>
powertrain. The devices include an accelerator pedal 113 ('AP'), an operator<br>
brake pedal 112 ('BP'), a transmission gear selector 114 ('PRNDL'), and a<br>
vehicle speed cruise control (not shown). The transmission gear selector 114<br>
may have a discrete number of operator-selectable positions, including the<br>
rotational direction of the output member 64 to enable one of a forward and a<br>
reverse direction.<br>
[0021] The aforementioned control modules communicate with other control<br>
modules, sensors, and actuators via a local area network (hereafter 'LAN') bus<br>
6. The LAN bus 6 allows for structured communication of states of operating<br>
parameters and actuator command signals between the various control<br>
modules. The specific communication protocol utilized is application-specific.<br>
The LAN bus 6 and appropriate protocols provide for robust messaging and<br>
multi-control module interfacing between the aforementioned control<br>
modules, and other control modules providing functionality including e.g..<br>
antilock braking, traction control, and vehicle stability. Multiple<br>
communications buses may be used to improve communications speed and<br>
provide some level of signal redundancy and integrity. Communication<br>
between individual control modules can also be effected using a direct link,<br>
e.g., a serial peripheral interface ('SPI') bus (not shown).<br>
[0022] The HCP 5 provides supervisory control of the hybrid powertrain,<br>
serving to coordinate operation of the ECM 23, TCM 17, TPIM 19, and<br>
BPCM 21. Based upon various input signals from the user interface 13 and<br>
the hybrid powertrain, including the ESD 74, the HCP 5 determines an<br>
operator torque request, an output torque command, an engine input torque<br>
command, clutch torque(s) for the applied torque-transfer clutches C1 70, C2<br>
<br>
 <br>
62, C3 73, C4 75 of the transmission 10, and the motor torque commands TA<br>
and TB for the first and second electric machines 56 and 72.<br>
[0023] The ECM 23 is operatively connected to the engine 14, and functions<br>
to acquire data from sensors and control actuators of the engine 14 over a<br>
plurality of discrete lines, shown for simplicity as an aggregate bi-directional<br>
interface cable 35. The ECM 23 receives the engine input torque command<br>
from the HCP 5. The ECM 23 determines the actual engine input torque, TI,<br>
provided to the transmission 10 at that point in time based upon monitored<br>
engine speed and load, which is communicated to the HCP 5. The ECM 23<br>
monitors input from the rotational speed sensor 11 to determine the engine<br>
input speed to the input shaft 12, which translates to the transmission input<br>
speed, N|. The ECM 23 monitors inputs from sensors (not shown) to<br>
determine states of other engine operating parameters including, e.g., a<br>
manifold pressure, engine coolant temperature, ambient air temperature, and<br>
ambient pressure. The engine load can be determined, for example, from the<br>
manifold pressure, or alternatively, from monitoring operator input to the<br>
accelerator pedal 113. The ECM 23 generates and communicates command<br>
signals to control engine actuators, including, e.g., fuel injectors, ignition<br>
modules, and throttle control modules, none of which are shown.<br>
[0024J The TCM 17 is operatively connected to the transmission 10 and<br>
monitors inputs from sensors (not shown) to determine states of transmission<br>
operating parameters. The TCM 17 generates and communicates command<br>
signals to control the transmission 10, including controlling the hydraulic<br>
circuit 42. Inputs from the TCM 17 to the HCP 5 include estimated clutch<br>
torques for each of the clutches, i.e., C1 70, C2 62, C3 73, and C4 75, and<br>
<br>
 <br>
rotational output speed, No, of the output member 64. Other actuators and<br>
sensors may be used to provide additional information from the TCM 17 to the<br>
HCP 5 for control purposes. The TCM 17 monitors inputs from pressure<br>
switches (not shown) and selectively actuates pressure control solenoids (not<br>
shown) and shift solenoids (not shown) of the hydraulic circuit 42 to<br>
selectively actuate the various clutches C1 70, C2 62, C3 73, and C4 75 to<br>
achieve various transmission operating range states, as described hereinbeiow.<br>
[0025] The BPCM 21 is signally connected to sensors (not shown) to<br>
monitor the ESD 74, including states of electrical current and voltage<br>
parameters, to provide information indicative of parametric states of the<br>
batteries of the ESD 74 to the HCP 5. The parametric states of the batteries<br>
preferably include battery state-of-charge, battery voltage, battery temperature,<br>
and available battery power, referred to as a range PBAT_MIN to PBAT_MAX-<br>
[0026J A brake control module (hereafter 'BrCM') 22 is operatively<br>
connected to the friction brakes 94 on each of the vehicle wheels 93. The<br>
BrCM 22 monitors the operator input to the brake pedal 112 and generates<br>
control signals to control the friction brakes 94 and sends a control signal to<br>
the HCP 5 to operate the first and second electric machines 56 and 72 based<br>
thereon, to effect vehicle braking through a process referred to as blended<br>
braking.<br>
[0027] Each of the control modules ECM 23, TCM 17, TPIM 19, BPCM 21,<br>
and BrCM 22 is preferably a general-purpose digital computer comprising a<br>
microprocessor or central processing unit, storage mediums comprising read<br>
only memory ('ROM'), random access memory ('RAM'), electrically<br>
programmable read only memory ('EPROM'), a high speed clock, analog to<br>
<br>
 <br>
digital ('A/D') and digital to analog ('D/A') circuitry, and input/output<br>
circuitry and devices ('I/O') and appropriate signal conditioning and buffer<br>
circuitry. Each of the control modules has a set of control algorithms,<br>
comprising resident program instructions and calibrations stored in one of the<br>
storage mediums and executed to provide the respective functions of each<br>
computer. Information transfer between the control modules is preferably<br>
accomplished using the LAN bus 6 and serial peripheral interface buses. The<br>
control algorithms are executed during preset loop cycles such that each<br>
algorithm is executed at least once each loop cycle. Algorithms stored in the<br>
non-volatile memory devices are executed by one of the central processing<br>
units to monitor inputs from the sensing devices and execute control and<br>
diagnostic routines to control operation of the actuators, using preset<br>
calibrations. Loop cycles are executed at regular intervals, for example each<br>
3.125, 6.25, 12.5, 25 and 100 milliseconds during ongoing operation of the<br>
hybrid powertrain. Alternatively, algorithms may be executed in response to<br>
the occurrence of an event.<br>
[0028] The exemplary hybrid powertrain selectively operates in one of<br>
several states that can be described in terms of engine states comprising one of<br>
an engine-on state ('ON') and an engine-off state ('OFF'), and transmission<br>
operating range states comprising a plurality of fixed gears and continuously<br>
variable operating modes, described with reference to Table 1, below.<br>
 <br>
 <br>
 <br>
[0029] Each of the transmission operating range states is described in the<br>
table and indicates which of the specific clutches C1 70, C2 62, C3 73, and C4<br>
75 are applied for each of the operating range states. A first continuously<br>
variable mode, i.e., EVT Mode 1, or Ml, is selected by applying clutch C1 70<br>
only in order to "ground" the outer gear member of the third planetary gear set<br>
28. The engine state can be one of ON ('MI_Eng_On') or OFF<br>
('Ml_Eng_Off). A second continuously variable mode, i.e., EVT Mode 2, or<br>
M2, is selected by applying clutch C2 62 only to connect the shaft 60 to the<br>
carrier of the third planetary gear set 28. The engine state can be one of ON<br>
('M2 Eng_On') or OFF ('M2_Eng_Off). For purposes of this description,<br>
when the engine state is OFF, the engine input speed is equal to zero<br>
revolutions per minute ('RPM'), i.e., the engine crankshaft is not rotating. A<br>
fixed gear operation provides a fixed ratio operation of input-to-output speed<br>
of the transmission 10, i.e., NI/NO A first fixed gear operation ('Gl") is<br>
selected by applying clutches C1 70 and C4 75. A second fixed gear operation<br>
('G2') is selected by applying clutches C1 70 and C2 62. A third fixed gear<br>
operation ('G3') is selected by applying clutches C2 62 and C4 75. A fourth<br>
fixed gear operation ('G4') is selected by applying clutches C2 62 and C3 73.<br>
 <br>
The fixed ratio operation of input-to-output speed increases with increased<br>
fixed gear operation due to decreased gear ratios in the planetary gears 24, 26,<br>
and 28. The rotational speeds of the first and second electric machines 56 and<br>
72, NAand NB respectively, are dependent on internal rotation of the<br>
mechanism as defined by the clutching and are proportional to the input speed<br>
measured at the input shaft 12.<br>
[0030] In response to operator input via the accelerator pedal 113 and brake<br>
pedal 112 as captured by the user interface 13, the HCP 5 and one or more of<br>
the other control modules determine torque commands to control the torque<br>
generative devices comprising the engine 14 and the first and second electric<br>
machines 56 and 72 to meet the operator torque request at the output member<br>
64 and transferred to the driveline 90. Based upon input signals from the user<br>
interface 13 and the hybrid powertrain including the ESD 74, the HCP 5<br>
determines the operator torque request, a commanded output torque from the<br>
transmission 10 to the driveline 90, an input torque from the engine 14, clutch<br>
torques for the torque-transfer clutches C1 70, C2 62, C3 73, C4 75 of the<br>
transmission 10; and the motor torques for the first and second electric<br>
machines 56 and 72, respectively, as is described hereinbelow.<br>
[0031] Final vehicle acceleration can be affected by other factors including,<br>
e.g., road load, road grade, and vehicle mass. The engine state and the<br>
transmission operating range state are determined based upon a variety of<br>
operating characteristics of the hybrid powertrain. This includes the operator<br>
torque request communicated through the accelerator pedal 113 and brake<br>
pedal 112 to the user interface 13 as previously described. The transmission<br>
operating range state and the engine state may be predicated on a hybrid<br>
<br>
 <br>
powertrain torque demand caused by a command to operate the first and<br>
second electric machines 56 and 72 in an electrical energy generating mode or<br>
in a torque generating mode. The transmission operating range state and the<br>
engine state can be determined by an optimization algorithm or routine which<br>
determines optimum system efficiency based upon operator demand for<br>
power, battery state of charge, and energy efficiencies of the engine 14 and the<br>
first and second electric machines 56 and 72. The control system manages<br>
torque inputs from the engine 14 and the first and second electric machines 56<br>
and 72 based upon an outcome of the executed optimization routine, and<br>
system efficiencies are optimized thereby, to manage fuel economy and<br>
battery charging. Furthermore, operation can be determined based upon a<br>
fault in a component or system. The HCP 5 monitors the torque-generative<br>
devices, and determines the power output from the transmission 10 at output<br>
member 64 that is required to meet the operator torque request while meeting<br>
other powertrain operating demands, e.g., charging the ESD 74. As should be<br>
apparent from the description above, the ESD 74 and the first and second<br>
electric machines 56 and 72 are electrically-operatively coupled for power<br>
flow therebetween. Furthermore, the engine 14, the first and second electric<br>
machines 56 and 72, and the electro-mechanical transmission 10 are<br>
mechanically-operatively coupled to transfer power therebetween to generate a<br>
power flow to the output member 64.<br>
[0032] Fig. 3 shows a control system architecture for controlling and<br>
managing signal flow in a hybrid powertrain system having multiple torque<br>
generative devices, described hereinbelow with reference to the hybrid<br>
powertrain system of Figs. 1 and 2, and residing in the aforementioned control<br>
<br>
 <br>
modules in the form of executable algorithms and calibrations. The control<br>
system architecture is applicable to alternative hybrid powertrain systems<br>
having multiple torque generative devices, including, e.g., a hybrid powertrain<br>
system having an engine and a single electric machine, a hybrid powertrain<br>
system having an engine and multiple electric machines. Alternatively, the<br>
hybrid powertrain system can utilize non-electric torque-generative machines<br>
and energy storage systems, e.g., hydraulic-mechanical hybrid transmissions<br>
(not shown).<br>
[0033] In operation, the operator inputs to the accelerator pedal 113 and the<br>
brake pedal 112 are monitored to determine the operator torque request. The<br>
operator inputs to the accelerator pedal 113 and the brake pedal 112 comprise<br>
individually determinable operator torque request inputs including an<br>
immediate accelerator output torque request ('Output Torque Request Accel<br>
Immed'), a predicted accelerator output torque request ('Output Torque<br>
Request Accel Prdtd'), an immediate brake output torque request ('Output<br>
Torque Request Brake Immed'), a predicted brake output torque request<br>
('Output Torque Request Brake Prdtd') and an axle torque response type<br>
('Axle Torque Response Type'). As used herein, the term 'accelerator' refers<br>
to an operator request for forward propulsion preferably resulting in increasing<br>
vehicle speed over the present vehicle speed, when the operator selected<br>
position of the transmission gear selector 114 commands operation of the<br>
vehicle in the forward direction. The terms 'deceleration' and 'brake' refer to<br>
an operator request preferably resulting in decreasing vehicle speed from the<br>
present vehicle speed. The immediate accelerator output torque request, the<br>
predicted accelerator output torque request, the immediate brake output torque<br>
<br>
 <br>
request, the predicted brake output torque request, and the axle torque<br>
response type are individual inputs to the control system. Additionally,<br>
operation of the engine 14 and the transmission 10 are monitored to determine<br>
the input speed ('Ni') and the output speed ('No').<br>
[0034] The immediate accelerator output torque request comprises an<br>
immediate torque request determined based upon the operator input to the<br>
accelerator pedal 113. The control system controls the output torque from the<br>
hybrid powertrain system in response to the immediate accelerator output<br>
torque request to cause positive acceleration of the vehicle. The immediate<br>
brake output torque request comprises an immediate braking request<br>
determined based upon the operator input to the brake pedal 112. The control<br>
system controls the output torque from the hybrid powertrain system in<br>
response to the immediate brake output torque request to cause deceleration,<br>
or negative acceleration, of the vehicle. Vehicle deceleration effected by<br>
control of the output torque from the hybrid powertrain system is combined<br>
with vehicle deceleration effected by a vehicle braking system (not shown) to<br>
decelerate the vehicle to achieve the immediate braking request.<br>
[0035] The immediate accelerator output torque request is determined based<br>
upon a presently occurring operator input to the accelerator pedal 113, and<br>
comprises a request to generate an immediate output torque at the output<br>
member 64 preferably to accelerate the vehicle. The immediate accelerator<br>
output torque request is unshaped, but can be shaped by events that affect<br>
vehicle operation outside the powertrain control. Such events include vehicle<br>
level interruptions in the powertrain control for antilock braking, traction<br>
 <br>
control and vehicle stability control, which can be used to unshape or rate-<br>
limit the immediate accelerator output torque request.<br>
[0036] The predicted accelerator output torque request is determined based<br>
upon the operator input to the accelerator pedal 113 and comprises an<br>
optimum or preferred output torque at the output member 64. The predicted<br>
accelerator output torque request is preferably equal to the immediate<br>
accelerator output torque request during normal operating conditions, e.g.,<br>
when any one of antilock braking, traction control, or vehicle stability is not<br>
being commanded. When any one of antilock braking, traction control or<br>
vehicle stability is being commanded the predicted accelerator output torque<br>
request remains the preferred output torque with the immediate accelerator<br>
output torque request being decreased in response to output torque commands<br>
related to the antilock braking, traction control, or vehicle stability control.<br>
[0037] The immediate brake output torque request is determined based upon<br>
the operator input to the brake pedal 112 and the control signal to control the<br>
friction brakes 94 to generate friction braking torque.<br>
[0038] The predicted brake output torque request comprises an optimum or<br>
preferred brake output torque at the output member 64 in response to an<br>
operator input to the brake pedal 112 subject to a maximum brake output<br>
torque generated at the output member 64 allowable regardless of the operator<br>
input to the brake pedal 112. In one embodiment the maximum brake output<br>
torque generated at the output member 64 is limited to -0.2g. The predicted<br>
brake output torque request can be phased out to zero when vehicle speed<br>
approaches zero regardless of the operator input to the brake pedal 112. As<br>
desired by a user, there can be operating conditions under which the predicted<br>
<br>
 <br>
brake output torque request is set to zero, e.g., when the operator setting to the<br>
transmission gear selector 114 is set to a reverse gear, and when a transfer case<br>
(not shown) is set to a four-wheel drive low range. The operating conditions<br>
whereat the predicted brake output torque request is set to zero are those in<br>
which blended braking is not preferred due to vehicle operating factors.<br>
[0039] The axle torque response type comprises an input state for shaping<br>
and rate-limiting the output torque response through the first and second<br>
electric machines 56 and 72. The input state for the axle torque response type<br>
can be an active state, preferably comprising one of a pleasability limited state<br>
a maximum range state, and an inactive state. When the commanded axle<br>
torque response type is the active state, the output torque command is the<br>
immediate output torque. Preferably the torque response for this response type<br>
is as fast as possible.<br>
[0040] Blended braking includes generating friction braking torque at the<br>
wheels 93 and generating output torque at the output member 64 to react with<br>
the driveline 90 to decelerate the vehicle in response to the operator input to<br>
the brake pedal 112. The BrCM 22 commands the friction brakes 94 to apply<br>
braking torque and generates a command for the transmission 10 to create a<br>
negative output torque which reacts with the driveline 90 in response to the<br>
immediate braking request. Preferably the applied braking torque and the<br>
negative output torque can decelerate and stop the vehicle so long as they are<br>
sufficient to overcome vehicle kinetic power at wheel(s) 93. The negative<br>
output torque reacts with the driveline 90, thus transferring torque to the<br>
electro-mechanical transmission 10 and the engine 14. The negative output<br>
torque reacted through the electro-mechanical transmission 10 can be<br>
<br>
 <br>
transferred to one or both of the first and second electric machines 56 and 72<br>
to generate electric power for storage in the ESD 74.<br>
[0041] A strategic optimization control scheme ('Strategic Control') 310<br>
determines a preferred input speed ('Ni_Des') and a preferred engine state and<br>
transmission operating range state ('Hybrid Range State Des') based upon the<br>
output speed and the operator torque request and based upon other operating<br>
parameters of the hybrid powertrain, including battery power limits and<br>
response limits of the engine 14, the transmission 10, and the first and second<br>
electric machines 56 and 72. The predicted accelerator output torque request<br>
and the predicted brake output torque request are input to the strategic<br>
optimization control scheme 310. The strategic optimization control scheme<br>
310 is preferably executed by the HCP 5 during each 100 ms loop cycle and<br>
each 25 ms loop cycle. The desired operating range state for the transmission<br>
10 and the desired input speed from the engine 14 to the transmission 10 are<br>
inputs to the shift execution and engine start/stop control scheme 320.<br>
[0042] The shift execution and engine start/stop control scheme 320<br>
commands changes in the transmission operation ('Transmission Commands')<br>
including changing the operating range state based upon the inputs and<br>
operation of the powertrain system. This includes commanding execution of a<br>
change in the transmission operating range state if the preferred operating<br>
range state is different from the present operating range state by commanding<br>
changes in application of one or more of the clutches C1 70, C2 62, C3 73.<br>
and C4 75 and other transmission commands. The present operating range<br>
state ('Hybrid Range State Actual') and an input speed profile ('Ni_Prof) can<br>
be determined. The input speed profile is an estimate of an upcoming input<br>
<br>
 <br>
speed and preferably comprises a scalar parametric value that is a targeted<br>
input speed for the forthcoming loop cycle. The engine operating commands<br>
and the operator torque request are based upon the input speed profile during a<br>
transition in the operating range state of the transmission.<br>
[0043] A tactical control scheme ('Tactical Control and Operation') 330 is<br>
repeatedly executed during one of the control loop cycles to determine engine<br>
commands ('Engine Commands') for operating the engine 14, including a<br>
preferred input torque from the engine 14 to the transmission 10 based upon<br>
the output speed, the input speed, and the operator torque request comprising<br>
the immediate accelerator output torque request, the predicted accelerator<br>
output torque request, the immediate brake output torque request, the predicted<br>
brake output torque request, the axle torque response type, and the present<br>
operating range state for the transmission. The engine commands also include<br>
engine states including one of an all-cylinder operating state and a cylinder<br>
deactivation operating state wherein a portion of the engine cylinders are<br>
deactivated and unfueled, and engine states including one of a fueled state and<br>
a fuel cutoff state. An engine command comprising the preferred input torque<br>
of the engine 14 and a present input torque ('Ti') reacting between the engine<br>
14 and the input member 12 are preferably determined in the ECM 23. Clutch<br>
torques ('Tel') for each of the clutches C1 70, C2 62, C3 73, and C4 75,<br>
including the presently applied clutches and the non-applied clutches are<br>
estimated, preferably in the TCM 17.<br>
[0044] An output and motor torque determination scheme ('Output and<br>
Motor Torque Determination') 340 is executed to determine the preferred<br>
output torque from the powertrain (To_cmd'). This includes determining<br>
<br>
 <br>
motor torque commands ('TA', 'TB') to transfer a net commanded output<br>
torque to the output member 64 of the transmission 10 that meets the operator<br>
torque request, by controlling the first and second electric machines 56 and 72<br>
in this embodiment. The immediate accelerator output torque request, the<br>
immediate brake output torque request, the present input torque from the<br>
engine 14 and the estimated applied clutch torque(s), the present operating<br>
range state of the transmission 10, the input speed, the input speed profile, and<br>
the axle torque response type are inputs. The output and motor torque<br>
determination scheme 340 executes to determine the motor torque commands<br>
during each iteration of one of the loop cycles. The output and motor torque<br>
determination scheme 340 includes algorithmic code which is regularly<br>
executed during the 6.25 ms and 12.5 ms loop cycles to determine the<br>
preferred motor torque commands.<br>
[0045] The hybrid powertrain is controlled to transfer the output torque to<br>
the output member 64 to react with the driveline 90 to generate tractive torque<br>
at wheel(s) 93 to forwardly propel the vehicle in response to the operator input<br>
to the accelerator pedal 113 when the operator selected position of the<br>
transmission gear selector 114 commands operation of the vehicle in the<br>
forward direction. Similarly, the hybrid powertrain is controlled to transfer<br>
the output torque to the output member 64 to react with the driveline 90 to<br>
generate tractive torque at wheel(s) 93 to propel the vehicle in a reverse<br>
direction in response to the operator input to the accelerator pedal 113 when<br>
the operator selected position of the transmission gear selector 114 commands<br>
operation of the vehicle in the reverse direction. Preferably, propelling the<br>
vehicle results in vehicle acceleration so long as the output torque is sufficient<br>
<br>
 <br>
to overcome external loads on the vehicle, e.g., due to road grade,<br>
aerodynamic loads, and other loads.<br>
[0046] Fig. 4 details signal flow in the tactical control scheme ('Tactical<br>
Control and Operation') 330 for controlling operation of the engine 14.<br>
described with reference to the hybrid powertrain system of Figs. 1 and 2 and<br>
the control system architecture of Figs. 3 and 4. The tactical control scheme<br>
330 includes a tactical optimization control path 350 and a system constraints<br>
control path 360 which are preferably executed concurrently. The outputs of<br>
the tactical optimization control path 350 are input to an engine state control<br>
scheme 370. The outputs of the engine state control scheme 370 and the<br>
system constraints control path 360 are input to an engine response type<br>
determination scheme ('Engine Response Type Determination') 380 for<br>
controlling the engine state, the immediate engine torque request, the predicted<br>
engine torque request, and the engine response type.<br>
[0047] The input from the engine 14 can be described in terms of an engine<br>
operating point including engine speed and engine torque which can be<br>
converted into the input speed and input torque which react with the input<br>
member from the transmission 10. When the engine 14 comprises a spark-<br>
ignition engine, a change in the engine operating point can be effected by<br>
changing mass of intake air to the engine 14, by controlling position of an<br>
engine throttle (not shown) utilizing an electronic throttle control system (not<br>
shown), including opening the engine throttle to increase engine torque and<br>
closing the engine throttle to decrease engine torque. Changes in the engine<br>
operating point can be effected by adjusting ignition timing, including<br>
retarding spark timing from a mean-best-torque spark timing to decrease<br>
<br>
 <br>
engine torque. When the engine 14 comprises a compression-ignition engine,<br>
the engine operating point is controlled by controlling the mass of injected fuel<br>
and adjusted by retarding injection timing from a mean-best-torque injection<br>
timing to decrease the engine torque. The engine operating point can also be<br>
changed to effect a change in the input torque by controlling the engine state<br>
between the all-cylinder state and the cylinder deactivation state, and, by<br>
controlling the engine state between the engine-fueled state and the fuel cutoff<br>
state wherein the engine is rotating and unfueled.<br>
[0048] The tactical optimization control path 350 acts on substantially<br>
steady-state inputs to select a preferred engine state and to determine a<br>
preferred input torque from the engine 14 to the transmission 10. The tactical<br>
optimization control path 350 includes an optimization scheme (Tactical<br>
Optimization') 354 to determine preferred input torques for operating the<br>
engine 14 in the all-cylinder state ('Input Torque Full'), in the cylinder<br>
deactivation state ('Input Torque Deac'), the all-cylinder state with fuel cutoff<br>
('Input Torque Full FCO'), in the cylinder deactivation state with fuel cutoff<br>
('Input Torque Deac FCO'), and a preferred engine state ('Preferred Engine<br>
State'). Inputs to the optimization scheme 354 include a lead operating range<br>
state of the transmission 10 ('Lead Hybrid Range State') a lead predicted input<br>
acceleration profile ('Lead Input Acceleration Profile Predicted') and a<br>
predicted range of clutch reactive torques ('Predicted Clutch Reactive Torque<br>
Min/Max') across each applied clutch in the lead operating range state, which<br>
are preferably generated in the shift execution and engine start/stop control<br>
scheme 320. Further inputs include predicted electric power limits ('Predicted<br>
Battery Power Limits'), a predicted accelerator output torque request ('Output<br>
<br>
 <br>
Torque Request Accel Prdtd') and a predicted brake output torque request<br>
('Output Torque Request Brake Prdtd'). The predicted output torque request<br>
for acceleration is shaped through a predicted output torque shaping filter 352<br>
while considering the axle torque response type to yield a predicted<br>
accelerator output torque ('To Accel Prdtd') and combined with the predicted<br>
output torque request for braking to determine the net predicted output torque<br>
('To Net Prdtd'), which are inputs to the optimization scheme 354. The lead<br>
operating range state of the transmission 10 comprises a time-shifted lead of<br>
the operating range state of the transmission 10 to accommodate a response<br>
time lag between a commanded change in the operating range state and the<br>
actual operating range state. Thus the lead operating range state of the<br>
transmission 10 is the commanded operating range state. The lead predicted<br>
input acceleration profile comprises a time-shifted lead of the predicted input<br>
acceleration profile of the input member 12 to accommodate a response time<br>
lag between a commanded change in the predicted input acceleration profile<br>
and a measured change in the predicted input acceleration profile. Thus the<br>
lead predicted input acceleration profile is the predicted input acceleration<br>
profile of the input member 12 occurring after the time shift. The parameters<br>
designated as 'lead' are used to accommodate concurrent transfer of torque<br>
through the powertrain converging at the common output member 64 using<br>
devices having varying response times. Specifically, the engine 14 can have a<br>
response time of an order of magnitude of 300 - 600 ms, and each of the<br>
torque transfer clutches C1 70, C2 62, C3 73, and C4 75 can have response<br>
times of an order of magnitude of 150-300 ms, and the first and second<br>
 <br>
electric machines 56 and 72 can have response time of an order of magnitude<br>
of 10 ms.<br>
[0049] The optimization scheme 354 determines costs for operating the<br>
engine 14 in the engine states, which comprise operating the engine fueled and<br>
in the all-cylinder state ('PCOST FULL FUEL'), operating the engine unfueled and<br>
in the all-cylinder state ('PCOST FULL FCO') operating the engine fueled and in<br>
cylinder deactivation state ('PCOST DEAC FUEL'), and operating the engine<br>
unfueled and in the cylinder deactivation state ('PCOST DEAC FCO')- The<br>
aforementioned costs for operating the engine 14 are input to a stabilization<br>
analysis scheme ('Stabilization and Arbitration') 356 along with the actual<br>
engine state ('Actual Engine State') and allowable or permissible engine<br>
state(s) ('Engine State Allowed') to select one of the engine states as the<br>
preferred engine state ('Preferred Engine State').<br>
[0050] The preferred input torques for operating the engine 14 in the all-<br>
cylinder state and in the cylinder deactivation state with and without fuel<br>
cutoff are input to an engine torque conversion calculator 355 and converted to<br>
preferred engine torques in the all-cylinder state and in the cylinder<br>
deactivation state ('Engine Torque Full' and 'Engine Torque Deac') and with<br>
fuel cutoff in the all-cylinder state and in the cylinder deactivation state<br>
('Engine Torque Full FCO' and 'Engine Torque Deac FCO') respectively, by<br>
taking into account torque-consuming components, e.g., a hydraulic pump,<br>
between the engine 14 and the transmission 10. The preferred engine torques<br>
and the preferred engine state comprise inputs to the engine state control<br>
scheme 370.<br>
 <br>
[0051] The costs for operating the engine 14 include operating costs which<br>
are determined based upon factors that include vehicle driveability, fuel<br>
economy, emissions, and battery usage. Costs are assigned and associated<br>
with fuel and electrical power consumption and are associated with specific<br>
operating conditions of the hybrid powertrain. Lower operating costs can be<br>
associated with lower fuel consumption at high conversion efficiencies, lower<br>
battery power usage and lower emissions and take into account the present<br>
operating state of the engine 14.<br>
[0052] The preferred engine state and the preferred engine torques in the all-<br>
cylinder state and in the cylinder deactivation state are input to the engine state<br>
control scheme 370, which includes an engine state machine ('Engine State<br>
Machine') 372. The engine state machine 372 determines a target engine<br>
torque ('Target Engine Torque') and an engine state ('Target Engine State)<br>
based upon the preferred engine torques and the preferred engine state. The<br>
target engine torque and the engine state are input to a transition filter 374<br>
which filters the target engine torque to provide a filtered target engine torque<br>
('Filtered Target Engine Torque') and which enables transitions between<br>
engine states. The engine state machine 372 outputs a command that<br>
indicates selection of one of the cylinder deactivation state and the all-cylinder<br>
state ('DEAC Selected') and indicates selection of one of the engine-fueled<br>
state and the deceleration fuel cutoff state ('FCO Selected').<br>
[0053] The selection of one of the cylinder deactivation state and the all-<br>
cylinder state and the selection of one of the engine-fueled state and the<br>
deceleration fuel cutoff state, the filtered target engine torque, and the<br>
 <br>
minimum and maximum engine torques are input to the engine response type<br>
determination scheme 380.<br>
[0054] The system constraints control path 360 determines the constraints on<br>
the input torque, comprising minimum and maximum input torques ("Input<br>
Torque Hybrid Minimum' and 'Input Torque Hybrid Maximum') that can be<br>
reacted by the transmission 10. The minimum and maximum input torques are<br>
determined based upon constraints to the transmission 10, the first and second<br>
electric machines 56 and 72, and the ESD 74, which affect the capacity of the<br>
transmission 10 and the electric machines 56 and 72.<br>
[0055] Inputs to the system constraints control path 360 include the<br>
immediate output torque request as measured by the accelerator pedal 113<br>
combined with the torque intervention control ('Output Torque Request Accel<br>
Immed') and the immediate output torque request as measured by the brake<br>
pedal 112 combined with the torque intervention control ('Output Torque<br>
Request Brake Immed'). The immediate output torque request is shaped<br>
through an immediate output torque shaping filter 362 while considering the<br>
axle torque response type to yield an immediate accelerator output torque ('To<br>
Accel Immed') and is combined with the immediate output torque request for<br>
braking to determine the net immediate output torque (To Net Immed'). The<br>
net immediate output torque and the immediate accelerator output torque are<br>
inputs to a constraints scheme ('Output and Input Torque Constraints') 364.<br>
Other inputs to the constraints scheme 364 include the lead operating range<br>
state of the transmission 10, an immediate lead input acceleration profile<br>
('Lead Input Acceleration Profile Immed'), a lead immediate clutch reactive<br>
torque range ('Lead Immediate Clutch Reactive Torque Min/Max') for each<br>
<br>
 <br>
applied clutch in the lead operating range state, and the tactical control electric<br>
power constraints (Tactical Control Electric Power Constraints') comprising<br>
the range from the minimum tactical control electric power constraint<br>
PBAT_MIN_TC to the maximum tactical control electric power constraint<br>
PBAT_MAX_DC. The tactical control electric power constraints are outputted<br>
from a battery power function ('Battery Power Control') 366. A targeted lead<br>
input acceleration profile comprises a time-shifted lead of the immediate input<br>
acceleration profile of the input member 12 to accommodate a response time<br>
lag between a commanded change in the immediate input acceleration profile<br>
and a measured change in the immediate input acceleration profile. The lead<br>
immediate clutch reactive torque range comprises a time-shifted lead of the<br>
immediate clutch reactive torque range of the clutches to accommodate a<br>
response time lag between a commanded change in the immediate clutch<br>
torque range and a measured change in the immediate clutch reactive torque<br>
range. The constraints scheme 364 determines an output torque range for the<br>
transmission 10, and then determines the minimum and maximum input<br>
torques that can be reacted by the transmission 10 based upon the<br>
aforementioned inputs.<br>
[0056] Further, the constraints scheme 364 inputs an immediate engine<br>
torque request and outputs an immediate electric power PBATT IMMED that is an<br>
estimated battery output power of the ESD 74 when the engine 14 is operating<br>
at the immediate engine torque and when the electric machines 56, 72 are<br>
operating at preferred motor torques based upon the operator torque request<br>
and the other inputs of the constraints scheme 364.<br>
 <br>
[0057] The minimum and maximum input torques are input to the engine<br>
torque conversion calculator 355 and converted to minimum and maximum<br>
engine torques ('Engine Torque Hybrid Minimum" and 'Engine Torque<br>
Hybrid Maximum' respectively), by taking into account torque-consuming<br>
components, e.g., a hydraulic pump, parasitic and other loads introduced<br>
between the engine 14 and the transmission 10.<br>
[0058] The filtered target engine torque, the output of the engine state<br>
machine 372 and the minimum and maximum engine torques are input to the<br>
engine response type determination scheme 380. The engine response type<br>
determination scheme 380 limits the filtered target engine torque to the<br>
minimum and maximum hybrid engine torques and outputs the engine<br>
commands to the ECM 23 for controlling the engine torques to an immediate<br>
engine torque request ('Engine Torque Request Immed') and a predicted<br>
engine torque request ('Engine Torque Request Prdtd'). Other commands<br>
control the engine state to one of the engine fueled state and the fuel cutoff<br>
state ('FCO Request') and to one of the cylinder deactivation state and the all-<br>
cylinder state ('DEAC Request"). Another output comprises an engine<br>
response type ('Engine Response Type'). When the filtered target engine<br>
torque is within the range between the minimum and maximum engine<br>
torques, the engine response type is inactive. When the filtered target engine<br>
torque drops below the maximum constraint of the engine torque ('Engine<br>
Torque Hybrid Maximum') the engine response type is active, indicating a<br>
need for an immediate change in the engine torque, e.g., through engine spark<br>
control to change the engine torque to fall within the constraints of the<br>
minimum and maximum engine torques.<br>
<br>
 <br>
[0059] Fig. 5 shows details of the tactical optimization scheme 354 of the<br>
tactical optimization control path 350. The tactical optimization scheme<br>
(Tactical Optimization') 354 is executed to determine preferred input torques<br>
and associated power costs for operating the engine 14 in the all-cylinder state<br>
('Input Torque Full'), in the cylinder deactivation state ('Input Torque Deac'),<br>
the all-cylinder state with fuel cutoff ('Input Torque Full FCO'), and in the<br>
cylinder deactivation state with fuel cutoff ('Input Torque Deac FCO'). The<br>
system inputs to the tactical optimization scheme 354, as shown in Fig. 4.<br>
include the net predicted output torque ('To Net Prdtd') and the predicted<br>
accelerator output torque ('To Accel Prdtd'). In operation, the predicted<br>
accelerator output torque request ('Output Torque Request Accel Prdtd') and<br>
the predicted braking output torque request ('Output Torque Request Brake<br>
Prdtd') are monitored. The predicted output torque requests for acceleration<br>
and braking are combined and shaped with the axle torque response type<br>
through a predicted output torque shaping filter 352. The net predicted output<br>
torque comprises a sum of the operator torque requests communicated through<br>
the accelerator pedal 113 and the brake pedal 112. Other inputs include a lead<br>
operating range state of the transmission 10 ('Lead Hybrid Range State') a<br>
lead predicted input acceleration profile ('Lead Input Acceleration Profile<br>
Predicted'), a predicted range of clutch reactive torques ('Predicted Clutch<br>
Reactive Torque Min/Max') across each applied clutch in the lead operating<br>
range state, and predicted battery power limits ('Predicted Battery Power<br>
Limits').<br>
[0060] The lead operating range state of the transmission 10 comprises a<br>
time-shifted lead of the operating range state of the transmission 10 to<br>
<br>
 <br>
accommodate a response time lag, for example, between the engine torque<br>
request and the actual engine torque response. Thus the lead operating range<br>
state of the transmiss.on 10 becomes the commanded operating range state.<br>
The lead predicted input acceleration profile comprises a time-shifted lead of<br>
the desired predicted input acceleration profile of the input member 12 to<br>
accommodate the response time lag. Thus the lead predicted input<br>
acceleration profile is the predicted input acceleration profile of the input<br>
member 12 occurring after the time shift. The parameters designated as lead'<br>
are used to accommodate concurrent transfer of torque through the powertrain<br>
converging at the common output member 64 using devices having varying<br>
response times. Specifically, the engine 14 can have a response time of an<br>
order of magnitude of 300 - 600 ms, and each of the torque transfer clutches<br>
C1 70, C2 62, C3 73, and C4 75 can have response times of an order of<br>
magnitude of 150-300 ms, and the first and second electric machines 56 and<br>
72 can have response time of an order of magnitude of 10 ms.<br>
[0061] The tactical optimization scheme 354 includes an optimization<br>
manager 420 which manages and generates power cost inputs, penalty costs.<br>
and optimization inputs for search schemes 402 and 406 and evaluation<br>
schemes 404 and 408. The search schemes 402 and 406 and evaluation<br>
schemes 404 and 408 determine preferred input torques and corresponding<br>
output torques at minimum power costs for operating the powertrain at each of<br>
the engine states.<br>
[0062] The search scheme 402 executes a one-dimensional search of the<br>
input torque to determine a preferred input torque which minimizes power<br>
costs when operating the engine fueled and in the all-cylinder state. At each<br>
 <br>
input torque, a preferred output torque is determined. This includes<br>
determining a range of input torques comprising minimum and maximum<br>
input torques with the engine 14 operating in the fueled state and in the all-<br>
cylinder state ('Input Torque Minimum Full', 'Input Torque Maximum Full1)<br>
which are input to a one-dimensional search engine 430. The search engine<br>
430 generates a candidate input torque ('Ti(j)') within the range of input<br>
torques that is input to an optimization function 440. The optimization<br>
function 440 calculates outputs including an output torque (To(j)') and torque<br>
outputs from the first and second electric machines 56 and 72 ('Ta(j)',<br>
'Tb(j)'), and output power from the ESD 74 ('PBAT(J)'), electrical power from<br>
the first and second electric machines 56 and 72 ('Pa(j)', 'Pb(j)') and clutch<br>
torque outputs ('Tcll(j)'), ('Tcl2(j)') of applied clutches of the transmission<br>
device 10 based upon the candidate input torque and the optimization inputs<br>
and the system inputs. The outputs of the optimization function 440 are input<br>
to a cost function 450 which calculates a power cost ('Pcost(j)')for the<br>
candidate input torque. The search engine iteratively generates candidate<br>
input torques and executes over the range of input torques to identify a<br>
preferred input torque and corresponding output torque which achieves a<br>
minimum power cost ('PCOSTFULL FUEL') when operating the engine fueled and<br>
in the all-cylinder state.<br>
[0063] The search scheme 406 executes a one-dimensional search of the<br>
input torque to determine a preferred input torque which minimizes power<br>
costs when operating the engine fueled and in the cylinder deactivation state.<br>
This includes determining a range of input torques comprising minimum and<br>
maximum input torques with the engine 14 operating in the fueled state and in<br>
<br>
 <br>
the cylinder deactivation state ('Input Torque Minimum Deac', 'Input Torque<br>
Maximum Deac') which are input to the one-dimensional search engine 430<br>
The search engine 430 generates a candidate input torque (Ti(j)') within the<br>
range of input torques that is input to the optimization function 440. The<br>
optimization function 440 calculates outputs including an output torque<br>
('To(j)') and torque outputs from the first and second electric machines 56 and<br>
72 ('Ta(j)', 'Tb(j)'), and output power from the ESD 74 ('PBAT(J)') and<br>
electrical power from the first and second electric machines 56 and 72 ('Pa(j)',<br>
'Pb(j)') based upon the candidate input torque and the optimization inputs and<br>
the system input. The outputs of the optimization function 440 are input to the<br>
cost function 450 which calculates a power cost ('PCOST(J)') the candidate<br>
input torque ('Ti(j)'). The search engine iteratively generates candidate input<br>
torques and executes over the range of input torques to identify a preferred<br>
input torque and corresponding output torque which achieves a minimum<br>
power cost ('Pcosr DEAC FUEL') when operating the engine in the fueled state<br>
and in the cylinder deactivation state.<br>
[0064] The evaluation scheme 404 evaluates the input torque to determine a<br>
preferred output torque and a power cost when operating the engine in the<br>
unfueled state and in the all-cylinder state. The candidate input torque ('Input<br>
Torque FCO Full') is input to the optimization function 440. The optimization<br>
function 440 calculates the outputs including an output torque ('To') and<br>
torque outputs from the first and second electric machines 56 and 72 ('Ta',<br>
'Tb'), and output power from the ESD 74 ('PBAT') and power from the first<br>
and second electric machines 56 and 72 ('Pa', 'Pb') based upon the input<br>
torque and the optimization inputs and the system inputs. The outputs of the<br>
<br>
 <br>
optimization function 440 are input to the cost function 450 which calculates a<br>
power cost ('PCOST FULL FCO') when operating the engine unfueled and in the<br>
all-cylinder state.<br>
[0065] The evaluation scheme 408 evaluates the input torque to determine a<br>
preferred output torque and a power cost when operating the engine in the<br>
unfueled state and in the cylinder deactivation state. The candidate input<br>
torque ('Input Torque FCO Deac') is input to the optimization function 440.<br>
The optimization function 440 calculates the outputs including an output<br>
torque ('To') and torque outputs from the first and second electric machines<br>
56 and 72 ('Ta', 'Tb'), and output power from the ESD 74 ('PBAT') and power<br>
from the first and second electric machines 56 and 72 ('Pa', 'Pb') based upon<br>
the input torque and the optimization inputs and the system inputs. The<br>
outputs of the optimization function 440 are input to the cost function 450<br>
which calculates a power cost ('PCOST DEAC FCO') for the input torque when<br>
operating the engine unfueled and in the cylinder deactivation state.<br>
[0066] The optimization function 440 has inputs including a single input<br>
torque, the optimization inputs and the system inputs. The system inputs<br>
include the net predicted output torque (To Net Prdtd') and the predicted<br>
accelerator output torque (To Accel Prdtd'). The optimization inputs include<br>
the lead operating range state of the transmission 10 ('Lead Hybrid Range<br>
State') the lead predicted input acceleration profile ('Lead Input Acceleration<br>
Profile Predicted'), the predicted range of clutch reactive torques ('Predicted<br>
Clutch Reactive Torque Min/Max') across each applied clutch in the lead<br>
operating range state, and predicted battery power limits ('Predicted Battery<br>
Power Limits'). Other limits include maximum and minimum motor torque<br>
<br>
 <br>
outputs from the first and second electric machines 56 and 72, and system<br>
inertias, damping, clutch slippages, and electric/mechanical power conversion<br>
efficiencies. For each candidate input torque, the optimization function 440<br>
calculates powertrain system outputs that are responsive to the system inputs<br>
comprising the aforementioned output torque commands and are within the<br>
maximum and minimum motor torque outputs from the first and second<br>
electric machines 56 and 72, and within the available battery power, and<br>
within the range of clutch reactive torques from the applied clutches for the<br>
present operating range state of the transmission 10, and take into account the<br>
system inertias, damping, clutch slippages, and electric/mechanical power<br>
conversion efficiencies. The powertrain system outputs include a maximum<br>
achievable output torque ('To') and achievable torque outputs from the first<br>
and second electric machines 56 and 72 ('Ta', 'Tb').<br>
[0067] The cost function 450 determines power costs for operating the<br>
powertrain system responsive to the system inputs including the net predicted<br>
output torque and the predicted accelerator output torque and with the engine<br>
14 at the candidate input torque. The power costs are determined based upon<br>
factors that include mechanical power loss in the form of friction and spin<br>
losses, electrical power losses related to heat generation, internal resistances,<br>
and current flow, and parasitic losses. During braking event, the power costs<br>
include kinetic power loss due to unrecovered kinetic energy that is expended<br>
in the form of heat generation in the friction brakes 94, which can be<br>
recovered as electric power through regenerative braking. Costs are assigned<br>
and associated with fuel and electrical power consumption and are associated<br>
with a specific operating point of the hybrid powertrain. Lower power costs<br>
<br>
 <br>
are associated with lower fuel consumption at high conversion efficiencies,<br>
lower battery power usage, and lower emissions for each engine speed/load<br>
operating point, and take into account the present operating state of the engine<br>
14. The search schemes 402 and 406 include additional power costs<br>
comprising engine power costs associated with operating the engine 14 in the<br>
all-cylinder fueled state ('Full Cylinder Engine Power Loss Inputs') and in the<br>
cylinder deactivation fueled state ('Deac Cylinder Engine Power Loss<br>
Inputs').<br>
[0068] A method for operating a hybrid powertrain using a control system is<br>
now detailed, with reference to the powertrain system and control system<br>
described hereinabove for purposes of illustration. The method is applicable<br>
to various powertrain systems that utilize multiple torque generative devices<br>
including an internal combustion engine and a second torque machine, and not<br>
limited to the system described hereinabove. During ongoing operation, the<br>
control system detects a braking event when the operator input to the brake<br>
pedal 112 indicates a predicted brake output torque request which has a<br>
negative value. The tactical control scheme 330 executes through the tactical<br>
optimization control path 350 and the stabilization analysis scheme 356 to<br>
determine a preferred engine state and a preferred engine input torque. This<br>
includes searching the range of engine input torques for engine operation in<br>
the engine states including the all-cylinder state and the cylinder deactivation<br>
state, and the engine states including the engine-fueled state and the fuel cutoff<br>
state. Preferred output torques that can be reacted through the output member<br>
of the transmission to the driveline are determined for each candidate engine<br>
input torque along with the corresponding power costs which include kinetic<br>
<br>
 <br>
power losses due to friction braking. Output torques that are readable through<br>
the output member of the transmission to the driveline are those that are within<br>
the range of the maximum and minimum clutch reactive torques across each of<br>
the applied clutches in the lead operating range state and within the battery<br>
power limits, and are determined for each of the candidate engine input<br>
torques. The preferred engine state and the preferred input torque value are<br>
those which minimize the power costs during the braking event. The control<br>
system can meet the net predicted output torque request by controlling the<br>
powertrain system to react the output torque through the output member 64 to<br>
the driveline 90 and actuating the friction brakes 94, which is executed<br>
through the output and motor torque determination scheme 340. This can<br>
include immediately operating the engine 14 in the fuel cutoff state to<br>
minimize fuel and engine input power to maximize the output power<br>
transferred through the transmission 10 which can be reacted through the<br>
electric machines and captured as kinetic power which can be transformed to<br>
electric power storable in the ESD 74.<br>
[0069] Fig. 6 details signal flow in the strategic optimization control scheme<br>
310, which includes a strategic manager ('Strategic Manager') 220, an<br>
operating range state analyzer 260, and a state stabilization and arbitration<br>
block 280 to determine the preferred input speed ('Ni_Des') and the preferred<br>
transmission operating range state ('Hybrid Range State Des'). The strategic<br>
manager ('Strategic Manager') 220 monitors the output speed NO, the<br>
predicted accelerator output torque request ('Output Torque Request Accel<br>
Prdtd'), the predicted brake output torque request ('Output Torque Request<br>
Brake Prdtd'), and available battery power PBAT_MIN to PBAT_MIN. The strategic<br>
<br>
 <br>
manager 220 determines which of the transmission operating range states are<br>
allowable, and determines output torque requests comprising a strategic<br>
accelerator output torque request ('Output Torque Request Accel Strategic')<br>
and a strategic net output torque request ('Output Torque Request Net<br>
Strategic'), all of which are input the operating range state analyzer 260 along<br>
with penalty costs ('Penalty Costs'), system inputs ('System Inputs') and<br>
power cost inputs ('Power Cost Inputs'). The operating range state analyzer<br>
260 generates a preferred power cost ('P*cost') and associated input speed<br>
('N*i') for each of the allowable operating range states based upon the<br>
operator torque requests, the system inputs, the available battery power and<br>
the power cost inputs. The preferred power costs and associated input speeds<br>
for the allowable operating range states are input to the state stabilization and<br>
arbitration block 280 which selects the preferred operating range state and<br>
preferred input speed based thereon.<br>
[0070] Fig 7 show the operating range state analyzer 260 which executes<br>
searches in each candidate operating range state comprising the allowable ones<br>
of the operating range states, including Ml (262), M2 (264), Gl (270), G2<br>
(272), G3 (274), and G4 (276) to determine preferred operation of the torque<br>
actuators, i.e., the engine 14 and the first and second electric machines 56 and<br>
72 in this embodiment. The preferred operation preferably comprises a<br>
minimum power cost for operating the hybrid powertrain system and an<br>
associated engine input for operating in the candidate operating range state in<br>
response to the operator torque request. The associated engine input<br>
comprises at least one of a preferred engine input speed ('NI'), a preferred<br>
engine input power ('PI'), and a preferred engine input torque ('TI') that is<br>
<br>
 <br>
responsive to and preferably meets the operator torque request. The operating<br>
range state analyzer 260 evaluates Ml-Engine Off (264) and M2-Engine Off<br>
(266) to determine a preferred cost ('P*cost') for operating the powertrain<br>
system responsive to and preferably meeting the operator torque request when<br>
the engine 14 is in the engine-off state.<br>
[0071] The preferred operation in each of Gl (270), G2 (272), G3 (274), and<br>
G4 (276) can be determined by executing a 1-dimensional search scheme 610.<br>
Fig. 8 schematically shows signal flow for the 1-dimension search scheme<br>
610. The operator torque request ('Operator Torque Request'), and a range of<br>
one controllable input, in this embodiment comprising minimum and<br>
maximum input torques ('TiMin/Max'), are input to a 1 -D search engine 415<br>
The 1 -D search engine 415 iteratively generates candidate input torques<br>
('Ti(j)') which range between the minimum and maximum input torques, each<br>
which is input to an optimization function ('Opt To/Ta/Tb') 440, for n search<br>
iterations. Other inputs to the optimization function 440 include system inputs<br>
preferably comprise parametric states for battery power, clutch torques,<br>
electric motor operation, transmission and engine operation, and the specific<br>
operating range state. The optimization function 440 determines transmission<br>
operation comprising an output torque, motor torques, and associated battery<br>
and electrical powers ('To(j), Ta(j), Tb(j), Pbat(j), Pa(j), Pb(j)') associated<br>
with the candidate input torque based upon the system inputs in response to<br>
the operator torque request for the candidate operating range state. The<br>
output torque, motor torques, and associated battery powers, penalty costs, and<br>
power cost inputs are input to a cost function 450, which executes to<br>
determine a power cost ('Pcost(j)') for operating the powertrain in the<br>
<br>
 <br>
candidate operating range state at the candidate input torque in response to the<br>
operator torque request. The 1-D search engine 415 iteratively generates<br>
candidate input torques over the range of input torques. The candidate input<br>
torques are inputted to the optimization function 440 and the cost function 450<br>
to determine the power costs associated therewith to identify a preferred input<br>
torque ('TI') and associated preferred cost ('P*cost'). The preferred input<br>
torque ('TI') comprises the candidate input torque within the range of input<br>
torques that results in a minimum power cost of the candidate operating range<br>
state, i.e., the preferred cost.<br>
[0072] The preferred operation in each of Ml (262) and M2 (264) can be<br>
determined by executing a 2-dimensional search scheme 620. Fig. 9<br>
schematically shows signal flow for the 2-dimension search scheme 620.<br>
Ranges of two controllable inputs, in this embodiment comprising minimum<br>
and maximum input speeds ('Ni Min/Max') and minimum and maximum<br>
input powers ('Pi Min/Max'), are input to a 2-D search engine 410. In another<br>
embodiment, the two controllable inputs can comprise minimum and<br>
maximum input speeds and minimum and maximum input torques. The 2-D<br>
search engine 410 iteratively generates candidate input speeds ('Ni(j)') and<br>
candidate input powers ('Pi(j)') which range between the minimum and<br>
maximum input speeds and powers. The candidate input power is preferably<br>
converted to a candidate input torque (Ti(j)') (412). Each candidate input<br>
speed ('Ni(j)') and candidate input torque ('Ti(j)') are input to an optimization<br>
function ('Opt To/Ta/Tb') 440, for n search iterations. Other inputs to the<br>
optimization function 440 include system inputs preferably comprising<br>
parametric states for battery power, clutch torques, electric motor operation,<br>
<br>
 <br>
transmission and engine operation, the specific operating range state and the<br>
operator torque request. The optimization function 440 determines<br>
transmission operation comprising an output torque, motor torques, and<br>
associated battery and electrical powers (To(j), Ta(j), Tb(j), Pbat(j), Pa(j),<br>
Pb(j)') associated with the candidate input power and candidate input speed<br>
based upon the system inputs and the operating torque request for the<br>
candidate operating range state. The output torque, motor torques, and<br>
associated battery powers, penalty costs and power cost inputs are input to a<br>
cost function 450, which executes to determine a power cost ('Pcost(j)') for<br>
operating the powertrain at the candidate input power and candidate input<br>
speed in response to the operator torque request in the candidate operating<br>
range state. The 2-D search engine 410 iteratively generates the candidate<br>
input speeds and candidate input powers over the range of input speeds and<br>
range of input powers and determines the power costs associated therewith to<br>
identify a preferred input power ('PI') and preferred input speed ('NI') and<br>
associated preferred cost ('P*cost'). The preferred input power ('PI') and<br>
preferred input speed ('NI') comprises the candidate input power and<br>
candidate input speed that result in a minimum power cost for the candidate<br>
operating range state.<br>
[0073] Fig. 10 schematically shows power flow and power losses through<br>
hybrid powertrain system, in context of the exemplary powertrain system<br>
described above. There is a first power flow path from a fuel storage system 9<br>
which transfers fuel power ('PFUEL') to the engine 14 which transfers input<br>
power ('Pi') to the transmission 10. The power loss in the first flow path<br>
comprises engine power losses ('PLOSS ENG')- There is a second power flow<br>
<br>
 <br>
path which transfers electric power ('PBAT') from the ESD 74 to the TPIM 19<br>
which transfers electric power ('PINV ELEC') to the first and second electric<br>
machines 56 and 72 which transfer motor mechanical power ('PMOTOR MECH')<br>
to the transmission 10. The power losses in the second power flow path<br>
include battery power losses ('PLOSS BATT') and electric motor power losses<br>
('PLOSS MOTOR')- The TPIM 19 has an electric power load ('PHVLOAD') that<br>
services electric loads in the system ('HV Loads'), which can include a low<br>
voltage battery storage system (not shown). The transmission 10 has a<br>
mechanical inertia power input ('PINERTIA') in the system ('Inertia Storage')<br>
that preferably include inertias from the engine 14 and the transmission 10.<br>
The transmission 10 has mechanical power losses ('PLOSS MECH') and power<br>
output ('POUT'). The brake system 94 has brake power losses ('PLOSS BRAKE')<br>
and the remaining power is transferred to the driveline as axle power<br>
('PAXLE').<br>
[0074] The power cost inputs to the cost function 450 are determined based<br>
upon factors related to vehicle driveability, fuel economy, emissions, and<br>
battery usage. Power costs are assigned and associated with fuel and<br>
electrical power consumption and are associated with a specific operating<br>
points of the hybrid powertrain. Lower operating costs can be associated with<br>
lower fuel consumption at high conversion efficiencies, lower battery power<br>
usage, and lower emissions for each engine speed/load operating point, and<br>
take into account the candidate operating state of the engine 14. As described<br>
hereinabove, the power costs may include the engine power losses ('PLOSS<br>
ENG'), electric motor power losses ('PLOSS MOTOR'), battery power losses ('PLOSS<br>
BATT'), brake power losses ('PLOSS BRAKE'), and mechanical power losses<br>
<br>
 <br>
('PLOSS MECH') associated with operating the hybrid powertrain at a specific<br>
operating point which includes input speed, motor speeds, input torque, motor<br>
torques, a transmission operating range state and an engine state.<br>
[0075] The state stabilization and arbitration block 280 selects a preferred<br>
transmission operating range state ('Hybrid Range State Des') which<br>
preferably is the transmission operating range state associated with the<br>
minimum preferred cost for the allowed operating range states output from the<br>
operating range state analyzer 260, taking into account factors related to<br>
arbitrating effects of changing the operating range state on the operation of the<br>
transmission to effect stable powertrain operation. The preferred input speed<br>
('NiJDes') is the engine input speed associated with the preferred engine input<br>
comprising the preferred engine input speed ('NI'), the preferred engine input<br>
power ('PI'), and the preferred engine input torque (TI') that is responsive<br>
to and preferably meets the operator torque request for the selected preferred<br>
operating range state.<br>
[0076] Fig. 11 graphically shows a penalty cost determination scheme 500 to<br>
determine the penalty costs ('Penalty Costs'). The penalty cost determination<br>
scheme 500 determines the penalty cost for each candidate powertrain system<br>
operating point. The powertrain system operating point can include the<br>
operating range state of the transmission 10 determined by the strategic<br>
optimization control scheme 310 and the engine operating point determined by<br>
the tactical control scheme 330.<br>
[0077] The penalty cost determination scheme 500 determines preferred<br>
operating ranges and associated penalty costs for operating points for each of a<br>
plurality of powertrain system components. The preferred operating ranges<br>
 <br>
for the powertrain system components includes a preferred input torque range<br>
from a minimum input torque (Ti Min(j)') to a maximum input torque (Ti<br>
Max(j)'), a preferred first electric machine motor torque range from a<br>
minimum first electric machine motor torque ('Ta Min(j)') to a maximum first<br>
electric machine motor torque ('Ta Max(j)'), a preferred second electric<br>
machine motor torque range from a minimum second electric machine motor<br>
torque (Tb Min(j)') to a maximum second electric machine motor torque (Tb<br>
Max(j)'), and a preferred transmission clutch torque range from a minimum<br>
transmission clutch torque ('Tel Min(j)') to a maximum transmission clutch<br>
torque ('Tel Max(j)'), each of which are determined based on the powertrain<br>
system operating point of the current iteration (j). The preferred operating<br>
ranges for powertrain system components further includes a preferred ESD<br>
output power range from a minimum ESD output power ('PBAT MIN') to a<br>
maximum ESD output power ('PBAT MAX').<br>
[0078] The penalty cost determination scheme 500 determines the penalty<br>
costs preferably in units of power (for example, kilowatts of power) for each<br>
candidate powertrain system operating point and can be used during each<br>
search iteration in the strategic optimization control scheme 310 and the<br>
tactical control scheme 330. The penalty cost determination scheme 500<br>
includes penalty costs associated with an input torque cost function ('Ti (j)<br>
Penalty Costs') 508, a clutch torque cost function ('Tel (j) Penalty Costs') 510,<br>
a first electric machine torque cost function ('Ta (j) Penalty Costs')512, a<br>
second electric machine torque cost function ('Tb (j) Penalty Costs') 514 and<br>
an ESD output power cost function ('PBAT 0) Penalty Costs') 516.<br>
 <br>
[0079] The penalty costs are costs associated with operating outside the<br>
preferred operating ranges for powertrain system components. The penalty<br>
costs can be determined utilizing different cost functions for each preferred<br>
operating range and can consider the proximity of the determined powertrain<br>
system component operating point to the maximum or minimum that is being<br>
violated.<br>
[0080] The input torque cost function 508 determines an input torque penalty<br>
cost for the input torque Ti (j), the minimum input torque Ti Min (j), and the<br>
maximum input torque Ti Max (j) based on the engine operating point of the<br>
search current iteration (j). When the input torque Ti (j) is within the preferred<br>
input torque range from the minimum input torque Ti Min (j) to the maximum<br>
input torque Ti Max (j), the input torque cost function 508 sets the input<br>
torque penalty cost to zero. When the input torque Ti (j) is outside the<br>
preferred input torque range, the input torque cost function 508 determines the<br>
input torque penalty cost based on the proximity of the input torque Ti (j) to<br>
the violated one of the minimum input torque Ti Min (j) or the maximum input<br>
torque Ti Max (j).<br>
[0081] The transmission clutch torque cost function 510 determines a<br>
transmission clutch torque penalty cost for the clutch torque Tel (j), the<br>
minimum transmission clutch torque Tel Min (j), and the maximum input<br>
torque Tel Max (j) based on the engine operating point of the search current<br>
iteration (j). When the transmission clutch torque Tel (j) is within the<br>
preferred transmission clutch torque range from the minimum transmission<br>
clutch torque Tel Min (j) to the maximum transmission clutch torque Tel Max<br>
(j), the transmission clutch torque cost function 510 sets the clutch torque<br>
<br>
 <br>
penalty cost to zero. When the transmission clutch torque Tel (j) is outside the<br>
preferred transmission clutch torque range, the transmission clutch torque cost<br>
function 510 determines the clutch torque penalty cost based on the proximity<br>
of the transmission clutch torque Tel (j) to the violated one of the minimum<br>
transmission clutch torque Tel Min (j) and the maximum transmission clutch<br>
torque Tel Max (j)- The penalty cost determination scheme 500 can utilize a<br>
single transmission clutch torque function or can utilize multiple transmission<br>
clutch torque functions wherein the clutch torque functions determine clutch<br>
torque penalty costs for each applied clutch of the transmission 10.<br>
[0082] The first electric machine motor torque cost function 512 determines<br>
a first electric machine motor torque penalty cost for the first electric machine<br>
motor torque Ta (j), the minimum first electric machine motor torque Ta Min<br>
(j), and the maximum first electric machine motor torque Ta Max (j) based on<br>
the engine operating point of the search current iteration (j). When the first<br>
electric machine motor torque Ta (j) is within the preferred first electric<br>
machine motor torque range from the minimum first electric machine motor<br>
torque Ta Min (j) to the maximum first electric machine motor torque Ta Max<br>
(j), the first electric machine motor torque cost function 512 sets the first<br>
electric machine motor torque penalty cost to zero. When the first electric<br>
machine motor torque Ta (j) is outside the preferred first electric machine<br>
motor torque range, the first electric machine motor torque cost function 512<br>
determines the first electric machine motor torque penalty cost based on the<br>
proximity of the first electric machine motor torque Ta (j) to the violated one<br>
of the minimum first electric machine motor torque Ta Min (j) and maximum<br>
first electric machine motor torque Ta Max (j).<br>
<br>
 <br>
[0083] The second electric machine motor torque cost function 514<br>
determines a second electric machine motor torque penalty cost for the second<br>
electric machine motor torque Tb (j), the minimum second electric machine<br>
motor torque Tb Min (j), and the maximum second electric machine motor<br>
torque Tb Max (j) based on the engine operating point of the search current<br>
iteration (j). When the second electric machine motor torque Tb (j) is within<br>
the preferred second electric machine motor torque range from the minimum<br>
second electric machine motor torque Tb Min (j) to the maximum second<br>
electric machine motor torque Tb Max (j), the second electric machine motor<br>
torque cost function 514 sets the second electric machine motor torque penalty<br>
cost to zero. When the second electric machine motor torque Tb (j) is outside<br>
the preferred second electric machine motor torque range, the second electric<br>
machine motor torque cost function 514 determines the second electric<br>
machine motor torque penalty cost based on the proximity of the second<br>
electric machine motor torque Tb (j) to the violated one of the minimum<br>
second electric machine motor torque Tb Min (j) and the maximum second<br>
electric machine motor torque Tb Max (j).<br>
[0084] The ESD output power cost function 516 determines an ESD power<br>
penalty cost for the ESD power PBAT G) based on the engine operating point of<br>
the search current iteration (j). When the ESD output power PBAT (j) is within<br>
preferred ESD output power range from the minimum ESD output power PBAT<br>
Min to the maximum ESD output power PBAT MAX, the ESD output power cost<br>
function 516 sets the ESD output power penalty cost to zero. When the ESD<br>
output power PBAT (j) is outside preferred ESD output power range PBAT (j)<br>
from the minimum ESD output power PBAT Min to the maximum output ESD<br>
<br>
 <br>
power PBATMax, the ESD output power cost function 516 determines the ESD<br>
output power penalty cost based on the proximity of the ESD output power<br>
PBAT (j) to the violated one of the minimum ESD output power PBAT Min and<br>
the maximum ESD output power PBAT Max.<br>
[0085] The penalty cost determination scheme 500 determines the penalty<br>
costs ('Penalty Costs'), by summing the input torque penalty cost, the clutch<br>
torque penalty cost, the first electric machine motor torque penalty cost, the<br>
second electric machine motor torque penalty cost, and the ESD power penalty<br>
cost.<br>
[0086] The disclosure has described certain preferred embodiments and<br>
modifications thereto. Further modifications and alterations may occur to<br>
others upon reading and understanding the specification. Therefore, it is<br>
intended that the disclosure not be limited to the particular embodiment(s)<br>
disclosed as the best mode contemplated for carrying out this disclosure, but<br>
that the disclosure will include all embodiments falling within the scope of the<br>
appended claims.<br>
 <br>
CLAIMS<br>
1. Method for controlling a powertrain system comprising an engine, a<br>
torque machine, a transmission device and an energy storage device, the<br>
transmission device configured to transfer power among the engine, the<br>
torque machine and an output member to generate an output torque, the<br>
method comprising:<br>
monitoring an operator torque request;<br>
selecting a candidate powertrain system operating point;<br>
determining a preferred engine torque range, a preferred torque machine<br>
torque range, and a preferred energy storage device output power<br>
range;<br>
determining an engine torque, a torque machine torque, and a energy<br>
storage device output power based upon the operator torque request<br>
and the candidate powertrain system operating point;<br>
determining power costs for operating the powertrain at the candidate<br>
powertrain system operating point based on the determined engine<br>
torque, the determined torque machine torque, and the determined<br>
energy storage device output power range;<br>
determining penalty costs relative to the preferred engine torque range,<br>
the preferred torque machine torque range, and the preferred energy<br>
storage device output power range for operating the powertrain at the<br>
candidate powertrain system operating point; and<br>
 <br>
determining an operating cost for operating the powertrain at the<br>
candidate powertrain system operating point based on the power<br>
costs and the penalty costs.<br>
2.	The method of claim 1, wherein the candidate powertrain system<br>
operating point comprises at least one of a candidate engine operating<br>
point and a candidate transmission operating range state.<br>
3.	The method of claim 2, wherein the candidate engine operating point<br>
comprises at least one of a candidate engine state, a candidate engine<br>
speed, a candidate engine torque, and a candidate engine power.<br>
4.	The method of claim 3, wherein the candidate engine operating point<br>
comprises an engine torque when the transmission device is in a fixed-<br>
gear mode.<br>
5.	The method of claim 3, wherein the candidate engine operating point<br>
comprises one of an engine power and an engine speed when the<br>
transmission device is in a continuously variable mode.<br>
6.	The method of claim 3, wherein the candidate engine state comprises at<br>
least one of a fueled engine state, a fuel-cutoff engine state, an all-<br>
cylinder engine state, and a cylinder deactivation engine state.<br>
 <br>
7.	The method of claim 2, wherein the candidate transmission operating<br>
range state comprises one of a fixed gear mode, a continuously variable<br>
mode, and an engine off mode.<br>
8.	The method of claim 1, wherein determining the penalty cost relative to<br>
the preferred engine torque range comprises determining the penalty cost<br>
based upon a proximity of the determined engine torque to the preferred<br>
engine torque range.<br>
9.	The method of claim 1, wherein determining the penalty cost relative to<br>
the preferred torque machine torque range comprises determining the<br>
penalty cost based upon a proximity of the determined torque machine<br>
torque to the preferred torque machine torque range.<br>
10.	The method of claim 1, wherein determining the penalty cost relative to<br>
the preferred energy storage device output power range comprises<br>
determining the penalty cost based upon a proximity of the determined<br>
energy storage device output power to the preferred energy storage<br>
device output power range.<br>
11.	The method of claim 1, wherein determining the preferred engine torque<br>
range and the preferred torque machine torque range comprises<br>
determining the preferred engine torque range and the preferred torque<br>
machine torque range based upon the candidate powertrain system<br>
operating point.<br>
<br>
 <br>
12. Method for controlling a powertrain system including a transmission<br>
device, an engine, and a torque machine coupled to an energy storage<br>
device, the transmission device including torque transfer clutches, the<br>
transmission device configured to transfer power among an output<br>
member, the engine and the torque machine through selective application<br>
of the torque transfer clutches, the method comprising:<br>
monitoring an operator torque request;<br>
selecting a candidate powertrain system operating point;<br>
determining a preferred engine torque range, a preferred torque machine<br>
torque range, a preferred energy storage device output power range,<br>
and a preferred transmission device clutch torque range;<br>
determining an engine torque, a torque machine torque, an energy<br>
storage device output power, and a transmission device clutch torque<br>
based upon the operator torque request and the candidate powertrain<br>
system operating point;<br>
determining power costs for operating the engine at the determined<br>
engine torque, the torque machine at the determined torque machine<br>
torque, the energy storage device at the determined energy storage<br>
device output power, and the transmission device at the determined<br>
clutch torque;<br>
determining penalty costs associated with operating the powertrain at the<br>
candidate system operating point based on operating the engine<br>
outside the preferred engine torque range, operating the electric<br>
machine outside the preferred electric machine range, operating the<br>
<br>
 <br>
preferred energy storage device outside the preferred energy storage<br>
device output power range, and operating the transmission device<br>
outside the preferred transmission device clutch torque range; and<br>
determining an operating cost for operating the powertrain at the<br>
powertrain system operating point based on the power costs and the<br>
penalty costs.<br>
13.	The method of claim 12 wherein determining the penalty cost relative to<br>
the preferred energy storage device output power range comprises<br>
determining the penalty cost based upon a proximity of the determined<br>
transmission device clutch torque to the preferred transmission device<br>
clutch torque range.<br>
14.	The method of claim 12, wherein determining the preferred transmission<br>
device clutch torque limits range comprises determining the preferred<br>
transmission device clutch torque limits range based on the candidate<br>
powertrain system operating point.<br>
15.	The method of claim 12, wherein the candidate powertrain system<br>
operating point comprises at least one of a candidate engine operating<br>
point and a candidate transmission operating range state.<br>
16.	The method of claim 15, wherein the candidate engine operating point<br>
comprises at least one of a candidate engine state, a candidate engine<br>
speed, a candidate engine torque, and a candidate engine power.<br>
<br>
 <br>
17.	The method of claim 16, wherein the candidate engine state comprises at<br>
least one of a fueled engine state, a fuel-cutoff engine state, an all-<br>
cylinder engine state, and a cylinder deactivation engine state.<br>
18.	The method of claim 15, wherein the candidate transmission operating<br>
range state comprises one of a fixed gear mode, a continuously variable<br>
mode, and an engine off mode.<br>
19.	Method for controlling a powertrain system comprising an engine, a<br>
torque machine, a transmission device and an energy storage device, the<br>
transmission device configured to transfer power among the engine, the<br>
torque machine and an output member to generate an output torque, the<br>
method comprising:<br>
monitoring an operator torque request;<br>
selecting a candidate engine operating point;<br>
determining a preferred engine torque range, a preferred torque machine<br>
torque range, and a preferred energy storage device output power<br>
range;<br>
determining an engine torque, a torque machine torque, and an energy<br>
storage device output power based upon the operator torque request<br>
and the candidate engine operating point;<br>
determining power costs for operating the engine at the determined<br>
engine torque, the torque machine at the determined torque machine<br>
 <br>
torque, and the energy storage device at the determined energy<br>
storage device output power;<br>
determining penalty costs for operating the powertrain system outside<br>
the preferred engine torque range, the preferred torque machine<br>
torque range, and the preferred energy storage device output power<br>
range; and<br>
determining an operating cost for operating the powertrain at the engine<br>
operating point based on the power costs and the penalty costs.<br>
20. The method of claim 19, wherein the candidate engine operating point<br>
comprises at least one of a candidate engine state, a candidate engine<br>
speed, a candidate engine torque, and a candidate engine power.<br>
 <br>
A method for controlling a powertrain system includes monitoring an<br>
operator torque request, selecting a candidate powertrain system operating<br>
point, and determining a preferred engine torque range, a preferred torque<br>
machine torque range, and a preferred energy storage device output power<br>
range. The method further includes determining an engine torque, a torque<br>
machine torque, and an energy storage device output power based upon the<br>
operator torque request and the candidate powertrain system operating point.<br>
Power costs for operating the powertrain at the candidate powertrain system<br>
operating point are determined based on the determined engine torque, the<br>
determined torque machine torque, and the determined energy storage device<br>
output power range. Penalty costs are determined relative to the preferred<br>
engine torque range, the preferred torque machine torque range, and the<br>
preferred energy storage device output power range for operating the<br>
powertrain at the candidate powertrain system operating point. And, an<br>
operating cost for operating the powertrain at the candidate powertrain system<br>
operating point is determined based on the power costs and the penalty costs.</td>
			</tr>
		</table>	
		<br>
		<h3>Documents:</h3>
				<p><a href="http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=CG8s6Eh4WKWxn6MDOfW9jA==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==" target="_blank" style="word-wrap:break-word;">http://ipindiaonline.gov.in/patentsearch/GrantedSearch/viewdoc.aspx?id=CG8s6Eh4WKWxn6MDOfW9jA==&amp;amp;loc=wDBSZCsAt7zoiVrqcFJsRw==</a></p>
		<br>
		<div class="pull-left">
			<a href="272006-a-motorcycle-with-a-front-cover-having-a-hole-and-a-bracket-having-a-portion-passing-through-the-hole.html">&laquo; Previous Patent</a>
		</div>
		<div class="pull-right">
			<a href="272008-method-for-distilling-material-comprising-a-liquid-fd-to-be-distilled-using-a-gas-container-system.html">Next Patent &raquo;</a>
		</div>			
	</div><!-- /span8 -->
	<div class="span4">
		<div class="well infobox">
			<table class="table table-condensed">
				<tr>
					<th>Patent Number</th>
					<td>272007</td>
				</tr>
				<tr>
					<th>Indian Patent Application Number</th>
					<td>1933/KOL/2008</td>
				</tr>
				<tr>
					<th>PG Journal Number</th>
					<td>12/2016</td>
				</tr>
				<tr>
					<th>Publication Date</th>
					<td>18-Mar-2016</td>
				</tr>
				<tr>
					<th>Grant Date</th>
					<td>14-Mar-2016</td>
				</tr>
				<tr>
					<th>Date of Filing</th>
					<td>03-Nov-2008</td>
				</tr>
				<tr>
					<th>Name of Patentee</th>
					<td>GM GLOBAL TECHNOLOGY OPERATIONS, INC.</td>
				</tr>
				<tr>
					<th>Applicant Address</th>
					<td>300 GM RENAISSANCE CENTER, DETROIT, MICHIGAN 48265-3000</td>
				</tr>
				<tr>
					<td colspan=2>
								<h5>Inventors:</h5>
								<table class="table">
									<tr>
										<th>#</th>
										<th>Inventor's Name</th>
										<th>Inventor's Address</th>
									</tr>

										<tr>
											<td>1</td>
											<td>KEE YOUNG KIM</td>
											<td>1699 SCIO RIDGE RD. ANN ARBOR, MI 48103</td>
										</tr>
										<tr>
											<td>2</td>
											<td>ANTHONY H. HEAP</td>
											<td>2969 LESLIE PARK CIRCLE ANN ARBOR, MICHIGAN 48105</td>
										</tr>
								</table>
					</td>
				</tr>
				<tr>
					<th>PCT International Classification Number</th>
					<td>B60W20/00; B60W10/06; B60W10/08</td>
				</tr>
				<tr>
					<th>PCT International Application Number</th>
					<td>N/A</td>
				</tr>
				<tr>
					<th>PCT International Filing date</th>
					<td></td>
				</tr>
				<tr>
					<td colspan=2>
						<h5>PCT Conventions:</h5>
						<table class="table">
							<tr>
								<th>#</th>
								<th>PCT Application Number</th>
								<th>Date of Convention</th>
								<th>Priority Country</th>
							</tr>

								<tr>
									<td>1</td>
									<td>60/985258</td>
									<td>2007-11-04</td>
								    <td>U.S.A.</td>
								</tr>

						</table>
					</td>
				</tr>
			</table>
		</div><!-- /well -->
	</div><!-- /span4 -->
</div><!-- /row-fluid -->

        </div>

      </div><!--/row-->

      <footer class="footer">

        <style>
        .allindianpatents-footer { width: 320px; height: 50px; }
        @media(min-width: 500px) { .allindianpatents-footer { width: 468px; height: 60px; } }
        @media(min-width: 800px) { .allindianpatents-footer { width: 728px; height: 90px; } }
        </style>
        <center>
        </center>

        <p>&copy; All Indian Patents, 2013-2021.</p>
        <p>Patent data available in the public domain from Indian Patents Office, Department of Industrial Policy and Promotions, Ministry of Commerce and Industry, Government of India.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/application-95f297ff0d8d2015987f04b30593c800.js" type="text/javascript"></script>

    <!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=8902313; 
    var sc_invisible=1; 
    var sc_security="3c1f8147"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="web stats"
    href="http://statcounter.com/free-web-stats/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/8902313/0/3c1f8147/1/"
    alt="web stats"></a></div></noscript>
    <!-- End of StatCounter Code for Default Guide -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-244143-31', 'allindianpatents.com');
      ga('send', 'pageview');

    </script>

  </body>

<!-- Mirrored from www.allindianpatents.com/patents/272007-method-for-controlling-a-powertrain-system-based-on-penalty-costs by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 04 Apr 2024 23:56:38 GMT -->
</html>
